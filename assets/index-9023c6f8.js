function A7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function T7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var IE={exports:{}},h1={},RE={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm=Symbol.for("react.element"),N7=Symbol.for("react.portal"),P7=Symbol.for("react.fragment"),E7=Symbol.for("react.strict_mode"),M7=Symbol.for("react.profiler"),L7=Symbol.for("react.provider"),O7=Symbol.for("react.context"),I7=Symbol.for("react.forward_ref"),R7=Symbol.for("react.suspense"),j7=Symbol.for("react.memo"),D7=Symbol.for("react.lazy"),LC=Symbol.iterator;function F7(t){return t===null||typeof t!="object"?null:(t=LC&&t[LC]||t["@@iterator"],typeof t=="function"?t:null)}var jE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DE=Object.assign,FE={};function ah(t,e,n){this.props=t,this.context=e,this.refs=FE,this.updater=n||jE}ah.prototype.isReactComponent={};ah.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ah.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BE(){}BE.prototype=ah.prototype;function fS(t,e,n){this.props=t,this.context=e,this.refs=FE,this.updater=n||jE}var pS=fS.prototype=new BE;pS.constructor=fS;DE(pS,ah.prototype);pS.isPureReactComponent=!0;var OC=Array.isArray,zE=Object.prototype.hasOwnProperty,mS={current:null},$E={key:!0,ref:!0,__self:!0,__source:!0};function VE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zE.call(e,r)&&!$E.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nm,type:t,key:s,ref:o,props:i,_owner:mS.current}}function B7(t,e){return{$$typeof:nm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gS(t){return typeof t=="object"&&t!==null&&t.$$typeof===nm}function z7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var IC=/\/+/g;function yb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?z7(""+t.key):e.toString(36)}function k0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nm:case N7:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+yb(o,0):r,OC(i)?(n="",t!=null&&(n=t.replace(IC,"$&/")+"/"),k0(i,e,n,"",function(c){return c})):i!=null&&(gS(i)&&(i=B7(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(IC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",OC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+yb(s,a);o+=k0(s,e,n,l,i)}else if(l=F7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+yb(s,a++),o+=k0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fg(t,e,n){if(t==null)return t;var r=[],i=0;return k0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ai={current:null},_0={transition:null},V7={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:_0,ReactCurrentOwner:mS};function UE(){throw Error("act(...) is not supported in production builds of React.")}Ct.Children={map:fg,forEach:function(t,e,n){fg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fg(t,function(){e++}),e},toArray:function(t){return fg(t,function(e){return e})||[]},only:function(t){if(!gS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ct.Component=ah;Ct.Fragment=P7;Ct.Profiler=M7;Ct.PureComponent=fS;Ct.StrictMode=E7;Ct.Suspense=R7;Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V7;Ct.act=UE;Ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=DE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zE.call(e,l)&&!$E.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nm,type:t.type,key:i,ref:s,props:r,_owner:o}};Ct.createContext=function(t){return t={$$typeof:O7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:L7,_context:t},t.Consumer=t};Ct.createElement=VE;Ct.createFactory=function(t){var e=VE.bind(null,t);return e.type=t,e};Ct.createRef=function(){return{current:null}};Ct.forwardRef=function(t){return{$$typeof:I7,render:t}};Ct.isValidElement=gS;Ct.lazy=function(t){return{$$typeof:D7,_payload:{_status:-1,_result:t},_init:$7}};Ct.memo=function(t,e){return{$$typeof:j7,type:t,compare:e===void 0?null:e}};Ct.startTransition=function(t){var e=_0.transition;_0.transition={};try{t()}finally{_0.transition=e}};Ct.unstable_act=UE;Ct.useCallback=function(t,e){return ai.current.useCallback(t,e)};Ct.useContext=function(t){return ai.current.useContext(t)};Ct.useDebugValue=function(){};Ct.useDeferredValue=function(t){return ai.current.useDeferredValue(t)};Ct.useEffect=function(t,e){return ai.current.useEffect(t,e)};Ct.useId=function(){return ai.current.useId()};Ct.useImperativeHandle=function(t,e,n){return ai.current.useImperativeHandle(t,e,n)};Ct.useInsertionEffect=function(t,e){return ai.current.useInsertionEffect(t,e)};Ct.useLayoutEffect=function(t,e){return ai.current.useLayoutEffect(t,e)};Ct.useMemo=function(t,e){return ai.current.useMemo(t,e)};Ct.useReducer=function(t,e,n){return ai.current.useReducer(t,e,n)};Ct.useRef=function(t){return ai.current.useRef(t)};Ct.useState=function(t){return ai.current.useState(t)};Ct.useSyncExternalStore=function(t,e,n){return ai.current.useSyncExternalStore(t,e,n)};Ct.useTransition=function(){return ai.current.useTransition()};Ct.version="18.3.1";RE.exports=Ct;var W=RE.exports;const nt=hS(W),f1=A7({__proto__:null,default:nt},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U7=W,q7=Symbol.for("react.element"),W7=Symbol.for("react.fragment"),H7=Object.prototype.hasOwnProperty,K7=U7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G7={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)H7.call(e,r)&&!G7.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:q7,type:t,key:s,ref:o,props:i,_owner:K7.current}}h1.Fragment=W7;h1.jsx=qE;h1.jsxs=qE;IE.exports=h1;var w=IE.exports,p2={},WE={exports:{}},Xi={},HE={exports:{}},KE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,ie){var q=Y.length;Y.push(ie);e:for(;0<q;){var G=q-1>>>1,P=Y[G];if(0<i(P,ie))Y[G]=ie,Y[q]=P,q=G;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ie=Y[0],q=Y.pop();if(q!==ie){Y[0]=q;e:for(var G=0,P=Y.length,U=P>>>1;G<U;){var K=2*(G+1)-1,J=Y[K],re=K+1,se=Y[re];if(0>i(J,q))re<P&&0>i(se,J)?(Y[G]=se,Y[re]=q,G=re):(Y[G]=J,Y[K]=q,G=K);else if(re<P&&0>i(se,q))Y[G]=se,Y[re]=q,G=re;else break e}}return ie}function i(Y,ie){var q=Y.sortIndex-ie.sortIndex;return q!==0?q:Y.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Y){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=Y)r(c),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(c)}}function C(Y){if(g=!1,S(Y),!p)if(n(l)!==null)p=!0,Z(A);else{var ie=n(c);ie!==null&&ne(C,ie.startTime-Y)}}function A(Y,ie){p=!1,g&&(g=!1,y(N),N=-1),f=!0;var q=h;try{for(S(ie),d=n(l);d!==null&&(!(d.expirationTime>ie)||Y&&!L());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var P=G(d.expirationTime<=ie);ie=t.unstable_now(),typeof P=="function"?d.callback=P:d===n(l)&&r(l),S(ie)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var K=n(c);K!==null&&ne(C,K.startTime-ie),U=!1}return U}finally{d=null,h=q,f=!1}}var O=!1,M=null,N=-1,D=5,V=-1;function L(){return!(t.unstable_now()-V<D)}function E(){if(M!==null){var Y=t.unstable_now();V=Y;var ie=!0;try{ie=M(!0,Y)}finally{ie?B():(O=!1,M=null)}}else O=!1}var B;if(typeof x=="function")B=function(){x(E)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Q=I.port2;I.port1.onmessage=E,B=function(){Q.postMessage(null)}}else B=function(){v(E,0)};function Z(Y){M=Y,O||(O=!0,B())}function ne(Y,ie){N=v(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Z(A))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var ie=3;break;default:ie=h}var q=h;h=ie;try{return Y()}finally{h=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var q=h;h=Y;try{return ie()}finally{h=q}},t.unstable_scheduleCallback=function(Y,ie,q){var G=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?G+q:G):q=G,Y){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=q+P,Y={id:u++,callback:ie,priorityLevel:Y,startTime:q,expirationTime:P,sortIndex:-1},q>G?(Y.sortIndex=q,e(c,Y),n(l)===null&&Y===n(c)&&(g?(y(N),N=-1):g=!0,ne(C,q-G))):(Y.sortIndex=P,e(l,Y),p||f||(p=!0,Z(A))),Y},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(Y){var ie=h;return function(){var q=h;h=ie;try{return Y.apply(this,arguments)}finally{h=q}}}})(KE);HE.exports=KE;var Y7=HE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X7=W,Gi=Y7;function Le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GE=new Set,ap={};function ru(t,e){Fd(t,e),Fd(t+"Capture",e)}function Fd(t,e){for(ap[t]=e,t=0;t<e.length;t++)GE.add(e[t])}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m2=Object.prototype.hasOwnProperty,J7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RC={},jC={};function Q7(t){return m2.call(jC,t)?!0:m2.call(RC,t)?!1:J7.test(t)?jC[t]=!0:(RC[t]=!0,!1)}function Z7(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eF(t,e,n,r){if(e===null||typeof e>"u"||Z7(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function li(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cr[t]=new li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cr[e]=new li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cr[t]=new li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cr[t]=new li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cr[t]=new li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cr[t]=new li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cr[t]=new li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cr[t]=new li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cr[t]=new li(t,5,!1,t.toLowerCase(),null,!1,!1)});var yS=/[\-:]([a-z])/g;function vS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yS,vS);Cr[e]=new li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yS,vS);Cr[e]=new li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yS,vS);Cr[e]=new li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cr[t]=new li(t,1,!1,t.toLowerCase(),null,!1,!1)});Cr.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cr[t]=new li(t,1,!1,t.toLowerCase(),null,!0,!0)});function bS(t,e,n,r){var i=Cr.hasOwnProperty(e)?Cr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eF(e,n,i,r)&&(n=null),r||i===null?Q7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fa=X7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pg=Symbol.for("react.element"),Zu=Symbol.for("react.portal"),ed=Symbol.for("react.fragment"),xS=Symbol.for("react.strict_mode"),g2=Symbol.for("react.profiler"),YE=Symbol.for("react.provider"),XE=Symbol.for("react.context"),wS=Symbol.for("react.forward_ref"),y2=Symbol.for("react.suspense"),v2=Symbol.for("react.suspense_list"),SS=Symbol.for("react.memo"),Va=Symbol.for("react.lazy"),JE=Symbol.for("react.offscreen"),DC=Symbol.iterator;function Yh(t){return t===null||typeof t!="object"?null:(t=DC&&t[DC]||t["@@iterator"],typeof t=="function"?t:null)}var vn=Object.assign,vb;function yf(t){if(vb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vb=e&&e[1]||""}return`
`+vb+t}var bb=!1;function xb(t,e){if(!t||bb)return"";bb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yf(t):""}function tF(t){switch(t.tag){case 5:return yf(t.type);case 16:return yf("Lazy");case 13:return yf("Suspense");case 19:return yf("SuspenseList");case 0:case 2:case 15:return t=xb(t.type,!1),t;case 11:return t=xb(t.type.render,!1),t;case 1:return t=xb(t.type,!0),t;default:return""}}function b2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ed:return"Fragment";case Zu:return"Portal";case g2:return"Profiler";case xS:return"StrictMode";case y2:return"Suspense";case v2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XE:return(t.displayName||"Context")+".Consumer";case YE:return(t._context.displayName||"Context")+".Provider";case wS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case SS:return e=t.displayName||null,e!==null?e:b2(t.type)||"Memo";case Va:e=t._payload,t=t._init;try{return b2(t(e))}catch{}}return null}function nF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b2(e);case 8:return e===xS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rF(t){var e=QE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mg(t){t._valueTracker||(t._valueTracker=rF(t))}function ZE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=QE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ry(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x2(t,e){var n=e.checked;return vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eM(t,e){e=e.checked,e!=null&&bS(t,"checked",e,!1)}function w2(t,e){eM(t,e);var n=Sl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?S2(t,e.type,n):e.hasOwnProperty("defaultValue")&&S2(t,e.type,Sl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function S2(t,e,n){(e!=="number"||ry(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vf=Array.isArray;function Sd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function k2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return vn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Le(92));if(vf(n)){if(1<n.length)throw Error(Le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sl(n)}}function tM(t,e){var n=Sl(e.value),r=Sl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $C(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gg,rM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gg=gg||document.createElement("div"),gg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iF=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(t){iF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Of[e]=Of[t]})});function iM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Of.hasOwnProperty(t)&&Of[t]?(""+e).trim():e+"px"}function sM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=iM(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sF=vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function C2(t,e){if(e){if(sF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function A2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T2=null;function kS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var N2=null,kd=null,_d=null;function VC(t){if(t=sm(t)){if(typeof N2!="function")throw Error(Le(280));var e=t.stateNode;e&&(e=v1(e),N2(t.stateNode,t.type,e))}}function oM(t){kd?_d?_d.push(t):_d=[t]:kd=t}function aM(){if(kd){var t=kd,e=_d;if(_d=kd=null,VC(t),e)for(t=0;t<e.length;t++)VC(e[t])}}function lM(t,e){return t(e)}function cM(){}var wb=!1;function uM(t,e,n){if(wb)return t(e,n);wb=!0;try{return lM(t,e,n)}finally{wb=!1,(kd!==null||_d!==null)&&(cM(),aM())}}function cp(t,e){var n=t.stateNode;if(n===null)return null;var r=v1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Le(231,e,typeof n));return n}var P2=!1;if(la)try{var Xh={};Object.defineProperty(Xh,"passive",{get:function(){P2=!0}}),window.addEventListener("test",Xh,Xh),window.removeEventListener("test",Xh,Xh)}catch{P2=!1}function oF(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var If=!1,iy=null,sy=!1,E2=null,aF={onError:function(t){If=!0,iy=t}};function lF(t,e,n,r,i,s,o,a,l){If=!1,iy=null,oF.apply(aF,arguments)}function cF(t,e,n,r,i,s,o,a,l){if(lF.apply(this,arguments),If){if(If){var c=iy;If=!1,iy=null}else throw Error(Le(198));sy||(sy=!0,E2=c)}}function iu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function UC(t){if(iu(t)!==t)throw Error(Le(188))}function uF(t){var e=t.alternate;if(!e){if(e=iu(t),e===null)throw Error(Le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return UC(i),t;if(s===r)return UC(i),e;s=s.sibling}throw Error(Le(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?t:e}function hM(t){return t=uF(t),t!==null?fM(t):null}function fM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fM(t);if(e!==null)return e;t=t.sibling}return null}var pM=Gi.unstable_scheduleCallback,qC=Gi.unstable_cancelCallback,dF=Gi.unstable_shouldYield,hF=Gi.unstable_requestPaint,Dn=Gi.unstable_now,fF=Gi.unstable_getCurrentPriorityLevel,_S=Gi.unstable_ImmediatePriority,mM=Gi.unstable_UserBlockingPriority,oy=Gi.unstable_NormalPriority,pF=Gi.unstable_LowPriority,gM=Gi.unstable_IdlePriority,p1=null,yo=null;function mF(t){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(p1,t,void 0,(t.current.flags&128)===128)}catch{}}var Ks=Math.clz32?Math.clz32:vF,gF=Math.log,yF=Math.LN2;function vF(t){return t>>>=0,t===0?32:31-(gF(t)/yF|0)|0}var yg=64,vg=4194304;function bf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ay(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=bf(a):(s&=o,s!==0&&(r=bf(s)))}else o=n&~i,o!==0?r=bf(o):s!==0&&(r=bf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ks(e),i=1<<n,r|=t[n],e&=~i;return r}function bF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ks(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=bF(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function M2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yM(){var t=yg;return yg<<=1,!(yg&4194240)&&(yg=64),t}function Sb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ks(e),t[e]=n}function wF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ks(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function CS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ks(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Vt=0;function vM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bM,AS,xM,wM,SM,L2=!1,bg=[],cl=null,ul=null,dl=null,up=new Map,dp=new Map,Ka=[],SF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WC(t,e){switch(t){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":up.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dp.delete(e.pointerId)}}function Jh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sm(e),e!==null&&AS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kF(t,e,n,r,i){switch(e){case"focusin":return cl=Jh(cl,t,e,n,r,i),!0;case"dragenter":return ul=Jh(ul,t,e,n,r,i),!0;case"mouseover":return dl=Jh(dl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return up.set(s,Jh(up.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,dp.set(s,Jh(dp.get(s)||null,t,e,n,r,i)),!0}return!1}function kM(t){var e=vc(t.target);if(e!==null){var n=iu(e);if(n!==null){if(e=n.tag,e===13){if(e=dM(n),e!==null){t.blockedOn=e,SM(t.priority,function(){xM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function C0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=O2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);T2=r,n.target.dispatchEvent(r),T2=null}else return e=sm(n),e!==null&&AS(e),t.blockedOn=n,!1;e.shift()}return!0}function HC(t,e,n){C0(t)&&n.delete(e)}function _F(){L2=!1,cl!==null&&C0(cl)&&(cl=null),ul!==null&&C0(ul)&&(ul=null),dl!==null&&C0(dl)&&(dl=null),up.forEach(HC),dp.forEach(HC)}function Qh(t,e){t.blockedOn===e&&(t.blockedOn=null,L2||(L2=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,_F)))}function hp(t){function e(i){return Qh(i,t)}if(0<bg.length){Qh(bg[0],t);for(var n=1;n<bg.length;n++){var r=bg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cl!==null&&Qh(cl,t),ul!==null&&Qh(ul,t),dl!==null&&Qh(dl,t),up.forEach(e),dp.forEach(e),n=0;n<Ka.length;n++)r=Ka[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ka.length&&(n=Ka[0],n.blockedOn===null);)kM(n),n.blockedOn===null&&Ka.shift()}var Cd=fa.ReactCurrentBatchConfig,ly=!0;function CF(t,e,n,r){var i=Vt,s=Cd.transition;Cd.transition=null;try{Vt=1,TS(t,e,n,r)}finally{Vt=i,Cd.transition=s}}function AF(t,e,n,r){var i=Vt,s=Cd.transition;Cd.transition=null;try{Vt=4,TS(t,e,n,r)}finally{Vt=i,Cd.transition=s}}function TS(t,e,n,r){if(ly){var i=O2(t,e,n,r);if(i===null)Lb(t,e,r,cy,n),WC(t,r);else if(kF(i,t,e,n,r))r.stopPropagation();else if(WC(t,r),e&4&&-1<SF.indexOf(t)){for(;i!==null;){var s=sm(i);if(s!==null&&bM(s),s=O2(t,e,n,r),s===null&&Lb(t,e,r,cy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Lb(t,e,r,null,n)}}var cy=null;function O2(t,e,n,r){if(cy=null,t=kS(r),t=vc(t),t!==null)if(e=iu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cy=t,null}function _M(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fF()){case _S:return 1;case mM:return 4;case oy:case pF:return 16;case gM:return 536870912;default:return 16}default:return 16}}var Qa=null,NS=null,A0=null;function CM(){if(A0)return A0;var t,e=NS,n=e.length,r,i="value"in Qa?Qa.value:Qa.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return A0=i.slice(t,1<r?1-r:void 0)}function T0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xg(){return!0}function KC(){return!1}function Ji(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xg:KC,this.isPropagationStopped=KC,this}return vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xg)},persist:function(){},isPersistent:xg}),e}var lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PS=Ji(lh),im=vn({},lh,{view:0,detail:0}),TF=Ji(im),kb,_b,Zh,m1=vn({},im,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ES,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zh&&(Zh&&t.type==="mousemove"?(kb=t.screenX-Zh.screenX,_b=t.screenY-Zh.screenY):_b=kb=0,Zh=t),kb)},movementY:function(t){return"movementY"in t?t.movementY:_b}}),GC=Ji(m1),NF=vn({},m1,{dataTransfer:0}),PF=Ji(NF),EF=vn({},im,{relatedTarget:0}),Cb=Ji(EF),MF=vn({},lh,{animationName:0,elapsedTime:0,pseudoElement:0}),LF=Ji(MF),OF=vn({},lh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IF=Ji(OF),RF=vn({},lh,{data:0}),YC=Ji(RF),jF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FF[t])?!!e[t]:!1}function ES(){return BF}var zF=vn({},im,{key:function(t){if(t.key){var e=jF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=T0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ES,charCode:function(t){return t.type==="keypress"?T0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?T0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$F=Ji(zF),VF=vn({},m1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XC=Ji(VF),UF=vn({},im,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ES}),qF=Ji(UF),WF=vn({},lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),HF=Ji(WF),KF=vn({},m1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GF=Ji(KF),YF=[9,13,27,32],MS=la&&"CompositionEvent"in window,Rf=null;la&&"documentMode"in document&&(Rf=document.documentMode);var XF=la&&"TextEvent"in window&&!Rf,AM=la&&(!MS||Rf&&8<Rf&&11>=Rf),JC=String.fromCharCode(32),QC=!1;function TM(t,e){switch(t){case"keyup":return YF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var td=!1;function JF(t,e){switch(t){case"compositionend":return NM(e);case"keypress":return e.which!==32?null:(QC=!0,JC);case"textInput":return t=e.data,t===JC&&QC?null:t;default:return null}}function QF(t,e){if(td)return t==="compositionend"||!MS&&TM(t,e)?(t=CM(),A0=NS=Qa=null,td=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AM&&e.locale!=="ko"?null:e.data;default:return null}}var ZF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZF[t.type]:e==="textarea"}function PM(t,e,n,r){oM(r),e=uy(e,"onChange"),0<e.length&&(n=new PS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jf=null,fp=null;function eB(t){zM(t,0)}function g1(t){var e=id(t);if(ZE(e))return t}function tB(t,e){if(t==="change")return e}var EM=!1;if(la){var Ab;if(la){var Tb="oninput"in document;if(!Tb){var eA=document.createElement("div");eA.setAttribute("oninput","return;"),Tb=typeof eA.oninput=="function"}Ab=Tb}else Ab=!1;EM=Ab&&(!document.documentMode||9<document.documentMode)}function tA(){jf&&(jf.detachEvent("onpropertychange",MM),fp=jf=null)}function MM(t){if(t.propertyName==="value"&&g1(fp)){var e=[];PM(e,fp,t,kS(t)),uM(eB,e)}}function nB(t,e,n){t==="focusin"?(tA(),jf=e,fp=n,jf.attachEvent("onpropertychange",MM)):t==="focusout"&&tA()}function rB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return g1(fp)}function iB(t,e){if(t==="click")return g1(e)}function sB(t,e){if(t==="input"||t==="change")return g1(e)}function oB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Js=typeof Object.is=="function"?Object.is:oB;function pp(t,e){if(Js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!m2.call(e,i)||!Js(t[i],e[i]))return!1}return!0}function nA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rA(t,e){var n=nA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nA(n)}}function LM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OM(){for(var t=window,e=ry();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ry(t.document)}return e}function LS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aB(t){var e=OM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LM(n.ownerDocument.documentElement,n)){if(r!==null&&LS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=rA(n,s);var o=rA(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lB=la&&"documentMode"in document&&11>=document.documentMode,nd=null,I2=null,Df=null,R2=!1;function iA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;R2||nd==null||nd!==ry(r)||(r=nd,"selectionStart"in r&&LS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Df&&pp(Df,r)||(Df=r,r=uy(I2,"onSelect"),0<r.length&&(e=new PS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nd)))}function wg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rd={animationend:wg("Animation","AnimationEnd"),animationiteration:wg("Animation","AnimationIteration"),animationstart:wg("Animation","AnimationStart"),transitionend:wg("Transition","TransitionEnd")},Nb={},IM={};la&&(IM=document.createElement("div").style,"AnimationEvent"in window||(delete rd.animationend.animation,delete rd.animationiteration.animation,delete rd.animationstart.animation),"TransitionEvent"in window||delete rd.transitionend.transition);function y1(t){if(Nb[t])return Nb[t];if(!rd[t])return t;var e=rd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IM)return Nb[t]=e[n];return t}var RM=y1("animationend"),jM=y1("animationiteration"),DM=y1("animationstart"),FM=y1("transitionend"),BM=new Map,sA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ol(t,e){BM.set(t,e),ru(e,[t])}for(var Pb=0;Pb<sA.length;Pb++){var Eb=sA[Pb],cB=Eb.toLowerCase(),uB=Eb[0].toUpperCase()+Eb.slice(1);Ol(cB,"on"+uB)}Ol(RM,"onAnimationEnd");Ol(jM,"onAnimationIteration");Ol(DM,"onAnimationStart");Ol("dblclick","onDoubleClick");Ol("focusin","onFocus");Ol("focusout","onBlur");Ol(FM,"onTransitionEnd");Fd("onMouseEnter",["mouseout","mouseover"]);Fd("onMouseLeave",["mouseout","mouseover"]);Fd("onPointerEnter",["pointerout","pointerover"]);Fd("onPointerLeave",["pointerout","pointerover"]);ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dB=new Set("cancel close invalid load scroll toggle".split(" ").concat(xf));function oA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cF(r,e,void 0,t),t.currentTarget=null}function zM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;oA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;oA(i,a,c),s=l}}}if(sy)throw t=E2,sy=!1,E2=null,t}function tn(t,e){var n=e[z2];n===void 0&&(n=e[z2]=new Set);var r=t+"__bubble";n.has(r)||($M(e,t,2,!1),n.add(r))}function Mb(t,e,n){var r=0;e&&(r|=4),$M(n,t,r,e)}var Sg="_reactListening"+Math.random().toString(36).slice(2);function mp(t){if(!t[Sg]){t[Sg]=!0,GE.forEach(function(n){n!=="selectionchange"&&(dB.has(n)||Mb(n,!1,t),Mb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sg]||(e[Sg]=!0,Mb("selectionchange",!1,e))}}function $M(t,e,n,r){switch(_M(e)){case 1:var i=CF;break;case 4:i=AF;break;default:i=TS}n=i.bind(null,e,n,t),i=void 0,!P2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lb(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uM(function(){var c=s,u=kS(n),d=[];e:{var h=BM.get(t);if(h!==void 0){var f=PS,p=t;switch(t){case"keypress":if(T0(n)===0)break e;case"keydown":case"keyup":f=$F;break;case"focusin":p="focus",f=Cb;break;case"focusout":p="blur",f=Cb;break;case"beforeblur":case"afterblur":f=Cb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=GC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=qF;break;case RM:case jM:case DM:f=LF;break;case FM:f=HF;break;case"scroll":f=TF;break;case"wheel":f=GF;break;case"copy":case"cut":case"paste":f=IF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=XC}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var x=c,S;x!==null;){S=x;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,y!==null&&(C=cp(x,y),C!=null&&g.push(gp(x,C,S)))),v)break;x=x.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==T2&&(p=n.relatedTarget||n.fromElement)&&(vc(p)||p[ca]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?vc(p):null,p!==null&&(v=iu(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=GC,C="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=XC,C="onPointerLeave",y="onPointerEnter",x="pointer"),v=f==null?h:id(f),S=p==null?h:id(p),h=new g(C,x+"leave",f,n,u),h.target=v,h.relatedTarget=S,C=null,vc(u)===c&&(g=new g(y,x+"enter",p,n,u),g.target=S,g.relatedTarget=v,C=g),v=C,f&&p)t:{for(g=f,y=p,x=0,S=g;S;S=ju(S))x++;for(S=0,C=y;C;C=ju(C))S++;for(;0<x-S;)g=ju(g),x--;for(;0<S-x;)y=ju(y),S--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=ju(g),y=ju(y)}g=null}else g=null;f!==null&&aA(d,h,f,g,!1),p!==null&&v!==null&&aA(d,v,p,g,!0)}}e:{if(h=c?id(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var A=tB;else if(ZC(h))if(EM)A=sB;else{A=rB;var O=nB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=iB);if(A&&(A=A(t,c))){PM(d,A,n,u);break e}O&&O(t,h,c),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&S2(h,"number",h.value)}switch(O=c?id(c):window,t){case"focusin":(ZC(O)||O.contentEditable==="true")&&(nd=O,I2=c,Df=null);break;case"focusout":Df=I2=nd=null;break;case"mousedown":R2=!0;break;case"contextmenu":case"mouseup":case"dragend":R2=!1,iA(d,n,u);break;case"selectionchange":if(lB)break;case"keydown":case"keyup":iA(d,n,u)}var M;if(MS)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else td?TM(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(AM&&n.locale!=="ko"&&(td||N!=="onCompositionStart"?N==="onCompositionEnd"&&td&&(M=CM()):(Qa=u,NS="value"in Qa?Qa.value:Qa.textContent,td=!0)),O=uy(c,N),0<O.length&&(N=new YC(N,t,null,n,u),d.push({event:N,listeners:O}),M?N.data=M:(M=NM(n),M!==null&&(N.data=M)))),(M=XF?JF(t,n):QF(t,n))&&(c=uy(c,"onBeforeInput"),0<c.length&&(u=new YC("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=M))}zM(d,e)})}function gp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cp(t,n),s!=null&&r.unshift(gp(t,s,i)),s=cp(t,e),s!=null&&r.push(gp(t,s,i))),t=t.return}return r}function ju(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aA(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=cp(n,s),l!=null&&o.unshift(gp(n,l,a))):i||(l=cp(n,s),l!=null&&o.push(gp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hB=/\r\n?/g,fB=/\u0000|\uFFFD/g;function lA(t){return(typeof t=="string"?t:""+t).replace(hB,`
`).replace(fB,"")}function kg(t,e,n){if(e=lA(e),lA(t)!==e&&n)throw Error(Le(425))}function dy(){}var j2=null,D2=null;function F2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var B2=typeof setTimeout=="function"?setTimeout:void 0,pB=typeof clearTimeout=="function"?clearTimeout:void 0,cA=typeof Promise=="function"?Promise:void 0,mB=typeof queueMicrotask=="function"?queueMicrotask:typeof cA<"u"?function(t){return cA.resolve(null).then(t).catch(gB)}:B2;function gB(t){setTimeout(function(){throw t})}function Ob(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),hp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);hp(e)}function hl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ch=Math.random().toString(36).slice(2),po="__reactFiber$"+ch,yp="__reactProps$"+ch,ca="__reactContainer$"+ch,z2="__reactEvents$"+ch,yB="__reactListeners$"+ch,vB="__reactHandles$"+ch;function vc(t){var e=t[po];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ca]||n[po]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uA(t);t!==null;){if(n=t[po])return n;t=uA(t)}return e}t=n,n=t.parentNode}return null}function sm(t){return t=t[po]||t[ca],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function id(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Le(33))}function v1(t){return t[yp]||null}var $2=[],sd=-1;function Il(t){return{current:t}}function sn(t){0>sd||(t.current=$2[sd],$2[sd]=null,sd--)}function Zt(t,e){sd++,$2[sd]=t.current,t.current=e}var kl={},Wr=Il(kl),ki=Il(!1),Uc=kl;function Bd(t,e){var n=t.type.contextTypes;if(!n)return kl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _i(t){return t=t.childContextTypes,t!=null}function hy(){sn(ki),sn(Wr)}function dA(t,e,n){if(Wr.current!==kl)throw Error(Le(168));Zt(Wr,e),Zt(ki,n)}function VM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Le(108,nF(t)||"Unknown",i));return vn({},n,r)}function fy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kl,Uc=Wr.current,Zt(Wr,t),Zt(ki,ki.current),!0}function hA(t,e,n){var r=t.stateNode;if(!r)throw Error(Le(169));n?(t=VM(t,e,Uc),r.__reactInternalMemoizedMergedChildContext=t,sn(ki),sn(Wr),Zt(Wr,t)):sn(ki),Zt(ki,n)}var Yo=null,b1=!1,Ib=!1;function UM(t){Yo===null?Yo=[t]:Yo.push(t)}function bB(t){b1=!0,UM(t)}function Rl(){if(!Ib&&Yo!==null){Ib=!0;var t=0,e=Vt;try{var n=Yo;for(Vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yo=null,b1=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(t+1)),pM(_S,Rl),i}finally{Vt=e,Ib=!1}}return null}var od=[],ad=0,py=null,my=0,ps=[],ms=0,qc=null,Jo=1,Qo="";function sc(t,e){od[ad++]=my,od[ad++]=py,py=t,my=e}function qM(t,e,n){ps[ms++]=Jo,ps[ms++]=Qo,ps[ms++]=qc,qc=t;var r=Jo;t=Qo;var i=32-Ks(r)-1;r&=~(1<<i),n+=1;var s=32-Ks(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-Ks(e)+i|n<<i|r,Qo=s+t}else Jo=1<<s|n<<i|r,Qo=t}function OS(t){t.return!==null&&(sc(t,1),qM(t,1,0))}function IS(t){for(;t===py;)py=od[--ad],od[ad]=null,my=od[--ad],od[ad]=null;for(;t===qc;)qc=ps[--ms],ps[ms]=null,Qo=ps[--ms],ps[ms]=null,Jo=ps[--ms],ps[ms]=null}var Hi=null,qi=null,hn=!1,qs=null;function WM(t,e){var n=vs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hi=t,qi=hl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hi=t,qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qc!==null?{id:Jo,overflow:Qo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hi=t,qi=null,!0):!1;default:return!1}}function V2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U2(t){if(hn){var e=qi;if(e){var n=e;if(!fA(t,e)){if(V2(t))throw Error(Le(418));e=hl(n.nextSibling);var r=Hi;e&&fA(t,e)?WM(r,n):(t.flags=t.flags&-4097|2,hn=!1,Hi=t)}}else{if(V2(t))throw Error(Le(418));t.flags=t.flags&-4097|2,hn=!1,Hi=t}}}function pA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hi=t}function _g(t){if(t!==Hi)return!1;if(!hn)return pA(t),hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F2(t.type,t.memoizedProps)),e&&(e=qi)){if(V2(t))throw HM(),Error(Le(418));for(;e;)WM(t,e),e=hl(e.nextSibling)}if(pA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qi=hl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qi=null}}else qi=Hi?hl(t.stateNode.nextSibling):null;return!0}function HM(){for(var t=qi;t;)t=hl(t.nextSibling)}function zd(){qi=Hi=null,hn=!1}function RS(t){qs===null?qs=[t]:qs.push(t)}var xB=fa.ReactCurrentBatchConfig;function ef(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,t))}return t}function Cg(t,e){throw t=Object.prototype.toString.call(e),Error(Le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mA(t){var e=t._init;return e(t._payload)}function KM(t){function e(y,x){if(t){var S=y.deletions;S===null?(y.deletions=[x],y.flags|=16):S.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=gl(y,x),y.index=0,y.sibling=null,y}function s(y,x,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<x?(y.flags|=2,x):S):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,S,C){return x===null||x.tag!==6?(x=$b(S,y.mode,C),x.return=y,x):(x=i(x,S),x.return=y,x)}function l(y,x,S,C){var A=S.type;return A===ed?u(y,x,S.props.children,C,S.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Va&&mA(A)===x.type)?(C=i(x,S.props),C.ref=ef(y,x,S),C.return=y,C):(C=I0(S.type,S.key,S.props,null,y.mode,C),C.ref=ef(y,x,S),C.return=y,C)}function c(y,x,S,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Vb(S,y.mode,C),x.return=y,x):(x=i(x,S.children||[]),x.return=y,x)}function u(y,x,S,C,A){return x===null||x.tag!==7?(x=Tc(S,y.mode,C,A),x.return=y,x):(x=i(x,S),x.return=y,x)}function d(y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=$b(""+x,y.mode,S),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pg:return S=I0(x.type,x.key,x.props,null,y.mode,S),S.ref=ef(y,null,x),S.return=y,S;case Zu:return x=Vb(x,y.mode,S),x.return=y,x;case Va:var C=x._init;return d(y,C(x._payload),S)}if(vf(x)||Yh(x))return x=Tc(x,y.mode,S,null),x.return=y,x;Cg(y,x)}return null}function h(y,x,S,C){var A=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:a(y,x,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case pg:return S.key===A?l(y,x,S,C):null;case Zu:return S.key===A?c(y,x,S,C):null;case Va:return A=S._init,h(y,x,A(S._payload),C)}if(vf(S)||Yh(S))return A!==null?null:u(y,x,S,C,null);Cg(y,S)}return null}function f(y,x,S,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(S)||null,a(x,y,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case pg:return y=y.get(C.key===null?S:C.key)||null,l(x,y,C,A);case Zu:return y=y.get(C.key===null?S:C.key)||null,c(x,y,C,A);case Va:var O=C._init;return f(y,x,S,O(C._payload),A)}if(vf(C)||Yh(C))return y=y.get(S)||null,u(x,y,C,A,null);Cg(x,C)}return null}function p(y,x,S,C){for(var A=null,O=null,M=x,N=x=0,D=null;M!==null&&N<S.length;N++){M.index>N?(D=M,M=null):D=M.sibling;var V=h(y,M,S[N],C);if(V===null){M===null&&(M=D);break}t&&M&&V.alternate===null&&e(y,M),x=s(V,x,N),O===null?A=V:O.sibling=V,O=V,M=D}if(N===S.length)return n(y,M),hn&&sc(y,N),A;if(M===null){for(;N<S.length;N++)M=d(y,S[N],C),M!==null&&(x=s(M,x,N),O===null?A=M:O.sibling=M,O=M);return hn&&sc(y,N),A}for(M=r(y,M);N<S.length;N++)D=f(M,y,N,S[N],C),D!==null&&(t&&D.alternate!==null&&M.delete(D.key===null?N:D.key),x=s(D,x,N),O===null?A=D:O.sibling=D,O=D);return t&&M.forEach(function(L){return e(y,L)}),hn&&sc(y,N),A}function g(y,x,S,C){var A=Yh(S);if(typeof A!="function")throw Error(Le(150));if(S=A.call(S),S==null)throw Error(Le(151));for(var O=A=null,M=x,N=x=0,D=null,V=S.next();M!==null&&!V.done;N++,V=S.next()){M.index>N?(D=M,M=null):D=M.sibling;var L=h(y,M,V.value,C);if(L===null){M===null&&(M=D);break}t&&M&&L.alternate===null&&e(y,M),x=s(L,x,N),O===null?A=L:O.sibling=L,O=L,M=D}if(V.done)return n(y,M),hn&&sc(y,N),A;if(M===null){for(;!V.done;N++,V=S.next())V=d(y,V.value,C),V!==null&&(x=s(V,x,N),O===null?A=V:O.sibling=V,O=V);return hn&&sc(y,N),A}for(M=r(y,M);!V.done;N++,V=S.next())V=f(M,y,N,V.value,C),V!==null&&(t&&V.alternate!==null&&M.delete(V.key===null?N:V.key),x=s(V,x,N),O===null?A=V:O.sibling=V,O=V);return t&&M.forEach(function(E){return e(y,E)}),hn&&sc(y,N),A}function v(y,x,S,C){if(typeof S=="object"&&S!==null&&S.type===ed&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case pg:e:{for(var A=S.key,O=x;O!==null;){if(O.key===A){if(A=S.type,A===ed){if(O.tag===7){n(y,O.sibling),x=i(O,S.props.children),x.return=y,y=x;break e}}else if(O.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Va&&mA(A)===O.type){n(y,O.sibling),x=i(O,S.props),x.ref=ef(y,O,S),x.return=y,y=x;break e}n(y,O);break}else e(y,O);O=O.sibling}S.type===ed?(x=Tc(S.props.children,y.mode,C,S.key),x.return=y,y=x):(C=I0(S.type,S.key,S.props,null,y.mode,C),C.ref=ef(y,x,S),C.return=y,y=C)}return o(y);case Zu:e:{for(O=S.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(y,x.sibling),x=i(x,S.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Vb(S,y.mode,C),x.return=y,y=x}return o(y);case Va:return O=S._init,v(y,x,O(S._payload),C)}if(vf(S))return p(y,x,S,C);if(Yh(S))return g(y,x,S,C);Cg(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,S),x.return=y,y=x):(n(y,x),x=$b(S,y.mode,C),x.return=y,y=x),o(y)):n(y,x)}return v}var $d=KM(!0),GM=KM(!1),gy=Il(null),yy=null,ld=null,jS=null;function DS(){jS=ld=yy=null}function FS(t){var e=gy.current;sn(gy),t._currentValue=e}function q2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ad(t,e){yy=t,jS=ld=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Si=!0),t.firstContext=null)}function _s(t){var e=t._currentValue;if(jS!==t)if(t={context:t,memoizedValue:e,next:null},ld===null){if(yy===null)throw Error(Le(308));ld=t,yy.dependencies={lanes:0,firstContext:t}}else ld=ld.next=t;return e}var bc=null;function BS(t){bc===null?bc=[t]:bc.push(t)}function YM(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,BS(e)):(n.next=i.next,i.next=n),e.interleaved=n,ua(t,r)}function ua(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ua=!1;function zS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ua(t,n)}return i=r.interleaved,i===null?(e.next=e,BS(r)):(e.next=i.next,i.next=e),r.interleaved=e,ua(t,n)}function N0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CS(t,n)}}function gA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vy(t,e,n,r){var i=t.updateQueue;Ua=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=vn({},d,h);break e;case 2:Ua=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hc|=o,t.lanes=o,t.memoizedState=d}}function yA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Le(191,i));i.call(r)}}}var om={},vo=Il(om),vp=Il(om),bp=Il(om);function xc(t){if(t===om)throw Error(Le(174));return t}function $S(t,e){switch(Zt(bp,e),Zt(vp,t),Zt(vo,om),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_2(e,t)}sn(vo),Zt(vo,e)}function Vd(){sn(vo),sn(vp),sn(bp)}function JM(t){xc(bp.current);var e=xc(vo.current),n=_2(e,t.type);e!==n&&(Zt(vp,t),Zt(vo,n))}function VS(t){vp.current===t&&(sn(vo),sn(vp))}var mn=Il(0);function by(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rb=[];function US(){for(var t=0;t<Rb.length;t++)Rb[t]._workInProgressVersionPrimary=null;Rb.length=0}var P0=fa.ReactCurrentDispatcher,jb=fa.ReactCurrentBatchConfig,Wc=0,yn=null,Zn=null,lr=null,xy=!1,Ff=!1,xp=0,wB=0;function Mr(){throw Error(Le(321))}function qS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Js(t[n],e[n]))return!1;return!0}function WS(t,e,n,r,i,s){if(Wc=s,yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,P0.current=t===null||t.memoizedState===null?CB:AB,t=n(r,i),Ff){s=0;do{if(Ff=!1,xp=0,25<=s)throw Error(Le(301));s+=1,lr=Zn=null,e.updateQueue=null,P0.current=TB,t=n(r,i)}while(Ff)}if(P0.current=wy,e=Zn!==null&&Zn.next!==null,Wc=0,lr=Zn=yn=null,xy=!1,e)throw Error(Le(300));return t}function HS(){var t=xp!==0;return xp=0,t}function co(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?yn.memoizedState=lr=t:lr=lr.next=t,lr}function Cs(){if(Zn===null){var t=yn.alternate;t=t!==null?t.memoizedState:null}else t=Zn.next;var e=lr===null?yn.memoizedState:lr.next;if(e!==null)lr=e,Zn=t;else{if(t===null)throw Error(Le(310));Zn=t,t={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},lr===null?yn.memoizedState=lr=t:lr=lr.next=t}return lr}function wp(t,e){return typeof e=="function"?e(t):e}function Db(t){var e=Cs(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=Zn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Wc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,yn.lanes|=u,Hc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Js(r,e.memoizedState)||(Si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,yn.lanes|=s,Hc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fb(t){var e=Cs(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Js(s,e.memoizedState)||(Si=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function QM(){}function ZM(t,e){var n=yn,r=Cs(),i=e(),s=!Js(r.memoizedState,i);if(s&&(r.memoizedState=i,Si=!0),r=r.queue,KS(nL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||lr!==null&&lr.memoizedState.tag&1){if(n.flags|=2048,Sp(9,tL.bind(null,n,r,i,e),void 0,null),hr===null)throw Error(Le(349));Wc&30||eL(n,e,i)}return i}function eL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tL(t,e,n,r){e.value=n,e.getSnapshot=r,rL(e)&&iL(t)}function nL(t,e,n){return n(function(){rL(e)&&iL(t)})}function rL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Js(t,n)}catch{return!0}}function iL(t){var e=ua(t,1);e!==null&&Gs(e,t,1,-1)}function vA(t){var e=co();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:t},e.queue=t,t=t.dispatch=_B.bind(null,yn,t),[e.memoizedState,t]}function Sp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yn.updateQueue,e===null?(e={lastEffect:null,stores:null},yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sL(){return Cs().memoizedState}function E0(t,e,n,r){var i=co();yn.flags|=t,i.memoizedState=Sp(1|e,n,void 0,r===void 0?null:r)}function x1(t,e,n,r){var i=Cs();r=r===void 0?null:r;var s=void 0;if(Zn!==null){var o=Zn.memoizedState;if(s=o.destroy,r!==null&&qS(r,o.deps)){i.memoizedState=Sp(e,n,s,r);return}}yn.flags|=t,i.memoizedState=Sp(1|e,n,s,r)}function bA(t,e){return E0(8390656,8,t,e)}function KS(t,e){return x1(2048,8,t,e)}function oL(t,e){return x1(4,2,t,e)}function aL(t,e){return x1(4,4,t,e)}function lL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cL(t,e,n){return n=n!=null?n.concat([t]):null,x1(4,4,lL.bind(null,e,t),n)}function GS(){}function uL(t,e){var n=Cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dL(t,e){var n=Cs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hL(t,e,n){return Wc&21?(Js(n,e)||(n=yM(),yn.lanes|=n,Hc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Si=!0),t.memoizedState=n)}function SB(t,e){var n=Vt;Vt=n!==0&&4>n?n:4,t(!0);var r=jb.transition;jb.transition={};try{t(!1),e()}finally{Vt=n,jb.transition=r}}function fL(){return Cs().memoizedState}function kB(t,e,n){var r=ml(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pL(t))mL(e,n);else if(n=YM(t,e,n,r),n!==null){var i=ni();Gs(n,t,r,i),gL(n,e,r)}}function _B(t,e,n){var r=ml(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pL(t))mL(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Js(a,o)){var l=e.interleaved;l===null?(i.next=i,BS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YM(t,e,i,r),n!==null&&(i=ni(),Gs(n,t,r,i),gL(n,e,r))}}function pL(t){var e=t.alternate;return t===yn||e!==null&&e===yn}function mL(t,e){Ff=xy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CS(t,n)}}var wy={readContext:_s,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},CB={readContext:_s,useCallback:function(t,e){return co().memoizedState=[t,e===void 0?null:e],t},useContext:_s,useEffect:bA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,E0(4194308,4,lL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return E0(4194308,4,t,e)},useInsertionEffect:function(t,e){return E0(4,2,t,e)},useMemo:function(t,e){var n=co();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=co();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kB.bind(null,yn,t),[r.memoizedState,t]},useRef:function(t){var e=co();return t={current:t},e.memoizedState=t},useState:vA,useDebugValue:GS,useDeferredValue:function(t){return co().memoizedState=t},useTransition:function(){var t=vA(!1),e=t[0];return t=SB.bind(null,t[1]),co().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yn,i=co();if(hn){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=e(),hr===null)throw Error(Le(349));Wc&30||eL(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bA(nL.bind(null,r,s,t),[t]),r.flags|=2048,Sp(9,tL.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=co(),e=hr.identifierPrefix;if(hn){var n=Qo,r=Jo;n=(r&~(1<<32-Ks(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AB={readContext:_s,useCallback:uL,useContext:_s,useEffect:KS,useImperativeHandle:cL,useInsertionEffect:oL,useLayoutEffect:aL,useMemo:dL,useReducer:Db,useRef:sL,useState:function(){return Db(wp)},useDebugValue:GS,useDeferredValue:function(t){var e=Cs();return hL(e,Zn.memoizedState,t)},useTransition:function(){var t=Db(wp)[0],e=Cs().memoizedState;return[t,e]},useMutableSource:QM,useSyncExternalStore:ZM,useId:fL,unstable_isNewReconciler:!1},TB={readContext:_s,useCallback:uL,useContext:_s,useEffect:KS,useImperativeHandle:cL,useInsertionEffect:oL,useLayoutEffect:aL,useMemo:dL,useReducer:Fb,useRef:sL,useState:function(){return Fb(wp)},useDebugValue:GS,useDeferredValue:function(t){var e=Cs();return Zn===null?e.memoizedState=t:hL(e,Zn.memoizedState,t)},useTransition:function(){var t=Fb(wp)[0],e=Cs().memoizedState;return[t,e]},useMutableSource:QM,useSyncExternalStore:ZM,useId:fL,unstable_isNewReconciler:!1};function Bs(t,e){if(t&&t.defaultProps){e=vn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function W2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var w1={isMounted:function(t){return(t=t._reactInternals)?iu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ni(),i=ml(t),s=ia(r,i);s.payload=e,n!=null&&(s.callback=n),e=fl(t,s,i),e!==null&&(Gs(e,t,i,r),N0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ni(),i=ml(t),s=ia(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fl(t,s,i),e!==null&&(Gs(e,t,i,r),N0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ni(),r=ml(t),i=ia(n,r);i.tag=2,e!=null&&(i.callback=e),e=fl(t,i,r),e!==null&&(Gs(e,t,r,n),N0(e,t,r))}};function xA(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!pp(n,r)||!pp(i,s):!0}function yL(t,e,n){var r=!1,i=kl,s=e.contextType;return typeof s=="object"&&s!==null?s=_s(s):(i=_i(e)?Uc:Wr.current,r=e.contextTypes,s=(r=r!=null)?Bd(t,i):kl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=w1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&w1.enqueueReplaceState(e,e.state,null)}function H2(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zS(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_s(s):(s=_i(e)?Uc:Wr.current,i.context=Bd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(W2(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&w1.enqueueReplaceState(i,i.state,null),vy(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ud(t,e){try{var n="",r=e;do n+=tF(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function K2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NB=typeof WeakMap=="function"?WeakMap:Map;function vL(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ky||(ky=!0,rw=r),K2(t,e)},n}function bL(t,e,n){n=ia(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){K2(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){K2(t,e),typeof r!="function"&&(pl===null?pl=new Set([this]):pl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function SA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VB.bind(null,t,e,n),e.then(t,t))}function kA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _A(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,fl(n,e,1))),n.lanes|=1),t)}var PB=fa.ReactCurrentOwner,Si=!1;function ei(t,e,n,r){e.child=t===null?GM(e,null,n,r):$d(e,t.child,n,r)}function CA(t,e,n,r,i){n=n.render;var s=e.ref;return Ad(e,i),r=WS(t,e,n,r,s,i),n=HS(),t!==null&&!Si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(hn&&n&&OS(e),e.flags|=1,ei(t,e,r,i),e.child)}function AA(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!nk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,xL(t,e,s,r,i)):(t=I0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pp,n(o,r)&&t.ref===e.ref)return da(t,e,i)}return e.flags|=1,t=gl(s,r),t.ref=e.ref,t.return=e,e.child=t}function xL(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(pp(s,r)&&t.ref===e.ref)if(Si=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Si=!0);else return e.lanes=t.lanes,da(t,e,i)}return G2(t,e,n,r,i)}function wL(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(ud,zi),zi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Zt(ud,zi),zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Zt(ud,zi),zi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Zt(ud,zi),zi|=r;return ei(t,e,i,n),e.child}function SL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function G2(t,e,n,r,i){var s=_i(n)?Uc:Wr.current;return s=Bd(e,s),Ad(e,i),n=WS(t,e,n,r,s,i),r=HS(),t!==null&&!Si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,da(t,e,i)):(hn&&r&&OS(e),e.flags|=1,ei(t,e,n,i),e.child)}function TA(t,e,n,r,i){if(_i(n)){var s=!0;fy(e)}else s=!1;if(Ad(e,i),e.stateNode===null)M0(t,e),yL(e,n,r),H2(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_s(c):(c=_i(n)?Uc:Wr.current,c=Bd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&wA(e,o,r,c),Ua=!1;var h=e.memoizedState;o.state=h,vy(e,r,o,i),l=e.memoizedState,a!==r||h!==l||ki.current||Ua?(typeof u=="function"&&(W2(e,n,u,r),l=e.memoizedState),(a=Ua||xA(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XM(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Bs(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_s(l):(l=_i(n)?Uc:Wr.current,l=Bd(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&wA(e,o,r,l),Ua=!1,h=e.memoizedState,o.state=h,vy(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||ki.current||Ua?(typeof f=="function"&&(W2(e,n,f,r),p=e.memoizedState),(c=Ua||xA(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Y2(t,e,n,r,s,i)}function Y2(t,e,n,r,i,s){SL(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hA(e,n,!1),da(t,e,s);r=e.stateNode,PB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$d(e,t.child,null,s),e.child=$d(e,null,a,s)):ei(t,e,a,s),e.memoizedState=r.state,i&&hA(e,n,!0),e.child}function kL(t){var e=t.stateNode;e.pendingContext?dA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dA(t,e.context,!1),$S(t,e.containerInfo)}function NA(t,e,n,r,i){return zd(),RS(i),e.flags|=256,ei(t,e,n,r),e.child}var X2={dehydrated:null,treeContext:null,retryLane:0};function J2(t){return{baseLanes:t,cachePool:null,transitions:null}}function _L(t,e,n){var r=e.pendingProps,i=mn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Zt(mn,i&1),t===null)return U2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_1(o,r,0,null),t=Tc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=J2(n),e.memoizedState=X2,t):YS(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return EB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gl(a,s):(s=Tc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?J2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=X2,r}return s=t.child,t=s.sibling,r=gl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function YS(t,e){return e=_1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ag(t,e,n,r){return r!==null&&RS(r),$d(e,t.child,null,n),t=YS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bb(Error(Le(422))),Ag(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_1({mode:"visible",children:r.children},i,0,null),s=Tc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$d(e,t.child,null,o),e.child.memoizedState=J2(o),e.memoizedState=X2,s);if(!(e.mode&1))return Ag(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Le(419)),r=Bb(s,r,void 0),Ag(t,e,o,r)}if(a=(o&t.childLanes)!==0,Si||a){if(r=hr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ua(t,i),Gs(r,t,i,-1))}return tk(),r=Bb(Error(Le(421))),Ag(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qi=hl(i.nextSibling),Hi=e,hn=!0,qs=null,t!==null&&(ps[ms++]=Jo,ps[ms++]=Qo,ps[ms++]=qc,Jo=t.id,Qo=t.overflow,qc=e),e=YS(e,r.children),e.flags|=4096,e)}function PA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),q2(t.return,e,n)}function zb(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function CL(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ei(t,e,r.children,n),r=mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PA(t,n,e);else if(t.tag===19)PA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Zt(mn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&by(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zb(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&by(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zb(e,!0,n,null,s);break;case"together":zb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function M0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function da(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Le(153));if(e.child!==null){for(t=e.child,n=gl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MB(t,e,n){switch(e.tag){case 3:kL(e),zd();break;case 5:JM(e);break;case 1:_i(e.type)&&fy(e);break;case 4:$S(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Zt(gy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Zt(mn,mn.current&1),e.flags|=128,null):n&e.child.childLanes?_L(t,e,n):(Zt(mn,mn.current&1),t=da(t,e,n),t!==null?t.sibling:null);Zt(mn,mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return CL(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zt(mn,mn.current),r)break;return null;case 22:case 23:return e.lanes=0,wL(t,e,n)}return da(t,e,n)}var AL,Q2,TL,NL;AL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Q2=function(){};TL=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xc(vo.current);var s=null;switch(n){case"input":i=x2(t,i),r=x2(t,r),s=[];break;case"select":i=vn({},i,{value:void 0}),r=vn({},r,{value:void 0}),s=[];break;case"textarea":i=k2(t,i),r=k2(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dy)}C2(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ap.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ap.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};NL=function(t,e,n,r){n!==r&&(e.flags|=4)};function tf(t,e){if(!hn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LB(t,e,n){var r=e.pendingProps;switch(IS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:return _i(e.type)&&hy(),Lr(e),null;case 3:return r=e.stateNode,Vd(),sn(ki),sn(Wr),US(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_g(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qs!==null&&(ow(qs),qs=null))),Q2(t,e),Lr(e),null;case 5:VS(e);var i=xc(bp.current);if(n=e.type,t!==null&&e.stateNode!=null)TL(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Le(166));return Lr(e),null}if(t=xc(vo.current),_g(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[po]=e,r[yp]=s,t=(e.mode&1)!==0,n){case"dialog":tn("cancel",r),tn("close",r);break;case"iframe":case"object":case"embed":tn("load",r);break;case"video":case"audio":for(i=0;i<xf.length;i++)tn(xf[i],r);break;case"source":tn("error",r);break;case"img":case"image":case"link":tn("error",r),tn("load",r);break;case"details":tn("toggle",r);break;case"input":FC(r,s),tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tn("invalid",r);break;case"textarea":zC(r,s),tn("invalid",r)}C2(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&kg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kg(r.textContent,a,t),i=["children",""+a]):ap.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tn("scroll",r)}switch(n){case"input":mg(r),BC(r,s,!0);break;case"textarea":mg(r),$C(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[po]=e,t[yp]=r,AL(t,e,!1,!1),e.stateNode=t;e:{switch(o=A2(n,r),n){case"dialog":tn("cancel",t),tn("close",t),i=r;break;case"iframe":case"object":case"embed":tn("load",t),i=r;break;case"video":case"audio":for(i=0;i<xf.length;i++)tn(xf[i],t);i=r;break;case"source":tn("error",t),i=r;break;case"img":case"image":case"link":tn("error",t),tn("load",t),i=r;break;case"details":tn("toggle",t),i=r;break;case"input":FC(t,r),i=x2(t,r),tn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vn({},r,{value:void 0}),tn("invalid",t);break;case"textarea":zC(t,r),i=k2(t,r),tn("invalid",t);break;default:i=r}C2(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?sM(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rM(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&lp(t,l):typeof l=="number"&&lp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ap.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tn("scroll",t):l!=null&&bS(t,s,l,o))}switch(n){case"input":mg(t),BC(t,r,!1);break;case"textarea":mg(t),$C(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Sd(t,!!r.multiple,s,!1):r.defaultValue!=null&&Sd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(t&&e.stateNode!=null)NL(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Le(166));if(n=xc(bp.current),xc(vo.current),_g(e)){if(r=e.stateNode,n=e.memoizedProps,r[po]=e,(s=r.nodeValue!==n)&&(t=Hi,t!==null))switch(t.tag){case 3:kg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[po]=e,e.stateNode=r}return Lr(e),null;case 13:if(sn(mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(hn&&qi!==null&&e.mode&1&&!(e.flags&128))HM(),zd(),e.flags|=98560,s=!1;else if(s=_g(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[po]=e}else zd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lr(e),s=!1}else qs!==null&&(ow(qs),qs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mn.current&1?er===0&&(er=3):tk())),e.updateQueue!==null&&(e.flags|=4),Lr(e),null);case 4:return Vd(),Q2(t,e),t===null&&mp(e.stateNode.containerInfo),Lr(e),null;case 10:return FS(e.type._context),Lr(e),null;case 17:return _i(e.type)&&hy(),Lr(e),null;case 19:if(sn(mn),s=e.memoizedState,s===null)return Lr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)tf(s,!1);else{if(er!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=by(t),o!==null){for(e.flags|=128,tf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Zt(mn,mn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dn()>qd&&(e.flags|=128,r=!0,tf(s,!1),e.lanes=4194304)}else{if(!r)if(t=by(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hn)return Lr(e),null}else 2*Dn()-s.renderingStartTime>qd&&n!==1073741824&&(e.flags|=128,r=!0,tf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dn(),e.sibling=null,n=mn.current,Zt(mn,r?n&1|2:n&1),e):(Lr(e),null);case 22:case 23:return ek(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zi&1073741824&&(Lr(e),e.subtreeFlags&6&&(e.flags|=8192)):Lr(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function OB(t,e){switch(IS(e),e.tag){case 1:return _i(e.type)&&hy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vd(),sn(ki),sn(Wr),US(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return VS(e),null;case 13:if(sn(mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));zd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return sn(mn),null;case 4:return Vd(),null;case 10:return FS(e.type._context),null;case 22:case 23:return ek(),null;case 24:return null;default:return null}}var Tg=!1,zr=!1,IB=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function cd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){An(t,e,r)}else n.current=null}function Z2(t,e,n){try{n()}catch(r){An(t,e,r)}}var EA=!1;function RB(t,e){if(j2=ly,t=OM(),LS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(D2={focusedElem:t,selectionRange:n},ly=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Bs(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(C){An(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return p=EA,EA=!1,p}function Bf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Z2(e,n,s)}i=i.next}while(i!==r)}}function S1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ew(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PL(t){var e=t.alternate;e!==null&&(t.alternate=null,PL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[po],delete e[yp],delete e[z2],delete e[yB],delete e[vB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EL(t){return t.tag===5||t.tag===3||t.tag===4}function MA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dy));else if(r!==4&&(t=t.child,t!==null))for(tw(t,e,n),t=t.sibling;t!==null;)tw(t,e,n),t=t.sibling}function nw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nw(t,e,n),t=t.sibling;t!==null;)nw(t,e,n),t=t.sibling}var br=null,$s=!1;function Ia(t,e,n){for(n=n.child;n!==null;)ML(t,e,n),n=n.sibling}function ML(t,e,n){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(p1,n)}catch{}switch(n.tag){case 5:zr||cd(n,e);case 6:var r=br,i=$s;br=null,Ia(t,e,n),br=r,$s=i,br!==null&&($s?(t=br,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):br.removeChild(n.stateNode));break;case 18:br!==null&&($s?(t=br,n=n.stateNode,t.nodeType===8?Ob(t.parentNode,n):t.nodeType===1&&Ob(t,n),hp(t)):Ob(br,n.stateNode));break;case 4:r=br,i=$s,br=n.stateNode.containerInfo,$s=!0,Ia(t,e,n),br=r,$s=i;break;case 0:case 11:case 14:case 15:if(!zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Z2(n,e,o),i=i.next}while(i!==r)}Ia(t,e,n);break;case 1:if(!zr&&(cd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){An(n,e,a)}Ia(t,e,n);break;case 21:Ia(t,e,n);break;case 22:n.mode&1?(zr=(r=zr)||n.memoizedState!==null,Ia(t,e,n),zr=r):Ia(t,e,n);break;default:Ia(t,e,n)}}function LA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IB),e.forEach(function(r){var i=qB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Is(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,$s=!1;break e;case 3:br=a.stateNode.containerInfo,$s=!0;break e;case 4:br=a.stateNode.containerInfo,$s=!0;break e}a=a.return}if(br===null)throw Error(Le(160));ML(s,o,i),br=null,$s=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){An(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LL(e,t),e=e.sibling}function LL(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Is(e,t),oo(t),r&4){try{Bf(3,t,t.return),S1(3,t)}catch(g){An(t,t.return,g)}try{Bf(5,t,t.return)}catch(g){An(t,t.return,g)}}break;case 1:Is(e,t),oo(t),r&512&&n!==null&&cd(n,n.return);break;case 5:if(Is(e,t),oo(t),r&512&&n!==null&&cd(n,n.return),t.flags&32){var i=t.stateNode;try{lp(i,"")}catch(g){An(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eM(i,s),A2(a,o);var c=A2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?sM(i,d):u==="dangerouslySetInnerHTML"?rM(i,d):u==="children"?lp(i,d):bS(i,u,d,c)}switch(a){case"input":w2(i,s);break;case"textarea":tM(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Sd(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Sd(i,!!s.multiple,s.defaultValue,!0):Sd(i,!!s.multiple,s.multiple?[]:"",!1))}i[yp]=s}catch(g){An(t,t.return,g)}}break;case 6:if(Is(e,t),oo(t),r&4){if(t.stateNode===null)throw Error(Le(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){An(t,t.return,g)}}break;case 3:if(Is(e,t),oo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hp(e.containerInfo)}catch(g){An(t,t.return,g)}break;case 4:Is(e,t),oo(t);break;case 13:Is(e,t),oo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(QS=Dn())),r&4&&LA(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(zr=(c=zr)||u,Is(e,t),zr=c):Is(e,t),oo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ue=t,u=t.child;u!==null;){for(d=Ue=u;Ue!==null;){switch(h=Ue,f=h.child,h.tag){case 0:case 11:case 14:case 15:Bf(4,h,h.return);break;case 1:cd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){An(r,n,g)}}break;case 5:cd(h,h.return);break;case 22:if(h.memoizedState!==null){IA(d);continue}}f!==null?(f.return=h,Ue=f):IA(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iM("display",o))}catch(g){An(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){An(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Is(e,t),oo(t),r&4&&LA(t);break;case 21:break;default:Is(e,t),oo(t)}}function oo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EL(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(lp(i,""),r.flags&=-33);var s=MA(t);nw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=MA(t);tw(t,a,o);break;default:throw Error(Le(161))}}catch(l){An(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jB(t,e,n){Ue=t,OL(t)}function OL(t,e,n){for(var r=(t.mode&1)!==0;Ue!==null;){var i=Ue,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Tg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zr;a=Tg;var c=zr;if(Tg=o,(zr=l)&&!c)for(Ue=i;Ue!==null;)o=Ue,l=o.child,o.tag===22&&o.memoizedState!==null?RA(i):l!==null?(l.return=o,Ue=l):RA(i);for(;s!==null;)Ue=s,OL(s),s=s.sibling;Ue=i,Tg=a,zr=c}OA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ue=s):OA(t)}}function OA(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||S1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yA(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yA(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&hp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}zr||e.flags&512&&ew(e)}catch(h){An(e,e.return,h)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function IA(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function RA(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{S1(4,e)}catch(l){An(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){An(e,i,l)}}var s=e.return;try{ew(e)}catch(l){An(e,s,l)}break;case 5:var o=e.return;try{ew(e)}catch(l){An(e,o,l)}}}catch(l){An(e,e.return,l)}if(e===t){Ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ue=a;break}Ue=e.return}}var DB=Math.ceil,Sy=fa.ReactCurrentDispatcher,XS=fa.ReactCurrentOwner,xs=fa.ReactCurrentBatchConfig,Ot=0,hr=null,Yn=null,_r=0,zi=0,ud=Il(0),er=0,kp=null,Hc=0,k1=0,JS=0,zf=null,bi=null,QS=0,qd=1/0,Ho=null,ky=!1,rw=null,pl=null,Ng=!1,Za=null,_y=0,$f=0,iw=null,L0=-1,O0=0;function ni(){return Ot&6?Dn():L0!==-1?L0:L0=Dn()}function ml(t){return t.mode&1?Ot&2&&_r!==0?_r&-_r:xB.transition!==null?(O0===0&&(O0=yM()),O0):(t=Vt,t!==0||(t=window.event,t=t===void 0?16:_M(t.type)),t):1}function Gs(t,e,n,r){if(50<$f)throw $f=0,iw=null,Error(Le(185));rm(t,n,r),(!(Ot&2)||t!==hr)&&(t===hr&&(!(Ot&2)&&(k1|=n),er===4&&Ga(t,_r)),Ci(t,r),n===1&&Ot===0&&!(e.mode&1)&&(qd=Dn()+500,b1&&Rl()))}function Ci(t,e){var n=t.callbackNode;xF(t,e);var r=ay(t,t===hr?_r:0);if(r===0)n!==null&&qC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qC(n),e===1)t.tag===0?bB(jA.bind(null,t)):UM(jA.bind(null,t)),mB(function(){!(Ot&6)&&Rl()}),n=null;else{switch(vM(r)){case 1:n=_S;break;case 4:n=mM;break;case 16:n=oy;break;case 536870912:n=gM;break;default:n=oy}n=$L(n,IL.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IL(t,e){if(L0=-1,O0=0,Ot&6)throw Error(Le(327));var n=t.callbackNode;if(Td()&&t.callbackNode!==n)return null;var r=ay(t,t===hr?_r:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cy(t,r);else{e=r;var i=Ot;Ot|=2;var s=jL();(hr!==t||_r!==e)&&(Ho=null,qd=Dn()+500,Ac(t,e));do try{zB();break}catch(a){RL(t,a)}while(1);DS(),Sy.current=s,Ot=i,Yn!==null?e=0:(hr=null,_r=0,e=er)}if(e!==0){if(e===2&&(i=M2(t),i!==0&&(r=i,e=sw(t,i))),e===1)throw n=kp,Ac(t,0),Ga(t,r),Ci(t,Dn()),n;if(e===6)Ga(t,r);else{if(i=t.current.alternate,!(r&30)&&!FB(i)&&(e=Cy(t,r),e===2&&(s=M2(t),s!==0&&(r=s,e=sw(t,s))),e===1))throw n=kp,Ac(t,0),Ga(t,r),Ci(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Le(345));case 2:oc(t,bi,Ho);break;case 3:if(Ga(t,r),(r&130023424)===r&&(e=QS+500-Dn(),10<e)){if(ay(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ni(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=B2(oc.bind(null,t,bi,Ho),e);break}oc(t,bi,Ho);break;case 4:if(Ga(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ks(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DB(r/1960))-r,10<r){t.timeoutHandle=B2(oc.bind(null,t,bi,Ho),r);break}oc(t,bi,Ho);break;case 5:oc(t,bi,Ho);break;default:throw Error(Le(329))}}}return Ci(t,Dn()),t.callbackNode===n?IL.bind(null,t):null}function sw(t,e){var n=zf;return t.current.memoizedState.isDehydrated&&(Ac(t,e).flags|=256),t=Cy(t,e),t!==2&&(e=bi,bi=n,e!==null&&ow(e)),t}function ow(t){bi===null?bi=t:bi.push.apply(bi,t)}function FB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ga(t,e){for(e&=~JS,e&=~k1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ks(e),r=1<<n;t[n]=-1,e&=~r}}function jA(t){if(Ot&6)throw Error(Le(327));Td();var e=ay(t,0);if(!(e&1))return Ci(t,Dn()),null;var n=Cy(t,e);if(t.tag!==0&&n===2){var r=M2(t);r!==0&&(e=r,n=sw(t,r))}if(n===1)throw n=kp,Ac(t,0),Ga(t,e),Ci(t,Dn()),n;if(n===6)throw Error(Le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oc(t,bi,Ho),Ci(t,Dn()),null}function ZS(t,e){var n=Ot;Ot|=1;try{return t(e)}finally{Ot=n,Ot===0&&(qd=Dn()+500,b1&&Rl())}}function Kc(t){Za!==null&&Za.tag===0&&!(Ot&6)&&Td();var e=Ot;Ot|=1;var n=xs.transition,r=Vt;try{if(xs.transition=null,Vt=1,t)return t()}finally{Vt=r,xs.transition=n,Ot=e,!(Ot&6)&&Rl()}}function ek(){zi=ud.current,sn(ud)}function Ac(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pB(n)),Yn!==null)for(n=Yn.return;n!==null;){var r=n;switch(IS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hy();break;case 3:Vd(),sn(ki),sn(Wr),US();break;case 5:VS(r);break;case 4:Vd();break;case 13:sn(mn);break;case 19:sn(mn);break;case 10:FS(r.type._context);break;case 22:case 23:ek()}n=n.return}if(hr=t,Yn=t=gl(t.current,null),_r=zi=e,er=0,kp=null,JS=k1=Hc=0,bi=zf=null,bc!==null){for(e=0;e<bc.length;e++)if(n=bc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bc=null}return t}function RL(t,e){do{var n=Yn;try{if(DS(),P0.current=wy,xy){for(var r=yn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xy=!1}if(Wc=0,lr=Zn=yn=null,Ff=!1,xp=0,XS.current=null,n===null||n.return===null){er=1,kp=e,Yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_r,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=kA(o);if(f!==null){f.flags&=-257,_A(f,o,a,s,e),f.mode&1&&SA(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){SA(s,c,e),tk();break e}l=Error(Le(426))}}else if(hn&&a.mode&1){var v=kA(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),_A(v,o,a,s,e),RS(Ud(l,a));break e}}s=l=Ud(l,a),er!==4&&(er=2),zf===null?zf=[s]:zf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=vL(s,l,e);gA(s,y);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(pl===null||!pl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=bL(s,a,e);gA(s,C);break e}}s=s.return}while(s!==null)}FL(n)}catch(A){e=A,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(1)}function jL(){var t=Sy.current;return Sy.current=wy,t===null?wy:t}function tk(){(er===0||er===3||er===2)&&(er=4),hr===null||!(Hc&268435455)&&!(k1&268435455)||Ga(hr,_r)}function Cy(t,e){var n=Ot;Ot|=2;var r=jL();(hr!==t||_r!==e)&&(Ho=null,Ac(t,e));do try{BB();break}catch(i){RL(t,i)}while(1);if(DS(),Ot=n,Sy.current=r,Yn!==null)throw Error(Le(261));return hr=null,_r=0,er}function BB(){for(;Yn!==null;)DL(Yn)}function zB(){for(;Yn!==null&&!dF();)DL(Yn)}function DL(t){var e=zL(t.alternate,t,zi);t.memoizedProps=t.pendingProps,e===null?FL(t):Yn=e,XS.current=null}function FL(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OB(n,e),n!==null){n.flags&=32767,Yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{er=6,Yn=null;return}}else if(n=LB(n,e,zi),n!==null){Yn=n;return}if(e=e.sibling,e!==null){Yn=e;return}Yn=e=t}while(e!==null);er===0&&(er=5)}function oc(t,e,n){var r=Vt,i=xs.transition;try{xs.transition=null,Vt=1,$B(t,e,n,r)}finally{xs.transition=i,Vt=r}return null}function $B(t,e,n,r){do Td();while(Za!==null);if(Ot&6)throw Error(Le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wF(t,s),t===hr&&(Yn=hr=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ng||(Ng=!0,$L(oy,function(){return Td(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=xs.transition,xs.transition=null;var o=Vt;Vt=1;var a=Ot;Ot|=4,XS.current=null,RB(t,n),LL(n,t),aB(D2),ly=!!j2,D2=j2=null,t.current=n,jB(n),hF(),Ot=a,Vt=o,xs.transition=s}else t.current=n;if(Ng&&(Ng=!1,Za=t,_y=i),s=t.pendingLanes,s===0&&(pl=null),mF(n.stateNode),Ci(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ky)throw ky=!1,t=rw,rw=null,t;return _y&1&&t.tag!==0&&Td(),s=t.pendingLanes,s&1?t===iw?$f++:($f=0,iw=t):$f=0,Rl(),null}function Td(){if(Za!==null){var t=vM(_y),e=xs.transition,n=Vt;try{if(xs.transition=null,Vt=16>t?16:t,Za===null)var r=!1;else{if(t=Za,Za=null,_y=0,Ot&6)throw Error(Le(331));var i=Ot;for(Ot|=4,Ue=t.current;Ue!==null;){var s=Ue,o=s.child;if(Ue.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ue=c;Ue!==null;){var u=Ue;switch(u.tag){case 0:case 11:case 15:Bf(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ue=d;else for(;Ue!==null;){u=Ue;var h=u.sibling,f=u.return;if(PL(u),u===c){Ue=null;break}if(h!==null){h.return=f,Ue=h;break}Ue=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ue=o;else e:for(;Ue!==null;){if(s=Ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ue=y;break e}Ue=s.return}}var x=t.current;for(Ue=x;Ue!==null;){o=Ue;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Ue=S;else e:for(o=x;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:S1(9,a)}}catch(A){An(a,a.return,A)}if(a===o){Ue=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ue=C;break e}Ue=a.return}}if(Ot=i,Rl(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(p1,t)}catch{}r=!0}return r}finally{Vt=n,xs.transition=e}}return!1}function DA(t,e,n){e=Ud(n,e),e=vL(t,e,1),t=fl(t,e,1),e=ni(),t!==null&&(rm(t,1,e),Ci(t,e))}function An(t,e,n){if(t.tag===3)DA(t,t,n);else for(;e!==null;){if(e.tag===3){DA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pl===null||!pl.has(r))){t=Ud(n,t),t=bL(e,t,1),e=fl(e,t,1),t=ni(),e!==null&&(rm(e,1,t),Ci(e,t));break}}e=e.return}}function VB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ni(),t.pingedLanes|=t.suspendedLanes&n,hr===t&&(_r&n)===n&&(er===4||er===3&&(_r&130023424)===_r&&500>Dn()-QS?Ac(t,0):JS|=n),Ci(t,e)}function BL(t,e){e===0&&(t.mode&1?(e=vg,vg<<=1,!(vg&130023424)&&(vg=4194304)):e=1);var n=ni();t=ua(t,e),t!==null&&(rm(t,e,n),Ci(t,n))}function UB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BL(t,n)}function qB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(e),BL(t,n)}var zL;zL=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ki.current)Si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Si=!1,MB(t,e,n);Si=!!(t.flags&131072)}else Si=!1,hn&&e.flags&1048576&&qM(e,my,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;M0(t,e),t=e.pendingProps;var i=Bd(e,Wr.current);Ad(e,n),i=WS(null,e,r,t,i,n);var s=HS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(r)?(s=!0,fy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zS(e),i.updater=w1,e.stateNode=i,i._reactInternals=e,H2(e,r,t,n),e=Y2(null,e,r,!0,s,n)):(e.tag=0,hn&&s&&OS(e),ei(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(M0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HB(r),t=Bs(r,t),i){case 0:e=G2(null,e,r,t,n);break e;case 1:e=TA(null,e,r,t,n);break e;case 11:e=CA(null,e,r,t,n);break e;case 14:e=AA(null,e,r,Bs(r.type,t),n);break e}throw Error(Le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),G2(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),TA(t,e,r,i,n);case 3:e:{if(kL(e),t===null)throw Error(Le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XM(t,e),vy(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ud(Error(Le(423)),e),e=NA(t,e,r,n,i);break e}else if(r!==i){i=Ud(Error(Le(424)),e),e=NA(t,e,r,n,i);break e}else for(qi=hl(e.stateNode.containerInfo.firstChild),Hi=e,hn=!0,qs=null,n=GM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zd(),r===i){e=da(t,e,n);break e}ei(t,e,r,n)}e=e.child}return e;case 5:return JM(e),t===null&&U2(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,F2(r,i)?o=null:s!==null&&F2(r,s)&&(e.flags|=32),SL(t,e),ei(t,e,o,n),e.child;case 6:return t===null&&U2(e),null;case 13:return _L(t,e,n);case 4:return $S(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$d(e,null,r,n):ei(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),CA(t,e,r,i,n);case 7:return ei(t,e,e.pendingProps,n),e.child;case 8:return ei(t,e,e.pendingProps.children,n),e.child;case 12:return ei(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Zt(gy,r._currentValue),r._currentValue=o,s!==null)if(Js(s.value,o)){if(s.children===i.children&&!ki.current){e=da(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ia(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),q2(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),q2(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ei(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ad(e,n),i=_s(i),r=r(i),e.flags|=1,ei(t,e,r,n),e.child;case 14:return r=e.type,i=Bs(r,e.pendingProps),i=Bs(r.type,i),AA(t,e,r,i,n);case 15:return xL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),M0(t,e),e.tag=1,_i(r)?(t=!0,fy(e)):t=!1,Ad(e,n),yL(e,r,i),H2(e,r,i,n),Y2(null,e,r,!0,t,n);case 19:return CL(t,e,n);case 22:return wL(t,e,n)}throw Error(Le(156,e.tag))};function $L(t,e){return pM(t,e)}function WB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(t,e,n,r){return new WB(t,e,n,r)}function nk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HB(t){if(typeof t=="function")return nk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wS)return 11;if(t===SS)return 14}return 2}function gl(t,e){var n=t.alternate;return n===null?(n=vs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function I0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")nk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ed:return Tc(n.children,i,s,e);case xS:o=8,i|=8;break;case g2:return t=vs(12,n,e,i|2),t.elementType=g2,t.lanes=s,t;case y2:return t=vs(13,n,e,i),t.elementType=y2,t.lanes=s,t;case v2:return t=vs(19,n,e,i),t.elementType=v2,t.lanes=s,t;case JE:return _1(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YE:o=10;break e;case XE:o=9;break e;case wS:o=11;break e;case SS:o=14;break e;case Va:o=16,r=null;break e}throw Error(Le(130,t==null?t:typeof t,""))}return e=vs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Tc(t,e,n,r){return t=vs(7,t,r,e),t.lanes=n,t}function _1(t,e,n,r){return t=vs(22,t,r,e),t.elementType=JE,t.lanes=n,t.stateNode={isHidden:!1},t}function $b(t,e,n){return t=vs(6,t,null,e),t.lanes=n,t}function Vb(t,e,n){return e=vs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sb(0),this.expirationTimes=Sb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rk(t,e,n,r,i,s,o,a,l){return t=new KB(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zS(s),t}function GB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VL(t){if(!t)return kl;t=t._reactInternals;e:{if(iu(t)!==t||t.tag!==1)throw Error(Le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(t.tag===1){var n=t.type;if(_i(n))return VM(t,n,e)}return e}function UL(t,e,n,r,i,s,o,a,l){return t=rk(n,r,!0,t,i,s,o,a,l),t.context=VL(null),n=t.current,r=ni(),i=ml(n),s=ia(r,i),s.callback=e??null,fl(n,s,i),t.current.lanes=i,rm(t,i,r),Ci(t,r),t}function C1(t,e,n,r){var i=e.current,s=ni(),o=ml(i);return n=VL(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fl(i,e,o),t!==null&&(Gs(t,i,o,s),N0(t,i,o)),o}function Ay(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ik(t,e){FA(t,e),(t=t.alternate)&&FA(t,e)}function YB(){return null}var qL=typeof reportError=="function"?reportError:function(t){console.error(t)};function sk(t){this._internalRoot=t}A1.prototype.render=sk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Le(409));C1(t,e,null,null)};A1.prototype.unmount=sk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kc(function(){C1(null,t,null,null)}),e[ca]=null}};function A1(t){this._internalRoot=t}A1.prototype.unstable_scheduleHydration=function(t){if(t){var e=wM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ka.length&&e!==0&&e<Ka[n].priority;n++);Ka.splice(n,0,t),n===0&&kM(t)}};function ok(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function T1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BA(){}function XB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ay(o);s.call(c)}}var o=UL(e,r,t,0,null,!1,!1,"",BA);return t._reactRootContainer=o,t[ca]=o.current,mp(t.nodeType===8?t.parentNode:t),Kc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ay(l);a.call(c)}}var l=rk(t,0,!1,null,null,!1,!1,"",BA);return t._reactRootContainer=l,t[ca]=l.current,mp(t.nodeType===8?t.parentNode:t),Kc(function(){C1(e,l,n,r)}),l}function N1(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ay(o);a.call(l)}}C1(e,o,t,i)}else o=XB(n,e,t,i,r);return Ay(o)}bM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bf(e.pendingLanes);n!==0&&(CS(e,n|1),Ci(e,Dn()),!(Ot&6)&&(qd=Dn()+500,Rl()))}break;case 13:Kc(function(){var r=ua(t,1);if(r!==null){var i=ni();Gs(r,t,1,i)}}),ik(t,1)}};AS=function(t){if(t.tag===13){var e=ua(t,134217728);if(e!==null){var n=ni();Gs(e,t,134217728,n)}ik(t,134217728)}};xM=function(t){if(t.tag===13){var e=ml(t),n=ua(t,e);if(n!==null){var r=ni();Gs(n,t,e,r)}ik(t,e)}};wM=function(){return Vt};SM=function(t,e){var n=Vt;try{return Vt=t,e()}finally{Vt=n}};N2=function(t,e,n){switch(e){case"input":if(w2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=v1(r);if(!i)throw Error(Le(90));ZE(r),w2(r,i)}}}break;case"textarea":tM(t,n);break;case"select":e=n.value,e!=null&&Sd(t,!!n.multiple,e,!1)}};lM=ZS;cM=Kc;var JB={usingClientEntryPoint:!1,Events:[sm,id,v1,oM,aM,ZS]},nf={findFiberByHostInstance:vc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QB={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hM(t),t===null?null:t.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||YB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pg.isDisabled&&Pg.supportsFiber)try{p1=Pg.inject(QB),yo=Pg}catch{}}Xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JB;Xi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ok(e))throw Error(Le(200));return GB(t,e,null,n)};Xi.createRoot=function(t,e){if(!ok(t))throw Error(Le(299));var n=!1,r="",i=qL;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rk(t,1,!1,null,null,n,!1,r,i),t[ca]=e.current,mp(t.nodeType===8?t.parentNode:t),new sk(e)};Xi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Le(188)):(t=Object.keys(t).join(","),Error(Le(268,t)));return t=hM(e),t=t===null?null:t.stateNode,t};Xi.flushSync=function(t){return Kc(t)};Xi.hydrate=function(t,e,n){if(!T1(e))throw Error(Le(200));return N1(null,t,e,!0,n)};Xi.hydrateRoot=function(t,e,n){if(!ok(t))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qL;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=UL(e,null,t,1,n??null,i,!1,s,o),t[ca]=e.current,mp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new A1(e)};Xi.render=function(t,e,n){if(!T1(e))throw Error(Le(200));return N1(null,t,e,!1,n)};Xi.unmountComponentAtNode=function(t){if(!T1(t))throw Error(Le(40));return t._reactRootContainer?(Kc(function(){N1(null,null,t,!1,function(){t._reactRootContainer=null,t[ca]=null})}),!0):!1};Xi.unstable_batchedUpdates=ZS;Xi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!T1(n))throw Error(Le(200));if(t==null||t._reactInternals===void 0)throw Error(Le(38));return N1(t,e,n,!1,r)};Xi.version="18.3.1-next-f1338f8080-20240426";function WL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WL)}catch(t){console.error(t)}}WL(),WE.exports=Xi;var HL=WE.exports;const Ty=hS(HL);var zA=HL;p2.createRoot=zA.createRoot,p2.hydrateRoot=zA.hydrateRoot;const ZB="modulepreload",ez=function(t){return"/tir-criteria-a/"+t},$A={},_l=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ez(s),s in $A)return;$A[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":ZB,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},tz=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_l(()=>Promise.resolve().then(()=>uh),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ak extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class nz extends ak{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class rz extends ak{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iz extends ak{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var aw;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(aw||(aw={}));var sz=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class oz{constructor(e,{headers:n={},customFetch:r,region:i=aw.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=tz(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return sz(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(p=>{throw new nz(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new rz(u);if(!u.ok)throw new iz(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var xi={},lk={},P1={},am={},E1={},M1={},az=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Wd=az();const lz=Wd.fetch,KL=Wd.fetch.bind(Wd),GL=Wd.Headers,cz=Wd.Request,uz=Wd.Response,uh=Object.freeze(Object.defineProperty({__proto__:null,Headers:GL,Request:cz,Response:uz,default:KL,fetch:lz},Symbol.toStringTag,{value:"Module"})),dz=T7(uh);var L1={};Object.defineProperty(L1,"__esModule",{value:!0});let hz=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};L1.default=hz;var YL=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(M1,"__esModule",{value:!0});const fz=YL(dz),pz=YL(L1);let mz=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fz.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,h=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&v&&v.length>1&&(d=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await s.text();try{c=JSON.parse(g),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,f="OK")}catch{s.status===404&&g===""?(h=204,f="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new pz.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};M1.default=mz;var gz=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(E1,"__esModule",{value:!0});const yz=gz(M1);let vz=class extends yz.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};E1.default=vz;var bz=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(am,"__esModule",{value:!0});const xz=bz(E1);let wz=class extends xz.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};am.default=wz;var Sz=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(P1,"__esModule",{value:!0});const rf=Sz(am);let kz=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new rf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new rf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new rf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new rf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new rf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};P1.default=kz;var O1={},I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.version=void 0;I1.version="0.0.0-automated";Object.defineProperty(O1,"__esModule",{value:!0});O1.DEFAULT_HEADERS=void 0;const _z=I1;O1.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${_z.version}`};var XL=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lk,"__esModule",{value:!0});const Cz=XL(P1),Az=XL(am),Tz=O1;let Nz=class JL{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Tz.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Cz.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new JL(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new Az.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};lk.default=Nz;var dh=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xi,"__esModule",{value:!0});xi.PostgrestError=xi.PostgrestBuilder=xi.PostgrestTransformBuilder=xi.PostgrestFilterBuilder=xi.PostgrestQueryBuilder=xi.PostgrestClient=void 0;const QL=dh(lk);xi.PostgrestClient=QL.default;const ZL=dh(P1);xi.PostgrestQueryBuilder=ZL.default;const e6=dh(am);xi.PostgrestFilterBuilder=e6.default;const t6=dh(E1);xi.PostgrestTransformBuilder=t6.default;const n6=dh(M1);xi.PostgrestBuilder=n6.default;const r6=dh(L1);xi.PostgrestError=r6.default;var Pz=xi.default={PostgrestClient:QL.default,PostgrestQueryBuilder:ZL.default,PostgrestFilterBuilder:e6.default,PostgrestTransformBuilder:t6.default,PostgrestBuilder:n6.default,PostgrestError:r6.default};const{PostgrestClient:Ez,PostgrestQueryBuilder:Wue,PostgrestFilterBuilder:Hue,PostgrestTransformBuilder:Kue,PostgrestBuilder:Gue,PostgrestError:Yue}=Pz;let lw;typeof window>"u"?lw=require("ws"):lw=window.WebSocket;const Mz=lw,Lz="2.11.10",Oz={"X-Client-Info":`realtime-js/${Lz}`},Iz="1.0.0",i6=1e4,Rz=1e3;var Nd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Nd||(Nd={}));var Zr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Zr||(Zr={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var cw;(function(t){t.websocket="websocket"})(cw||(cw={}));var fc;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fc||(fc={}));class jz{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class s6{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Jt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Jt||(Jt={}));const VA=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Dz(o,t,e,i),s),{})},Dz=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i?.type,o=n[t];return s&&!r.includes(s)?o6(s,o):uw(o)},o6=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return $z(e,n)}switch(t){case Jt.bool:return Fz(e);case Jt.float4:case Jt.float8:case Jt.int2:case Jt.int4:case Jt.int8:case Jt.numeric:case Jt.oid:return Bz(e);case Jt.json:case Jt.jsonb:return zz(e);case Jt.timestamp:return Vz(e);case Jt.abstime:case Jt.date:case Jt.daterange:case Jt.int4range:case Jt.int8range:case Jt.money:case Jt.reltime:case Jt.text:case Jt.time:case Jt.timestamptz:case Jt.timetz:case Jt.tsrange:case Jt.tstzrange:return uw(e);default:return uw(e)}},uw=t=>t,Fz=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Bz=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zz=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},$z=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>o6(e,a))}return t},Vz=t=>typeof t=="string"?t.replace(" ","T"):t,a6=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ub{constructor(e,n,r={},i=i6){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var UA;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(UA||(UA={}));class Vf{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vf.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Vf.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Vf.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const h=u.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),p=u.filter(v=>f.indexOf(v.presence_ref)<0),g=d.filter(v=>h.indexOf(v.presence_ref)<0);p.length>0&&(a[c]=p),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qA;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(qA||(qA={}));var WA;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(WA||(WA={}));var Ko;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ko||(Ko={}));class ck{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Zr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ub(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new s6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Zr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Vf(this),this.broadcastEndpointURL=a6(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e?.(Ko.CHANNEL_ERROR,u)),this._onClose(()=>e?.(Ko.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e?.(Ko.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h?.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const v=h[g],{filter:{event:y,schema:x,table:S,filter:C}}=v,A=u&&u[g];if(A&&A.event===y&&A.schema===x&&A.table===S&&A.filter===C)p.push(Object.assign(Object.assign({},v),{id:A.id}));else{this.unsubscribe(),this.state=Zr.errored,e?.(Ko.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ko.SUBSCRIBED);return}}).receive("error",u=>{this.state=Zr.errored,e?.(Ko.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ko.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Zr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new Ub(this,Vs.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ub(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Vs;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,g,v;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,g,v,y,x,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,A=(p=f.filter)===null||p===void 0?void 0:p.event;return C&&((g=n.ids)===null||g===void 0?void 0:g.includes(C))&&(A==="*"||A?.toLocaleLowerCase()===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const C=(x=(y=f?.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return C==="*"||C===((S=n?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:v,commit_timestamp:y,type:x,errors:S}=p;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:x,new:{},old:{},errors:S}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Zr.closed}_isJoined(){return this.state===Zr.joined}_isJoining(){return this.state===Zr.joining}_isLeaving(){return this.state===Zr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ck.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=VA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=VA(e.columns,e.old_record)),n}}const HA=()=>{},Uz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qz{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Oz,this.params={},this.timeout=i6,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=HA,this.ref=0,this.logger=HA,this.conn=null,this.sendBuffer=[],this.serializer=new jz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>_l(()=>Promise.resolve().then(()=>uh),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${cw.websocket}`,this.httpEndpoint=a6(e),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n?.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new s6(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Mz),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Wz(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Iz}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nd.connecting:return fc.Connecting;case Nd.open:return fc.Open;case Nd.closing:return fc.Closing;default:return fc.Closed}}isConnected(){return this.connectionState()===fc.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new ck(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Vs.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Rz,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Uz],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Wz{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Nd.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class uk extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ar(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Hz extends uk{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dw extends uk{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Kz=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const l6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_l(()=>Promise.resolve().then(()=>uh),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Gz=()=>Kz(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _l(()=>Promise.resolve().then(()=>uh),void 0)).Response:Response}),hw=t=>{if(Array.isArray(t))return t.map(n=>hw(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=hw(r)}),e};var su=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const qb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yz=(t,e,n)=>su(void 0,void 0,void 0,function*(){const r=yield Gz();t instanceof r&&!n?.noResolveJson?t.json().then(i=>{e(new Hz(qb(i),t.status||500))}).catch(i=>{e(new dw(qb(i),i))}):e(new dw(qb(t),t))}),Xz=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function lm(t,e,n,r,i,s){return su(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Xz(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Yz(l,a,r))})})}function Ny(t,e,n,r){return su(this,void 0,void 0,function*(){return lm(t,"GET",e,n,r)})}function qa(t,e,n,r,i){return su(this,void 0,void 0,function*(){return lm(t,"POST",e,r,i,n)})}function Jz(t,e,n,r,i){return su(this,void 0,void 0,function*(){return lm(t,"PUT",e,r,i,n)})}function Qz(t,e,n,r){return su(this,void 0,void 0,function*(){return lm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function c6(t,e,n,r,i){return su(this,void 0,void 0,function*(){return lm(t,"DELETE",e,r,i,n)})}var gi=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Zz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},KA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class e9{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=l6(i)}uploadOrUpdate(e,n,r,i){return gi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},KA),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(ar(s))return{data:null,error:s};throw s}})}upload(e,n,r){return gi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return gi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:KA.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ar(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return gi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const s=yield qa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new uk("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}update(e,n,r){return gi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return gi(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}copy(e,n,r){return gi(this,void 0,void 0,function*(){try{return{data:{path:(yield qa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return gi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield qa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return gi(this,void 0,void 0,function*(){try{const i=yield qa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}download(e,n){return gi(this,void 0,void 0,function*(){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ny(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ar(a))return{data:null,error:a};throw a}})}info(e){return gi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ny(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:hw(r),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}exists(e){return gi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Qz(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ar(r)&&r instanceof dw){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n?.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return gi(this,void 0,void 0,function*(){try{return{data:yield c6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}list(e,n,r){return gi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Zz),n),{prefix:e||""});return{data:yield qa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const t9="2.7.1",n9={"X-Client-Info":`storage-js/${t9}`};var Du=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class r9{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},n9),n),this.fetch=l6(r)}listBuckets(){return Du(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ar(e))return{data:null,error:e};throw e}})}getBucket(e){return Du(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Du(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Du(this,void 0,void 0,function*(){try{return{data:yield Jz(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Du(this,void 0,void 0,function*(){try{return{data:yield qa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Du(this,void 0,void 0,function*(){try{return{data:yield c6(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}}class i9 extends r9{constructor(e,n={},r){super(e,n,r)}from(e){return new e9(this.url,this.headers,e,this.fetch)}}const s9="2.50.0";let wf="";typeof Deno<"u"?wf="deno":typeof document<"u"?wf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wf="react-native":wf="node";const o9={"X-Client-Info":`supabase-js-${wf}/${s9}`},a9={headers:o9},l9={schema:"public"},c9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},u9={};var d9=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const h9=t=>{let e;return t?e=t:typeof fetch>"u"?e=KL:e=fetch,(...n)=>e(...n)},f9=()=>typeof Headers>"u"?GL:Headers,p9=(t,e,n)=>{const r=h9(n),i=f9();return(s,o)=>d9(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var m9=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function g9(t){return t.endsWith("/")?t:t+"/"}function y9(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>m9(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const u6="2.70.0",Gu=30*1e3,fw=3,Wb=fw*Gu,v9="http://localhost:9999",b9="supabase.auth.token",x9={"X-Client-Info":`gotrue-js/${u6}`},pw="X-Supabase-Api-Version",d6={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},w9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S9=6e5;class dk extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function bt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class k9 extends dk{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function _9(t){return bt(t)&&t.name==="AuthApiError"}class h6 extends dk{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class jl extends dk{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Fa extends jl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function C9(t){return bt(t)&&t.name==="AuthSessionMissingError"}class Eg extends jl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mg extends jl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lg extends jl{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A9(t){return bt(t)&&t.name==="AuthImplicitGrantRedirectError"}class GA extends jl{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mw extends jl{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Hb(t){return bt(t)&&t.name==="AuthRetryableFetchError"}class YA extends jl{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Uf extends jl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Py="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),XA=` 	
\r=`.split(""),T9=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<XA.length;e+=1)t[XA[e].charCodeAt(0)]=-2;for(let e=0;e<Py.length;e+=1)t[Py[e].charCodeAt(0)]=e;return t})();function JA(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Py[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Py[r]),e.queuedBits-=6}}function f6(t,e,n){const r=T9[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function QA(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{E9(o,r,n)};for(let o=0;o<t.length;o+=1)f6(t.charCodeAt(o),i,s);return e.join("")}function N9(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function P9(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}N9(r,e)}}function E9(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function M9(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)f6(t.charCodeAt(i),n,r);return new Uint8Array(e)}function L9(t){const e=[];return P9(t,n=>e.push(n)),new Uint8Array(e)}function O9(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>JA(i,n,r)),JA(null,n,r),e.join("")}function I9(t){return Math.round(Date.now()/1e3)+t}function R9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ds=()=>typeof window<"u"&&typeof document<"u",Zl={tested:!1,writable:!1},qf=()=>{if(!Ds())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zl.tested)return Zl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Zl.tested=!0,Zl.writable=!0}catch{Zl.tested=!0,Zl.writable=!1}return Zl.writable};function j9(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const p6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_l(()=>Promise.resolve().then(()=>uh),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},D9=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",m6=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Og=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ig=async(t,e)=>{await t.removeItem(e)};class R1{constructor(){this.promise=new R1.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}R1.promiseConstructor=Promise;function Kb(t){const e=t.split(".");if(e.length!==3)throw new Uf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!w9.test(e[r]))throw new Uf("JWT not in base64url format");return{header:JSON.parse(QA(e[0])),payload:JSON.parse(QA(e[1])),signature:M9(e[2]),raw:{header:e[0],payload:e[1]}}}async function F9(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function B9(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function z9(t){return("0"+t.toString(16)).substr(-2)}function $9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,z9).join("")}async function V9(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function U9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await V9(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fu(t,e,n=!1){const r=$9();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await m6(t,`${e}-code-verifier`,i);const s=await U9(r);return[s,r===s?"plain":"s256"]}const q9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function W9(t){const e=t.headers.get(pw);if(!e||!e.match(q9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function H9(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function K9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const G9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bu(t){if(!G9.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Y9=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ac=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),X9=[502,503,504];async function ZA(t){var e;if(!D9(t))throw new mw(ac(t),0);if(X9.includes(t.status))throw new mw(ac(t),t.status);let n;try{n=await t.json()}catch(s){throw new h6(ac(s),s)}let r;const i=W9(t);if(i&&i.getTime()>=d6["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new YA(ac(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Fa}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new YA(ac(n),t.status,n.weak_password.reasons);throw new k9(ac(n),t.status||500,r)}const J9=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function kt(t,e,n,r){var i;const s=Object.assign({},r?.headers);s[pw]||(s[pw]=d6["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Q9(t,e,n+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function Q9(t,e,n,r,i,s){const o=J9(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new mw(ac(l),0)}if(a.ok||await ZA(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await ZA(l)}}function Vo(t){var e;let n=null;n$(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=I9(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function e3(t){const e=Vo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ya(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Z9(t){return{data:t,error:null}}function e$(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Y9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function t$(t){return t}function n$(t){return t.access_token&&t.refresh_token&&t.expires_in}const Gb=["global","local","others"];var r$=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class i${constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=p6(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Gb[0]){if(Gb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gb.join(", ")}`);try{return await kt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await kt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ya})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=r$(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await kt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:e$,redirectTo:n?.redirectTo})}catch(n){if(bt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await kt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ya})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await kt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:t$});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(bt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Bu(e);try{return await kt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ya})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Bu(e);try{return await kt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ya})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Bu(e);try{return await kt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ya})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Bu(e.userId);try{const{data:n,error:r}=await kt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Bu(e.userId),Bu(e.id);try{return{data:await kt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}}const s$={getItem:t=>qf()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{qf()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{qf()&&globalThis.localStorage.removeItem(t)}};function t3(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function o$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zu={debug:!!(globalThis&&qf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class g6 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class a$ extends g6{}async function l$(t,e,n){zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new a$(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}o$();const c$={url:v9,storageKey:b9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:x9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function n3(t,e,n){return await n()}class _p{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_p.nextInstanceID,_p.nextInstanceID+=1,this.instanceID>0&&Ds()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},c$),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new i$({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=p6(i.fetch),this.lock=i.lock||n3,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ds()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=l$:this.lock=n3,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:qf()?this.storage=s$:(this.memoryStorage={},this.storage=t3(this.memoryStorage)):(this.memoryStorage={},this.storage=t3(this.memoryStorage)),Ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${u6}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=j9(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ds()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),A9(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return bt(n)?{error:n}:{error:new h6("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Vo}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Fu(this.storage,this.storageKey)),s=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:p},xform:Vo})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h?.data)!==null&&r!==void 0?r:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Vo})}else throw new Mg("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:e3})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:e3})}else throw new Mg("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Eg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:v,wallet:y,statement:x,options:S}=e;let C;if(Ds())if(typeof y=="object")C=y;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))C=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=y}const A=new URL((n=S?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const O=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let M;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")M=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)M=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)p=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),g=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${A.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(r=S?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((c=S?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((d=(u=S?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...S.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const O=await C.signMessage(new TextEncoder().encode(p),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=O}}try{const{data:v,error:y}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:O9(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Vo});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Eg}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(bt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const n=await Og(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Vo});if(await Ig(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Eg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(bt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await kt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Vo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Eg}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Fu(this.storage,this.storageKey));const{error:d}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Mg("You must provide either an email or phone number.")}catch(a){if(bt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await kt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Vo});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(bt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Fu(this.storage,this.storageKey)),await kt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Z9})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Fa;const{error:i}=await kt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(bt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await kt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await kt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new Mg("You must provide either an email or phone number and a type")}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Og(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Wb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ya}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fa}:await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ya})})}catch(n){if(bt(n))return C9(n)&&(await this._removeSession(),await Ig(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Fa;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Fu(this.storage,this.storageKey));const{data:c,error:u}=await kt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ya});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fa;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=Kb(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(bt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Fa;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ds())throw new Lg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new GA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new GA("No code detected.");const{data:x,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Lg("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=Gu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:v}=await this._getUser(s);if(v)throw v;const y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(bt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Og(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(_9(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Ig(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=R9(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Fu(this.storage,this.storageKey,!0));try{return await kt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await kt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ds()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(bt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await kt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await B9(async i=>(i>0&&await F9(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await kt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vo})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Hb(s)&&Date.now()+o-r<Gu})}catch(r){if(this._debug(n,"error",r),bt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ds()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Og(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Wb;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Wb}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Hb(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Fa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new R1;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Fa;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),bt(s)){const o={session:null,error:s};return Hb(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await m6(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ig(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ds()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Gu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Gu}ms, refresh threshold is ${fw} ticks`),i<=fw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof g6)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ds()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Fu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r?.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await kt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await kt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await kt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await kt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=e?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Kb(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+S9>Date.now()))return r;const{data:i,error:s}=await kt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Uf("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Uf("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Kb(r);if(H9(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const c=K9(i.alg),u=await this.fetchJwk(i.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,L9(`${a}.${l}`)))throw new Uf("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}}_p.nextInstanceID=0;const u$=_p;class d$ extends u${constructor(e){super(e)}}var h$=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class f${constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=g9(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:l9,realtime:u9,auth:Object.assign(Object.assign({},c9),{storageKey:c}),global:a9},d=y9(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=p9(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Ez(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new oz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new i9(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return h$(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d$({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qz(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const p$=(t,e,n)=>new f$(t,e,n),m$="https://qhjqccpoqingzjhubmyt.supabase.co",g$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFoanFjY3BvcWluZ3pqaHVibXl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3ODM0MTIsImV4cCI6MjA1OTM1OTQxMn0.3Sgkz2YXEECwNmGWKtXVPhbAhIbH-jxTaGTHoPZQtDA",gs=p$(m$,g$),y$=({onStart:t})=>{const[e,n]=W.useState(""),[r,i]=W.useState(null),[s,o]=W.useState(null);W.useEffect(()=>{const l=new URLSearchParams(window.location.search),c=l.get("name"),u=l.get("studentId");c&&c.trim()&&n(c),u&&/^[0-9a-fA-F-]{36}$/.test(u)?i(u):console.warn(" Invalid or missing studentId in URL:",u)},[]);const a=async()=>{if(!e||!s){alert("Please enter your name and choose a learning path");return}try{if(r){const c=new URLSearchParams(window.location.search).get("sessionCode")??"unknown",{error:u}=await gs.from("responses").upsert({student_id:r,player_name:e,session_code:c,experiment:s,updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment"});u?console.error(" Error syncing learning path:",u.message):console.log(" Synced learning path choice for:",e)}t(e,s)}catch(l){console.error("Error starting journey:",l),alert("Failed to start journey. Please try again.")}};return w.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-purple-100 to-purple-400",children:[w.jsxs("header",{className:"bg-purple-600 text-white p-4 shadow-md",children:[w.jsx("h1",{className:"text-xl md:text-2xl font-bold text-center",children:" Total Internal Reflection Explorer "}),w.jsx("p",{className:"text-center text-sm",children:"MYP Science Criteria A: Knowledge & Understanding"})]}),w.jsx("main",{className:"flex-grow flex flex-col items-center justify-center p-6 max-w-4xl mx-auto",children:w.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full",children:[w.jsx("h2",{className:"text-2xl font-bold text-purple-800 mb-2 text-center",children:" Total Internal Reflection Explorer "}),w.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg mb-4",children:[w.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"Statement of Inquiry:"}),w.jsx("p",{className:"text-purple-700 italic text-center",children:'"The development of science and technology gives us the possibility of changing the world for the better."'})]}),w.jsxs("p",{className:"text-center text-gray-600 text-sm mb-4",children:[" ",w.jsx("strong",{children:"Estimated Completion Time: 40 minutes"})]}),w.jsx("p",{className:"text-gray-700 text-sm mb-6 text-center",children:"In this Criteria A activity, you'll demonstrate your knowledge and understanding of total internal reflection, apply scientific principles to real-world situations, and analyze how this phenomenon enables modern technologies like fiber optics."}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:" Available Badges"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[w.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[w.jsx("span",{className:"text-lg",children:""}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium",children:"Principle Pioneer"}),w.jsx("p",{className:"text-gray-600",children:"Master TIR laws and principles"})]})]}),w.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[w.jsx("span",{className:"text-lg",children:""}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium",children:"Concept Crusader"}),w.jsx("p",{className:"text-gray-600",children:"Understand TIR phenomena deeply"})]})]}),w.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[w.jsx("span",{className:"text-lg",children:""}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium",children:"Application Ace"}),w.jsx("p",{className:"text-gray-600",children:"Connect TIR to real-world uses"})]})]}),w.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[w.jsx("span",{className:"text-lg",children:""}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium",children:"Analysis Architect"}),w.jsx("p",{className:"text-gray-600",children:"Analyze and solve TIR problems"})]})]})]})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),w.jsx("input",{type:"text",id:"name",value:e,onChange:l=>n(l.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter your name"})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"Choose Your Learning Path"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("button",{onClick:()=>o("critical-angle"),className:`p-4 border rounded text-left transition-all ${s==="critical-angle"?"border-purple-500 bg-purple-50 ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"}`,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("span",{className:"text-lg",children:""}),w.jsx("p",{className:"font-medium text-purple-800",children:"Discovering Critical Angles"})]}),w.jsx("p",{className:"text-sm text-gray-600",children:"Explore how light behaves at different angles and discover the magic angle where total internal reflection begins"})]}),w.jsxs("button",{onClick:()=>o("fiber-optics"),className:`p-4 border rounded text-left transition-all ${s==="fiber-optics"?"border-purple-500 bg-purple-50 ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"}`,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("span",{className:"text-lg",children:""}),w.jsx("p",{className:"font-medium text-purple-800",children:"How Fibre Optics Work"})]}),w.jsx("p",{className:"text-sm text-gray-600",children:"Investigate how light travels through glass fibers and enables high-speed internet and medical procedures"})]})]})]}),w.jsxs("div",{className:"mb-6 bg-purple-50 p-4 rounded-lg",children:[w.jsx("h3",{className:"text-md font-semibold text-purple-800 mb-2",children:" What You'll Learn:"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[w.jsxs("div",{children:[w.jsx("p",{children:" Critical angle calculations"}),w.jsx("p",{children:" TIR in diamonds and gems"}),w.jsx("p",{children:" Snell's law applications"})]}),w.jsxs("div",{children:[w.jsx("p",{children:" Refractive index applications"}),w.jsx("p",{children:" Fiber optic technology"}),w.jsx("p",{children:" Light speed in materials"})]})]})]}),w.jsx("button",{onClick:a,disabled:!e||!s,className:`w-full py-3 rounded-lg shadow-md transition font-medium ${e&&s?"bg-purple-600 hover:bg-purple-700 text-white transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:e&&s?" Begin Learning Journey":"Please complete all fields above"}),!1]})})]})},hk=W.createContext({});function fk(t){const e=W.useRef(null);return e.current===null&&(e.current=t()),e.current}const j1=W.createContext(null),pk=W.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class v$ extends W.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function b$({children:t,isPresent:e}){const n=W.useId(),r=W.useRef(null),i=W.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=W.useContext(pk);return W.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),w.jsx(v$,{isPresent:e,childRef:r,sizeRef:i,children:W.cloneElement(t,{ref:r})})}const x$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=fk(w$),l=W.useId(),c=W.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),u=W.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return W.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),W.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=w.jsx(b$,{isPresent:n,children:t})),w.jsx(j1.Provider,{value:u,children:t})};function w$(){return new Map}function y6(t=!0){const e=W.useContext(j1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=W.useId();W.useEffect(()=>{t&&i(s)},[t]);const o=W.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Rg=t=>t.key||"";function r3(t){const e=[];return W.Children.forEach(t,n=>{W.isValidElement(n)&&e.push(n)}),e}const mk=typeof window<"u",v6=mk?W.useLayoutEffect:W.useEffect,b6=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=y6(o),c=W.useMemo(()=>r3(t),[t]),u=o&&!a?[]:c.map(Rg),d=W.useRef(!0),h=W.useRef(c),f=fk(()=>new Map),[p,g]=W.useState(c),[v,y]=W.useState(c);v6(()=>{d.current=!1,h.current=c;for(let C=0;C<v.length;C++){const A=Rg(v[C]);u.includes(A)?f.delete(A):f.get(A)!==!0&&f.set(A,!1)}},[v,u.length,u.join("-")]);const x=[];if(c!==p){let C=[...c];for(let A=0;A<v.length;A++){const O=v[A],M=Rg(O);u.includes(M)||(C.splice(A,0,O),x.push(O))}s==="wait"&&x.length&&(C=x),y(r3(C)),g(c);return}const{forceRender:S}=W.useContext(hk);return w.jsx(w.Fragment,{children:v.map(C=>{const A=Rg(C),O=o&&!a?!1:c===v||u.includes(A),M=()=>{if(f.has(A))f.set(A,!0);else return;let N=!0;f.forEach(D=>{D||(N=!1)}),N&&(S?.(),y(h.current),o&&l?.(),r&&r())};return w.jsx(x$,{isPresent:O,initial:!d.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:O?void 0:M,children:C},A)})})},Ki=t=>t;let x6=Ki;function gk(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},sa=t=>t*1e3,oa=t=>t/1e3,S$={skipAnimations:!1,useManualTiming:!1};function k$(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const f=d&&r?e:n;return u&&s.add(c),f.has(c)||f.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const jg=["read","resolveKeyframes","update","preRender","render","postRender"],_$=40;function w6(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=jg.reduce((y,x)=>(y[x]=k$(s),y),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,f=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,_$),1),i.timestamp=y,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(f))},p=()=>{n=!0,r=!0,i.isProcessing||t(f)};return{schedule:jg.reduce((y,x)=>{const S=o[x];return y[x]=(C,A=!1,O=!1)=>(n||p(),S.schedule(C,A,O)),y},{}),cancel:y=>{for(let x=0;x<jg.length;x++)o[jg[x]].cancel(y)},state:i,steps:o}}const{schedule:an,cancel:Cl,state:wr,steps:Yb}=w6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ki,!0),S6=W.createContext({strict:!1}),i3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kd={};for(const t in i3)Kd[t]={isEnabled:e=>i3[t].some(n=>!!e[n])};function C$(t){for(const e in t)Kd[e]={...Kd[e],...t[e]}}const A$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ey(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||A$.has(t)}let k6=t=>!Ey(t);function T$(t){t&&(k6=e=>e.startsWith("on")?!Ey(e):t(e))}try{T$(require("@emotion/is-prop-valid").default)}catch{}function N$(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(k6(i)||n===!0&&Ey(i)||!e&&!Ey(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function P$(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const D1=W.createContext({});function Cp(t){return typeof t=="string"||Array.isArray(t)}function F1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const yk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vk=["initial",...yk];function B1(t){return F1(t.animate)||vk.some(e=>Cp(t[e]))}function _6(t){return!!(B1(t)||t.variants)}function E$(t,e){if(B1(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cp(n)?n:void 0,animate:Cp(r)?r:void 0}}return t.inherit!==!1?e:{}}function M$(t){const{initial:e,animate:n}=E$(t,W.useContext(D1));return W.useMemo(()=>({initial:e,animate:n}),[s3(e),s3(n)])}function s3(t){return Array.isArray(t)?t.join(" "):t}const L$=Symbol.for("motionComponentSymbol");function dd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function O$(t,e,n){return W.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):dd(n)&&(n.current=r))},[e])}const bk=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),I$="framerAppearId",C6="data-"+bk(I$),{schedule:xk,cancel:Xue}=w6(queueMicrotask,!1),A6=W.createContext({});function R$(t,e,n,r,i){var s,o;const{visualElement:a}=W.useContext(D1),l=W.useContext(S6),c=W.useContext(j1),u=W.useContext(pk).reducedMotion,d=W.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,f=W.useContext(A6);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&j$(d.current,n,i,f);const p=W.useRef(!1);W.useInsertionEffect(()=>{h&&p.current&&h.update(n,c)});const g=n[C6],v=W.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return v6(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),xk.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),W.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),v.current=!1))}),h}function j$(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:T6(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&dd(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function T6(t){if(t)return t.options.allowProjection!==!1?t.projection:T6(t.parent)}function D$({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&C$(t);function a(c,u){let d;const h={...W.useContext(pk),...c,layoutId:F$(c)},{isStatic:f}=h,p=M$(c),g=r(c,f);if(!f&&mk){B$();const v=z$(h);d=v.MeasureLayout,p.visualElement=R$(i,g,h,e,v.ProjectionNode)}return w.jsxs(D1.Provider,{value:p,children:[d&&p.visualElement?w.jsx(d,{visualElement:p.visualElement,...h}):null,n(i,c,O$(g,p.visualElement,u),g,f,p.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=W.forwardRef(a);return l[L$]=i,l}function F$({layoutId:t}){const e=W.useContext(hk).id;return e&&t!==void 0?e+"-"+t:t}function B$(t,e){W.useContext(S6).strict}function z$(t){const{drag:e,layout:n}=Kd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wk(t){return typeof t!="string"||t.includes("-")?!1:!!($$.indexOf(t)>-1||/[A-Z]/u.test(t))}function o3(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Sk(t,e,n,r){if(typeof e=="function"){const[i,s]=o3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=o3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const gw=t=>Array.isArray(t),V$=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),U$=t=>gw(t)?t[t.length-1]||0:t,Vr=t=>!!(t&&t.getVelocity);function R0(t){const e=Vr(t)?t.get():t;return V$(e)?e.toValue():e}function q$({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:W$(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const N6=t=>(e,n)=>{const r=W.useContext(D1),i=W.useContext(j1),s=()=>q$(t,e,r,i);return n?s():fk(s)};function W$(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=R0(s[h]);let{initial:o,animate:a}=t;const l=B1(t),c=_6(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!F1(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=Sk(t,h[f]);if(p){const{transitionEnd:g,transition:v,...y}=p;for(const x in y){let S=y[x];if(Array.isArray(S)){const C=u?S.length-1:0;S=S[C]}S!==null&&(i[x]=S)}for(const x in g)i[x]=g[x]}}}return i}const hh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ou=new Set(hh),P6=t=>e=>typeof e=="string"&&e.startsWith(t),E6=P6("--"),H$=P6("var(--"),kk=t=>H$(t)?K$.test(t.split("/*")[0].trim()):!1,K$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,M6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ha=(t,e,n)=>n>e?e:n<t?t:n,fh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ap={...fh,transform:t=>ha(0,1,t)},Dg={...fh,default:1},cm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ba=cm("deg"),bo=cm("%"),ot=cm("px"),G$=cm("vh"),Y$=cm("vw"),a3={...bo,parse:t=>bo.parse(t)/100,transform:t=>bo.transform(t*100)},X$={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot},J$={rotate:Ba,rotateX:Ba,rotateY:Ba,rotateZ:Ba,scale:Dg,scaleX:Dg,scaleY:Dg,scaleZ:Dg,skew:Ba,skewX:Ba,skewY:Ba,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:Ap,originX:a3,originY:a3,originZ:ot},l3={...fh,transform:Math.round},_k={...X$,...J$,zIndex:l3,size:ot,fillOpacity:Ap,strokeOpacity:Ap,numOctaves:l3},Q$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z$=hh.length;function eV(t,e,n){let r="",i=!0;for(let s=0;s<Z$;s++){const o=hh[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=M6(a,_k[o]);if(!l){i=!1;const u=Q$[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Ck(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ou.has(l)){o=!0;continue}else if(E6(l)){i[l]=c;continue}else{const u=M6(c,_k[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=eV(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const tV={offset:"stroke-dashoffset",array:"stroke-dasharray"},nV={offset:"strokeDashoffset",array:"strokeDasharray"};function rV(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?tV:nV;t[s.offset]=ot.transform(-r);const o=ot.transform(e),a=ot.transform(n);t[s.array]=`${o} ${a}`}function c3(t,e,n){return typeof t=="string"?t:ot.transform(e+n*t)}function iV(t,e,n){const r=c3(e,t.x,t.width),i=c3(n,t.y,t.height);return`${r} ${i}`}function Ak(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(Ck(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:p}=t;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=iV(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&rV(h,o,a,l,!1)}const Tk=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),L6=()=>({...Tk(),attrs:{}}),Nk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function O6(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const I6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function R6(t,e,n,r){O6(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(I6.has(i)?i:bk(i),e.attrs[i])}const My={};function sV(t){Object.assign(My,t)}function j6(t,{layout:e,layoutId:n}){return ou.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!My[t]||t==="opacity")}function Pk(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Vr(i[o])||e.style&&Vr(e.style[o])||j6(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function D6(t,e,n){const r=Pk(t,e,n);for(const i in t)if(Vr(t[i])||Vr(e[i])){const s=hh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function oV(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const u3=["x","y","width","height","cx","cy","r"],aV={useVisualState:N6({scrapeMotionValuesFromProps:D6,createRenderState:L6,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ou.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<u3.length;a++){const l=u3[a];t[l]!==e[l]&&(o=!0)}o&&an.read(()=>{oV(n,r),an.render(()=>{Ak(r,i,Nk(n.tagName),t.transformTemplate),R6(n,r)})})}})},lV={useVisualState:N6({scrapeMotionValuesFromProps:Pk,createRenderState:Tk})};function F6(t,e,n){for(const r in e)!Vr(e[r])&&!j6(r,n)&&(t[r]=e[r])}function cV({transformTemplate:t},e){return W.useMemo(()=>{const n=Tk();return Ck(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uV(t,e){const n=t.style||{},r={};return F6(r,n,t),Object.assign(r,cV(t,e)),r}function dV(t,e){const n={},r=uV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function hV(t,e,n,r){const i=W.useMemo(()=>{const s=L6();return Ak(s,e,Nk(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};F6(s,t.style,t),i.style={...s,...i.style}}return i}function fV(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(wk(n)?hV:dV)(r,s,o,n),c=N$(r,typeof n=="string",t),u=n!==W.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=W.useMemo(()=>Vr(d)?d.get():d,[d]);return W.createElement(n,{...u,children:h})}}function pV(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...wk(r)?aV:lV,preloadedFeatures:t,useRender:fV(i),createVisualElement:e,Component:r};return D$(o)}}function B6(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function z1(t,e,n){const r=t.getProps();return Sk(r,e,n!==void 0?n:r.custom,t)}const mV=gk(()=>window.ScrollTimeline!==void 0);class gV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(mV()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class yV extends gV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Ek(t,e){return t?t[e]||t.default||t:void 0}const yw=2e4;function z6(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<yw;)e+=n,r=t.next(e);return e>=yw?1/0:e}function Mk(t){return typeof t=="function"}function d3(t,e){t.timeline=e,t.onfinish=null}const Lk=t=>Array.isArray(t)&&typeof t[0]=="number",vV={linearEasing:void 0};function bV(t,e){const n=gk(t);return()=>{var r;return(r=vV[e])!==null&&r!==void 0?r:n()}}const Ly=bV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$6=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Hd(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function V6(t){return!!(typeof t=="function"&&Ly()||!t||typeof t=="string"&&(t in vw||Ly())||Lk(t)||Array.isArray(t)&&t.every(V6))}const Sf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,vw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sf([0,.65,.55,1]),circOut:Sf([.55,0,1,.45]),backIn:Sf([.31,.01,.66,-.59]),backOut:Sf([.33,1.53,.69,.99])};function U6(t,e){if(t)return typeof t=="function"&&Ly()?$6(t,e):Lk(t)?Sf(t):Array.isArray(t)?t.map(n=>U6(n,e)||vw.easeOut):vw[t]}const Fs={x:!1,y:!1};function q6(){return Fs.x||Fs.y}function xV(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;e&&(i=e.current);const s=(r=n?.[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function W6(t,e){const n=xV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function h3(t){return e=>{e.pointerType==="touch"||q6()||t(e)}}function wV(t,e,n={}){const[r,i,s]=W6(t,n),o=h3(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=h3(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const H6=(t,e)=>e?t===e?!0:H6(t,e.parentElement):!1,Ok=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,SV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kV(t){return SV.has(t.tagName)||t.tabIndex!==-1}const kf=new WeakSet;function f3(t){return e=>{e.key==="Enter"&&t(e)}}function Xb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _V=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=f3(()=>{if(kf.has(n))return;Xb(n,"down");const i=f3(()=>{Xb(n,"up")}),s=()=>Xb(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function p3(t){return Ok(t)&&!q6()}function CV(t,e,n={}){const[r,i,s]=W6(t,n),o=a=>{const l=a.currentTarget;if(!p3(a)||kf.has(l))return;kf.add(l);const c=e(a),u=(f,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!p3(f)||!kf.has(l))&&(kf.delete(l),typeof c=="function"&&c(f,{success:p}))},d=f=>{u(f,n.useGlobalTarget||H6(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!kV(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>_V(c,i),i)}),s}function AV(t){return t==="x"||t==="y"?Fs[t]?null:(Fs[t]=!0,()=>{Fs[t]=!1}):Fs.x||Fs.y?null:(Fs.x=Fs.y=!0,()=>{Fs.x=Fs.y=!1})}const K6=new Set(["width","height","top","left","right","bottom",...hh]);let j0;function TV(){j0=void 0}const xo={now:()=>(j0===void 0&&xo.set(wr.isProcessing||S$.useManualTiming?wr.timestamp:performance.now()),j0),set:t=>{j0=t,queueMicrotask(TV)}};function Ik(t,e){t.indexOf(e)===-1&&t.push(e)}function Rk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class jk{constructor(){this.subscriptions=[]}add(e){return Ik(this.subscriptions,e),()=>Rk(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function G6(t,e){return e?t*(1e3/e):0}const m3=30,NV=t=>!isNaN(parseFloat(t));class PV{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=xo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=xo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new jk);const r=this.events[e].add(n);return e==="change"?()=>{r(),an.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=xo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>m3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,m3);return G6(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tp(t,e){return new PV(t,e)}function EV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tp(n))}function MV(t,e){const n=z1(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=U$(s[o]);EV(t,o,a)}}function LV(t){return!!(Vr(t)&&t.add)}function bw(t,e){const n=t.getValue("willChange");if(LV(n))return n.add(e)}function Y6(t){return t.props[C6]}const X6=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,OV=1e-7,IV=12;function RV(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=X6(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>OV&&++a<IV);return o}function um(t,e,n,r){if(t===e&&n===r)return Ki;const i=s=>RV(s,0,1,t,n);return s=>s===0||s===1?s:X6(i(s),e,r)}const J6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Q6=t=>e=>1-t(1-e),Z6=um(.33,1.53,.69,.99),Dk=Q6(Z6),eO=J6(Dk),tO=t=>(t*=2)<1?.5*Dk(t):.5*(2-Math.pow(2,-10*(t-1))),Fk=t=>1-Math.sin(Math.acos(t)),nO=Q6(Fk),rO=J6(Fk),iO=t=>/^0[^.\s]+$/u.test(t);function jV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||iO(t):!0}const Wf=t=>Math.round(t*1e5)/1e5,Bk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DV(t){return t==null}const FV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zk=(t,e)=>n=>!!(typeof n=="string"&&FV.test(n)&&n.startsWith(t)||e&&!DV(n)&&Object.prototype.hasOwnProperty.call(n,e)),sO=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Bk);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},BV=t=>ha(0,255,t),Jb={...fh,transform:t=>Math.round(BV(t))},wc={test:zk("rgb","red"),parse:sO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Jb.transform(t)+", "+Jb.transform(e)+", "+Jb.transform(n)+", "+Wf(Ap.transform(r))+")"};function zV(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const xw={test:zk("#"),parse:zV,transform:wc.transform},hd={test:zk("hsl","hue"),parse:sO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bo.transform(Wf(e))+", "+bo.transform(Wf(n))+", "+Wf(Ap.transform(r))+")"},Fr={test:t=>wc.test(t)||xw.test(t)||hd.test(t),parse:t=>wc.test(t)?wc.parse(t):hd.test(t)?hd.parse(t):xw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wc.transform(t):hd.transform(t)},$V=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Bk))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($V))===null||n===void 0?void 0:n.length)||0)>0}const oO="number",aO="color",UV="var",qV="var(",g3="${}",WV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Np(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(WV,l=>(Fr.test(l)?(r.color.push(s),i.push(aO),n.push(Fr.parse(l))):l.startsWith(qV)?(r.var.push(s),i.push(UV),n.push(l)):(r.number.push(s),i.push(oO),n.push(parseFloat(l))),++s,g3)).split(g3);return{values:n,split:a,indexes:r,types:i}}function lO(t){return Np(t).values}function cO(t){const{split:e,types:n}=Np(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===oO?s+=Wf(i[o]):a===aO?s+=Fr.transform(i[o]):s+=i[o]}return s}}const HV=t=>typeof t=="number"?0:t;function KV(t){const e=lO(t);return cO(t)(e.map(HV))}const Al={test:VV,parse:lO,createTransformer:cO,getAnimatableNone:KV},GV=new Set(["brightness","contrast","saturate","opacity"]);function YV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Bk)||[];if(!r)return t;const i=n.replace(r,"");let s=GV.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const XV=/\b([a-z-]*)\(.*?\)/gu,ww={...Al,getAnimatableNone:t=>{const e=t.match(XV);return e?e.map(YV).join(" "):t}},JV={..._k,color:Fr,backgroundColor:Fr,outlineColor:Fr,fill:Fr,stroke:Fr,borderColor:Fr,borderTopColor:Fr,borderRightColor:Fr,borderBottomColor:Fr,borderLeftColor:Fr,filter:ww,WebkitFilter:ww},$k=t=>JV[t];function uO(t,e){let n=$k(t);return n!==ww&&(n=Al),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QV=new Set(["auto","none","0"]);function ZV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!QV.has(s)&&Np(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=uO(n,i)}const y3=t=>t===fh||t===ot,v3=(t,e)=>parseFloat(t.split(", ")[e]),b3=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return v3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?v3(s[1],t):0}},eU=new Set(["x","y","z"]),tU=hh.filter(t=>!eU.has(t));function nU(t){const e=[];return tU.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Gd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:b3(4,13),y:b3(5,14)};Gd.translateX=Gd.x;Gd.translateY=Gd.y;const Nc=new Set;let Sw=!1,kw=!1;function dO(){if(kw){const t=Array.from(Nc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=nU(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kw=!1,Sw=!1,Nc.forEach(t=>t.complete()),Nc.clear()}function hO(){Nc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(kw=!0)})}function rU(){hO(),dO()}class Vk{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Nc.add(this),Sw||(Sw=!0,an.read(hO),an.resolveKeyframes(dO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Nc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Nc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const fO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),iU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sU(t){const e=iU.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function pO(t,e,n=1){const[r,i]=sU(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return fO(o)?parseFloat(o):o}return kk(i)?pO(i,e,n+1):i}const mO=t=>e=>e.test(t),oU={test:t=>t==="auto",parse:t=>t},gO=[fh,ot,bo,Ba,Y$,G$,oU],x3=t=>gO.find(mO(t));class yO extends Vk{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),kk(c))){const u=pO(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!K6.has(r)||e.length!==2)return;const[i,s]=e,o=x3(i),a=x3(s);if(o!==a)if(y3(o)&&y3(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)jV(e[i])&&r.push(i);r.length&&ZV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Gd[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const w3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Al.test(t)||t==="0")&&!t.startsWith("url("));function aU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function lU(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=w3(i,e),a=w3(s,e);return!o||!a?!1:aU(t)||(n==="spring"||Mk(n))&&r}const cU=t=>t!==null;function $1(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(cU),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const uU=40;class vO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=xo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>uU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rU(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=xo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!lU(e,r,i,s))if(o)this.options.duration=0;else{l&&l($1(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const gn=(t,e,n)=>t+(e-t)*n;function Qb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function dU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Qb(l,a,t+1/3),s=Qb(l,a,t),o=Qb(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Oy(t,e){return n=>n>0?e:t}const Zb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},hU=[xw,wc,hd],fU=t=>hU.find(e=>e.test(t));function S3(t){const e=fU(t);if(!e)return!1;let n=e.parse(t);return e===hd&&(n=dU(n)),n}const k3=(t,e)=>{const n=S3(t),r=S3(e);if(!n||!r)return Oy(t,e);const i={...n};return s=>(i.red=Zb(n.red,r.red,s),i.green=Zb(n.green,r.green,s),i.blue=Zb(n.blue,r.blue,s),i.alpha=gn(n.alpha,r.alpha,s),wc.transform(i))},pU=(t,e)=>n=>e(t(n)),dm=(...t)=>t.reduce(pU),_w=new Set(["none","hidden"]);function mU(t,e){return _w.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function gU(t,e){return n=>gn(t,e,n)}function Uk(t){return typeof t=="number"?gU:typeof t=="string"?kk(t)?Oy:Fr.test(t)?k3:bU:Array.isArray(t)?bO:typeof t=="object"?Fr.test(t)?k3:yU:Oy}function bO(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Uk(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function yU(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Uk(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function vU(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const bU=(t,e)=>{const n=Al.createTransformer(e),r=Np(t),i=Np(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_w.has(t)&&!i.values.length||_w.has(e)&&!r.values.length?mU(t,e):dm(bO(vU(r,i),i.values),n):Oy(t,e)};function xO(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?gn(t,e,n):Uk(t)(t,e)}const xU=5;function wO(t,e,n){const r=Math.max(e-xU,0);return G6(n-t(r),e-r)}const Cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ex=.001;function wU({duration:t=Cn.duration,bounce:e=Cn.bounce,velocity:n=Cn.velocity,mass:r=Cn.mass}){let i,s,o=1-e;o=ha(Cn.minDamping,Cn.maxDamping,o),t=ha(Cn.minDuration,Cn.maxDuration,oa(t)),o<1?(i=c=>{const u=c*o,d=u*t,h=u-n,f=Cw(c,o),p=Math.exp(-d);return ex-h/f*p},s=c=>{const d=c*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),g=Cw(Math.pow(c,2),o);return(-i(c)+ex>0?-1:1)*((h-f)*p)/g}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-ex+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=kU(i,s,a);if(t=sa(t),isNaN(l))return{stiffness:Cn.stiffness,damping:Cn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const SU=12;function kU(t,e,n){let r=n;for(let i=1;i<SU;i++)r=r-t(r)/e(r);return r}function Cw(t,e){return t*Math.sqrt(1-e*e)}const _U=["duration","bounce"],CU=["stiffness","damping","mass"];function _3(t,e){return e.some(n=>t[n]!==void 0)}function AU(t){let e={velocity:Cn.velocity,stiffness:Cn.stiffness,damping:Cn.damping,mass:Cn.mass,isResolvedFromDuration:!1,...t};if(!_3(t,CU)&&_3(t,_U))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ha(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Cn.mass,stiffness:i,damping:s}}else{const n=wU(t);e={...e,...n,mass:Cn.mass},e.isResolvedFromDuration=!0}return e}function SO(t=Cn.visualDuration,e=Cn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=AU({...n,velocity:-oa(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*u)),v=o-s,y=oa(Math.sqrt(l/u)),x=Math.abs(v)<5;r||(r=x?Cn.restSpeed.granular:Cn.restSpeed.default),i||(i=x?Cn.restDelta.granular:Cn.restDelta.default);let S;if(g<1){const A=Cw(y,g);S=O=>{const M=Math.exp(-g*y*O);return o-M*((p+g*y*v)/A*Math.sin(A*O)+v*Math.cos(A*O))}}else if(g===1)S=A=>o-Math.exp(-y*A)*(v+(p+y*v)*A);else{const A=y*Math.sqrt(g*g-1);S=O=>{const M=Math.exp(-g*y*O),N=Math.min(A*O,300);return o-M*((p+g*y*v)*Math.sinh(N)+A*v*Math.cosh(N))/A}}const C={calculatedDuration:f&&d||null,next:A=>{const O=S(A);if(f)a.done=A>=d;else{let M=0;g<1&&(M=A===0?sa(p):wO(S,A,O));const N=Math.abs(M)<=r,D=Math.abs(o-O)<=i;a.done=N&&D}return a.value=a.done?o:O,a},toString:()=>{const A=Math.min(z6(C),yw),O=$6(M=>C.next(A*M).value,A,30);return A+"ms "+O}};return C}function C3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=N=>a!==void 0&&N<a||l!==void 0&&N>l,p=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let g=n*e;const v=d+g,y=o===void 0?v:o(v);y!==v&&(g=y-d);const x=N=>-g*Math.exp(-N/r),S=N=>y+x(N),C=N=>{const D=x(N),V=S(N);h.done=Math.abs(D)<=c,h.value=h.done?y:V};let A,O;const M=N=>{f(h.value)&&(A=N,O=SO({keyframes:[h.value,p(h.value)],velocity:wO(S,N,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return M(0),{calculatedDuration:null,next:N=>{let D=!1;return!O&&A===void 0&&(D=!0,C(N),M(N)),A!==void 0&&N>=A?O.next(N-A):(!D&&C(N),h)}}}const TU=um(.42,0,1,1),NU=um(0,0,.58,1),kO=um(.42,0,.58,1),PU=t=>Array.isArray(t)&&typeof t[0]!="number",EU={linear:Ki,easeIn:TU,easeInOut:kO,easeOut:NU,circIn:Fk,circInOut:rO,circOut:nO,backIn:Dk,backInOut:eO,backOut:Z6,anticipate:tO},A3=t=>{if(Lk(t)){x6(t.length===4);const[e,n,r,i]=t;return um(e,n,r,i)}else if(typeof t=="string")return EU[t];return t};function MU(t,e,n){const r=[],i=n||xO,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ki:e;a=dm(l,a)}r.push(a)}return r}function LU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(x6(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=MU(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Hd(t[d],t[d+1],u);return a[d](h)};return n?u=>c(ha(t[0],t[s-1],u)):c}function OU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Hd(0,e,r);t.push(gn(n,1,i))}}function IU(t){const e=[0];return OU(e,t.length-1),e}function RU(t,e){return t.map(n=>n*e)}function jU(t,e){return t.map(()=>e||kO).splice(0,t.length-1)}function Iy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=PU(r)?r.map(A3):A3(r),s={done:!1,value:e[0]},o=RU(n&&n.length===e.length?n:IU(e),t),a=LU(o,e,{ease:Array.isArray(i)?i:jU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const DU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>an.update(e,!0),stop:()=>Cl(e),now:()=>wr.isProcessing?wr.timestamp:xo.now()}},FU={decay:C3,inertia:C3,tween:Iy,keyframes:Iy,spring:SO},BU=t=>t/100;class qk extends vO{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||Vk,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Mk(n)?n:FU[n]||Iy;let l,c;a!==Iy&&typeof e[0]!="number"&&(l=dm(BU,xO(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=z6(u));const{calculatedDuration:d}=u,h=d+i,f=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:f,repeatType:p,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,C=s;if(f){const N=Math.min(this.currentTime,u)/d;let D=Math.floor(N),V=N%1;!V&&N>=1&&(V=1),V===1&&D--,D=Math.min(D,f+1),!!(D%2)&&(p==="reverse"?(V=1-V,g&&(V-=g/d)):p==="mirror"&&(C=o)),S=ha(0,1,V)*d}const A=x?{done:!1,value:l[0]}:C.next(S);a&&(A.value=a(A.value));let{done:O}=A;!x&&c!==null&&(O=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return M&&i!==void 0&&(A.value=$1(l,this.options,i)),v&&v(A.value),M&&this.finish(),A}get duration(){const{resolved:e}=this;return e?oa(e.calculatedDuration):0}get time(){return oa(this.currentTime)}set time(e){e=sa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=oa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=DU,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const zU=new Set(["opacity","clipPath","filter","transform"]);function $U(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=U6(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const VU=gk(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ry=10,UU=2e4;function qU(t){return Mk(t.type)||t.type==="spring"||!V6(t.ease)}function WU(t,e){const n=new qk({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<UU;)r=n.sample(s),i.push(r.value),s+=Ry;return{times:void 0,keyframes:i,duration:s-Ry,ease:"linear"}}const _O={anticipate:tO,backInOut:eO,circInOut:rO};function HU(t){return t in _O}class T3 extends vO{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new yO(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Ly()&&HU(s)&&(s=_O[s]),qU(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:p,...g}=this.options,v=WU(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,s=v.ease,o="keyframes"}const u=$U(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(d3(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set($1(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return oa(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return oa(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=sa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ki;const{animation:r}=n;d3(r,e)}return Ki}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...f}=this.options,p=new qk({...f,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),g=sa(this.time);c.setWithVelocity(p.sample(g-Ry).value,p.sample(g).value,Ry)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return VU()&&r&&zU.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const KU={type:"spring",stiffness:500,damping:25,restSpeed:10},GU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),YU={type:"keyframes",duration:.8},XU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JU=(t,{keyframes:e})=>e.length>2?YU:ou.has(t)?t.startsWith("scale")?GU(e[1]):KU:XU;function QU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Wk=(t,e,n,r={},i,s)=>o=>{const a=Ek(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-sa(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};QU(a)||(u={...u,...JU(t,u)}),u.duration&&(u.duration=sa(u.duration)),u.repeatDelay&&(u.repeatDelay=sa(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=$1(u.keyframes,a);if(h!==void 0)return an.update(()=>{u.onUpdate(h),u.onComplete()}),new yV([])}return!s&&T3.supports(u)?new T3(u):new qk(u)};function ZU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function CO(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),f=l[d];if(f===void 0||u&&ZU(u,d))continue;const p={delay:n,...Ek(o||{},d)};let g=!1;if(window.MotionHandoffAnimation){const y=Y6(t);if(y){const x=window.MotionHandoffAnimation(y,d,an);x!==null&&(p.startTime=x,g=!0)}}bw(t,d),h.start(Wk(d,h,f,t.shouldReduceMotion&&K6.has(d)?{type:!1}:p,t,g));const v=h.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{an.update(()=>{a&&MV(t,a)})}),c}function Aw(t,e,n={}){var r;const i=z1(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(CO(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return eq(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function eq(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(tq).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Aw(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function tq(t,e){return t.sortNodePosition(e)}function nq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Aw(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Aw(t,e,n);else{const i=typeof e=="function"?z1(t,e,n.custom):e;r=Promise.all(CO(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const rq=vk.length;function AO(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?AO(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<rq;n++){const r=vk[n],i=t.props[r];(Cp(i)||i===!1)&&(e[r]=i)}return e}const iq=[...yk].reverse(),sq=yk.length;function oq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>nq(t,n,r)))}function aq(t){let e=oq(t),n=N3(),r=!0;const i=l=>(c,u)=>{var d;const h=z1(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...g}=h;c={...c,...g,...p}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=AO(t.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let v=0;v<sq;v++){const y=iq[v],x=n[y],S=c[y]!==void 0?c[y]:u[y],C=Cp(S),A=y===l?x.isActive:null;A===!1&&(p=v);let O=S===u[y]&&S!==c[y]&&C;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),x.protectedKeys={...f},!x.isActive&&A===null||!S&&!x.prevProp||F1(S)||typeof S=="boolean")continue;const M=lq(x.prevProp,S);let N=M||y===l&&x.isActive&&!O&&C||v>p&&C,D=!1;const V=Array.isArray(S)?S:[S];let L=V.reduce(i(y),{});A===!1&&(L={});const{prevResolvedValues:E={}}=x,B={...E,...L},I=ne=>{N=!0,h.has(ne)&&(D=!0,h.delete(ne)),x.needsAnimating[ne]=!0;const Y=t.getValue(ne);Y&&(Y.liveStyle=!1)};for(const ne in B){const Y=L[ne],ie=E[ne];if(f.hasOwnProperty(ne))continue;let q=!1;gw(Y)&&gw(ie)?q=!B6(Y,ie):q=Y!==ie,q?Y!=null?I(ne):h.add(ne):Y!==void 0&&h.has(ne)?I(ne):x.protectedKeys[ne]=!0}x.prevProp=S,x.prevResolvedValues=L,x.isActive&&(f={...f,...L}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(O&&M)||D)&&d.push(...V.map(ne=>({animation:ne,options:{type:y}})))}if(h.size){const v={};h.forEach(y=>{const x=t.getBaseTarget(y),S=t.getValue(y);S&&(S.liveStyle=!0),v[y]=x??null}),d.push({animation:v})}let g=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=N3(),r=!0}}}function lq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!B6(e,t):!1}function ec(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function N3(){return{animate:ec(!0),whileInView:ec(),whileHover:ec(),whileTap:ec(),whileDrag:ec(),whileFocus:ec(),exit:ec()}}class Dl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class cq extends Dl{constructor(e){super(e),e.animationState||(e.animationState=aq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();F1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let uq=0;class dq extends Dl{constructor(){super(...arguments),this.id=uq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hq={animation:{Feature:cq},exit:{Feature:dq}};function Pp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function hm(t){return{point:{x:t.pageX,y:t.pageY}}}const fq=t=>e=>Ok(e)&&t(e,hm(e));function Hf(t,e,n,r){return Pp(t,e,fq(n),r)}const P3=(t,e)=>Math.abs(t-e);function pq(t,e){const n=P3(t.x,e.x),r=P3(t.y,e.y);return Math.sqrt(n**2+r**2)}class TO{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=nx(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=pq(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=d,{timestamp:g}=wr;this.history.push({...p,timestamp:g});const{onStart:v,onMove:y}=this.handlers;h||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=tx(h,this.transformPagePoint),an.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=nx(d.type==="pointercancel"?this.lastMoveEventInfo:tx(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,v),p&&p(d,v)},!Ok(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=hm(e),a=tx(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=wr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,nx(a,this.history)),this.removeListeners=dm(Hf(this.contextWindow,"pointermove",this.handlePointerMove),Hf(this.contextWindow,"pointerup",this.handlePointerUp),Hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cl(this.updatePoint)}}function tx(t,e){return e?{point:e(t.point)}:t}function E3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nx({point:t},e){return{point:t,delta:E3(t,NO(e)),offset:E3(t,mq(e)),velocity:gq(e,.1)}}function mq(t){return t[0]}function NO(t){return t[t.length-1]}function gq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=NO(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>sa(e)));)n--;if(!r)return{x:0,y:0};const s=oa(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const PO=1e-4,yq=1-PO,vq=1+PO,EO=.01,bq=0-EO,xq=0+EO;function Yi(t){return t.max-t.min}function wq(t,e,n){return Math.abs(t-e)<=n}function M3(t,e,n,r=.5){t.origin=r,t.originPoint=gn(e.min,e.max,t.origin),t.scale=Yi(n)/Yi(e),t.translate=gn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=yq&&t.scale<=vq||isNaN(t.scale))&&(t.scale=1),(t.translate>=bq&&t.translate<=xq||isNaN(t.translate))&&(t.translate=0)}function Kf(t,e,n,r){M3(t.x,e.x,n.x,r?r.originX:void 0),M3(t.y,e.y,n.y,r?r.originY:void 0)}function L3(t,e,n){t.min=n.min+e.min,t.max=t.min+Yi(e)}function Sq(t,e,n){L3(t.x,e.x,n.x),L3(t.y,e.y,n.y)}function O3(t,e,n){t.min=e.min-n.min,t.max=t.min+Yi(e)}function Gf(t,e,n){O3(t.x,e.x,n.x),O3(t.y,e.y,n.y)}function kq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?gn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?gn(n,t,r.max):Math.min(t,n)),t}function I3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _q(t,{top:e,left:n,bottom:r,right:i}){return{x:I3(t.x,n,i),y:I3(t.y,e,r)}}function R3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Cq(t,e){return{x:R3(t.x,e.x),y:R3(t.y,e.y)}}function Aq(t,e){let n=.5;const r=Yi(t),i=Yi(e);return i>r?n=Hd(e.min,e.max-r,t.min):r>i&&(n=Hd(t.min,t.max-i,e.min)),ha(0,1,n)}function Tq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Tw=.35;function Nq(t=Tw){return t===!1?t=0:t===!0&&(t=Tw),{x:j3(t,"left","right"),y:j3(t,"top","bottom")}}function j3(t,e,n){return{min:D3(t,e),max:D3(t,n)}}function D3(t,e){return typeof t=="number"?t:t[e]||0}const F3=()=>({translate:0,scale:1,origin:0,originPoint:0}),fd=()=>({x:F3(),y:F3()}),B3=()=>({min:0,max:0}),Rn=()=>({x:B3(),y:B3()});function hs(t){return[t("x"),t("y")]}function MO({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Pq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Eq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function rx(t){return t===void 0||t===1}function Nw({scale:t,scaleX:e,scaleY:n}){return!rx(t)||!rx(e)||!rx(n)}function lc(t){return Nw(t)||LO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function LO(t){return z3(t.x)||z3(t.y)}function z3(t){return t&&t!=="0%"}function jy(t,e,n){const r=t-n,i=e*r;return n+i}function $3(t,e,n,r,i){return i!==void 0&&(t=jy(t,i,r)),jy(t,n,r)+e}function Pw(t,e=0,n=1,r,i){t.min=$3(t.min,e,n,r,i),t.max=$3(t.max,e,n,r,i)}function OO(t,{x:e,y:n}){Pw(t.x,e.translate,e.scale,e.originPoint),Pw(t.y,n.translate,n.scale,n.originPoint)}const V3=.999999999999,U3=1.0000000000001;function Mq(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&md(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,OO(t,o)),r&&lc(s.latestValues)&&md(t,s.latestValues))}e.x<U3&&e.x>V3&&(e.x=1),e.y<U3&&e.y>V3&&(e.y=1)}function pd(t,e){t.min=t.min+e,t.max=t.max+e}function q3(t,e,n,r,i=.5){const s=gn(t.min,t.max,i);Pw(t,e,n,s,r)}function md(t,e){q3(t.x,e.x,e.scaleX,e.scale,e.originX),q3(t.y,e.y,e.scaleY,e.scale,e.originY)}function IO(t,e){return MO(Eq(t.getBoundingClientRect(),e))}function Lq(t,e,n){const r=IO(t,n),{scroll:i}=e;return i&&(pd(r.x,i.offset.x),pd(r.y,i.offset.y)),r}const RO=({current:t})=>t?t.ownerDocument.defaultView:null,Oq=new WeakMap;class Iq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hm(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AV(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hs(v=>{let y=this.getAxisMotionValue(v).get()||0;if(bo.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[v];S&&(y=Yi(S)*(parseFloat(y)/100))}}this.originPoint[v]=y}),p&&an.postRender(()=>p(u,d)),bw(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=d;if(f&&this.currentDirection===null){this.currentDirection=Rq(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),g&&g(u,d)},a=(u,d)=>this.stop(u,d),l=()=>hs(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new TO(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:RO(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&an.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Fg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=kq(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&dd(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=_q(i.layoutBox,n):this.constraints=!1,this.elastic=Nq(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Tq(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Lq(r,i.root,this.visualElement.getTransformPagePoint());let o=Cq(i.layout.layoutBox,s);if(n){const a=n(Pq(o));this.hasMutatedConstraints=!!a,a&&(o=MO(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=hs(u=>{if(!Fg(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return bw(this.visualElement,e),r.start(Wk(e,r,0,n,this.visualElement,!1))}stopAnimation(){hs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){hs(n=>{const{drag:r}=this.getProps();if(!Fg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-gn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Aq({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),hs(o=>{if(!Fg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(gn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Oq.set(this.visualElement,this);const e=this.visualElement.current,n=Hf(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dd(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),an.read(r);const o=Pp(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(hs(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Tw,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Fg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Rq(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jq extends Dl{constructor(e){super(e),this.removeGroupControls=Ki,this.removeListeners=Ki,this.controls=new Iq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const W3=t=>(e,n)=>{t&&an.postRender(()=>t(e,n))};class Dq extends Dl{constructor(){super(...arguments),this.removePointerDownListener=Ki}onPointerDown(e){this.session=new TO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:W3(e),onStart:W3(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&an.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const D0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function H3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ot.test(t))t=parseFloat(t);else return t;const n=H3(t,e.target.x),r=H3(t,e.target.y);return`${n}% ${r}%`}},Fq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Al.parse(t);if(i.length>5)return r;const s=Al.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=gn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Bq extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;sV(zq),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),D0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||an.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jO(t){const[e,n]=y6(),r=W.useContext(hk);return w.jsx(Bq,{...t,layoutGroup:r,switchLayoutGroup:W.useContext(A6),isPresent:e,safeToRemove:n})}const zq={borderRadius:{...sf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sf,borderTopRightRadius:sf,borderBottomLeftRadius:sf,borderBottomRightRadius:sf,boxShadow:Fq};function $q(t,e,n){const r=Vr(t)?t:Tp(t);return r.start(Wk("",r,e,n)),r.animation}function Vq(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Uq=(t,e)=>t.depth-e.depth;class qq{constructor(){this.children=[],this.isDirty=!1}add(e){Ik(this.children,e),this.isDirty=!0}remove(e){Rk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Uq),this.isDirty=!1,this.children.forEach(e)}}function Wq(t,e){const n=xo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Cl(r),t(s-e))};return an.read(r,!0),()=>Cl(r)}const DO=["TopLeft","TopRight","BottomLeft","BottomRight"],Hq=DO.length,K3=t=>typeof t=="string"?parseFloat(t):t,G3=t=>typeof t=="number"||ot.test(t);function Kq(t,e,n,r,i,s){i?(t.opacity=gn(0,n.opacity!==void 0?n.opacity:1,Gq(r)),t.opacityExit=gn(e.opacity!==void 0?e.opacity:1,0,Yq(r))):s&&(t.opacity=gn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Hq;o++){const a=`border${DO[o]}Radius`;let l=Y3(e,a),c=Y3(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||G3(l)===G3(c)?(t[a]=Math.max(gn(K3(l),K3(c),r),0),(bo.test(c)||bo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=gn(e.rotate||0,n.rotate||0,r))}function Y3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Gq=FO(0,.5,nO),Yq=FO(.5,.95,Ki);function FO(t,e,n){return r=>r<t?0:r>e?1:n(Hd(t,e,r))}function X3(t,e){t.min=e.min,t.max=e.max}function cs(t,e){X3(t.x,e.x),X3(t.y,e.y)}function J3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Q3(t,e,n,r,i){return t-=e,t=jy(t,1/n,r),i!==void 0&&(t=jy(t,1/i,r)),t}function Xq(t,e=0,n=1,r=.5,i,s=t,o=t){if(bo.test(e)&&(e=parseFloat(e),e=gn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=gn(s.min,s.max,r);t===s&&(a-=e),t.min=Q3(t.min,e,n,a,i),t.max=Q3(t.max,e,n,a,i)}function Z3(t,e,[n,r,i],s,o){Xq(t,e[n],e[r],e[i],e.scale,s,o)}const Jq=["x","scaleX","originX"],Qq=["y","scaleY","originY"];function eT(t,e,n,r){Z3(t.x,e,Jq,n?n.x:void 0,r?r.x:void 0),Z3(t.y,e,Qq,n?n.y:void 0,r?r.y:void 0)}function tT(t){return t.translate===0&&t.scale===1}function BO(t){return tT(t.x)&&tT(t.y)}function nT(t,e){return t.min===e.min&&t.max===e.max}function Zq(t,e){return nT(t.x,e.x)&&nT(t.y,e.y)}function rT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zO(t,e){return rT(t.x,e.x)&&rT(t.y,e.y)}function iT(t){return Yi(t.x)/Yi(t.y)}function sT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eW{constructor(){this.members=[]}add(e){Ik(this.members,e),e.scheduleRender()}remove(e){if(Rk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tW(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const cc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_f=typeof window<"u"&&window.MotionDebug!==void 0,ix=["","X","Y","Z"],nW={visibility:"hidden"},oT=1e3;let rW=0;function sx(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function $O(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Y6(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",an,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&$O(r)}function VO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=rW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_f&&(cc.totalNodes=cc.resolvedTargetDeltas=cc.recalculatedProjection=0),this.nodes.forEach(oW),this.nodes.forEach(dW),this.nodes.forEach(hW),this.nodes.forEach(aW),_f&&window.MotionDebug.record(cc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new qq)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new jk),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Vq(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Wq(h,250),D0.hasAnimatedSinceResize&&(D0.hasAnimatedSinceResize=!1,this.nodes.forEach(lT))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||yW,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=u.getProps(),x=!this.targetLayout||!zO(this.targetLayout,p)||f,S=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const C={...Ek(g,"layout"),onPlay:v,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else h||lT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$O(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aT);return}this.isUpdating||this.nodes.forEach(cW),this.isUpdating=!1,this.nodes.forEach(uW),this.nodes.forEach(iW),this.nodes.forEach(sW),this.clearAllSnapshots();const a=xo.now();wr.delta=ha(0,1e3/60,a-wr.timestamp),wr.timestamp=a,wr.isProcessing=!0,Yb.update.process(wr),Yb.preRender.process(wr),Yb.render.process(wr),wr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lW),this.sharedNodes.forEach(pW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,an.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){an.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!BO(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||lc(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Rn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(bW))){const{scroll:u}=this.root;u&&(pd(l.x,u.offset.x),pd(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Rn();if(cs(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&cs(l,o),pd(l.x,d.offset.x),pd(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Rn();cs(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&md(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),lc(u.latestValues)&&md(l,u.latestValues)}return lc(this.latestValues)&&md(l,this.latestValues),l}removeTransform(o){const a=Rn();cs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!lc(c.latestValues))continue;Nw(c.latestValues)&&c.updateSnapshot();const u=Rn(),d=c.measurePageBox();cs(u,d),eT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return lc(this.latestValues)&&eT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=wr.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),Gf(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rn(),this.targetWithTransforms=Rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Sq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cs(this.target,this.layout.layoutBox),OO(this.target,this.targetDelta)):cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),Gf(this.relativeTargetOrigin,this.target,f.target),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_f&&cc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Nw(this.parent.latestValues)||LO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===wr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;cs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Mq(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Rn());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J3(this.prevProjectionDelta.x,this.projectionDelta.x),J3(this.prevProjectionDelta.y,this.projectionDelta.y)),Kf(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!sT(this.projectionDelta.x,this.prevProjectionDelta.x)||!sT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),_f&&cc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fd(),this.projectionDelta=fd(),this.projectionDeltaWithTransform=fd()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=fd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Rn(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,v=this.getStack(),y=!v||v.members.length<=1,x=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(gW));this.animationProgress=0;let S;this.mixTargetDelta=C=>{const A=C/1e3;cT(d.x,o.x,A),cT(d.y,o.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gf(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mW(this.relativeTarget,this.relativeTargetOrigin,h,A),S&&Zq(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Rn()),cs(S,this.relativeTarget)),g&&(this.animationValues=u,Kq(u,c,this.latestValues,A,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=an.update(()=>{D0.hasAnimatedSinceResize=!0,this.currentAnimation=$q(0,oT,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&UO(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Rn();const d=Yi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Yi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}cs(a,l),md(a,u),Kf(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new eW),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&sx("z",o,c,this.animationValues);for(let u=0;u<ix.length;u++)sx(`rotate${ix[u]}`,o,c,this.animationValues),sx(`skew${ix[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nW;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=R0(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=R0(o?.pointerEvents)||""),this.hasProjected&&!lc(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=tW(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in My){if(h[g]===void 0)continue;const{correct:v,applyTo:y}=My[g],x=c.transform==="none"?h[g]:v(h[g],d);if(y){const S=y.length;for(let C=0;C<S;C++)c[y[C]]=x}else c[g]=x}return this.options.layoutId&&(c.pointerEvents=d===this?R0(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(aT),this.root.sharedNodes.clear()}}}function iW(t){t.updateLayout()}function sW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?hs(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Yi(h);h.min=r[d].min,h.max=h.min+f}):UO(s,n.layoutBox,r)&&hs(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Yi(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=fd();Kf(a,r,n.layoutBox);const l=fd();o?Kf(l,t.applyTransform(i,!0),n.measuredBox):Kf(l,r,n.layoutBox);const c=!BO(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=Rn();Gf(p,n.layoutBox,h.layoutBox);const g=Rn();Gf(g,r,f.layoutBox),zO(p,g)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function oW(t){_f&&cc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function aW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lW(t){t.clearSnapshot()}function aT(t){t.clearMeasurements()}function cW(t){t.isLayoutDirty=!1}function uW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function dW(t){t.resolveTargetDelta()}function hW(t){t.calcProjection()}function fW(t){t.resetSkewAndRotation()}function pW(t){t.removeLeadSnapshot()}function cT(t,e,n){t.translate=gn(e.translate,0,n),t.scale=gn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uT(t,e,n,r){t.min=gn(e.min,n.min,r),t.max=gn(e.max,n.max,r)}function mW(t,e,n,r){uT(t.x,e.x,n.x,r),uT(t.y,e.y,n.y,r)}function gW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yW={duration:.45,ease:[.4,0,.1,1]},dT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),hT=dT("applewebkit/")&&!dT("chrome/")?Math.round:Ki;function fT(t){t.min=hT(t.min),t.max=hT(t.max)}function vW(t){fT(t.x),fT(t.y)}function UO(t,e,n){return t==="position"||t==="preserve-aspect"&&!wq(iT(e),iT(n),.2)}function bW(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const xW=VO({attachResizeListener:(t,e)=>Pp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ox={current:void 0},qO=VO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ox.current){const t=new xW({});t.mount(window),t.setOptions({layoutScroll:!0}),ox.current=t}return ox.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wW={pan:{Feature:Dq},drag:{Feature:jq,ProjectionNode:qO,MeasureLayout:jO}};function pT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&an.postRender(()=>s(e,hm(e)))}class SW extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=wV(e,n=>(pT(this.node,n,"Start"),r=>pT(this.node,r,"End"))))}unmount(){}}class kW extends Dl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dm(Pp(this.node.current,"focus",()=>this.onFocus()),Pp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mT(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&an.postRender(()=>s(e,hm(e)))}class _W extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=CV(e,n=>(mT(this.node,n,"Start"),(r,{success:i})=>mT(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ew=new WeakMap,ax=new WeakMap,CW=t=>{const e=Ew.get(t.target);e&&e(t)},AW=t=>{t.forEach(CW)};function TW({root:t,...e}){const n=t||document;ax.has(n)||ax.set(n,{});const r=ax.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(AW,{root:t,...e})),r[i]}function NW(t,e,n){const r=TW(e);return Ew.set(t,n),r.observe(t),()=>{Ew.delete(t),r.unobserve(t)}}const PW={some:0,all:1};class EW extends Dl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:PW[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return NW(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MW(e,n))&&this.startObserver()}unmount(){}}function MW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const LW={inView:{Feature:EW},tap:{Feature:_W},focus:{Feature:kW},hover:{Feature:SW}},OW={layout:{ProjectionNode:qO,MeasureLayout:jO}},Mw={current:null},WO={current:!1};function IW(){if(WO.current=!0,!!mk)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Mw.current=t.matches;t.addListener(e),e()}else Mw.current=!1}const RW=[...gO,Fr,Al],jW=t=>RW.find(mO(t)),gT=new WeakMap;function DW(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vr(i))t.addValue(r,i);else if(Vr(s))t.addValue(r,Tp(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Tp(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const yT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FW{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=xo.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,an.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=B1(n),this.isVariantNode=_6(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&Vr(p)&&p.set(l[f],!1)}}mount(e){this.current=e,gT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),WO.current||IW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){gT.delete(this.current),this.projection&&this.projection.unmount(),Cl(this.notifyUpdate),Cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ou.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&an.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Kd){const n=Kd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<yT.length;r++){const i=yT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=DW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(fO(i)||iO(i))?i=parseFloat(i):!jW(i)&&Al.test(n)&&(i=uO(e,n)),this.setBaseTarget(e,Vr(i)?i.get():i)),Vr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Sk(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new jk),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class HO extends FW{constructor(){super(...arguments),this.KeyframeResolver=yO}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function BW(t){return window.getComputedStyle(t)}class zW extends HO{constructor(){super(...arguments),this.type="html",this.renderInstance=O6}readValueFromInstance(e,n){if(ou.has(n)){const r=$k(n);return r&&r.default||0}else{const r=BW(e),i=(E6(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return IO(e,n)}build(e,n,r){Ck(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Pk(e,n,r)}}class $W extends HO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ou.has(n)){const r=$k(n);return r&&r.default||0}return n=I6.has(n)?n:bk(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return D6(e,n,r)}build(e,n,r){Ak(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){R6(e,n,r,i)}mount(e){this.isSVGTag=Nk(e.tagName),super.mount(e)}}const VW=(t,e)=>wk(t)?new $W(e):new zW(e,{allowProjection:t!==W.Fragment}),UW=pV({...hq,...LW,...wW,...OW},VW),jn=P$(UW);var Hk={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var q=new OffscreenCanvas(1,1),G=q.getContext("2d");G.fillRect(0,0,1,1);var P=q.transferToImageBitmap();try{G.createPattern(P,"no-repeat")}catch{return!1}return!0}();function l(){}function c(q){var G=n.exports.Promise,P=G!==void 0?G:e.Promise;return typeof P=="function"?new P(q):(q(l,l),null)}var u=function(q,G){return{transform:function(P){if(q)return P;if(G.has(P))return G.get(P);var U=new OffscreenCanvas(P.width,P.height),K=U.getContext("2d");return K.drawImage(P,0,0),G.set(P,U),U},clear:function(){G.clear()}}}(a,new Map),d=function(){var q=Math.floor(16.666666666666668),G,P,U={},K=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(G=function(J){var re=Math.random();return U[re]=requestAnimationFrame(function se(ue){K===ue||K+q-1<ue?(K=ue,delete U[re],J()):U[re]=requestAnimationFrame(se)}),re},P=function(J){U[J]&&cancelAnimationFrame(U[J])}):(G=function(J){return setTimeout(J,q)},P=function(J){return clearTimeout(J)}),{frame:G,cancel:P}}(),h=function(){var q,G,P={};function U(K){function J(re,se){K.postMessage({options:re||{},callback:se})}K.init=function(se){var ue=se.transferControlToOffscreen();K.postMessage({canvas:ue},[ue])},K.fire=function(se,ue,de){if(G)return J(se,null),G;var xe=Math.random().toString(36).slice(2);return G=c(function(ve){function ke(Te){Te.data.callback===xe&&(delete P[xe],K.removeEventListener("message",ke),G=null,u.clear(),de(),ve())}K.addEventListener("message",ke),J(se,xe),P[xe]=ke.bind(null,{data:{callback:xe}})}),G},K.reset=function(){K.postMessage({reset:!0});for(var se in P)P[se](),delete P[se]}}return function(){if(q)return q;if(!r&&s){var K=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{q=new Worker(URL.createObjectURL(new Blob([K])))}catch(J){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",J),null}U(q)}return q}}(),f={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function p(q,G){return G?G(q):q}function g(q){return q!=null}function v(q,G,P){return p(q&&g(q[G])?q[G]:f[G],P)}function y(q){return q<0?0:Math.floor(q)}function x(q,G){return Math.floor(Math.random()*(G-q))+q}function S(q){return parseInt(q,16)}function C(q){return q.map(A)}function A(q){var G=String(q).replace(/[^0-9a-f]/gi,"");return G.length<6&&(G=G[0]+G[0]+G[1]+G[1]+G[2]+G[2]),{r:S(G.substring(0,2)),g:S(G.substring(2,4)),b:S(G.substring(4,6))}}function O(q){var G=v(q,"origin",Object);return G.x=v(G,"x",Number),G.y=v(G,"y",Number),G}function M(q){q.width=document.documentElement.clientWidth,q.height=document.documentElement.clientHeight}function N(q){var G=q.getBoundingClientRect();q.width=G.width,q.height=G.height}function D(q){var G=document.createElement("canvas");return G.style.position="fixed",G.style.top="0px",G.style.left="0px",G.style.pointerEvents="none",G.style.zIndex=q,G}function V(q,G,P,U,K,J,re,se,ue){q.save(),q.translate(G,P),q.rotate(J),q.scale(U,K),q.arc(0,0,1,re,se,ue),q.restore()}function L(q){var G=q.angle*(Math.PI/180),P=q.spread*(Math.PI/180);return{x:q.x,y:q.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:q.startVelocity*.5+Math.random()*q.startVelocity,angle2D:-G+(.5*P-Math.random()*P),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:q.color,shape:q.shape,tick:0,totalTicks:q.ticks,decay:q.decay,drift:q.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:q.gravity*3,ovalScalar:.6,scalar:q.scalar,flat:q.flat}}function E(q,G){G.x+=Math.cos(G.angle2D)*G.velocity+G.drift,G.y+=Math.sin(G.angle2D)*G.velocity+G.gravity,G.velocity*=G.decay,G.flat?(G.wobble=0,G.wobbleX=G.x+10*G.scalar,G.wobbleY=G.y+10*G.scalar,G.tiltSin=0,G.tiltCos=0,G.random=1):(G.wobble+=G.wobbleSpeed,G.wobbleX=G.x+10*G.scalar*Math.cos(G.wobble),G.wobbleY=G.y+10*G.scalar*Math.sin(G.wobble),G.tiltAngle+=.1,G.tiltSin=Math.sin(G.tiltAngle),G.tiltCos=Math.cos(G.tiltAngle),G.random=Math.random()+2);var P=G.tick++/G.totalTicks,U=G.x+G.random*G.tiltCos,K=G.y+G.random*G.tiltSin,J=G.wobbleX+G.random*G.tiltCos,re=G.wobbleY+G.random*G.tiltSin;if(q.fillStyle="rgba("+G.color.r+", "+G.color.g+", "+G.color.b+", "+(1-P)+")",q.beginPath(),o&&G.shape.type==="path"&&typeof G.shape.path=="string"&&Array.isArray(G.shape.matrix))q.fill(ne(G.shape.path,G.shape.matrix,G.x,G.y,Math.abs(J-U)*.1,Math.abs(re-K)*.1,Math.PI/10*G.wobble));else if(G.shape.type==="bitmap"){var se=Math.PI/10*G.wobble,ue=Math.abs(J-U)*.1,de=Math.abs(re-K)*.1,xe=G.shape.bitmap.width*G.scalar,ve=G.shape.bitmap.height*G.scalar,ke=new DOMMatrix([Math.cos(se)*ue,Math.sin(se)*ue,-Math.sin(se)*de,Math.cos(se)*de,G.x,G.y]);ke.multiplySelf(new DOMMatrix(G.shape.matrix));var Te=q.createPattern(u.transform(G.shape.bitmap),"no-repeat");Te.setTransform(ke),q.globalAlpha=1-P,q.fillStyle=Te,q.fillRect(G.x-xe/2,G.y-ve/2,xe,ve),q.globalAlpha=1}else if(G.shape==="circle")q.ellipse?q.ellipse(G.x,G.y,Math.abs(J-U)*G.ovalScalar,Math.abs(re-K)*G.ovalScalar,Math.PI/10*G.wobble,0,2*Math.PI):V(q,G.x,G.y,Math.abs(J-U)*G.ovalScalar,Math.abs(re-K)*G.ovalScalar,Math.PI/10*G.wobble,0,2*Math.PI);else if(G.shape==="star")for(var Ie=Math.PI/2*3,ge=4*G.scalar,te=8*G.scalar,Ge=G.x,Be=G.y,Ae=5,Ee=Math.PI/Ae;Ae--;)Ge=G.x+Math.cos(Ie)*te,Be=G.y+Math.sin(Ie)*te,q.lineTo(Ge,Be),Ie+=Ee,Ge=G.x+Math.cos(Ie)*ge,Be=G.y+Math.sin(Ie)*ge,q.lineTo(Ge,Be),Ie+=Ee;else q.moveTo(Math.floor(G.x),Math.floor(G.y)),q.lineTo(Math.floor(G.wobbleX),Math.floor(K)),q.lineTo(Math.floor(J),Math.floor(re)),q.lineTo(Math.floor(U),Math.floor(G.wobbleY));return q.closePath(),q.fill(),G.tick<G.totalTicks}function B(q,G,P,U,K){var J=G.slice(),re=q.getContext("2d"),se,ue,de=c(function(xe){function ve(){se=ue=null,re.clearRect(0,0,U.width,U.height),u.clear(),K(),xe()}function ke(){r&&!(U.width===i.width&&U.height===i.height)&&(U.width=q.width=i.width,U.height=q.height=i.height),!U.width&&!U.height&&(P(q),U.width=q.width,U.height=q.height),re.clearRect(0,0,U.width,U.height),J=J.filter(function(Te){return E(re,Te)}),J.length?se=d.frame(ke):ve()}se=d.frame(ke),ue=ve});return{addFettis:function(xe){return J=J.concat(xe),de},canvas:q,promise:de,reset:function(){se&&d.cancel(se),ue&&ue()}}}function I(q,G){var P=!q,U=!!v(G||{},"resize"),K=!1,J=v(G,"disableForReducedMotion",Boolean),re=s&&!!v(G||{},"useWorker"),se=re?h():null,ue=P?M:N,de=q&&se?!!q.__confetti_initialized:!1,xe=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ve;function ke(Ie,ge,te){for(var Ge=v(Ie,"particleCount",y),Be=v(Ie,"angle",Number),Ae=v(Ie,"spread",Number),Ee=v(Ie,"startVelocity",Number),Oe=v(Ie,"decay",Number),Me=v(Ie,"gravity",Number),$e=v(Ie,"drift",Number),Qe=v(Ie,"colors",C),it=v(Ie,"ticks",Number),pt=v(Ie,"shapes"),St=v(Ie,"scalar"),It=!!v(Ie,"flat"),et=O(Ie),yt=Ge,De=[],Un=q.width*et.x,At=q.height*et.y;yt--;)De.push(L({x:Un,y:At,angle:Be,spread:Ae,startVelocity:Ee,color:Qe[yt%Qe.length],shape:pt[x(0,pt.length)],ticks:it,decay:Oe,gravity:Me,drift:$e,scalar:St,flat:It}));return ve?ve.addFettis(De):(ve=B(q,De,ue,ge,te),ve.promise)}function Te(Ie){var ge=J||v(Ie,"disableForReducedMotion",Boolean),te=v(Ie,"zIndex",Number);if(ge&&xe)return c(function(Ee){Ee()});P&&ve?q=ve.canvas:P&&!q&&(q=D(te),document.body.appendChild(q)),U&&!de&&ue(q);var Ge={width:q.width,height:q.height};se&&!de&&se.init(q),de=!0,se&&(q.__confetti_initialized=!0);function Be(){if(se){var Ee={getBoundingClientRect:function(){if(!P)return q.getBoundingClientRect()}};ue(Ee),se.postMessage({resize:{width:Ee.width,height:Ee.height}});return}Ge.width=Ge.height=null}function Ae(){ve=null,U&&(K=!1,e.removeEventListener("resize",Be)),P&&q&&(document.body.contains(q)&&document.body.removeChild(q),q=null,de=!1)}return U&&!K&&(K=!0,e.addEventListener("resize",Be,!1)),se?se.fire(Ie,Ge,Ae):ke(Ie,Ge,Ae)}return Te.reset=function(){se&&se.reset(),ve&&ve.reset()},Te}var Q;function Z(){return Q||(Q=I(null,{useWorker:!0,resize:!0})),Q}function ne(q,G,P,U,K,J,re){var se=new Path2D(q),ue=new Path2D;ue.addPath(se,new DOMMatrix(G));var de=new Path2D;return de.addPath(ue,new DOMMatrix([Math.cos(re)*K,Math.sin(re)*K,-Math.sin(re)*J,Math.cos(re)*J,P,U])),de}function Y(q){if(!o)throw new Error("path confetti are not supported in this browser");var G,P;typeof q=="string"?G=q:(G=q.path,P=q.matrix);var U=new Path2D(G),K=document.createElement("canvas"),J=K.getContext("2d");if(!P){for(var re=1e3,se=re,ue=re,de=0,xe=0,ve,ke,Te=0;Te<re;Te+=2)for(var Ie=0;Ie<re;Ie+=2)J.isPointInPath(U,Te,Ie,"nonzero")&&(se=Math.min(se,Te),ue=Math.min(ue,Ie),de=Math.max(de,Te),xe=Math.max(xe,Ie));ve=de-se,ke=xe-ue;var ge=10,te=Math.min(ge/ve,ge/ke);P=[te,0,0,te,-Math.round(ve/2+se)*te,-Math.round(ke/2+ue)*te]}return{type:"path",path:G,matrix:P}}function ie(q){var G,P=1,U="#000000",K='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof q=="string"?G=q:(G=q.text,P="scalar"in q?q.scalar:P,K="fontFamily"in q?q.fontFamily:K,U="color"in q?q.color:U);var J=10*P,re=""+J+"px "+K,se=new OffscreenCanvas(J,J),ue=se.getContext("2d");ue.font=re;var de=ue.measureText(G),xe=Math.ceil(de.actualBoundingBoxRight+de.actualBoundingBoxLeft),ve=Math.ceil(de.actualBoundingBoxAscent+de.actualBoundingBoxDescent),ke=2,Te=de.actualBoundingBoxLeft+ke,Ie=de.actualBoundingBoxAscent+ke;xe+=ke+ke,ve+=ke+ke,se=new OffscreenCanvas(xe,ve),ue=se.getContext("2d"),ue.font=re,ue.fillStyle=U,ue.fillText(G,Te,Ie);var ge=1/P;return{type:"bitmap",bitmap:se.transferToImageBitmap(),matrix:[ge,0,0,ge,-xe*ge/2,-ve*ge/2]}}n.exports=function(){return Z().apply(this,arguments)},n.exports.reset=function(){Z().reset()},n.exports.create=I,n.exports.shapeFromPath=Y,n.exports.shapeFromText=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Hk,!1);const Pc=Hk.exports;Hk.exports.create;const qW=["TIR Principles & Laws","Understanding TIR Phenomena","Real-World Applications","Analysis & Problem Solving"],WW=({userInputs:t,currentStrand:e,strandProgress:n,setCurrentStrand:r,earnedBadges:i,experimentTitle:s})=>{const o=W.useRef([0,0,0,0]),[a,l]=W.useState(0);W.useEffect(()=>{console.log(" PROGRESS BAR UPDATE:",{previous:o.current,current:n,changed:n.some((v,y)=>v!==o.current[y])});let g=!1;n.forEach((v,y)=>{const x=o.current[y]||0,S=v||0;S>x&&(g=!0,console.log(` PROGRESS IMPROVED: Strand ${y+1}: ${x}  ${S}`),S>=8?Pc({particleCount:200,spread:90,origin:{y:.6},colors:["#ffd700","#ffed4e","#fbbf24","#f59e0b"]}):S>=6?Pc({particleCount:100,spread:70,origin:{y:.6},colors:["#9333ea","#a855f7","#c084fc"]}):S>=4&&Pc({particleCount:50,spread:50,origin:{y:.6},colors:["#3b82f6","#60a5fa"]}))}),g&&(o.current=[...n],l(v=>v+1))},[n]);const c=g=>{const v=Math.min(Math.max(g||0,0),8);return Math.floor(v/8*100)},u=g=>g>=8?"from-yellow-400 to-yellow-500":g>=6?"from-green-400 to-green-500":g>=4?"from-blue-400 to-blue-500":g>=2?"from-purple-400 to-purple-500":"from-gray-300 to-gray-400",d=g=>{document.startViewTransition?document.startViewTransition(g):g()},h=n.reduce((g,v)=>g+(v||0),0),f=32,p=Math.round(h/f*100);return w.jsxs("div",{className:"progress-bar-section p-4 border rounded-md shadow-sm bg-white",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"font-semibold text-lg text-purple-800",children:"Knowledge Progress"}),w.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2",children:[w.jsxs("span",{children:["Overall: ",h,"/",f]}),w.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:w.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${p}%`}})}),w.jsxs("span",{className:"font-medium",children:[p,"%"]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-sm text-gray-500",children:"Learning Path:"}),w.jsx("p",{className:"font-medium text-purple-700",children:s||"Not selected"})]})]}),w.jsx("div",{className:"flex overflow-x-auto gap-4 pb-2 scrollbar-thin scrollbar-thumb-purple-300",children:qW.map((g,v)=>{const y=n[v]||0,x=c(y),S=e-1===v,C=y===8;return w.jsxs("div",{onClick:()=>d(()=>r(v+1)),className:`min-w-[280px] flex-shrink-0 cursor-pointer border-2 rounded-lg p-4 transition-all transform hover:scale-[1.02] ${S?"bg-purple-50 border-purple-500 ring-2 ring-purple-200 shadow-md":"bg-white border-gray-200 hover:border-purple-300 shadow-sm"} ${C?"glow-border-purple":""}`,children:[w.jsxs("div",{className:"flex justify-between items-start mb-3",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"font-semibold text-gray-800 text-sm leading-tight",children:g}),w.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Strand ",v+1]})]}),w.jsxs("div",{className:"text-right ml-2",children:[w.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[y,"/8"]}),w.jsxs("div",{className:"text-xs text-gray-500",children:[x,"%"]})]})]}),w.jsx("div",{className:"mb-3",children:w.jsx("div",{className:"bg-gray-200 h-3 w-full rounded-full overflow-hidden",children:w.jsx(jn.div,{className:`bg-gradient-to-r ${u(y)} h-full rounded-full`,initial:{width:0},animate:{width:`${x}%`},transition:{duration:.8,ease:"easeOut"}},`${a}-${v}`)})}),w.jsxs("div",{className:"flex justify-between text-xs",children:[w.jsx("span",{className:`transition-colors ${y>=2?"text-purple-600 font-medium":"text-gray-400"}`,children:"Basic"}),w.jsx("span",{className:`transition-colors ${y>=4?"text-blue-600 font-medium":"text-gray-400"}`,children:"Good"}),w.jsx("span",{className:`transition-colors ${y>=6?"text-green-600 font-medium":"text-gray-400"}`,children:"Strong"}),w.jsx("span",{className:`transition-colors ${y>=8?"text-yellow-600 font-bold":"text-gray-400"}`,children:"Perfect"})]}),C&&w.jsx("div",{className:"mt-2 text-center",children:w.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium",children:" Mastered!"})}),S&&w.jsx("div",{className:"mt-2 text-center",children:w.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium",children:" Current"})})]},v)})}),w.jsxs("div",{className:"mt-6",children:[w.jsxs("h3",{className:"mb-3 font-semibold text-sm text-gray-700 flex items-center",children:[" Achievement Badges",w.jsxs("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:[Object.values(i).filter(Boolean).length,"/4 Earned"]})]}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"principlePioneer",label:"Principle Pioneer",icon:"",strand:1},{key:"conceptCrusader",label:"Concept Crusader",icon:"",strand:2},{key:"applicationAce",label:"Application Ace",icon:"",strand:3},{key:"analysisArchitect",label:"Analysis Architect",icon:"",strand:4}].map(g=>{const v=i[g.key],y=n[g.strand-1]||0,x=y>=6&&!v;return w.jsxs("div",{className:`p-3 rounded-lg border-2 text-center text-sm font-medium transition-all ${v?"bg-purple-50 border-purple-400 text-purple-800 shadow-sm":x?"bg-yellow-50 border-yellow-300 text-yellow-700":"bg-gray-50 border-gray-200 text-gray-400"}`,children:[w.jsx("div",{className:"text-2xl mb-1",children:g.icon}),w.jsx("div",{className:"font-semibold text-xs",children:g.label}),w.jsx("div",{className:"text-xs mt-1",children:v?w.jsx("span",{className:"text-green-600 font-bold",children:" Earned!"}):x?w.jsx("span",{className:"text-yellow-600",children:" Almost there!"}):w.jsxs("span",{className:"text-gray-500",children:["Level ",y,"/8"]})})]},g.key)})})]}),!1]})},KO=W.createContext(null),HW=({children:t})=>{const[e,n]=W.useState({strand1:{level2:"",level4:"",level6:"",level8:""},strand2:{level2:"",level4:"",level6:"",level8:""},strand3:{level2:"",level4:"",level6:"",level8:""},strand4:{level2:"",level4:"",level6:"",level8:""}}),[r,i]=W.useState([0,0,0,0]),[s,o]=W.useState(0),[a,l]=W.useState(["in progress","not started","not started","not started"]),[c,u]=W.useState({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1});return w.jsx(KO.Provider,{value:{userInputs:e,setUserInputs:n,strandProgress:r,setStrandProgress:i,points:s,setPoints:o,strandStatus:a,setStrandStatus:l,earnedBadges:c,setEarnedBadges:u},children:t})},fm=()=>{const t=W.useContext(KO);if(!t)throw new Error("useStrandContext must be used within a StrandProvider");return t},KW={"critical-angle":{strand1:[{id:"ca-s1-l2-1",type:"mcq",level:2,commandTerm:"define",question:"Define total internal reflection.",options:["When light bounces off a surface","When light completely reflects at a boundary between two media","When light bends as it passes through materials","When light splits into different colors"],correctAnswer:"When light completely reflects at a boundary between two media",explanation:"Total internal reflection occurs when light traveling from a denser to less dense medium is completely reflected at the boundary.",keywords:["total internal reflection","reflect","boundary","media"],rubricMapping:["States basic scientific facts","Uses simple scientific vocabulary"]},{id:"ca-s1-l2-2",type:"fill-blank",level:2,commandTerm:"state",question:"Complete: The _______ angle is the minimum angle of incidence for total internal reflection to occur.",options:[],correctAnswer:"critical",explanation:"The critical angle is the specific angle of incidence at which total internal reflection begins.",keywords:["critical angle","angle of incidence","minimum"],rubricMapping:["States basic scientific facts"]},{id:"ca-s1-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe the conditions required for total internal reflection to occur.",options:[],correctAnswer:"Light must travel from a denser medium (higher refractive index) to a less dense medium (lower refractive index), and the angle of incidence must be greater than the critical angle.",explanation:"TIR requires specific conditions: direction from dense to less dense medium and incident angle exceeding critical angle.",keywords:["dense medium","less dense medium","refractive index","angle of incidence","critical angle"],rubricMapping:["Describes scientific concepts clearly","Uses appropriate scientific terminology"]},{id:"ca-s1-l4-2",type:"mcq",level:4,commandTerm:"identify",question:"Identify which equation correctly represents the critical angle formula.",options:["sin(c) = n/n","sin(c) = n/n","cos(c) = n/n","tan(c) = n/n"],correctAnswer:"sin(c) = n/n",explanation:"The critical angle formula is sin(c) = n/n where n is the denser medium and n is the less dense medium.",keywords:["critical angle","formula","sine","refractive index"],rubricMapping:["Shows understanding of relationships between concepts"]},{id:"ca-s1-l6-1",type:"calculation",level:6,commandTerm:"calculate",question:"Calculate the critical angle for light traveling from glass (n = 1.5) to air (n = 1.0). Show your work.",options:[],correctAnswer:"c = arcsin(1.0/1.5) = arcsin(0.667) = 41.8",explanation:"Using sin(c) = n/n = 1.0/1.5 = 0.667, therefore c = arcsin(0.667) = 41.8",keywords:["calculate","critical angle","glass","air","refractive index","arcsin"],rubricMapping:["Applies knowledge to solve problems","Demonstrates comprehensive understanding"]},{id:"ca-s1-l6-2",type:"short-answer",level:6,commandTerm:"explain",question:"Explain why total internal reflection only occurs when light travels from a denser to less dense medium.",options:[],correctAnswer:"When light travels from dense to less dense medium, it bends away from the normal. At the critical angle, the refracted ray grazes the surface (90 to normal). Beyond this angle, no refraction is possible, so all light is reflected. In the opposite direction (less dense to more dense), light bends toward the normal and can always be refracted.",explanation:"The physics of refraction and Snells law determine that TIR is only possible in one direction due to the bending behavior of light.",keywords:["dense medium","less dense medium","refraction","normal","snells law"],rubricMapping:["Explains scientific phenomena using theories","Comprehensive understanding of concepts"]},{id:"ca-s1-l8-1",type:"extended-response",level:8,commandTerm:"analyze",question:"Analyze how the critical angle would change if you increased the refractive index difference between two media. Discuss the implications for optical fiber design.",options:[],correctAnswer:"Increasing the refractive index difference (n - n) decreases the critical angle because sin(c) = n/n becomes smaller. This means light can be trapped at smaller incident angles, making the fiber more efficient at capturing and guiding light. However, very high index differences can cause modal dispersion and signal distortion. Optimal fiber design balances light-gathering ability with signal quality, typically using step-index or graded-index profiles.",explanation:"This demonstrates sophisticated understanding of the relationship between material properties and optical performance.",keywords:["refractive index difference","critical angle","optical fiber","modal dispersion","signal quality"],rubricMapping:["Analyzes complex scenarios","Synthesizes knowledge from multiple sources","Sophisticated understanding"]}],strand2:[{id:"ca-s2-l2-1",type:"mcq",level:2,commandTerm:"identify",question:"Identify when total internal reflection occurs.",options:["When light hits any surface","When the incident angle is very small","When the incident angle exceeds the critical angle","When light travels through the same medium"],correctAnswer:"When the incident angle exceeds the critical angle",explanation:"TIR only occurs when the angle of incidence is greater than the critical angle.",keywords:["incident angle","critical angle","exceeds"],rubricMapping:["States basic scientific facts"]},{id:"ca-s2-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe what happens to light at the critical angle.",options:[],correctAnswer:"At the critical angle, the refracted ray travels along the boundary between the two media at 90 to the normal. This is the transition point between refraction and total internal reflection.",explanation:"The critical angle represents the boundary condition where the refracted ray just grazes the surface.",keywords:["critical angle","refracted ray","boundary","normal","90 degrees"],rubricMapping:["Describes scientific concepts clearly","Appropriate scientific terminology"]},{id:"ca-s2-l6-1",type:"diagram-analysis",level:6,commandTerm:"explain",question:"Explain why light rays with incident angles less than the critical angle undergo both reflection and refraction, while rays above the critical angle only reflect.",options:[],correctAnswer:"Below the critical angle, Snells law can be satisfied (nsin() = nsin()) because sin() < 1. Some light energy is transmitted (refracted) and some is reflected. Above the critical angle, Snells law would require sin() > 1, which is mathematically impossible. Therefore, no light can be transmitted and all energy is reflected.",explanation:"This demonstrates understanding of the mathematical constraints that govern optical phenomena.",keywords:["snells law","reflection","refraction","mathematical constraint","energy"],rubricMapping:["Explains scientific phenomena using theories","Applies knowledge to solve problems"]},{id:"ca-s2-l8-1",type:"extended-response",level:8,commandTerm:"evaluate",question:"Evaluate the factors that affect the critical angle and discuss how these principles are applied in the design of optical devices.",options:[],correctAnswer:"The critical angle depends solely on the refractive indices of the two media (c = arcsin(n/n)). Key factors include: 1) Material selection - higher index contrast creates smaller critical angles and better light confinement, 2) Wavelength dependence - dispersion causes different colors to have slightly different critical angles, 3) Temperature effects - refractive indices change with temperature, affecting critical angles. These principles are applied in: optical fibers (core-cladding index difference), prisms (precise angle cutting for total reflection), LED design (light extraction efficiency), and waveguides (mode confinement). Successful optical device design requires balancing these factors against cost, manufacturing constraints, and performance requirements.",explanation:"This demonstrates comprehensive analysis of multiple interrelated factors and their practical applications.",keywords:["refractive indices","material selection","wavelength dependence","temperature effects","optical devices"],rubricMapping:["Analyzes complex scenarios","Evaluates theories critically","Synthesizes knowledge","Sophisticated understanding"]}],strand3:[{id:"ca-s3-l2-1",type:"mcq",level:2,commandTerm:"list",question:"List which of these uses total internal reflection.",options:["Mirrors","Glass windows","Optical fibers","Camera lenses"],correctAnswer:"Optical fibers",explanation:"Optical fibers rely on total internal reflection to guide light through the fiber core.",keywords:["optical fibers","total internal reflection"],rubricMapping:["States basic scientific facts"]},{id:"ca-s3-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe how diamonds use total internal reflection to create brilliance.",options:[],correctAnswer:"Diamonds have a very high refractive index (2.42), which creates a small critical angle. Light entering the diamond undergoes multiple total internal reflections, bouncing around inside before exiting. This traps light and creates the sparkling brilliance diamonds are known for.",explanation:"High refractive index materials can trap light effectively through multiple internal reflections.",keywords:["diamond","high refractive index","2.42","critical angle","brilliance","sparkling"],rubricMapping:["Describes benefits in applications","Uses appropriate terminology"]},{id:"ca-s3-l6-1",type:"short-answer",level:6,commandTerm:"explain",question:"Explain how fiber optic internet cables use total internal reflection to transmit data over long distances.",options:[],correctAnswer:"Fiber optic cables consist of a high refractive index glass core surrounded by lower index cladding. Light signals representing digital data are injected into the core at angles exceeding the critical angle. The light undergoes total internal reflection at the core-cladding boundary, bouncing down the length of the fiber with minimal loss. This allows data transmission over kilometers without significant signal degradation, enabling high-speed internet connectivity.",explanation:"This shows understanding of how TIR principles enable practical technology applications.",keywords:["fiber optic cables","core","cladding","refractive index","digital data","signal transmission"],rubricMapping:["Explains physics behind applications","Comprehensive understanding"]},{id:"ca-s3-l8-1",type:"extended-response",level:8,commandTerm:"analyze",question:"Analyze the advantages and limitations of using total internal reflection in medical endoscopy compared to traditional imaging methods.",options:[],correctAnswer:"TIR-based endoscopy offers several advantages: 1) Flexibility - fiber bundles can bend around corners while maintaining image quality, 2) Minimal invasiveness - thin fibers require smaller incisions, 3) Light efficiency - TIR preserves light intensity for better illumination, 4) Multi-functionality - separate fibers can carry light in and images out. Limitations include: 1) Resolution constraints - fiber diameter limits pixel count, 2) Coherent bundle requirements - fibers must maintain spatial relationships, 3) Fragility - glass fibers can break with excessive bending, 4) Cost - precision manufacturing is expensive. Compared to traditional methods like X-rays or external cameras, endoscopy provides real-time internal visualization but with trade-offs in image resolution and equipment complexity. Recent developments in gradient-index fibers and digital processing are addressing some limitations.",explanation:"This demonstrates sophisticated analysis of technological applications with critical evaluation of trade-offs.",keywords:["endoscopy","fiber bundles","flexibility","resolution","coherent bundle","gradient-index"],rubricMapping:["Analyzes multiple applications","Evaluates effectiveness and limitations","Critical evaluation"]}],strand4:[{id:"ca-s4-l2-1",type:"calculation",level:2,commandTerm:"calculate",question:"Calculate the critical angle when n = 1.4 and n = 1.0 (given: sin(0.714) = 45.6)",options:[],correctAnswer:"45.6",explanation:"Using the given inverse sine value, c = sin(n/n) = sin(1.0/1.4) = sin(0.714) = 45.6",keywords:["critical angle","calculate","inverse sine"],rubricMapping:["Performs simple calculations with given formulas"]},{id:"ca-s4-l4-1",type:"calculation",level:4,commandTerm:"determine",question:"Determine the refractive index of glass if the critical angle for glass-air interface is 42.",options:[],correctAnswer:"n = 1.49",explanation:"Using sin(c) = n/n, we have sin(42) = 1.0/n, so n = 1.0/sin(42) = 1.0/0.669 = 1.49",keywords:["refractive index","determine","glass-air interface"],rubricMapping:["Solves basic TIR problems","Uses appropriate equations"]},{id:"ca-s4-l6-1",type:"calculation",level:6,commandTerm:"analyze",question:"Analyze this scenario: Light travels from water (n=1.33) to glass (n=1.5) at 45. Will total internal reflection occur? Show calculations and explain.",options:[],correctAnswer:"No, TIR will not occur. TIR requires light to travel from higher to lower refractive index (n > n). Here, light travels from water (n=1.33) to glass (n=1.5), so n < n. The light will refract toward the normal according to Snells law: nsin() = nsin(), so 1.33sin(45) = 1.5sin(), giving  = 38.9.",explanation:"This demonstrates understanding that TIR direction matters and ability to apply Snells law when TIR does not occur.",keywords:["water","glass","refractive index","snells law","refraction"],rubricMapping:["Analyzes complex scenarios","Calculates multiple variables"]},{id:"ca-s4-l8-1",type:"extended-response",level:8,commandTerm:"evaluate",question:"Evaluate an experimental design to measure the critical angle of an unknown liquid. Include sources of error and suggest improvements.",options:[],correctAnswer:"Experimental setup: Place liquid in semicircular container, use laser pointer to direct light from liquid to air at various angles, measure incident angles where TIR begins. Sources of error: 1) Angle measurement precision - use digital protractor, 2) Surface quality - ensure clean liquid-air interface, 3) Temperature effects - control temperature as refractive index varies with temperature, 4) Laser beam width - use narrow beam for precise angle definition, 5) Multiple reflections - use black absorbing surfaces. Improvements: 1) Automated angle adjustment with stepper motor, 2) Digital imaging to detect TIR onset, 3) Multiple measurements and statistical analysis, 4) Temperature monitoring and correction, 5) Use of different wavelengths to study dispersion. Expected accuracy: 0.5 with careful technique, allowing refractive index determination to 0.01.",explanation:"This demonstrates sophisticated experimental design thinking and understanding of practical measurement challenges.",keywords:["experimental design","measurement precision","sources of error","improvements","accuracy"],rubricMapping:["Evaluates experimental designs","Synthesizes solutions to novel problems"]}]},"fiber-optics":{strand1:[{id:"fo-s1-l2-1",type:"mcq",level:2,commandTerm:"identify",question:"Identify the main components of an optical fiber.",options:["Core and coating","Core and cladding","Wire and insulation","Glass and plastic"],correctAnswer:"Core and cladding",explanation:"Optical fibers consist of a high refractive index core surrounded by lower refractive index cladding.",keywords:["core","cladding","optical fiber"],rubricMapping:["States basic components"]},{id:"fo-s1-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe how light is kept inside the core of an optical fiber.",options:[],correctAnswer:"Light is trapped in the fiber core by total internal reflection. The core has a higher refractive index than the cladding, so light hitting the core-cladding boundary at angles greater than the critical angle undergoes total internal reflection and bounces along the fiber.",explanation:"This shows understanding of the basic principle behind optical fiber operation.",keywords:["trapped","total internal reflection","core","cladding","refractive index","critical angle"],rubricMapping:["Describes how light travels through fibers"]},{id:"fo-s1-l6-1",type:"calculation",level:6,commandTerm:"calculate",question:"Calculate the numerical aperture of a step-index fiber with core index n = 1.48 and cladding index n = 1.46.",options:[],correctAnswer:"NA = 0.242",explanation:"Numerical aperture NA = (n - n) = (1.48 - 1.46) = (2.1904 - 2.1316) = 0.0588 = 0.242",keywords:["numerical aperture","step-index fiber","core index","cladding index"],rubricMapping:["Applies knowledge to solve problems","Uses fiber optic equations"]},{id:"fo-s1-l8-1",type:"extended-response",level:8,commandTerm:"analyze",question:"Analyze the trade-offs between single-mode and multimode fibers for different applications.",options:[],correctAnswer:"Single-mode fibers have very small cores (~9m) that support only one light propagation mode, eliminating modal dispersion and enabling high-bandwidth, long-distance transmission. They require expensive laser sources and precise alignment but offer superior performance for telecommunications. Multimode fibers have larger cores (50-100m) supporting multiple light paths, making them easier to couple and cheaper to install, but modal dispersion limits bandwidth and distance. Step-index multimode fibers have higher dispersion than graded-index types. Applications: single-mode for long-haul telecommunications and high-speed data networks; multimode for short-distance applications like LANs, data centers, and building networks where cost and ease of installation outweigh bandwidth limitations.",explanation:"This demonstrates comprehensive understanding of fiber types and their optimal applications.",keywords:["single-mode","multimode","modal dispersion","bandwidth","telecommunications","applications"],rubricMapping:["Analyzes different fiber types","Evaluates trade-offs comprehensively"]}],strand2:[{id:"fo-s2-l2-1",type:"mcq",level:2,commandTerm:"identify",question:"Identify what converts electrical signals to light in fiber optic systems.",options:["Photodetector","Amplifier","LED or laser diode","Connector"],correctAnswer:"LED or laser diode",explanation:"LEDs and laser diodes are light sources that convert electrical signals into optical signals for transmission through fibers.",keywords:["LED","laser diode","electrical signals","optical signals"],rubricMapping:["Identifies components of fiber systems"]},{id:"fo-s2-l6-1",type:"short-answer",level:6,commandTerm:"explain",question:"Explain how wavelength division multiplexing increases fiber optic capacity.",options:[],correctAnswer:"WDM combines multiple optical signals at different wavelengths onto a single fiber, similar to how radio stations use different frequencies. Each wavelength can carry independent data streams. Dense WDM (DWDM) can multiplex 40-80 channels with 0.8nm spacing, dramatically increasing fiber capacity without laying new cables. Optical multiplexers combine signals at the transmitter, and demultiplexers separate them at the receiver.",explanation:"This demonstrates understanding of advanced fiber optic technologies and capacity enhancement methods.",keywords:["wavelength division multiplexing","optical signals","different wavelengths","DWDM","capacity"],rubricMapping:["Explains advanced fiber technologies","Demonstrates comprehensive understanding"]}],strand3:[{id:"fo-s3-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe three major applications of fiber optic technology.",options:[],correctAnswer:"1) Telecommunications - high-speed internet and phone networks, 2) Medical applications - endoscopes for internal imaging and laser surgery delivery, 3) Industrial sensing - monitoring temperature, pressure, and structural health in harsh environments.",explanation:"Fiber optics have revolutionized multiple industries through their unique properties.",keywords:["telecommunications","medical applications","endoscopes","industrial sensing"],rubricMapping:["Describes benefits of fiber optics in applications"]},{id:"fo-s3-l8-1",type:"extended-response",level:8,commandTerm:"evaluate",question:"Evaluate the societal impact of fiber optic technology on global communications.",options:[],correctAnswer:"Fiber optics revolutionized global communications by enabling the modern internet era. Key impacts: 1) Economic transformation - enabled e-commerce, remote work, and digital economies, 2) Social connectivity - video calls, social media, and instant global communication, 3) Educational access - online learning and digital resources, 4) Healthcare - telemedicine and remote diagnostics, 5) Entertainment - streaming services and digital media. Undersea cables connect continents with terabit capacities. However, this created digital divides between fiber-connected and unconnected regions. Environmental concerns include energy consumption of data centers and electronic waste. Future implications include smart cities, IoT networks, and augmented reality applications requiring even higher bandwidths.",explanation:"This demonstrates sophisticated analysis of technology impact on society and future implications.",keywords:["societal impact","global communications","digital divide","undersea cables","smart cities"],rubricMapping:["Analyzes societal impact","Evaluates future potential"]}],strand4:[{id:"fo-s4-l6-1",type:"short-answer",level:6,commandTerm:"explain",question:"Explain the key design considerations for a fiber optic installation in a building.",options:[],correctAnswer:"Key considerations: 1) Bend radius - fibers must not be bent too tightly to avoid signal loss, 2) Environmental protection - temperature, humidity, and mechanical stress protection, 3) Connector types - match equipment requirements (SC, LC, ST), 4) Cable routing - avoid electrical interference and sharp edges, 5) Future expansion - install extra capacity for growth, 6) Testing procedures - verify installation meets specifications, 7) Documentation - maintain records for maintenance.",explanation:"This shows understanding of practical engineering considerations in fiber optic system design.",keywords:["bend radius","environmental protection","connector types","cable routing","testing"],rubricMapping:["Explains design considerations","Applies engineering principles"]}]}};var GO={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(GO);var GW=GO.exports;const ko=hS(GW);function bs(){return bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bs.apply(null,arguments)}function Je(t){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(t)}var YW=Symbol.for("react.element"),XW=Symbol.for("react.transitional.element"),JW=Symbol.for("react.fragment");function YO(t){return t&&Je(t)==="object"&&(t.$$typeof===YW||t.$$typeof===XW)&&t.type===JW}function Dy(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return nt.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(Dy(r)):YO(r)&&r.props?n=n.concat(Dy(r.props.children,e)):n.push(r))}),n}var Lw={},QW=function(e){};function ZW(t,e){}function eH(t,e){}function tH(){Lw={}}function XO(t,e,n){!e&&!Lw[n]&&(t(!1,n),Lw[n]=!0)}function ph(t,e){XO(ZW,t,e)}function nH(t,e){XO(eH,t,e)}ph.preMessage=QW;ph.resetWarned=tH;ph.noteOnce=nH;function rH(t,e){if(Je(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Je(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JO(t){var e=rH(t,"string");return Je(e)=="symbol"?e:e+""}function Ke(t,e,n){return(e=JO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function He(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(n),!0).forEach(function(r){Ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bT(t){return t instanceof HTMLElement||t instanceof SVGElement}function iH(t){return t&&Je(t)==="object"&&bT(t.nativeElement)?t.nativeElement:bT(t)?t:null}function sH(t){var e=iH(t);if(e)return e;if(t instanceof nt.Component){var n;return(n=Ty.findDOMNode)===null||n===void 0?void 0:n.call(Ty,t)}return null}var QO={exports:{}},Ut={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk=Symbol.for("react.element"),Gk=Symbol.for("react.portal"),V1=Symbol.for("react.fragment"),U1=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),W1=Symbol.for("react.provider"),H1=Symbol.for("react.context"),oH=Symbol.for("react.server_context"),K1=Symbol.for("react.forward_ref"),G1=Symbol.for("react.suspense"),Y1=Symbol.for("react.suspense_list"),X1=Symbol.for("react.memo"),J1=Symbol.for("react.lazy"),aH=Symbol.for("react.offscreen"),ZO;ZO=Symbol.for("react.module.reference");function Ts(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Kk:switch(t=t.type,t){case V1:case q1:case U1:case G1:case Y1:return t;default:switch(t=t&&t.$$typeof,t){case oH:case H1:case K1:case J1:case X1:case W1:return t;default:return e}}case Gk:return e}}}Ut.ContextConsumer=H1;Ut.ContextProvider=W1;Ut.Element=Kk;Ut.ForwardRef=K1;Ut.Fragment=V1;Ut.Lazy=J1;Ut.Memo=X1;Ut.Portal=Gk;Ut.Profiler=q1;Ut.StrictMode=U1;Ut.Suspense=G1;Ut.SuspenseList=Y1;Ut.isAsyncMode=function(){return!1};Ut.isConcurrentMode=function(){return!1};Ut.isContextConsumer=function(t){return Ts(t)===H1};Ut.isContextProvider=function(t){return Ts(t)===W1};Ut.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kk};Ut.isForwardRef=function(t){return Ts(t)===K1};Ut.isFragment=function(t){return Ts(t)===V1};Ut.isLazy=function(t){return Ts(t)===J1};Ut.isMemo=function(t){return Ts(t)===X1};Ut.isPortal=function(t){return Ts(t)===Gk};Ut.isProfiler=function(t){return Ts(t)===q1};Ut.isStrictMode=function(t){return Ts(t)===U1};Ut.isSuspense=function(t){return Ts(t)===G1};Ut.isSuspenseList=function(t){return Ts(t)===Y1};Ut.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===V1||t===q1||t===U1||t===G1||t===Y1||t===aH||typeof t=="object"&&t!==null&&(t.$$typeof===J1||t.$$typeof===X1||t.$$typeof===W1||t.$$typeof===H1||t.$$typeof===K1||t.$$typeof===ZO||t.getModuleId!==void 0)};Ut.typeOf=Ts;QO.exports=Ut;var lx=QO.exports;function eI(t,e,n){var r=W.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var lH=Number(W.version.split(".")[0]),cH=function(e,n){typeof e=="function"?e(n):Je(e)==="object"&&e&&"current"in e&&(e.current=n)},uH=function(e){var n,r;if(!e)return!1;if(tI(e)&&lH>=19)return!0;var i=lx.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==lx.ForwardRef||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==lx.ForwardRef)};function tI(t){return W.isValidElement(t)&&!YO(t)}var dH=function(e){if(e&&tI(e)){var n=e;return n.props.propertyIsEnumerable("ref")?n.props.ref:n.ref}return null};function pa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JO(r.key),r)}}function ma(t,e,n){return e&&xT(t.prototype,e),n&&xT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ow(t,e)}function Q1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}function Fy(t){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fy(t)}function nI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nI=function(){return!!t})()}function Ec(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hH(t,e){if(e&&(Je(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ec(t)}function Z1(t){var e=nI();return function(){var n,r=Fy(t);if(e){var i=Fy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hH(this,n)}}function Iw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fH(t){if(Array.isArray(t))return Iw(t)}function rI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yk(t,e){if(t){if(typeof t=="string")return Iw(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iw(t,e):void 0}}function pH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ga(t){return fH(t)||rI(t)||Yk(t)||pH()}var iI=function(e){return+setTimeout(e,16)},sI=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(iI=function(e){return window.requestAnimationFrame(e)},sI=function(e){return window.cancelAnimationFrame(e)});var wT=0,Xk=new Map;function oI(t){Xk.delete(t)}var Rw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;wT+=1;var r=wT;function i(s){if(s===0)oI(r),e();else{var o=iI(function(){i(s-1)});Xk.set(r,o)}}return i(n),r};Rw.cancel=function(t){var e=Xk.get(t);return oI(t),sI(e)};function aI(t){if(Array.isArray(t))return t}function mH(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function lI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(t,e){return aI(t)||mH(t,e)||Yk(t,e)||lI()}function Ep(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function ya(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function gH(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var ST="data-rc-order",kT="data-rc-priority",yH="rc-util-key",jw=new Map;function cI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):yH}function ev(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function vH(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function Jk(t){return Array.from((jw.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function uI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ya())return null;var n=e.csp,r=e.prepend,i=e.priority,s=i===void 0?0:i,o=vH(r),a=o==="prependQueue",l=document.createElement("style");l.setAttribute(ST,o),a&&s&&l.setAttribute(kT,"".concat(s)),n!=null&&n.nonce&&(l.nonce=n?.nonce),l.innerHTML=t;var c=ev(e),u=c.firstChild;if(r){if(a){var d=(e.styles||Jk(c)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(ST)))return!1;var f=Number(h.getAttribute(kT)||0);return s>=f});if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function dI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=ev(e);return(e.styles||Jk(n)).find(function(r){return r.getAttribute(cI(e))===t})}function hI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=dI(t,e);if(n){var r=ev(e);r.removeChild(n)}}function bH(t,e){var n=jw.get(t);if(!n||!gH(document,n)){var r=uI("",e),i=r.parentNode;jw.set(t,i),t.removeChild(r)}}function Mc(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=ev(n),i=Jk(r),s=He(He({},n),{},{styles:i});bH(r,s);var o=dI(e,s);if(o){var a,l;if((a=s.csp)!==null&&a!==void 0&&a.nonce&&o.nonce!==((l=s.csp)===null||l===void 0?void 0:l.nonce)){var c;o.nonce=(c=s.csp)===null||c===void 0?void 0:c.nonce}return o.innerHTML!==t&&(o.innerHTML=t),o}var u=uI(t,s);return u.setAttribute(cI(s),e),u}function xH(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gc(t,e){if(t==null)return{};var n,r,i=xH(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wH(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=r.has(s);if(ph(!l,"Warning: There may be circular references"),l)return!1;if(s===o)return!0;if(n&&a>1)return!1;r.add(s);var c=a+1;if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(var u=0;u<s.length;u++)if(!i(s[u],o[u],c))return!1;return!0}if(s&&o&&Je(s)==="object"&&Je(o)==="object"){var d=Object.keys(s);return d.length!==Object.keys(o).length?!1:d.every(function(h){return i(s[h],o[h],c)})}return!1}return i(t,e)}var SH="%";function Dw(t){return t.join(SH)}var kH=function(){function t(e){pa(this,t),Ke(this,"instanceId",void 0),Ke(this,"cache",new Map),this.instanceId=e}return ma(t,[{key:"get",value:function(n){return this.opGet(Dw(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(Dw(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),s=r(i);s===null?this.cache.delete(n):this.cache.set(n,s)}}]),t}(),Yd="data-token-hash",Ys="data-css-hash",el="__cssinjs_instance__";function _H(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Ys,"]"))||[],n=document.head.firstChild;Array.from(e).forEach(function(i){i[el]=i[el]||t,i[el]===t&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(Ys,"]"))).forEach(function(i){var s=i.getAttribute(Ys);if(r[s]){if(i[el]===t){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}}else r[s]=!0})}return new kH(t)}var pm=W.createContext({hashPriority:"low",cache:_H(),defaultCache:!0});function CH(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Qk=function(){function t(){pa(this,t),Ke(this,"cache",void 0),Ke(this,"keys",void 0),Ke(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ma(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o={map:this.cache};return n.forEach(function(a){if(!o)o=void 0;else{var l;o=(l=o)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(a)}}),(r=o)!==null&&r!==void 0&&r.value&&s&&(o.value[1]=this.cacheCallTimes++),(i=o)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(c,u){var d=gt(c,2),h=d[1];return i.internalGet(u)[1]<h?[u,i.internalGet(u)[1]]:c},[this.keys[0],this.cacheCallTimes]),o=gt(s,1),a=o[0];this.delete(a)}this.keys.push(n)}var l=this.cache;n.forEach(function(c,u){if(u===n.length-1)l.set(c,{value:[r,i.cacheCallTimes++]});else{var d=l.get(c);d?d.map||(d.map=new Map):l.set(c,{map:new Map}),l=l.get(c).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var s;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(s=i.value)===null||s===void 0?void 0:s[0]}var o=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),o}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!CH(r,n)}),this.deleteByPath(this.cache,n)}}]),t}();Ke(Qk,"MAX_CACHE_SIZE",20);Ke(Qk,"MAX_CACHE_OFFSET",5);var _T=0,fI=function(){function t(e){pa(this,t),Ke(this,"derivatives",void 0),Ke(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=_T,e.length===0&&(e.length>0,void 0),_T+=1}return ma(t,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),t}(),cx=new Qk;function Fw(t){var e=Array.isArray(t)?t:[t];return cx.has(e)||cx.set(e,new fI(e)),cx.get(e)}var AH=new WeakMap,ux={};function TH(t,e){for(var n=AH,r=0;r<e.length;r+=1){var i=e[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(ux)||n.set(ux,t()),n.get(ux)}var CT=new WeakMap;function Yf(t){var e=CT.get(t)||"";return e||(Object.keys(t).forEach(function(n){var r=t[n];e+=n,r instanceof fI?e+=r.id:r&&Je(r)==="object"?e+=Yf(r):e+=r}),e=Ep(e),CT.set(t,e)),e}function AT(t,e){return Ep("".concat(e,"_").concat(Yf(t)))}var Bw=ya();function vi(t){return typeof t=="number"?"".concat(t,"px"):t}function By(t,e,n){var r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s)return t;var o=He(He({},i),{},(r={},Ke(r,Yd,e),Ke(r,Ys,n),r)),a=Object.keys(o).map(function(l){var c=o[l];return c?"".concat(l,'="').concat(c,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(a,">").concat(t,"</style>")}var F0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},NH=function(e,n,r){return Object.keys(e).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(e).map(function(i){var s=gt(i,2),o=s[0],a=s[1];return"".concat(o,":").concat(a,";")}).join(""),"}"):""},pI=function(e,n,r){var i={},s={};return Object.entries(e).forEach(function(o){var a,l,c=gt(o,2),u=c[0],d=c[1];if(r!=null&&(a=r.preserve)!==null&&a!==void 0&&a[u])s[u]=d;else if((typeof d=="string"||typeof d=="number")&&!(r!=null&&(l=r.ignore)!==null&&l!==void 0&&l[u])){var h,f=F0(u,r?.prefix);i[f]=typeof d=="number"&&!(r!=null&&(h=r.unitless)!==null&&h!==void 0&&h[u])?"".concat(d,"px"):String(d),s[u]="var(".concat(f,")")}}),[s,NH(i,n,{scope:r?.scope})]},TT=ya()?W.useLayoutEffect:W.useEffect,mI=function(e,n){var r=W.useRef(!0);TT(function(){return e(r.current)},n),TT(function(){return r.current=!1,function(){r.current=!0}},[])},NT=function(e,n){mI(function(r){if(!r)return e()},n)},PH=He({},f1),PT=PH.useInsertionEffect,EH=function(e,n,r){W.useMemo(e,r),mI(function(){return n(!0)},r)},MH=PT?function(t,e,n){return PT(function(){return t(),e()},n)}:EH,LH=He({},f1),OH=LH.useInsertionEffect,IH=function(e){var n=[],r=!1;function i(s){r||n.push(s)}return W.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(s){return s()})}},e),i},RH=function(){return function(e){e()}},jH=typeof OH<"u"?IH:RH;function Zk(t,e,n,r,i){var s=W.useContext(pm),o=s.cache,a=[t].concat(ga(e)),l=Dw(a),c=jH([l]),u=function(p){o.opUpdate(l,function(g){var v=g||[void 0,void 0],y=gt(v,2),x=y[0],S=x===void 0?0:x,C=y[1],A=C,O=A||n(),M=[S,O];return p?p(M):M})};W.useMemo(function(){u()},[l]);var d=o.opGet(l),h=d[1];return MH(function(){i?.(h)},function(f){return u(function(p){var g=gt(p,2),v=g[0],y=g[1];return f&&v===0&&i?.(h),[v+1,y]}),function(){o.opUpdate(l,function(p){var g=p||[],v=gt(g,2),y=v[0],x=y===void 0?0:y,S=v[1],C=x-1;return C===0?(c(function(){(f||!o.opGet(l))&&r?.(S,!1)}),null):[x-1,S]})}},[l]),h}var DH={},FH="css",pc=new Map;function BH(t){pc.set(t,(pc.get(t)||0)+1)}function zH(t,e){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(Yd,'="').concat(t,'"]'));n.forEach(function(r){if(r[el]===e){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var $H=0;function VH(t,e){pc.set(t,(pc.get(t)||0)-1);var n=Array.from(pc.keys()),r=n.filter(function(i){var s=pc.get(i)||0;return s<=0});n.length-r.length>$H&&r.forEach(function(i){zH(i,e),pc.delete(i)})}var UH=function(e,n,r,i){var s=r.getDerivativeToken(e),o=He(He({},s),n);return i&&(o=i(o)),o},gI="token";function qH(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=W.useContext(pm),i=r.cache.instanceId,s=r.container,o=n.salt,a=o===void 0?"":o,l=n.override,c=l===void 0?DH:l,u=n.formatToken,d=n.getComputedToken,h=n.cssVar,f=TH(function(){return Object.assign.apply(Object,[{}].concat(ga(e)))},e),p=Yf(f),g=Yf(c),v=h?Yf(h):"",y=Zk(gI,[a,t.id,p,g,v],function(){var x,S=d?d(f,c,t):UH(f,c,t,u),C=He({},S),A="";if(h){var O=pI(S,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),M=gt(O,2);S=M[0],A=M[1]}var N=AT(S,a);S._tokenKey=N,C._tokenKey=AT(C,a);var D=(x=h?.key)!==null&&x!==void 0?x:N;S._themeKey=D,BH(D);var V="".concat(FH,"-").concat(Ep(N));return S._hashId=V,[S,V,C,A,h?.key||""]},function(x){VH(x[0]._themeKey,i)},function(x){var S=gt(x,4),C=S[0],A=S[3];if(h&&A){var O=Mc(A,Ep("css-variables-".concat(C._themeKey)),{mark:Ys,prepend:"queue",attachTo:s,priority:-999});O[el]=i,O.setAttribute(Yd,C._themeKey)}});return y}var WH=function(e,n,r){var i=gt(e,5),s=i[2],o=i[3],a=i[4],l=r||{},c=l.plain;if(!o)return null;var u=s._tokenKey,d=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},f=By(o,a,u,h,c);return[d,u,f]},HH={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yI="comm",vI="rule",bI="decl",KH="@import",GH="@namespace",YH="@keyframes",XH="@layer",xI=Math.abs,e_=String.fromCharCode;function wI(t){return t.trim()}function B0(t,e,n){return t.replace(e,n)}function JH(t,e,n){return t.indexOf(e,n)}function Pd(t,e){return t.charCodeAt(e)|0}function Xd(t,e,n){return t.slice(e,n)}function fo(t){return t.length}function QH(t){return t.length}function Bg(t,e){return e.push(t),t}var tv=1,Jd=1,SI=0,As=0,Gn=0,mh="";function t_(t,e,n,r,i,s,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:tv,column:Jd,length:o,return:"",siblings:a}}function ZH(){return Gn}function eK(){return Gn=As>0?Pd(mh,--As):0,Jd--,Gn===10&&(Jd=1,tv--),Gn}function Xs(){return Gn=As<SI?Pd(mh,As++):0,Jd++,Gn===10&&(Jd=1,tv++),Gn}function tl(){return Pd(mh,As)}function z0(){return As}function nv(t,e){return Xd(mh,t,e)}function Mp(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tK(t){return tv=Jd=1,SI=fo(mh=t),As=0,[]}function nK(t){return mh="",t}function dx(t){return wI(nv(As-1,zw(t===91?t+2:t===40?t+1:t)))}function rK(t){for(;(Gn=tl())&&Gn<33;)Xs();return Mp(t)>2||Mp(Gn)>3?"":" "}function iK(t,e){for(;--e&&Xs()&&!(Gn<48||Gn>102||Gn>57&&Gn<65||Gn>70&&Gn<97););return nv(t,z0()+(e<6&&tl()==32&&Xs()==32))}function zw(t){for(;Xs();)switch(Gn){case t:return As;case 34:case 39:t!==34&&t!==39&&zw(Gn);break;case 40:t===41&&zw(t);break;case 92:Xs();break}return As}function sK(t,e){for(;Xs()&&t+Gn!==47+10;)if(t+Gn===42+42&&tl()===47)break;return"/*"+nv(e,As-1)+"*"+e_(t===47?t:Xs())}function oK(t){for(;!Mp(tl());)Xs();return nv(t,As)}function aK(t){return nK($0("",null,null,null,[""],t=tK(t),0,[0],t))}function $0(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,g=1,v=1,y=1,x=0,S="",C=i,A=s,O=r,M=S;v;)switch(p=x,x=Xs()){case 40:if(p!=108&&Pd(M,d-1)==58){JH(M+=B0(dx(x),"&","&\f"),"&\f",xI(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:M+=dx(x);break;case 9:case 10:case 13:case 32:M+=rK(p);break;case 92:M+=iK(z0()-1,7);continue;case 47:switch(tl()){case 42:case 47:Bg(lK(sK(Xs(),z0()),e,n,l),l),(Mp(p||1)==5||Mp(tl()||1)==5)&&fo(M)&&Xd(M,-1,void 0)!==" "&&(M+=" ");break;default:M+="/"}break;case 123*g:a[c++]=fo(M)*y;case 125*g:case 59:case 0:switch(x){case 0:case 125:v=0;case 59+u:y==-1&&(M=B0(M,/\f/g,"")),f>0&&(fo(M)-d||g===0&&p===47)&&Bg(f>32?MT(M+";",r,n,d-1,l):MT(B0(M," ","")+";",r,n,d-2,l),l);break;case 59:M+=";";default:if(Bg(O=ET(M,e,n,c,u,i,a,S,C=[],A=[],d,s),s),x===123)if(u===0)$0(M,e,O,O,C,s,d,a,A);else{switch(h){case 99:if(Pd(M,3)===110)break;case 108:if(Pd(M,2)===97)break;default:u=0;case 100:case 109:case 115:}u?$0(t,O,O,r&&Bg(ET(t,O,O,0,0,i,a,S,i,C=[],d,A),A),i,A,d,a,r?C:A):$0(M,O,O,O,[""],A,0,a,A)}}c=u=f=0,g=y=1,S=M="",d=o;break;case 58:d=1+fo(M),f=p;default:if(g<1){if(x==123)--g;else if(x==125&&g++==0&&eK()==125)continue}switch(M+=e_(x),x*g){case 38:y=u>0?1:(M+="\f",-1);break;case 44:a[c++]=(fo(M)-1)*y,y=1;break;case 64:tl()===45&&(M+=dx(Xs())),h=tl(),u=d=fo(S=M+=oK(z0())),x++;break;case 45:p===45&&fo(M)==2&&(g=0)}}return s}function ET(t,e,n,r,i,s,o,a,l,c,u,d){for(var h=i-1,f=i===0?s:[""],p=QH(f),g=0,v=0,y=0;g<r;++g)for(var x=0,S=Xd(t,h+1,h=xI(v=o[g])),C=t;x<p;++x)(C=wI(v>0?f[x]+" "+S:B0(S,/&\f/g,f[x])))&&(l[y++]=C);return t_(t,e,n,i===0?vI:a,l,c,u,d)}function lK(t,e,n,r){return t_(t,e,n,yI,e_(ZH()),Xd(t,2,-2),0,r)}function MT(t,e,n,r,i){return t_(t,e,n,bI,Xd(t,0,r),Xd(t,r+1,-1),r,i)}function $w(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function cK(t,e,n,r){switch(t.type){case XH:if(t.children.length)break;case KH:case GH:case bI:return t.return=t.return||t.value;case yI:return"";case YH:return t.return=t.value+"{"+$w(t.children,r)+"}";case vI:if(!fo(t.value=t.props.join(",")))return""}return fo(n=$w(t.children,r))?t.return=t.value+"{"+n+"}":""}var LT="data-ant-cssinjs-cache-path",kI="_FILE_STYLE__",Lc,_I=!0;function uK(){if(!Lc&&(Lc={},ya())){var t=document.createElement("div");t.className=LT,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(i){var s=i.split(":"),o=gt(s,2),a=o[0],l=o[1];Lc[a]=l});var n=document.querySelector("style[".concat(LT,"]"));if(n){var r;_I=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(t)}}function dK(t){return uK(),!!Lc[t]}function hK(t){var e=Lc[t],n=null;if(e&&ya())if(_I)n=kI;else{var r=document.querySelector("style[".concat(Ys,'="').concat(Lc[t],'"]'));r?n=r.innerHTML:delete Lc[t]}return[n,e]}var fK="_skip_check_",CI="_multi_value_";function V0(t){var e=$w(aK(t),cK);return e.replace(/\{%%%\:[^;];}/g,";")}function pK(t){return Je(t)==="object"&&t&&(fK in t||CI in t)}function OT(t,e,n){if(!e)return t;var r=".".concat(e),i=n==="low"?":where(".concat(r,")"):r,s=t.split(",").map(function(o){var a,l=o.trim().split(/\s+/),c=l[0]||"",u=((a=c.match(/^\w+/))===null||a===void 0?void 0:a[0])||"";return c="".concat(u).concat(i).concat(c.slice(u.length)),[c].concat(ga(l.slice(1))).join(" ")});return s.join(",")}var mK=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,s=r.injectHash,o=r.parentSelectors,a=n.hashId,l=n.layer;n.path;var c=n.hashPriority,u=n.transformers,d=u===void 0?[]:u;n.linters;var h="",f={};function p(y){var x=y.getName(a);if(!f[x]){var S=t(y.style,n,{root:!1,parentSelectors:o}),C=gt(S,1),A=C[0];f[x]="@keyframes ".concat(y.getName(a)).concat(A)}}function g(y){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return y.forEach(function(S){Array.isArray(S)?g(S,x):S&&x.push(S)}),x}var v=g(Array.isArray(e)?e:[e]);return v.forEach(function(y){var x=typeof y=="string"&&!i?{}:y;if(typeof x=="string")h+="".concat(x,`
`);else if(x._keyframe)p(x);else{var S=d.reduce(function(C,A){var O;return(A==null||(O=A.visit)===null||O===void 0?void 0:O.call(A,C))||C},x);Object.keys(S).forEach(function(C){var A=S[C];if(Je(A)==="object"&&A&&(C!=="animationName"||!A._keyframe)&&!pK(A)){var O=!1,M=C.trim(),N=!1;(i||s)&&a?M.startsWith("@")?O=!0:M==="&"?M=OT("",a,c):M=OT(C,a,c):i&&!a&&(M==="&"||M==="")&&(M="",N=!0);var D=t(A,n,{root:N,injectHash:O,parentSelectors:[].concat(ga(o),[M])}),V=gt(D,2),L=V[0],E=V[1];f=He(He({},f),E),h+="".concat(M).concat(L)}else{let Q=function(Z,ne){var Y=Z.replace(/[A-Z]/g,function(q){return"-".concat(q.toLowerCase())}),ie=ne;!HH[Z]&&typeof ie=="number"&&ie!==0&&(ie="".concat(ie,"px")),Z==="animationName"&&ne!==null&&ne!==void 0&&ne._keyframe&&(p(ne),ie=ne.getName(a)),h+="".concat(Y,":").concat(ie,";")};var B,I=(B=A?.value)!==null&&B!==void 0?B:A;Je(A)==="object"&&A!==null&&A!==void 0&&A[CI]&&Array.isArray(I)?I.forEach(function(Z){Q(C,Z)}):Q(C,I)}})}}),i?l&&(h&&(h="@layer ".concat(l.name," {").concat(h,"}")),l.dependencies&&(f["@layer ".concat(l.name)]=l.dependencies.map(function(y){return"@layer ".concat(y,", ").concat(l.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,f]};function AI(t,e){return Ep("".concat(t.join("%")).concat(e))}function gK(){return null}var TI="style";function Vw(t,e){var n=t.token,r=t.path,i=t.hashId,s=t.layer,o=t.nonce,a=t.clientOnly,l=t.order,c=l===void 0?0:l,u=W.useContext(pm),d=u.autoClear;u.mock;var h=u.defaultCache,f=u.hashPriority,p=u.container,g=u.ssrInline,v=u.transformers,y=u.linters,x=u.cache,S=u.layer,C=n._tokenKey,A=[C];S&&A.push("layer"),A.push.apply(A,ga(r));var O=Bw,M=Zk(TI,A,function(){var E=A.join("|");if(dK(E)){var B=hK(E),I=gt(B,2),Q=I[0],Z=I[1];if(Q)return[Q,C,Z,{},a,c]}var ne=e(),Y=mK(ne,{hashId:i,hashPriority:f,layer:S?s:void 0,path:r.join("-"),transformers:v,linters:y}),ie=gt(Y,2),q=ie[0],G=ie[1],P=V0(q),U=AI(A,P);return[P,C,U,G,a,c]},function(E,B){var I=gt(E,3),Q=I[2];(B||d)&&Bw&&hI(Q,{mark:Ys})},function(E){var B=gt(E,4),I=B[0];B[1];var Q=B[2],Z=B[3];if(O&&I!==kI){var ne={mark:Ys,prepend:S?!1:"queue",attachTo:p,priority:c},Y=typeof o=="function"?o():o;Y&&(ne.csp={nonce:Y});var ie=[],q=[];Object.keys(Z).forEach(function(P){P.startsWith("@layer")?ie.push(P):q.push(P)}),ie.forEach(function(P){Mc(V0(Z[P]),"_layer-".concat(P),He(He({},ne),{},{prepend:!0}))});var G=Mc(I,Q,ne);G[el]=x.instanceId,G.setAttribute(Yd,C),q.forEach(function(P){Mc(V0(Z[P]),"_effect-".concat(P),ne)})}}),N=gt(M,3),D=N[0],V=N[1],L=N[2];return function(E){var B;if(!g||O||!h)B=W.createElement(gK,null);else{var I;B=W.createElement("style",bs({},(I={},Ke(I,Yd,V),Ke(I,Ys,L),I),{dangerouslySetInnerHTML:{__html:D}}))}return W.createElement(W.Fragment,null,B,E)}}var yK=function(e,n,r){var i=gt(e,6),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=r||{},h=d.plain;if(c)return null;var f=s,p={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return f=By(s,o,a,p,h),l&&Object.keys(l).forEach(function(g){if(!n[g]){n[g]=!0;var v=V0(l[g]),y=By(v,o,"_effect-".concat(g),p,h);g.startsWith("@layer")?f=y+f:f+=y}}),[u,a,f]},NI="cssVar",vK=function(e,n){var r=e.key,i=e.prefix,s=e.unitless,o=e.ignore,a=e.token,l=e.scope,c=l===void 0?"":l,u=W.useContext(pm),d=u.cache.instanceId,h=u.container,f=a._tokenKey,p=[].concat(ga(e.path),[r,c,f]),g=Zk(NI,p,function(){var v=n(),y=pI(v,r,{prefix:i,unitless:s,ignore:o,scope:c}),x=gt(y,2),S=x[0],C=x[1],A=AI(p,C);return[S,C,A,r]},function(v){var y=gt(v,3),x=y[2];Bw&&hI(x,{mark:Ys})},function(v){var y=gt(v,3),x=y[1],S=y[2];if(x){var C=Mc(x,S,{mark:Ys,prepend:"queue",attachTo:h,priority:-999});C[el]=d,C.setAttribute(Yd,r)}});return g},bK=function(e,n,r){var i=gt(e,4),s=i[1],o=i[2],a=i[3],l=r||{},c=l.plain;if(!s)return null;var u=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},h=By(s,a,o,d,c);return[u,o,h]},of;of={},Ke(of,TI,yK),Ke(of,gI,WH),Ke(of,NI,bK);function $u(t){return t.notSplit=!0,t}$u(["borderTop","borderBottom"]),$u(["borderTop"]),$u(["borderBottom"]),$u(["borderLeft","borderRight"]),$u(["borderLeft"]),$u(["borderRight"]);var xK=W.createContext({});const n_=xK;function wK(t){return aI(t)||rI(t)||Yk(t)||lI()}function Uw(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}function PI(t,e,n,r){if(!e.length)return n;var i=wK(e),s=i[0],o=i.slice(1),a;return!t&&typeof s=="number"?a=[]:Array.isArray(t)?a=ga(t):a=He({},t),r&&n===void 0&&o.length===1?delete a[s][o[0]]:a[s]=PI(a[s],o,n,r),a}function hx(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&r&&n===void 0&&!Uw(t,e.slice(0,-1))?t:PI(t,e,n,r)}function SK(t){return Je(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function IT(t){return Array.isArray(t)?[]:{}}var kK=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function _K(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=IT(e[0]);return e.forEach(function(i){function s(o,a){var l=new Set(a),c=Uw(i,o),u=Array.isArray(c);if(u||SK(c)){if(!l.has(c)){l.add(c);var d=Uw(r,o);u?r=hx(r,o,[]):(!d||Je(d)!=="object")&&(r=hx(r,o,IT(c))),kK(c).forEach(function(h){s([].concat(ga(o),[h]),l)})}}else r=hx(r,o,c)}s([])}),r}const CK=W.createContext({}),AK=W.createContext(void 0);var TK={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},NK={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},PK=He(He({},NK),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const EK={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},EI=EK,MK={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},PK),timePickerLocale:Object.assign({},EI)},RT=MK,Fi="${label} is not a valid ${type}",LK={locale:"en",Pagination:TK,DatePicker:RT,TimePicker:EI,Calendar:RT,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Fi,method:Fi,array:Fi,object:Fi,number:Fi,date:Fi,boolean:Fi,integer:Fi,float:Fi,regexp:Fi,email:Fi,url:Fi,hex:Fi},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}},rv=LK;Object.assign({},rv.Modal);let U0=[];const jT=()=>U0.reduce((t,e)=>Object.assign(Object.assign({},t),e),rv.Modal);function OK(t){if(t){const e=Object.assign({},t);return U0.push(e),jT(),()=>{U0=U0.filter(n=>n!==e),jT()}}Object.assign({},rv.Modal)}const IK=W.createContext(void 0),MI=IK,RK="internalMark",jK=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;W.useEffect(()=>OK(e?.Modal),[e]);const i=W.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return W.createElement(MI.Provider,{value:i},n)},DK=jK,LI={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},FK=Object.assign(Object.assign({},LI),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Lp=FK,or=Math.round;function fx(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const DT=(t,e,n)=>n===0?t:t/100;function af(t,e){const n=e||255;return t>n?n:t<0?0:t}class $n{constructor(e){Ke(this,"isValid",!0),Ke(this,"r",0),Ke(this,"g",0),Ke(this,"b",0),Ke(this,"a",1),Ke(this,"_h",void 0),Ke(this,"_s",void 0),Ke(this,"_l",void 0),Ke(this,"_v",void 0),Ke(this,"_max",void 0),Ke(this,"_min",void 0),Ke(this,"_brightness",void 0);function n(r){return r[0]in e&&r[1]in e&&r[2]in e}if(e)if(typeof e=="string"){let i=function(s){return r.startsWith(s)};const r=e.trim();/^#?[A-F\d]{3,8}$/i.test(r)?this.fromHexString(r):i("rgb")?this.fromRgbString(r):i("hsl")?this.fromHslString(r):(i("hsv")||i("hsb"))&&this.fromHsvString(r)}else if(e instanceof $n)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=af(e.r),this.g=af(e.g),this.b=af(e.b),this.a=typeof e.a=="number"?af(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(s){const o=s/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=or(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,s=a=>(r[a]-this[a])*i+this[a],o={r:or(s("r")),g:or(s("g")),b:or(s("b")),a:or(s("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=s=>or((this[s]*this.a+n[s]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=or(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=or(this.getSaturation()*100),r=or(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=af(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,s){return parseInt(n[i]+n[s||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const h=or(r*255);this.r=h,this.g=h,this.b=h}let s=0,o=0,a=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(s=c,o=u):l>=1&&l<2?(s=u,o=c):l>=2&&l<3?(o=c,a=u):l>=3&&l<4?(o=u,a=c):l>=4&&l<5?(s=u,a=c):l>=5&&l<6&&(s=c,a=u);const d=r-c/2;this.r=or((s+d)*255),this.g=or((o+d)*255),this.b=or((a+d)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const s=or(r*255);if(this.r=s,this.g=s,this.b=s,n<=0)return;const o=e/60,a=Math.floor(o),l=o-a,c=or(r*(1-n)*255),u=or(r*(1-n*l)*255),d=or(r*(1-n*(1-l))*255);switch(a){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=fx(e,DT);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=fx(e,DT);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=fx(e,(r,i)=>i.includes("%")?or(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var zg=2,FT=.16,BK=.05,zK=.05,$K=.15,OI=5,II=4,VK=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function BT(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-zg*e:Math.round(t.h)+zg*e:r=n?Math.round(t.h)+zg*e:Math.round(t.h)-zg*e,r<0?r+=360:r>=360&&(r-=360),r}function zT(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-FT*e:e===II?r=t.s+FT:r=t.s+BK*e,r>1&&(r=1),n&&e===OI&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function $T(t,e,n){var r;return n?r=t.v+zK*e:r=t.v-$K*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function Op(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new $n(t),i=r.toHsv(),s=OI;s>0;s-=1){var o=new $n({h:BT(i,s,!0),s:zT(i,s,!0),v:$T(i,s,!0)});n.push(o)}n.push(r);for(var a=1;a<=II;a+=1){var l=new $n({h:BT(i,a),s:zT(i,a),v:$T(i,a)});n.push(l)}return e.theme==="dark"?VK.map(function(c){var u=c.index,d=c.amount;return new $n(e.backgroundColor||"#141414").mix(n[u],d).toHexString()}):n.map(function(c){return c.toHexString()})}var px={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},qw=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];qw.primary=qw[5];var Ww=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Ww.primary=Ww[5];var Hw=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Hw.primary=Hw[5];var Kw=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Kw.primary=Kw[5];var Gw=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Gw.primary=Gw[5];var Yw=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Yw.primary=Yw[5];var Xw=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Xw.primary=Xw[5];var Jw=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Jw.primary=Jw[5];var zy=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];zy.primary=zy[5];var Qw=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Qw.primary=Qw[5];var Zw=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Zw.primary=Zw[5];var e5=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];e5.primary=e5[5];var t5=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];t5.primary=t5[5];var mx={red:qw,volcano:Ww,orange:Hw,gold:Kw,yellow:Gw,lime:Yw,green:Xw,cyan:Jw,blue:zy,geekblue:Qw,purple:Zw,magenta:e5,grey:t5};function UK(t,{generateColorPalettes:e,generateNeutralColorPalettes:n}){const{colorSuccess:r,colorWarning:i,colorError:s,colorInfo:o,colorPrimary:a,colorBgBase:l,colorTextBase:c}=t,u=e(a),d=e(r),h=e(i),f=e(s),p=e(o),g=n(l,c),v=t.colorLink||t.colorInfo,y=e(v),x=new $n(f[1]).mix(new $n(f[3]),50).toHexString();return Object.assign(Object.assign({},g),{colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:f[1],colorErrorBgHover:f[2],colorErrorBgFilledHover:x,colorErrorBgActive:f[3],colorErrorBorder:f[3],colorErrorBorderHover:f[4],colorErrorHover:f[5],colorError:f[6],colorErrorActive:f[7],colorErrorTextHover:f[8],colorErrorText:f[9],colorErrorTextActive:f[10],colorWarningBg:h[1],colorWarningBgHover:h[2],colorWarningBorder:h[3],colorWarningBorderHover:h[4],colorWarningHover:h[4],colorWarning:h[6],colorWarningActive:h[7],colorWarningTextHover:h[8],colorWarningText:h[9],colorWarningTextActive:h[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:y[4],colorLink:y[6],colorLinkActive:y[7],colorBgMask:new $n("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const qK=t=>{let e=t,n=t,r=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:i}},WK=qK;function HK(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+e*2).toFixed(1)}s`,motionDurationSlow:`${(n+e*3).toFixed(1)}s`,lineWidthBold:i+1},WK(r))}const KK=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}},GK=KK;function YK(t){return(t+8)/t}function XK(t){const e=Array.from({length:10}).map((n,r)=>{const i=r-1,s=t*Math.pow(Math.E,i/5),o=r>1?Math.floor(s):Math.ceil(s);return Math.floor(o/2)*2});return e[1]=t,e.map(n=>({size:n,lineHeight:YK(n)}))}const JK=t=>{const e=XK(t),n=e.map(u=>u.size),r=e.map(u=>u.lineHeight),i=n[1],s=n[0],o=n[2],a=r[1],l=r[0],c=r[2];return{fontSizeSM:s,fontSize:i,fontSizeLG:o,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:a,lineHeightLG:c,lineHeightSM:l,fontHeight:Math.round(a*i),fontHeightLG:Math.round(c*o),fontHeightSM:Math.round(l*s),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}},QK=JK;function ZK(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}const us=(t,e)=>new $n(t).setA(e).toRgbString(),lf=(t,e)=>new $n(t).darken(e).toHexString(),eG=t=>{const e=Op(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},tG=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:us(r,.88),colorTextSecondary:us(r,.65),colorTextTertiary:us(r,.45),colorTextQuaternary:us(r,.25),colorFill:us(r,.15),colorFillSecondary:us(r,.06),colorFillTertiary:us(r,.04),colorFillQuaternary:us(r,.02),colorBgSolid:us(r,1),colorBgSolidHover:us(r,.75),colorBgSolidActive:us(r,.95),colorBgLayout:lf(n,4),colorBgContainer:lf(n,0),colorBgElevated:lf(n,0),colorBgSpotlight:us(r,.85),colorBgBlur:"transparent",colorBorder:lf(n,15),colorBorderSecondary:lf(n,6)}};function nG(t){px.pink=px.magenta,mx.pink=mx.magenta;const e=Object.keys(LI).map(n=>{const r=t[n]===px[n]?mx[n]:Op(t[n]);return Array.from({length:10},()=>1).reduce((i,s,o)=>(i[`${n}-${o+1}`]=r[o],i[`${n}${o+1}`]=r[o],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),UK(t,{generateColorPalettes:eG,generateNeutralColorPalettes:tG})),QK(t.fontSize)),ZK(t)),GK(t)),HK(t))}const rG=Fw(nG),RI=rG,n5={token:Lp,override:{override:Lp},hashed:!0},jI=nt.createContext(n5),$y="ant",r_="anticon",iG=(t,e)=>e||(t?`${$y}-${t}`:$y),Yc=W.createContext({getPrefixCls:iG,iconPrefixCls:r_}),VT={};function sG(t){const e=W.useContext(Yc),{getPrefixCls:n,direction:r,getPopupContainer:i}=e,s=e[t];return Object.assign(Object.assign({classNames:VT,styles:VT},s),{getPrefixCls:n,direction:r,getPopupContainer:i})}const oG=`-ant-${Date.now()}-${Math.random()}`;function aG(t,e){const n={},r=(o,a)=>{let l=o.clone();return l=a?.(l)||l,l.toRgbString()},i=(o,a)=>{const l=new $n(o),c=Op(l.toRgbString());n[`${a}-color`]=r(l),n[`${a}-color-disabled`]=c[1],n[`${a}-color-hover`]=c[4],n[`${a}-color-active`]=c[6],n[`${a}-color-outline`]=l.clone().setA(.2).toRgbString(),n[`${a}-color-deprecated-bg`]=c[0],n[`${a}-color-deprecated-border`]=c[2]};if(e.primaryColor){i(e.primaryColor,"primary");const o=new $n(e.primaryColor),a=Op(o.toRgbString());a.forEach((c,u)=>{n[`primary-${u+1}`]=c}),n["primary-color-deprecated-l-35"]=r(o,c=>c.lighten(35)),n["primary-color-deprecated-l-20"]=r(o,c=>c.lighten(20)),n["primary-color-deprecated-t-20"]=r(o,c=>c.tint(20)),n["primary-color-deprecated-t-50"]=r(o,c=>c.tint(50)),n["primary-color-deprecated-f-12"]=r(o,c=>c.setA(c.a*.12));const l=new $n(a[0]);n["primary-color-active-deprecated-f-30"]=r(l,c=>c.setA(c.a*.3)),n["primary-color-active-deprecated-d-02"]=r(l,c=>c.darken(2))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(o=>`--${t}-${o}: ${n[o]};`).join(`
`)}
  }
  `.trim()}function lG(t,e){const n=aG(t,e);ya()&&Mc(n,`${oG}-dynamic-theme`)}const r5=W.createContext(!1),cG=({children:t,disabled:e})=>{const n=W.useContext(r5);return W.createElement(r5.Provider,{value:e??n},t)},uG=r5,i5=W.createContext(void 0),dG=({children:t,size:e})=>{const n=W.useContext(i5);return W.createElement(i5.Provider,{value:e||n},t)},iv=i5;function hG(){const t=W.useContext(uG),e=W.useContext(iv);return{componentDisabled:t,componentSize:e}}var DI=ma(function t(){pa(this,t)}),FI="CALC_UNIT",fG=new RegExp(FI,"g");function gx(t){return typeof t=="number"?"".concat(t).concat(FI):t}var pG=function(t){Q1(n,t);var e=Z1(n);function n(r,i){var s;pa(this,n),s=e.call(this),Ke(Ec(s),"result",""),Ke(Ec(s),"unitlessCssVar",void 0),Ke(Ec(s),"lowPriority",void 0);var o=Je(r);return s.unitlessCssVar=i,r instanceof n?s.result="(".concat(r.result,")"):o==="number"?s.result=gx(r):o==="string"&&(s.result=r),s}return ma(n,[{key:"add",value:function(i){return i instanceof n?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(gx(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof n?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(gx(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var s=this,o=i||{},a=o.unit,l=!0;return typeof a=="boolean"?l=a:Array.from(this.unitlessCssVar).some(function(c){return s.result.includes(c)})&&(l=!1),this.result=this.result.replace(fG,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(DI),mG=function(t){Q1(n,t);var e=Z1(n);function n(r){var i;return pa(this,n),i=e.call(this),Ke(Ec(i),"result",0),r instanceof n?i.result=r.result:typeof r=="number"&&(i.result=r),i}return ma(n,[{key:"add",value:function(i){return i instanceof n?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof n?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof n?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof n?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),n}(DI),gG=function(e,n){var r=e==="css"?pG:mG;return function(i){return new r(i,n)}},UT=function(e,n){return"".concat([n,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Ip(t){var e=W.useRef();e.current=t;var n=W.useCallback(function(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(s))},[]);return n}function Rp(t){var e=W.useRef(!1),n=W.useState(t),r=gt(n,2),i=r[0],s=r[1];W.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(a,l){l&&e.current||s(a)}return[i,o]}function yx(t){return t!==void 0}function yG(t,e){var n=e||{},r=n.defaultValue,i=n.value,s=n.onChange,o=n.postState,a=Rp(function(){return yx(i)?i:yx(r)?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=gt(a,2),c=l[0],u=l[1],d=i!==void 0?i:c,h=o?o(d):d,f=Ip(s),p=Rp([d]),g=gt(p,2),v=g[0],y=g[1];NT(function(){var S=v[0];c!==S&&f(c,S)},[v]),NT(function(){yx(i)||u(i)},[i]);var x=Ip(function(S,C){u(S,C),y([d],C)});return[h,x]}function qT(t,e,n,r){var i=He({},e[t]);if(r!=null&&r.deprecatedTokens){var s=r.deprecatedTokens;s.forEach(function(a){var l=gt(a,2),c=l[0],u=l[1];if(i!=null&&i[c]||i!=null&&i[u]){var d;(d=i[u])!==null&&d!==void 0||(i[u]=i?.[c])}})}var o=He(He({},n),i);return Object.keys(o).forEach(function(a){o[a]===e[a]&&delete o[a]}),o}var BI=typeof CSSINJS_STATISTIC<"u",s5=!0;function i_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!BI)return Object.assign.apply(Object,[{}].concat(e));s5=!1;var r={};return e.forEach(function(i){if(Je(i)==="object"){var s=Object.keys(i);s.forEach(function(o){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return i[o]}})})}}),s5=!0,r}var WT={};function vG(){}var bG=function(e){var n,r=e,i=vG;return BI&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(e,{get:function(o,a){if(s5){var l;(l=n)===null||l===void 0||l.add(a)}return o[a]}}),i=function(o,a){var l;WT[o]={global:Array.from(n),component:He(He({},(l=WT[o])===null||l===void 0?void 0:l.component),a)}}),{token:r,keys:n,flush:i}};function HT(t,e,n){if(typeof n=="function"){var r;return n(i_(e,(r=e[t])!==null&&r!==void 0?r:{}))}return n??{}}function xG(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"max(".concat(r.map(function(s){return vi(s)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"min(".concat(r.map(function(s){return vi(s)}).join(","),")")}}}var wG=1e3*60*10,SG=function(){function t(){pa(this,t),Ke(this,"map",new Map),Ke(this,"objectIDMap",new WeakMap),Ke(this,"nextID",0),Ke(this,"lastAccessBeat",new Map),Ke(this,"accessBeat",0)}return ma(t,[{key:"set",value:function(n,r){this.clear();var i=this.getCompositeKey(n);this.map.set(i,r),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),i=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(n){var r=this,i=n.map(function(s){return s&&Je(s)==="object"?"obj_".concat(r.getObjectID(s)):"".concat(Je(s),"_").concat(s)});return i.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(i,s){r-i>wG&&(n.map.delete(s),n.lastAccessBeat.delete(s))}),this.accessBeat=0}}}]),t}(),KT=new SG;function kG(t,e){return nt.useMemo(function(){var n=KT.get(e);if(n)return n;var r=t();return KT.set(e,r),r},e)}var _G=function(){return{}};function CG(t){var e=t.useCSP,n=e===void 0?_G:e,r=t.useToken,i=t.usePrefix,s=t.getResetStyles,o=t.getCommonStyle,a=t.getCompUnitless;function l(h,f,p,g){var v=Array.isArray(h)?h[0]:h;function y(N){return"".concat(String(v)).concat(N.slice(0,1).toUpperCase()).concat(N.slice(1))}var x=g?.unitless||{},S=typeof a=="function"?a(h):{},C=He(He({},S),{},Ke({},y("zIndexPopup"),!0));Object.keys(x).forEach(function(N){C[y(N)]=x[N]});var A=He(He({},g),{},{unitless:C,prefixToken:y}),O=u(h,f,p,A),M=c(v,p,A);return function(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N,V=O(N,D),L=gt(V,2),E=L[1],B=M(D),I=gt(B,2),Q=I[0],Z=I[1];return[Q,E,Z]}}function c(h,f,p){var g=p.unitless,v=p.injectStyle,y=v===void 0?!0:v,x=p.prefixToken,S=p.ignore,C=function(M){var N=M.rootCls,D=M.cssVar,V=D===void 0?{}:D,L=r(),E=L.realToken;return vK({path:[h],prefix:V.prefix,key:V.key,unitless:g,ignore:S,token:E,scope:N},function(){var B=HT(h,E,f),I=qT(h,E,B,{deprecatedTokens:p?.deprecatedTokens});return Object.keys(B).forEach(function(Q){I[x(Q)]=I[Q],delete I[Q]}),I}),null},A=function(M){var N=r(),D=N.cssVar;return[function(V){return y&&D?nt.createElement(nt.Fragment,null,nt.createElement(C,{rootCls:M,cssVar:D,component:h}),V):V},D?.key]};return A}function u(h,f,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=Array.isArray(h)?h:[h,h],y=gt(v,1),x=y[0],S=v.join("-"),C=t.layer||{name:"antd"};return function(A){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A,M=r(),N=M.theme,D=M.realToken,V=M.hashId,L=M.token,E=M.cssVar,B=i(),I=B.rootPrefixCls,Q=B.iconPrefixCls,Z=n(),ne=E?"css":"js",Y=kG(function(){var K=new Set;return E&&Object.keys(g.unitless||{}).forEach(function(J){K.add(F0(J,E.prefix)),K.add(F0(J,UT(x,E.prefix)))}),gG(ne,K)},[ne,x,E?.prefix]),ie=xG(ne),q=ie.max,G=ie.min,P={theme:N,token:L,hashId:V,nonce:function(){return Z.nonce},clientOnly:g.clientOnly,layer:C,order:g.order||-999};typeof s=="function"&&Vw(He(He({},P),{},{clientOnly:!1,path:["Shared",I]}),function(){return s(L,{prefix:{rootPrefixCls:I,iconPrefixCls:Q},csp:Z})});var U=Vw(He(He({},P),{},{path:[S,A,Q]}),function(){if(g.injectStyle===!1)return[];var K=bG(L),J=K.token,re=K.flush,se=HT(x,D,p),ue=".".concat(A),de=qT(x,D,se,{deprecatedTokens:g.deprecatedTokens});E&&se&&Je(se)==="object"&&Object.keys(se).forEach(function(Te){se[Te]="var(".concat(F0(Te,UT(x,E.prefix)),")")});var xe=i_(J,{componentCls:ue,prefixCls:A,iconCls:".".concat(Q),antCls:".".concat(I),calc:Y,max:q,min:G},E?se:de),ve=f(xe,{hashId:V,prefixCls:A,rootPrefixCls:I,iconPrefixCls:Q});re(x,de);var ke=typeof o=="function"?o(xe,A,O,g.resetFont):null;return[g.resetStyle===!1?null:ke,ve]});return[U,V]}}function d(h,f,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=u(h,f,p,He({resetStyle:!1,order:-998},g)),y=function(S){var C=S.prefixCls,A=S.rootCls,O=A===void 0?C:A;return v(C,O),null};return y}return{genStyleHooks:l,genSubStyleComponent:d,genComponentStyleHook:u}}const AG="5.25.4";function vx(t){return t>=0&&t<=255}function $g(t,e){const{r:n,g:r,b:i,a:s}=new $n(t).toRgb();if(s<1)return t;const{r:o,g:a,b:l}=new $n(e).toRgb();for(let c=.01;c<=1;c+=.01){const u=Math.round((n-o*(1-c))/c),d=Math.round((r-a*(1-c))/c),h=Math.round((i-l*(1-c))/c);if(vx(u)&&vx(d)&&vx(h))return new $n({r:u,g:d,b:h,a:Math.round(c*100)/100}).toRgbString()}return new $n({r:n,g:r,b:i,a:1}).toRgbString()}var TG=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function zI(t){const{override:e}=t,n=TG(t,["override"]),r=Object.assign({},e);Object.keys(Lp).forEach(h=>{delete r[h]});const i=Object.assign(Object.assign({},n),r),s=480,o=576,a=768,l=992,c=1200,u=1600;if(i.motion===!1){const h="0s";i.motionDurationFast=h,i.motionDurationMid=h,i.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:$g(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:$g(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:$g(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*3,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:$g(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:s,screenXSMin:s,screenXSMax:o-1,screenSM:o,screenSMMin:o,screenSMMax:a-1,screenMD:a,screenMDMin:a,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:c-1,screenXL:c,screenXLMin:c,screenXLMax:u-1,screenXXL:u,screenXXLMin:u,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new $n("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new $n("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new $n("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var GT=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $I={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},NG={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},PG={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},VI=(t,e,n)=>{const r=n.getDerivativeToken(t),{override:i}=e,s=GT(e,["override"]);let o=Object.assign(Object.assign({},r),{override:i});return o=zI(o),s&&Object.entries(s).forEach(([a,l])=>{const{theme:c}=l,u=GT(l,["theme"]);let d=u;c&&(d=VI(Object.assign(Object.assign({},o),u),{override:u},c)),o[a]=d}),o};function s_(){const{token:t,hashed:e,theme:n,override:r,cssVar:i}=nt.useContext(jI),s=`${AG}-${e||""}`,o=n||RI,[a,l,c]=qH(o,[Lp,t],{salt:s,override:r,getComputedToken:VI,formatToken:zI,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:$I,ignore:NG,preserve:PG}});return[o,c,e?l:"",a,i]}const EG=(t,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}),UI=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),MG=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),LG=(t,e,n,r)=>{const i=`[class^="${e}"], [class*=" ${e}"]`,s=n?`.${n}`:i,o={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let a={};return r!==!1&&(a={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[s]:Object.assign(Object.assign(Object.assign({},a),o),{[i]:o})}},OG=(t,e)=>({outline:`${vi(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),IG=(t,e)=>({"&:focus-visible":Object.assign({},OG(t,e))}),qI=t=>({[`.${t}`]:Object.assign(Object.assign({},UI()),{[`.${t} .${t}-icon`]:{display:"block"}})}),{genStyleHooks:RG,genComponentStyleHook:Que,genSubStyleComponent:Zue}=CG({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=W.useContext(Yc);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,r,i]=s_();return{theme:t,realToken:e,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:t}=W.useContext(Yc);return t??{}},getResetStyles:(t,e)=>{var n;const r=MG(t);return[r,{"&":r},qI((n=e?.prefix.iconPrefixCls)!==null&&n!==void 0?n:r_)]},getCommonStyle:LG,getCompUnitless:()=>$I}),jG=(t,e)=>{const[n,r]=s_();return Vw({theme:n,token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>e?.nonce,layer:{name:"antd"}},()=>[qI(t)])},DG=jG,FG=Object.assign({},f1),{useId:YT}=FG,BG=()=>"",zG=typeof YT>"u"?BG:YT,$G=zG;function VG(t,e,n){var r;const i=t||{},s=i.inherit===!1||!e?Object.assign(Object.assign({},n5),{hashed:(r=e?.hashed)!==null&&r!==void 0?r:n5.hashed,cssVar:e?.cssVar}):e,o=$G();return eI(()=>{var a,l;if(!t)return e;const c=Object.assign({},s.components);Object.keys(t.components||{}).forEach(h=>{c[h]=Object.assign(Object.assign({},c[h]),t.components[h])});const u=`css-var-${o.replace(/:/g,"")}`,d=((a=i.cssVar)!==null&&a!==void 0?a:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n?.prefixCls},typeof s.cssVar=="object"?s.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((l=i.cssVar)===null||l===void 0?void 0:l.key)||u});return Object.assign(Object.assign(Object.assign({},s),i),{token:Object.assign(Object.assign({},s.token),i.token),components:c,cssVar:d})},[i,s],(a,l)=>a.some((c,u)=>{const d=l[u];return!wH(c,d,!0)}))}var UG=["children"],WI=W.createContext({});function qG(t){var e=t.children,n=Gc(t,UG);return W.createElement(WI.Provider,{value:n},e)}var WG=function(t){Q1(n,t);var e=Z1(n);function n(){return pa(this,n),e.apply(this,arguments)}return ma(n,[{key:"render",value:function(){return this.props.children}}]),n}(W.Component);function HG(t){var e=W.useReducer(function(a){return a+1},0),n=gt(e,2),r=n[1],i=W.useRef(t),s=Ip(function(){return i.current}),o=Ip(function(a){i.current=typeof a=="function"?a(i.current):a,r()});return[s,o]}var za="none",Vg="appear",Ug="enter",qg="leave",XT="none",Us="prepare",gd="start",yd="active",o_="end",HI="prepared";function JT(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function KG(t,e){var n={animationend:JT("Animation","AnimationEnd"),transitionend:JT("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var GG=KG(ya(),typeof window<"u"?window:{}),KI={};if(ya()){var YG=document.createElement("div");KI=YG.style}var Wg={};function GI(t){if(Wg[t])return Wg[t];var e=GG[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var s=n[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in KI)return Wg[t]=e[s],Wg[t]}return""}var YI=GI("animationend"),XI=GI("transitionend"),JI=!!(YI&&XI),QT=YI||"animationend",ZT=XI||"transitionend";function e4(t,e){if(!t)return null;if(Je(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const XG=function(t){var e=W.useRef();function n(i){i&&(i.removeEventListener(ZT,t),i.removeEventListener(QT,t))}function r(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(ZT,t),i.addEventListener(QT,t),e.current=i)}return W.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var QI=ya()?W.useLayoutEffect:W.useEffect;const JG=function(){var t=W.useRef(null);function e(){Rw.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Rw(function(){i<=1?r({isCanceled:function(){return s!==t.current}}):n(r,i-1)});t.current=s}return W.useEffect(function(){return function(){e()}},[]),[n,e]};var QG=[Us,gd,yd,o_],ZG=[Us,HI],ZI=!1,eY=!0;function eR(t){return t===yd||t===o_}const tY=function(t,e,n){var r=Rp(XT),i=gt(r,2),s=i[0],o=i[1],a=JG(),l=gt(a,2),c=l[0],u=l[1];function d(){o(Us,!0)}var h=e?ZG:QG;return QI(function(){if(s!==XT&&s!==o_){var f=h.indexOf(s),p=h[f+1],g=n(s);g===ZI?o(p,!0):p&&c(function(v){function y(){v.isCanceled()||o(p,!0)}g===!0?y():Promise.resolve(g).then(y)})}},[t,s]),W.useEffect(function(){return function(){u()}},[]),[d,s]};function nY(t,e,n,r){var i=r.motionEnter,s=i===void 0?!0:i,o=r.motionAppear,a=o===void 0?!0:o,l=r.motionLeave,c=l===void 0?!0:l,u=r.motionDeadline,d=r.motionLeaveImmediately,h=r.onAppearPrepare,f=r.onEnterPrepare,p=r.onLeavePrepare,g=r.onAppearStart,v=r.onEnterStart,y=r.onLeaveStart,x=r.onAppearActive,S=r.onEnterActive,C=r.onLeaveActive,A=r.onAppearEnd,O=r.onEnterEnd,M=r.onLeaveEnd,N=r.onVisibleChanged,D=Rp(),V=gt(D,2),L=V[0],E=V[1],B=HG(za),I=gt(B,2),Q=I[0],Z=I[1],ne=Rp(null),Y=gt(ne,2),ie=Y[0],q=Y[1],G=Q(),P=W.useRef(!1),U=W.useRef(null);function K(){return n()}var J=W.useRef(!1);function re(){Z(za),q(null,!0)}var se=Ip(function(Oe){var Me=Q();if(Me!==za){var $e=K();if(!(Oe&&!Oe.deadline&&Oe.target!==$e)){var Qe=J.current,it;Me===Vg&&Qe?it=A?.($e,Oe):Me===Ug&&Qe?it=O?.($e,Oe):Me===qg&&Qe&&(it=M?.($e,Oe)),Qe&&it!==!1&&re()}}}),ue=XG(se),de=gt(ue,1),xe=de[0],ve=function(Me){switch(Me){case Vg:return Ke(Ke(Ke({},Us,h),gd,g),yd,x);case Ug:return Ke(Ke(Ke({},Us,f),gd,v),yd,S);case qg:return Ke(Ke(Ke({},Us,p),gd,y),yd,C);default:return{}}},ke=W.useMemo(function(){return ve(G)},[G]),Te=tY(G,!t,function(Oe){if(Oe===Us){var Me=ke[Us];return Me?Me(K()):ZI}if(te in ke){var $e;q((($e=ke[te])===null||$e===void 0?void 0:$e.call(ke,K(),null))||null)}return te===yd&&G!==za&&(xe(K()),u>0&&(clearTimeout(U.current),U.current=setTimeout(function(){se({deadline:!0})},u))),te===HI&&re(),eY}),Ie=gt(Te,2),ge=Ie[0],te=Ie[1],Ge=eR(te);J.current=Ge;var Be=W.useRef(null);QI(function(){if(!(P.current&&Be.current===e)){E(e);var Oe=P.current;P.current=!0;var Me;!Oe&&e&&a&&(Me=Vg),Oe&&e&&s&&(Me=Ug),(Oe&&!e&&c||!Oe&&d&&!e&&c)&&(Me=qg);var $e=ve(Me);Me&&(t||$e[Us])?(Z(Me),ge()):Z(za),Be.current=e}},[e]),W.useEffect(function(){(G===Vg&&!a||G===Ug&&!s||G===qg&&!c)&&Z(za)},[a,s,c]),W.useEffect(function(){return function(){P.current=!1,clearTimeout(U.current)}},[]);var Ae=W.useRef(!1);W.useEffect(function(){L&&(Ae.current=!0),L!==void 0&&G===za&&((Ae.current||L)&&N?.(L),Ae.current=!0)},[L,G]);var Ee=ie;return ke[Us]&&te===gd&&(Ee=He({transition:"none"},Ee)),[G,te,Ee,L??e]}function rY(t){var e=t;Je(t)==="object"&&(e=t.transitionSupport);function n(i,s){return!!(i.motionName&&e&&s!==!1)}var r=W.forwardRef(function(i,s){var o=i.visible,a=o===void 0?!0:o,l=i.removeOnLeave,c=l===void 0?!0:l,u=i.forceRender,d=i.children,h=i.motionName,f=i.leavedClassName,p=i.eventProps,g=W.useContext(WI),v=g.motion,y=n(i,v),x=W.useRef(),S=W.useRef();function C(){try{return x.current instanceof HTMLElement?x.current:sH(S.current)}catch{return null}}var A=nY(y,a,C,i),O=gt(A,4),M=O[0],N=O[1],D=O[2],V=O[3],L=W.useRef(V);V&&(L.current=!0);var E=W.useCallback(function(Y){x.current=Y,cH(s,Y)},[s]),B,I=He(He({},p),{},{visible:a});if(!d)B=null;else if(M===za)V?B=d(He({},I),E):!c&&L.current&&f?B=d(He(He({},I),{},{className:f}),E):u||!c&&!f?B=d(He(He({},I),{},{style:{display:"none"}}),E):B=null;else{var Q;N===Us?Q="prepare":eR(N)?Q="active":N===gd&&(Q="start");var Z=e4(h,"".concat(M,"-").concat(Q));B=d(He(He({},I),{},{className:ko(e4(h,M),Ke(Ke({},Z,Z&&Q),h,typeof h=="string")),style:D}),E)}if(W.isValidElement(B)&&uH(B)){var ne=dH(B);ne||(B=W.cloneElement(B,{ref:E}))}return W.createElement(WG,{ref:S},B)});return r.displayName="CSSMotion",r}const tR=rY(JI);var o5="add",a5="keep",l5="remove",bx="removed";function iY(t){var e;return t&&Je(t)==="object"&&"key"in t?e=t:e={key:t},He(He({},e),{},{key:String(e.key)})}function c5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(iY)}function sY(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,s=c5(t),o=c5(e);s.forEach(function(c){for(var u=!1,d=r;d<i;d+=1){var h=o[d];if(h.key===c.key){r<d&&(n=n.concat(o.slice(r,d).map(function(f){return He(He({},f),{},{status:o5})})),r=d),n.push(He(He({},h),{},{status:a5})),r+=1,u=!0;break}}u||n.push(He(He({},c),{},{status:l5}))}),r<i&&(n=n.concat(o.slice(r).map(function(c){return He(He({},c),{},{status:o5})})));var a={};n.forEach(function(c){var u=c.key;a[u]=(a[u]||0)+1});var l=Object.keys(a).filter(function(c){return a[c]>1});return l.forEach(function(c){n=n.filter(function(u){var d=u.key,h=u.status;return d!==c||h!==l5}),n.forEach(function(u){u.key===c&&(u.status=a5)})}),n}var oY=["component","children","onVisibleChanged","onAllRemoved"],aY=["status"],lY=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function cY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tR,n=function(r){Q1(s,r);var i=Z1(s);function s(){var o;pa(this,s);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=i.call.apply(i,[this].concat(l)),Ke(Ec(o),"state",{keyEntities:[]}),Ke(Ec(o),"removeKey",function(u){o.setState(function(d){var h=d.keyEntities.map(function(f){return f.key!==u?f:He(He({},f),{},{status:bx})});return{keyEntities:h}},function(){var d=o.state.keyEntities,h=d.filter(function(f){var p=f.status;return p!==bx}).length;h===0&&o.props.onAllRemoved&&o.props.onAllRemoved()})}),o}return ma(s,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,c=this.props,u=c.component,d=c.children,h=c.onVisibleChanged;c.onAllRemoved;var f=Gc(c,oY),p=u||W.Fragment,g={};return lY.forEach(function(v){g[v]=f[v],delete f[v]}),delete f.keys,W.createElement(p,f,l.map(function(v,y){var x=v.status,S=Gc(v,aY),C=x===o5||x===a5;return W.createElement(e,bs({},g,{key:S.key,visible:C,eventProps:S,onVisibleChanged:function(O){h?.(O,{key:S.key}),O||a.removeKey(S.key)}}),function(A,O){return d(He(He({},A),{},{index:y}),O)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var c=a.keys,u=l.keyEntities,d=c5(c),h=sY(u,d);return{keyEntities:h.filter(function(f){var p=u.find(function(g){var v=g.key;return f.key===v});return!(p&&p.status===bx&&f.status===l5)})}}}]),s}(W.Component);return Ke(n,"defaultProps",{component:"div"}),n}cY(JI);function uY(t){const{children:e}=t,[,n]=s_(),{motion:r}=n,i=W.useRef(!1);return i.current=i.current||r===!1,i.current?W.createElement(qG,{motion:r},e):e}const dY=()=>null;var hY=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const fY=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let nR;function pY(){return nR||$y}function mY(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const gY=t=>{const{prefixCls:e,iconPrefixCls:n,theme:r,holderRender:i}=t;e!==void 0&&(nR=e),r&&mY(r)&&lG(pY(),r)},yY=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:s,form:o,locale:a,componentSize:l,direction:c,space:u,splitter:d,virtual:h,dropdownMatchSelectWidth:f,popupMatchSelectWidth:p,popupOverflow:g,legacyLocale:v,parentContext:y,iconPrefixCls:x,theme:S,componentDisabled:C,segmented:A,statistic:O,spin:M,calendar:N,carousel:D,cascader:V,collapse:L,typography:E,checkbox:B,descriptions:I,divider:Q,drawer:Z,skeleton:ne,steps:Y,image:ie,layout:q,list:G,mentions:P,modal:U,progress:K,result:J,slider:re,breadcrumb:se,menu:ue,pagination:de,input:xe,textArea:ve,empty:ke,badge:Te,radio:Ie,rate:ge,switch:te,transfer:Ge,avatar:Be,message:Ae,tag:Ee,table:Oe,card:Me,tabs:$e,timeline:Qe,timePicker:it,upload:pt,notification:St,tree:It,colorPicker:et,datePicker:yt,rangePicker:De,flex:Un,wave:At,dropdown:Ni,warning:Ft,tour:Gt,tooltip:Zi,popover:Rt,popconfirm:No,floatButtonGroup:cn,variant:Pi,inputNumber:Ns,treeSelect:un}=t,ut=W.useCallback((Mt,dn)=>{const{prefixCls:qn}=t;if(dn)return dn;const wn=qn||y.getPrefixCls("");return Mt?`${wn}-${Mt}`:wn},[y.getPrefixCls,t.prefixCls]),Tt=x||y.iconPrefixCls||r_,Ei=n||y.csp;DG(Tt,Ei);const Mn=VG(S,y.theme,{prefixCls:ut("")}),ci={csp:Ei,autoInsertSpaceInButton:r,alert:i,anchor:s,locale:a||v,direction:c,space:u,splitter:d,virtual:h,popupMatchSelectWidth:p??f,popupOverflow:g,getPrefixCls:ut,iconPrefixCls:Tt,theme:Mn,segmented:A,statistic:O,spin:M,calendar:N,carousel:D,cascader:V,collapse:L,typography:E,checkbox:B,descriptions:I,divider:Q,drawer:Z,skeleton:ne,steps:Y,image:ie,input:xe,textArea:ve,layout:q,list:G,mentions:P,modal:U,progress:K,result:J,slider:re,breadcrumb:se,menu:ue,pagination:de,empty:ke,badge:Te,radio:Ie,rate:ge,switch:te,transfer:Ge,avatar:Be,message:Ae,tag:Ee,table:Oe,card:Me,tabs:$e,timeline:Qe,timePicker:it,upload:pt,notification:St,tree:It,colorPicker:et,datePicker:yt,rangePicker:De,flex:Un,wave:At,dropdown:Ni,warning:Ft,tour:Gt,tooltip:Zi,popover:Rt,popconfirm:No,floatButtonGroup:cn,variant:Pi,inputNumber:Ns,treeSelect:un},gr=Object.assign({},y);Object.keys(ci).forEach(Mt=>{ci[Mt]!==void 0&&(gr[Mt]=ci[Mt])}),fY.forEach(Mt=>{const dn=t[Mt];dn&&(gr[Mt]=dn)}),typeof r<"u"&&(gr.button=Object.assign({autoInsertSpace:r},gr.button));const Ye=eI(()=>gr,gr,(Mt,dn)=>{const qn=Object.keys(Mt),wn=Object.keys(dn);return qn.length!==wn.length||qn.some(Ar=>Mt[Ar]!==dn[Ar])}),{layer:ui}=W.useContext(pm),es=W.useMemo(()=>({prefixCls:Tt,csp:Ei,layer:ui?"antd":void 0}),[Tt,Ei,ui]);let jt=W.createElement(W.Fragment,null,W.createElement(dY,{dropdownMatchSelectWidth:f}),e);const bn=W.useMemo(()=>{var Mt,dn,qn,wn;return _K(((Mt=rv.Form)===null||Mt===void 0?void 0:Mt.defaultValidateMessages)||{},((qn=(dn=Ye.locale)===null||dn===void 0?void 0:dn.Form)===null||qn===void 0?void 0:qn.defaultValidateMessages)||{},((wn=Ye.form)===null||wn===void 0?void 0:wn.validateMessages)||{},o?.validateMessages||{})},[Ye,o?.validateMessages]);Object.keys(bn).length>0&&(jt=W.createElement(AK.Provider,{value:bn},jt)),a&&(jt=W.createElement(DK,{locale:a,_ANT_MARK__:RK},jt)),(Tt||Ei)&&(jt=W.createElement(n_.Provider,{value:es},jt)),l&&(jt=W.createElement(dG,{size:l},jt)),jt=W.createElement(uY,null,jt);const xn=W.useMemo(()=>{const Mt=Mn||{},{algorithm:dn,token:qn,components:wn,cssVar:Ar}=Mt,Mi=hY(Mt,["algorithm","token","components","cssVar"]),Li=dn&&(!Array.isArray(dn)||dn.length>0)?Fw(dn):RI,Tr={};Object.entries(wn||{}).forEach(([Po,ba])=>{const Nr=Object.assign({},ba);"algorithm"in Nr&&(Nr.algorithm===!0?Nr.theme=Li:(Array.isArray(Nr.algorithm)||typeof Nr.algorithm=="function")&&(Nr.theme=Fw(Nr.algorithm)),delete Nr.algorithm),Tr[Po]=Nr});const Oi=Object.assign(Object.assign({},Lp),qn);return Object.assign(Object.assign({},Mi),{theme:Li,token:Oi,components:Tr,override:Object.assign({override:Oi},Tr),cssVar:Ar})},[Mn]);return S&&(jt=W.createElement(jI.Provider,{value:xn},jt)),Ye.warning&&(jt=W.createElement(CK.Provider,{value:Ye.warning},jt)),C!==void 0&&(jt=W.createElement(cG,{disabled:C},jt)),W.createElement(Yc.Provider,{value:Ye},jt)},mm=t=>{const e=W.useContext(Yc),n=W.useContext(MI);return W.createElement(yY,Object.assign({parentContext:e,legacyLocale:n},t))};mm.ConfigContext=Yc;mm.SizeContext=iv;mm.config=gY;mm.useConfig=hG;Object.defineProperty(mm,"SizeContext",{get:()=>iv});function rR(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function vY(t){return rR(t)instanceof ShadowRoot}function bY(t){return vY(t)?rR(t):null}function xY(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function wY(t,e){ph(t,"[@ant-design/icons] ".concat(e))}function t4(t){return Je(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(Je(t.icon)==="object"||typeof t.icon=="function")}function n4(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[xY(n)]=r}return e},{})}function u5(t,e,n){return n?nt.createElement(t.tag,He(He({key:e},n4(t.attrs)),n),(t.children||[]).map(function(r,i){return u5(r,"".concat(e,"-").concat(t.tag,"-").concat(i))})):nt.createElement(t.tag,He({key:e},n4(t.attrs)),(t.children||[]).map(function(r,i){return u5(r,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function iR(t){return Op(t)[0]}function sR(t){return t?Array.isArray(t)?t:[t]:[]}var SY=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,kY=function(e){var n=W.useContext(n_),r=n.csp,i=n.prefixCls,s=n.layer,o=SY;i&&(o=o.replace(/anticon/g,i)),s&&(o="@layer ".concat(s,` {
`).concat(o,`
}`)),W.useEffect(function(){var a=e.current,l=bY(a);Mc(o,"@ant-design-icons",{prepend:!s,csp:r,attachTo:l})},[])},_Y=["icon","className","onClick","style","primaryColor","secondaryColor"],Xf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function CY(t){var e=t.primaryColor,n=t.secondaryColor;Xf.primaryColor=e,Xf.secondaryColor=n||iR(e),Xf.calculated=!!n}function AY(){return He({},Xf)}var sv=function(e){var n=e.icon,r=e.className,i=e.onClick,s=e.style,o=e.primaryColor,a=e.secondaryColor,l=Gc(e,_Y),c=W.useRef(),u=Xf;if(o&&(u={primaryColor:o,secondaryColor:a||iR(o)}),kY(c),wY(t4(n),"icon should be icon definiton, but got ".concat(n)),!t4(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=He(He({},d),{},{icon:d.icon(u.primaryColor,u.secondaryColor)})),u5(d.icon,"svg-".concat(d.name),He(He({className:r,onClick:i,style:s,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};sv.displayName="IconReact";sv.getTwoToneColors=AY;sv.setTwoToneColors=CY;const a_=sv;function oR(t){var e=sR(t),n=gt(e,2),r=n[0],i=n[1];return a_.setTwoToneColors({primaryColor:r,secondaryColor:i})}function TY(){var t=a_.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var NY=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];oR(zy.primary);var ov=W.forwardRef(function(t,e){var n=t.className,r=t.icon,i=t.spin,s=t.rotate,o=t.tabIndex,a=t.onClick,l=t.twoToneColor,c=Gc(t,NY),u=W.useContext(n_),d=u.prefixCls,h=d===void 0?"anticon":d,f=u.rootClassName,p=ko(f,h,Ke(Ke({},"".concat(h,"-").concat(r.name),!!r.name),"".concat(h,"-spin"),!!i||r.name==="loading"),n),g=o;g===void 0&&a&&(g=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,y=sR(l),x=gt(y,2),S=x[0],C=x[1];return W.createElement("span",bs({role:"img","aria-label":r.name},c,{ref:e,tabIndex:g,onClick:a,className:p}),W.createElement(a_,{icon:r,primaryColor:S,secondaryColor:C,style:v}))});ov.displayName="AntdIcon";ov.getTwoToneColor=TY;ov.setTwoToneColor=oR;const PY=ov;var EY=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,MY=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,LY="".concat(EY," ").concat(MY).split(/[\s\n]+/),OY="aria-",IY="data-";function r4(t,e){return t.indexOf(e)===0}function RY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=He({},e);var r={};return Object.keys(t).forEach(function(i){(n.aria&&(i==="role"||r4(i,OY))||n.data&&r4(i,IY)||n.attr&&LY.includes(i))&&(r[i]=t[i])}),r}const jY=(t,e,n)=>nt.isValidElement(t)?nt.cloneElement(t,typeof n=="function"?n(t.props||{}):n):e;function i4(t,e){return jY(t,t,e)}var st={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=st.F1&&n<=st.F12)return!1;switch(n){case st.ALT:case st.CAPS_LOCK:case st.CONTEXT_MENU:case st.CTRL:case st.DOWN:case st.END:case st.ESC:case st.HOME:case st.INSERT:case st.LEFT:case st.MAC_FF_META:case st.META:case st.NUMLOCK:case st.NUM_CENTER:case st.PAGE_DOWN:case st.PAGE_UP:case st.PAUSE:case st.PRINT_SCREEN:case st.RIGHT:case st.SHIFT:case st.UP:case st.WIN_KEY:case st.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=st.ZERO&&e<=st.NINE||e>=st.NUM_ZERO&&e<=st.NUM_MULTIPLY||e>=st.A&&e<=st.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case st.SPACE:case st.QUESTION_MARK:case st.NUM_PLUS:case st.NUM_MINUS:case st.NUM_PERIOD:case st.NUM_DIVISION:case st.SEMICOLON:case st.DASH:case st.EQUALS:case st.COMMA:case st.PERIOD:case st.SLASH:case st.APOSTROPHE:case st.SINGLE_QUOTE:case st.OPEN_SQUARE_BRACKET:case st.BACKSLASH:case st.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const xx=()=>({height:0,opacity:0}),s4=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},DY=t=>({height:t?t.offsetHeight:0}),wx=(t,e)=>e?.deadline===!0||e.propertyName==="height",FY=(t=$y)=>({motionName:`${t}-motion-collapse`,onAppearStart:xx,onEnterStart:xx,onAppearActive:s4,onEnterActive:s4,onLeaveStart:DY,onLeaveActive:xx,onAppearEnd:wx,onEnterEnd:wx,onLeaveEnd:wx,motionDeadline:500}),BY=FY;function o4(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}const zY=t=>{const e=nt.useContext(iv);return nt.useMemo(()=>t?typeof t=="string"?t??e:typeof t=="function"?t(e):e:e,[t,e])},$Y=zY;var VY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const UY=VY;var qY=function(e,n){return W.createElement(PY,bs({},e,{ref:n,icon:UY}))},WY=W.forwardRef(qY);const HY=WY;var aR=nt.forwardRef(function(t,e){var n=t.prefixCls,r=t.forceRender,i=t.className,s=t.style,o=t.children,a=t.isActive,l=t.role,c=t.classNames,u=t.styles,d=nt.useState(a||r),h=gt(d,2),f=h[0],p=h[1];return nt.useEffect(function(){(r||a)&&p(!0)},[r,a]),f?nt.createElement("div",{ref:e,className:ko("".concat(n,"-content"),Ke(Ke({},"".concat(n,"-content-active"),a),"".concat(n,"-content-inactive"),!a),i),style:s,role:l},nt.createElement("div",{className:ko("".concat(n,"-content-box"),c?.body),style:u?.body},o)):null});aR.displayName="PanelContent";var KY=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],lR=nt.forwardRef(function(t,e){var n=t.showArrow,r=n===void 0?!0:n,i=t.headerClass,s=t.isActive,o=t.onItemClick,a=t.forceRender,l=t.className,c=t.classNames,u=c===void 0?{}:c,d=t.styles,h=d===void 0?{}:d,f=t.prefixCls,p=t.collapsible,g=t.accordion,v=t.panelKey,y=t.extra,x=t.header,S=t.expandIcon,C=t.openMotion,A=t.destroyInactivePanel,O=t.children,M=Gc(t,KY),N=p==="disabled",D=y!=null&&typeof y!="boolean",V=Ke(Ke(Ke({onClick:function(){o?.(v)},onKeyDown:function(ne){(ne.key==="Enter"||ne.keyCode===st.ENTER||ne.which===st.ENTER)&&o?.(v)},role:g?"tab":"button"},"aria-expanded",s),"aria-disabled",N),"tabIndex",N?-1:0),L=typeof S=="function"?S(t):nt.createElement("i",{className:"arrow"}),E=L&&nt.createElement("div",bs({className:"".concat(f,"-expand-icon")},["header","icon"].includes(p)?V:{}),L),B=ko("".concat(f,"-item"),Ke(Ke({},"".concat(f,"-item-active"),s),"".concat(f,"-item-disabled"),N),l),I=ko(i,"".concat(f,"-header"),Ke({},"".concat(f,"-collapsible-").concat(p),!!p),u.header),Q=He({className:I,style:h.header},["header","icon"].includes(p)?{}:V);return nt.createElement("div",bs({},M,{ref:e,className:B}),nt.createElement("div",Q,r&&E,nt.createElement("span",bs({className:"".concat(f,"-header-text")},p==="header"?V:{}),x),D&&nt.createElement("div",{className:"".concat(f,"-extra")},y)),nt.createElement(tR,bs({visible:s,leavedClassName:"".concat(f,"-content-hidden")},C,{forceRender:a,removeOnLeave:A}),function(Z,ne){var Y=Z.className,ie=Z.style;return nt.createElement(aR,{ref:ne,prefixCls:f,className:Y,classNames:u,style:ie,styles:h,isActive:s,forceRender:a,role:g?"tabpanel":void 0},O)}))}),GY=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],YY=function(e,n){var r=n.prefixCls,i=n.accordion,s=n.collapsible,o=n.destroyInactivePanel,a=n.onItemClick,l=n.activeKey,c=n.openMotion,u=n.expandIcon;return e.map(function(d,h){var f=d.children,p=d.label,g=d.key,v=d.collapsible,y=d.onItemClick,x=d.destroyInactivePanel,S=Gc(d,GY),C=String(g??h),A=v??s,O=x??o,M=function(V){A!=="disabled"&&(a(V),y?.(V))},N=!1;return i?N=l[0]===C:N=l.indexOf(C)>-1,nt.createElement(lR,bs({},S,{prefixCls:r,key:C,panelKey:C,isActive:N,accordion:i,openMotion:c,expandIcon:u,header:p,collapsible:A,onItemClick:M,destroyInactivePanel:O}),f)})},XY=function(e,n,r){if(!e)return null;var i=r.prefixCls,s=r.accordion,o=r.collapsible,a=r.destroyInactivePanel,l=r.onItemClick,c=r.activeKey,u=r.openMotion,d=r.expandIcon,h=e.key||String(n),f=e.props,p=f.header,g=f.headerClass,v=f.destroyInactivePanel,y=f.collapsible,x=f.onItemClick,S=!1;s?S=c[0]===h:S=c.indexOf(h)>-1;var C=y??o,A=function(N){C!=="disabled"&&(l(N),x?.(N))},O={key:h,panelKey:h,header:p,headerClass:g,isActive:S,prefixCls:i,destroyInactivePanel:v??a,openMotion:u,accordion:s,children:e.props.children,onItemClick:A,expandIcon:d,collapsible:C};return typeof e.type=="string"?e:(Object.keys(O).forEach(function(M){typeof O[M]>"u"&&delete O[M]}),nt.cloneElement(e,O))};function JY(t,e,n){return Array.isArray(t)?YY(t,n):Dy(e).map(function(r,i){return XY(r,i,n)})}function QY(t){var e=t;if(!Array.isArray(e)){var n=Je(e);e=n==="number"||n==="string"?[e]:[]}return e.map(function(r){return String(r)})}var ZY=nt.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-collapse":n,i=t.destroyInactivePanel,s=i===void 0?!1:i,o=t.style,a=t.accordion,l=t.className,c=t.children,u=t.collapsible,d=t.openMotion,h=t.expandIcon,f=t.activeKey,p=t.defaultActiveKey,g=t.onChange,v=t.items,y=ko(r,l),x=yG([],{value:f,onChange:function(D){return g?.(D)},defaultValue:p,postState:QY}),S=gt(x,2),C=S[0],A=S[1],O=function(D){return A(function(){if(a)return C[0]===D?[]:[D];var V=C.indexOf(D),L=V>-1;return L?C.filter(function(E){return E!==D}):[].concat(ga(C),[D])})};ph(!c,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var M=JY(v,c,{prefixCls:r,accordion:a,openMotion:d,expandIcon:h,collapsible:u,destroyInactivePanel:s,onItemClick:O,activeKey:C});return nt.createElement("div",bs({ref:e,className:y,style:o,role:a?"tablist":void 0},RY(t,{aria:!0,data:!0})),M)});const l_=Object.assign(ZY,{Panel:lR});l_.Panel;const eX=W.forwardRef((t,e)=>{const{getPrefixCls:n}=W.useContext(Yc),{prefixCls:r,className:i,showArrow:s=!0}=t,o=n("collapse",r),a=ko({[`${o}-no-arrow`]:!s},i);return W.createElement(l_.Panel,Object.assign({ref:e},t,{prefixCls:o,className:a}))}),tX=eX,nX=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),rX=nX,iX=t=>{const{componentCls:e,contentBg:n,padding:r,headerBg:i,headerPadding:s,collapseHeaderPaddingSM:o,collapseHeaderPaddingLG:a,collapsePanelBorderRadius:l,lineWidth:c,lineType:u,colorBorder:d,colorText:h,colorTextHeading:f,colorTextDisabled:p,fontSizeLG:g,lineHeight:v,lineHeightLG:y,marginSM:x,paddingSM:S,paddingLG:C,paddingXS:A,motionDurationSlow:O,fontSizeIcon:M,contentPadding:N,fontHeight:D,fontHeightLG:V}=t,L=`${vi(c)} ${u} ${d}`;return{[e]:Object.assign(Object.assign({},EG(t)),{backgroundColor:i,border:L,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:L,"&:first-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`${vi(l)} ${vi(l)} 0 0`}},"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${vi(l)} ${vi(l)}`}},[`> ${e}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:s,color:f,lineHeight:v,cursor:"pointer",transition:`all ${O}, visibility 0s`},IG(t)),{[`> ${e}-header-text`]:{flex:"auto"},[`${e}-expand-icon`]:{height:D,display:"flex",alignItems:"center",paddingInlineEnd:x},[`${e}-arrow`]:Object.assign(Object.assign({},UI()),{fontSize:M,transition:`transform ${O}`,svg:{transition:`transform ${O}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}}),[`${e}-collapsible-header`]:{cursor:"default",[`${e}-header-text`]:{flex:"none",cursor:"pointer"}},[`${e}-collapsible-icon`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:h,backgroundColor:n,borderTop:L,[`& > ${e}-content-box`]:{padding:N},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:o,paddingInlineStart:A,[`> ${e}-expand-icon`]:{marginInlineStart:t.calc(S).sub(A).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:S}}},"&-large":{[`> ${e}-item`]:{fontSize:g,lineHeight:y,[`> ${e}-header`]:{padding:a,paddingInlineStart:r,[`> ${e}-expand-icon`]:{height:V,marginInlineStart:t.calc(C).sub(r).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:C}}},[`${e}-item:last-child`]:{borderBottom:0,[`> ${e}-content`]:{borderRadius:`0 0 ${vi(l)} ${vi(l)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:p,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:x}}}}})}},sX=t=>{const{componentCls:e}=t,n=`> ${e}-item > ${e}-header ${e}-arrow`;return{[`${e}-rtl`]:{[n]:{transform:"rotate(180deg)"}}}},oX=t=>{const{componentCls:e,headerBg:n,borderlessContentPadding:r,borderlessContentBg:i,colorBorder:s}=t;return{[`${e}-borderless`]:{backgroundColor:n,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${s}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:i,borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{padding:r}}}},aX=t=>{const{componentCls:e,paddingSM:n}=t;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:n}}}}}},lX=t=>({headerPadding:`${t.paddingSM}px ${t.padding}px`,headerBg:t.colorFillAlter,contentPadding:`${t.padding}px 16px`,contentBg:t.colorBgContainer,borderlessContentPadding:`${t.paddingXXS}px 16px ${t.padding}px`,borderlessContentBg:"transparent"}),cX=RG("Collapse",t=>{const e=i_(t,{collapseHeaderPaddingSM:`${vi(t.paddingXS)} ${vi(t.paddingSM)}`,collapseHeaderPaddingLG:`${vi(t.padding)} ${vi(t.paddingLG)}`,collapsePanelBorderRadius:t.borderRadiusLG});return[iX(e),oX(e),aX(e),sX(e),rX(e)]},lX),uX=W.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r,expandIcon:i,className:s,style:o}=sG("collapse"),{prefixCls:a,className:l,rootClassName:c,style:u,bordered:d=!0,ghost:h,size:f,expandIconPosition:p="start",children:g,destroyInactivePanel:v,destroyOnHidden:y,expandIcon:x}=t,S=$Y(Q=>{var Z;return(Z=f??Q)!==null&&Z!==void 0?Z:"middle"}),C=n("collapse",a),A=n(),[O,M,N]=cX(C),D=W.useMemo(()=>p==="left"?"start":p==="right"?"end":p,[p]),V=x??i,L=W.useCallback((Q={})=>{const Z=typeof V=="function"?V(Q):W.createElement(HY,{rotate:Q.isActive?r==="rtl"?-90:90:void 0,"aria-label":Q.isActive?"expanded":"collapsed"});return i4(Z,()=>{var ne;return{className:ko((ne=Z?.props)===null||ne===void 0?void 0:ne.className,`${C}-arrow`)}})},[V,C]),E=ko(`${C}-icon-position-${D}`,{[`${C}-borderless`]:!d,[`${C}-rtl`]:r==="rtl",[`${C}-ghost`]:!!h,[`${C}-${S}`]:S!=="middle"},s,l,c,M,N),B=Object.assign(Object.assign({},BY(A)),{motionAppear:!1,leavedClassName:`${C}-content-hidden`}),I=W.useMemo(()=>g?Dy(g).map((Q,Z)=>{var ne,Y;const ie=Q.props;if(ie?.disabled){const q=(ne=Q.key)!==null&&ne!==void 0?ne:String(Z),G=Object.assign(Object.assign({},o4(Q.props,["disabled"])),{key:q,collapsible:(Y=ie.collapsible)!==null&&Y!==void 0?Y:"disabled"});return i4(Q,G)}return Q}):null,[g]);return O(W.createElement(l_,Object.assign({ref:e,openMotion:B},o4(t,["rootClassName"]),{expandIcon:L,prefixCls:C,className:E,style:Object.assign(Object.assign({},o),u),destroyInactivePanel:y??v}),I))}),dX=Object.assign(uX,{Panel:tX}),hX=({currentStrand:t,learningPathChoice:e="critical-angle"})=>{const n=`strand${t}`,r=(()=>{const a=KW?.[e];if(!a||typeof a!="object")return[];const l=a[n];return!l||!Array.isArray(l)?[]:l})();if(r.length===0)return w.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:w.jsx("p",{className:"text-yellow-800 text-sm",children:" Guided examples are being prepared for this strand. Check back soon or explore the other tabs!"})});const i=r.reduce((a,l)=>{const c=`Level ${l.level}`;return a[c]||(a[c]=[]),a[c].push(l),a},{}),o=((a,l)=>({"critical-angle":{1:{name:"TIR Principles & Laws",description:"Understanding the fundamental laws governing total internal reflection"},2:{name:"Understanding TIR Phenomena",description:"Comprehending why and when total internal reflection occurs"},3:{name:"Real-World Applications",description:"Exploring practical uses of total internal reflection in technology and nature"},4:{name:"Analysis & Problem Solving",description:"Applying mathematical and analytical skills to solve TIR problems"}},"fiber-optics":{1:{name:"Fiber Optic Principles",description:"Understanding how light travels through optical fibers"},2:{name:"Fiber Optic Technology",description:"Exploring the engineering and physics behind fiber optic systems"},3:{name:"Applications & Impact",description:"Examining fiber optic applications and their societal impact"},4:{name:"Design & Innovation",description:"Applying fiber optic principles to solve design challenges"}}})[l]?.[a]||{name:`Strand ${a}`,description:"Strand content"})(t,e);return w.jsxs("div",{className:"guided-example-panel",children:[w.jsxs("div",{className:"mb-4",children:[w.jsxs("h2",{className:"font-semibold text-lg mb-2 text-purple-800",children:[" ",o.name]}),w.jsx("p",{className:"text-gray-700 text-sm mb-3",children:o.description}),w.jsx("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:w.jsxs("p",{className:"text-purple-700 text-sm",children:[w.jsx("strong",{children:"Learning Path:"})," ",e==="critical-angle"?"Discovering Critical Angles":"How Fibre Optics Work"]})})]}),w.jsx(dX,{accordion:!0,items:Object.entries(i).sort(([a],[l])=>{const c=parseInt(a.replace("Level ","")),u=parseInt(l.replace("Level ",""));return c-u}).map(([a,l])=>({key:a,label:w.jsxs("div",{className:"flex items-center justify-between w-full",children:[w.jsxs("span",{className:"font-medium",children:[a," Examples"]}),w.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:[l.length," question",l.length!==1?"s":""]})]}),children:w.jsx("div",{className:"space-y-4",children:l.map((c,u)=>w.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[w.jsx("div",{className:"flex items-start justify-between mb-3",children:w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded font-medium",children:c.commandTerm.toUpperCase()}),w.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:c.type.replace("-"," ")})]}),w.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:c.question})]})}),c.options&&Array.isArray(c.options)&&c.options.length>0&&w.jsxs("div",{className:"mb-3",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Options:"}),w.jsx("ul",{className:"space-y-1 text-sm",children:c.options.map((d,h)=>w.jsxs("li",{className:`p-2 rounded ${d===c.correctAnswer?"bg-green-50 border border-green-200 text-green-800":"bg-gray-50"}`,children:[w.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+h),")"]})," ",d,d===c.correctAnswer&&w.jsx("span",{className:"ml-2 text-green-600 text-xs",children:" Correct"})]},h))})]}),w.jsxs("div",{className:"mb-3",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:c.type==="mcq"?"Correct Answer:":"Model Answer:"}),w.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded text-sm text-green-800",children:c.correctAnswer})]}),w.jsxs("div",{className:"mb-3",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Explanation:"}),w.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 p-3 rounded",children:c.explanation})]}),w.jsxs("div",{className:"mb-3",children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Terms:"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(c.keywords)&&c.keywords.map((d,h)=>w.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded",children:d},h))})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assessment Focus:"}),w.jsx("div",{className:"space-y-1",children:Array.isArray(c.rubricMapping)&&c.rubricMapping.map((d,h)=>w.jsxs("div",{className:"text-xs text-purple-700 bg-purple-50 px-2 py-1 rounded",children:[" ",d]},h))})]})]},c.id))})}))}),w.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[w.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" How to Use These Examples:"}),w.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[w.jsxs("li",{children:[" Study the ",w.jsx("strong",{children:"command terms"})," (define, explain, analyze) to understand what's expected"]}),w.jsxs("li",{children:[" Notice how ",w.jsx("strong",{children:"model answers"})," use scientific vocabulary appropriately"]}),w.jsxs("li",{children:[" Pay attention to the ",w.jsx("strong",{children:"key terms"})," that demonstrate knowledge"]}),w.jsx("li",{children:' Use these as inspiration for your own responses in the "Your Response" tab'})]})]})]})};function xr(t){this.content=t}xr.prototype={constructor:xr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new xr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new xr(n)},addToStart:function(t,e){return new xr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new xr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new xr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=xr.from(t),t.size?new xr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=xr.from(t),t.size?new xr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=xr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};xr.from=function(t){if(t instanceof xr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new xr(e)};function cR(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=cR(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function uR(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=uR(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Ce{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ce(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ce(r,i)}cutByIndex(e,n){return e==n?Ce.empty:e==0&&n==this.content.length?this:new Ce(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ce(i,s)}addToStart(e){return new Ce([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ce(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return cR(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return uR(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Hg(0,e);if(e==this.size)return Hg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Hg(r+1,o):Hg(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ce.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ce(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ce.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ce(n||e,r)}static from(e){if(!e)return Ce.empty;if(e instanceof Ce)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ce([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ce.empty=new Ce([],0);const Sx={index:0,offset:0};function Hg(t,e){return Sx.index=t,Sx.offset=e,Sx}function Vy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Vy(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Vy(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Kt=class d5{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Vy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return d5.none;if(e instanceof d5)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Kt.none=[];class Uy extends Error{}class je{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=hR(this.content,e+this.openStart,n);return r&&new je(r,this.openStart,this.openEnd)}removeBetween(e,n){return new je(dR(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return je.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new je(Ce.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new je(e,r,i)}}je.empty=new je(Ce.empty,0,0);function dR(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(dR(s.content,e-i-1,n-i-1)))}function hR(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=hR(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function fX(t,e,n){if(n.openStart>t.depth)throw new Uy("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Uy("Inconsistent open depths");return fR(t,e,n,0)}function fR(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=fR(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Ic(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=pX(n,t);return Ic(s,mR(t,o,a,e,r))}else return Ic(s,qy(t,e,r))}function pR(t,e){if(!e.type.compatibleContent(t.type))throw new Uy("Cannot join "+e.type.name+" onto "+t.type.name)}function h5(t,e,n){let r=t.node(n);return pR(r,e.node(n)),r}function Oc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Jf(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Oc(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Oc(i.child(a),r);e&&e.depth==n&&e.textOffset&&Oc(e.nodeBefore,r)}function Ic(t,e){return t.type.checkContent(e),t.copy(e)}function mR(t,e,n,r,i){let s=t.depth>i&&h5(t,e,i+1),o=r.depth>i&&h5(n,r,i+1),a=[];return Jf(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(pR(s,o),Oc(Ic(s,mR(t,e,n,r,i+1)),a)):(s&&Oc(Ic(s,qy(t,e,i+1)),a),Jf(e,n,i,a),o&&Oc(Ic(o,qy(n,r,i+1)),a)),Jf(r,null,i,a),new Ce(a)}function qy(t,e,n){let r=[];if(Jf(null,t,n,r),t.depth>n){let i=h5(t,e,n+1);Oc(Ic(i,qy(t,e,n+1)),r)}return Jf(e,null,n,r),new Ce(r)}function pX(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ce.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class jp{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Kt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Wy(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new jp(n,r,s)}static resolveCached(e,n){let r=a4.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else a4.set(e,r=new mX);let i=r.elts[r.i]=jp.resolve(e,n);return r.i=(r.i+1)%gX,i}}class mX{constructor(){this.elts=[],this.i=0}}const gX=12,a4=new WeakMap;class Wy{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const yX=Object.create(null);let yl=class f5{constructor(e,n,r,i=Kt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ce.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Vy(this.attrs,n||e.defaultAttrs||yX)&&Kt.sameSet(this.marks,r||Kt.none)}copy(e=null){return e==this.content?this:new f5(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new f5(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return je.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new je(c,i.depth-o,s.depth-o)}replace(e,n,r){return fX(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return jp.resolveCached(this,e)}resolveNoCache(e){return jp.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gR(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ce.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Kt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ce.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};yl.prototype.text=void 0;class Hy extends yl{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gR(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Hy(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Hy(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function gR(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Xc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new vX(e,n);if(r.next==null)return Xc.empty;let i=yR(r);r.next&&r.err("Unexpected trailing text");let s=CX(_X(i));return AX(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ce.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Xc.empty=new Xc(!0);class vX{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function yR(t){let e=[];do e.push(bX(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function bX(t){let e=[];do e.push(xX(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function xX(t){let e=kX(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=wX(t,e);else break;return e}function l4(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function wX(t,e){let n=l4(t),r=n;return t.eat(",")&&(t.next!="}"?r=l4(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function SX(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function kX(t){if(t.eat("(")){let e=yR(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=SX(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function _X(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function vR(t,e){return e-t}function c4(t,e){let n=[];return r(e),n.sort(vR);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function CX(t){let e=Object.create(null);return n(c4(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);c4(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Xc(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(vR);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function AX(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function bR(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function xR(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function wR(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function SR(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new NX(t,r,e[r]);return n}let u4=class kR{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=SR(e,r.attrs),this.defaultAttrs=bR(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:xR(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yl(this,this.computeAttrs(e),Ce.from(n),Kt.setFrom(r))}createChecked(e=null,n,r){return n=Ce.from(n),this.checkContent(n),new yl(this,this.computeAttrs(e),n,Kt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ce.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ce.empty,!0);return s?new yl(this,e,n.append(s),Kt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){wR(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Kt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new kR(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function TX(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class NX{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?TX(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class av{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=SR(e,i.attrs),this.excluded=null;let s=bR(this.attrs);this.instance=s?new Kt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Kt(this,xR(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new av(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){wR(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class _R{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=xr.from(e.nodes),n.marks=xr.from(e.marks||{}),this.nodes=u4.compile(this.spec.nodes,this),this.marks=av.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Xc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?d4(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:d4(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof u4){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Hy(r,r.defaultAttrs,e,Kt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return yl.fromJSON(this,e)}markFromJSON(e){return Kt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function d4(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function PX(t){return t.tag!=null}function EX(t){return t.style!=null}let Qf=class p5{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(PX(i))this.tags.push(i);else if(EX(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new f4(this,n,!1);return r.addAll(e,Kt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new f4(this,n,!0);return r.addAll(e,Kt.none,n.from,n.to),je.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(OX(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=p4(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=p4(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new p5(e,p5.schemaRules(e)))}};const CR={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},MX={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},AR={ol:!0,ul:!0},Dp=1,m5=2,Zf=4;function h4(t,e,n){return e!=null?(e?Dp:0)|(e==="full"?m5:0):t&&t.whitespace=="pre"?Dp|m5:n&~Zf}class Kg{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Kt.none,this.match=s||(o&Zf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ce.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Dp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ce.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!CR.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class f4{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=h4(null,n.preserveWhitespace,0)|(r?Zf:0);i?s=new Kg(i.type,i.attrs,Kt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Kg(null,null,Kt.none,!0,null,o):s=new Kg(e.schema.topNodeType,null,Kt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&m5?"full":this.localPreserveWS||(i.options&Dp)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;AR.hasOwnProperty(o)&&this.parser.normalizeLists&&LX(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:MX.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(CR.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Kt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):m4(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=h4(e,s,o.options);o.options&Zf&&o.content.length==0&&(a|=Zf);let l=Kt.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):m4(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Kg(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Dp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function LX(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&AR.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function OX(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function p4(t){let e={};for(let n in t)e[n]=t[n];return e}function m4(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class au{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=kx(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=q0(kx(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&q0(kx(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return q0(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new au(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=g4(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return g4(e.marks)}}function g4(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function kx(t){return t.document||window.document}const y4=new WeakMap;function IX(t){let e=y4.get(t);return e===void 0&&y4.set(t,e=RX(t)),e}function RX(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function q0(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=IX(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=q0(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const TR=65535,NR=Math.pow(2,16);function jX(t,e){return t+e*NR}function v4(t){return t&TR}function DX(t){return(t-(t&TR))/NR}const PR=1,ER=2,W0=4,MR=8;class g5{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&MR)>0}get deletedBefore(){return(this.delInfo&(PR|W0))>0}get deletedAfter(){return(this.delInfo&(ER|W0))>0}get deletedAcross(){return(this.delInfo&W0)>0}}class Vi{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Vi.empty)return Vi.empty}recover(e){let n=0,r=v4(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+DX(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,f=l+i+(h<0?0:u);if(r)return f;let p=e==(n<0?l:d)?null:jX(a/3,e-l),g=e==l?ER:e==d?PR:W0;return(n<0?e!=l:e!=d)&&(g|=MR),new g5(f,g,p)}i+=u-c}return r?e+i:new g5(e+i,0,null)}touches(e,n){let r=0,i=v4(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Vi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Vi.empty:new Vi(e<0?[0,-e,0]:[0,0,e])}}Vi.empty=new Vi([]);class Fp{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Fp(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Fp;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new g5(e,i,null)}}const _x=Object.create(null);class Gr{getMap(){return Vi.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=_x[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in _x)throw new RangeError("Duplicate use of step JSON ID "+e);return _x[e]=n,n.prototype.jsonID=e,n}}class Xn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Xn(e,null)}static fail(e){return new Xn(null,e)}static fromReplace(e,n,r,i){try{return Xn.ok(e.replace(n,r,i))}catch(s){if(s instanceof Uy)return Xn.fail(s.message);throw s}}}function c_(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(c_(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ce.fromArray(r)}class nl extends Gr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new je(c_(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Xn.fromReplace(e,this.from,this.to,s)}invert(){return new mo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new nl(n.pos,r.pos,this.mark)}merge(e){return e instanceof nl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new nl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new nl(n.from,n.to,e.markFromJSON(n.mark))}}Gr.jsonID("addMark",nl);class mo extends Gr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new je(c_(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Xn.fromReplace(e,this.from,this.to,r)}invert(){return new nl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new mo(n.pos,r.pos,this.mark)}merge(e){return e instanceof mo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new mo(n.from,n.to,e.markFromJSON(n.mark))}}Gr.jsonID("removeMark",mo);class rl extends Gr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Xn.fromReplace(e,this.pos,this.pos+1,new je(Ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new rl(this.pos,n.marks[i]);return new rl(this.pos,this.mark)}}return new Jc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new rl(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new rl(n.pos,e.markFromJSON(n.mark))}}Gr.jsonID("addNodeMark",rl);class Jc extends Gr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Xn.fromReplace(e,this.pos,this.pos+1,new je(Ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new rl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Jc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Jc(n.pos,e.markFromJSON(n.mark))}}Gr.jsonID("removeNodeMark",Jc);class ur extends Gr{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&y5(e,this.from,this.to)?Xn.fail("Structure replace would overwrite content"):Xn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Vi([this.from,this.to-this.from,this.slice.size])}invert(e){return new ur(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ur(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ur)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?je.empty:new je(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ur(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?je.empty:new je(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ur(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ur(n.from,n.to,je.fromJSON(e,n.slice),!!n.structure)}}Gr.jsonID("replace",ur);class fr extends Gr{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(y5(e,this.from,this.gapFrom)||y5(e,this.gapTo,this.to)))return Xn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Xn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Xn.fromReplace(e,this.from,this.to,r):Xn.fail("Content does not fit in gap")}getMap(){return new Vi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new fr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new fr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fr(n.from,n.to,n.gapFrom,n.gapTo,je.fromJSON(e,n.slice),n.insert,!!n.structure)}}Gr.jsonID("replaceAround",fr);function y5(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function FX(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(o&&o.to==h&&o.mark.eq(d[g])?o.to=f:i.push(o=new mo(h,f,d[g])));a&&a.to==h?a.to=f:s.push(a=new nl(h,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function BX(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof av){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&d.eq(i[f].style)&&(h=p)}h?(h.to=c,h.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new mo(o.from,o.to,o.style)))}function u_(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new ur(a,u,je.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new mo(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new je(Ce.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new ur(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(Ce.empty,!0);t.replace(a,a,new je(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function zX(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function gh(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!zX(i,s,o))break}return null}function $X(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Ce.empty,d=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,u=Ce.from(r.node(p).copy(u)),d++):l--;let h=Ce.empty,f=0;for(let p=s,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,h=Ce.from(i.node(p).copy(h)),f++):c++;t.step(new fr(l,c,o,a,new je(u.append(h),d,f),u.size-d,!0))}function d_(t,e,n=null,r=t){let i=VX(t,e),s=i&&UX(r,e);return s?i.map(b4).concat({type:e,attrs:n}).concat(s.map(b4)):null}function b4(t){return{type:t,attrs:null}}function VX(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function UX(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function qX(t,e,n){let r=Ce.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ce.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new fr(i,s,i,s,new je(r,0,0),n.length,!0))}function WX(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&HX(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&OR(t,o,a,s),u_(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new fr(d,h,d+1,h-1,new je(Ce.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&LR(t,o,a,s),!1}})}function LR(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function OR(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function HX(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function KX(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new fr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new je(Ce.from(o),0,0),1,!0))}function Ed(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function GX(t,e,n=1,r){let i=t.doc.resolve(e),s=Ce.empty,o=Ce.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Ce.from(i.node(a).copy(s));let u=r&&r[c];o=Ce.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new ur(e,e,new je(s.append(o),n,n),!0))}function Fl(t,e){let n=t.resolve(e),r=n.index();return IR(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function YX(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function IR(t,e){return!!(t&&e&&!t.isLeaf&&YX(t,e))}function lv(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&IR(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function XX(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);OR(t,u.node(),u.before(),a)}o.inlineContent&&u_(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new ur(c,l.map(e+n,-1),je.empty,!0)),r===!0){let u=t.doc.resolve(c);LR(t,u.node(),u.before(),t.steps.length)}return t}function JX(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function RR(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function cv(t,e,n=e,r=je.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return jR(i,s,r)?new ur(e,n,r):new QX(i,s,r).fit()}function jR(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class QX{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ce.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ce.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new je(s,o,a);return e>-1?new fr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ur(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Cx(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Ce.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Cx(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new je(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Cx(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new je(Cf(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new je(Cf(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),v=d.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(d=v,u.push(DR(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Af(this.placed,n,Ce.from(u)),this.frontier[n].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<f;g++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=p?e==0?je.empty:new je(Cf(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new je(Cf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Ax(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Ax(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Ax(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Af(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Af(this.placed,this.depth,Ce.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ce.empty,!0);n.childCount&&(this.placed=Af(this.placed,this.frontier.length,n))}}function Cf(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Cf(t.firstChild.content,e-1,n)))}function Af(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Af(t.lastChild.content,e-1,n)))}function Cx(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function DR(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,DR(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ce.empty,!0)))),t.copy(r)}function Ax(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!ZX(n,s.content,o)?a:null}function ZX(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function eJ(t){return t.spec.defining||t.spec.definingForContent}function tJ(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(jR(i,s,r))return t.step(new ur(e,n,r));let o=BR(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h],p=eJ(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<o.length;g++){let v=o[(g+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let x=i.node(v-1),S=i.index(v-1);if(x.canReplaceWith(S,S,p.type,p.marks))return t.replace(i.before(v),y?s.after(v):n,new je(FR(r.content,0,r.openStart,f),f,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let f=o[h];f<0||(e=i.before(f),n=s.after(f))}}function FR(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(FR(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ce.empty,!0))}return t}function nJ(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=JX(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new je(Ce.from(r),0,0))}function rJ(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=BR(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function BR(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Md extends Gr{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Xn.fromReplace(e,this.pos,this.pos+1,new je(Ce.from(i),0,n.isLeaf?0:1))}getMap(){return Vi.empty}invert(e){return new Md(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Md(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Md(n.pos,n.attr,n.value)}}Gr.jsonID("attr",Md);class Bp extends Gr{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Xn.ok(r)}getMap(){return Vi.empty}invert(e){return new Bp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Bp(n.attr,n.value)}}Gr.jsonID("docAttr",Bp);let Qd=class extends Error{};Qd=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Qd.prototype=Object.create(Error.prototype);Qd.prototype.constructor=Qd;Qd.prototype.name="TransformError";class zR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Fp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Qd(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=je.empty){let i=cv(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new je(Ce.from(r),0,0))}delete(e,n){return this.replace(e,n,je.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return tJ(this,e,n,r),this}replaceRangeWith(e,n,r){return nJ(this,e,n,r),this}deleteRange(e,n){return rJ(this,e,n),this}lift(e,n){return $X(this,e,n),this}join(e,n=1){return XX(this,e,n),this}wrap(e,n){return qX(this,e,n),this}setBlockType(e,n=e,r,i=null){return WX(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return KX(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Md(e,n,r)),this}setDocAttribute(e,n){return this.step(new Bp(e,n)),this}addNodeMark(e,n){return this.step(new rl(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Kt)n.isInSet(r.marks)&&this.step(new Jc(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Jc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return GX(this,e,n,r),this}addMark(e,n,r){return FX(this,e,n,r),this}removeMark(e,n,r){return BX(this,e,n,r),this}clearIncompatible(e,n,r){return u_(this,e,n,r),this}}const Tx=Object.create(null);class at{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new $R(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=je.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?je.empty:n),a==0&&S4(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),S4(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new rt(e):Yu(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Yu(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Yu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ws(e.node(0))}static atStart(e){return Yu(e,e,0,0,1)||new ws(e)}static atEnd(e){return Yu(e,e,e.content.size,e.childCount,-1)||new ws(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Tx[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Tx)throw new RangeError("Duplicate use of selection JSON ID "+e);return Tx[e]=n,n.prototype.jsonID=e,n}getBookmark(){return rt.between(this.$anchor,this.$head).getBookmark()}}at.prototype.visible=!0;class $R{constructor(e,n){this.$from=e,this.$to=n}}let x4=!1;function w4(t){!x4&&!t.parent.inlineContent&&(x4=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class rt extends at{constructor(e,n=e){w4(e),w4(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return at.near(r);let i=e.resolve(n.map(this.anchor));return new rt(i.parent.inlineContent?i:r,r)}replace(e,n=je.empty){if(super.replace(e,n),n==je.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof rt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new uv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new rt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=at.findFrom(n,r,!0)||at.findFrom(n,-r,!0);if(s)n=s.$head;else return at.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(at.findFrom(e,-r,!0)||at.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new rt(e,n)}}at.jsonID("text",rt);class uv{constructor(e,n){this.anchor=e,this.head=n}map(e){return new uv(e.map(this.anchor),e.map(this.head))}resolve(e){return rt.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ze extends at{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?at.near(s):new Ze(s)}content(){return new je(Ce.from(this.node),0,0)}eq(e){return e instanceof Ze&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new h_(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ze(e.resolve(n.anchor))}static create(e,n){return new Ze(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ze.prototype.visible=!1;at.jsonID("node",Ze);class h_{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new uv(r,r):new h_(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ze.isSelectable(r)?new Ze(n):at.near(n)}}class ws extends at{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=je.empty){if(n==je.empty){e.delete(0,e.doc.content.size);let r=at.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ws(e)}map(e){return new ws(e)}eq(e){return e instanceof ws}getBookmark(){return iJ}}at.jsonID("all",ws);const iJ={map(){return this},resolve(t){return new ws(t)}};function Yu(t,e,n,r,i,s=!1){if(e.inlineContent)return rt.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Ze.isSelectable(a))return Ze.create(t,n-(i<0?a.nodeSize:0))}else{let l=Yu(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function S4(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof ur||i instanceof fr))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(at.near(t.doc.resolve(o),n))}const k4=1,Gg=2,_4=4;class sJ extends zR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|k4)&~Gg,this.storedMarks=null,this}get selectionSet(){return(this.updated&k4)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Gg,this}ensureMarks(e){return Kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Gg)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Gg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Kt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(at.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_4,this}get scrolledIntoView(){return(this.updated&_4)>0}}function C4(t,e){return!e||!t?t:t.bind(e)}class Tf{constructor(e,n,r){this.name=e,this.init=C4(n.init,r),this.apply=C4(n.apply,r)}}const oJ=[new Tf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Tf("selection",{init(t,e){return t.selection||at.atStart(e.doc)},apply(t){return t.selection}}),new Tf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Tf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Nx{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oJ.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Tf(r.key,r.spec.state,r))})}}class vd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new vd(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new sJ(this)}static create(e){let n=new Nx(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new vd(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Nx(this.schema,e.plugins),r=n.fields,i=new vd(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Nx(e.schema,e.plugins),s=new vd(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=yl.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=at.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function VR(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=VR(i,e,{})),n[r]=i}return n}class Yr{constructor(e){this.spec=e,this.props={},e.props&&VR(e.props,this,this.props),this.key=e.key?e.key.key:UR("plugin")}getState(e){return e[this.key]}}const Px=Object.create(null);function UR(t){return t in Px?t+"$"+ ++Px[t]:(Px[t]=0,t+"$")}class Qi{constructor(e="key"){this.key=UR(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Sr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let v5=null;const Go=function(t,e,n){let r=v5||(v5=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},aJ=function(){v5=null},Qc=function(t,e,n,r){return n&&(A4(t,e,n,r,-1)||A4(t,e,n,r,1))},lJ=/^(img|br|input|textarea|hr)$/i;function A4(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ys(t))){let o=t.parentNode;if(!o||o.nodeType!=1||gm(t)||lJ.test(t.nodeName)||t.contentEditable=="false")return!1;e=Sr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?ys(t):0}else return!1}}function ys(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function cJ(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ys(t)}else if(t.parentNode&&!gm(t))e=Sr(t),t=t.parentNode;else return null}}function uJ(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!gm(t))e=Sr(t)+1,t=t.parentNode;else return null}}function dJ(t,e,n){for(let r=e==0,i=e==ys(t);r||i;){if(t==n)return!0;let s=Sr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ys(t)}}function gm(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const dv=function(t){return t.focusNode&&Qc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function mc(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function hJ(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function fJ(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(ys(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(ys(r.startContainer),r.startOffset)}}}const _o=typeof navigator<"u"?navigator:null,T4=typeof document<"u"?document:null,Bl=_o&&_o.userAgent||"",b5=/Edge\/(\d+)/.exec(Bl),qR=/MSIE \d/.exec(Bl),x5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bl),Ai=!!(qR||x5||b5),vl=qR?document.documentMode:x5?+x5[1]:b5?+b5[1]:0,Qs=!Ai&&/gecko\/(\d+)/i.test(Bl);Qs&&+(/Firefox\/(\d+)/.exec(Bl)||[0,0])[1];const w5=!Ai&&/Chrome\/(\d+)/.exec(Bl),Ur=!!w5,WR=w5?+w5[1]:0,ri=!Ai&&!!_o&&/Apple Computer/.test(_o.vendor),eh=ri&&(/Mobile\/\w+/.test(Bl)||!!_o&&_o.maxTouchPoints>2),fs=eh||(_o?/Mac/.test(_o.platform):!1),pJ=_o?/Win/.test(_o.platform):!1,Zo=/Android \d/.test(Bl),ym=!!T4&&"webkitFontSmoothing"in T4.documentElement.style,mJ=ym?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function gJ(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Bo(t,e){return typeof t=="number"?t:t[e]}function yJ(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function N4(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Zd(o);continue}let a=o,l=a==s.body,c=l?gJ(s):yJ(a),u=0,d=0;if(e.top<c.top+Bo(r,"top")?d=-(c.top-e.top+Bo(i,"top")):e.bottom>c.bottom-Bo(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Bo(i,"top")-c.top:e.bottom-c.bottom+Bo(i,"bottom")),e.left<c.left+Bo(r,"left")?u=-(c.left-e.left+Bo(i,"left")):e.right>c.right-Bo(r,"right")&&(u=e.right-c.right+Bo(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-f,v=a.scrollTop-p;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Zd(o)}}function vJ(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:HR(t.dom)}}function HR(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zd(r));return e}function bJ({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;KR(n,r==0?0:r-e)}function KR(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Vu=null;function xJ(t){if(t.setActive)return t.setActive();if(Vu)return t.focus(Vu);let e=HR(t);t.focus(Vu==null?{get preventScroll(){return Vu={preventScroll:!0},!0}}:void 0),Vu||(Vu=!1,KR(e,0))}function GR(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Go(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=u,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?wJ(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:GR(n,i)}function wJ(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=$a(r,1);if(s.top!=s.bottom&&f_(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function f_(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function SJ(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function kJ(t,e,n){let{node:r,offset:i}=GR(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function _J(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function YR(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(f_(e,c))return YR(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function CJ(t,e){let n=t.dom.ownerDocument,r,i=0,s=fJ(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!f_(e,c)||(o=YR(t.dom,e,c),!o))return null}if(ri)for(let c=o;r&&c;c=Zd(c))c.draggable&&(r=void 0);if(o=SJ(o,e),r){if(Qs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;ym&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=_J(t,r,i,e))}a==null&&(a=kJ(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function P4(t){return t.top<t.bottom||t.left<t.right}function $a(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(P4(r))return r}return Array.prototype.find.call(n,P4)||t.getBoundingClientRect()}const AJ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function XR(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=ym||Qs;if(r.nodeType==3)if(o&&(AJ.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=$a(Go(r,i,i),n);if(Qs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=$a(Go(r,i-1,i-1),-1);if(c.top==l.top){let u=$a(Go(r,i,i+1),-1);if(u.top!=l.top)return cf(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,cf($a(Go(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ys(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Ex(l.getBoundingClientRect(),!1)}if(s==null&&i<ys(r)){let l=r.childNodes[i];if(l.nodeType==1)return Ex(l.getBoundingClientRect(),!0)}return Ex(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ys(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Go(l,ys(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return cf($a(c,1),!1)}if(s==null&&i<ys(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Go(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return cf($a(c,-1),!0)}return cf($a(r.nodeType==3?Go(r):r,-n),n>=0)}function cf(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Ex(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function JR(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function TJ(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return JR(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=XR(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Go(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const NJ=/[\u0590-\u08ac]/;function PJ(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!NJ.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:JR(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),v=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let E4=null,M4=null,L4=!1;function EJ(t,e,n){return E4==e&&M4==n?L4:(E4=e,M4=n,L4=n=="up"||n=="down"?TJ(t,e,n):PJ(t,e,n))}const Ss=0,O4=1,Sc=2,Co=3;class vm{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ss,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Sr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof ZR){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof QR&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Sr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Sr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Sr(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Sr(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],v=p+g.size;if(s>p&&o<v)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Qs||ri)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let g=f,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:Sr(v)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=f.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Qs&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&ri)&&Qc(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Qc(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Sc:O4,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Co:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Sc:Co}r=o}this.dirty=Sc}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Sc:O4;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class QR extends vm{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ss&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class MJ extends vm{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Zc extends vm{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=au.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Zc(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Co||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Co&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ss){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ss}}slice(e,n,r){let i=Zc.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=k5(s,n,o,r)),e>0&&(s=k5(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class bl extends vm{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=au.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=nj(u,r,n),c?l=new LJ(e,n,r,i,u,d||null,h,c,s,o+1):n.isText?new hv(e,n,r,i,u,h,s):new bl(e,n,r,i,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ce.empty)}return e}matchesNode(e,n,r){return this.dirty==Ss&&e.eq(this.node)&&Ky(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new IJ(this,o&&o.node,e);DJ(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Kt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Sc)&&(o&&this.protectLocalComposition(e,o),ej(this.contentDOM,this.children,e),eh&&FJ(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof rt)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=BJ(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new MJ(this,s,n,i);e.input.compositionNodes.push(o),this.children=k5(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Co||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ss}updateOuterDeco(e){if(Ky(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=tj(this.dom,this.nodeDOM,S5(this.outerDeco,this.node,n),S5(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function I4(t,e,n,r,i){nj(r,e,t);let s=new bl(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class hv extends bl{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Co||this.dirty!=Ss&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ss||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ss,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new hv(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Co)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ZR extends vm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ss&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class LJ extends bl{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Co)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ej(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=R4(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof Zc){let l=r?r.previousSibling:t.lastChild;ej(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=R4(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ep=function(t){t&&(this.nodeName=t)};ep.prototype=Object.create(null);const kc=[new ep];function S5(t,e,n){if(t.length==0)return kc;let r=n?kc[0]:new ep,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ep(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new ep(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function tj(t,e,n,r){if(n==kc&&r==kc)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=kc[0]),i=l}OJ(i,a||kc[0],o)}return i}function OJ(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function nj(t,e,n){return tj(t,t,kc,S5(e,n,t.nodeType!=1))}function Ky(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function R4(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class IJ{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=RJ(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ss,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Zc.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Co&&o.dom==o.contentDOM&&(o.dirty=Sc),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof bl){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Co&&Ky(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Sc,d.updateChildren(i,o+1),d.dirty=Ss),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ky(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=bl.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=bl.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new QR(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Zc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof hv)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ri||Ur)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new ZR(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function RJ(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Zc)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function jJ(t,e){return t.type.side-e.type.side}function DJ(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(jJ);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+h.nodeSize;if(h.isText){let v=p;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<p&&(l=h.cut(v-s),h=h.cut(0,v-s),p=v,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let g=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function FJ(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function BJ(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function k5(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function p_(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(dv(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Ze.isSelectable(d)&&i.parent&&!(d.isInline&&dJ(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Ze(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=m_(t,u,a,d)}return c}function rj(t){return t.editable?t.hasFocus():sj(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function aa(t,e=!1){let n=t.state.selection;if(ij(t,n),!!rj(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ur){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Qc(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)$J(t);else{let{anchor:r,head:i}=n,s,o;j4&&!(n instanceof rt)&&(n.$from.parent.inlineContent||(s=D4(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=D4(t,n.to))),t.docView.setSelection(r,i,t,e),j4&&(s&&F4(s),o&&F4(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&zJ(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const j4=ri||Ur&&WR<63;function D4(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(ri&&i&&i.contentEditable=="false")return Mx(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Mx(i);if(s)return Mx(s)}}function Mx(t){return t.contentEditable="true",ri&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function F4(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function zJ(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!rj(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function $J(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Sr(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Ai&&vl<=11&&(r.disabled=!0,r.disabled=!1)}function ij(t,e){if(e instanceof Ze){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(B4(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else B4(t)}function B4(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function m_(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||rt.between(e,n,r)}function z4(t){return t.editable&&!t.hasFocus()?!1:sj(t)}function sj(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function VJ(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Qc(e.node,e.offset,n.anchorNode,n.anchorOffset)}function _5(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&at.findFrom(s,e)}function Wa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function $4(t,e,n){let r=t.state.selection;if(r instanceof rt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Wa(t,new rt(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=_5(t.state,e);return i&&i instanceof Ze?Wa(t,i):!1}else if(!(fs&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Ze.isSelectable(s)?Wa(t,new Ze(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):ym?Wa(t,new rt(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ze&&r.node.isInline)return Wa(t,new rt(e>0?r.$to:r.$from));{let i=_5(t.state,e);return i?Wa(t,i):!1}}}function Gy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function tp(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Uu(t,e){return e<0?UJ(t):qJ(t)}function UJ(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Qs&&n.nodeType==1&&r<Gy(n)&&tp(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(tp(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(oj(n))break;{let a=n.previousSibling;for(;a&&tp(a,-1);)i=n.parentNode,s=Sr(a),a=a.previousSibling;if(a)n=a,r=Gy(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?C5(t,n,r):i&&C5(t,i,s)}function qJ(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Gy(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(tp(a,1))s=n,o=++r;else break}else{if(oj(n))break;{let a=n.nextSibling;for(;a&&tp(a,1);)s=a.parentNode,o=Sr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Gy(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&C5(t,s,o)}function oj(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function WJ(t,e){for(;t&&e==t.childNodes.length&&!gm(t);)e=Sr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function HJ(t,e){for(;t&&!e&&!gm(t);)e=Sr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function C5(t,e,n){if(e.nodeType!=3){let s,o;(o=WJ(e,n))?(e=o,n=0):(s=HJ(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(dv(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&aa(t)},50)}function V4(t,e){let n=t.state.doc.resolve(e);if(!(Ur||pJ)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function U4(t,e,n){let r=t.state.selection;if(r instanceof rt&&!r.empty||n.indexOf("s")>-1||fs&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=_5(t.state,e);if(o&&o instanceof Ze)return Wa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof ws?at.near(o,e):at.findFrom(o,e);return a?Wa(t,a):!1}return!1}function q4(t,e){if(!(t.state.selection instanceof rt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function W4(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function KJ(t){if(!ri||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;W4(t,r,"true"),setTimeout(()=>W4(t,r,"false"),20)}return!1}function GJ(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function YJ(t,e){let n=e.keyCode,r=GJ(e);if(n==8||fs&&n==72&&r=="c")return q4(t,-1)||Uu(t,-1);if(n==46&&!e.shiftKey||fs&&n==68&&r=="c")return q4(t,1)||Uu(t,1);if(n==13||n==27)return!0;if(n==37||fs&&n==66&&r=="c"){let i=n==37?V4(t,t.state.selection.from)=="ltr"?-1:1:-1;return $4(t,i,r)||Uu(t,i)}else if(n==39||fs&&n==70&&r=="c"){let i=n==39?V4(t,t.state.selection.from)=="ltr"?1:-1:1;return $4(t,i,r)||Uu(t,i)}else{if(n==38||fs&&n==80&&r=="c")return U4(t,-1,r)||Uu(t,-1);if(n==40||fs&&n==78&&r=="c")return KJ(t)||U4(t,1,r)||Uu(t,1);if(r==(fs?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function g_(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||au.fromSchema(t.state.schema),a=hj(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=dj[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function aj(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new je(Ce.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):je.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:f}=t.state,p=au.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=o.appendChild(document.createElement("p"));g&&v.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=ZJ(n),ym&&eQ(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Qf.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!XJ.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=tQ(H4(a,+u[1],+u[2]),u[4]);else if(a=je.maxOpen(JJ(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=H4(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const XJ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function JJ(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&cj(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=uj(o[o.length-1],s.length));let u=lj(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Ce.from(o)}return t}function lj(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ce.from(t));return t}function cj(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=cj(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ce.from(lj(n,t,i+1))))}}function uj(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,uj(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ce.empty,!0);return t.copy(n.append(r))}function A5(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=A5(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ce.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function H4(t,e,n){return e<t.openStart&&(t=new je(A5(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new je(A5(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const dj={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let K4=null;function hj(){return K4||(K4=document.implementation.createHTMLDocument("title"))}let Lx=null;function QJ(t){let e=window.trustedTypes;return e?(Lx||(Lx=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Lx.createHTML(t)):t}function ZJ(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=hj().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&dj[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=QJ(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function eQ(t){let e=t.querySelectorAll(Ur?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function tQ(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ce.from(l.create(r[a+1],i)),s++,o++}return new je(i,s,o)}const ii={},si={},nQ={touchstart:!0,touchmove:!0};class rQ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function iQ(t){for(let e in ii){let n=ii[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{oQ(t,r)&&!y_(t,r)&&(t.editable||!(r.type in si))&&n(t,r)},nQ[e]?{passive:!0}:void 0)}ri&&t.dom.addEventListener("input",()=>null),T5(t)}function il(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function sQ(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function T5(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>y_(t,r))})}function y_(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function oQ(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function aQ(t,e){!y_(t,e)&&ii[e.type]&&(t.editable||!(e.type in si))&&ii[e.type](t,e)}si.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!pj(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Zo&&Ur&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),eh&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,mc(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||YJ(t,n)?n.preventDefault():il(t,"key")};si.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};si.keypress=(t,e)=>{let n=e;if(pj(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||fs&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof rt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function fv(t){return{left:t.clientX,top:t.clientY}}function lQ(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function v_(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Ld(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function cQ(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ze.isSelectable(r)?(Ld(t,new Ze(n),"pointer"),!0):!1}function uQ(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Ze&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Ze.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Ld(t,Ze.create(t.state.doc,i),"pointer"),!0):!1}function dQ(t,e,n,r,i){return v_(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?uQ(t,n):cQ(t,n))}function hQ(t,e,n,r){return v_(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function fQ(t,e,n,r){return v_(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||pQ(t,n,r)}function pQ(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ld(t,rt.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Ld(t,rt.create(r,a+1,a+1+o.content.size),"pointer");else if(Ze.isSelectable(o))Ld(t,Ze.create(r,a),"pointer");else continue;return!0}}function b_(t){return Yy(t)}const fj=fs?"metaKey":"ctrlKey";ii.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=b_(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&lQ(n,t.input.lastClick)&&!n[fj]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(fv(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new mQ(t,o,n,!!r)):(s=="doubleClick"?hQ:fQ)(t,o.pos,o.inside,n)?n.preventDefault():il(t,"pointer"))};class mQ{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fj],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Ze&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Qs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),il(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>aa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(fv(e))),this.updateAllowDefault(e),this.allowDefault||!n?il(this.view,"pointer"):dQ(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ri&&this.mightDrag&&!this.mightDrag.node.isAtom||Ur&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ld(this.view,at.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):il(this.view,"pointer")}move(e){this.updateAllowDefault(e),il(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ii.touchstart=t=>{t.input.lastTouch=Date.now(),b_(t),il(t,"pointer")};ii.touchmove=t=>{t.input.lastTouch=Date.now(),il(t,"pointer")};ii.contextmenu=t=>b_(t);function pj(t,e){return t.composing?!0:ri&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const gQ=Zo?5e3:-1;si.compositionstart=si.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof rt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Yy(t,!0),t.markCursor=null;else if(Yy(t,!e.selection.empty),Qs&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}mj(t,gQ)};si.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,mj(t,20))};function mj(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Yy(t),e))}function gj(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=vQ());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function yQ(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=cJ(e.focusNode,e.focusOffset),r=uJ(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function vQ(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Yy(t,e=!1){if(!(Zo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),gj(t),e||t.docView&&t.docView.dirty){let n=p_(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function bQ(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const zp=Ai&&vl<15||eh&&mJ<604;ii.copy=si.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=zp?null:n.clipboardData,o=r.content(),{dom:a,text:l}=g_(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):bQ(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function xQ(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function wQ(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?$p(t,r.value,null,i,e):$p(t,r.textContent,r.innerHTML,i,e)},50)}function $p(t,e,n,r,i){let s=aj(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||je.empty)))return!0;if(!s)return!1;let o=xQ(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yj(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}si.paste=(t,e)=>{let n=e;if(t.composing&&!Zo)return;let r=zp?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&$p(t,yj(r),r.getData("text/html"),i,n)?n.preventDefault():wQ(t,n)};class vj{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const SQ=fs?"altKey":"ctrlKey";function bj(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[SQ]}ii.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(fv(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ze?i.to-1:i.to))){if(r&&r.mightDrag)o=Ze.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=Ze.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=g_(t,a);(!n.dataTransfer.files.length||!Ur||WR>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(zp?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",zp||n.dataTransfer.setData("text/plain",c),t.dragging=new vj(u,bj(t,n),o)};ii.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};si.dragover=si.dragenter=(t,e)=>e.preventDefault();si.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(fv(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=aj(t,yj(n.dataTransfer),zp?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&bj(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||je.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?RR(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&Ze.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Ze(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,v,y,x)=>p=x),c.setSelection(m_(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};ii.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&aa(t)},20))};ii.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ii.beforeinput=(t,e)=>{if(Ur&&Zo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,mc(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in si)ii[t]=si[t];function Vp(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Xy{constructor(e,n){this.toDOM=e,this.spec=n||Rc,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new ti(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Xy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Vp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xl{constructor(e,n){this.attrs=e,this.spec=n||Rc}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new ti(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof xl&&Vp(this.attrs,e.attrs)&&Vp(this.spec,e.spec)}static is(e){return e.type instanceof xl}destroy(){}}class x_{constructor(e,n){this.attrs=e,this.spec=n||Rc}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new ti(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof x_&&Vp(this.attrs,e.attrs)&&Vp(this.spec,e.spec)}destroy(){}}class ti{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ti(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ti(e,e,new Xy(n,r))}static inline(e,n,r,i){return new ti(e,n,new xl(r,i))}static node(e,n,r,i){return new ti(e,n,new x_(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof xl}get widget(){return this.type instanceof Xy}}const Xu=[],Rc={};class Tn{constructor(e,n){this.local=e.length?e:Xu,this.children=n.length?n:Xu}static create(e,n){return n.length?Jy(n,e,0,Rc):Br}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Br||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Rc)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?kQ(this.children,o||[],e,n,r,i,s):o?new Tn(o.sort(jc),Xu):Br}add(e,n){return n.length?this==Br?Tn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=wj(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Jy(u,a,c+1,Rc)),s+=3}});let o=xj(s?Sj(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Tn(o.length?this.local.concat(o).sort(jc):this.local,i||this.children)}remove(e){return e.length==0||this==Br?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Br?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Tn(i,r):Br}forChild(e,n){if(this==Br)return this;if(n.isLeaf)return Tn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof xl){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Tn(i.sort(jc),Xu);return r?new Xa([a,r]):a}return r||Br}eq(e){if(this==e)return!0;if(!(e instanceof Tn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return w_(this.localsInner(e))}localsInner(e){if(this==Br)return Xu;if(e.inlineContent||!this.local.some(xl.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof xl||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Tn.empty=new Tn([],[]);Tn.removeOverlap=w_;const Br=Tn.empty;class Xa{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Rc));return Xa.from(r)}forChild(e,n){if(n.isLeaf)return Tn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Br&&(s instanceof Xa?r=r.concat(s.members):r.push(s))}return Xa.from(r)}eq(e){if(!(e instanceof Xa)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?w_(r?n:n.sort(jc)):Xu}static from(e){switch(e.length){case 0:return Br;case 1:return e[0];default:return new Xa(e.every(n=>n instanceof Tn)?e:e.reduce((n,r)=>n.concat(r instanceof Tn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function kQ(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,f,p,g)=>{let v=g-p-(f-h);for(let y=0;y<a.length;y+=3){let x=a[y+1];if(x<0||h>x+u-d)continue;let S=a[y]+u-d;f>=S?a[y+1]=h<=S?-2:-1:h>=u&&v&&(a[y]+=v,a[y+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-i,{index:p,offset:g}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&g==d&&g+v.nodeSize==f){let y=a[c+2].mapInner(n,v,u+1,t[c]+s+1,o);y!=Br?(a[c]=d,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=_Q(a,t,e,n,i,s,o),u=Jy(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Tn(e.sort(jc),a)}function xj(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ti(i.from+e,i.to+e,i.type))}return n}function _Q(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function wj(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Sj(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Jy(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=wj(t,a,l+n);if(c){s=!0;let u=Jy(c,a,n+l+1,r);u!=Br&&i.push(l,l+a.nodeSize,u)}});let o=xj(s?Sj(t):t,-n).sort(jc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Tn(o,i):Br}function jc(t,e){return t.from-e.from||t.to-e.to}function w_(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),G4(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),G4(e,i,r.copy(s.from,r.to)));break}}}return e}function G4(t,e,n){for(;e<t.length&&jc(n,t[e])>0;)e++;t.splice(e,0,n)}function Ox(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Br&&e.push(r)}),t.cursorWrapper&&e.push(Tn.create(t.state.doc,[t.cursorWrapper.deco])),Xa.from(e)}const CQ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},AQ=Ai&&vl<=11;class TQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class NQ{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new TQ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ai&&vl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),AQ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,CQ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(z4(this.view)){if(this.suppressingSelectionUpdates)return aa(this.view);if(Ai&&vl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Qc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Zd(s))n.add(s);for(let s=e.anchorNode;s;s=Zd(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&z4(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Qs&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||MQ(e,d)!=f)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&dv(r)&&(c=p_(e))&&c.eq(at.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,aa(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),PQ(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||aa(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ai&&vl<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?Sr(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Sr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Y4=new WeakMap,X4=!1;function PQ(t){if(!Y4.has(t)&&(Y4.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Qs,X4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),X4=!0}}function J4(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Qc(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function EQ(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return J4(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?J4(t,n):null}function MQ(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function LQ(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],dv(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ur&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=r.childNodes[v-1],x=y.pmViewDesc;if(y.nodeName=="BR"&&!x){s=v;break}if(!x||x.size)break}let d=t.state.doc,h=t.someProp("domParser")||Qf.fromSchema(t.state.schema),f=d.resolve(o),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:OQ,context:f});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),p={anchor:v+o,head:y+o}}return{doc:g,sel:p,from:o,to:a}}function OQ(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ri&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ri&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const IQ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function RQ(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,D=p_(t,N);if(D&&!t.state.selection.eq(D)){if(Ur&&Zo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,mc(13,"Enter"))))return;let V=t.state.tr.setSelection(D);N=="pointer"?V.setMeta("pointer",!0):N=="key"&&V.scrollIntoView(),s&&V.setMeta("composition",s),t.dispatch(V)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=LQ(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=FQ(d.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(eh&&t.input.lastIOSEnter>Date.now()-225||Zo)&&i.some(N=>N.nodeType==1&&!IQ.test(N.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",N=>N(t,mc(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof rt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=Q4(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let D=t.state.tr.setSelection(N);s&&D.setMeta("composition",s),t.dispatch(D)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof rt&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Ai&&vl<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),v=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),x=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=p.endA,S;if((eh&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(g.pos,v.pos,"",""))&&(S=at.findFrom(c.doc.resolve(g.pos+1),1,!0))&&S.head>g.pos)&&t.someProp("handleKeyDown",N=>N(t,mc(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&DQ(u,p.start,p.endA,g,v)&&t.someProp("handleKeyDown",N=>N(t,mc(8,"Backspace")))){Zo&&Ur&&t.domObserver.suppressSelectionUpdates();return}Ur&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Zo&&!x&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,v=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,mc(13,"Enter"))})},20));let C=p.start,A=p.endA,O=N=>{let D=N||t.state.tr.replace(C,A,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let V=Q4(t,D.doc,c.sel);V&&!(Ur&&t.composing&&V.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(V.head==C||V.head==D.mapping.map(A)-1)||Ai&&V.empty&&V.head==C)&&D.setSelection(V)}return s&&D.setMeta("composition",s),D.scrollIntoView()},M;if(x){if(g.pos==v.pos){Ai&&vl<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>aa(t),20));let N=O(t.state.tr.delete(C,A)),D=u.resolve(p.start).marksAcross(u.resolve(p.endA));D&&N.ensureMarks(D),t.dispatch(N)}else if(p.endA==p.endB&&(M=jQ(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let N=O(t.state.tr);M.type=="add"?N.addMark(C,A,M.mark):N.removeMark(C,A,M.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,v.parentOffset),D=()=>O(t.state.tr.insertText(N,C,A));t.someProp("handleTextInput",V=>V(t,C,A,N,D))||t.dispatch(D())}}else t.dispatch(O())}function Q4(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:m_(t,e.resolve(n.anchor),e.resolve(n.head))}function jQ(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Ce.from(c).eq(t))return{mark:a,type:o}}function DQ(t,e,n,r,i){if(n-e<=i.pos-r.pos||Ix(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Ix(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Ix(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ix(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function FQ(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&Z4(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Z4(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Z4(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class kj{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new rQ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(iN),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=nN(this),tN(this),this.nodeViews=rN(this),this.docView=I4(this.state.doc,eN(this),Ox(this),this.dom,this),this.domObserver=new NQ(this,(r,i,s,o)=>RQ(this,r,i,s,o)),this.domObserver.start(),iQ(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&T5(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(iN),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(gj(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=rN(this);zQ(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&T5(this),this.editable=nN(this),tN(this);let l=Ox(this),c=eN(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&vJ(this);if(o){this.domObserver.stop();let f=d&&(Ai||Ur)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&BQ(i.selection,e.selection);if(d){let p=Ur?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=yQ(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=I4(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&VJ(this))?aa(this,f):(ij(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&bJ(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ze){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&N4(this,n.getBoundingClientRect(),e)}else N4(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new vj(e.slice,e.move,i<0?void 0:Ze.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Ai){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&xJ(this.dom),aa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return CJ(this,e)}coordsAtPos(e,n=1){return XR(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return EJ(this,n||this.state,e)}pasteHTML(e,n){return $p(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return $p(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return g_(this,e)}destroy(){this.docView&&(sQ(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ox(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,aJ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return aQ(this,e)}domSelectionRange(){let e=this.domSelection();return e?ri&&this.root.nodeType===11&&hJ(this.dom.ownerDocument)==this.dom&&EQ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}kj.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function eN(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ti.node(0,t.state.doc.content.size,e)]}function tN(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ti.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function nN(t){return!t.someProp("editable",e=>e(t.state)===!1)}function BQ(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function rN(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function zQ(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function iN(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Tl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$Q=typeof navigator<"u"&&/Mac/.test(navigator.platform),VQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kr=0;kr<10;kr++)Tl[48+kr]=Tl[96+kr]=String(kr);for(var kr=1;kr<=24;kr++)Tl[kr+111]="F"+kr;for(var kr=65;kr<=90;kr++)Tl[kr]=String.fromCharCode(kr+32),Qy[kr]=String.fromCharCode(kr);for(var Rx in Tl)Qy.hasOwnProperty(Rx)||(Qy[Rx]=Tl[Rx]);function UQ(t){var e=$Q&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||VQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Qy:Tl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const qQ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),WQ=typeof navigator<"u"&&/Win/.test(navigator.platform);function HQ(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))qQ?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function KQ(t){let e=Object.create(null);for(let n in t)e[HQ(n)]=t[n];return e}function jx(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function GQ(t){return new Yr({props:{handleKeyDown:S_(t)}})}function S_(t){let e=KQ(t);return function(n,r){let i=UQ(r),s,o=e[jx(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[jx(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(WQ&&r.ctrlKey&&r.altKey)&&(s=Tl[r.keyCode])&&s!=i){let a=e[jx(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const YQ=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function _j(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const XQ=(t,e,n)=>{let r=_j(t,n);if(!r)return!1;let i=k_(r);if(!i){let o=r.blockRange(),a=o&&gh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(Nj(t,i,e,-1))return!0;if(r.parent.content.size==0&&(th(s,"end")||Ze.isSelectable(s)))for(let o=r.depth;;o--){let a=cv(t.doc,r.before(o),r.after(o),je.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(th(s,"end")?at.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Ze.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},JQ=(t,e,n)=>{let r=_j(t,n);if(!r)return!1;let i=k_(r);return i?Cj(t,i,e):!1},QQ=(t,e,n)=>{let r=Aj(t,n);if(!r)return!1;let i=__(r);return i?Cj(t,i,e):!1};function Cj(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=cv(t.doc,s,l,je.empty);if(!c||c.from!=s||c instanceof ur&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(rt.create(u.doc,s)),n(u.scrollIntoView())}return!0}function th(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const ZQ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=k_(r)}let o=s&&s.nodeBefore;return!o||!Ze.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ze.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function k_(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Aj(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const eZ=(t,e,n)=>{let r=Aj(t,n);if(!r)return!1;let i=__(r);if(!i)return!1;let s=i.nodeAfter;if(Nj(t,i,e,1))return!0;if(r.parent.content.size==0&&(th(s,"start")||Ze.isSelectable(s))){let o=cv(t.doc,r.before(),r.after(),je.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(th(s,"start")?at.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Ze.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},tZ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=__(r)}let o=s&&s.nodeAfter;return!o||!Ze.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ze.create(t.doc,s.pos)).scrollIntoView()),!0)};function __(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const nZ=(t,e)=>{let n=t.selection,r=n instanceof Ze,i;if(r){if(n.node.isTextblock||!Fl(t.doc,n.from))return!1;i=n.from}else if(i=lv(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Ze.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},rZ=(t,e)=>{let n=t.selection,r;if(n instanceof Ze){if(n.node.isTextblock||!Fl(t.doc,n.to))return!1;r=n.to}else if(r=lv(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},iZ=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&gh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},sZ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Tj(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const oZ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Tj(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(at.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},aZ=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof ws||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Tj(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(rt.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},lZ=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Ed(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&gh(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},cZ=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Ze.create(t.doc,i))),!0)};function uZ(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Fl(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Nj(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&uZ(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=Ce.empty;for(let y=o.length-1;y>=0;y--)p=Ce.from(o[y].create(null,p));p=Ce.from(i.copy(p));let g=t.tr.step(new fr(e.pos-1,f,e.pos,f,new je(p,1,0),o.length,!0)),v=g.doc.resolve(f+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Fl(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:at.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&gh(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&th(s,"start",!0)&&th(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let y=Ce.empty;for(let S=p.length-1;S>=0;S--)y=Ce.from(p[S].copy(y));let x=t.tr.step(new fr(e.pos-p.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new je(y,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function Pj(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(rt.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const dZ=Pj(-1),hZ=Pj(1);function fZ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&d_(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function sN(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function pZ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return mZ(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function mZ(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Wy(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Wy(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=d_(s,n,r,e);return a?(t&&gZ(t,e,a,i,n),!0):!1}function gZ(t,e,n,r,i){let s=Ce.empty;for(let u=n.length-1;u>=0;u--)s=Ce.from(n[u].type.create(n[u].attrs,s));t.step(new fr(e.start-(r?2:0),e.end,e.start,e.end,new je(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Ed(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function yZ(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?vZ(e,n,t,s):bZ(e,n,s):!0:!1}}function vZ(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new fr(s-1,o,s,o,new je(Ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Wy(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=gh(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Fl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function bZ(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ce.empty:Ce.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new fr(d-(a?1:0),h+(l?1:0),d+1,h-1,new je((a?Ce.empty:Ce.from(i.copy(Ce.empty))).append(l?Ce.empty:Ce.from(i.copy(Ce.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function xZ(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Ce.from(c?t.create():null),d=new je(Ce.from(t.create(null,Ce.from(a.type.create(null,u)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new fr(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}function pv(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class mv{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...g)=>{const v=this.buildProps(c,n),y=f(...g)(v);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:pv({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class wZ{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function We(t,e,n){return t.config[e]===void 0&&t.parent?We(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?We(t.parent,e,n):null}):t.config[e]}function gv(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Ej(t){const e=[],{nodeExtensions:n,markExtensions:r}=gv(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=We(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=We(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof h?.default=="function"&&(h.default=h.default()),h?.isRequired&&h?.default===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function mr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Jn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function N5(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Jn(n,r),{})}function Mj(t){return typeof t=="function"}function wt(t,e=void 0,...n){return Mj(t)?e?t.bind(e)(...n):t(...n):t}function SZ(t={}){return Object.keys(t).length===0&&t.constructor===Object}function kZ(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function oN(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):kZ(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function aN(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&SZ(n)?!1:n!=null))}function _Z(t,e){var n;const r=Ej(t),{nodeExtensions:i,markExtensions:s}=gv(t),o=(n=i.find(c=>We(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,x)=>{const S=We(x,"extendNodeSchema",d);return{...y,...S?S(c):{}}},{}),f=aN({...h,content:wt(We(c,"content",d)),marks:wt(We(c,"marks",d)),group:wt(We(c,"group",d)),inline:wt(We(c,"inline",d)),atom:wt(We(c,"atom",d)),selectable:wt(We(c,"selectable",d)),draggable:wt(We(c,"draggable",d)),code:wt(We(c,"code",d)),whitespace:wt(We(c,"whitespace",d)),linebreakReplacement:wt(We(c,"linebreakReplacement",d)),defining:wt(We(c,"defining",d)),isolating:wt(We(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var x;return[y.name,{default:(x=y?.attribute)===null||x===void 0?void 0:x.default}]}))}),p=wt(We(c,"parseHTML",d));p&&(f.parseDOM=p.map(y=>oN(y,u)));const g=We(c,"renderHTML",d);g&&(f.toDOM=y=>g({node:y,HTMLAttributes:N5(y,u)}));const v=We(c,"renderText",d);return v&&(f.toText=v),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,y)=>{const x=We(y,"extendMarkSchema",d);return{...v,...x?x(c):{}}},{}),f=aN({...h,inclusive:wt(We(c,"inclusive",d)),excludes:wt(We(c,"excludes",d)),group:wt(We(c,"group",d)),spanning:wt(We(c,"spanning",d)),code:wt(We(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var y;return[v.name,{default:(y=v?.attribute)===null||y===void 0?void 0:y.default}]}))}),p=wt(We(c,"parseHTML",d));p&&(f.parseDOM=p.map(v=>oN(v,u)));const g=We(c,"renderHTML",d);return g&&(f.toDOM=v=>g({mark:v,HTMLAttributes:N5(v,u)})),[c.name,f]}));return new _R({topNode:o,nodes:a,marks:l})}function Dx(t,e){return e.nodes[t]||e.marks[t]||null}function lN(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function C_(t,e){const n=au.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const CZ=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function A_(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class yv{constructor(e){this.find=e.find,this.handler=e.handler}}const AZ=(t,e)=>{if(A_(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Yg(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=CZ(c)+s;return o.forEach(h=>{if(u)return;const f=AZ(d,h.find);if(!f)return;const p=l.state.tr,g=pv({state:l.state,transaction:p}),v={from:r-(f[0].length-s.length),to:i},{commands:y,chain:x,can:S}=new mv({editor:n,state:g});h.handler({state:g,range:v,match:f,commands:y,chain:x,can:S})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function TZ(t){const{editor:e,rules:n}=t,r=new Yr({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=C_(Ce.from(u),o.schema);const{from:d}=l,h=d+u.length;Yg({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Yg({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Yg({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Yg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function NZ(t){return Object.prototype.toString.call(t).slice(8,-1)}function Xg(t){return NZ(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function vv(t,e){const n={...t};return Xg(t)&&Xg(e)&&Object.keys(e).forEach(r=>{Xg(e[r])&&Xg(t[r])?n[r]=vv(t[r],e[r]):n[r]=e[r]}),n}class Nl{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=wt(We(this,"addOptions",{name:this.name}))),this.storage=wt(We(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Nl(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>vv(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Nl(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=wt(We(n,"addOptions",{name:n.name})),n.storage=wt(We(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>c?.type.name===n.name))return!1;const l=o.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function PZ(t){return typeof t=="number"}class EZ{constructor(e){this.find=e.find,this.handler=e.handler}}const MZ=(t,e,n)=>{if(A_(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function LZ(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new mv({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const g=Math.max(r,p),v=Math.min(i,p+f.content.size),y=f.textBetween(g-p,v-p,void 0,"");MZ(y,s.find,o).forEach(S=>{if(S.index===void 0)return;const C=g+S.index+1,A=C+S[0].length,O={from:n.tr.mapping.map(C),to:n.tr.mapping.map(A)},M=s.handler({state:n,range:O,match:S,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(M)})}),d.every(f=>f!==null)}let Jg=null;const OZ=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function IZ(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:f,pasteEvt:p})=>{const g=u.tr,v=pv({state:u,transaction:g});if(!(!LZ({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new Yr({view(d){const h=p=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?d.dom.parentElement:null,r&&(Jg=e)},f=()=>{Jg&&(Jg=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const f=Jg;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=h,i=!!p?.includes("data-pm-slice"),!1}}},appendTransaction:(d,h,f)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!i,v=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),x=!!y;if(!g&&!v&&!x)return;if(x){let{text:A}=y;typeof A=="string"?A=A:A=C_(Ce.from(A),f.schema);const{from:O}=y,M=O+A.length,N=OZ(A);return l({rule:u,state:f,from:O,to:{b:M},pasteEvt:N})}const S=h.doc.content.findDiffStart(f.doc.content),C=h.doc.content.findDiffEnd(f.doc.content);if(!(!PZ(S)||!C||S===C.b))return l({rule:u,state:f,from:S,to:C,pasteEvt:o})}}))}function RZ(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class bd{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=bd.resolve(e),this.schema=_Z(this.extensions,n),this.setupExtensions()}static resolve(e){const n=bd.sort(bd.flatten(e)),r=RZ(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=We(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=We(r,"priority")||100,o=We(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Dx(n.name,this.schema)},i=We(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=bd.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Dx(o.name,this.schema)},l=[],c=We(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&We(o,"exitable",a)&&(u.ArrowRight=()=>Nl.handleExit({editor:e,mark:o})),c){const g=Object.fromEntries(Object.entries(c()).map(([v,y])=>[v,()=>y({editor:e})]));u={...u,...g}}const d=GQ(u);l.push(d);const h=We(o,"addInputRules",a);lN(o,e.options.enableInputRules)&&h&&r.push(...h());const f=We(o,"addPasteRules",a);lN(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=We(o,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[TZ({editor:e,rules:r}),...IZ({editor:e,rules:i}),...s]}get attributes(){return Ej(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=gv(this.extensions);return Object.fromEntries(n.filter(r=>!!We(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:mr(r.name,this.schema)},o=We(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,h)=>{const f=N5(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Dx(e.name,this.schema)};e.type==="mark"&&(!((n=wt(We(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=We(e,"onBeforeCreate",r),s=We(e,"onCreate",r),o=We(e,"onUpdate",r),a=We(e,"onSelectionUpdate",r),l=We(e,"onTransaction",r),c=We(e,"onFocus",r),u=We(e,"onBlur",r),d=We(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class oi{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=wt(We(this,"addOptions",{name:this.name}))),this.storage=wt(We(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new oi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>vv(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new oi({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=wt(We(n,"addOptions",{name:n.name})),n.storage=wt(We(n,"addStorage",{name:n.name,options:n.options})),n}}function Lj(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const f=o?.[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l?.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function Oj(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const jZ=oi.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yr({key:new Qi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=Oj(n);return Lj(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),DZ=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),FZ=(t=!1)=>({commands:e})=>e.setContent("",t),BZ=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const p=gh(f);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},zZ=t=>e=>t(e),$Z=()=>({state:t,dispatch:e})=>aZ(t,e),VZ=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new rt(r.doc.resolve(o-1))),!0},UZ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},qZ=t=>({tr:e,state:n,dispatch:r})=>{const i=mr(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},WZ=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},HZ=()=>({state:t,dispatch:e})=>YQ(t,e),KZ=()=>({commands:t})=>t.keyboardShortcut("Enter"),GZ=()=>({state:t,dispatch:e})=>oZ(t,e);function Zy(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:A_(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Ij(t,e,n={}){return t.find(r=>r.type===e&&Zy(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function cN(t,e,n={}){return!!Ij(t,e,n)}function T_(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Ij([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&cN([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&cN([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function zl(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const YZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=zl(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=T_(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=rt.create(o,d.from,d.to);n.setSelection(h)}}return!0},XZ=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Rj(t){return t instanceof rt}function _c(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function jj(t,e=null){if(!e)return null;const n=at.atStart(t),r=at.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?rt.create(t,_c(0,i,s),_c(t.content.size,i,s)):rt.create(t,_c(e,i,s),_c(e,i,s))}function JZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function N_(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const QZ=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(N_()||JZ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!Rj(n.state.selection))return o(),!0;const a=jj(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},ZZ=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),eee=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Dj=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Dj(r)}return t};function Qg(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Dj(n)}function Up(t,e,n){if(t instanceof yl||t instanceof Ce)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ce.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Up("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new _R({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Qf.fromSchema(l).parseSlice(Qg(t),n.parseOptions):Qf.fromSchema(l).parse(Qg(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Qf.fromSchema(e);return n.slice?s.parseSlice(Qg(t),n.parseOptions).content:s.parse(Qg(t),n.parseOptions)}return Up("",e,n)}function tee(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof ur||i instanceof fr))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(at.near(t.doc.resolve(o),n))}const nee=t=>!("type"in t),ree=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Up(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=Up(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((nee(a)?a:[a]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,f=f?v.isBlock:!1}),u===d&&f){const{parent:v}=r.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,d+=1)}let g;if(h){if(Array.isArray(e))g=e.map(v=>v.text||"").join("");else if(e instanceof Ce){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),g=v}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,d)}else g=a,r.replaceWith(u,d,g);n.updateSelection&&tee(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},iee=()=>({state:t,dispatch:e})=>nZ(t,e),see=()=>({state:t,dispatch:e})=>rZ(t,e),oee=()=>({state:t,dispatch:e})=>XQ(t,e),aee=()=>({state:t,dispatch:e})=>eZ(t,e),lee=()=>({state:t,dispatch:e,tr:n})=>{try{const r=lv(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},cee=()=>({state:t,dispatch:e,tr:n})=>{try{const r=lv(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},uee=()=>({state:t,dispatch:e})=>JQ(t,e),dee=()=>({state:t,dispatch:e})=>QQ(t,e);function Fj(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function hee(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))N_()||Fj()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const fee=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=hee(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function qp(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?mr(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),p=Math.min(i,h+d.nodeSize);a.push({node:d,from:f,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Zy(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const pee=(t,e={})=>({state:n,dispatch:r})=>{const i=mr(t,n.schema);return qp(n,i,e)?iZ(n,r):!1},mee=()=>({state:t,dispatch:e})=>lZ(t,e),gee=t=>({state:e,dispatch:n})=>{const r=mr(t,e.schema);return yZ(r)(e,n)},yee=()=>({state:t,dispatch:e})=>sZ(t,e);function bv(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function uN(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const vee=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=bv(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mr(t,r.schema)),a==="mark"&&(o=zl(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,uN(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(uN(d.attrs,e)))})})}),!0):!1},bee=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),xee=()=>({tr:t,dispatch:e})=>{if(e){const n=new ws(t.doc);t.setSelection(n)}return!0},wee=()=>({state:t,dispatch:e})=>ZQ(t,e),See=()=>({state:t,dispatch:e})=>tZ(t,e),kee=()=>({state:t,dispatch:e})=>cZ(t,e),_ee=()=>({state:t,dispatch:e})=>hZ(t,e),Cee=()=>({state:t,dispatch:e})=>dZ(t,e);function P5(t,e,n={},r={}){return Up(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Aee=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=P5(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function Bj(t,e){const n=zl(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Tee(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function zj(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function P_(t){return e=>zj(e.$from,t)}function Nee(t,e){const n={from:0,to:t.content.size};return Lj(t,n,e)}function Pee(t,e){const n=mr(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function Eee(t,e){const n=bv(typeof e=="string"?e:e.name,t.schema);return n==="node"?Pee(t,e):n==="mark"?Bj(t,e):{}}function $j(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=T_(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function H0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function E5(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?zl(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Zy(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,v)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(f,v),x=Math.min(p,v+g.nodeSize),S=x-y;o+=S,a.push(...g.marks.map(C=>({mark:C,from:y,to:x})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Zy(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function Mee(t,e,n={}){if(!e)return qp(t,null,n)||E5(t,null,n);const r=bv(e,t.schema);return r==="node"?qp(t,e,n):r==="mark"?E5(t,e,n):!1}function dN(t,e){const{nodeExtensions:n}=gv(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=wt(We(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function E_(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(E_(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function Lee(t){return t instanceof Ze}function Oee(t,e,n){var r;const{selection:i}=e;let s=null;if(Rj(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}const Iee=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=zl(t,r.schema);if(i)if(o){const c=Bj(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,f)=>{const p=Math.max(f,u),g=Math.min(f+h.nodeSize,d);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&n.addMark(p,g,l.create({...y.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return Oee(r,n,l)},Ree=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),jee=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=mr(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>sN(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>sN(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Dee=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=_c(t,0,r.content.size),s=Ze.create(r,i);e.setSelection(s)}return!0},Fee=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=rt.atStart(r).from,a=rt.atEnd(r).to,l=_c(i,o,a),c=_c(s,o,a),u=rt.create(r,l,c);e.setSelection(u)}return!0},Bee=t=>({state:e,dispatch:n})=>{const r=mr(t,e.schema);return xZ(r)(e,n)};function hN(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}const zee=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=H0(c,a.node().type.name,a.node().attrs);if(s instanceof Ze&&s.node.isBlock)return!a.parentOffset||!Ed(o,a.pos)?!1:(r&&(t&&hN(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:Tee(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,p=Ed(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&Ed(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:u}]:void 0),r){if(p&&(s instanceof rt&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),v=e.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&hN(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},$ee=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=mr(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Ce.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-x;N>=l.depth-3;N-=1)y=Ce.from(l.node(N).copy(y));const S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...H0(h,l.node().type.name,l.node().attrs),...e},A=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;y=y.append(Ce.from(a.createAndFill(null,A)||void 0));const O=l.before(l.depth-(x-1));n.replace(O,l.after(-S),new je(y,4-x,0));let M=-1;n.doc.nodesBetween(O,n.doc.content.size,(N,D)=>{if(M>-1)return!1;N.isTextblock&&N.content.size===0&&(M=D+1)}),M>-1&&n.setSelection(rt.near(n.doc.resolve(M))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...H0(h,d.type.name,d.attrs),...e},g={...H0(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!Ed(n.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:x}=r,{splittableMarks:S}=s.extensionManager,C=x||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!C||!i)return!0;const A=C.filter(O=>S.includes(O.type.name));n.ensureMarks(A)}return!0},Fx=(t,e)=>{const n=P_(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Fl(t.doc,n.pos)&&t.join(n.pos),!0},Bx=(t,e)=>{const n=P_(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Fl(t.doc,r)&&t.join(r),!0},Vee=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=mr(t,o.schema),p=mr(e,o.schema),{selection:g,storedMarks:v}=o,{$from:y,$to:x}=g,S=y.blockRange(x),C=v||g.$to.parentOffset&&g.$from.marks();if(!S)return!1;const A=P_(O=>dN(O.type.name,d))(g);if(S.depth>=1&&A&&S.depth-A.depth<=1){if(A.node.type===f)return c.liftListItem(p);if(dN(A.node.type.name,d)&&f.validContent(A.node.content)&&a)return l().command(()=>(s.setNodeMarkup(A.pos,f),!0)).command(()=>Fx(s,f)).command(()=>Bx(s,f)).run()}return!n||!C||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Fx(s,f)).command(()=>Bx(s,f)).run():l().command(()=>{const O=u().wrapInList(f,r),M=C.filter(N=>h.includes(N.type.name));return s.ensureMarks(M),O?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Fx(s,f)).command(()=>Bx(s,f)).run()},Uee=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=zl(t,r.schema);return E5(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},qee=(t,e,n={})=>({state:r,commands:i})=>{const s=mr(t,r.schema),o=mr(e,r.schema),a=qp(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},Wee=(t,e={})=>({state:n,commands:r})=>{const i=mr(t,n.schema);return qp(n,i,e)?r.lift(i):r.wrapIn(i,e)},Hee=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Kee=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},Gee=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=zl(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:f}=a;const p=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,g=T_(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},Yee=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=bv(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mr(t,r.schema)),a==="mark"&&(o=zl(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,f,p;n.selection.empty?r.doc.nodesBetween(c,u,(g,v)=>{s&&s===g.type&&(f=Math.max(v,c),p=Math.min(v+g.nodeSize,u),d=v,h=g)}):r.doc.nodesBetween(c,u,(g,v)=>{v<c&&s&&s===g.type&&(f=Math.max(v,c),p=Math.min(v+g.nodeSize,u),d=v,h=g),v>=c&&v<=u&&(s&&s===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(y=>{if(o===y.type){const x=Math.max(v,c),S=Math.min(v+g.nodeSize,u);n.addMark(x,S,o.create({...y.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&n.addMark(f,p,o.create({...g.attrs,...e}))}))}),!0):!1},Xee=(t,e={})=>({state:n,dispatch:r})=>{const i=mr(t,n.schema);return fZ(i,e)(n,r)},Jee=(t,e={})=>({state:n,dispatch:r})=>{const i=mr(t,n.schema);return pZ(i,e)(n,r)};var Qee=Object.freeze({__proto__:null,blur:DZ,clearContent:FZ,clearNodes:BZ,command:zZ,createParagraphNear:$Z,cut:VZ,deleteCurrentNode:UZ,deleteNode:qZ,deleteRange:WZ,deleteSelection:HZ,enter:KZ,exitCode:GZ,extendMarkRange:YZ,first:XZ,focus:QZ,forEach:ZZ,insertContent:eee,insertContentAt:ree,joinBackward:oee,joinDown:see,joinForward:aee,joinItemBackward:lee,joinItemForward:cee,joinTextblockBackward:uee,joinTextblockForward:dee,joinUp:iee,keyboardShortcut:fee,lift:pee,liftEmptyBlock:mee,liftListItem:gee,newlineInCode:yee,resetAttributes:vee,scrollIntoView:bee,selectAll:xee,selectNodeBackward:wee,selectNodeForward:See,selectParentNode:kee,selectTextblockEnd:_ee,selectTextblockStart:Cee,setContent:Aee,setMark:Iee,setMeta:Ree,setNode:jee,setNodeSelection:Dee,setTextSelection:Fee,sinkListItem:Bee,splitBlock:zee,splitListItem:$ee,toggleList:Vee,toggleMark:Uee,toggleNode:qee,toggleWrap:Wee,undoInputRule:Hee,unsetAllMarks:Kee,unsetMark:Gee,updateAttributes:Yee,wrapIn:Xee,wrapInList:Jee});const Zee=oi.create({name:"commands",addCommands(){return{...Qee}}}),ete=oi.create({name:"drop",addProseMirrorPlugins(){return[new Yr({key:new Qi("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),tte=oi.create({name:"editable",addProseMirrorPlugins(){return[new Yr({key:new Qi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),nte=new Qi("focusEvents"),rte=oi.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yr({key:nte,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),ite=oi.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,p=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,g=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,y=g&&p.parent.childCount===1?v===d.pos:at.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return N_()||Fj()?s:i},addProseMirrorPlugins(){return[new Yr({key:new Qi("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=at.atStart(e.doc).from,c=at.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!E_(n.doc))return;const h=n.tr,f=pv({state:n,transaction:h}),{commands:p}=new mv({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),ste=oi.create({name:"paste",addProseMirrorPlugins(){return[new Yr({key:new Qi("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ote=oi.create({name:"tabindex",addProseMirrorPlugins(){return[new Yr({key:new Qi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class gc{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new gc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new gc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new gc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new gc(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new gc(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const ate=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function lte(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class cte extends wZ{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=lte(ate,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Mj(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[tte,jZ.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Zee,rte,ite,ote,ete,ste].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new bd(i,this)}createCommandManager(){this.commandManager=new mv({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=P5(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=P5(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=jj(n,this.options.autofocus);this.view=new kj(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:vd.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Eee(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return Mee(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return C_(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return Nee(this.state.doc,{blockSeparator:n,textSerializers:{...Oj(this.schema),...r}})}get isEmpty(){return E_(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new gc(n,this)}get $doc(){return this.$pos(0)}}function nh(t){return new yv({find:t.find,handler:({state:e,range:n,match:r})=>{const i=wt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if($j(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function Vj(t){return new yv({find:t.find,handler:({state:e,range:n,match:r})=>{const i=wt(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function M5(t){return new yv({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=wt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Wp(t){return new yv({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=wt(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&d_(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,p=h||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(v=>f.includes(v.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Fl(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class nr{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=wt(We(this,"addOptions",{name:this.name}))),this.storage=wt(We(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new nr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>vv(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new nr(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=wt(We(n,"addOptions",{name:n.name})),n.storage=wt(We(n,"addStorage",{name:n.name,options:n.options})),n}}function rh(t){return new EZ({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=wt(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if($j(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function ute(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uj={exports:{}},zx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN;function dte(){if(fN)return zx;fN=1;var t=nt;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,v=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&v({inst:g})},[d,f,h]),i(function(){return l(g)&&v({inst:g}),d(function(){l(g)&&v({inst:g})})},[d]),o(f),f}function l(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return zx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,zx}Uj.exports=dte();var M_=Uj.exports;const hte=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},fte=({contentComponent:t})=>{const e=M_.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return nt.createElement(nt.Fragment,null,Object.values(e))};function pte(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Ty.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class mte extends nt.Component{constructor(e){var n;super(e),this.editorContentRef=nt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=pte(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return nt.createElement(nt.Fragment,null,nt.createElement("div",{ref:hte(n,this.editorContentRef),...r}),e?.contentComponent&&nt.createElement(fte,{contentComponent:e.contentComponent}))}}const gte=W.forwardRef((t,e)=>{const n=nt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return nt.createElement(mte,{key:n,innerRef:e,...t})}),yte=nt.memo(gte);var vte=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},bte=ute(vte),qj={exports:{}},$x={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN;function xte(){if(pN)return $x;pN=1;var t=nt,e=M_;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return $x.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function y(O){if(!x){if(x=!0,S=O,O=h(O),f!==void 0&&g.hasValue){var M=g.value;if(f(M,O))return C=M}return C=O}if(M=C,r(S,O))return M;var N=h(O);return f!==void 0&&f(M,N)?M:(S=O,C=N)}var x=!1,S,C,A=d===void 0?null:d;return[function(){return y(u())},A===null?void 0:function(){return y(A())}]},[u,d,h,f]);var v=i(c,p[0],p[1]);return o(function(){g.hasValue=!0,g.value=v},[v]),l(v),v},$x}qj.exports=xte();var wte=qj.exports;const Ste=typeof window<"u"?W.useLayoutEffect:W.useEffect;class kte{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function _te(t){var e;const[n]=W.useState(()=>new kte(t.editor)),r=wte.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:bte);return Ste(()=>n.watch(t.editor),[t.editor,n]),W.useDebugValue(r),r}const Cte=!1,L5=typeof window>"u",Ate=L5||!!(typeof window<"u"&&window.next);class L_{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return L5||Ate?null:this.createEditor();if(this.options.current.immediatelyRender&&L5&&Cte)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new cte(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?L_.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Tte(t={},e=[]){const n=W.useRef(t);n.current=t;const[r]=W.useState(()=>new L_(n)),i=M_.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return W.useDebugValue(i),W.useEffect(r.onRender(e)),_te({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const Nte=W.createContext({editor:null});Nte.Consumer;const Pte=W.createContext({onDragStart:void 0}),Ete=()=>W.useContext(Pte);nt.forwardRef((t,e)=>{const{onDragStart:n}=Ete(),r=t.as||"div";return nt.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Mte=/^\s*>\s$/,Lte=nr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Wp({find:Mte,type:this.type})]}}),Ote=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Ite=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Rte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,jte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Dte=Nl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[nh({find:Ote,type:this.type}),nh({find:Rte,type:this.type})]},addPasteRules(){return[rh({find:Ite,type:this.type}),rh({find:jte,type:this.type})]}}),Fte="listItem",mN="textStyle",gN=/^\s*([-+*])\s$/,Bte=nr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Fte,this.editor.getAttributes(mN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Wp({find:gN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wp({find:gN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mN),editor:this.editor})),[t]}}),zte=/(^|[^`])`([^`]+)`(?!`)/,$te=/(^|[^`])`([^`]+)`(?!`)/g,Vte=Nl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[nh({find:zte,type:this.type})]},addPasteRules(){return[rh({find:$te,type:this.type})]}}),Ute=/^```([a-z]+)?[\s\n]$/,qte=/^~~~([a-z]+)?[\s\n]$/,Wte=nr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Jn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(at.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[M5({find:Ute,type:this.type,getAttributes:t=>({language:t[1]})}),M5({find:qte,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yr({key:new Qi("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(rt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Hte=nr.create({name:"doc",topNode:!0,content:"block+"});function Kte(t={}){return new Yr({view(e){return new Gte(e,t)}})}class Gte{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=d?p.bottom:p.top;d&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:p.left,right:p.right,top:g-v,bottom:g+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=RR(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Yte=oi.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Kte(this.options)]}});class Nn extends at{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Nn.valid(r)?new Nn(r):at.near(r)}content(){return je.empty}eq(e){return e instanceof Nn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Nn(e.resolve(n.pos))}getBookmark(){return new O_(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Xte(e)||!Jte(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Nn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Nn.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ze.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Nn.valid(a))return a}return null}}}Nn.prototype.visible=!1;Nn.findFrom=Nn.findGapCursorFrom;at.jsonID("gapcursor",Nn);class O_{constructor(e){this.pos=e}map(e){return new O_(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Nn.valid(n)?new Nn(n):at.near(n)}}function Xte(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Jte(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Qte(){return new Yr({props:{decorations:nne,createSelectionBetween(t,e,n){return e.pos==n.pos&&Nn.valid(n)?new Nn(n):null},handleClick:ene,handleKeyDown:Zte,handleDOMEvents:{beforeinput:tne}}})}const Zte=S_({ArrowLeft:Zg("horiz",-1),ArrowRight:Zg("horiz",1),ArrowUp:Zg("vert",-1),ArrowDown:Zg("vert",1)});function Zg(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof rt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Nn.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Nn(c))),!0):!1}}function ene(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Nn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ze.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Nn(r))),!0)}function tne(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Nn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ce.empty;for(let o=r.length-1;o>=0;o--)i=Ce.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new je(i,0,0));return s.setSelection(rt.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function nne(t){if(!(t.selection instanceof Nn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Tn.create(t.doc,[ti.widget(t.selection.head,e,{key:"gapcursor"})])}const rne=oi.create({name:"gapCursor",addProseMirrorPlugins(){return[Qte()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=wt(We(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),ine=nr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Jn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),sne=nr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Jn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>M5({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var e1=200,pr=function(){};pr.prototype.append=function(e){return e.length?(e=pr.from(e),!this.length&&e||e.length<e1&&this.leafAppend(e)||this.length<e1&&e.leafPrepend(this)||this.appendInner(e)):this};pr.prototype.prepend=function(e){return e.length?pr.from(e).append(this):this};pr.prototype.appendInner=function(e){return new one(this,e)};pr.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?pr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};pr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};pr.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};pr.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};pr.from=function(e){return e instanceof pr?e:e&&e.length?new Wj(e):pr.empty};var Wj=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=e1)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=e1)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(pr);pr.empty=new Wj([]);var one=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(pr);const ane=500;class Ws{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new uo(d.map));let f=d.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new uo(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Ws(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new uo(e.mapping.maps[u],d,n),f;(f=l&&l.merge(h))&&(h=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>cne&&(a=lne(a,c),o-=c),new Ws(a.append(s),o)}remapping(e,n){let r=new Fp;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ws(this.items.append(e.map(n=>new uo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),v=h.selection&&h.selection.map(s.slice(l+1,f));v&&a++,r.push(new uo(p,g,v))}else r.push(new uo(p))},i);let c=[];for(let h=n;h<o;h++)c.push(new uo(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new Ws(u,a);return d.emptyItemCount()>ane&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new uo(c.invert(),l,u),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new Ws(pr.from(i.reverse()),s)}}Ws.empty=new Ws(pr.empty,0);function lne(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class uo{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new uo(n.getMap().invert(),n,this.selection)}}}class Ha{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const cne=20;function une(t,e,n,r){let i=n.getMeta(Dc),s;if(i)return i.historyState;n.getMeta(fne)&&(t=new Ha(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Dc))return o.getMeta(Dc).redo?new Ha(t.done.addTransform(n,void 0,r,K0(e)),t.undone,yN(n.mapping.maps),t.prevTime,t.prevComposition):new Ha(t.done,t.undone.addTransform(n,void 0,r,K0(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!dne(n,t.prevRanges)),c=o?Vx(t.prevRanges,n.mapping):yN(n.mapping.maps);return new Ha(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,K0(e)),Ws.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ha(t.done.rebased(n,s),t.undone.rebased(n,s),Vx(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ha(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Vx(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function dne(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function yN(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Vx(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function hne(t,e,n){let r=K0(e),i=Dc.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Ha(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Dc,{redo:n,historyState:l})}let Ux=!1,vN=null;function K0(t){let e=t.plugins;if(vN!=e){Ux=!1,vN=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ux=!0;break}}return Ux}const Dc=new Qi("history"),fne=new Qi("closeHistory");function pne(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yr({key:Dc,state:{init(){return new Ha(Ws.empty,Ws.empty,null,0,-1)},apply(e,n,r){return une(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Kj:r=="historyRedo"?Gj:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Hj(t,e){return(n,r)=>{let i=Dc.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=hne(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Kj=Hj(!1,!0),Gj=Hj(!0,!0),mne=oi.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Kj(t,e),redo:()=>({state:t,dispatch:e})=>Gj(t,e)}},addProseMirrorPlugins(){return[pne(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),gne=nr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Jn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Lee(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(rt.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Ze.create(o.doc,c.pos)):o.setSelection(rt.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(rt.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Vj({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),yne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,vne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,bne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,xne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,wne=Nl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[nh({find:yne,type:this.type}),nh({find:bne,type:this.type})]},addPasteRules(){return[rh({find:vne,type:this.type}),rh({find:xne,type:this.type})]}}),Sne=nr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Jn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kne="listItem",bN="textStyle",xN=/^(\d+)\.\s$/,_ne=nr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Jn(this.options.HTMLAttributes,n),0]:["ol",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kne,this.editor.getAttributes(bN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Wp({find:xN,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Wp({find:xN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(bN)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Cne=nr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ane=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Tne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Nne=Nl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[nh({find:Ane,type:this.type})]},addPasteRules(){return[rh({find:Tne,type:this.type})]}}),Pne=nr.create({name:"text",group:"inline"}),Ene=oi.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(Dte.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(Lte.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(Bte.configure(this.options.bulletList)),this.options.code!==!1&&t.push(Vte.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(Wte.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(Hte.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(Yte.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(rne.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(ine.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(sne.configure(this.options.heading)),this.options.history!==!1&&t.push(mne.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(gne.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(wne.configure(this.options.italic)),this.options.listItem!==!1&&t.push(Sne.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(_ne.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(Cne.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(Nne.configure(this.options.strike)),this.options.text!==!1&&t.push(Pne.configure(this.options.text)),t}}),Mne=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Lne=nr.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Jn(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Vj({find:Mne,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}});var O5,I5;if(typeof WeakMap<"u"){let t=new WeakMap;O5=e=>t.get(e),I5=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;O5=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},I5=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Pn=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return O5(t)||I5(t,One(t))}};function One(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Ine(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;const g=d.child(p),{colspan:v,rowspan:y,colwidth:x}=g.attrs;for(let S=0;S<y;S++){if(S+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:y-S});break}const C=i+S*e;for(let A=0;A<v;A++){r[C+A]==0?r[C+A]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:v-A});const O=x&&x[A];if(O){const M=(C+A)%e*2,N=o[M];N==null||N!=O&&o[M+1]==1?(o[M]=O,o[M+1]=1):N==O&&o[M+1]++}}}i+=v,u+=g.nodeSize}const h=(c+1)*e;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),u++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Pn(e,n,r,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&Rne(a,o,t),a}function Ine(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Rne(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=(i+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=jne(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function jne(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Hr(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Ja=new Qi("selectingCells");function yh(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Dne(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Zs(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function xv(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=yh(e.$head)||Fne(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Fne(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function R5(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Bne(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function I_(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Yj(t,e,n){const r=t.node(-1),i=Pn.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function eu(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function Xj(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function zne(t,e,n){const r=Hr(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var en=class Uo extends at{constructor(e,n=e){const r=e.node(-1),i=Pn.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const h=s+u+1;return new $R(a.resolve(h),a.resolve(h+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(R5(r)&&R5(i)&&I_(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Uo.rowSelection(r,i):s&&this.isColSelection()?Uo.colSelection(r,i):new Uo(r,i)}return rt.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Pn.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,d=i.left;d<i.right;d++,u++){const h=n.map[u];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=i.left-f.left,v=f.right-i.right;if(g>0||v>0){let y=p.attrs;if(g>0&&(y=eu(y,0,g)),v>0&&(y=eu(y,y.colspan-v,v)),f.left<i.left){if(p=p.type.createAndFill(y),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(y)}`)}else p=p.type.create(y,p.content)}if(f.top<i.top||f.bottom>i.bottom){const y={...p.attrs,rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)};f.top<i.top?p=p.type.createAndFill(y):p=p.type.create(y,p.content)}c.push(p)}o.push(e.child(l).copy(Ce.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new je(Ce.from(a),1,1)}replace(e,n=je.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?je.empty:n)}const s=at.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new je(Ce.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Pn.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Pn.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Uo(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Pn.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof Uo&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Pn.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new Uo(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Uo(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Uo(e.resolve(n),e.resolve(r))}getBookmark(){return new $ne(this.$anchorCell.pos,this.$headCell.pos)}};en.prototype.visible=!1;at.jsonID("cell",en);var $ne=class Jj{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Jj(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&I_(n,r)?new en(n,r):at.near(r,1)}};function Vne(t){if(!(t.selection instanceof en))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(ti.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Tn.create(t.doc,e)}function Une({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function qne({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Wne(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof Ze&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=en.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=en.rowSelection(a,a)}else if(!n){const a=Pn.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=en.create(i,l+1,c)}}else r instanceof rt&&Une(r)?s=rt.create(i,r.from):r instanceof rt&&qne(r)&&(s=rt.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var Hne=new Qi("fix-tables");function Qj(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?Qj(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Zj(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=Kne(t,i,s,n))};return e?e.doc!=t.doc&&Qj(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Kne(t,e,n,r){const i=Pn.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let h=0;h<d.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,eu(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=e.child(l),d=c+u.nodeSize,h=s[l];if(h>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const p=[];for(let v=0;v<h;v++){const y=Hr(t.schema)[f].createAndFill();y&&p.push(y)}const g=(l==0||o==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(g),p)}c=d}return r.setMeta(Hne,{fixTables:!0})}function Ao(t){const e=t.selection,n=xv(t),r=n.node(-1),i=n.start(-1),s=Pn.get(r);return{...e instanceof en?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function eD(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;zne(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,Xj(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?Hr(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function Gne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(eD(t.tr,n,n.left))}return!0}function Yne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(eD(t.tr,n,n.right))}return!0}function Xne(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,eu(u,i-e.colCount(l)));else{const d=t.mapping.slice(s).map(r+l);t.delete(d,d+c.nodeSize)}o+=u.rowspan}}function Jne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;Xne(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Pn.get(s)}e(r)}return!0}function Qne(t,e,n){var r;const i=Hr(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function tD(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let c=0;c<i;c++)o+=r.child(c).nodeSize;const a=[];let l=i>0?-1:0;Qne(e,r,i+l)&&(l=i==0||i==e.height?null:0);for(let c=0,u=e.width*i;c<e.width;c++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],h=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const d=l==null?Hr(r.type.schema).cell:(s=r.nodeAt(e.map[u+l*e.width]))==null?void 0:s.type,h=d?.createAndFill();h&&a.push(h)}return t.insert(o,Hr(r.type.schema).row.create(null,a)),t}function Zne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(tD(t.tr,n,n.top))}return!0}function ere(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(tD(t.tr,n,n.bottom))}return!0}function tre(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+r,o+r);const l=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),i>0&&d==e.map[u-e.width]){const h=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(i<e.height&&d==e.map[u+e.width]){const h=n.nodeAt(d),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function nre(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;tre(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Pn.get(n.table)}e(r)}return!0}function wN(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function rre({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function SN(t,e){const n=t.selection;if(!(n instanceof en)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Ao(t),{map:i}=r;if(rre(i,r))return!1;if(e){const s=t.tr,o={};let a=Ce.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const h=i.map[u*i.width+d],f=r.table.nodeAt(h);if(!(o[h]||!f))if(o[h]=!0,l==null)l=h,c=f;else{wN(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...Xj(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=wN(c)?l+1:u;s.replaceWith(d+r.tableStart,u+r.tableStart,a)}s.setSelection(new en(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function kN(t,e){const n=Hr(t.schema);return ire(({node:r})=>n[r.type.spec.tableRole])(t,e)}function ire(t){return(e,n)=>{var r;const i=e.selection;let s,o;if(i instanceof en){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=Dne(i.$from),!s)return!1;o=(r=yh(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=Ao(e),d=e.tr;for(let f=0;f<u.right-u.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=u.top;f<u.bottom;f++){let p=u.map.positionAt(f,u.left,u.table);f==u.top&&(p+=s.nodeSize);for(let g=u.left,v=0;g<u.right;g++,v++)g==u.left&&f==u.top||d.insert(h=d.mapping.map(p+u.tableStart,1),t({node:s,row:f,col:g}).createAndFill(l[v]))}d.setNodeMarkup(o,t({node:s,row:u.top,col:u.left}),l[0]),i instanceof en&&d.setSelection(new en(d.doc.resolve(i.$anchorCell.pos),h?d.doc.resolve(h):void 0)),n(d)}return!0}}function sre(t,e){return function(n,r){if(!Zs(n))return!1;const i=xv(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof en?n.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function ore(t){return function(e,n){if(!Zs(e))return!1;if(n){const r=Hr(e.schema),i=Ao(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function _N(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Hp(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?ore(t):function(n,r){if(!Zs(n))return!1;if(r){const i=Hr(n.schema),s=Ao(n),o=n.tr,a=_N("row",s,i),l=_N("column",s,i),u=(t==="column"?a:t==="row"?l:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(f=>{const p=f+s.tableStart,g=o.doc.nodeAt(p);g&&o.setNodeMarkup(p,h,g.attrs)}),r(o)}return!0}}Hp("row",{useDeprecatedLogic:!0});Hp("column",{useDeprecatedLogic:!0});var are=Hp("cell",{useDeprecatedLogic:!0});function lre(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function CN(t){return function(e,n){if(!Zs(e))return!1;const r=lre(xv(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(rt.between(i,Bne(i))).scrollIntoView())}return!0}}function cre(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function e0(t,e){const n=t.selection;if(!(n instanceof en))return!1;if(e){const r=t.tr,i=Hr(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new je(i,0,0))}),r.docChanged&&e(r)}return!0}function ure(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=j5(Hr(o).row,new je(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?j5(Hr(o).row,new je(e,n,r)).content:e);else return null;return dre(o,a)}function dre(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ce.empty),n[i]<r){const s=Hr(t).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);e[i]=e[i].append(Ce.from(o))}return{height:e.length,width:r,rows:e}}function j5(t,e){const n=t.createAndFill();return new zR(n).replace(0,n.content.size,e).doc}function hre({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let h=l.child(d%l.childCount);u+h.attrs.colspan>r&&(h=h.type.createChecked(eu(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),c.push(h),u+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}o.push(Ce.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);o+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}s.push(Ce.from(l))}n=s,e=i}return{width:t,height:e,rows:n}}function fre(t,e,n,r,i,s,o){const a=t.doc.type.schema,l=Hr(a);let c,u;if(i>e.width)for(let d=0,h=0;d<e.height;d++){const f=n.child(d);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=u||(u=l.header_cell.createAndFill());for(let v=e.width;v<i;v++)p.push(g);t.insert(t.mapping.slice(o).map(h-1+r),p)}if(s>e.height){const d=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const v=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;d.push(v?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,Ce.from(d)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),f)}return!!(c||u)}function AN(t,e,n,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const u=o*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const h=n.nodeAt(d),{top:f,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h.attrs,rowspan:o-f}),t.insert(t.mapping.slice(a).map(e.positionAt(o,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-o})),c+=h.attrs.colspan-1}}return l}function TN(t,e,n,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const u=c*e.width+o,d=e.map[u];if(e.map[u-1]==d){l=!0;const h=n.nodeAt(d),f=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,eu(h.attrs,o-f,h.attrs.colspan-(o-f))),t.insert(p+h.nodeSize,h.type.createAndFill(eu(h.attrs,0,o-f))),c+=h.attrs.rowspan-1}}return l}function NN(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=Pn.get(s);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=t.tr;let h=0;function f(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=Pn.get(s),h=d.mapping.maps.length}fre(d,o,s,n,c,u,h)&&f(),AN(d,o,s,n,l,c,a,h)&&f(),AN(d,o,s,n,l,c,u,h)&&f(),TN(d,o,s,n,a,u,l,h)&&f(),TN(d,o,s,n,a,u,c,h)&&f();for(let p=a;p<u;p++){const g=o.positionAt(p,l,s),v=o.positionAt(p,c,s);d.replace(d.mapping.slice(h).map(g+n),d.mapping.slice(h).map(v+n),new je(i.rows[p-a],0,0))}f(),d.setSelection(new en(d.doc.resolve(n+o.positionAt(a,l,s)),d.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(d)}var pre=S_({ArrowLeft:t0("horiz",-1),ArrowRight:t0("horiz",1),ArrowUp:t0("vert",-1),ArrowDown:t0("vert",1),"Shift-ArrowLeft":n0("horiz",-1),"Shift-ArrowRight":n0("horiz",1),"Shift-ArrowUp":n0("vert",-1),"Shift-ArrowDown":n0("vert",1),Backspace:e0,"Mod-Backspace":e0,Delete:e0,"Mod-Delete":e0});function G0(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function t0(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof en)return G0(n,r,at.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=nD(i,t,e);if(o==null)return!1;if(t=="horiz")return G0(n,r,at.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(o),l=Yj(a,t,e);let c;return l?c=at.near(l,1):e<0?c=at.near(n.doc.resolve(a.before(-1)),-1):c=at.near(n.doc.resolve(a.after(-1)),1),G0(n,r,c)}}}function n0(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof en)o=s;else{const l=nD(i,t,e);if(l==null)return!1;o=new en(n.doc.resolve(l))}const a=Yj(o.$headCell,t,e);return a?G0(n,r,new en(o.$anchorCell,a)):!1}}function mre(t,e){const n=t.state.doc,r=yh(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new en(r))),!0):!1}function gre(t,e,n){if(!Zs(t.state))return!1;let r=ure(n);const i=t.state.selection;if(i instanceof en){r||(r={width:1,height:1,rows:[Ce.from(j5(Hr(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=Pn.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=hre(r,a.right-a.left,a.bottom-a.top),NN(t.state,t.dispatch,o,a,r),!0}else if(r){const s=xv(t.state),o=s.start(-1);return NN(t.state,t.dispatch,o,Pn.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function yre(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=PN(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof en)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=yh(t.state.selection.$anchor))!=null&&((n=qx(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,c){let u=qx(t,c);const d=Ja.getState(t.state)==null;if(!u||!I_(l,u))if(d)u=l;else return;const h=new en(l,u);if(d||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);d&&f.setMeta(Ja,l.pos),t.dispatch(f)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Ja.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Ja,-1))}function a(l){const c=l,u=Ja.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(PN(t,c.target)!=r&&(d=qx(t,e),!d))return o();d&&s(d,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function nD(t,e,n){if(!(t.state.selection instanceof rt))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(i),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function PN(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function qx(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?yh(t.state.doc.resolve(n.pos)):null}var vre=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),D5(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,D5(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function D5(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let d=0,h=0;d<u.childCount;d++){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let g=0;g<f;g++,h++){const v=i==h?s:p&&p[g],y=v?v+"px":"";if(a+=v||r,v||(l=!1),c)c.style.width!=y&&(c.style.width=y),c=c.nextSibling;else{const x=document.createElement("col");x.style.width=y,e.appendChild(x)}}}for(;c;){const d=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Ui=new Qi("tableColumnResizing");function bre({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=vre,lastColumnResizable:i=!0}={}){const s=new Yr({key:Ui,state:{init(o,a){var l,c;const u=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,d=Hr(a.schema).table.name;return r&&u&&(u[d]=(h,f)=>new r(h,n,f)),new xre(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=Ui.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{wre(o,a,t,i)},mouseleave:o=>{Sre(o)},mousedown:(o,a)=>{kre(o,a,e,n)}},decorations:o=>{const a=Ui.getState(o);if(a&&a.activeHandle>-1)return Nre(o,a.activeHandle)},nodeViews:{}}});return s}var xre=class Y0{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Ui);if(r&&r.setHandle!=null)return new Y0(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Y0(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return R5(e.doc.resolve(i))||(i=-1),new Y0(i,n.dragging)}return n}};function wre(t,e,n,r){if(!t.editable)return;const i=Ui.getState(t.state);if(i&&!i.dragging){const s=Cre(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?o=EN(t,e,"left",n):l-e.clientX<=n&&(o=EN(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=Pn.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}rD(t,o)}}}function Sre(t){if(!t.editable)return;const e=Ui.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&rD(t,-1)}function kre(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=Ui.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=_re(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Ui,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const h=Ui.getState(t.state);h?.dragging&&(Are(t,h.activeHandle,MN(h.dragging,d,n)),t.dispatch(t.state.tr.setMeta(Ui,{setDragging:null})))}function u(d){if(!d.which)return c(d);const h=Ui.getState(t.state);if(h&&h.dragging){const f=MN(h.dragging,d,n);LN(t,h.activeHandle,f,r)}}return LN(t,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function _re(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function Cre(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function EN(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=yh(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=Pn.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function MN(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function rD(t,e){t.dispatch(t.state.tr.setMeta(Ui,{setHandle:e}))}function Are(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=Pn.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],h=i.nodeAt(d).attrs,f=h.colspan==1?0:a-s.colCount(d);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():Tre(h.colspan);p[f]=n,l.setNodeMarkup(o+d,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function LN(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=Pn.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&D5(s,l.firstChild,l,r,a,n)}function Tre(t){return Array(t).fill(0)}function Nre(t,e){var n;const r=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return Tn.empty;const o=Pn.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const u=l+c*o.width;if((l==o.width-1||o.map[u]!=o.map[u+1])&&(c==0||o.map[u]!=o.map[u-o.width])){const d=o.map[u],h=a+d+s.nodeAt(d).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=Ui.getState(t))!=null&&n.dragging&&r.push(ti.node(a+d,a+d+s.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(ti.widget(h,f))}}return Tn.create(t.doc,r)}function Pre({allowTableNodeSelection:t=!1}={}){return new Yr({key:Ja,state:{init(){return null},apply(e,n){const r=e.getMeta(Ja);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:Vne,handleDOMEvents:{mousedown:yre},createSelectionBetween(e){return Ja.getState(e.state)!=null?e.state.selection:null},handleTripleClick:mre,handleKeyDown:pre,handlePaste:gre},appendTransaction(e,n,r){return Wne(r,Zj(r,n),t)}})}function F5(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function ON(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u!==null)for(let d=0,h=0;d<u.childCount;d+=1){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let g=0;g<f;g+=1,h+=1){const v=i===h?s:p&&p[g],y=v?`${v}px`:"";if(a+=v||r,v||(l=!1),c){if(c.style.width!==y){const[x,S]=F5(r,v);c.style.setProperty(x,S)}c=c.nextSibling}else{const x=document.createElement("col"),[S,C]=F5(r,v);x.style.setProperty(S,C),e.appendChild(x)}}}for(;c;){const d=c.nextSibling;(o=c.parentNode)===null||o===void 0||o.removeChild(c),c=d}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}class Ere{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ON(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,ON(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function Mre(t,e,n,r){let i=0,s=!0;const o=[],a=t.firstChild;if(!a)return{};for(let d=0,h=0;d<a.childCount;d+=1){const{colspan:f,colwidth:p}=a.child(d).attrs;for(let g=0;g<f;g+=1,h+=1){const v=n===h?r:p&&p[g];i+=v||e,v||(s=!1);const[y,x]=F5(e,v);o.push(["col",{style:`${y}: ${x}`}])}}const l=s?`${i}px`:"",c=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:l,tableMinWidth:c}}function IN(t,e){return e?t.createChecked(null,e):t.createAndFill()}function Lre(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function Ore(t,e,n,r,i){const s=Lre(t),o=[],a=[];for(let c=0;c<n;c+=1){const u=IN(s.cell,i);if(u&&a.push(u),r){const d=IN(s.header_cell,i);d&&o.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,r&&c===0?o:a));return s.table.createChecked(null,l)}function Ire(t){return t instanceof en}const r0=({editor:t})=>{const{selection:e}=t.state;if(!Ire(e))return!1;let n=0;const r=zj(e.ranges[0].$from,s=>s.type.name==="table");return r?.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},Rre=nr.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Ere,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=Mre(t,this.options.cellMinWidth);return["table",Jn(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=Ore(s.schema,t,e,n);if(i){const a=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(rt.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>Gne(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>Yne(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Jne(t,e),addRowBefore:()=>({state:t,dispatch:e})=>Zne(t,e),addRowAfter:()=>({state:t,dispatch:e})=>ere(t,e),deleteRow:()=>({state:t,dispatch:e})=>nre(t,e),deleteTable:()=>({state:t,dispatch:e})=>cre(t,e),mergeCells:()=>({state:t,dispatch:e})=>SN(t,e),splitCell:()=>({state:t,dispatch:e})=>kN(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Hp("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Hp("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>are(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>SN(t,e)?!0:kN(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>sre(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>CN(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>CN(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&Zj(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=en.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:r0,"Mod-Backspace":r0,Delete:r0,"Mod-Delete":r0}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[bre({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Pre({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:wt(We(t,"tableRole",e))}}}),jre=nr.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Jn(this.options.HTMLAttributes,t),0]}}),Dre=nr.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Jn(this.options.HTMLAttributes,t),0]}}),Fre=nr.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Jn(this.options.HTMLAttributes,t),0]}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bm(t){return t+.5|0}const sl=(t,e,n)=>Math.max(Math.min(t,n),e);function Nf(t){return sl(bm(t*2.55),0,255)}function wl(t){return sl(bm(t*255),0,255)}function Xo(t){return sl(bm(t/2.55)/100,0,1)}function RN(t){return sl(bm(t*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},B5=[..."0123456789ABCDEF"],Bre=t=>B5[t&15],zre=t=>B5[(t&240)>>4]+B5[t&15],i0=t=>(t&240)>>4===(t&15),$re=t=>i0(t.r)&&i0(t.g)&&i0(t.b)&&i0(t.a);function Vre(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ds[t[1]]*17,g:255&ds[t[2]]*17,b:255&ds[t[3]]*17,a:e===5?ds[t[4]]*17:255}:(e===7||e===9)&&(n={r:ds[t[1]]<<4|ds[t[2]],g:ds[t[3]]<<4|ds[t[4]],b:ds[t[5]]<<4|ds[t[6]],a:e===9?ds[t[7]]<<4|ds[t[8]]:255})),n}const Ure=(t,e)=>t<255?e(t):"";function qre(t){var e=$re(t)?Bre:zre;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Ure(t.a,e):void 0}const Wre=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iD(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Hre(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Kre(t,e,n){const r=iD(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Gre(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function R_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Gre(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function j_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(wl)}function D_(t,e,n){return j_(iD,t,e,n)}function Yre(t,e,n){return j_(Kre,t,e,n)}function Xre(t,e,n){return j_(Hre,t,e,n)}function sD(t){return(t%360+360)%360}function Jre(t){const e=Wre.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Nf(+e[5]):wl(+e[5]));const i=sD(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Yre(i,s,o):e[1]==="hsv"?r=Xre(i,s,o):r=D_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Qre(t,e){var n=R_(t);n[0]=sD(n[0]+e),n=D_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Zre(t){if(!t)return;const e=R_(t),n=e[0],r=RN(e[1]),i=RN(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Xo(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const jN={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},DN={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function eie(){const t={},e=Object.keys(DN),n=Object.keys(jN);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,jN[s]);s=parseInt(DN[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let s0;function tie(t){s0||(s0=eie(),s0.transparent=[0,0,0,0]);const e=s0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const nie=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rie(t){const e=nie.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Nf(o):sl(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Nf(r):sl(r,0,255)),i=255&(e[4]?Nf(i):sl(i,0,255)),s=255&(e[6]?Nf(s):sl(s,0,255)),{r,g:i,b:s,a:n}}}function iie(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Wx=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,qu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function sie(t,e,n){const r=qu(Xo(t.r)),i=qu(Xo(t.g)),s=qu(Xo(t.b));return{r:wl(Wx(r+n*(qu(Xo(e.r))-r))),g:wl(Wx(i+n*(qu(Xo(e.g))-i))),b:wl(Wx(s+n*(qu(Xo(e.b))-s))),a:t.a+n*(e.a-t.a)}}function o0(t,e,n){if(t){let r=R_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=D_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function oD(t,e){return t&&Object.assign(e||{},t)}function FN(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=wl(t[3]))):(e=oD(t,{r:0,g:0,b:0,a:1}),e.a=wl(e.a)),e}function oie(t){return t.charAt(0)==="r"?rie(t):Jre(t)}class Kp{constructor(e){if(e instanceof Kp)return e;const n=typeof e;let r;n==="object"?r=FN(e):n==="string"&&(r=Vre(e)||tie(e)||oie(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=oD(this._rgb);return e&&(e.a=Xo(e.a)),e}set rgb(e){this._rgb=FN(e)}rgbString(){return this._valid?iie(this._rgb):void 0}hexString(){return this._valid?qre(this._rgb):void 0}hslString(){return this._valid?Zre(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=sie(this._rgb,e._rgb,n)),this}clone(){return new Kp(this.rgb)}alpha(e){return this._rgb.a=wl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=bm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return o0(this._rgb,2,e),this}darken(e){return o0(this._rgb,2,-e),this}saturate(e){return o0(this._rgb,1,e),this}desaturate(e){return o0(this._rgb,1,-e),this}rotate(e){return Qre(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zo(){}const aie=(()=>{let t=0;return()=>t++})();function _t(t){return t==null}function nn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function En(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Bi(t,e){return En(t)?t:e}function xt(t,e){return typeof t>"u"?e:t}const lie=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,aD=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Qt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function $t(t,e,n,r){let i,s,o;if(nn(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Pt(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function t1(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function n1(t){if(nn(t))return t.map(n1);if(Pt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=n1(t[n[i]]);return e}return t}function lD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function cie(t,e,n,r){if(!lD(t))return;const i=e[t],s=n[t];Pt(i)&&Pt(s)?Gp(i,s,r):e[t]=n1(s)}function Gp(t,e,n){const r=nn(e)?e:[e],i=r.length;if(!Pt(t))return t;n=n||{};const s=n.merger||cie;let o;for(let a=0;a<i;++a){if(o=r[a],!Pt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function np(t,e){return Gp(t,e,{merger:uie})}function uie(t,e,n){if(!lD(t))return;const r=e[t],i=n[t];Pt(r)&&Pt(i)?np(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=n1(i))}const BN={"":t=>t,x:t=>t.x,y:t=>t.y};function die(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function hie(t){const e=die(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pl(t,e){return(BN[e]||(BN[e]=hie(e)))(t)}function F_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Yp=t=>typeof t<"u",El=t=>typeof t=="function",zN=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function fie(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ln=Math.PI,on=2*ln,pie=on+ln,r1=Number.POSITIVE_INFINITY,mie=ln/180,Vn=ln/2,tc=ln/4,$N=ln*2/3,ol=Math.log10,wo=Math.sign;function rp(t,e,n){return Math.abs(t-e)<n}function VN(t){const e=Math.round(t);t=rp(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ol(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function gie(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function yie(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function ih(t){return!yie(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function vie(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function cD(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Hs(t){return t*(ln/180)}function B_(t){return t*(180/ln)}function UN(t){if(!En(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function uD(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*ln&&(s+=on),{angle:s,distance:i}}function z5(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function bie(t,e){return(t-e+pie)%on-ln}function $i(t){return(t%on+on)%on}function Xp(t,e,n,r){const i=$i(t),s=$i(e),o=$i(n),a=$i(s-i),l=$i(o-i),c=$i(i-s),u=$i(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function dr(t,e,n){return Math.max(e,Math.min(n,t))}function xie(t){return dr(t,-32768,32767)}function ea(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function z_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ta=(t,e,n,r)=>z_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),wie=(t,e,n)=>z_(t,n,r=>t[r][e]>=n);function Sie(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const dD=["push","pop","shift","splice","unshift"];function kie(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),dD.forEach(n=>{const r="_onData"+F_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function qN(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(dD.forEach(s=>{delete t[s]}),delete t._chartjs)}function hD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const fD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function pD(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,fD.call(window,()=>{r=!1,t.apply(e,n)}))}}function _ie(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const $_=t=>t==="start"?"left":t==="end"?"right":"center",Dr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Cie=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function mD(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(ta(l,u,d).lo,n?r:ta(e,u,o.getPixelForValue(d)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(v=>!_t(v[a.axis]));i-=Math.max(0,g)}i=dr(i,0,r-1)}if(p){let g=Math.max(ta(l,o.axis,h,!0).hi+1,n?0:ta(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const v=l.slice(g-1).findIndex(y=>!_t(y[a.axis]));g+=Math.max(0,v)}s=dr(g,i,r)-i}else s=r-i}return{start:i,count:s}}function gD(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const a0=t=>t===0||t===1,WN=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*on/n)),HN=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*on/n)+1,ip={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Vn)+1,easeOutSine:t=>Math.sin(t*Vn),easeInOutSine:t=>-.5*(Math.cos(ln*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>a0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>a0(t)?t:WN(t,.075,.3),easeOutElastic:t=>a0(t)?t:HN(t,.075,.3),easeInOutElastic(t){return a0(t)?t:t<.5?.5*WN(t*2,.1125,.45):.5+.5*HN(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ip.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ip.easeInBounce(t*2)*.5:ip.easeOutBounce(t*2-1)*.5+.5};function V_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function KN(t){return V_(t)?t:new Kp(t)}function Hx(t){return V_(t)?t:new Kp(t).saturate(.5).darken(.1).hexString()}const Aie=["x","y","borderWidth","radius","tension"],Tie=["color","borderColor","backgroundColor"];function Nie(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Tie},numbers:{type:"number",properties:Aie}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Pie(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const GN=new Map;function Eie(t,e){e=e||{};const n=t+JSON.stringify(e);let r=GN.get(n);return r||(r=new Intl.NumberFormat(t,e),GN.set(n,r)),r}function xm(t,e,n){return Eie(e,n).format(t)}const yD={values(t){return nn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Mie(t,n)}const o=ol(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),xm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(ol(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?yD.numeric.call(this,t,e,n):""}};function Mie(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var wv={formatters:yD};function Lie(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:wv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const tu=Object.create(null),$5=Object.create(null);function sp(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Kx(t,e,n){return typeof e=="string"?Gp(sp(t,e),n):Gp(sp(t,""),e)}class Oie{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Hx(i.backgroundColor),this.hoverBorderColor=(r,i)=>Hx(i.borderColor),this.hoverColor=(r,i)=>Hx(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Kx(this,e,n)}get(e){return sp(this,e)}describe(e,n){return Kx($5,e,n)}override(e,n){return Kx(tu,e,n)}route(e,n,r,i){const s=sp(this,e),o=sp(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Pt(l)?Object.assign({},c,l):xt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var fn=new Oie({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Nie,Pie,Lie]);function Iie(t){return!t||_t(t.size)||_t(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function i1(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Rie(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!nn(d))o=i1(t,i,s,o,d);else if(nn(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!nn(h)&&(o=i1(t,i,s,o,h));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function nc(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function YN(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function V5(t,e,n,r){vD(t,e,n,r,null)}function vD(t,e,n,r,i){let s,o,a,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,g=e.radius;let v=(p||0)*mie;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,on):t.arc(n,r,g,0,on),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(v)*u,r-Math.cos(v)*g),v+=$N,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*g),v+=$N,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(v+tc)*l,d=Math.cos(v+tc)*(i?i/2-c:l),a=Math.sin(v+tc)*l,h=Math.sin(v+tc)*(i?i/2-c:l),t.arc(n-d,r-a,c,v-ln,v-Vn),t.arc(n+h,r-o,c,v-Vn,v),t.arc(n+d,r+a,c,v,v+Vn),t.arc(n-h,r+o,c,v+Vn,v+ln),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}v+=tc;case"rectRot":d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":v+=tc;case"cross":d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),v+=tc,d=Math.cos(v)*(i?i/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,h=Math.sin(v)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(v)*g,a=Math.sin(v)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(i?i/2:g),r+Math.sin(v)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function na(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Sv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function kv(t){t.restore()}function jie(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Die(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Fie(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_t(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Bie(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function zie(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function nu(t,e,n,r,i,s={}){const o=nn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Fie(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&zie(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_t(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),Bie(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Jp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ln,ln,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ln,Vn,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Vn,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Vn,!0),t.lineTo(n+o.topLeft,r)}const $ie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Uie(t,e){const n=(""+t).match($ie);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const qie=t=>+t||0;function U_(t,e){const n={},r=Pt(e),i=r?Object.keys(e):e,s=Pt(t)?r?o=>xt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=qie(s(o));return n}function bD(t){return U_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Fc(t){return U_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Kr(t){const e=bD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function tr(t,e){t=t||{},e=e||fn.font;let n=xt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=xt(t.style,e.style);r&&!(""+r).match(Vie)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:xt(t.family,e.family),lineHeight:Uie(xt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:xt(t.weight,e.weight),string:""};return i.string=Iie(i),i}function Pf(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&nn(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Wie(t,e,n){const{min:r,max:i}=t,s=aD(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function $l(t,e){return Object.assign(Object.create(t),e)}function q_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=kD("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>q_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return wD(a,l,()=>Zie(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return JN(a).includes(l)},ownKeys(a){return JN(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function sh(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:xD(t,r),setContext:s=>sh(t,s,n,r),override:s=>sh(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return wD(s,o,()=>Kie(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function xD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:El(n)?n:()=>n,isIndexable:El(r)?r:()=>r}}const Hie=(t,e)=>t?t+F_(e):e,W_=(t,e)=>Pt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function wD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Kie(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return El(a)&&o.isScriptable(e)&&(a=Gie(e,a,t,n)),nn(a)&&a.length&&(a=Yie(e,a,t,o.isIndexable)),W_(e,a)&&(a=sh(a,i,s&&s[e],o)),a}function Gie(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),W_(t,l)&&(l=H_(i._scopes,i,t,l)),l}function Yie(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Pt(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=H_(c,i,t,u);e.push(sh(d,s,o&&o[t],a))}}return e}function SD(t,e,n){return El(t)?t(e,n):t}const Xie=(t,e)=>t===!0?e:typeof t=="string"?Pl(e,t):void 0;function Jie(t,e,n,r,i){for(const s of e){const o=Xie(n,s);if(o){t.add(o);const a=SD(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function H_(t,e,n,r){const i=e._rootScopes,s=SD(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=XN(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=XN(a,o,s,l,r),l===null)?!1:q_(Array.from(a),[""],i,s,()=>Qie(e,n,r))}function XN(t,e,n,r,i){for(;n;)n=Jie(t,e,n,r,i);return n}function Qie(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return nn(i)&&Pt(n)?n:i||{}}function Zie(t,e,n,r){let i;for(const s of e)if(i=kD(Hie(s,t),n),typeof i<"u")return W_(t,i)?H_(n,r,t,i):i}function kD(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function JN(t){let e=t._keys;return e||(e=t._keys=ese(t._scopes)),e}function ese(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function _D(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(Pl(u,s),c)};return o}const tse=Number.EPSILON||1e-14,oh=(t,e)=>e<t.length&&!t[e].skip&&t[e],CD=t=>t==="x"?"y":"x";function nse(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=z5(s,i),l=z5(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function rse(t,e,n){const r=t.length;let i,s,o,a,l,c=oh(t,0);for(let u=0;u<r-1;++u)if(l=c,c=oh(t,u+1),!(!l||!c)){if(rp(e[u],0,tse)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function ise(t,e,n="x"){const r=CD(n),i=t.length;let s,o,a,l=oh(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=oh(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function sse(t,e="x"){const n=CD(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=oh(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=oh(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?wo(i[o-1])!==wo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}rse(t,i,s),ise(t,s,e)}function l0(t,e,n){return Math.max(Math.min(t,n),e)}function ose(t,e){let n,r,i,s,o,a=na(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&na(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=l0(i.cp1x,e.left,e.right),i.cp1y=l0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=l0(i.cp2x,e.left,e.right),i.cp2y=l0(i.cp2y,e.top,e.bottom)))}function ase(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")sse(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=nse(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&ose(t,n)}function K_(){return typeof window<"u"&&typeof document<"u"}function G_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function s1(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const _v=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function lse(t,e){return _v(t).getPropertyValue(e)}const cse=["top","right","bottom","left"];function Bc(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=cse[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const use=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function dse(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(use(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function uc(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=_v(n),s=i.boxSizing==="border-box",o=Bc(i,"padding"),a=Bc(i,"border","width"),{x:l,y:c,box:u}=dse(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}function hse(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&G_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=_v(s),l=Bc(a,"border","width"),c=Bc(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=s1(a.maxWidth,s,"clientWidth"),i=s1(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||r1,maxHeight:i||r1}}const c0=t=>Math.round(t*10)/10;function fse(t,e,n,r){const i=_v(t),s=Bc(i,"margin"),o=s1(i.maxWidth,t,"clientWidth")||r1,a=s1(i.maxHeight,t,"clientHeight")||r1,l=hse(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Bc(i,"border","width"),f=Bc(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=c0(Math.min(c,o,l.maxWidth)),u=c0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=c0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=c0(Math.floor(u*r))),{width:c,height:u}}function QN(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const pse=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};K_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ZN(t,e){const n=lse(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function dc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mse(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function gse(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=dc(t,i,n),a=dc(i,s,n),l=dc(s,e,n),c=dc(o,a,n),u=dc(a,l,n);return dc(c,u,n)}const yse=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},vse=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Od(t,e,n){return t?yse(e,n):vse()}function AD(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function TD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ND(t){return t==="angle"?{between:Xp,compare:bie,normalize:$i}:{between:ea,compare:(e,n)=>e-n,normalize:e=>e}}function eP({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function bse(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=ND(r),l=e.length;let{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(e[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function PD(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=ND(r),{start:u,end:d,loop:h,style:f}=bse(t,e,n),p=[];let g=!1,v=null,y,x,S;const C=()=>l(i,S,y)&&a(i,S)!==0,A=()=>a(s,y)===0||l(s,S,y),O=()=>g||C(),M=()=>!g||A();for(let N=u,D=u;N<=d;++N)x=e[N%o],!x.skip&&(y=c(x[r]),y!==S&&(g=l(y,i,s),v===null&&O()&&(v=a(y,i)===0?N:D),v!==null&&M()&&(p.push(eP({start:v,end:N,loop:h,count:o,style:f})),v=null),D=N,S=y));return v!==null&&p.push(eP({start:v,end:d,loop:h,count:o,style:f})),p}function ED(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=PD(r[i],t.points,e);s.length&&n.push(...s)}return n}function xse(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function wse(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function Sse(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=xse(n,i,s,r);if(r===!0)return tP(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return tP(t,wse(n,o,l,c),n,e)}function tP(t,e,n,r){return!r||!r.setContext||!n?e:kse(t,e,n,r)}function kse(t,e,n,r){const i=t._chart.getContext(),s=nP(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function f(p,g,v,y){const x=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=x;for(;n[g%l].skip;)g+=x;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:v,style:y}),u=y,d=g%l)}}for(const p of e){d=a?d:p.start;let g=n[d%l],v;for(h=d+1;h<=p.end;h++){const y=n[h%l];v=nP(r.setContext($l(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),_se(v,u)&&f(d,h-1,p.loop,u),g=y,u=v}d<h-1&&f(d,h-1,p.loop,u)}return c}function nP(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function _se(t,e){if(!e)return!1;const n=[],r=function(i,s){return V_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function u0(t,e,n){return t.options.clip?t[n]:e[n]}function Cse(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:u0(n,e,"left"),right:u0(n,e,"right"),top:u0(r,e,"top"),bottom:u0(r,e,"bottom")}:e}function MD(t,e){const n=e._clip;if(n.disabled)return!1;const r=Cse(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Ase{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=fD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qo=new Ase;const rP="transparent",Tse={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=KN(t||rP),i=r.valid&&KN(e||rP);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Nse{constructor(e,n,r,i){const s=n[r];i=Pf([e.to,i,s,e.from]);const o=Pf([e.from,s,i]);this._active=!0,this._fn=e.fn||Tse[e.type||typeof o],this._easing=ip[e.easing]||ip.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Pf([e.to,n,i,e.from]),this._from=Pf([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class LD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Pt(e))return;const n=Object.keys(fn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Pt(s))return;const o={};for(const a of n)o[a]=s[a];(nn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=Ese(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&Pse(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new Nse(h,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return qo.add(this._chart,r),!0}}function Pse(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Ese(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function iP(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Mse(t,e,n){if(n===!1)return!1;const r=iP(t,n),i=iP(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Lse(t){let e,n,r,i;return Pt(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function OD(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function sP(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],En(c)&&(s||e===0||wo(e)===wo(c))&&(e+=c)}return!u&&!r.all?0:e}function Ose(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function Gx(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Ise(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Rse(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function jse(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function oP(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function aP(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=Ise(s,o,r),d=e.length;let h;for(let f=0;f<d;++f){const p=e[f],{[l]:g,[c]:v}=p,y=p._stacks||(p._stacks={});h=y[c]=jse(i,u,g),h[a]=v,h._top=oP(h,o,!0,r.type),h._bottom=oP(h,o,!1,r.type);const x=h._visualValues||(h._visualValues={});x[a]=v}}function Yx(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Dse(t,e){return $l(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Fse(t,e,n){return $l(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function uf(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const Xx=t=>t==="reset"||t==="none",lP=(t,e)=>e?t:Object.assign({},t),Bse=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:OD(n,!0),values:null};class Vl{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Gx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&uf(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,h,f,p)=>d==="x"?h:d==="r"?p:f,s=n.xAxisID=xt(r.xAxisID,Yx(e,"x")),o=n.yAxisID=xt(r.yAxisID,Yx(e,"y")),a=n.rAxisID=xt(r.rAxisID,Yx(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&qN(this._data,this),e._stacked&&uf(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Pt(n)){const i=this._cachedMeta;this._data=Ose(n,i)}else if(r!==n){if(r){qN(r,this);const i=this._cachedMeta;uf(i),i._parsed=[]}n&&Object.isExtensible(n)&&kie(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=Gx(n.vScale,n),n.stack!==r.stack&&(i=!0,uf(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(aP(this,n._parsed),n._stacked=Gx(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{nn(i[e])?h=this.parseArrayData(r,i,e,n):Pt(i[e])?h=this.parseObjectData(r,i,e,n):h=this.parsePrimitiveData(r,i,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);r._sorted=l}o&&aP(this,h)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let h,f,p;for(h=0,f=i;h<f;++h)p=h+r,d[h]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+r,f=n[h],c[u]={x:s.parse(Pl(f,a),h),y:o.parse(Pl(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:OD(i,!0),values:n._stacks[e.axis]._visualValues};return sP(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=sP(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=Bse(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Rse(a);let h,f;function p(){f=i[h];const g=f[a.axis];return!En(f[e.axis])||u>g||d<g}for(h=0;h<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],En(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Lse(xt(this.options.clip,Mse(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Fse(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Dse(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Yp(r);if(a)return lP(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(fn.elements[e]),p=()=>this.getContext(r,i,n),g=c.resolveNamedOptions(h,f,p,d);return g.$shared&&(g.$shared=l,s[o]=Object.freeze(lP(g,l))),g}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new LD(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Xx(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){Xx(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!Xx(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&uf(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function zse(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=hD(r.sort((i,s)=>i-s))}return t._cache.$bar}function $se(t){const e=t.iScale,n=zse(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Yp(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function Vse(t,e,n,r){const i=n.barThickness;let s,o;return _t(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function Use(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function qse(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function ID(t,e,n,r){return nn(t)?qse(t,e,n,r):e[n.axis]=n.parse(t,r),e}function cP(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(ID(h,d,s,c));return l}function Jx(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Wse(t,e,n){return t!==0?wo(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Hse(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function Kse(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Hse(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[uP(u,o,a,l)]=!0,i=c)),s[uP(i,o,a,l)]=!0,t.borderSkipped=s}function uP(t,e,n,r){return r?(t=Gse(t,e,n),t=dP(t,n,e)):t=dP(t,e,n),t}function Gse(t,e,n){return t===e?n:t===n?e:t}function dP(t,e,n){return t==="start"?e:t==="end"?n:t}function Yse(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Xse extends Vl{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,r,i){return cP(e,n,r,i)}parseArrayData(e,n,r,i){return cP(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,p,g;for(h=r,f=r+i;h<f;++h)g=n[h],p={},p[s.axis]=s.parse(Pl(g,c),h),d.push(ID(Pl(g,u),p,o,h));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=Jx(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,i);for(let f=n;f<n+r;f++){const p=this.getParsed(f),g=s||_t(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),y=(p._stacks||{})[a.axis],x={horizontal:c,base:g.base,enableBorderRadius:!y||Jx(p._custom)||o===y._top||o===y._bottom,x:c?g.head:v.center,y:c?v.center:g.head,height:c?v.size:Math.abs(g.size),width:c?Math.abs(g.size):v.size};h&&(x.options=d||this.resolveDataElementOptions(f,e[f].active?"active":i));const S=x.options||e[f].options;Kse(x,S,y,o),Yse(x,S,u.ratio),this.updateElement(e[f],f,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(f=>f[r.axis]===l),h=d&&d[u.vScale.axis];if(_t(h)||isNaN(h))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||$se(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Jx(c);let d=l[n.axis],h=0,f=r?this.applyStack(n,l,r):d,p,g;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&wo(d)!==wo(c.barEnd)&&(h=0),h+=d);const v=!_t(s)&&!u?s:h;let y=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(h+f):p=y,g=p-y,Math.abs(g)<o){g=Wse(g,n,a)*o,d===a&&(y-=g/2);const x=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),C=Math.min(x,S),A=Math.max(x,S);y=Math.max(Math.min(y,A),C),p=y+g,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const x=wo(g)*n.getLineWidthForValue(a)/2;y+=x,g-=x}return{size:g,base:y,head:p,center:p+g/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=xt(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?Use(e,n,i,c):Vse(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}class Jse extends Vl{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=xt(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=xt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,d=a.axis;for(let h=n;h<n+r;h++){const f=e[h],p=!s&&this.getParsed(h),g={},v=g[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),y=g[d]=s?a.getBasePixel():a.getPixelForValue(p[d]);g.skip=isNaN(v)||isNaN(y),c&&(g.options=l||this.resolveDataElementOptions(h,f.active?"active":i),s&&(g.options.radius=0)),this.updateElement(f,h,g,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=xt(r&&r._custom,s),i}}function Qse(t,e,n){let r=1,i=1,s=0,o=0;if(e<on){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(S,C,A)=>Xp(S,a,l,!0)?1:Math.max(C,C*n,A,A*n),p=(S,C,A)=>Xp(S,a,l,!0)?-1:Math.min(C,C*n,A,A*n),g=f(0,c,d),v=f(Vn,u,h),y=p(ln,c,d),x=p(ln+Vn,u,h);r=(g-y)/2,i=(v-x)/2,s=-(g+y)/2,o=-(v+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Y_ extends Vl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Pt(r[e])){const{key:l="value"}=this._parsing;s=c=>+Pl(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Hs(this.options.rotation-90)}_getCircumference(){return Hs(this.options.circumference)}_getRotationExtents(){let e=on,n=-on;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(lie(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:p,offsetY:g}=Qse(d,u,l),v=(r.width-o)/h,y=(r.height-o)/f,x=Math.max(Math.min(v,y)/2,0),S=aD(this.options.radius,x),C=Math.max(S*l,0),A=(S-C)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=g*S,i.total=this.calculateTotal(),this.outerRadius=S-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/on)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=s&&c.animateScale,f=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(n,i);let y=this._getRotation(),x;for(x=0;x<n;++x)y+=this._circumference(x,s);for(x=n;x<n+r;++x){const S=this._circumference(x,s),C=e[x],A={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+S,circumference:S,outerRadius:p,innerRadius:f};v&&(A.options=g||this.resolveDataElementOptions(x,C.active?"active":i)),y+=S,this.updateElement(C,x,A,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?on*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=xm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(xt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class RD extends Vl{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=mD(n,i,o);this._drawStart=a,this._drawCount=l,gD(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),h=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,v=ih(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none",x=n+r,S=e.length;let C=n>0&&this.getParsed(n-1);for(let A=0;A<S;++A){const O=e[A],M=y?O:{};if(A<n||A>=x){M.skip=!0;continue}const N=this.getParsed(A),D=_t(N[f]),V=M[h]=o.getPixelForValue(N[h],A),L=M[f]=s||D?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[f],A);M.skip=isNaN(V)||isNaN(L)||D,M.stop=A>0&&Math.abs(N[h]-C[h])>v,g&&(M.parsed=N,M.raw=c.data[A]),d&&(M.options=u||this.resolveDataElementOptions(A,O.active?"active":i)),y||this.updateElement(O,A,M,i),C=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class jD extends Vl{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=xm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return _D.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*ln;let f=h,p;const g=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,i,g);for(p=n;p<n+r;p++){const v=e[p];let y=f,x=f+this._computeAngle(p,i,g),S=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=x,s&&(l.animateScale&&(S=0),l.animateRotate&&(y=x=h));const C={x:u,y:d,innerRadius:0,outerRadius:S,startAngle:y,endAngle:x,options:this.resolveDataElementOptions(p,v.active?"active":i)};this.updateElement(v,p,C,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Hs(this.resolveDataElementOptions(e,n).angle||r):0}}class Zse extends Y_{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class eoe extends Vl{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return _D.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,h=o?s.yCenter:u.y,f={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,a,f,i)}}}class toe extends Vl{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=mD(n,r,i);if(this._drawStart=s,this._drawCount=o,gD(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d),f=o.axis,p=a.axis,{spanGaps:g,segment:v}=this.options,y=ih(g)?g:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none";let S=n>0&&this.getParsed(n-1);for(let C=n;C<n+r;++C){const A=e[C],O=this.getParsed(C),M=x?A:{},N=_t(O[p]),D=M[f]=o.getPixelForValue(O[f],C),V=M[p]=s||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[p],C);M.skip=isNaN(D)||isNaN(V)||N,M.stop=C>0&&Math.abs(O[f]-S[f])>y,v&&(M.parsed=O,M.raw=c.data[C]),h&&(M.options=d||this.resolveDataElementOptions(C,A.active?"active":i)),x||this.updateElement(A,C,M,i),S=O}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}var noe=Object.freeze({__proto__:null,BarController:Xse,BubbleController:Jse,DoughnutController:Y_,LineController:RD,PieController:Zse,PolarAreaController:jD,RadarController:eoe,ScatterController:toe});function rc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class X_{static override(e){Object.assign(X_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return rc()}parse(){return rc()}format(){return rc()}add(){return rc()}diff(){return rc()}startOf(){return rc()}endOf(){return rc()}}var roe={_date:X_};function ioe(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?wie:ta;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,n-d),f=c(s,e,n+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=t,f=h.slice(0,u.lo+1).reverse().findIndex(g=>!_t(g[d.axis]));u.lo-=Math.max(0,f);const p=h.slice(u.hi).findIndex(g=>!_t(g[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:s.length-1}}function wm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=ioe(s[a],e,o,i);for(let f=d;f<=h;++f){const p=u[f];p.skip||r(p,c,f)}}}function soe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Qx(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||wm(t,n,e,function(a,l,c){!i&&!na(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function ooe(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=uD(o,{x:e.x,y:e.y});Xp(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return wm(t,n,e,s),i}function aoe(t,e,n,r,i,s){let o=[];const a=soe(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const p=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(p))&&!f)return;const v=a(e,p);v<l?(o=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:h})}return wm(t,n,e,c),o}function Zx(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?ooe(t,e,n,i):aoe(t,e,n,r,i,s)}function hP(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return wm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var loe={evaluateInteractionItems:wm,modes:{index(t,e,n,r){const i=uc(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Qx(t,i,s,r,o):Zx(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Qx(t,i,s,r,o):Zx(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Qx(t,i,s,r,o)},nearest(t,e,n,r){const i=uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Zx(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=uc(e,t);return hP(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=uc(e,t);return hP(t,i,"y",n.intersect,r)}}};const DD=["left","top","right","bottom"];function df(t,e){return t.filter(n=>n.pos===e)}function fP(t,e){return t.filter(n=>DD.indexOf(n.pos)===-1&&n.box.axis===e)}function hf(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function coe(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function uoe(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!DD.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function doe(t,e){const n=uoe(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function hoe(t){const e=coe(t),n=hf(e.filter(c=>c.box.fullSize),!0),r=hf(df(e,"left"),!0),i=hf(df(e,"right")),s=hf(df(e,"top"),!0),o=hf(df(e,"bottom")),a=fP(e,"x"),l=fP(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:df(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function pP(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function FD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function foe(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Pt(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&FD(o,s.getPadding());const a=Math.max(0,e.outerWidth-pP(o,t,"left","right")),l=Math.max(0,e.outerHeight-pP(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function poe(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function moe(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ef(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,moe(a.horizontal,e));const{same:d,other:h}=foe(e,n,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Ef(i,e,n,r)||u}function d0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function mP(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;Yp(c.start)&&(o=c.start),l.fullSize?d0(l,i.left,o,n.outerWidth-i.right-i.left,h):d0(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;Yp(c.start)&&(s=c.start),l.fullSize?d0(l,s,i.top,h,n.outerHeight-i.bottom-i.top):d0(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var qr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Kr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=hoe(t.boxes),l=a.vertical,c=a.horizontal;$t(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);FD(h,Kr(r));const f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=doe(l.concat(c),d);Ef(a.fullSize,f,d,p),Ef(l,f,d,p),Ef(c,f,d,p)&&Ef(l,f,d,p),poe(f),mP(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,mP(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},$t(a.chartArea,g=>{const v=g.box;Object.assign(v,t.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class BD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class goe extends BD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const X0="$chartjs",yoe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gP=t=>t===null||t==="";function voe(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[X0]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",gP(i)){const s=ZN(t,"width");s!==void 0&&(t.width=s)}if(gP(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ZN(t,"height");s!==void 0&&(t.height=s)}return t}const zD=pse?{passive:!0}:!1;function boe(t,e,n){t&&t.addEventListener(e,n,zD)}function xoe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,zD)}function woe(t,e){const n=yoe[t.type]||t.type,{x:r,y:i}=uc(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function o1(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Soe(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||o1(a.addedNodes,r),o=o&&!o1(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function koe(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||o1(a.removedNodes,r),o=o&&!o1(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Qp=new Map;let yP=0;function $D(){const t=window.devicePixelRatio;t!==yP&&(yP=t,Qp.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function _oe(t,e){Qp.size||window.addEventListener("resize",$D),Qp.set(t,e)}function Coe(t){Qp.delete(t),Qp.size||window.removeEventListener("resize",$D)}function Aoe(t,e,n){const r=t.canvas,i=r&&G_(r);if(!i)return;const s=pD((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),_oe(t,s),o}function e2(t,e,n){n&&n.disconnect(),e==="resize"&&Coe(t)}function Toe(t,e,n){const r=t.canvas,i=pD(s=>{t.ctx!==null&&n(woe(s,t))},t);return boe(r,e,i),i}class Noe extends BD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(voe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[X0])return!1;const r=n[X0].initial;["height","width"].forEach(s=>{const o=r[s];_t(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[X0],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:Soe,detach:koe,resize:Aoe}[n]||Toe;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:e2,detach:e2,resize:e2}[n]||xoe)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return fse(e,n,r,i)}isAttached(e){const n=e&&G_(e);return!!(n&&n.isConnected)}}function Poe(t){return!K_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?goe:Noe}let va=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return ih(this.x)&&ih(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Eoe(t,e){const n=t.options.ticks,r=Moe(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Ooe(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return Ioe(e,c,s,o/i),c;const u=Loe(s,e,i);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(h0(e,c,u,_t(f)?0:a-f,a),d=0,h=o-1;d<h;d++)h0(e,c,u,s[d],s[d+1]);return h0(e,c,u,l,_t(f)?e.length:l+f),c}return h0(e,c,u),c}function Moe(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function Loe(t,e,n){const r=Roe(t),i=e.length/n;if(!r)return Math.max(i,1);const s=gie(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Ooe(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Ioe(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function h0(t,e,n,r,i){const s=xt(r,0),o=Math.min(xt(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function Roe(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const joe=t=>t==="left"?"right":t==="right"?"left":t,vP=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,bP=(t,e)=>Math.min(e||t,t);function xP(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function Doe(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function Foe(t,e){$t(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function ff(t){return t.drawTicks?t.tickLength:0}function wP(t,e){if(!t.display)return 0;const n=tr(t.font,e),r=Kr(t.padding);return(nn(t.text)?t.text.length:1)*n.lineHeight+r.height}function Boe(t,e){return $l(t,{scale:e,type:"scale"})}function zoe(t,e,n){return $l(t,{tick:n,index:e,type:"tick"})}function $oe(t,e,n){let r=$_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=joe(r)),r}function Voe(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,p;const g=o-i,v=a-s;if(t.isHorizontal()){if(f=Dr(r,s,a),Pt(n)){const y=Object.keys(n)[0],x=n[y];p=u[y].getPixelForValue(x)+g-e}else n==="center"?p=(c.bottom+c.top)/2+g-e:p=vP(t,n,e);h=a-s}else{if(Pt(n)){const y=Object.keys(n)[0],x=n[y];f=u[y].getPixelForValue(x)-v+e}else n==="center"?f=(c.left+c.right)/2-v+e:f=vP(t,n,e);p=Dr(r,o,i),d=n==="left"?-Vn:Vn}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}class lu extends va{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Bi(e,Number.POSITIVE_INFINITY),n=Bi(n,Number.NEGATIVE_INFINITY),r=Bi(r,Number.POSITIVE_INFINITY),i=Bi(i,Number.NEGATIVE_INFINITY),{min:Bi(e,r),max:Bi(n,i),minDefined:En(e),maxDefined:En(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Bi(n,Bi(r,n)),max:Bi(r,Bi(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Wie(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?xP(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Eoe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qt(this.options.afterUpdate,[this])}beforeSetDimensions(){Qt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Qt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Qt(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Qt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=bP(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=dr(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-ff(e.grid)-n.padding-wP(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=B_(Math.min(Math.asin(dr((u.highest.height+6)/a,-1,1)),Math.asin(dr(l/c,-1,1))-Math.asin(dr(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Qt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=wP(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=ff(s)+l):(e.height=this.maxHeight,e.width=ff(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=Hs(this.labelRotation),g=Math.cos(p),v=Math.sin(p);if(a){const y=r.mirror?0:v*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=r.mirror?0:g*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,v,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*e.width,f=r*n.height):(h=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_t(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=xP(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/bP(n,r));let c=0,u=0,d,h,f,p,g,v,y,x,S,C,A;for(d=0;d<n;d+=l){if(p=e[d].label,g=this._resolveTickFontOptions(d),i.font=v=g.string,y=s[v]=s[v]||{data:{},gc:[]},x=g.lineHeight,S=C=0,!_t(p)&&!nn(p))S=i1(i,y.data,y.gc,S,p),C=x;else if(nn(p))for(h=0,f=p.length;h<f;++h)A=p[h],!_t(A)&&!nn(A)&&(S=i1(i,y.data,y.gc,S,A),C+=x);o.push(S),a.push(C),c=Math.max(S,c),u=Math.max(C,u)}Foe(s,n);const O=o.indexOf(c),M=a.indexOf(u),N=D=>({width:o[D]||0,height:a[D]||0});return{first:N(0),last:N(n-1),widest:N(O),highest:N(M),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return xie(this._alignToPixels?nc(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=zoe(this.getContext(),e,r))}return this.$context||(this.$context=Boe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hs(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=ff(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,v=g/2,y=function(Z){return nc(r,Z,g)};let x,S,C,A,O,M,N,D,V,L,E,B;if(o==="top")x=y(this.bottom),M=this.bottom-h,D=x-v,L=y(e.top)+v,B=e.bottom;else if(o==="bottom")x=y(this.top),L=e.top,B=y(e.bottom)-v,M=x+v,D=this.top+h;else if(o==="left")x=y(this.right),O=this.right-h,N=x-v,V=y(e.left)+v,E=e.right;else if(o==="right")x=y(this.left),V=e.left,E=y(e.right)-v,O=x+v,N=this.left+h;else if(n==="x"){if(o==="center")x=y((e.top+e.bottom)/2+.5);else if(Pt(o)){const Z=Object.keys(o)[0],ne=o[Z];x=y(this.chart.scales[Z].getPixelForValue(ne))}L=e.top,B=e.bottom,M=x+v,D=M+h}else if(n==="y"){if(o==="center")x=y((e.left+e.right)/2);else if(Pt(o)){const Z=Object.keys(o)[0],ne=o[Z];x=y(this.chart.scales[Z].getPixelForValue(ne))}O=x-v,N=O-h,V=e.left,E=e.right}const I=xt(i.ticks.maxTicksLimit,d),Q=Math.max(1,Math.ceil(d/I));for(S=0;S<d;S+=Q){const Z=this.getContext(S),ne=s.setContext(Z),Y=a.setContext(Z),ie=ne.lineWidth,q=ne.color,G=Y.dash||[],P=Y.dashOffset,U=ne.tickWidth,K=ne.tickColor,J=ne.tickBorderDash||[],re=ne.tickBorderDashOffset;C=Doe(this,S,l),C!==void 0&&(A=nc(r,C,ie),c?O=N=V=E=A:M=D=L=B=A,f.push({tx1:O,ty1:M,tx2:N,ty2:D,x1:V,y1:L,x2:E,y2:B,width:ie,color:q,borderDash:G,borderDashOffset:P,tickWidth:U,tickColor:K,tickBorderDash:J,tickBorderDashOffset:re}))}return this._ticksLength=d,this._borderValue=x,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=ff(r.grid),f=h+u,p=d?-u:f,g=-Hs(this.labelRotation),v=[];let y,x,S,C,A,O,M,N,D,V,L,E,B="middle";if(i==="top")O=this.bottom-p,M=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+p,M=this._getXAxisLabelAlignment();else if(i==="left"){const Q=this._getYAxisLabelAlignment(h);M=Q.textAlign,A=Q.x}else if(i==="right"){const Q=this._getYAxisLabelAlignment(h);M=Q.textAlign,A=Q.x}else if(n==="x"){if(i==="center")O=(e.top+e.bottom)/2+f;else if(Pt(i)){const Q=Object.keys(i)[0],Z=i[Q];O=this.chart.scales[Q].getPixelForValue(Z)+f}M=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")A=(e.left+e.right)/2-f;else if(Pt(i)){const Q=Object.keys(i)[0],Z=i[Q];A=this.chart.scales[Q].getPixelForValue(Z)}M=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const I=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){S=a[y],C=S.label;const Q=s.setContext(this.getContext(y));N=this.getPixelForTick(y)+s.labelOffset,D=this._resolveTickFontOptions(y),V=D.lineHeight,L=nn(C)?C.length:1;const Z=L/2,ne=Q.color,Y=Q.textStrokeColor,ie=Q.textStrokeWidth;let q=M;o?(A=N,M==="inner"&&(y===x-1?q=this.options.reverse?"left":"right":y===0?q=this.options.reverse?"right":"left":q="center"),i==="top"?c==="near"||g!==0?E=-L*V+V/2:c==="center"?E=-I.highest.height/2-Z*V+V:E=-I.highest.height+V/2:c==="near"||g!==0?E=V/2:c==="center"?E=I.highest.height/2-Z*V:E=I.highest.height-L*V,d&&(E*=-1),g!==0&&!Q.showLabelBackdrop&&(A+=V/2*Math.sin(g))):(O=N,E=(1-L)*V/2);let G;if(Q.showLabelBackdrop){const P=Kr(Q.backdropPadding),U=I.heights[y],K=I.widths[y];let J=E-P.top,re=0-P.left;switch(B){case"middle":J-=U/2;break;case"bottom":J-=U;break}switch(M){case"center":re-=K/2;break;case"right":re-=K;break;case"inner":y===x-1?re-=K:y>0&&(re-=K/2);break}G={left:re,top:J,width:K+P.width,height:U+P.height,color:Q.backdropColor}}v.push({label:C,font:D,textOffset:E,options:{rotation:g,color:ne,strokeColor:Y,strokeWidth:ie,textAlign:q,textBaseline:B,translation:[A,O],backdrop:G}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hs(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=nc(e,this.left,o)-o/2,u=nc(e,this.right,a)+a/2,d=h=l):(d=nc(e,this.top,o)-o/2,h=nc(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Sv(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;nu(r,c,0,u,l,a)}i&&kv(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=tr(r.font),o=Kr(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Pt(n)?(l+=o.bottom,nn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Voe(this,l,n,a);nu(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:$oe(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=xt(e.grid&&e.grid.z,-1),i=xt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==lu.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return tr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class f0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Woe(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Uoe(e,o,r),this.override&&fn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in fn[i]&&(delete fn[i][r],this.override&&delete tu[r])}}function Uoe(t,e,n){const r=Gp(Object.create(null),[n?fn.get(n):{},fn.get(e),t.defaults]);fn.set(e,r),t.defaultRoutes&&qoe(e,t.defaultRoutes),t.descriptors&&fn.describe(e,t.descriptors)}function qoe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");fn.route(s,i,l,a)})}function Woe(t){return"id"in t&&"defaults"in t}class Hoe{constructor(){this.controllers=new f0(Vl,"datasets",!0),this.elements=new f0(va,"elements"),this.plugins=new f0(Object,"plugins"),this.scales=new f0(lu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):$t(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=F_(e);Qt(r["before"+i],[],r),n[e](r),Qt(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ho=new Hoe;class Koe{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Qt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=xt(r.options&&r.options.plugins,{}),s=Goe(r);return i===!1&&!n?[]:Xoe(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Goe(t){const e={},n=[],r=Object.keys(ho.plugins.items);for(let s=0;s<r.length;s++)n.push(ho.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Yoe(t,e){return!e&&t===!1?null:t===!0?{}:t}function Xoe(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Yoe(r[l],i);c!==null&&s.push({plugin:a,options:Joe(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Joe(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function U5(t,e){const n=fn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Qoe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Zoe(t,e){return t===e?"_index_":"_value_"}function SP(t){if(t==="x"||t==="y"||t==="r")return t}function eae(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function q5(t,...e){if(SP(t))return t;for(const n of e){const r=n.axis||eae(n.position)||t.length>1&&SP(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kP(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function tae(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return kP(t,"x",n[0])||kP(t,"y",n[0])}return{}}function nae(t,e){const n=tu[t.type]||{scales:{}},r=e.scales||{},i=U5(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Pt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=q5(o,a,tae(o,t),fn.scales[a.type]),c=Zoe(l,i),u=n.scales||{};s[o]=np(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||U5(a,e),u=(tu[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Qoe(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),np(s[f],[{axis:h},r[f],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];np(a,[fn.scales[a.type],fn.scale])}),s}function VD(t){const e=t.options||(t.options={});e.plugins=xt(e.plugins,{}),e.scales=nae(t,e)}function UD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function rae(t){return t=t||{},t.data=UD(t.data),VD(t),t}const _P=new Map,qD=new Set;function p0(t,e){let n=_P.get(t);return n||(n=e(),_P.set(t,n),qD.add(n)),n}const pf=(t,e,n)=>{const r=Pl(e,n);r!==void 0&&t.add(r)};class iae{constructor(e){this._config=rae(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=UD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),VD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return p0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return p0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return p0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return p0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>pf(l,e,d))),u.forEach(d=>pf(l,i,d)),u.forEach(d=>pf(l,tu[s]||{},d)),u.forEach(d=>pf(l,fn,d)),u.forEach(d=>pf(l,$5,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),qD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,tu[n]||{},fn.datasets[n]||{},{type:n},fn,$5]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=CP(this._resolverCache,e,i);let l=o;if(oae(o,n)){s.$shared=!1,r=El(r)?r():r;const c=this.createResolver(e,r,a);l=sh(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=CP(this._resolverCache,e,r);return Pt(n)?sh(s,n,void 0,i):s}}function CP(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:q_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const sae=t=>Pt(t)&&Object.getOwnPropertyNames(t).some(e=>El(t[e]));function oae(t,e){const{isScriptable:n,isIndexable:r}=xD(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(El(a)||sae(a))||o&&nn(a))return!0}return!1}var aae="4.4.9";const lae=["top","bottom","left","right","chartArea"];function AP(t,e){return t==="top"||t==="bottom"||lae.indexOf(t)===-1&&e==="x"}function TP(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function NP(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Qt(n&&n.onComplete,[t],e)}function cae(t){const e=t.chart,n=e.options.animation;Qt(n&&n.onProgress,[t],e)}function WD(t){return K_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const J0={},PP=t=>{const e=WD(t);return Object.values(J0).filter(n=>n.canvas===e).pop()};function uae(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function dae(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let vh=class{static defaults=fn;static instances=J0;static overrides=tu;static registry=ho;static version=aae;static getChart=PP;static register(...e){ho.add(...e),EP()}static unregister(...e){ho.remove(...e),EP()}constructor(e,n){const r=this.config=new iae(n),i=WD(e),s=PP(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Poe(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=aie(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Koe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_ie(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],J0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qo.listen(this,"complete",NP),qo.listen(this,"progress",cae),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return _t(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ho}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():QN(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return YN(this.canvas,this.ctx),this}stop(){return qo.stop(this),this}resize(e,n){qo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,QN(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Qt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};$t(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=q5(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),$t(s,o=>{const a=o.options,l=a.id,c=q5(l,a),u=xt(a.type,o.dtype);(a.position===void 0||AP(a.position,c)!==AP(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=ho.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),$t(i,(o,a)=>{o||delete r[a]}),$t(r,o=>{qr.configure(this,o,o.options),qr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(TP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||U5(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ho.getController(a),{datasetElementType:c,dataElementType:u}=fn.datasets[a];Object.assign(l,{dataElementType:ho.getElement(u),datasetElementType:c&&ho.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){$t(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||$t(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(TP("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){$t(this.scales,e=>{qr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!zN(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;uae(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!zN(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],$t(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,El(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qo.has(this)?this.attached&&!qo.running(this)&&qo.start(this):(this.draw(),NP({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=MD(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Sv(n,i),e.controller.draw(),i&&kv(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return na(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=loe.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=$l(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Yp(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),YN(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete J0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};$t(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){$t(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},$t(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!t1(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=fie(e),c=dae(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Qt(s.onHover,[e,a,this],this),l&&Qt(s.onClick,[e,a,this],this));const u=!t1(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function EP(){return $t(vh.instances,t=>t._plugins.invalidate())}function hae(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Vn,r-Vn),t.closePath(),t.clip()}function fae(t){return U_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function pae(t,e,n,r){const i=fae(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return dr(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:dr(i.innerStart,0,o),innerEnd:dr(i.innerEnd,0,o)}}function Wu(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function a1(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const Q=u>0?u-r:0,Z=d>0?d-r:0,ne=(Q+Z)/2,Y=ne!==0?p*ne/(ne+r):p;f=(p-Y)/2}const g=Math.max(.001,p*d-n/ln)/d,v=(p-g)/2,y=l+v+f,x=i-v-f,{outerStart:S,outerEnd:C,innerStart:A,innerEnd:O}=pae(e,h,d,x-y),M=d-S,N=d-C,D=y+S/M,V=x-C/N,L=h+A,E=h+O,B=y+A/L,I=x-O/E;if(t.beginPath(),s){const Q=(D+V)/2;if(t.arc(o,a,d,D,Q),t.arc(o,a,d,Q,V),C>0){const ie=Wu(N,V,o,a);t.arc(ie.x,ie.y,C,V,x+Vn)}const Z=Wu(E,x,o,a);if(t.lineTo(Z.x,Z.y),O>0){const ie=Wu(E,I,o,a);t.arc(ie.x,ie.y,O,x+Vn,I+Math.PI)}const ne=(x-O/h+(y+A/h))/2;if(t.arc(o,a,h,x-O/h,ne,!0),t.arc(o,a,h,ne,y+A/h,!0),A>0){const ie=Wu(L,B,o,a);t.arc(ie.x,ie.y,A,B+Math.PI,y-Vn)}const Y=Wu(M,y,o,a);if(t.lineTo(Y.x,Y.y),S>0){const ie=Wu(M,D,o,a);t.arc(ie.x,ie.y,S,y-Vn,D)}}else{t.moveTo(o,a);const Q=Math.cos(D)*d+o,Z=Math.sin(D)*d+a;t.lineTo(Q,Z);const ne=Math.cos(V)*d+o,Y=Math.sin(V)*d+a;t.lineTo(ne,Y)}t.closePath()}function mae(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){a1(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%on||on))}return a1(t,e,n,r,l,i),t.fill(),l}function gae(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){a1(t,e,n,r,p,i);for(let g=0;g<s;++g)t.stroke();isNaN(a)||(p=o+(a%on||on))}f&&hae(t,e,p),s||(a1(t,e,n,r,p,i),t.stroke())}class yae extends va{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=uD(i,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,f=xt(d,l-a),p=Xp(s,a,l)&&a!==l,g=f>=on||p,v=ea(o,c+h,u+h);return g&&v}getCenterPoint(e){const{x:n,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(i+s)/2,d=(o+a+c+l)/2;return{x:n+Math.cos(u)*d,y:r+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:r}=this,i=(n.offset||0)/4,s=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>on?Math.floor(r/on):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(ln,r||0)),c=i*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,mae(e,this,c,s,o),gae(e,this,c,s,o),e.restore()}}function HD(t,e,n=e){t.lineCap=xt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(xt(n.borderDash,e.borderDash)),t.lineDashOffset=xt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=xt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=xt(n.borderWidth,e.borderWidth),t.strokeStyle=xt(n.borderColor,e.borderColor)}function vae(t,e,n){t.lineTo(n.x,n.y)}function bae(t){return t.stepped?jie:t.tension||t.cubicInterpolationMode==="monotone"?Die:vae}function KD(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function xae(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=KD(i,n,r),u=bae(s);let{move:d=!0,reverse:h}=r||{},f,p,g;for(f=0;f<=c;++f)p=i[(a+(h?c-f:f))%o],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,g,p,h,s.stepped),g=p);return l&&(p=i[(a+(h?c:0))%o],u(t,g,p,h,s.stepped)),!!l}function wae(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=KD(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,f,p,g,v,y;const x=C=>(o+(c?a-C:C))%s,S=()=>{g!==v&&(t.lineTo(u,v),t.lineTo(u,g),t.lineTo(u,y))};for(l&&(f=i[x(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[x(h)],f.skip)continue;const C=f.x,A=f.y,O=C|0;O===p?(A<g?g=A:A>v&&(v=A),u=(d*u+C)/++d):(S(),t.lineTo(C,A),p=O,d=0,g=v=A),y=A}S()}function W5(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?wae:xae}function Sae(t){return t.stepped?mse:t.tension||t.cubicInterpolationMode==="monotone"?gse:dc}function kae(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),HD(t,e.options),t.stroke(i)}function _ae(t,e,n,r){const{segments:i,options:s}=e,o=W5(e);for(const a of i)HD(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Cae=typeof Path2D=="function";function Aae(t,e,n,r){Cae&&!e.options.segment?kae(t,e,n,r):_ae(t,e,n,r)}class Sm extends va{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;ase(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Sse(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=ED(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Sae(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=s[d],p=s[h];if(f===p){a.push(f);continue}const g=Math.abs((i-f[n])/(p[n]-f[n])),v=l(f,p,g,r.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,r){return W5(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=W5(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Aae(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function MP(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class GD extends va{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return MP(this,e,"x",n)}inYRange(e,n){return MP(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!na(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,V5(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function YD(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function al(t,e,n,r){return t?0:dr(e,n,r)}function Tae(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=bD(r);return{t:al(i.top,s.top,0,n),r:al(i.right,s.right,0,e),b:al(i.bottom,s.bottom,0,n),l:al(i.left,s.left,0,e)}}function Nae(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Fc(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Pt(i);return{topLeft:al(!l||a.top||a.left,s.topLeft,0,o),topRight:al(!l||a.top||a.right,s.topRight,0,o),bottomLeft:al(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:al(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Pae(t){const e=YD(t),n=e.right-e.left,r=e.bottom-e.top,i=Tae(t,n/2,r/2),s=Nae(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function t2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&YD(t,r);return a&&(i||ea(e,a.left,a.right))&&(s||ea(n,a.top,a.bottom))}function Eae(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Mae(t,e){t.rect(e.x,e.y,e.w,e.h)}function n2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Lae extends va{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Pae(this),a=Eae(o.radius)?Jp:Mae;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,n2(o,n,s)),e.clip(),a(e,n2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,n2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return t2(this,e,n,r)}inXRange(e,n){return t2(this,e,null,n)}inYRange(e,n){return t2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var Oae=Object.freeze({__proto__:null,ArcElement:yae,BarElement:Lae,LineElement:Sm,PointElement:GD});const H5=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],LP=H5.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function XD(t){return H5[t%H5.length]}function JD(t){return LP[t%LP.length]}function Iae(t,e){return t.borderColor=XD(e),t.backgroundColor=JD(e),++e}function Rae(t,e){return t.backgroundColor=t.data.map(()=>XD(e++)),e}function jae(t,e){return t.backgroundColor=t.data.map(()=>JD(e++)),e}function Dae(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Y_?e=Rae(n,e):i instanceof jD?e=jae(n,e):i&&(e=Iae(n,e))}}function OP(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Fae(t){return t&&(t.borderColor||t.backgroundColor)}function Bae(){return fn.borderColor!=="rgba(0,0,0,0.1)"||fn.backgroundColor!=="rgba(0,0,0,0.1)"}var zae={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=OP(r)||Fae(i)||s&&OP(s)||Bae();if(!n.forceOverride&&o)return;const a=Dae(t);r.forEach(a)}};function $ae(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,d,h,f,p,g;for(o[l++]=t[u],d=0;d<s-2;d++){let v=0,y=0,x;const S=Math.floor((d+1)*a)+1+e,C=Math.min(Math.floor((d+2)*a)+1,n)+e,A=C-S;for(x=S;x<C;x++)v+=t[x].x,y+=t[x].y;v/=A,y/=A;const O=Math.floor(d*a)+1+e,M=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:N,y:D}=t[u];for(f=p=-1,x=O;x<M;x++)p=.5*Math.abs((N-v)*(t[x].y-D)-(N-t[x].x)*(y-D)),p>f&&(f=p,h=t[x],g=x);o[l++]=h,u=g}return o[l++]=t[c],o}function Vae(t,e,n,r){let i=0,s=0,o,a,l,c,u,d,h,f,p,g;const v=[],y=e+n-1,x=t[e].x,C=t[y].x-x;for(o=e;o<e+n;++o){a=t[o],l=(a.x-x)/C*r,c=a.y;const A=l|0;if(A===u)c<p?(p=c,d=o):c>g&&(g=c,h=o),i=(s*i+a.x)/++s;else{const O=o-1;if(!_t(d)&&!_t(h)){const M=Math.min(d,h),N=Math.max(d,h);M!==f&&M!==O&&v.push({...t[M],x:i}),N!==f&&N!==O&&v.push({...t[N],x:i})}o>0&&O!==f&&v.push(t[O]),v.push(a),u=A,s=0,p=g=c,d=h=f=o}}return v}function QD(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function IP(t){t.data.datasets.forEach(e=>{QD(e)})}function Uae(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=dr(ta(e,s.axis,o).lo,0,n-1)),c?i=dr(ta(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var qae={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){IP(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Pf([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=Uae(l,c);const f=n.threshold||4*r;if(h<=f){QD(i);return}_t(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=$ae(c,d,h,r,n);break;case"min-max":p=Vae(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=p})},destroy(t){IP(t)}};function Wae(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=J_(l,c,i);const u=K5(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=ED(e,u);for(const h of d){const f=K5(n,s[h.start],s[h.end],h.loop),p=PD(a,i,f);for(const g of p)o.push({source:g,target:h,start:{[n]:RP(u,f,"start",Math.max)},end:{[n]:RP(u,f,"end",Math.min)}})}}return o}function K5(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=$i(i),s=$i(s)),{property:t,start:i,end:s}}function Hae(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=J_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function J_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function RP(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function ZD(t,e){let n=[],r=!1;return nn(t)?(r=!0,n=t):n=Hae(t,e),n.length?new Sm({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function jP(t){return t&&t.fill!==!1}function Kae(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!En(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Gae(t,e,n){const r=Qae(t);if(Pt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return En(i)&&Math.floor(i)===i?Yae(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Yae(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Xae(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Pt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Jae(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Pt(t)?r=t.value:r=e.getBaseValue(),r}function Qae(t){const e=t.options,n=e.fill;let r=xt(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Zae(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=ele(e,n);a.push(ZD({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)tle(i,o[u],a)}return new Sm({points:i,options:{}})}function ele(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function tle(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=nle(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function nle(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],h=o[u.end][n];if(ea(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:r}}class e8{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:on},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function rle(t){const{chart:e,fill:n,line:r}=t;if(En(n))return ile(e,n);if(n==="stack")return Zae(t);if(n==="shape")return!0;const i=sle(t);return i instanceof e8?i:ZD(i,r)}function ile(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function sle(t){return(t.scale||{}).getPointPositionForValue?ale(t):ole(t)}function ole(t){const{scale:e={},fill:n}=t,r=Xae(n,e);if(En(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function ale(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Jae(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new e8({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function r2(t,e,n){const r=rle(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(s),g=MD(i,p);r&&o.points.length&&(Sv(t,n),lle(t,{line:o,target:r,above:h,below:f,area:n,scale:a,axis:l,clip:g}),kv(t))}function lle(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save(),c==="x"&&s!==i&&(DP(t,r,o.top),FP(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),DP(t,r,o.bottom)),FP(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore()}function DP(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[J_(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function FP(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=Wae(n,r,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=s}={}}=c,p=r!==!0;t.save(),t.fillStyle=f,cle(t,o,a,p&&K5(i,d,h)),t.beginPath();const g=!!n.pathSegment(t,c);let v;if(p){g?t.closePath():BP(t,r,h,i);const y=!!r.pathSegment(t,u,{move:g,reverse:!0});v=g&&y,v||BP(t,r,d,i)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function cle(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,u-l,d-c),t.clip()}}function BP(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var ule={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Sm&&(l={visible:t.isDatasetVisible(o),index:o,fill:Gae(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Kae(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&r2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;jP(s)&&r2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!jP(r)||n.drawTime!=="beforeDatasetDraw"||r2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zP=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},dle=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class $P extends va{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Qt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=tr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=zP(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{const v=r+n/2+s.measureText(p.text).width;(g===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,f+=u,h++),l[g]={left:0,top:f,row:h,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:x,itemHeight:S}=hle(r,n,s,v,i);y>0&&f+S+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,g++,h=f=0),l[y]={left:p,top:f,col:g,width:x,height:S},h=Math.max(h,x),f+=S+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Od(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Dr(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Dr(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Dr(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Dr(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sv(e,this),this._draw(),kv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=fn.color,l=Od(e.rtl,this.left,this.width),c=tr(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:v}=zP(o,d),y=function(O,M,N){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const D=xt(N.lineWidth,1);if(i.fillStyle=xt(N.fillStyle,a),i.lineCap=xt(N.lineCap,"butt"),i.lineDashOffset=xt(N.lineDashOffset,0),i.lineJoin=xt(N.lineJoin,"miter"),i.lineWidth=D,i.strokeStyle=xt(N.strokeStyle,a),i.setLineDash(xt(N.lineDash,[])),o.usePointStyle){const V={radius:g*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:D},L=l.xPlus(O,p/2),E=M+h;vD(i,V,L,E,o.pointStyleWidth&&p)}else{const V=M+Math.max((d-g)/2,0),L=l.leftForLtr(O,p),E=Fc(N.borderRadius);i.beginPath(),Object.values(E).some(B=>B!==0)?Jp(i,{x:L,y:V,w:p,h:g,radius:E}):i.rect(L,V,p,g),i.fill(),D!==0&&i.stroke()}i.restore()},x=function(O,M,N){nu(i,N.text,O,M+v/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},S=this.isHorizontal(),C=this._computeTitleHeight();S?f={x:Dr(s,this.left+u,this.right-r[0]),y:this.top+u+C,line:0}:f={x:this.left+u,y:Dr(s,this.top+C+u,this.bottom-n[0].height),line:0},AD(this.ctx,e.textDirection);const A=v+u;this.legendItems.forEach((O,M)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const N=i.measureText(O.text).width,D=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),V=p+h+N;let L=f.x,E=f.y;l.setWidth(this.width),S?M>0&&L+V+u>this.right&&(E=f.y+=A,f.line++,L=f.x=Dr(s,this.left+u,this.right-r[f.line])):M>0&&E+A>this.bottom&&(L=f.x=L+n[f.line].width+u,f.line++,E=f.y=Dr(s,this.top+C+u,this.bottom-n[f.line].height));const B=l.x(L);if(y(B,E,O),L=Cie(D,L+p+h,S?L+V:this.right,e.rtl),x(l.x(L),E,O),S)f.x+=V+u;else if(typeof O.text!="string"){const I=c.lineHeight;f.y+=t8(O,I)+u}else f.y+=A}),TD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=tr(n.font),i=Kr(n.padding);if(!n.display)return;const s=Od(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Dr(e.align,d,this.right-h);else{const p=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);u=c+Dr(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Dr(a,d,d+h);o.textAlign=s.textAlign($_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,nu(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=tr(e.font),r=Kr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(ea(e,this.left,this.right)&&ea(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ea(e,i.left,i.left+i.width)&&ea(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!mle(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=dle(i,r);i&&!s&&Qt(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Qt(n.onHover,[e,r,this],this)}else r&&Qt(n.onClick,[e,r,this],this)}}function hle(t,e,n,r,i){const s=fle(r,t,e,n),o=ple(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function fle(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function ple(t,e,n){let r=t;return typeof e.text!="string"&&(r=t8(e,n)),r}function t8(t,e){const n=t.text?t.text.length:0;return e*n}function mle(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var n8={id:"legend",_element:$P,start(t,e,n){const r=t.legend=new $P({ctx:t.ctx,options:n,chart:t});qr.configure(t,r,n),qr.addBox(t,r)},stop(t){qr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;qr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Kr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Q_ extends va{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=nn(r.text)?r.text.length:1;this._padding=Kr(r.padding);const s=i*tr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Dr(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Dr(a,i,n),l=ln*-.5):(u=s-e,d=Dr(a,n,i),l=ln*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=tr(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);nu(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:$_(n.align),textBaseline:"middle",translation:[o,a]})}}function gle(t,e){const n=new Q_({ctx:t.ctx,options:e,chart:t});qr.configure(t,n,e),qr.addBox(t,n),t.titleBlock=n}var r8={id:"title",_element:Q_,start(t,e,n){gle(t,n)},stop(t){const e=t.titleBlock;qr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;qr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const m0=new WeakMap;var yle={id:"subtitle",start(t,e,n){const r=new Q_({ctx:t.ctx,options:n,chart:t});qr.configure(t,r,n),qr.addBox(t,r),m0.set(t,r)},stop(t){qr.removeBox(t,m0.get(t)),m0.delete(t)},beforeUpdate(t,e,n){const r=m0.get(t);qr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mf={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=z5(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function ao(t,e){return e&&(nn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wo(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function vle(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function VP(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=tr(e.bodyFont),c=tr(e.titleFont),u=tr(e.footerFont),d=s.length,h=i.length,f=r.length,p=Kr(e.padding);let g=p.height,v=0,y=r.reduce((C,A)=>C+A.before.length+A.lines.length+A.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*C+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let x=0;const S=function(C){v=Math.max(v,n.measureText(C).width+x)};return n.save(),n.font=c.string,$t(t.title,S),n.font=l.string,$t(t.beforeBody.concat(t.afterBody),S),x=e.displayColors?o+2+e.boxPadding:0,$t(r,C=>{$t(C.before,S),$t(C.lines,S),$t(C.after,S)}),x=0,n.font=u.string,$t(t.footer,S),n.restore(),v+=p.width,{width:v,height:g}}function ble(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function xle(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function wle(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),xle(c,t,e,n)&&(c="center"),c}function UP(t,e,n){const r=n.yAlign||e.yAlign||ble(t,n);return{xAlign:n.xAlign||e.xAlign||wle(t,e,n,r),yAlign:r}}function Sle(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function kle(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function qP(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Fc(o);let p=Sle(e,a);const g=kle(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+i:a==="right"&&(p+=Math.max(d,f)+i),{x:dr(p,0,r.width-e.width),y:dr(g,0,r.height-e.height)}}function g0(t,e,n){const r=Kr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function WP(t){return ao([],Wo(t))}function _le(t,e,n){return $l(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function HP(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const i8={beforeTitle:zo,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:zo,beforeBody:zo,beforeLabel:zo,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _t(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:zo,afterBody:zo,beforeFooter:zo,footer:zo,afterFooter:zo};function yi(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?i8[e].call(n,r):i}class KP extends va{static positioners=Mf;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new LD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_le(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=yi(r,"beforeTitle",this,e),s=yi(r,"title",this,e),o=yi(r,"afterTitle",this,e);let a=[];return a=ao(a,Wo(i)),a=ao(a,Wo(s)),a=ao(a,Wo(o)),a}getBeforeBody(e,n){return WP(yi(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return $t(e,s=>{const o={before:[],lines:[],after:[]},a=HP(r,s);ao(o.before,Wo(yi(a,"beforeLabel",this,s))),ao(o.lines,yi(a,"label",this,s)),ao(o.after,Wo(yi(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return WP(yi(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=yi(r,"beforeFooter",this,e),s=yi(r,"footer",this,e),o=yi(r,"afterFooter",this,e);let a=[];return a=ao(a,Wo(i)),a=ao(a,Wo(s)),a=ao(a,Wo(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(vle(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),$t(a,u=>{const d=HP(e.callbacks,u);i.push(yi(d,"labelColor",this,u)),s.push(yi(d,"labelPointStyle",this,u)),o.push(yi(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Mf[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=VP(this,r),c=Object.assign({},a,l),u=UP(this.chart,r,c),d=qP(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Fc(a),{x:h,y:f}=e,{width:p,height:g}=n;let v,y,x,S,C,A;return s==="center"?(C=f+g/2,i==="left"?(v=h,y=v-o,S=C+o,A=C-o):(v=h+p,y=v+o,S=C-o,A=C+o),x=v):(i==="left"?y=h+Math.max(l,u)+o:i==="right"?y=h+p-Math.max(c,d)-o:y=this.caretX,s==="top"?(S=f,C=S-o,v=y-o,x=y+o):(S=f+g,C=S+o,v=y+o,x=y-o),A=S),{x1:v,x2:y,x3:x,y1:S,y2:C,y3:A}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Od(r.rtl,this.x,this.width);for(e.x=g0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=tr(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=tr(s.bodyFont),d=g0(this,"left",s),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(s.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(h,c)+c/2,y=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,V5(e,g,v,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,V5(e,g,v,y)}else{e.lineWidth=Pt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(h,c),v=i.leftForLtr(i.xPlus(h,1),c-2),y=Fc(o.borderRadius);Object.values(y).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Jp(e,{x:g,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Jp(e,{x:v,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=tr(r.bodyFont);let h=d.lineHeight,f=0;const p=Od(r.rtl,this.x,this.width),g=function(N){n.fillText(N,p.x(e.x+f),e.y+h/2),e.y+=h+s},v=p.textAlign(o);let y,x,S,C,A,O,M;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=g0(this,v,r),n.fillStyle=r.bodyColor,$t(this.beforeBody,g),f=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,C=0,O=i.length;C<O;++C){for(y=i[C],x=this.labelTextColors[C],n.fillStyle=x,$t(y.before,g),S=y.lines,a&&S.length&&(this._drawColorBox(n,e,C,p,r),h=Math.max(d.lineHeight,l)),A=0,M=S.length;A<M;++A)g(S[A]),h=d.lineHeight;$t(y.after,g)}f=0,h=d.lineHeight,$t(this.afterBody,g),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Od(r.rtl,this.x,this.width);for(e.x=g0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=tr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=Fc(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Mf[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=VP(this,e),l=Object.assign({},o,this._size),c=UP(n,e,l),u=qP(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Kr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),AD(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),TD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!t1(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!t1(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Mf[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}var s8={id:"tooltip",_element:KP,positioners:Mf,afterInit(t,e,n){n&&(t.tooltip=new KP({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:i8},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Cle=Object.freeze({__proto__:null,Colors:zae,Decimation:qae,Filler:ule,Legend:n8,SubTitle:yle,Title:r8,Tooltip:s8});const Ale=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Tle(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Ale(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Nle=(t,e)=>t===null?null:dr(Math.round(t),0,e);function GP(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class o8 extends lu{static id="category";static defaults={ticks:{callback:GP}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_t(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Tle(r,e,xt(n,e),this._addedLabels),Nle(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return GP.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ple(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=s||1,p=u-1,{min:g,max:v}=e,y=!_t(o),x=!_t(a),S=!_t(c),C=(v-g)/(d+1);let A=VN((v-g)/p/f)*f,O,M,N,D;if(A<1e-14&&!y&&!x)return[{value:g},{value:v}];D=Math.ceil(v/A)-Math.floor(g/A),D>p&&(A=VN(D*A/p/f)*f),_t(l)||(O=Math.pow(10,l),A=Math.ceil(A*O)/O),i==="ticks"?(M=Math.floor(g/A)*A,N=Math.ceil(v/A)*A):(M=g,N=v),y&&x&&s&&vie((a-o)/s,A/1e3)?(D=Math.round(Math.min((a-o)/A,u)),A=(a-o)/D,M=o,N=a):S?(M=y?o:M,N=x?a:N,D=c-1,A=(N-M)/D):(D=(N-M)/A,rp(D,Math.round(D),A/1e3)?D=Math.round(D):D=Math.ceil(D));const V=Math.max(UN(A),UN(M));O=Math.pow(10,_t(l)?V:l),M=Math.round(M*O)/O,N=Math.round(N*O)/O;let L=0;for(y&&(h&&M!==o?(n.push({value:o}),M<o&&L++,rp(Math.round((M+L*A)*O)/O,o,YP(o,C,t))&&L++):M<o&&L++);L<D;++L){const E=Math.round((M+L*A)*O)/O;if(x&&E>a)break;n.push({value:E})}return x&&h&&N!==a?n.length&&rp(n[n.length-1].value,a,YP(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!x||N===a)&&n.push({value:N}),n}function YP(t,e,{horizontal:n,minRotation:r}){const i=Hs(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class l1 extends lu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=wo(i),c=wo(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Ple(i,s);return e.bounds==="ticks"&&cD(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return xm(e,this.chart.options.locale,this.options.ticks.format)}}class a8 extends l1{static id="linear";static defaults={ticks:{callback:wv.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=En(e)?e:0,this.max=En(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Hs(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Zp=t=>Math.floor(ol(t)),ic=(t,e)=>Math.pow(10,Zp(t)+e);function XP(t){return t/Math.pow(10,Zp(t))===1}function JP(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Ele(t,e){const n=e-t;let r=Zp(n);for(;JP(t,e,r)>10;)r++;for(;JP(t,e,r)<10;)r--;return Math.min(r,Zp(t))}function Mle(t,{min:e,max:n}){e=Bi(t.min,e);const r=[],i=Zp(e);let s=Ele(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=Bi(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)r.push({value:h,major:XP(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=Bi(t.max,h);return r.push({value:f,major:XP(f),significand:d}),r}class Lle extends lu{static id="logarithmic";static defaults={ticks:{callback:wv.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=l1.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return En(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=En(e)?Math.max(0,e):null,this.max=En(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!En(this._userMin)&&(this.min=e===ic(this.min,0)?ic(this.min,-1):ic(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(ic(r,-1)),o(ic(i,1)))),r<=0&&s(ic(i,-1)),i<=0&&o(ic(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Mle(n,this);return e.bounds==="ticks"&&cD(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":xm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ol(e),this._valueRange=ol(this.max)-ol(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ol(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function G5(t){const e=t.ticks;if(e.display&&t.display){const n=Kr(e.backdropPadding);return xt(e.font&&e.font.size,fn.font.size)+n.height}return 0}function Ole(t,e,n){return n=nn(n)?n:[n],{w:Rie(t,e.string,n),h:n.length*e.lineHeight}}function QP(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Ile(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ln/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=tr(c.font),h=Ole(t.ctx,d,t._pointLabels[l]);r[l]=h;const f=$i(t.getIndexAngle(l)+a),p=Math.round(B_(f)),g=QP(p,u.x,h.w,0,180),v=QP(p,u.y,h.h,90,270);Rle(n,e,f,g,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Fle(t,r,i)}function Rle(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function jle(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(B_($i(l.angle+Vn))),u=$le(l.y,a.h,c),d=Ble(c),h=zle(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Dle(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(na({x:n,y:r},e)||na({x:n,y:s},e)||na({x:i,y:r},e)||na({x:i,y:s},e))}function Fle(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:G5(s)/2,additionalAngle:o?ln/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=jle(t,u,l);r.push(d),a==="auto"&&(d.visible=Dle(d,c),d.visible&&(c=d))}return r}function Ble(t){return t===0||t===180?"center":t<180?"left":"right"}function zle(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function $le(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Vle(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!_t(a)){const l=Fc(e.borderRadius),c=Kr(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,h=s-r+c.width,f=o-i+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Jp(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function Ule(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Vle(n,o,s);const a=tr(o.font),{x:l,y:c,textAlign:u}=s;nu(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function l8(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,on);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function qle(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),l8(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function Wle(t,e,n){return $l(t,{label:n,index:e,type:"pointLabel"})}class Hle extends l1{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:wv.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Kr(G5(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=En(e)&&!isNaN(e)?e:0,this.max=En(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/G5(this.options))}generateTickLabels(e){l1.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Qt(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Ile(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=on/(this._pointLabels.length||1),r=this.options.startAngle||0;return $i(e*n+Hs(r))}getDistanceFromCenterForValue(e){if(_t(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(_t(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return Wle(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Vn+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),l8(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Ule(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=i.setContext(h),p=s.setContext(h);qle(this,f,l,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=tr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Kr(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}nu(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}const Cv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wi=Object.keys(Cv);function ZP(t,e){return t-e}function eE(t,e){if(_t(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),En(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(ih(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function tE(t,e,n,r){const i=wi.length;for(let s=wi.indexOf(t);s<i-1;++s){const o=Cv[wi[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return wi[s]}return wi[i-1]}function Kle(t,e,n,r,i){for(let s=wi.length-1;s>=wi.indexOf(n);s--){const o=wi[s];if(Cv[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return wi[n?wi.indexOf(n):0]}function Gle(t){for(let e=wi.indexOf(t)+1,n=wi.length;e<n;++e)if(Cv[wi[e]].common)return wi[e]}function nE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=z_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Yle(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function rE(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Yle(t,r,i,n)}class Y5 extends lu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new roe._date(e.adapters.date);i.init(n),np(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:eE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=En(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=En(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Sie(i,s,o);return this._unit=n.unit||(r.autoSkip?tE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Kle(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Gle(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),rE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=dr(n,0,o),r=dr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||tE(s.minUnit,n,r,this._getLabelCapacity(n)),a=xt(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=ih(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<r;h=+e.add(h,a,o),f++)nE(u,h,p);return(h===r||i.bounds==="ticks"||f===1)&&nE(u,h,p),Object.keys(u).sort(ZP).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Qt(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],f=c&&d&&h&&h.major;return this._adapter.format(e,i||(f?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Hs(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,rE(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(eE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return hD(e.sort(ZP))}}function y0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ta(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ta(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Xle extends Y5{static id="timeseries";static defaults=Y5.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=y0(n,this.min),this._tableRange=y0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(y0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return y0(this._table,r*this._tableRange+this._minPos,!0)}}var Jle=Object.freeze({__proto__:null,CategoryScale:o8,LinearScale:a8,LogarithmicScale:Lle,RadialLinearScale:Hle,TimeScale:Y5,TimeSeriesScale:Xle});const Qle=[noe,Oae,Cle,Jle],c8="label";function iE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Zle(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function u8(t,e){t.labels=e}function d8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c8;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function ece(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c8;const n={labels:[],datasets:[]};return u8(n,t.labels),d8(n,t.datasets,e),n}function tce(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=W.useRef(null),p=W.useRef(null),g=()=>{f.current&&(p.current=new vh(f.current,{type:o,data:ece(a,s),options:l&&{...l},plugins:c}),iE(e,p.current))},v=()=>{iE(e,null),p.current&&(p.current.destroy(),p.current=null)};return W.useEffect(()=>{!i&&p.current&&l&&Zle(p.current,l)},[i,l]),W.useEffect(()=>{!i&&p.current&&u8(p.current.config.data,a.labels)},[i,a.labels]),W.useEffect(()=>{!i&&p.current&&a.datasets&&d8(p.current.config.data,a.datasets,s)},[i,a.datasets]),W.useEffect(()=>{p.current&&(i?(v(),setTimeout(g)):p.current.update(d))},[i,l,a.labels,a.datasets,d]),W.useEffect(()=>{p.current&&(v(),setTimeout(g))},[o]),W.useEffect(()=>(g(),()=>v()),[]),nt.createElement("canvas",{ref:f,role:"img",height:n,width:r,...h},u)}const nce=W.forwardRef(tce);function rce(t,e){return vh.register(e),W.forwardRef((n,r)=>nt.createElement(nce,{...n,ref:r,type:t}))}const ice=rce("line",RD);vh.register(Sm,GD,a8,r8,o8,s8,n8);const sE=({xData:t,yData:e,xLabel:n,yLabel:r,title:i,trendline:s})=>{const o=t.map((d,h)=>({x:d,y:e[h]})),a=d=>{const{type:h,equation:f}=s,p=f.match(/-?\d+(\.\d+)?/g)?.map(Number);if(!p)return 0;const[g,v=0,y=2]=p;switch(h){case"linear":return g*d+v;case"proportional":return g*d;case"inverse":return d!==0?g/d:0;case"polynomial":return g*Math.pow(d,y)+v;default:return 0}},l=t.map(d=>({x:d,y:a(d)})),c={datasets:[{label:i,data:o,borderColor:"rgba(0, 123, 255, 0.6)",backgroundColor:"rgba(0, 123, 255, 0.3)",pointRadius:5,showLine:!1},{label:`Trendline: ${s.equation}, R = ${s.r2.toFixed(3)}`,data:l,borderColor:"rgba(40, 167, 69, 0.8)",backgroundColor:"rgba(40, 167, 69, 0.3)",pointRadius:0,fill:!1,tension:.3,parsing:!1}]},u={responsive:!0,scales:{x:{type:"linear",title:{display:!0,text:n}},y:{type:"linear",title:{display:!0,text:r}}},plugins:{legend:{position:"top"},title:{display:!0,text:i}}};return w.jsx(ice,{data:c,options:u})},v0={NONE:"none",LINEAR:"linear",PROPORTIONAL:"proportional",INVERSE:"inverse",POLYNOMIAL:"polynomial"};vh.register(...Qle);function sce(t,e,n){const r=t.length;if(r<2)return{points:[],label:""};let i=[],s="";switch(n){case v0.LINEAR:{const o=t.reduce((g,v)=>g+v)/r,a=e.reduce((g,v)=>g+v)/r,l=t.reduce((g,v,y)=>g+(v-o)*(e[y]-a),0),c=t.reduce((g,v)=>g+Math.pow(v-o,2),0),u=l/c,d=a-u*o;i=t.map(g=>({x:g,y:u*g+d}));const h=e.reduce((g,v)=>g+Math.pow(v-a,2),0),p=1-e.reduce((g,v,y)=>g+Math.pow(v-(u*t[y]+d),2),0)/h;s=`y = ${u.toFixed(2)}x + ${d.toFixed(2)} (R = ${p.toFixed(2)})`;break}case v0.PROPORTIONAL:{const o=e.reduce((a,l,c)=>a+l/t[c],0)/r;i=t.map(a=>({x:a,y:o*a})),s=`y = ${o.toFixed(2)}x`;break}case v0.INVERSE:{const o=e.reduce((a,l,c)=>a+l*t[c],0)/r;i=t.map(a=>({x:a,y:o/a})),s=`y = ${o.toFixed(2)}/x`;break}case v0.POLYNOMIAL:{const o=e.reduce((a,l,c)=>a+l/(t[c]**2||1),0)/r;i=t.map(a=>({x:a,y:o*a*a})),s=`y = ${o.toFixed(2)}x`;break}}return{points:i,label:s}}async function oce({title:t,xAxis:e,yAxis:n,graphType:r,trendType:i,data:s}){const o=document.createElement("canvas");o.width=600,o.height=400;const a=o.getContext("2d");if(!a)return"";const l=sce(s.x,s.y,i),c=new vh(a,{type:r==="bar"?"bar":"scatter",data:{labels:s.x,datasets:[{label:"Data",data:s.x.map((d,h)=>({x:d,y:s.y[h]})),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",pointRadius:4,parsing:!1},...l.points.length?[{label:l.label,data:l.points,type:"line",borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,fill:!1,pointRadius:0}]:[]]},options:{responsive:!1,plugins:{title:{display:!0,text:t},legend:{display:!0}},scales:{x:{title:{display:!0,text:e}},y:{title:{display:!0,text:n}}}}});await new Promise(d=>setTimeout(d,500));const u=o.toDataURL("image/png");return c.destroy(),u}function ace(t,e,n){if(t.length!==e.length||t.length<2)return{equation:"",r2:0,type:n};const r=d=>d.reduce((h,f)=>h+f,0)/d.length,i=r(t),s=r(e);let o=[],a="";if(n==="linear"){const d=t.reduce((f,p,g)=>f+(p-i)*(e[g]-s),0)/t.reduce((f,p)=>f+Math.pow(p-i,2),0),h=s-d*i;o=t.map(f=>d*f+h),a=`y = ${d.toFixed(2)}x + ${h.toFixed(2)}`}else if(n==="proportional"){const d=t.reduce((h,f,p)=>h+f*e[p],0)/t.reduce((h,f)=>h+f*f,0);o=t.map(h=>d*h),a=`y = ${d.toFixed(2)}x`}else if(n==="inverse"){const d=t.map(g=>1/g),h=r(d),f=d.reduce((g,v,y)=>g+(v-h)*(e[y]-s),0)/d.reduce((g,v)=>g+Math.pow(v-h,2),0),p=s-f*h;o=d.map(g=>f*g+p),a=`y = ${f.toFixed(2)}/x + ${p.toFixed(2)}`}else if(n==="polynomial"){const d=t,h=t.map(D=>D*D),f=t.length,p=d.reduce((D,V)=>D+V,0),g=h.reduce((D,V)=>D+V,0),v=d.reduce((D,V)=>D+V**3,0),y=d.reduce((D,V)=>D+V**4,0),x=e.reduce((D,V)=>D+V,0),S=d.reduce((D,V,L)=>D+V*e[L],0),C=h.reduce((D,V,L)=>D+V*e[L],0),A=f*(g*y-v*v)-p*(p*y-g*v)+g*(p*v-g*g),O=(x*(g*y-v*v)-p*(S*y-v*C)+g*(S*v-g*C))/A,M=(f*(S*y-v*C)-x*(p*y-g*v)+g*(p*C-S*g))/A,N=(f*(g*C-S*v)-p*(p*C-S*g)+x*(p*v-g*g))/A;o=t.map(D=>O+M*D+N*D*D),a=`y = ${N.toFixed(2)}x + ${M.toFixed(2)}x + ${O.toFixed(2)}`}const l=e.reduce((d,h,f)=>d+Math.pow(h-o[f],2),0),c=e.reduce((d,h)=>d+Math.pow(h-s,2),0),u=c?1-l/c:0;return{equation:a,r2:parseFloat(u.toFixed(3)),type:n}}const lce=({editor:t,onClose:e})=>{const[n,r]=W.useState([]),[i,s]=W.useState(""),[o,a]=W.useState(""),[l,c]=W.useState(""),[u,d]=W.useState("scatter"),[h,f]=W.useState("none"),[p,g]=W.useState({x:[],y:[]}),[v,y]=W.useState({equation:"",r2:0,type:"none"});W.useEffect(()=>{const S=t.getHTML(),O=new DOMParser().parseFromString(S,"text/html").querySelector("table");if(!O)return;const M=O.querySelector("tr"),N=Array.from(M?.querySelectorAll("th, td")||[]).map(E=>E.textContent?.trim()||"");r(N),N.length>=2&&(s(N[0]),a(N[N.length-1]));const D=Array.from(O.querySelectorAll("tr")).slice(1),V=[],L=[];D.forEach(E=>{const B=E.querySelectorAll("td"),I=B[0]?.textContent?.trim(),Q=B[B.length-1]?.textContent?.trim();if(I&&Q){const Z=parseFloat(I),ne=parseFloat(Q);!isNaN(Z)&&!isNaN(ne)&&(V.push(Z),L.push(ne))}}),g({x:V,y:L})},[t]),W.useEffect(()=>{if(p.x.length&&p.y.length&&h!=="none"){const S=ace(p.x,p.y,h);y(S)}else y({equation:"",r2:0,type:"none"})},[p,h]);const x=async()=>{if(p.x.length&&p.y.length){document.createElement("canvas");const S=await oce({title:l,xAxis:i,yAxis:o,graphType:u,trendType:h,data:{x:p.x,y:p.y}});t.chain().focus().setImage({src:S}).run(),e()}};return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-40",onClick:e}),w.jsxs("div",{className:"fixed z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-6 w-[90%] max-w-xl left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[w.jsx("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:" Create Graph from Table"}),w.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Graph Title:"}),w.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),className:"w-full mb-4 border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),w.jsxs("div",{className:"flex gap-4 mb-4",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"X Axis:"}),w.jsx("select",{value:i,onChange:S=>s(S.target.value),className:"w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.map((S,C)=>w.jsx("option",{value:S,children:S},C))})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Y Axis:"}),w.jsx("select",{value:o,onChange:S=>a(S.target.value),className:"w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.map((S,C)=>w.jsx("option",{value:S,children:S},C))})]})]}),w.jsxs("div",{className:"flex gap-4 mb-4",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Graph Type:"}),w.jsxs("select",{value:u,onChange:S=>d(S.target.value),className:"w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[w.jsx("option",{value:"scatter",children:"Scatter"}),w.jsx("option",{value:"bar",children:"Bar"})]})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Trendline:"}),w.jsxs("select",{value:h,onChange:S=>f(S.target.value),disabled:u==="bar",className:`w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 ${u==="bar"?"bg-gray-200 cursor-not-allowed":"focus:ring-blue-500"}`,children:[w.jsx("option",{value:"none",children:"None"}),w.jsx("option",{value:"linear",children:"Linear (y = mx + c)"}),w.jsx("option",{value:"proportional",children:"Direct (y = mx)"}),w.jsx("option",{value:"inverse",children:"Inverse (y = m/x)"}),w.jsx("option",{value:"polynomial",children:"Polynomial (y = mx + c)"})]})]})]}),w.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Preview your graph and equation before inserting."}),w.jsxs("div",{className:"bg-gray-100 border rounded p-3 mb-4",children:[u==="scatter"&&w.jsx(sE,{xData:p.x,yData:p.y,title:l,xLabel:i,yLabel:o,type:u,trendline:v}),u==="bar"&&w.jsx(sE,{xData:p.x,yData:p.y,title:l,xLabel:i,yLabel:o,type:u,trendline:{type:"none",equation:"",r2:0}})]}),w.jsxs("div",{className:"flex justify-end gap-3",children:[w.jsx("button",{onClick:e,className:"text-sm text-gray-600 hover:text-gray-900",children:"Cancel"}),w.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 text-sm rounded hover:bg-blue-700 transition",children:"Insert Graph"})]})]})]})};function cce({studentId:t,experiment:e,sessionCode:n,strandhoot:r,currentStrand:i,content:s,evaluatedLevel:o,isTyping:a=!1,onLoad:l}){const[c,u]=W.useState("idle"),d=`strand${i}`,h=`${d}_level`,f=p=>/^[0-9a-fA-F-]{36}$/.test(p);return W.useEffect(()=>{if(!t||!e||!n)return;if(!f(t)){console.warn(" Invalid UUID for studentId in fetch:",t);return}(async()=>{const{data:g,error:v}=await gs.from("responses").select(`${d}`).eq("student_id",t).eq("experiment",e).eq("session_code",n).maybeSingle();v?(console.error(" Error loading saved content:",v),u("error")):g&&g[d]&&l?.(g[d])})()},[t,e,n,r,i]),W.useEffect(()=>{if(!t||!e||!n||!a)return;if(!f(t)){console.warn(" Invalid UUID for studentId in typing:",t);return}let p=Date.now();gs.from("responses").update({is_typing:!0}).eq("student_id",t).eq("experiment",e).eq("session_code",n).select("*").then(({data:v,error:y})=>{y?console.error(" Error setting is_typing true:",y.message):console.log(" is_typing = true for",t)});const g=setInterval(()=>{Date.now()-p>=3e3&&(gs.from("responses").update({is_typing:!1}).eq("student_id",t).eq("experiment",e).eq("session_code",n).select("*").then(({data:x,error:S})=>{S?console.error(" Error resetting is_typing:",S.message):console.log(" is_typing reset to false for",t)}),clearInterval(g))},1e3);return()=>clearInterval(g)},[a,t,e,n]),W.useEffect(()=>{if(!t||!e||!n)return;if(!f(t)){console.warn(" Invalid UUID for studentId in upsert:",t);return}const p=setTimeout(async()=>{u("saving");const{error:g}=await gs.from("responses").upsert({student_id:t,experiment:e,session_code:n,[d]:s,[h]:o??null,updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment"});g?(console.error(" Error saving to Supabase:",g.message),u("error")):u("success")},800);return()=>clearTimeout(p)},[s,t,e,n,r,i,o]),{syncStatus:c}}const uce=({content:t,onChange:e,currentStudentId:n,currentStrand:r,evaluatedLevel:i,currentExperimentChoice:s,sessionCode:o=null})=>{const[a,l]=W.useState(!1),[c,u]=W.useState(!1),[d,h]=W.useState(2),[f,p]=W.useState(2);W.useRef(null);const{strandProgress:g}=fm(),v=Tte({extensions:[Ene,Lne.configure({allowBase64:!0}),Rre.configure({resizable:!0}),jre,Dre,Fre],content:t,onUpdate:({editor:C})=>{const A=C.getHTML();e(A)}}),{syncStatus:y}=cce({studentId:n,experiment:s,sessionCode:o,strandhoot:"crit-a-tir",currentStrand:r,content:t,evaluatedLevel:g[r-1],isTyping:v?.isFocused||!1,onLoad:C=>{v&&v.isEmpty&&v.commands.setContent(C)}}),x=C=>{const A=new FileReader;A.onload=()=>{const O=A.result;v?.chain().focus().insertContent("<p></p>").setImage({src:O}).run()},A.readAsDataURL(C)},S=()=>{v?.chain().focus().insertTable({rows:d,cols:f,withHeaderRow:!0}).run(),l(!1)};return v?w.jsxs("div",{className:"editor-wrapper relative border rounded-md overflow-visible bg-white",children:[w.jsxs("div",{className:"editor-toolbar bg-gray-100 px-4 py-2 border-b border-gray-300 flex flex-wrap gap-2 items-center text-sm",children:[w.jsx("button",{onClick:()=>v.chain().focus().toggleBold().run(),children:"B"}),w.jsx("button",{onClick:()=>v.chain().focus().toggleItalic().run(),children:"I"}),w.jsx("button",{onClick:()=>v.chain().focus().toggleBulletList().run(),children:" List"}),w.jsx("button",{onClick:()=>v.chain().focus().toggleHeading({level:2}).run(),children:"H2"}),w.jsx("button",{onClick:()=>l(!0),children:" Table"}),w.jsx("button",{onClick:()=>v.chain().focus().addColumnBefore().run(),children:" Col"}),w.jsx("button",{onClick:()=>v.chain().focus().addColumnAfter().run(),children:"Col "}),w.jsx("button",{onClick:()=>v.chain().focus().addRowBefore().run(),children:" Row"}),w.jsx("button",{onClick:()=>v.chain().focus().addRowAfter().run(),children:" Row"}),w.jsx("button",{onClick:()=>v.chain().focus().deleteColumn().run(),children:" Col"}),w.jsx("button",{onClick:()=>v.chain().focus().deleteRow().run(),children:" Row"}),w.jsx("button",{onClick:()=>v.chain().focus().deleteTable().run(),children:" Table"}),w.jsxs("label",{className:"ml-2 text-sm text-gray-700 cursor-pointer",children:[" Upload Image",w.jsx("input",{type:"file",accept:"image/*",onChange:C=>{C.target.files?.[0]&&x(C.target.files[0])},className:"hidden"})]}),w.jsx("button",{onClick:()=>u(!0),children:" Graph"}),w.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[y==="saving"&&" Saving...",y==="success"&&w.jsx("span",{className:"text-green-600",children:" Synced"}),y==="error"&&w.jsx("span",{className:"text-red-600",children:" Sync Failed"})]}),v?.isFocused&&w.jsx("span",{className:"ml-2 text-purple-500 text-xs animate-pulse",children:" Typing..."})]}),a&&w.jsxs("div",{className:"popup bg-white border border-gray-300 rounded shadow-md p-4 absolute z-10 left-4 top-20 w-64",children:[w.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Insert Table"}),w.jsxs("label",{className:"block mb-2 text-sm",children:["Rows:",w.jsx("input",{type:"number",min:1,value:d,onChange:C=>h(Number(C.target.value)),className:"ml-2 border px-2 py-1 text-sm w-16"})]}),w.jsxs("label",{className:"block mb-4 text-sm",children:["Columns:",w.jsx("input",{type:"number",min:1,value:f,onChange:C=>p(Number(C.target.value)),className:"ml-2 border px-2 py-1 text-sm w-16"})]}),w.jsxs("div",{className:"flex justify-end gap-2",children:[w.jsx("button",{onClick:S,className:"bg-purple-500 text-white text-sm px-3 py-1 rounded",children:"Insert"}),w.jsx("button",{onClick:()=>l(!1),className:"text-sm text-gray-500",children:"Cancel"})]})]}),c&&Ty.createPortal(w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:()=>u(!1)}),w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-auto",children:w.jsx(lce,{editor:v,onClose:()=>u(!1),onInsert:C=>{v.chain().focus().insertContent("<p></p>").setImage({src:C}).run(),u(!1)}})})]}),document.body),w.jsx(yte,{editor:v,className:"editor-content p-4"})]}):null};async function dce(t,e){const n=t.toLowerCase();return n.includes("ray")||n.includes("light")||n.includes("beam")?{isGraph:!0,type:"ray-diagram",axesLabeled:!0,hasTitle:!0}:n.includes("scatter")?{isGraph:!0,type:"scatter",axesLabeled:!0,hasTitle:!0}:n.includes("bar")||n.includes("graph")?{isGraph:!0,type:"bar",axesLabeled:!0,hasTitle:!1}:{isGraph:!1,type:"unknown",axesLabeled:!1,hasTitle:!1}}function hce(t){const e=[];let n=0;const r=t.querySelector("table");if(!r)return e.push("You might want to include a data table."),{score:n,suggestions:e};const i=r.querySelectorAll("tr"),s=Array.from(r.querySelectorAll("th")).map(c=>c.textContent?.toLowerCase()||""),o=s.some(c=>c.includes("average")),a=s.some(c=>c.includes("trial")),l=s.some(c=>/\(.*\)/.test(c));return i.length<3?e.push("Try adding at least 3 rows of data."):n+=8.5,o?n+=5:e.push("Consider adding a column for averages."),a?n+=5:e.push("Try including multiple trials."),l?n+=6.5:e.push("Include units in your table headers."),{score:n,suggestions:e}}async function h8(t,e,n){const r=t.toLowerCase(),s={"critical-angle":{strand1:{keywords:[{label:"Snell's Law",level:4,words:["snell","snells law","n1 sin 1 = n2 sin 2"]},{label:"Critical Angle",level:6,words:["critical angle","c","critical incident angle"]},{label:"Mathematical Formula",level:8,words:["sin c = n2/n1","sine ratio","mathematical relationship"]}],concepts:[{label:"Refraction Basics",level:3,words:["refraction","bending","light ray"]},{label:"Refractive Index",level:5,words:["refractive index","optical density","n value"]},{label:"TIR Theory",level:7,words:["total internal reflection","TIR","complete reflection"]}]},strand2:{keywords:[{label:"Incident Ray",level:3,words:["incident ray","incoming light","incident angle"]},{label:"Interface Behavior",level:5,words:["interface","boundary","medium boundary"]},{label:"Angle Relationship",level:7,words:["greater than critical","exceeds critical angle","i > c"]}],concepts:[{label:"Medium Properties",level:4,words:["denser medium","rarer medium","optical density"]},{label:"TIR Conditions",level:6,words:["conditions for TIR","when TIR occurs","requirements"]},{label:"Physical Explanation",level:8,words:["cannot refract","no transmitted ray","energy conservation"]}]},strand3:{keywords:[{label:"Optical Devices",level:4,words:["prism","periscope","binoculars"]},{label:"Advanced Applications",level:6,words:["diamond cutting","optical instruments","endoscope"]},{label:"Modern Technology",level:8,words:["laser surgery","medical imaging","precision optics"]}],concepts:[{label:"Practical Uses",level:3,words:["everyday applications","common uses","practical"]},{label:"Scientific Applications",level:5,words:["scientific instruments","research tools","measurement"]},{label:"Innovation Impact",level:7,words:["technological advancement","breakthrough","innovation"]}]},strand4:{keywords:[{label:"Calculation",level:5,words:["calculate","compute","numerical value"]},{label:"Problem Setup",level:6,words:["given values","unknown variable","solve for"]},{label:"Mathematical Analysis",level:8,words:["derive","proof","mathematical reasoning"]}],concepts:[{label:"Data Analysis",level:4,words:["analyze data","interpret results","conclusion"]},{label:"Problem Solving",level:6,words:["systematic approach","step by step","methodology"]},{label:"Critical Thinking",level:8,words:["evaluate","assess","critical analysis"]}]}},"fiber-optics":{strand1:{keywords:[{label:"Optical Fiber",level:4,words:["optical fiber","fiber optic","light guide"]},{label:"Core-Cladding",level:6,words:["core","cladding","refractive index difference"]},{label:"Light Propagation",level:8,words:["guided wave","mode propagation","wave mechanics"]}],concepts:[{label:"Basic Structure",level:3,words:["fiber structure","cylindrical","transparent"]},{label:"TIR in Fibers",level:5,words:["total internal reflection","light trapping","confinement"]},{label:"Wave Theory",level:7,words:["electromagnetic wave","wave optics","propagation theory"]}]},strand2:{keywords:[{label:"Fiber Types",level:4,words:["step index","graded index","single mode","multimode"]},{label:"Technical Specs",level:6,words:["numerical aperture","acceptance angle","bandwidth"]},{label:"Advanced Tech",level:8,words:["dispersion","attenuation","coupling efficiency"]}],concepts:[{label:"Signal Transmission",level:3,words:["data transmission","signal","information"]},{label:"Engineering Design",level:5,words:["design principles","optimization","performance"]},{label:"System Integration",level:7,words:["network design","system architecture","integration"]}]},strand3:{keywords:[{label:"Communication",level:4,words:["telecommunications","internet","data communication"]},{label:"Medical Uses",level:6,words:["endoscopy","medical imaging","surgical applications"]},{label:"Emerging Tech",level:8,words:["quantum communication","sensor networks","smart systems"]}],concepts:[{label:"Societal Impact",level:3,words:["society","impact","change"]},{label:"Economic Benefits",level:5,words:["cost effective","efficiency","economic"]},{label:"Future Potential",level:7,words:["future applications","emerging trends","innovation"]}]},strand4:{keywords:[{label:"Design Process",level:5,words:["design","development","engineering process"]},{label:"Innovation",level:6,words:["innovative","novel approach","creative solution"]},{label:"Research",level:8,words:["research","investigation","scientific method"]}],concepts:[{label:"Problem Identification",level:4,words:["identify problem","need","requirement"]},{label:"Solution Development",level:6,words:["develop solution","prototype","testing"]},{label:"Evaluation",level:8,words:["evaluate","assess performance","optimization"]}]}}}[e]?.[n];if(!s)return{matchedKeywords:[],matchedConcepts:[],level:0,suggestions:["No rubric data found for this strand."]};let o=0,a=0;const l=[],c=[],u=[];s.keywords.forEach(x=>{x.words.some(S=>r.includes(S.toLowerCase()))&&(l.push({label:x.label,level:x.level}),o=Math.max(o,x.level))}),s.concepts.forEach(x=>{x.words.some(S=>r.includes(S.toLowerCase()))&&(c.push({label:x.label,level:x.level}),a=Math.max(a,x.level))});let d=0;try{const x=new DOMParser().parseFromString(t,"text/html"),{score:S,suggestions:C}=hce(x);d=S,u.push(...C)}catch{u.push("Content parsing had issues.")}let h=0;const f=t.match(/<img[^>]*src="([^"]+)"[^>]*>/);if(f){const x=f[1];try{const S=await dce(x,e);S.isGraph?(S.axesLabeled||u.push("Add axis labels to your graph."),S.hasTitle||u.push("Add a title to your graph."),h=S.type==="scatter"?8:6):u.push("Image found, but not recognized as a graph.")}catch{u.push("Image analysis failed.")}}let p=0;const g=t.replace(/<[^>]*>/g,"").trim().split(/\s+/).length;g>150?p=8:g>100?p=6:g>50?p=4:g>20&&(p=2),o<6&&u.push(`Include more ${e==="critical-angle"?"TIR":"fiber optic"} terminology.`),a<6&&u.push("Explain the underlying physics concepts more clearly."),p<6&&u.push("Expand your response with more detailed explanations.");const v={strand1:["Define key terms clearly","Include mathematical relationships","Explain the physics principles"],strand2:["Describe the phenomenon step by step","Explain what happens at the interface","Connect to real observations"],strand3:["Give specific examples of applications","Explain how TIR is used practically","Discuss the benefits and limitations"],strand4:["Show calculations with steps","Analyze given data systematically","Draw logical conclusions"]};u.length<3&&u.push(...v[n]||[]);const y=Math.round(o*.3+a*.3+p*.2+d*.1+h*.1);return{matchedKeywords:l,matchedConcepts:c,level:Math.min(8,Math.max(0,y)),suggestions:u.slice(0,5)}}const fce={"critical-angle":{strand1:{level2:{tip:" **Define** total internal reflection using simple, clear language. **State** the basic conditions when it happens.",commandTerms:["define","state","list"],guidance:"Focus on basic facts: TIR occurs when light completely reflects at a boundary. Use simple vocabulary and avoid complex explanations.",examples:["Define TIR as complete reflection of light","State that it happens at boundaries between materials"]},level4:{tip:" **Describe** the conditions for TIR clearly. **Identify** the key factors: dense to less dense medium + critical angle.",commandTerms:["describe","identify","outline"],guidance:"Explain the two main conditions clearly. Use proper scientific terms like 'refractive index' and 'critical angle'.",examples:["Describe light traveling from glass to air","Identify when incident angle exceeds critical angle"]},level6:{tip:" **Calculate** critical angles using the formula sin(c) = n/n. **Explain** the physics behind Snell's law.",commandTerms:["calculate","explain","apply"],guidance:"Show mathematical work clearly. Connect formulas to physical principles. Explain why the formula works.",examples:["Calculate c for glass-air interface","Explain relationship between refractive indices and critical angle"]},level8:{tip:" **Analyze** complex scenarios involving multiple factors. **Evaluate** how changing variables affects TIR behavior.",commandTerms:["analyze","evaluate","synthesize"],guidance:"Consider multiple variables simultaneously. Discuss implications and trade-offs. Connect to real applications.",examples:["Analyze effect of temperature on critical angle","Evaluate optimal refractive index differences for optical devices"]}},strand2:{level2:{tip:" **Identify** when TIR happens. **State** that it occurs above the critical angle.",commandTerms:["identify","state","recognize"],guidance:"Focus on observable conditions. Keep explanations simple and direct.",examples:["Identify angles where complete reflection occurs","State the critical angle as the boundary"]},level4:{tip:" **Describe** what happens at different angles. **Compare** behavior below and above critical angle.",commandTerms:["describe","compare","distinguish"],guidance:"Contrast partial reflection+refraction vs total reflection. Use clear, scientific language.",examples:["Describe refraction below critical angle","Compare light behavior at different incident angles"]},level6:{tip:" **Explain** why TIR only works in one direction. **Predict** light behavior using Snell's law.",commandTerms:["explain","predict","justify"],guidance:"Use Snell's law to show mathematical impossibility of certain solutions. Connect math to physics.",examples:["Explain why sin() > 1 is impossible","Predict light paths in different scenarios"]},level8:{tip:" **Evaluate** multiple factors affecting TIR. **Analyze** the relationship between material properties and optical behavior.",commandTerms:["evaluate","analyze","assess"],guidance:"Consider wavelength dependence, temperature effects, and material properties comprehensively.",examples:["Evaluate how dispersion affects critical angles","Analyze temperature dependence of refractive index"]}},strand3:{level2:{tip:" **List** common applications of TIR. **Give** examples like fiber optics and diamonds.",commandTerms:["list","give","name"],guidance:"Provide concrete, familiar examples. Keep descriptions simple and factual.",examples:["List: fiber optics, diamonds, periscopes","Name everyday items that use TIR"]},level4:{tip:" **Describe** how TIR is used in specific applications. **Outline** the benefits it provides.",commandTerms:["describe","outline","summarize"],guidance:"Explain practical benefits clearly. Connect TIR properties to application advantages.",examples:["Describe how fiber optics guide light","Outline benefits of TIR in telecommunications"]},level6:{tip:" **Explain** the physics behind TIR applications. **Discuss** why TIR is ideal for these uses.",commandTerms:["explain","discuss","justify"],guidance:"Connect physical principles to practical benefits. Explain material choices and design decisions.",examples:["Explain why diamonds sparkle due to high refractive index","Discuss advantages of TIR over mirrors in fiber optics"]},level8:{tip:" **Evaluate** multiple TIR applications. **Analyze** limitations and trade-offs in real systems.",commandTerms:["evaluate","analyze","critique"],guidance:"Consider multiple applications comprehensively. Address both advantages and limitations.",examples:["Evaluate medical endoscopy vs external imaging","Analyze future potential of TIR technology"]}},strand4:{level2:{tip:" **Calculate** using given formulas and values. **Show** your mathematical work clearly.",commandTerms:["calculate","show","compute"],guidance:"Use provided formulas correctly. Include units and show step-by-step calculations.",examples:["Calculate critical angle with given refractive indices","Show work for simple TIR problems"]},level4:{tip:" **Solve** TIR problems using appropriate equations. **Determine** unknown variables from given data.",commandTerms:["solve","determine","find"],guidance:"Choose correct equations for different scenarios. Organize solution steps logically.",examples:["Solve for refractive index from critical angle","Determine if TIR will occur in given scenario"]},level6:{tip:" **Analyze** complex TIR scenarios with multiple variables. **Investigate** relationships between different factors.",commandTerms:["analyze","investigate","examine"],guidance:"Handle multi-step problems systematically. Consider how changing one variable affects others.",examples:["Analyze light behavior in layered media","Investigate optimal fiber design parameters"]},level8:{tip:" **Design** experiments to test TIR principles. **Evaluate** measurement accuracy and sources of error.",commandTerms:["design","evaluate","critique"],guidance:"Consider experimental design holistically. Address practical limitations and improvement strategies.",examples:["Design critical angle measurement experiment","Evaluate experimental uncertainties and improvements"]}}},"fiber-optics":{strand1:{level2:{tip:" **Identify** the main parts of optical fibers: core and cladding. **State** their basic functions.",commandTerms:["identify","state","name"],guidance:"Focus on basic components and their simple functions. Keep explanations straightforward.",examples:["Identify core as light-carrying part","State that cladding provides confinement"]},level4:{tip:" **Describe** how light travels through fiber cores. **Explain** the role of refractive index differences.",commandTerms:["describe","explain","outline"],guidance:"Connect TIR principles to fiber operation. Use appropriate scientific terminology.",examples:["Describe light bouncing along fiber core","Explain core-cladding index difference"]},level6:{tip:" **Calculate** numerical aperture and acceptance angles. **Analyze** single-mode vs multimode fiber differences.",commandTerms:["calculate","analyze","compare"],guidance:"Use fiber optic equations correctly. Compare different fiber types systematically.",examples:["Calculate NA from core/cladding indices","Analyze bandwidth limitations of multimode fibers"]},level8:{tip:" **Evaluate** fiber design trade-offs. **Synthesize** multiple factors affecting fiber performance.",commandTerms:["evaluate","synthesize","optimize"],guidance:"Consider multiple design parameters simultaneously. Address complex trade-offs in system design.",examples:["Evaluate step-index vs graded-index performance","Synthesize optimal fiber design for specific applications"]}},strand2:{level2:{tip:" **List** components of fiber optic systems: light sources, fibers, detectors. **Name** their functions.",commandTerms:["list","name","identify"],guidance:"Focus on main system components. Keep descriptions simple and functional.",examples:["List: LED, fiber, photodetector","Name function of each component"]},level4:{tip:" **Describe** how fiber optic communication systems work. **Outline** the signal transmission process.",commandTerms:["describe","outline","trace"],guidance:"Follow signal path through system. Explain electrical-to-optical-to-electrical conversion.",examples:["Describe signal conversion process","Outline data transmission through fiber"]},level6:{tip:" **Explain** advanced technologies like WDM and optical amplifiers. **Discuss** how they increase system capacity.",commandTerms:["explain","discuss","analyze"],guidance:"Connect advanced technologies to system performance improvements. Use technical terminology appropriately.",examples:["Explain wavelength division multiplexing","Discuss optical amplifier benefits"]},level8:{tip:" **Evaluate** fiber system performance factors. **Assess** limitations and emerging solutions.",commandTerms:["evaluate","assess","critique"],guidance:"Consider multiple performance metrics. Address current limitations and future developments.",examples:["Evaluate factors limiting fiber bandwidth","Assess potential of new fiber technologies"]}},strand3:{level2:{tip:" **List** where fiber optics are used: internet, medical, sensing. **Give** specific examples.",commandTerms:["list","give","mention"],guidance:"Provide concrete, recognizable applications. Focus on familiar examples.",examples:["List internet, phone, medical uses","Give examples like endoscopes, internet cables"]},level4:{tip:" **Describe** how fiber optics changed telecommunications. **Outline** benefits over traditional methods.",commandTerms:["describe","outline","compare"],guidance:"Explain transformation of communications. Compare advantages over older technologies.",examples:["Describe internet revolution","Outline advantages over copper cables"]},level6:{tip:" **Explain** why fiber properties make them ideal for specific applications. **Justify** material and design choices.",commandTerms:["explain","justify","relate"],guidance:"Connect physical properties to application requirements. Explain material selection rationale.",examples:["Explain why fibers are ideal for long-distance communication","Justify use in medical applications"]},level8:{tip:" **Analyze** societal impact of fiber optic technology. **Evaluate** future implications and emerging applications.",commandTerms:["analyze","evaluate","predict"],guidance:"Consider broad societal effects. Discuss both positive impacts and challenges.",examples:["Analyze global digital divide issues","Evaluate potential of emerging fiber applications"]}},strand4:{level2:{tip:" **Identify** basic design factors in fiber systems. **State** simple requirements.",commandTerms:["identify","state","recognize"],guidance:"Focus on fundamental design considerations. Keep requirements simple and clear.",examples:["Identify need for protection","State basic performance requirements"]},level4:{tip:" **Describe** key design considerations for fiber installations. **Outline** basic requirements.",commandTerms:["describe","outline","specify"],guidance:"Explain practical installation factors. Address basic engineering requirements.",examples:["Describe bend radius requirements","Outline environmental protection needs"]},level6:{tip:" **Explain** trade-offs between performance, cost, and complexity. **Analyze** design optimization strategies.",commandTerms:["explain","analyze","optimize"],guidance:"Address multiple competing requirements. Explain optimization approaches.",examples:["Explain cost vs performance trade-offs","Analyze installation complexity factors"]},level8:{tip:" **Evaluate** innovative fiber designs and emerging technologies. **Synthesize** solutions for complex challenges.",commandTerms:["evaluate","synthesize","innovate"],guidance:"Consider cutting-edge developments. Address complex system-level challenges.",examples:["Evaluate new fiber designs","Synthesize solutions for next-generation networks"]}}}},pce=()=>{const[t,e]=W.useState(30),[n,r]=W.useState(1.5),[i,s]=W.useState(1),[o,a]=W.useState(550),[l,c]=W.useState(!0),[u,d]=W.useState(1),[h,f]=W.useState(!1),p=W.useRef(null),g=W.useRef(0),v=800,y=500,x=y/2,S=Math.asin(i/n)*(180/Math.PI),C=t>S,A=C?0:Math.asin(n/i*Math.sin(t*Math.PI/180))*(180/Math.PI);W.useEffect(()=>{O()},[t,n,i,o,l]);const O=()=>{const B=p.current;if(!B)return;const I=B.getContext("2d");if(!I)return;I.clearRect(0,0,v,y),I.fillStyle="rgba(100, 150, 255, 0.3)",I.fillRect(0,x,v,y-x),I.fillStyle="rgba(255, 255, 100, 0.2)",I.fillRect(0,0,v,x),I.strokeStyle="#000",I.lineWidth=3,I.setLineDash([]),I.beginPath(),I.moveTo(0,x),I.lineTo(v,x),I.stroke(),I.strokeStyle="#666",I.lineWidth=1,I.setLineDash([5,5]),I.beginPath(),I.moveTo(v/2,0),I.lineTo(v/2,y),I.stroke(),I.setLineDash([]);const Q=v/2,Z=150,ne=Q-Z*Math.sin(t*Math.PI/180),Y=x+Z*Math.cos(t*Math.PI/180);I.strokeStyle=M(o),I.lineWidth=3,I.beginPath(),I.moveTo(ne,Y),I.lineTo(Q,x),I.stroke(),N(I,ne,Y,Q,x,M(o));const ie=Q+Z*Math.sin(t*Math.PI/180),q=x+Z*Math.cos(t*Math.PI/180);if(I.strokeStyle=M(o),I.lineWidth=2,I.beginPath(),I.moveTo(Q,x),I.lineTo(ie,q),I.stroke(),N(I,Q,x,ie,q,M(o)),!C){const G=Q+Z*Math.sin(A*Math.PI/180),P=x-Z*Math.cos(A*Math.PI/180);I.strokeStyle=M(o),I.lineWidth=1.5,I.globalAlpha=.7,I.beginPath(),I.moveTo(Q,x),I.lineTo(G,P),I.stroke(),I.globalAlpha=1,N(I,Q,x,G,P,M(o))}if(l&&!isNaN(S)){const G=Q-Z*Math.sin(S*Math.PI/180),P=x+Z*Math.cos(S*Math.PI/180);I.strokeStyle="#ff6b6b",I.lineWidth=2,I.setLineDash([10,5]),I.beginPath(),I.moveTo(G,P),I.lineTo(Q,x),I.stroke(),I.setLineDash([])}I.fillStyle="#000",I.font="14px Arial",I.fillText(`Medium 1 (n = ${n})`,20,x+30),I.fillText(`Medium 2 (n = ${i})`,20,30),I.fillText(`Incident Angle: ${t.toFixed(1)}`,20,y-80),I.fillText(`Critical Angle: ${S.toFixed(1)}`,20,y-60),C?(I.fillStyle="#ff0000",I.font="bold 16px Arial",I.fillText("TOTAL INTERNAL REFLECTION!",20,y-40)):I.fillText(`Refracted Angle: ${A.toFixed(1)}`,20,y-40),D(I,Q,x,t,"incident"),C||D(I,Q,x,A,"refracted")},M=B=>B<380?"#8b00ff":B<450?"#4b0082":B<495?"#0000ff":B<570?"#00ff00":B<590?"#ffff00":B<620?"#ffa500":(B<750,"#ff0000"),N=(B,I,Q,Z,ne,Y)=>{const q=Math.atan2(ne-Q,Z-I);B.strokeStyle=Y,B.fillStyle=Y,B.lineWidth=2,B.beginPath(),B.moveTo(Z,ne),B.lineTo(Z-10*Math.cos(q-Math.PI/6),ne-10*Math.sin(q-Math.PI/6)),B.moveTo(Z,ne),B.lineTo(Z-10*Math.cos(q+Math.PI/6),ne-10*Math.sin(q+Math.PI/6)),B.stroke()},D=(B,I,Q,Z,ne)=>{const ie=ne==="incident"?Math.PI/2:-Math.PI/2,q=ne==="incident"?Math.PI/2-Z*Math.PI/180:-Math.PI/2+Z*Math.PI/180;B.strokeStyle=ne==="incident"?"#333":"#666",B.lineWidth=1,B.beginPath(),B.arc(I,Q,40,Math.min(ie,q),Math.max(ie,q)),B.stroke();const G=(ie+q)/2,P=I+(40+15)*Math.cos(G),U=Q+(40+15)*Math.sin(G);B.fillStyle="#333",B.font="12px Arial",B.fillText(`${Z.toFixed(0)}`,P-10,U+5)},V=()=>{f(!0);let B=0;const I=()=>{B+=u,e(B%90),h&&(g.current=requestAnimationFrame(I))};I()},L=()=>{f(!1),g.current&&cancelAnimationFrame(g.current)},E=()=>{L(),e(30),r(1.5),s(1),a(550)};return w.jsxs("div",{className:"tir-simulation p-4 bg-gray-100 rounded-lg",children:[w.jsx("h2",{className:"text-2xl font-bold mb-4 text-purple-800",children:" Total Internal Reflection Simulator"}),w.jsxs("div",{className:"flex gap-4",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("canvas",{ref:p,width:v,height:y,className:"border border-gray-300 bg-white rounded"}),w.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[w.jsx("button",{onClick:V,disabled:h,className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400",children:" Animate"}),w.jsx("button",{onClick:L,disabled:!h,className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-400",children:" Stop"}),w.jsx("button",{onClick:E,className:"px-3 py-1 bg-purple-500 text-white rounded hover:bg-purple-600",children:" Reset"}),w.jsxs("label",{className:"flex items-center",children:[w.jsx("input",{type:"checkbox",checked:l,onChange:B=>c(B.target.checked),className:"mr-2"}),"Show Critical Angle"]})]})]}),w.jsxs("div",{className:"w-80 bg-white p-4 rounded-lg shadow",children:[w.jsx("h3",{className:"text-lg font-semibold mb-3 text-purple-700",children:"Controls"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Incident Angle: ",t.toFixed(1),""]}),w.jsx("input",{type:"range",min:"0",max:"89",step:"0.5",value:t,onChange:B=>e(parseFloat(B.target.value)),className:"w-full",disabled:h})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Refractive Index 1 (Dense): ",n]}),w.jsx("input",{type:"range",min:"1.0",max:"2.5",step:"0.1",value:n,onChange:B=>r(parseFloat(B.target.value)),className:"w-full"})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Refractive Index 2 (Less Dense): ",i]}),w.jsx("input",{type:"range",min:"1.0",max:"1.5",step:"0.1",value:i,onChange:B=>s(parseFloat(B.target.value)),className:"w-full"})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Wavelength: ",o," nm"]}),w.jsx("input",{type:"range",min:"380",max:"750",step:"10",value:o,onChange:B=>a(parseInt(B.target.value)),className:"w-full"}),w.jsx("div",{className:"text-xs text-gray-600 mt-1",children:o<450?"Violet/Blue":o<495?"Blue":o<570?"Green":o<590?"Yellow":o<620?"Orange":"Red"})]}),h&&w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Animation Speed: ",u,"x"]}),w.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:u,onChange:B=>d(parseFloat(B.target.value)),className:"w-full"})]})]}),w.jsxs("div",{className:"mt-6 p-3 bg-purple-50 rounded",children:[w.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:" Current Data:"}),w.jsxs("div",{className:"text-sm space-y-1",children:[w.jsxs("div",{children:["Critical Angle: ",w.jsxs("strong",{children:[S.toFixed(2),""]})]}),w.jsxs("div",{children:["Incident Angle: ",w.jsxs("strong",{children:[t.toFixed(1),""]})]}),!C&&w.jsxs("div",{children:["Refracted Angle: ",w.jsxs("strong",{children:[A.toFixed(1),""]})]}),w.jsx("div",{className:`font-bold ${C?"text-red-600":"text-green-600"}`,children:C?"Total Internal Reflection":"Refraction Occurs"})]})]})]})]}),w.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg shadow",children:[w.jsx("h3",{className:"text-lg font-semibold mb-2 text-purple-700",children:" Learning Objectives"}),w.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-1",children:[w.jsx("li",{children:"Understand the relationship between incident angle and refraction"}),w.jsx("li",{children:"Calculate the critical angle using Snell's law"}),w.jsx("li",{children:"Observe when total internal reflection occurs"}),w.jsx("li",{children:"Explore how refractive indices affect light behavior"}),w.jsx("li",{children:"Apply concepts to real-world applications like fiber optics"})]}),w.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 rounded border-l-4 border-yellow-400",children:[w.jsxs("p",{className:"text-sm",children:[w.jsx("strong",{children:"Formula:"})," sin(c) = n/n where c is the critical angle"]}),w.jsxs("p",{className:"text-sm",children:[w.jsx("strong",{children:"Condition:"})," Total internal reflection occurs when  greater than  c"]})]})]})]})},xd={"critical-angle":{strand1:{level2:[{id:"ca_s1_l2_mcq1",type:"mcq",level:2,points:2,question:"What happens when light travels from a dense medium to a less dense medium?",learningPath:"critical-angle",strand:1,concept:"basic light behavior",keywords:["refraction","medium","light"],options:[{id:"a",text:"Light always reflects back",isCorrect:!1},{id:"b",text:"Light bends away from the normal",isCorrect:!0},{id:"c",text:"Light travels in a straight line",isCorrect:!1},{id:"d",text:"Light disappears",isCorrect:!1}],explanation:"When light travels from a dense medium (like glass) to a less dense medium (like air), it bends away from the normal according to Snell's law."},{id:"ca_s1_l2_fill1",type:"fill-blank",level:2,points:2,question:"Fill in the blanks about light behavior:",learningPath:"critical-angle",strand:1,concept:"refraction basics",keywords:["refraction","normal","angle"],text:"When light changes direction as it passes from one medium to another, this process is called {blank}. The imaginary line perpendicular to the surface is called the {blank}.",blanks:[{id:"blank1",correctAnswers:["refraction"],caseSensitive:!1,hints:["Think about light bending"]},{id:"blank2",correctAnswers:["normal"],caseSensitive:!1,hints:["Perpendicular line to surface"]}],explanation:"Refraction is the bending of light when it passes between different media. The normal is the reference line used to measure angles of incidence and refraction."}],level4:[{id:"ca_s1_l4_mcq1",type:"mcq",level:4,points:4,question:"The critical angle is the angle of incidence at which:",learningPath:"critical-angle",strand:1,concept:"critical angle definition",keywords:["critical angle","total internal reflection","angle of refraction"],options:[{id:"a",text:"Light is completely absorbed",isCorrect:!1},{id:"b",text:"The angle of refraction is 90",isCorrect:!0},{id:"c",text:"Light travels parallel to the surface",isCorrect:!1,level:3},{id:"d",text:"Refraction stops completely",isCorrect:!1}],explanation:"The critical angle is defined as the angle of incidence for which the angle of refraction is exactly 90. Beyond this angle, total internal reflection occurs."},{id:"ca_s1_l4_short1",type:"short-answer",level:4,points:4,question:"Explain in simple terms what total internal reflection is.",learningPath:"critical-angle",strand:1,concept:"TIR basics",keywords:["total internal reflection","critical angle","dense medium"],minWords:15,maxWords:50,sampleAnswer:"Total internal reflection occurs when light traveling in a dense medium hits the boundary with a less dense medium at an angle greater than the critical angle, causing all the light to be reflected back instead of being refracted.",evaluationCriteria:{requiredKeywords:["total internal reflection","critical angle","dense medium","reflected"],requiredConcepts:["angle greater than critical","all light reflected","no refraction"]}}],level6:[{id:"ca_s1_l6_match1",type:"match-click",level:6,points:6,question:"Match the TIR scenarios with their outcomes:",learningPath:"critical-angle",strand:1,concept:"TIR scenarios",keywords:["angle comparison","refraction","reflection"],leftItems:[{id:"scenario1",text:"Angle < Critical Angle"},{id:"scenario2",text:"Angle = Critical Angle"},{id:"scenario3",text:"Angle > Critical Angle"}],rightItems:[{id:"result1",text:"Light refracts into second medium"},{id:"result2",text:"Light refracts at 90 to normal"},{id:"result3",text:"Total internal reflection occurs"}],correctMatches:[{leftId:"scenario1",rightId:"result1"},{leftId:"scenario2",rightId:"result2"},{leftId:"scenario3",rightId:"result3"}],explanation:"The behavior of light at an interface depends on whether the incident angle is below, equal to, or above the critical angle."},{id:"ca_s1_l6_mcq1",type:"mcq",level:6,points:6,question:"If the refractive index of glass is 1.5 and air is 1.0, what is the critical angle for total internal reflection?",learningPath:"critical-angle",strand:1,concept:"critical angle calculation",keywords:["refractive index","sin","critical angle"],options:[{id:"a",text:"30",isCorrect:!1},{id:"b",text:"41.8",isCorrect:!0},{id:"c",text:"48.6",isCorrect:!1,level:4},{id:"d",text:"60",isCorrect:!1}],explanation:"Using sin(c) = n/n = 1.0/1.5 = 0.667, therefore c = sin(0.667) = 41.8. This is the critical angle for glass-air interface."}],level8:[{id:"ca_s1_l8_short1",type:"short-answer",level:8,points:8,question:"A diamond has a refractive index of 2.42. Calculate the critical angle and explain why this makes diamonds particularly brilliant and sparkly.",learningPath:"critical-angle",strand:1,concept:"advanced TIR applications",keywords:["diamond","brilliance","critical angle","total internal reflection"],minWords:60,maxWords:120,sampleAnswer:"The critical angle for diamond is c = sin(1/2.42) = sin(0.413) = 24.4. This very small critical angle means that light entering a diamond is easily trapped inside through total internal reflection. Most light rays hitting the internal surfaces do so at angles greater than 24.4, causing them to reflect internally multiple times before eventually exiting. This creates the brilliant sparkle and fire that diamonds are famous for, as light bounces around inside the stone before emerging with enhanced intensity and dispersion.",evaluationCriteria:{requiredKeywords:["sin","24.4","critical angle","total internal reflection","brilliant"],requiredConcepts:["small critical angle","light trapping","multiple reflections","sparkle"]}},{id:"ca_s1_l8_fill1",type:"fill-blank",level:8,points:8,question:"Complete this advanced explanation of optical fiber operation:",learningPath:"critical-angle",strand:1,concept:"fiber optic principles",keywords:["optical fiber","cladding","core","step-index"],text:"In a step-index optical fiber, the {blank} has a higher refractive index than the {blank}, creating a step change in refractive index. Light rays that enter within the {blank} cone will undergo total internal reflection at the core-cladding boundary, ensuring efficient light guidance with minimal {blank}.",blanks:[{id:"blank1",correctAnswers:["core"],caseSensitive:!1},{id:"blank2",correctAnswers:["cladding"],caseSensitive:!1},{id:"blank3",correctAnswers:["acceptance","numerical aperture"],caseSensitive:!1,hints:["Think about the cone of light that can enter"]},{id:"blank4",correctAnswers:["loss","attenuation"],caseSensitive:!1}],explanation:"The step-index design ensures efficient light guidance through TIR. The numerical aperture defines the acceptance cone for incoming light rays."}]},strand2:{level2:[{id:"ca_s2_l2_mcq1",type:"mcq",level:2,points:2,question:"What happens to light within an optical fiber?",learningPath:"critical-angle",strand:2,concept:"TIR conditions",keywords:["optical fiber","total internal reflection","light guidance"],options:[{id:"a",text:"It diffracts around corners",isCorrect:!1},{id:"b",text:"It disperses into colors",isCorrect:!1},{id:"c",text:"It refracts continuously",isCorrect:!1},{id:"d",text:"It undergoes total internal reflection",isCorrect:!0}],explanation:"Light in optical fibers undergoes total internal reflection at the core-cladding boundary, allowing it to travel long distances with minimal loss."},{id:"ca_s2_l2_mcq2",type:"mcq",level:2,points:2,question:"Which conditions are necessary for light to be totally internally reflected?",learningPath:"critical-angle",strand:2,concept:"TIR conditions",keywords:["total internal reflection","critical angle","dense medium"],options:[{id:"a",text:"Light in less dense medium, angle less than critical angle",isCorrect:!1},{id:"b",text:"Light in less dense medium, angle greater than critical angle",isCorrect:!1},{id:"c",text:"Light in more dense medium, angle less than critical angle",isCorrect:!1},{id:"d",text:"Light in more dense medium, angle greater than critical angle",isCorrect:!0}],explanation:"TIR requires light to travel FROM a more dense medium TO a less dense medium, with the incident angle greater than the critical angle."}],level4:[{id:"ca_s2_l4_short1",type:"short-answer",level:4,points:4,question:"Describe what is meant by 'total internal reflection' and explain when it occurs.",learningPath:"critical-angle",strand:2,concept:"TIR phenomenon description",keywords:["total internal reflection","critical angle","dense medium","no refraction"],minWords:30,maxWords:80,sampleAnswer:"Total internal reflection occurs when light traveling in a dense medium hits the boundary with a less dense medium at an angle greater than the critical angle. When this happens, all incident light is reflected back into the same medium and no light is transmitted or refracted into the second medium.",evaluationCriteria:{requiredKeywords:["total internal reflection","critical angle","dense medium","reflected","no refraction"],requiredConcepts:["angle greater than critical","all light reflected","no transmission"]}},{id:"ca_s2_l4_mcq1",type:"mcq",level:4,points:4,question:"What happens to light at the critical angle?",learningPath:"critical-angle",strand:2,concept:"critical angle behavior",keywords:["critical angle","refracted ray","90 degrees"],options:[{id:"a",text:"Light is completely absorbed",isCorrect:!1},{id:"b",text:"The refracted ray travels at 90 to the normal",isCorrect:!0},{id:"c",text:"Light splits into many colors",isCorrect:!1},{id:"d",text:"All light is reflected back",isCorrect:!1}],explanation:"At the critical angle, the refracted ray emerges parallel to the interface (90 to the normal). This is the boundary condition between refraction and total internal reflection."}],level6:[{id:"ca_s2_l6_short1",type:"short-answer",level:6,points:6,question:"Explain why total internal reflection only occurs when light travels from a denser to less dense medium, using Snell's law to support your explanation.",learningPath:"critical-angle",strand:2,concept:"TIR physics explanation",keywords:["dense medium","less dense","snells law","mathematical constraint"],minWords:50,maxWords:100,sampleAnswer:"When light travels from dense to less dense medium, it bends away from the normal according to Snell's law. At the critical angle, the refracted ray grazes the surface (90 to normal). Beyond this angle, Snell's law would require sin() > 1, which is mathematically impossible since sine values cannot exceed 1. Therefore, no refraction can occur and all light is reflected. In the opposite direction, light bends toward the normal and can always be refracted.",evaluationCriteria:{requiredKeywords:["dense medium","less dense medium","snells law","mathematically impossible","sin greater than 1"],requiredConcepts:["bending away from normal","mathematical constraint","directional requirement"]}}],level8:[{id:"ca_s2_l8_short1",type:"short-answer",level:8,points:8,question:"Analyze how wavelength affects the critical angle and discuss the implications for white light undergoing total internal reflection.",learningPath:"critical-angle",strand:2,concept:"wavelength dependence and dispersion",keywords:["wavelength","dispersion","white light","different colors","critical angles"],minWords:80,maxWords:150,sampleAnswer:"Since refractive index varies with wavelength (dispersion), different colors have slightly different critical angles. Red light has a lower refractive index than blue light in most materials, so red has a larger critical angle than blue. When white light undergoes total internal reflection, colors near the critical angle may behave differently - some may be totally reflected while others are partially transmitted. This can cause chromatic effects at the critical angle transition. In practical applications like optical fibers, this wavelength dependence contributes to chromatic dispersion, which can limit bandwidth in multimode fibers.",evaluationCriteria:{requiredKeywords:["refractive index varies","wavelength","dispersion","different critical angles","chromatic effects"],requiredConcepts:["color dependence","practical implications","optical fiber effects","bandwidth limitations"]}}]},strand3:{level2:[{id:"ca_s3_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the sentences about TIR applications:",learningPath:"critical-angle",strand:3,concept:"TIR applications",keywords:["fiber optics","diamonds","applications"],text:"Optical {blank} use total internal reflection to transmit light signals over long distances. {blank} sparkle brilliantly because of their high refractive index causing total internal reflection.",blanks:[{id:"blank1",correctAnswers:["fibers","fibres"],caseSensitive:!1,hints:["Used for internet and telecommunications"]},{id:"blank2",correctAnswers:["diamonds"],caseSensitive:!1,hints:["Precious gemstones that sparkle"]}],explanation:"Optical fibers revolutionized communication by using TIR to guide light, while diamonds' brilliance comes from their very high refractive index creating extensive total internal reflection."},{id:"ca_s3_l2_mcq1",type:"mcq",level:2,points:2,question:"Which device relies primarily on total internal reflection to function?",learningPath:"critical-angle",strand:3,concept:"TIR-based devices",keywords:["optical fiber","device function","TIR application"],options:[{id:"a",text:"Magnifying glass",isCorrect:!1},{id:"b",text:"Optical fiber",isCorrect:!0},{id:"c",text:"Camera lens",isCorrect:!1},{id:"d",text:"Telescope mirror",isCorrect:!1}],explanation:"Optical fibers use total internal reflection to guide light through the core by reflecting it off the core-cladding boundary."}],level4:[{id:"ca_s3_l4_short1",type:"short-answer",level:4,points:4,question:"Describe how total internal reflection enables fiber optic communication and state TWO advantages this provides over traditional copper cables.",learningPath:"critical-angle",strand:3,concept:"fiber optic communication",keywords:["fiber optic communication","signal transmission","advantages","copper cables"],minWords:40,maxWords:80,sampleAnswer:"Light signals travel through fiber cores by total internal reflection at the core-cladding boundary. Light bounces along the fiber maintaining signal strength over long distances. Advantages include: higher bandwidth for faster data transmission, less signal loss over long distances, immunity to electromagnetic interference, and enhanced security since signals are harder to intercept.",evaluationCriteria:{requiredKeywords:["total internal reflection","core-cladding boundary","signal transmission","advantages"],requiredConcepts:["light guidance mechanism","two specific advantages","comparison with copper"]}},{id:"ca_s3_l4_short2",type:"short-answer",level:4,points:4,question:"Explain why diamonds appear particularly brilliant and sparkly when cut properly.",learningPath:"critical-angle",strand:3,concept:"diamond brilliance",keywords:["diamond cutting","refractive index","brilliance","light behavior"],minWords:30,maxWords:70,sampleAnswer:"Diamond has a very high refractive index (2.4) which creates a very small critical angle. This means most light entering the diamond undergoes total internal reflection, bouncing multiple times inside before emerging. This creates the brilliant sparkle and fire that diamonds are famous for.",evaluationCriteria:{requiredKeywords:["high refractive index","small critical angle","total internal reflection","multiple reflections"],requiredConcepts:["material properties","light behavior","brilliance mechanism"]}}],level6:[{id:"ca_s3_l6_short1",type:"short-answer",level:6,points:6,question:"Explain the physics behind how medical endoscopes use total internal reflection to enable doctors to see inside the human body, and justify why this method is superior to other imaging approaches.",learningPath:"critical-angle",strand:3,concept:"medical endoscopy applications",keywords:["medical endoscopy","fiber bundle","internal imaging","minimally invasive"],minWords:60,maxWords:120,sampleAnswer:"Medical endoscopes contain flexible fiber bundles with thousands of optical fibers. Each fiber guides light by total internal reflection, maintaining image quality even when bent. Light travels down some fibers to illuminate internal areas, while reflected light returns through other fibers to create detailed images. This method is superior because it's minimally invasive, provides flexible access to difficult areas, offers real-time imaging capabilities, and doesn't use ionizing radiation like X-rays.",evaluationCriteria:{requiredKeywords:["fiber bundle","total internal reflection","flexible","minimally invasive","real-time"],requiredConcepts:["physics mechanism","image formation","advantages over alternatives"]}},{id:"ca_s3_l6_short2",type:"short-answer",level:6,points:6,question:"Analyze why prisms are used instead of mirrors in high-quality binoculars and periscopes.",learningPath:"critical-angle",strand:3,concept:"prism vs mirror applications",keywords:["prisms vs mirrors","light efficiency","image quality","optical instruments"],minWords:40,maxWords:90,sampleAnswer:"Prisms use total internal reflection which reflects nearly 100% of light, while mirrors typically reflect only 90-95% due to absorption losses. TIR maintains image brightness and contrast better than mirrors. Additionally, prisms can correct image orientation while reflecting, making them ideal for compact optical instruments like binoculars and periscopes.",evaluationCriteria:{requiredKeywords:["total internal reflection","100% reflection","light efficiency","image quality"],requiredConcepts:["comparison with mirrors","practical advantages","optical performance"]}}],level8:[{id:"ca_s3_l8_short1",type:"short-answer",level:8,points:8,question:"Evaluate the role of total internal reflection in three different modern technologies, analyzing both the advantages and limitations of TIR-based solutions in each case.",learningPath:"critical-angle",strand:3,concept:"comprehensive technology evaluation",keywords:["technology evaluation","multiple applications","advantages","limitations"],minWords:100,maxWords:180,sampleAnswer:"In fiber optic telecommunications, TIR provides advantages of high bandwidth and low loss but limitations include high installation costs and fragility. In LED lighting design, TIR improves light extraction efficiency and reduces energy waste, but requires precise manufacturing and adds complexity. In precision optical instruments like laser interferometers, TIR offers near-perfect reflection and stability, but is sensitive to surface quality and environmental factors. Each application leverages TIR's unique properties while addressing specific engineering constraints and performance requirements.",evaluationCriteria:{requiredKeywords:["three technologies","advantages","limitations","fiber optics","LEDs","precision optics"],requiredConcepts:["balanced evaluation","technology-specific analysis","engineering constraints"]}}]},strand4:{level2:[{id:"ca_s4_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the calculation:",learningPath:"critical-angle",strand:4,concept:"basic calculations",keywords:["refractive index","speed of light","calculation"],text:"The refractive index of glass is 1.5. If the speed of light in air is 3.0  10 m/s, then the speed of light in glass is {blank}  10 m/s. Use the formula: speed = c/n where c is speed in air and n is refractive index.",blanks:[{id:"blank1",correctAnswers:["2.0","2"],caseSensitive:!1,hints:["Divide 3.0 by 1.5"]}],explanation:"Using v = c/n: v = (3.0  10 m/s)  1.5 = 2.0  10 m/s. Light travels slower in denser materials."},{id:"ca_s4_l2_mcq1",type:"mcq",level:2,points:2,question:"A ray of light hits a glass-air boundary at 30. The critical angle for this glass is 42. Will total internal reflection occur?",learningPath:"critical-angle",strand:4,concept:"TIR determination",keywords:["critical angle comparison","TIR conditions"],options:[{id:"a",text:"Yes, because 30 > 42",isCorrect:!1},{id:"b",text:"No, because 30 < 42",isCorrect:!0},{id:"c",text:"Yes, because light always reflects",isCorrect:!1},{id:"d",text:"Cannot determine from given information",isCorrect:!1}],explanation:"TIR only occurs when the incident angle exceeds the critical angle. Since 30 < 42, both reflection and refraction will occur, not total internal reflection."}],level4:[{id:"ca_s4_l4_mcq1",type:"mcq",level:4,points:4,question:"A liquid has a refractive index of 1.5. What is the critical angle when light travels from this liquid to air? (Use sin(0.667) = 41.8)",learningPath:"critical-angle",strand:4,concept:"critical angle calculation",keywords:["critical angle formula","refractive index","calculation"],options:[{id:"a",text:"30.0",isCorrect:!1},{id:"b",text:"41.8",isCorrect:!0},{id:"c",text:"48.6",isCorrect:!1},{id:"d",text:"60.0",isCorrect:!1}],explanation:"Using sin(c) = n/n = 1/1.5 = 0.667, therefore c = sin(0.667) = 41.8. This is the critical angle for the liquid-air interface."},{id:"ca_s4_l4_short1",type:"short-answer",level:4,points:4,question:"Light traveling in glass (n=1.5) hits the glass-air boundary at 45. Determine whether TIR occurs and explain your reasoning.",learningPath:"critical-angle",strand:4,concept:"TIR analysis",keywords:["TIR determination","angle comparison","critical angle"],minWords:30,maxWords:70,sampleAnswer:"First calculate critical angle: sin(c) = 1/1.5 = 0.667, so c = 41.8. Since the incident angle (45) is greater than the critical angle (41.8), total internal reflection will occur. All light will be reflected back into the glass with no refracted ray.",evaluationCriteria:{requiredKeywords:["critical angle","41.8 degrees","45 degrees","total internal reflection"],requiredConcepts:["calculation method","angle comparison","TIR conclusion"]}}],level6:[{id:"ca_s4_l6_short1",type:"short-answer",level:6,points:6,question:"An optical fiber has a core with refractive index 1.46 and cladding with refractive index 1.40. Calculate the critical angle at the core-cladding boundary and explain why this design ensures light guidance.",learningPath:"critical-angle",strand:4,concept:"fiber optic calculations",keywords:["optical fiber design","critical angle","core-cladding","light guidance"],minWords:60,maxWords:120,sampleAnswer:"Using sin(c) = n_cladding/n_core = 1.40/1.46 = 0.9589, therefore c = sin(0.9589) = 73.0. This large critical angle ensures effective light guidance because most light rays entering the fiber core will hit the core-cladding boundary at angles greater than 73, causing total internal reflection. The small refractive index difference (1.46 vs 1.40) creates the precise conditions needed for efficient light confinement while maintaining flexibility.",evaluationCriteria:{requiredKeywords:["sin inverse","73 degrees","core-cladding boundary","total internal reflection","light guidance"],requiredConcepts:["correct calculation","explanation of guidance mechanism","design rationale"]}},{id:"ca_s4_l6_short2",type:"short-answer",level:6,points:6,question:"A scientist observes that when light travels from medium A to medium B at 40, total internal reflection occurs. When the same light travels at 35, it refracts at 67 in medium B. Calculate the refractive indices of both media.",learningPath:"critical-angle",strand:4,concept:"experimental analysis",keywords:["experimental analysis","snells law","TIR conditions","refractive index determination"],minWords:50,maxWords:100,sampleAnswer:"At 40: TIR occurs, so c = 40: sin(40) = n_B/n_A, giving n_A/n_B = 1/sin(40) = 1.556. At 35: Using Snell's law: n_A  sin(35) = n_B  sin(67). Substituting n_A = 1.556  n_B: 1.556  n_B  0.574 = n_B  0.921. Solving: n_A = 1.56, n_B = 1.00 (air).",evaluationCriteria:{requiredKeywords:["critical angle 40 degrees","snells law","sin 35","sin 67","n_A = 1.56"],requiredConcepts:["TIR condition analysis","simultaneous equation solution","realistic values"]}}],level8:[{id:"ca_s4_l8_short1",type:"short-answer",level:8,points:8,question:"Design a comprehensive experiment to accurately measure the refractive index of an unknown transparent material using the critical angle method. Include apparatus, procedure, data analysis, and evaluation of uncertainties.",learningPath:"critical-angle",strand:4,concept:"experimental design",keywords:["experimental design","critical angle measurement","error analysis","refractive index"],minWords:120,maxWords:200,sampleAnswer:"Apparatus: Semicircular block of unknown material, narrow light beam source, protractor, screen, white paper for ray tracing. Procedure: Place semicircular block with flat edge facing light source. Gradually increase incident angle until no refracted ray appears on screen - this is the critical angle. Repeat measurements from different positions. Data analysis: Use n = 1/sin(c) to calculate refractive index from average critical angle. Uncertainties: 0.5 protractor precision, 0.01 calculation error. Improvements: Use laser for precise beam, digital protractor for accuracy, temperature control since refractive index varies with temperature. Expected precision: 0.02 in refractive index value.",evaluationCriteria:{requiredKeywords:["semicircular block","critical angle","protractor","refractive index formula","uncertainties","improvements"],requiredConcepts:["complete apparatus list","systematic procedure","error analysis","realistic improvements"]}}]}},"fiber-optics":{strand1:{level2:[{id:"fo_s1_l2_mcq1",type:"mcq",level:2,points:2,question:"What is the main principle that allows optical fibers to work?",learningPath:"fiber-optics",strand:1,concept:"fiber optic basics",keywords:["optical fiber","total internal reflection"],options:[{id:"a",text:"Light amplification",isCorrect:!1},{id:"b",text:"Total internal reflection",isCorrect:!0},{id:"c",text:"Light absorption",isCorrect:!1},{id:"d",text:"Light diffraction",isCorrect:!1}],explanation:"Optical fibers use total internal reflection to guide light along the fiber core by preventing light from escaping into the cladding."},{id:"fo_s1_l2_fill1",type:"fill-blank",level:2,points:2,question:"Label the basic parts of an optical fiber:",learningPath:"fiber-optics",strand:1,concept:"fiber structure basics",keywords:["core","cladding","coating"],text:"An optical fiber has three main parts: the central {blank} where light travels, the {blank} which has a lower refractive index, and the protective {blank}.",blanks:[{id:"blank1",correctAnswers:["core"],caseSensitive:!1,hints:["The center part where light travels"]},{id:"blank2",correctAnswers:["cladding"],caseSensitive:!1,hints:["Surrounds the core"]},{id:"blank3",correctAnswers:["coating","jacket"],caseSensitive:!1,hints:["Protects the glass fiber"]}],explanation:"The core guides light, the cladding provides the refractive index difference needed for TIR, and the coating protects the glass fiber."}],level4:[{id:"fo_s1_l4_short1",type:"short-answer",level:4,points:4,question:"Explain how the refractive index difference between core and cladding enables light guiding in optical fibers.",learningPath:"fiber-optics",strand:1,concept:"refractive index and guiding",keywords:["refractive index","core","cladding","critical angle","light guiding"],minWords:30,maxWords:70,sampleAnswer:"The core has a higher refractive index than the cladding, creating the conditions needed for total internal reflection. When light rays in the core hit the core-cladding boundary at angles greater than the critical angle, they are completely reflected back into the core. This refractive index step ensures that light is trapped and guided along the fiber length.",evaluationCriteria:{requiredKeywords:["higher refractive index","core","cladding","critical angle","trapped"],requiredConcepts:["TIR conditions","light guiding","refractive index step"]}},{id:"fo_s1_l4_mcq1",type:"mcq",level:4,points:4,question:"Which statement best describes the numerical aperture of an optical fiber?",learningPath:"fiber-optics",strand:1,concept:"numerical aperture",keywords:["numerical aperture","acceptance angle","light coupling"],options:[{id:"a",text:"The diameter of the fiber core",isCorrect:!1},{id:"b",text:"A measure of the light-gathering ability of the fiber",isCorrect:!0},{id:"c",text:"The length of the optical fiber",isCorrect:!1},{id:"d",text:"The speed of light in the fiber",isCorrect:!1}],explanation:"Numerical aperture quantifies how much light can be coupled into the fiber, determining the acceptance cone angle for incoming light rays."}],level6:[{id:"fo_s1_l6_short1",type:"short-answer",level:6,points:6,question:"Compare single-mode and multimode fibers, explaining how core diameter affects light propagation and discussing the applications of each type.",learningPath:"fiber-optics",strand:1,concept:"fiber types and modes",keywords:["single-mode","multimode","core diameter","light propagation","applications"],minWords:60,maxWords:120,sampleAnswer:"Single-mode fibers have very small cores (8-10 m) that allow only one light path, eliminating modal dispersion and enabling high-speed long-distance transmission. Multimode fibers have larger cores (50-100 m) allowing multiple light paths, causing modal dispersion but easier coupling with light sources. Single-mode fibers are used for telecommunications and long-distance networks, while multimode fibers are used for short-distance applications like LANs and data centers where ease of connection is more important than bandwidth.",evaluationCriteria:{requiredKeywords:["single-mode","multimode","core diameter","modal dispersion","applications"],requiredConcepts:["core size effects","propagation differences","practical applications"]}},{id:"fo_s1_l6_fill1",type:"fill-blank",level:6,points:6,question:"Complete the advanced fiber optics explanation:",learningPath:"fiber-optics",strand:1,concept:"advanced fiber properties",keywords:["numerical aperture","acceptance angle","modal dispersion","bandwidth"],text:"The {blank} of a fiber determines how much light can be coupled into it. In multimode fibers, different light paths cause {blank} which limits the {blank}. This is why {blank} fibers are preferred for high-speed long-distance communication.",blanks:[{id:"blank1",correctAnswers:["numerical aperture"],caseSensitive:!1,hints:["Measure of light-gathering ability"]},{id:"blank2",correctAnswers:["modal dispersion"],caseSensitive:!1,hints:["Pulse broadening effect"]},{id:"blank3",correctAnswers:["bandwidth"],caseSensitive:!1,hints:["Data transmission capacity"]},{id:"blank4",correctAnswers:["single-mode"],caseSensitive:!1,hints:["Only one light path allowed"]}],explanation:"Numerical aperture affects light coupling efficiency. Modal dispersion in multimode fibers causes pulse broadening, limiting bandwidth. Single-mode fibers eliminate this problem."}],level8:[{id:"fo_s1_l8_short1",type:"short-answer",level:8,points:8,question:"Analyze the trade-offs between different fiber optic designs (step-index vs graded-index, single-mode vs multimode) and evaluate how these design choices affect system performance in telecommunications applications.",learningPath:"fiber-optics",strand:1,concept:"fiber design optimization",keywords:["step-index","graded-index","design trade-offs","telecommunications","system performance"],minWords:100,maxWords:180,sampleAnswer:"Step-index multimode fibers are simple and cost-effective but suffer from high modal dispersion. Graded-index multimode fibers reduce modal dispersion by using a parabolic refractive index profile that equalizes path lengths, improving bandwidth while maintaining easy coupling. Single-mode step-index fibers eliminate modal dispersion entirely but require precise alignment and expensive laser sources. In telecommunications, single-mode fibers dominate long-haul networks due to unlimited bandwidth and low attenuation, while graded-index multimode fibers serve premises networks where cost and ease of installation outweigh bandwidth limitations. Design choice depends on distance, bandwidth requirements, and economic constraints.",evaluationCriteria:{requiredKeywords:["step-index","graded-index","modal dispersion","single-mode","telecommunications","trade-offs"],requiredConcepts:["design comparison","performance analysis","application suitability","economic factors"]}}]},strand2:{level2:[{id:"fo_s2_l2_mcq1",type:"mcq",level:2,points:2,question:"What converts electrical signals to optical signals in a fiber optic communication system?",learningPath:"fiber-optics",strand:2,concept:"electro-optic conversion",keywords:["electrical to optical","signal conversion","light source"],options:[{id:"a",text:"Photodetector",isCorrect:!1},{id:"b",text:"LED or laser diode",isCorrect:!0},{id:"c",text:"Optical amplifier",isCorrect:!1},{id:"d",text:"Optical fiber",isCorrect:!1}],explanation:"LEDs and laser diodes convert electrical signals into light signals that can be transmitted through optical fibers."},{id:"fo_s2_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the fiber optic communication system:",learningPath:"fiber-optics",strand:2,concept:"system components",keywords:["transmitter","receiver","signal conversion"],text:"In a fiber optic system, the {blank} converts electrical signals to light, the {blank} carries the light signals, and the {blank} converts light back to electrical signals.",blanks:[{id:"blank1",correctAnswers:["transmitter","LED","laser"],caseSensitive:!1,hints:["Converts electrical to optical"]},{id:"blank2",correctAnswers:["fiber","optical fiber"],caseSensitive:!1,hints:["Guides the light"]},{id:"blank3",correctAnswers:["receiver","photodetector"],caseSensitive:!1,hints:["Converts optical to electrical"]}],explanation:"A complete fiber optic communication system requires a transmitter, transmission medium (fiber), and receiver for signal conversion and transport."}],level4:[{id:"fo_s2_l4_short1",type:"short-answer",level:4,points:4,question:"Describe the function of optical amplifiers in fiber optic networks and explain why they are preferred over electronic amplifiers for long-distance communication.",learningPath:"fiber-optics",strand:2,concept:"optical amplification",keywords:["optical amplifiers","signal boost","long-distance","electronic amplifiers"],minWords:40,maxWords:80,sampleAnswer:"Optical amplifiers boost light signals directly without converting them to electrical form. They use stimulated emission to amplify multiple wavelengths simultaneously. This is preferred over electronic amplifiers because it avoids optical-electrical-optical conversion delays, reduces complexity, enables wavelength division multiplexing, and provides higher bandwidth with lower noise.",evaluationCriteria:{requiredKeywords:["optical amplifiers","stimulated emission","multiple wavelengths","no conversion"],requiredConcepts:["direct amplification","advantages over electronic","WDM compatibility"]}},{id:"fo_s2_l4_mcq1",type:"mcq",level:4,points:4,question:"What is the main advantage of wavelength division multiplexing (WDM) in fiber optic communications?",learningPath:"fiber-optics",strand:2,concept:"wavelength division multiplexing",keywords:["WDM","multiple wavelengths","bandwidth","capacity"],options:[{id:"a",text:"It reduces the cost of optical fibers",isCorrect:!1},{id:"b",text:"It allows multiple signals to share the same fiber",isCorrect:!0},{id:"c",text:"It eliminates the need for optical amplifiers",isCorrect:!1},{id:"d",text:"It makes fibers immune to electromagnetic interference",isCorrect:!1}],explanation:"WDM allows multiple optical signals at different wavelengths to be transmitted simultaneously through a single fiber, dramatically increasing the transmission capacity."}],level6:[{id:"fo_s2_l6_short1",type:"short-answer",level:6,points:6,question:"Explain how wavelength division multiplexing (WDM) technology works and analyze its impact on the capacity and efficiency of modern optical communication networks.",learningPath:"fiber-optics",strand:2,concept:"WDM technology analysis",keywords:["WDM","multiple wavelengths","network capacity","efficiency","optical multiplexing"],minWords:60,maxWords:120,sampleAnswer:"WDM combines multiple optical signals at different wavelengths (colors) onto a single fiber using optical multiplexers. Each wavelength carries independent data streams, effectively creating multiple communication channels. At the receiver, optical demultiplexers separate the wavelengths back into individual signals. This technology multiplies fiber capacity by 40-100 times without laying new cables. Dense WDM (DWDM) systems can carry over 100 channels, enabling terabit-per-second transmission rates and making efficient use of existing fiber infrastructure.",evaluationCriteria:{requiredKeywords:["multiple wavelengths","multiplexers","demultiplexers","DWDM","terabit"],requiredConcepts:["technology mechanism","capacity multiplication","infrastructure efficiency"]}},{id:"fo_s2_l6_short2",type:"short-answer",level:6,points:6,question:"Compare LEDs and laser diodes as light sources for fiber optic communications, discussing their characteristics, advantages, and typical applications.",learningPath:"fiber-optics",strand:2,concept:"light source comparison",keywords:["LED","laser diode","light sources","characteristics","applications"],minWords:60,maxWords:120,sampleAnswer:"LEDs produce incoherent light with broad spectral width, are inexpensive, reliable, and easy to couple with multimode fibers, making them suitable for short-distance applications. Laser diodes produce coherent, narrow-spectrum light with higher power and faster switching speeds, enabling longer distances and higher data rates but requiring precise coupling and temperature control. LEDs are used in LANs and premises networks, while laser diodes are essential for long-haul telecommunications and high-speed data transmission where performance outweighs cost considerations.",evaluationCriteria:{requiredKeywords:["LEDs","laser diodes","incoherent","coherent","spectral width","applications"],requiredConcepts:["technical comparison","cost-performance trade-offs","application matching"]}}],level8:[{id:"fo_s2_l8_short1",type:"short-answer",level:8,points:8,question:"Evaluate the current limitations of fiber optic communication systems and analyze how emerging technologies like coherent detection, advanced modulation formats, and space-division multiplexing might address these challenges.",learningPath:"fiber-optics",strand:2,concept:"advanced fiber technologies",keywords:["system limitations","coherent detection","advanced modulation","space-division multiplexing","emerging technologies"],minWords:120,maxWords:200,sampleAnswer:"Current limitations include nonlinear effects at high powers, chromatic and polarization mode dispersion, and reaching the Shannon limit for single-mode fibers. Coherent detection enables advanced modulation formats like QPSK and QAM, improving spectral efficiency and noise tolerance. Digital signal processing compensates for dispersion and nonlinear impairments in real-time. Space-division multiplexing using multi-core or few-mode fibers creates parallel channels within a single fiber cable, potentially increasing capacity by orders of magnitude. These technologies, combined with machine learning for network optimization, promise to extend fiber capacity and enable next-generation applications like virtual reality, autonomous vehicles, and massive IoT deployments.",evaluationCriteria:{requiredKeywords:["nonlinear effects","coherent detection","QPSK","space-division multiplexing","digital signal processing"],requiredConcepts:["current limitations","emerging solutions","capacity scaling","future applications"]}}]},strand3:{level2:[{id:"fo_s3_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the sentences about fiber optic applications:",learningPath:"fiber-optics",strand:3,concept:"basic applications",keywords:["internet","medical","telecommunications","endoscopy"],text:"Fiber optics carry {blank} data for high-speed internet connections. In medicine, {blank} use fiber optic bundles to see inside the human body without major surgery.",blanks:[{id:"blank1",correctAnswers:["digital","data","internet"],caseSensitive:!1,hints:["Type of information transmitted"]},{id:"blank2",correctAnswers:["endoscopes"],caseSensitive:!1,hints:["Medical viewing instruments"]}],explanation:"Fiber optics revolutionized digital communications and enabled minimally invasive medical procedures through flexible endoscopic instruments."},{id:"fo_s3_l2_mcq1",type:"mcq",level:2,points:2,question:"Which is a major advantage of fiber optic internet over traditional copper cables?",learningPath:"fiber-optics",strand:3,concept:"internet advantages",keywords:["fiber internet","copper cables","advantages","speed"],options:[{id:"a",text:"Much faster data transmission speeds",isCorrect:!0},{id:"b",text:"Easier to install underground",isCorrect:!1},{id:"c",text:"Works better in cold weather",isCorrect:!1},{id:"d",text:"Costs less to manufacture",isCorrect:!1}],explanation:"Fiber optic cables can transmit data at much higher speeds than copper cables, enabling gigabit internet speeds and supporting bandwidth-intensive applications."}],level4:[{id:"fo_s3_l4_short1",type:"short-answer",level:4,points:4,question:"Describe how fiber optic technology has transformed global telecommunications and explain why undersea fiber optic cables are essential for international internet connectivity.",learningPath:"fiber-optics",strand:3,concept:"global telecommunications",keywords:["global telecommunications","undersea cables","international connectivity","internet infrastructure"],minWords:40,maxWords:80,sampleAnswer:"Fiber optics enabled high-capacity, low-latency global communications by replacing satellite links and copper cables. Undersea fiber cables carry over 99% of international data traffic, connecting continents with massive bandwidth capacity. These cables provide reliable, fast connections essential for global internet, cloud services, financial markets, and international communications, forming the backbone of the modern digital economy.",evaluationCriteria:{requiredKeywords:["global communications","undersea cables","international data","bandwidth capacity"],requiredConcepts:["telecommunications transformation","infrastructure importance","economic impact"]}},{id:"fo_s3_l4_short2",type:"short-answer",level:4,points:4,question:"Explain how fiber optic sensors work and give TWO examples of their industrial or scientific applications.",learningPath:"fiber-optics",strand:3,concept:"fiber optic sensing",keywords:["fiber optic sensors","sensing applications","industrial monitoring","scientific measurement"],minWords:40,maxWords:80,sampleAnswer:"Fiber optic sensors detect changes in light properties (intensity, wavelength, phase) caused by environmental factors like temperature, pressure, or strain. The fiber itself becomes the sensor, immune to electromagnetic interference. Applications include structural health monitoring of bridges and buildings, detecting temperature changes in oil wells, measuring strain in composite materials, and monitoring chemical processes in harsh environments.",evaluationCriteria:{requiredKeywords:["light properties","environmental factors","electromagnetic interference","two applications"],requiredConcepts:["sensing mechanism","specific examples","advantages over electronic sensors"]}}],level6:[{id:"fo_s3_l6_short1",type:"short-answer",level:6,points:6,question:"Analyze the societal impact of fiber optic technology on education, healthcare, and economic development, particularly in connecting remote and underserved communities.",learningPath:"fiber-optics",strand:3,concept:"societal impact analysis",keywords:["societal impact","education","healthcare","economic development","remote communities"],minWords:70,maxWords:130,sampleAnswer:"Fiber optics enabled distance learning through high-quality video conferencing, online courses, and virtual reality education, democratizing access to quality education. In healthcare, telemedicine consultations, remote surgery assistance, and real-time medical data transmission save lives in remote areas. Economically, high-speed fiber connectivity attracts businesses, enables remote work, supports e-commerce, and creates digital entrepreneurship opportunities. However, the digital divide persists where fiber infrastructure is lacking, highlighting the need for equitable access to ensure all communities benefit from the digital economy.",evaluationCriteria:{requiredKeywords:["distance learning","telemedicine","economic opportunities","digital divide","remote communities"],requiredConcepts:["multi-sector impact","access inequality","transformative effects","policy implications"]}},{id:"fo_s3_l6_short2",type:"short-answer",level:6,points:6,question:"Evaluate the environmental impact of fiber optic technology compared to traditional copper-based communications, considering energy consumption, materials, and sustainability factors.",learningPath:"fiber-optics",strand:3,concept:"environmental impact",keywords:["environmental impact","energy consumption","sustainability","copper comparison","materials"],minWords:60,maxWords:120,sampleAnswer:"Fiber optics consume significantly less energy than copper systems because light signals require less power amplification over long distances. Optical fibers use abundant silica (sand) rather than scarce copper, reducing mining environmental impact. However, fiber manufacturing requires high-temperature processes and the electronics still consume power. Overall, fiber optics enable more efficient data centers, reduce electronic waste through longer system lifespans, and support smart grid technologies that optimize energy usage, making them more environmentally sustainable than copper-based alternatives.",evaluationCriteria:{requiredKeywords:["energy consumption","silica vs copper","manufacturing processes","environmental sustainability"],requiredConcepts:["comparative analysis","lifecycle assessment","resource efficiency","enabling technologies"]}}],level8:[{id:"fo_s3_l8_short1",type:"short-answer",level:8,points:8,question:"Critically evaluate the role of fiber optic infrastructure in enabling emerging technologies such as 5G networks, edge computing, autonomous vehicles, and the Internet of Things, discussing both opportunities and challenges for future implementation.",learningPath:"fiber-optics",strand:3,concept:"future technology enablement",keywords:["emerging technologies","5G networks","edge computing","autonomous vehicles","IoT","infrastructure challenges"],minWords:120,maxWords:200,sampleAnswer:"Fiber optic infrastructure is crucial for emerging technologies requiring ultra-low latency and massive bandwidth. 5G networks rely on fiber backhaul to small cells for gigabit speeds and millisecond latency. Edge computing requires fiber connections to distributed data centers for real-time processing. Autonomous vehicles need instantaneous communication through vehicle-to-infrastructure networks supported by fiber. IoT deployments generate massive data flows requiring fiber backbone capacity. Challenges include the enormous cost of upgrading infrastructure, ensuring cybersecurity across expanded networks, bridging the digital divide in rural areas, and coordinating international standards. Success requires public-private partnerships, strategic investment in future-ready infrastructure, and policies promoting equitable access to enable these transformative technologies to benefit all of society.",evaluationCriteria:{requiredKeywords:["5G backhaul","edge computing","autonomous vehicles","IoT","infrastructure challenges","public-private partnerships"],requiredConcepts:["technology interdependence","implementation challenges","policy considerations","societal benefits"]}}]},strand4:{level2:[{id:"fo_s4_l2_mcq1",type:"mcq",level:2,points:2,question:"What is the most important factor to consider when installing fiber optic cables?",learningPath:"fiber-optics",strand:4,concept:"installation basics",keywords:["installation","fiber cables","design factors"],options:[{id:"a",text:"The color of the cable jacket",isCorrect:!1},{id:"b",text:"Avoiding sharp bends that could break the fiber",isCorrect:!0},{id:"c",text:"Installing cables as quickly as possible",isCorrect:!1},{id:"d",text:"Using the most expensive cables available",isCorrect:!1}],explanation:"Optical fibers are made of glass and can break if bent too sharply. Maintaining proper bend radius is crucial to prevent signal loss and fiber damage."},{id:"fo_s4_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the fiber optic design considerations:",learningPath:"fiber-optics",strand:4,concept:"basic design factors",keywords:["bend radius","signal loss","protection"],text:"When designing fiber optic systems, engineers must consider the minimum {blank} radius to prevent breakage, {blank} loss over distance, and environmental {blank} for outdoor installations.",blanks:[{id:"blank1",correctAnswers:["bend","bending"],caseSensitive:!1,hints:["Related to fiber curvature"]},{id:"blank2",correctAnswers:["signal","optical"],caseSensitive:!1,hints:["What gets weaker over distance"]},{id:"blank3",correctAnswers:["protection"],caseSensitive:!1,hints:["Shields from weather and damage"]}],explanation:"Fiber optic system design requires careful attention to mechanical, optical, and environmental factors to ensure reliable operation."}],level4:[{id:"fo_s4_l4_short1",type:"short-answer",level:4,points:4,question:"Describe the main trade-offs between performance and cost in fiber optic system design, giving specific examples of how these decisions affect overall system capabilities.",learningPath:"fiber-optics",strand:4,concept:"performance-cost trade-offs",keywords:["performance","cost trade-offs","system design","capabilities"],minWords:40,maxWords:80,sampleAnswer:"Key trade-offs include single-mode vs multimode fibers (higher performance vs lower cost), laser vs LED sources (longer reach vs affordability), and cable quality (durability vs price). Higher-grade components improve bandwidth, distance, and reliability but increase costs. System designers must balance requirements like transmission distance, data rates, and budget constraints while ensuring adequate performance margins for future growth and varying environmental conditions.",evaluationCriteria:{requiredKeywords:["single-mode vs multimode","laser vs LED","performance vs cost","design balance"],requiredConcepts:["specific trade-offs","system impact","design optimization"]}},{id:"fo_s4_l4_mcq1",type:"mcq",level:4,points:4,question:"Which factor is most critical when designing a fiber optic network for a data center?",learningPath:"fiber-optics",strand:4,concept:"data center design",keywords:["data center","network design","critical factors"],options:[{id:"a",text:"Minimizing cable length to reduce costs",isCorrect:!1},{id:"b",text:"Maximizing bandwidth and minimizing latency",isCorrect:!0},{id:"c",text:"Using only single-mode fibers throughout",isCorrect:!1},{id:"d",text:"Installing the most colorful cable jackets",isCorrect:!1}],explanation:"Data centers require maximum bandwidth and minimum latency to handle massive data flows between servers, making performance optimization the primary design criterion."}],level6:[{id:"fo_s4_l6_short1",type:"short-answer",level:6,points:6,question:"Analyze the engineering challenges involved in laying undersea fiber optic cables and explain how design solutions address issues of depth, pressure, marine environment, and long-term reliability.",learningPath:"fiber-optics",strand:4,concept:"undersea cable engineering",keywords:["undersea cables","engineering challenges","pressure","marine environment","reliability"],minWords:70,maxWords:130,sampleAnswer:"Undersea cables face extreme pressure (up to 1000 atmospheres), corrosive seawater, marine life interference, and inaccessible locations. Design solutions include multiple protective layers with steel armor, water-blocking compounds, and pressure-resistant materials. Cables are buried in shallow waters to prevent anchor damage and include remote optically pumped amplifiers (ROPAs) for signal regeneration. Redundant paths and advanced monitoring systems ensure reliability, while specialized cable-laying ships and ROVs enable precise installation and maintenance in challenging deep-sea environments.",evaluationCriteria:{requiredKeywords:["extreme pressure","steel armor","water-blocking","ROPAs","redundant paths"],requiredConcepts:["environmental challenges","protective design","installation methods","reliability systems"]}},{id:"fo_s4_l6_short2",type:"short-answer",level:6,points:6,question:"Evaluate the maintenance and lifecycle management strategies for large-scale fiber optic networks, considering preventive maintenance, fault detection, repair procedures, and technology upgrade planning.",learningPath:"fiber-optics",strand:4,concept:"network lifecycle management",keywords:["maintenance strategies","fault detection","repair procedures","technology upgrades","lifecycle management"],minWords:70,maxWords:130,sampleAnswer:"Large fiber networks require proactive maintenance including regular optical time-domain reflectometry (OTDR) testing to identify degradation before failures occur. Automated monitoring systems continuously track signal quality and alert operators to issues. Repair strategies include splice restoration for cable cuts and component replacement for equipment failures. Lifecycle management involves planning technology refresh cycles, capacity upgrades, and migration to newer standards while maintaining service continuity. Strategic spare inventory, trained technical staff, and established vendor relationships ensure rapid response to outages and systematic network evolution.",evaluationCriteria:{requiredKeywords:["OTDR testing","automated monitoring","splice restoration","technology refresh","service continuity"],requiredConcepts:["proactive maintenance","systematic planning","rapid response","network evolution"]}}],level8:[{id:"fo_s4_l8_short1",type:"short-answer",level:8,points:8,question:"Design a comprehensive fiber optic network architecture for a smart city implementation, considering integration with 5G, IoT sensors, autonomous vehicles, and emergency services. Address scalability, redundancy, security, and future technology adaptation in your design.",learningPath:"fiber-optics",strand:4,concept:"smart city network design",keywords:["smart city","network architecture","5G integration","IoT","autonomous vehicles","scalability","redundancy","security"],minWords:130,maxWords:220,sampleAnswer:"A smart city fiber network requires hierarchical architecture with high-capacity backbone links connecting distributed edge computing nodes. Ring topology provides redundancy with automatic protection switching. 5G integration requires dense fiber infrastructure to small cells for low-latency applications. IoT sensor networks use fiber aggregation points with wireless last-mile connections. Autonomous vehicle systems need ultra-reliable low-latency connections through dedicated fiber channels. Emergency services require priority traffic handling and diverse routing paths. Security implementation includes encrypted optical transmission, network segmentation, and continuous monitoring. Scalability design uses modular add/drop multiplexers and software-defined networking for dynamic resource allocation. Future adaptation provisions include spare fiber capacity, upgradeable electronics, and standardized interfaces for emerging technologies. The architecture balances performance, cost, and flexibility while ensuring resilient operation under various failure scenarios.",evaluationCriteria:{requiredKeywords:["hierarchical architecture","ring topology","edge computing","5G small cells","autonomous vehicles","network segmentation","software-defined networking"],requiredConcepts:["comprehensive design","multi-application support","resilience planning","future-proofing strategies"]}},{id:"fo_s4_l8_short2",type:"short-answer",level:8,points:8,question:"Critically analyze the sustainability and environmental considerations in modern fiber optic network design and deployment, proposing innovative solutions for reducing carbon footprint, minimizing electronic waste, and optimizing energy efficiency throughout the system lifecycle.",learningPath:"fiber-optics",strand:4,concept:"sustainable network design",keywords:["sustainability","environmental considerations","carbon footprint","electronic waste","energy efficiency","system lifecycle"],minWords:120,maxWords:200,sampleAnswer:"Sustainable fiber network design requires lifecycle assessment from manufacturing through disposal. Energy efficiency improvements include using coherent optics to extend reach without regeneration, implementing sleep modes for unused equipment, and optimizing cooling systems in data centers. Carbon footprint reduction involves renewable energy for facilities, efficient routing algorithms to minimize active equipment, and local manufacturing to reduce transportation emissions. Electronic waste minimization uses modular designs for component upgrades, standardized interfaces for equipment reuse, and comprehensive recycling programs. Innovative solutions include solar-powered remote amplifiers, AI-driven network optimization for energy savings, biodegradable cable materials, and circular economy principles in equipment design. Network sharing among operators reduces infrastructure duplication, while software-defined networks enable dynamic resource allocation to minimize energy consumption during low-traffic periods.",evaluationCriteria:{requiredKeywords:["lifecycle assessment","coherent optics","renewable energy","modular designs","circular economy","network sharing","software-defined networks"],requiredConcepts:["comprehensive sustainability","innovative solutions","system optimization","environmental responsibility"]}}]}}},f8=(t,e,n)=>{const r=`strand${t}`;console.log(` Loading ${e} ${r} from data folder...`);const i=xd?.[e]?.[r];if(!i)return console.warn(` No data found for ${e} ${r}`),console.log("Available data:",{learningPaths:Object.keys(xd||{}),availableStrands:xd?.[e]?Object.keys(xd[e]):[]}),mce(t,e);const s=[2,4,6,8].map(a=>{const l=`level${a}`,c=i[l]||[];return console.log(` ${e} ${r} level${a}: ${c.length} questions`),{id:`${r}_level${a}`,level:a,questions:c,unlocked:!0,completed:!1,score:0,attempts:0,maxAttempts:5,completedQuestions:0,totalQuestions:c.length}}),o={strand:t,learningPath:e,title:p8(t,e),description:m8(t,e),blocks:s};return console.log(` Generated ${o.title}: ${o.blocks.reduce((a,l)=>a+l.totalQuestions,0)} total questions`),o},mce=(t,e)=>({strand:t,learningPath:e,title:p8(t,e),description:m8(t,e),blocks:[]}),p8=(t,e)=>({"critical-angle":{1:"TIR Principles & Laws",2:"Understanding TIR Phenomena",3:"Real-World Applications",4:"Analysis & Problem Solving"},"fiber-optics":{1:"Fiber Optic Principles",2:"Fiber Optic Technology",3:"Applications & Impact",4:"Design & Innovation"}})[e]?.[t]||`Strand ${t}`,m8=(t,e)=>({"critical-angle":{1:"Understanding the fundamental laws governing total internal reflection",2:"Comprehending why and when total internal reflection occurs",3:"Exploring practical uses of total internal reflection in technology and nature",4:"Applying mathematical and analytical skills to solve TIR problems"},"fiber-optics":{1:"Understanding how light travels through optical fibers",2:"Exploring the engineering and physics behind fiber optic systems",3:"Examining fiber optic applications and their societal impact",4:"Applying fiber optic principles to solve design challenges"}})[e]?.[t]||`Strand ${t} content`,gce=t=>{if(t.length===0)return 0;const n=t.reduce((r,i)=>r+i.score,0)/t.length;return Math.min(8,Math.round(n))},Ra=(t,e,n)=>t==={principlePioneer:1,conceptCrusader:2,applicationAce:3,analysisArchitect:4}[n]&&e>=8;class Q0 extends Error{constructor(e,n,r){super(e),this.code=n,this.details=r,this.name="QuestionSystemError"}}const oE=(t,e)=>t instanceof Q0?t:t instanceof Error?new Q0(`${e}: ${t.message}`,"SYSTEM_ERROR",{originalError:t}):new Q0(`Unknown error in ${e}`,"UNKNOWN_ERROR",{error:t}),yce=t=>!!(t.questionId&&t.type&&t.timestamp&&typeof t.isCorrect=="boolean"&&typeof t.score=="number"),g8=W.createContext(null),aE={currentStrand:1,strandData:{},responses:{},strandProgresses:[0,0,0,0],badges:{principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1},loading:!1,error:null},vce=({children:t})=>{const[e,n]=W.useState(aE),r=W.useCallback((u,d,h)=>{n(f=>{const p=[...f.strandProgresses],g=u-1;if(g>=0&&g<4){const v=p[g]||0,y=Math.max(v,Math.min(8,Math.max(0,h)));p[g]=y;const x={...f.badges};return Ra(u,y,"principlePioneer")&&(x.principlePioneer=!0),Ra(u,y,"conceptCrusader")&&(x.conceptCrusader=!0),Ra(u,y,"applicationAce")&&(x.applicationAce=!0),Ra(u,y,"analysisArchitect")&&(x.analysisArchitect=!0),console.log(" CONTEXT PROGRESS UPDATE:",{strand:u,oldScore:v,newScore:y,fullProgress:p,badges:x}),{...f,strandProgresses:p,badges:x}}else return console.warn(" Invalid strand index in context:",g),f})},[]),i=W.useCallback(u=>{u>=1&&u<=4&&n(d=>({...d,currentStrand:u}))},[]),s=W.useCallback(async u=>{try{if(!yce(u))throw new Q0("Invalid question response","VALIDATION_ERROR");n(d=>{const h={...d.responses,[u.questionId]:u},f=Object.values(h).filter(y=>y.questionId.includes(`strand${d.currentStrand}`)),p=gce(f),g=[...d.strandProgresses];g[d.currentStrand-1]=p;const v={...d.badges};return Ra(d.currentStrand,p,"principlePioneer")&&(v.principlePioneer=!0),Ra(d.currentStrand,p,"conceptCrusader")&&(v.conceptCrusader=!0),Ra(d.currentStrand,p,"applicationAce")&&(v.applicationAce=!0),Ra(d.currentStrand,p,"analysisArchitect")&&(v.analysisArchitect=!0),console.log(" RESPONSE SUBMITTED:",{questionId:u.questionId,isCorrect:u.isCorrect,score:u.score,strandProgress:p,newBadges:v}),{...d,responses:h,strandProgresses:g,badges:v,error:null}})}catch(d){const h=oE(d,"submitQuestionResponse");throw n(f=>({...f,error:h})),h}},[]),o=W.useCallback(async(u,d)=>{try{n(f=>({...f,loading:!0,error:null}));const h=f8(u,d,{});n(f=>({...f,strandData:{...f.strandData,[u]:h},loading:!1})),console.log(" STRAND DATA LOADED:",{strand:u,learningPath:d,blocks:h.blocks.length})}catch(h){const f=oE(h,"loadStrandData");n(p=>({...p,loading:!1,error:f}))}},[]),a=W.useCallback(()=>{n(aE),console.log(" PROGRESS RESET")},[]),l=W.useCallback(()=>{n(u=>({...u,error:null}))},[]);W.useEffect(()=>{},[e]);const c={...e,setCurrentStrand:i,submitQuestionResponse:s,loadStrandData:o,resetProgress:a,clearError:l,updateProgress:r};return w.jsx(g8.Provider,{value:c,children:t})},bce=()=>{const t=W.useContext(g8);if(!t)throw new Error("useQuestionSystem must be used within a QuestionSystemProvider");return t};function xce({studentId:t,experiment:e,sessionCode:n,strandhoot:r,currentStrand:i}){const[s,o]=W.useState("idle"),a=h=>/^[0-9a-fA-F-]{36}$/.test(h),l=async h=>{if(!t||!e||!n){console.warn(" Missing required parameters for saving response");return}if(!a(t)){console.warn(" Invalid UUID for studentId:",t);return}o("saving");try{const{error:f}=await gs.from("question_responses").upsert({student_id:t,session_code:n,experiment:e,strandhoot:r,strand:i,question_id:h.questionId,question_type:h.type,answer:h.answer,is_correct:h.isCorrect,score:h.score,feedback:h.feedback,timestamp:h.timestamp.toISOString(),updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment,question_id"});if(f)throw new Error(`Response save error: ${f.message}`);const g=`${`strand${i}`}_progress`,{data:v,error:y}=await gs.from("question_responses").select("score, question_id").eq("student_id",t).eq("session_code",n).eq("experiment",e).eq("strand",i);if(y)console.warn("Could not fetch responses for progress calculation:",y.message);else if(v){const x=v.reduce((O,M)=>O+(M.score||0),0),S=v.length>0?x/v.length:0,C=Math.round(S*8),{error:A}=await gs.from("responses").upsert({student_id:t,session_code:n,experiment:e,[g]:C,updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment"});A&&console.warn("Could not update main responses table:",A.message)}o("success"),console.log(" Question response saved successfully")}catch(f){console.error(" Error saving question response:",f),o("error")}},c=async()=>{if(!t||!e||!n)return{};if(!a(t))return console.warn(" Invalid UUID for studentId in load:",t),{};try{const{data:h,error:f}=await gs.from("question_responses").select("*").eq("student_id",t).eq("session_code",n).eq("experiment",e).eq("strand",i);if(f)throw new Error(`Load error: ${f.message}`);const p={};return h&&h.forEach(g=>{p[g.question_id]={questionId:g.question_id,type:g.question_type,answer:g.answer,isCorrect:g.is_correct,score:g.score,feedback:g.feedback,timestamp:new Date(g.timestamp)}}),console.log(` Loaded ${Object.keys(p).length} responses for strand ${i}`),p}catch(h){return console.error(" Error loading question responses:",h),{}}},u=async()=>{if(!t||!e||!n)return{};if(!a(t))return{};try{const{data:h,error:f}=await gs.from("question_responses").select("strand, score, is_correct").eq("student_id",t).eq("session_code",n).eq("experiment",e);if(f)throw new Error(`Progress summary error: ${f.message}`);const p={};if(h){const g=h.reduce((v,y)=>(v[y.strand]||(v[y.strand]=[]),v[y.strand].push(y),v),{});Object.entries(g).forEach(([v,y])=>{const x=parseInt(v),S=y.length,C=y.reduce((M,N)=>M+(N.score||0),0),A=S>0?C/S:0,O=Math.round(A*8);p[x]={level:O,completed:S,total:12}})}return p}catch(h){return console.error(" Error getting progress summary:",h),{}}},d=async()=>{if(!(!t||!e||!n)&&a(t))try{const{error:h}=await gs.from("question_responses").delete().eq("student_id",t).eq("session_code",n).eq("experiment",e).eq("strand",i);if(h)throw new Error(`Clear error: ${h.message}`);console.log(` Cleared all responses for strand ${i}`)}catch(h){console.error(" Error clearing responses:",h)}};return W.useEffect(()=>{if(s==="success"||s==="error"){const h=setTimeout(()=>{o("idle")},3e3);return()=>clearTimeout(h)}},[s]),{syncStatus:s,saveResponse:l,loadResponses:c,getProgressSummary:u,clearStrandResponses:d}}const em=({question:t,onAnswer:e,showFeedback:n=!0})=>{const[r,i]=W.useState(null),[s,o]=W.useState(!1),[a,l]=W.useState(""),c=h=>{if(s)return;i(h),o(!0);const f=t.options.find(y=>y.id===h),p=f?.isCorrect||!1;let g=0;p?g=t.level:f?.level&&(g=f.level);const v=p?`Excellent! ${t.explanation}`:`Not quite. ${t.explanation}`;l(v),e(t.id,h,p,g)},u=h=>!n||!s?r===h.id?"bg-purple-100 border-purple-500 text-purple-700":"bg-white border-gray-300 hover:border-purple-300 hover:bg-purple-50":h.isCorrect?"bg-green-100 border-green-500 text-green-700":r===h.id&&!h.isCorrect?"bg-red-100 border-red-500 text-red-700":"bg-gray-100 border-gray-300 text-gray-600",d=h=>!n||!s?r===h.id?"":"":h.isCorrect?"":r===h.id&&!h.isCorrect?"":"";return w.jsxs("div",{className:"space-y-4",children:[w.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:t.question}),w.jsx("div",{className:"space-y-3",children:t.options.map((h,f)=>w.jsx(jn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},onClick:()=>c(h.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${u(h)} ${s?"cursor-not-allowed":"cursor-pointer transform hover:scale-[1.02]"}`,children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-xl font-bold",children:d(h)}),w.jsx("span",{className:"flex-1",children:h.text}),n&&s&&h.level&&!h.isCorrect&&w.jsxs("span",{className:"text-sm bg-yellow-100 text-yellow-700 px-2 py-1 rounded",children:["Level ",h.level]})]})},h.id))}),n&&s&&a&&w.jsx(jn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"text-blue-500 text-lg",children:""}),w.jsxs("div",{children:[w.jsx("h5",{className:"font-semibold text-blue-800 mb-1",children:"Explanation:"}),w.jsx("p",{className:"text-blue-700 text-sm",children:t.explanation})]})]})}),w.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-600",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{children:["Level ",t.level]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[t.points," points"]}),w.jsx("span",{children:""}),w.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:t.concept})]}),s&&w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r&&t.options.find(h=>h.id===r)?.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:r&&t.options.find(h=>h.id===r)?.isCorrect?"Correct!":"Try again!"})})]}),w.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[w.jsxs("span",{children:[" Learning Path: ",t.learningPath]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[" Strand: ",t.strand]}),t.keywords&&t.keywords.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{children:""}),w.jsxs("span",{children:[" Keywords: ",t.keywords.join(", ")]})]})]})]})},zc=({question:t,onAnswer:e,showFeedback:n=!0})=>{const[r,i]=W.useState({}),[s,o]=W.useState(!1),[a,l]=W.useState({}),[c,u]=W.useState("");W.useEffect(()=>{const g={};t.blanks.forEach(v=>{g[v.id]=""}),i(g)},[t]);const d=(g,v)=>{s||i(y=>({...y,[g]:v}))},h=()=>{if(s)return;o(!0);const g={};let v=0;t.blanks.forEach(A=>{const O=r[A.id]?.trim().toLowerCase()||"",M=A.correctAnswers.some(N=>A.caseSensitive?N===r[A.id]?.trim():N.toLowerCase()===O);g[A.id]=M,M&&v++}),l(g);const y=v/t.blanks.length;let x=0;y>=.9?x=t.level:y>=.7?x=Math.max(t.level-1,0):y>=.5?x=Math.max(t.level-2,0):y>=.3&&(x=Math.max(t.level-3,0));const S=y>=.7,C=S?`Great work! ${t.explanation}`:`Good effort. ${t.explanation}`;u(C),e(t.id,Object.values(r),S,x)},f=()=>{const g=t.text.split(/{blank}/g),v=[];let y=0;return g.forEach((x,S)=>{if(x&&v.push(w.jsx("span",{className:"text-gray-800",children:x},`text-${S}`)),S<g.length-1&&y<t.blanks.length){const C=t.blanks[y],A=a[C.id],O=n&&s;let M="mx-2 px-3 py-1 border-b-2 bg-transparent focus:outline-none focus:border-purple-500 min-w-[100px] text-center font-medium transition-all duration-200";O?M+=A?" border-green-500 bg-green-50 text-green-700":" border-red-500 bg-red-50 text-red-700":M+=" border-gray-400 hover:border-purple-400",v.push(w.jsxs("div",{className:"inline-block relative",children:[w.jsx("input",{type:"text",value:r[C.id]||"",onChange:N=>d(C.id,N.target.value),disabled:s,className:M,placeholder:`Blank ${y+1}`,onKeyDown:N=>{N.key==="Enter"&&!s&&p&&h()}}),O&&w.jsx("span",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs",children:A?"":""})]},`blank-${y}`)),y++}}),v},p=t.blanks.every(g=>r[g.id]?.trim().length>0);return w.jsxs("div",{className:"space-y-4",children:[w.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Fill in the blanks:"}),w.jsx("div",{className:"text-lg leading-relaxed mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:f()}),t.blanks.some(g=>g.hints&&g.hints.length>0)&&!s&&w.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:[w.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Hints:"}),w.jsx("div",{className:"space-y-1",children:t.blanks.map((g,v)=>g.hints&&g.hints.length>0&&w.jsxs("div",{className:"text-sm text-blue-700",children:[w.jsxs("span",{className:"font-medium",children:["Blank ",v+1,": "]}),w.jsx("span",{children:g.hints.join(", ")})]},g.id))})]}),!s&&w.jsx("div",{className:"flex justify-center mb-4",children:w.jsx(jn.button,{whileHover:{scale:p?1.05:1},whileTap:{scale:p?.95:1},onClick:h,disabled:!p,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${p?"bg-purple-600 text-white hover:bg-purple-700 shadow-md":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:p?"Submit Answers":`Fill all ${t.blanks.length} blanks`})}),n&&s&&w.jsxs(jn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 space-y-4",children:[w.jsx("div",{className:`p-4 rounded-lg border ${Object.values(a).filter(Boolean).length/t.blanks.length>=.7?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:w.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2",children:[" Results: ",Object.values(a).filter(Boolean).length,"/",t.blanks.length," correct",w.jsxs("span",{className:"text-sm text-gray-600",children:["(",Math.round(Object.values(a).filter(Boolean).length/t.blanks.length*100),"%)"]})]})}),w.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[w.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Correct Answers:"}),w.jsx("div",{className:"space-y-2",children:t.blanks.map((g,v)=>w.jsxs("div",{className:"text-sm",children:[w.jsxs("span",{className:"text-blue-700 font-medium",children:["Blank ",v+1,": "]}),w.jsx("span",{className:"text-blue-600",children:g.correctAnswers.join(" or ")}),g.hints&&w.jsxs("div",{className:"text-xs text-blue-500 mt-1 ml-4",children:["Hint: ",g.hints.join(", ")]})]},g.id))})]}),w.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"text-green-500 text-lg",children:""}),w.jsxs("div",{children:[w.jsx("h5",{className:"font-semibold text-green-800 mb-1",children:"Explanation:"}),w.jsx("p",{className:"text-green-700 text-sm",children:t.explanation})]})]})})]}),w.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-600",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{children:["Level ",t.level]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[t.points," points"]}),w.jsx("span",{children:""}),w.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:t.concept})]}),s&&w.jsx("div",{className:"flex items-center gap-2",children:w.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${Object.values(a).filter(Boolean).length/t.blanks.length>=.7?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[Object.values(a).filter(Boolean).length,"/",t.blanks.length," correct"]})})]}),w.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[w.jsxs("span",{children:[" Learning Path: ",t.learningPath]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[" Strand: ",t.strand]}),t.keywords&&t.keywords.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{children:""}),w.jsxs("span",{children:[" Keywords: ",t.keywords.join(", ")]})]})]})]})},$c=({question:t,onAnswer:e,showFeedback:n=!0})=>{const[r,i]=W.useState(null),[s,o]=W.useState(null),[a,l]=W.useState([]),[c,u]=W.useState(!1),[d,h]=W.useState([]),[f,p]=W.useState(""),g=D=>{c||a.some(V=>V.leftId===D)||(i(D),o(null))},v=D=>{if(c||!r||a.some(E=>E.rightId===D))return;o(D);const V={leftId:r,rightId:D},L=[...a,V];l(L),i(null),o(null),L.length===t.leftItems.length&&y(L)},y=D=>{if(c)return;u(!0);const V=D.map(Z=>{const ne=t.correctMatches.some(Y=>Y.leftId===Z.leftId&&Y.rightId===Z.rightId);return{...Z,isCorrect:ne}});h(V);const E=V.filter(Z=>Z.isCorrect).length/t.correctMatches.length;let B=0;E>=.9?B=t.level:E>=.7?B=Math.max(t.level-1,0):E>=.5?B=Math.max(t.level-2,0):E>=.3&&(B=Math.max(t.level-3,0));const I=E>=.7,Q=I?`Excellent matching! ${t.explanation}`:`Good attempt. ${t.explanation}`;p(Q),e(t.id,D,I,B)},x=()=>{c||(l([]),i(null),o(null))},S=()=>{a.length>0&&y(a)},C=D=>a.some(V=>V.leftId===D),A=D=>a.some(V=>V.rightId===D),O=(D,V)=>d.find(L=>L.leftId===D&&L.rightId===V),M=(D,V,L)=>{let E="p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ";if(c){if(V==="left"){const B=a.find(I=>I.leftId===D);if(B){const I=O(D,B.rightId);E+=I?.isCorrect?"bg-green-100 border-green-500 text-green-700":"bg-red-100 border-red-500 text-red-700"}else E+="bg-gray-100 border-gray-300 text-gray-600"}else{const B=a.find(I=>I.rightId===D);if(B){const I=O(B.leftId,D);E+=I?.isCorrect?"bg-green-100 border-green-500 text-green-700":"bg-red-100 border-red-500 text-red-700"}else E+="bg-gray-100 border-gray-300 text-gray-600"}E+=" cursor-not-allowed"}else L?E+="bg-purple-100 border-purple-500 text-purple-700 cursor-not-allowed":V==="left"&&r===D||V==="right"&&s===D?E+="bg-purple-200 border-purple-600 text-purple-800 transform scale-105 shadow-md":E+="bg-white border-gray-300 hover:border-purple-300 hover:bg-purple-50 transform hover:scale-105";return E},N=(D,V,L)=>{if(c)if(V==="left"){const E=a.find(B=>B.leftId===D);return E?O(D,E.rightId)?.isCorrect?"":"":""}else{const E=a.find(B=>B.rightId===D);return E?O(E.leftId,D)?.isCorrect?"":"":""}return L?"":V==="left"&&r===D||V==="right"&&s===D?"":""};return w.jsxs("div",{className:"space-y-4",children:[w.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:t.question}),w.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:w.jsxs("p",{className:"text-sm text-blue-700 flex items-center gap-2",children:[" ",w.jsx("strong",{children:"Instructions:"})," Click items on the left, then click their match on the right to connect them.",r&&w.jsx("span",{className:"ml-2 bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs",children:"Now click a match on the right "})]})}),w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[w.jsxs("div",{children:[w.jsx("h5",{className:"font-medium text-gray-700 mb-3 text-center bg-gray-100 py-2 rounded",children:" Click to Select"}),w.jsx("div",{className:"space-y-3",children:t.leftItems.map((D,V)=>w.jsx(jn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:V*.1},onClick:()=>g(D.id),className:M(D.id,"left",C(D.id)),children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-lg",children:N(D.id,"left",C(D.id))}),D.image&&w.jsx("img",{src:D.image,alt:"",className:"w-8 h-8 object-cover rounded"}),w.jsx("span",{className:"flex-1",children:D.text})]})},D.id))})]}),w.jsxs("div",{children:[w.jsx("h5",{className:"font-medium text-gray-700 mb-3 text-center bg-gray-100 py-2 rounded",children:" Then Click to Match"}),w.jsx("div",{className:"space-y-3",children:t.rightItems.map((D,V)=>w.jsx(jn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:V*.1},onClick:()=>v(D.id),className:M(D.id,"right",A(D.id)),children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-lg",children:N(D.id,"right",A(D.id))}),D.image&&w.jsx("img",{src:D.image,alt:"",className:"w-8 h-8 object-cover rounded"}),w.jsx("span",{className:"flex-1",children:D.text})]})},D.id))})]})]}),a.length>0&&w.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[w.jsxs("h5",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:[" Current Matches",w.jsxs("span",{className:"text-sm bg-gray-200 text-gray-600 px-2 py-1 rounded",children:[a.length,"/",t.leftItems.length]})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:a.map((D,V)=>{const L=t.leftItems.find(I=>I.id===D.leftId),E=t.rightItems.find(I=>I.id===D.rightId),B=O(D.leftId,D.rightId);return w.jsxs("div",{className:`flex items-center gap-2 text-sm p-2 rounded ${n&&B?B.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700":"bg-white border border-gray-200"}`,children:[w.jsx("span",{className:"truncate max-w-[120px]",children:L?.text}),w.jsx("span",{className:"text-purple-500",children:""}),w.jsx("span",{className:"truncate max-w-[120px]",children:E?.text}),n&&B&&w.jsx("span",{className:"ml-auto",children:B.isCorrect?"":""})]},V)})})]}),!c&&w.jsx("div",{className:"flex justify-center gap-3 mb-4",children:a.length>0&&a.length<t.leftItems.length&&w.jsxs(w.Fragment,{children:[w.jsx(jn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition",children:" Reset All"}),w.jsxs(jn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:[" Submit Now (",a.length,"/",t.leftItems.length,")"]})]})}),!c&&w.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:w.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${a.length/t.leftItems.length*100}%`}})}),n&&c&&w.jsxs(jn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 space-y-4",children:[w.jsx("div",{className:`p-4 rounded-lg border ${d.filter(D=>D.isCorrect).length/t.correctMatches.length>=.7?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:w.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2",children:[" Results: ",d.filter(D=>D.isCorrect).length,"/",t.correctMatches.length," correct",w.jsxs("span",{className:"text-sm text-gray-600",children:["(",Math.round(d.filter(D=>D.isCorrect).length/t.correctMatches.length*100),"%)"]})]})}),w.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[w.jsx("h5",{className:"font-semibold text-blue-800 mb-3",children:" Correct Matches:"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.correctMatches.map((D,V)=>{const L=t.leftItems.find(B=>B.id===D.leftId),E=t.rightItems.find(B=>B.id===D.rightId);return w.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 p-2 bg-white rounded border border-blue-200",children:[w.jsx("span",{className:"truncate max-w-[120px]",children:L?.text}),w.jsx("span",{className:"text-blue-500",children:""}),w.jsx("span",{className:"truncate max-w-[120px]",children:E?.text})]},V)})})]}),w.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"text-green-500 text-lg",children:""}),w.jsxs("div",{children:[w.jsx("h5",{className:"font-semibold text-green-800 mb-1",children:"Explanation:"}),w.jsx("p",{className:"text-green-700 text-sm",children:t.explanation})]})]})})]}),w.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-600",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{children:["Level ",t.level]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[t.points," points"]}),w.jsx("span",{children:""}),w.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:t.concept})]}),c&&w.jsx("div",{className:"flex items-center gap-2",children:w.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${d.filter(D=>D.isCorrect).length/t.correctMatches.length>=.7?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[d.filter(D=>D.isCorrect).length,"/",t.correctMatches.length," matches"]})})]}),w.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[w.jsxs("span",{children:[" Learning Path: ",t.learningPath]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[" Strand: ",t.strand]}),t.keywords&&t.keywords.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{children:""}),w.jsxs("span",{children:[" Keywords: ",t.keywords.join(", ")]})]})]})]})},ra=({question:t,onAnswer:e,showFeedback:n=!0})=>{const[r,i]=W.useState(""),[s,o]=W.useState(!1),[a,l]=W.useState(null),[c,u]=W.useState(0),[d,h]=W.useState(!1);W.useEffect(()=>{const S=r.trim().split(/\s+/).filter(C=>C.length>0);u(S.length)},[r]);const f=async()=>{if(!(s||!r.trim()||!y())){o(!0),h(!0);try{const S=await h8(r,"critical-angle","strand1");l(S);const C=Math.min(8,S.level),A=C>=Math.max(t.level-2,4);e(t.id,r,A,C)}catch(S){console.error("Evaluation error:",S);const C=p(r),A=C>=Math.max(t.level-2,4);l({level:C,matchedKeywords:[],matchedConcepts:[],suggestions:["Response evaluated using basic scoring system."]}),e(t.id,r,A,C)}finally{h(!1)}}},p=S=>{const C=S.toLowerCase();let A=0;const O=t.evaluationCriteria.requiredKeywords.filter(I=>C.includes(I.toLowerCase())),M=t.evaluationCriteria.requiredConcepts.filter(I=>C.includes(I.toLowerCase())),N=S.trim().split(/\s+/).length,D=!t.minWords||N>=t.minWords,V=!t.maxWords||N<=t.maxWords,L=O.length/Math.max(t.evaluationCriteria.requiredKeywords.length,1)*4,E=M.length/Math.max(t.evaluationCriteria.requiredConcepts.length,1)*3,B=D&&V?1:0;return A=Math.min(8,L+E+B),Math.round(A)},g=S=>S>=7?"text-green-600":S>=5?"text-blue-600":S>=3?"text-yellow-600":"text-red-600",v=()=>t.minWords&&c<t.minWords||t.maxWords&&c>t.maxWords?"text-red-500":"text-green-500",y=()=>!(t.minWords&&c<t.minWords||t.maxWords&&c>t.maxWords),x=()=>d?" Evaluating...":r.trim()?y()?"Submit Answer":"Check word count":"Enter your answer";return w.jsxs("div",{className:"space-y-4",children:[w.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:t.question}),(t.minWords||t.maxWords)&&w.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:w.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[" Word requirement:",t.minWords&&` At least ${t.minWords} words`,t.minWords&&t.maxWords&&"  ",t.maxWords&&` Maximum ${t.maxWords} words`,w.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["Current: ",w.jsx("span",{className:v(),children:c})]})]})}),w.jsxs("div",{className:"mb-4",children:[w.jsx("textarea",{value:r,onChange:S=>i(S.target.value),disabled:s,placeholder:"Type your answer here... Be detailed and use scientific terminology.",className:`w-full h-32 p-4 border-2 rounded-lg resize-none focus:outline-none transition-all duration-200 ${s?"bg-gray-100 cursor-not-allowed border-gray-300":"border-gray-300 focus:border-purple-500 hover:border-purple-300"}`,onKeyDown:S=>{S.key==="Enter"&&S.ctrlKey&&!s&&r.trim()&&y()&&f()}}),w.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("span",{className:v(),children:[c," words",!y()&&w.jsxs("span",{className:"ml-2 text-red-500",children:[t.minWords&&c<t.minWords&&`(need ${t.minWords-c} more)`,t.maxWords&&c>t.maxWords&&`(${c-t.maxWords} over limit)`]})]}),!s&&r.trim()&&w.jsx("span",{className:"text-xs text-gray-500",children:"Ctrl+Enter to submit"})]}),s&&a&&w.jsxs("span",{className:`font-medium ${g(a.level)} flex items-center gap-1`,children:[w.jsxs("span",{children:["Score: ",a.level,"/8"]}),a.level>=7&&w.jsx("span",{children:""})]})]})]}),!s&&w.jsx("div",{className:"flex justify-center mb-4",children:w.jsxs(jn.button,{whileHover:{scale:r.trim()&&y()&&!d?1.05:1},whileTap:{scale:r.trim()&&y()&&!d?.95:1},onClick:f,disabled:!r.trim()||!y()||d,className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 ${r.trim()&&y()&&!d?"bg-purple-600 text-white hover:bg-purple-700 shadow-md":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[d&&w.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),x()]})}),n&&s&&a&&w.jsxs(jn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 space-y-4",children:[w.jsxs("div",{className:`p-4 rounded-lg border ${a.level>=7?"bg-green-50 border-green-200":a.level>=5?"bg-blue-50 border-blue-200":a.level>=3?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:[w.jsxs("h5",{className:"font-semibold mb-3 flex items-center gap-2",children:[" Evaluation Results",w.jsxs("span",{className:`px-2 py-1 rounded text-xs ${g(a.level)}`,children:["Level ",a.level,"/8"]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[w.jsxs("div",{children:[w.jsx("p",{className:"font-medium mb-1",children:"Keywords Found:"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:a.matchedKeywords&&a.matchedKeywords.length>0?a.matchedKeywords.map((S,C)=>w.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:S.label},C)):w.jsx("span",{className:"text-gray-500 text-xs",children:"None found"})})]}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium mb-1",children:"Concepts Matched:"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:a.matchedConcepts&&a.matchedConcepts.length>0?a.matchedConcepts.map((S,C)=>w.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:S.label},C)):w.jsx("span",{className:"text-gray-500 text-xs",children:"None found"})})]})]})]}),a.suggestions&&a.suggestions.length>0&&w.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[w.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Suggestions for Improvement:"}),w.jsx("ul",{className:"list-disc pl-5 text-sm text-blue-700 space-y-1",children:a.suggestions.map((S,C)=>w.jsx("li",{children:S},C))})]}),w.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[w.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Sample Answer:"}),w.jsx("p",{className:"text-green-700 text-sm italic",children:t.sampleAnswer})]}),w.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[w.jsx("h5",{className:"font-semibold text-purple-800 mb-2",children:" What we're looking for:"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-purple-700 mb-1",children:"Key Terms:"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:t.evaluationCriteria.requiredKeywords.map((S,C)=>w.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-600 rounded text-xs",children:S},C))})]}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-purple-700 mb-1",children:"Concepts:"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:t.evaluationCriteria.requiredConcepts.map((S,C)=>w.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-600 rounded text-xs",children:S},C))})]})]})]})]}),w.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-600",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{children:["Level ",t.level]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[t.points," points"]}),w.jsx("span",{children:""}),w.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:t.concept})]}),s&&a&&w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a.level>=Math.max(t.level-2,4)?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.level>=Math.max(t.level-2,4)?"Good Answer!":"Try Again!"})})]}),w.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[w.jsxs("span",{children:[" Learning Path: ",t.learningPath]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[" Strand: ",t.strand]}),t.keywords&&t.keywords.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{children:""}),w.jsxs("span",{children:[" Keywords: ",t.keywords.join(", ")]})]})]})]})};class X5{static validateBasic(e){const n=[];return!e||typeof e!="object"?(n.push("Question must be a valid object"),{isValid:!1,errors:n}):((!e.id||typeof e.id!="string")&&n.push("Question must have a valid string ID"),(!e.type||typeof e.type!="string")&&n.push("Question must have a valid type"),(!e.question||typeof e.question!="string")&&n.push("Question must have question text"),(typeof e.level!="number"||e.level<1||e.level>8)&&n.push("Question must have a valid level (1-8)"),{isValid:n.length===0,errors:n})}static validateEnhanced(e){const n=this.validateBasic(e),r=[];if(!n.isValid)return{...n,warnings:r};switch(e.type.toLowerCase()){case"mcq":case"multiple-choice":return this.validateMCQ(e,n.errors,r);case"fill-blank":case"fill-in-blank":case"cloze":return this.validateFillBlank(e,n.errors,r);case"short-answer":case"long-answer":case"essay":return this.validateShortAnswer(e,n.errors,r);case"match-click":case"matching":return this.validateMatchClick(e,n.errors,r);default:r.push(`Question type "${e.type}" may not be fully supported`)}return{isValid:n.errors.length===0,errors:n.errors,warnings:r}}static validateMCQ(e,n,r){if(!Array.isArray(e.options)||e.options.length<2)n.push("MCQ must have at least 2 options");else{const i=e.options.filter(s=>s.isCorrect);i.length===0&&n.push("MCQ must have at least one correct option"),i.length>1&&r.push("MCQ has multiple correct options (multi-select behavior)"),e.options.length>6&&r.push("MCQ has many options (consider reducing for better UX)")}return{isValid:n.length===0,errors:n,warnings:r}}static validateFillBlank(e,n,r){return(!e.text||typeof e.text!="string")&&n.push("Fill-blank must have text content"),!Array.isArray(e.blanks)||e.blanks.length===0?n.push("Fill-blank must have at least one blank"):e.blanks.length>5&&r.push("Fill-blank has many blanks (consider splitting)"),{isValid:n.length===0,errors:n,warnings:r}}static validateShortAnswer(e,n,r){return e.evaluationCriteria||n.push("Short-answer must have evaluation criteria"),e.minWords&&e.minWords>200&&r.push("Short-answer requires many words (consider long-answer type)"),{isValid:n.length===0,errors:n,warnings:r}}static validateMatchClick(e,n,r){return(!Array.isArray(e.leftItems)||!Array.isArray(e.rightItems))&&n.push("Match-click must have leftItems and rightItems arrays"),(!Array.isArray(e.correctMatches)||e.correctMatches.length===0)&&n.push("Match-click must have correct matches defined"),{isValid:n.length===0,errors:n,warnings:r}}}class J5{static metrics=new Map;static trackPerformance(e,n,r,i,s=1){const o=r-n,a={questionId:e,timeSpent:o,isCorrect:i,difficulty:this.calculateDifficulty(o,i,s),efficiency:this.calculateEfficiency(o,i),attempts:s,timestamp:new Date};return this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(a),a}static calculateDifficulty(e,n,r){let i=0;return e>6e4?i+=3:e>3e4?i+=2:e>15e3&&(i+=1),n||(i+=2),r>1&&(i+=r-1),i<=1?"easy":i<=3?"medium":i<=5?"hard":"expert"}static calculateEfficiency(e,n){return n?e<1e4?"excellent":e<3e4?"good":"needs-improvement":"needs-improvement"}static getQuestionMetrics(e){return this.metrics.get(e)||[]}static getSessionSummary(){const e=Array.from(this.metrics.values()).flat();return{totalQuestions:e.length,averageTime:e.reduce((n,r)=>n+r.timeSpent,0)/e.length||0,successRate:e.filter(n=>n.isCorrect).length/e.length||0}}}class Q5{static createStandardAdapter(e){return n=>{e(n.questionId,n.answer,n.isCorrect,n.score)}}static createEnhancedAdapter(e,n){return(r,i,s,o)=>{const a={questionId:r,type:n.type,answer:i,isCorrect:s,score:o,feedback:s?this.getPositiveFeedback(o,n.level):this.getImprovementFeedback(o,n.level),timestamp:new Date,timeSpent:0};e(a)}}static detectInterfaceType(e){return!e||typeof e!="function"?"unknown":e.length===4?"enhanced":e.length===1?"standard":e.length===2?"enhanced":"unknown"}static createUniversalAdapter(e,n){switch(this.detectInterfaceType(e)){case"enhanced":return(i,s,o,a)=>{e(i,s,o,a)};case"standard":return(i,s,o,a)=>{const l={questionId:i,type:n.type,answer:s,isCorrect:o,score:a,feedback:o?this.getPositiveFeedback(a,n.level):this.getImprovementFeedback(a,n.level),timestamp:new Date,timeSpent:0};e(l)};default:return(i,s,o,a)=>{try{e(i,s,o,a)}catch(l){console.warn("Universal adapter fallback failed:",l)}}}}static getPositiveFeedback(e,n){const r=["Outstanding work! You truly understand this concept.","Brilliant! Your mastery of this topic is impressive.","Exceptional performance! Keep up the excellent work.","Perfect! You've demonstrated deep understanding.","Excellent! Your analytical skills are sharp."],i=["Great job! You're doing well with this material.","Nice work! You're building solid understanding.","Good effort! You're on the right track.","Well done! Keep practicing and you'll master this.","Solid work! Your progress is encouraging."];return e>=n*.85?r[Math.floor(Math.random()*r.length)]:i[Math.floor(Math.random()*i.length)]}static getImprovementFeedback(e,n){const r=["Good attempt! Learning takes practice - keep going.","Nice try! Review the concepts and try again.","Keep working on it! You're building understanding.","Good effort! Consider reviewing the key concepts.","Don't give up! Learning is a process."];return r[Math.floor(Math.random()*r.length)]}}class wce extends nt.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n}),console.error(`Question ${this.props.questionId} error:`,e,n)}render(){return this.state.hasError?this.props.fallback||w.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[w.jsx("h4",{className:"text-red-800 font-semibold mb-2 flex items-center gap-2",children:" Question Rendering Error"}),w.jsx("p",{className:"text-red-700 text-sm mb-3",children:"This question encountered an error and cannot be displayed properly."}),w.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded transition",children:"Try Again"}),!1]}):this.props.children}}const Sce=t=>{const{question:e,showFeedback:n=!0,disabled:r=!1,previousResponse:i,renderMode:s="enhanced",validationLevel:o="enhanced"}=t,[a]=W.useState(()=>performance.now()),[l,c]=W.useState(0),[u,d]=W.useState(!0),[h,f]=W.useState(null),p="onAnswer"in t&&typeof t.onAnswer=="function"&&(t.onAnswer.length===4||t.onAnswer.length===2);W.useEffect(()=>{(()=>{try{let x;o==="enhanced"?x=X5.validateEnhanced(e):x=X5.validateBasic(e),f(x),d(!1),x.warnings?.length&&s==="debug"&&console.warn(`Question ${e.id} warnings:`,x.warnings)}catch(x){console.error("Validation error:",x),f({isValid:!1,errors:["Question validation failed"]}),d(!1)}})()},[e,o,s]);const g=W.useCallback((y,x,S,C)=>{const A=performance.now(),O=l+1;c(O);const M=J5.trackPerformance(y,a,A,S,O);s==="debug"&&console.log("Question metrics:",M);try{Q5.createUniversalAdapter(t.onAnswer,e)(y,x,S,C)}catch(N){if(console.error("Answer handling error:",N),p)t.onAnswer(y,x,S,C);else{const D={questionId:y,type:e.type,answer:x,isCorrect:S,score:C,feedback:S?"Correct!":"Try again!",timestamp:new Date,timeSpent:A-a};t.onAnswer(D)}}},[l,a,p,t,e,s]);if(u)return w.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg animate-pulse",children:[w.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-3"}),w.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]});if(h&&!h.isValid)return w.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[w.jsx("h4",{className:"text-red-800 font-semibold mb-2 flex items-center gap-2",children:" Invalid Question Data"}),w.jsx("div",{className:"text-red-700 text-sm space-y-1",children:h.errors.map((y,x)=>w.jsxs("p",{children:[" ",y]},x))}),s==="debug"&&w.jsxs("details",{className:"mt-3 text-xs",children:[w.jsx("summary",{className:"cursor-pointer text-red-600",children:"Question Data"}),w.jsx("pre",{className:"mt-2 p-2 bg-red-100 rounded text-red-800 overflow-auto max-h-32",children:JSON.stringify(e,null,2)})]})]});const v=()=>{const y={question:e,onAnswer:g,showFeedback:n,disabled:r,previousResponse:i},x=w.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[w.jsx("h4",{className:"text-yellow-800 font-semibold mb-2",children:" Rendering Issue"}),w.jsxs("p",{className:"text-yellow-700 text-sm",children:["Unable to render this ",e.type," question properly."]})]}),C={mcq:em,"multiple-choice":em,"fill-blank":zc,"fill-in-blank":zc,cloze:zc,"short-answer":ra,"long-answer":ra,essay:ra,"text-input":ra,"match-click":$c,matching:$c,connect:$c}[e.type.toLowerCase()];return C?w.jsx(wce,{questionId:e.id,fallback:x,children:w.jsx(C,{...y})}):w.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[w.jsx("h4",{className:"text-gray-800 font-semibold mb-2",children:" Unsupported Question Type"}),w.jsxs("p",{className:"text-gray-700 text-sm mb-3",children:['Question type "',w.jsx("code",{className:"bg-gray-200 px-1 rounded",children:e.type}),'" is not supported yet.']}),w.jsx("p",{className:"text-gray-600 text-xs",children:"Supported types: MCQ, Fill-blank, Short-answer, Match-click"})]})};return w.jsxs("div",{className:"relative",children:[s==="debug"&&w.jsxs("div",{className:"absolute top-0 right-0 z-10 flex gap-1",children:[w.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-bl-lg",children:" Debug"}),h?.warnings?.length&&w.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-bl-lg",children:[" ",h.warnings.length]}),w.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-bl-lg",children:" Universal"})]}),s==="debug"&&h?.warnings?.length&&w.jsxs("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-xs",children:[w.jsx("strong",{children:"Warnings:"}),w.jsx("ul",{className:"mt-1 space-y-1",children:h.warnings.map((y,x)=>w.jsxs("li",{children:[" ",y]},x))})]}),v(),s==="debug"&&l>0&&w.jsxs("div",{className:"mt-3 p-2 bg-gray-50 border border-gray-200 rounded text-gray-600 text-xs",children:[w.jsx("strong",{children:"Performance:"})," ",l," attempt(s)  Time: ",Math.round(performance.now()-a),"ms"]})]})},Lf={validateQuestion:X5.validateEnhanced,trackPerformance:J5.trackPerformance,getSessionSummary:J5.getSessionSummary,createResponseAdapter:Q5.createStandardAdapter,getSupportedTypes:()=>["mcq","multiple-choice","fill-blank","fill-in-blank","cloze","short-answer","long-answer","essay","text-input","match-click","matching","connect"],getQuestionComponent:t=>({mcq:em,"multiple-choice":em,"fill-blank":zc,"fill-in-blank":zc,cloze:zc,"short-answer":ra,"long-answer":ra,essay:ra,"text-input":ra,"match-click":$c,matching:$c,connect:$c})[t.toLowerCase()],handleBlockCompletion:(t,e,n)=>{const r=e.reduce((s,o)=>s+(o.score||0),0),i=e.length>0?r/e.length:0;return n&&n(i),{blockId:t,totalScore:r,averageScore:i,totalQuestions:e.length,correctAnswers:e.filter(s=>s.isCorrect).length}},createCompatibleHandler:t=>Q5.createUniversalAdapter,safeEvaluate:(t,e)=>{try{return{isCorrect:!0,score:t.level||1,feedback:"Response recorded"}}catch(n){return console.error("Evaluation error:",n),{isCorrect:!1,score:0,feedback:"Unable to evaluate response"}}}},kce=({block:t,onComplete:e,onUnlock:n,showSuggestions:r=!1,onProgressUpdate:i,currentStudentId:s,sessionCode:o,experimentChoice:a,syncStatus:l="idle",useUniversalRenderer:c=!1,fallbackToIndividual:u=!0,enableEnhancedValidation:d=!0})=>{const[h,f]=W.useState(0),[p,g]=W.useState([]),[v,y]=W.useState(!1),[x,S]=W.useState(0),[C,A]=W.useState(!1),[O,M]=W.useState(null),[N,D]=W.useState(null),[V,L]=W.useState("individual"),E=t.questions[h],B=h===t.questions.length-1;W.useEffect(()=>{M(new Date),D(new Date),c?d&&E?Lf.validateQuestion(E)?L("universal"):u?(console.warn(`Question ${E.id} failed validation, falling back to individual components`),L("individual")):L("error"):L("universal"):L("individual")},[c,d,u,E]),W.useEffect(()=>{D(new Date)},[h]);const I=(P,U,K,J)=>{const re=new Date,se=N?re.getTime()-N.getTime():0,ue={questionId:P,type:E.type,answer:U,isCorrect:K,score:J,feedback:K?`Excellent! ${E.explanation||"Well done!"}`:`Good attempt. ${E.explanation||"Keep learning!"}`,timestamp:re,timeSpent:se},de=[...p];de[h]=ue,g(de),y(!0),c&&N&&Lf.trackQuestionPerformance(P,N.getTime(),re.getTime(),K),K||S(ve=>ve+1);const xe=de.reduce((ve,ke)=>ve+(ke?.score||0),0)/Math.max(de.filter(ve=>ve).length,1);i?.(t.id,h+1,t.questions.length,xe),K&&(J>=7?Pc({particleCount:100,spread:70,origin:{y:.6},colors:["#10b981","#34d399","#6ee7b7"]}):J>=5&&Pc({particleCount:50,spread:50,origin:{y:.6},colors:["#3b82f6","#60a5fa","#93c5fd"]})),setTimeout(()=>{if(B){const ke=de.reduce((Te,Ie)=>Te+(Ie?.score||0),0)/de.length;if(A(!0),e(t.id,de,ke),ke>=7&&Pc({particleCount:200,spread:100,origin:{y:.6},colors:["#fbbf24","#f59e0b","#d97706"]}),ke>=6&&n){const Te=t.level===2?4:t.level===4?6:t.level===6?8:null;Te&&n(Te)}}else f(ve=>ve+1),y(!1)},2500)},Q=()=>{if(!E)return w.jsx("div",{className:"p-4 text-center text-gray-500",children:"No questions available in this block."});if(V==="error")return w.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[w.jsx("h4",{className:"text-red-800 font-semibold mb-2",children:" Question Error"}),w.jsx("p",{className:"text-red-700 text-sm mb-3",children:"This question has invalid data and cannot be displayed."}),w.jsx("button",{onClick:()=>L("individual"),className:"text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded transition",children:"Try Individual Renderer"})]});if(V==="universal")try{return w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute top-0 right-0 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-bl-lg z-10",children:" Enhanced"}),w.jsx(Sce,{question:E,onAnswer:I,showFeedback:v,disabled:!1,previousResponse:p[h]})]})}catch(P){return console.error("Universal renderer failed:",P),u?(L("individual"),Z()):w.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[w.jsx("h4",{className:"text-yellow-800 font-semibold mb-2",children:" Rendering Error"}),w.jsx("p",{className:"text-yellow-700 text-sm",children:"Universal renderer failed. Please try refreshing the page."})]})}return Z()},Z=()=>w.jsxs("div",{className:"relative",children:[c&&w.jsx("div",{className:"absolute top-0 right-0 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-bl-lg z-10",children:" Individual"}),E.type==="mcq"&&w.jsx(em,{question:E,onAnswer:I,showFeedback:v}),E.type==="fill-blank"&&w.jsx(zc,{question:E,onAnswer:I,showFeedback:v}),E.type==="match-click"&&w.jsx($c,{question:E,onAnswer:I,showFeedback:v}),E.type==="short-answer"&&w.jsx(ra,{question:E,onAnswer:I,showFeedback:v}),!["mcq","fill-blank","match-click","short-answer"].includes(E.type)&&w.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[w.jsx("h4",{className:"text-gray-800 font-semibold mb-2",children:" Unsupported Question Type"}),w.jsxs("p",{className:"text-gray-700 text-sm",children:['Question type "',E.type,'" is not supported by individual components.']}),c&&w.jsx("button",{onClick:()=>L("universal"),className:"mt-2 text-sm bg-purple-100 hover:bg-purple-200 text-purple-800 px-3 py-1 rounded transition",children:"Try Universal Renderer"})]})]}),ne=P=>({2:"from-purple-200 to-purple-300",4:"from-purple-300 to-purple-400",6:"from-purple-400 to-purple-500",8:"from-purple-500 to-purple-600"})[P]||"from-gray-200 to-gray-300",Y=P=>({2:"border-purple-300",4:"border-purple-400",6:"border-purple-500",8:"border-purple-600"})[P]||"border-gray-300",ie=P=>P>=7?"text-green-600":P>=5?"text-blue-600":P>=3?"text-yellow-600":"text-red-600",q=()=>p.filter(U=>U).length/t.questions.length*100,G=()=>{const P=p.filter(U=>U);return P.length===0?0:P.reduce((U,K)=>U+K.score,0)/P.length};if(!t.unlocked)return w.jsx(jn.div,{initial:{opacity:.5,scale:.95},animate:{opacity:.5,scale:.95},whileHover:{scale:.97,opacity:.6},className:"relative",children:w.jsxs("div",{className:`p-6 rounded-lg bg-gradient-to-r ${ne(t.level)} opacity-50 border-2 ${Y(t.level)}`,children:[w.jsx("div",{className:"absolute inset-0 flex items-center justify-center backdrop-blur-sm",children:w.jsx("div",{className:"bg-white rounded-full p-4 shadow-lg",children:w.jsx("span",{className:"text-2xl",children:""})})}),w.jsxs("h3",{className:"text-lg font-bold text-white mb-2",children:["Level ",t.level," Questions"]}),w.jsxs("p",{className:"text-white/80 text-sm",children:["Complete Level ",t.level-2," with score  6 to unlock"]}),w.jsxs("div",{className:"mt-3 flex items-center gap-2 text-white/70 text-xs",children:[w.jsxs("span",{children:[" ",t.questions.length," questions"]}),w.jsx("span",{children:""}),w.jsxs("span",{children:[" ",t.level," points each"]})]})]})});if(C){const P=p.reduce((J,re)=>J+(re?.score||0),0)/p.length,U=p.filter(J=>J?.isCorrect).length,K=O?(new Date().getTime()-O.getTime())/1e3:0;return w.jsxs(jn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`p-6 rounded-lg bg-gradient-to-r ${ne(t.level)} text-white border-2 ${Y(t.level)}`,children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-3xl",children:""}),w.jsxs("div",{children:[w.jsxs("h3",{className:"text-lg font-bold",children:["Level ",t.level," Completed!"]}),w.jsx("p",{className:"text-white/80 text-sm",children:"Great work on finishing this level"}),w.jsx("p",{className:"text-white/60 text-xs mt-1",children:V==="universal"?" Enhanced renderer":V==="individual"?" Individual components":" Mixed rendering"})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("div",{className:`text-2xl font-bold ${ie(P)}`,children:[P.toFixed(1),"/8"]}),w.jsx("div",{className:"text-xs text-white/70",children:"Average Score"})]})]}),w.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[w.jsxs("div",{className:"bg-white/20 rounded-lg p-3 text-center",children:[w.jsxs("div",{className:"text-lg font-bold",children:[U,"/",p.length]}),w.jsx("div",{className:"text-xs text-white/70",children:"Correct"})]}),w.jsxs("div",{className:"bg-white/20 rounded-lg p-3 text-center",children:[w.jsx("div",{className:"text-lg font-bold",children:x}),w.jsx("div",{className:"text-xs text-white/70",children:"Total Attempts"})]}),w.jsxs("div",{className:"bg-white/20 rounded-lg p-3 text-center",children:[w.jsxs("div",{className:"text-lg font-bold",children:[Math.round(K),"s"]}),w.jsx("div",{className:"text-xs text-white/70",children:"Time Taken"})]}),w.jsxs("div",{className:"bg-white/20 rounded-lg p-3 text-center",children:[w.jsxs("div",{className:"text-lg font-bold",children:[Math.round(U/p.length*100),"%"]}),w.jsx("div",{className:"text-xs text-white/70",children:"Success Rate"})]})]}),w.jsxs("div",{className:"mb-4 p-3 bg-white/10 rounded-lg",children:[P>=7&&w.jsxs("p",{className:"text-sm text-white/90",children:[" ",w.jsx("strong",{children:"Excellent!"})," You've mastered this level. Ready for the next challenge?"]}),P>=5&&P<7&&w.jsxs("p",{className:"text-sm text-white/90",children:[" ",w.jsx("strong",{children:"Good work!"})," You understand the concepts well. Practice a bit more to perfect your skills."]}),P>=3&&P<5&&w.jsxs("p",{className:"text-sm text-white/90",children:[" ",w.jsx("strong",{children:"Keep learning!"})," Review the concepts and try again. You're making progress!"]}),P<3&&w.jsxs("p",{className:"text-sm text-white/90",children:[" ",w.jsx("strong",{children:"Don't give up!"})," Learning takes time. Review the material and try again."]})]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:()=>{f(0),g([]),y(!1),S(0),A(!1),M(new Date),D(new Date)},className:"flex-1 px-4 py-2 bg-white text-purple-600 rounded-lg hover:bg-purple-50 transition font-medium",children:" Retry Level"}),P>=6&&w.jsx("button",{onClick:()=>{const J=t.level===2?4:t.level===4?6:t.level===6?8:null;J&&n&&n(J)},className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:" Next Level"})]})]})}return w.jsxs(jn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`rounded-lg bg-gradient-to-r ${ne(t.level)} text-white border-2 ${Y(t.level)} overflow-hidden`,children:[w.jsxs("div",{className:"p-6 pb-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:"text-2xl",children:""}),w.jsxs("div",{children:[w.jsxs("h3",{className:"text-lg font-bold",children:["Level ",t.level," Questions"]}),w.jsxs("p",{className:"text-white/80 text-sm",children:[t.questions.length," questions  ",t.level," points each"]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[w.jsx("div",{className:"text-sm text-white/70",children:"Question"}),l&&w.jsx("span",{className:`px-2 py-1 rounded text-xs transition-all duration-200 ${l==="saving"?"bg-yellow-300 text-yellow-800 animate-pulse":l==="success"?"bg-green-300 text-green-800":l==="error"?"bg-red-300 text-red-800 animate-bounce":"bg-white/20 text-white"}`,children:l==="saving"?" Saving":l==="success"?" Synced":l==="error"?" Error":" Idle"})]}),w.jsxs("div",{className:"text-xl font-bold",children:[h+1,"/",t.questions.length]})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex justify-between items-center text-xs text-white/70",children:[w.jsx("span",{children:"Progress"}),w.jsxs("span",{children:[Math.round(q()),"% complete"]})]}),w.jsx("div",{className:"w-full bg-white/20 rounded-full h-3 overflow-hidden",children:w.jsx(jn.div,{className:"bg-white h-3 rounded-full shadow-lg",initial:{width:0},animate:{width:`${(h+1)/t.questions.length*100}%`},transition:{duration:.5,ease:"easeOut"}})})]}),w.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[p.filter(P=>P).length>0&&w.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["Avg: ",G().toFixed(1),"/8"]}),x>0&&w.jsxs("span",{className:"bg-white/20 px-2 py-1 rounded",children:["Attempts: ",x]}),w.jsx("span",{className:`px-2 py-1 rounded ${V==="universal"?"bg-green-400/30":V==="individual"?"bg-blue-400/30":"bg-red-400/30"}`,children:V==="universal"?" Enhanced":V==="individual"?" Individual":" Error Mode"})]}),w.jsxs("div",{className:"text-white/70",children:["Level ",t.level," Challenge"]})]})]}),w.jsx(b6,{mode:"wait",children:w.jsxs(jn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white mx-6 mb-6 rounded-lg p-6 text-gray-800 shadow-lg",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:["Question ",h+1]}),w.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:E.type.replace("-"," ").replace(/\b\w/g,P=>P.toUpperCase())}),d&&c&&w.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Lf.validateQuestion(E)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Lf.validateQuestion(E)?" Valid":" Invalid"})]}),w.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[w.jsxs("span",{children:[E.points||E.level," points"]}),!1]})]}),Q(),v&&p[h]&&w.jsxs(jn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`mt-4 p-4 rounded-lg border-2 ${p[h].isCorrect?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("span",{className:"text-lg",children:p[h].isCorrect?"":""}),w.jsx("span",{className:"font-semibold",children:p[h].isCorrect?"Correct!":"Not quite right"}),w.jsxs("span",{className:"ml-auto text-sm",children:["Score: ",p[h].score,"/",E.level]})]}),w.jsx("p",{className:"text-sm",children:p[h].feedback}),!B&&w.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Moving to next question in a moment..."}),B&&w.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Calculating your final score..."})]})]},h)}),x>=2&&r&&!v&&w.jsxs(jn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mx-6 mb-6 p-4 bg-yellow-100 text-yellow-800 rounded-lg border border-yellow-200",children:[w.jsx("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:" Need a hint?"}),w.jsxs("div",{className:"text-sm space-y-1",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Key concept:"})," ",E.concept]}),E.keywords&&E.keywords.length>0&&w.jsxs("p",{children:[w.jsx("strong",{children:"Important terms:"})," ",E.keywords.join(", ")]}),w.jsx("p",{className:"text-yellow-700 mt-2",children:"Take your time and think about the fundamental principles involved."}),c&&V==="individual"&&w.jsx("p",{className:"text-yellow-600 text-xs mt-2",children:" Try switching to the enhanced renderer for additional help features."})]})]}),w.jsx("div",{className:"sr-only","aria-live":"polite",children:v&&p[h]&&w.jsxs("span",{children:["Question ",h+1," of ",t.questions.length," ",p[h].isCorrect?"answered correctly":"answered incorrectly",".",B?"Completing level.":"Moving to next question."]})})]})},_ce=({currentStrand:t,experimentChoice:e,currentStudentId:n,sessionCode:r,onProgressUpdate:i,useUniversalRenderer:s=!1,enableEnhancedValidation:o=!0,showPerformanceAnalytics:a=!1,autoSyncEnabled:l=!0,debugMode:c=!1})=>{fm();const u=bce(),[d,h]=W.useState(null),[f,p]=W.useState(!1),[g,v]=W.useState(null),[y,x]=W.useState("standard");W.useState([]);const[S,C]=W.useState({}),{syncStatus:A,saveResponse:O,loadResponses:M}=xce({studentId:n,experiment:e,sessionCode:r,strandhoot:"criteria-a-tir",currentStrand:t});W.useEffect(()=>{(async()=>{try{const Q=f8(t,e,xd[e]||{});if(o&&s){const Z={};Q.blocks?.forEach(ne=>{ne.questions?.forEach(Y=>{const ie=Lf.validateQuestion(Y);Z[Y.id]=ie})}),C(Z)}v(Q),x(s?"universal":"standard")}catch(Q){console.error(" Failed to load strand data:",Q);const Z=xd[e]?.[`strand${t}`];v(Z),x("standard")}})()},[t,e,s,o]);const N=async(I,Q)=>{try{const Z=Q.reduce((ie,q)=>ie+(q.score||0),0),ne=Q.length>0?Z/Q.length:0,Y=parseInt(I.split("level")[1])||2;u?.updateQuestionProgress&&u.updateQuestionProgress(t,I,ne),i(t,Y,ne),ne>=7&&Pc({particleCount:150,spread:80,origin:{y:.6},colors:["#10b981","#34d399","#6ee7b7"]}),l&&await O(I,{responses:Q,score:ne,level:Y,timestamp:new Date})}catch(Z){console.error(" Block completion error:",Z)}},D=I=>{if(!g)return;const Q=g.blocks?.find(Y=>Y.level===I);if(!Q)return;let Z=Q.questions||[];o&&s&&(Z=Z.filter(Y=>S[Y.id]?.isValid!==!1));const ne={id:Q.id||`strand${t}_level${I}`,level:I,questions:Z,completed:Q.completed||!1,score:Q.score||0,unlocked:!0,attempts:Q.attempts||0,maxAttempts:Q.maxAttempts||3,completedQuestions:Q.completedQuestions||0,totalQuestions:Z.length};h(ne),p(!1)},V=I=>{const Q=`strand${t}_level${I}`;return u?.questionSystem?.strands?.[t]?.questionBlocks?.[Q]?.completed?"completed":"available"},L=()=>{const I=u?.questionSystem?.strands?.[t];if(!I)return 0;const Q=Object.values(I.questionBlocks||{}).filter(ne=>ne.completed);if(Q.length===0)return 0;const Z=Math.max(...Q.map(ne=>ne.score||0));return Math.min(8,Z)};if(!g)return w.jsxs("div",{className:"flex justify-center items-center h-64",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),w.jsx("span",{className:"ml-3 text-purple-600 font-medium",children:"Loading questions..."})]});const E=L(),B={2:{base:"bg-emerald-500 border-emerald-600 text-white hover:bg-emerald-600",completed:"bg-emerald-600"},4:{base:"bg-blue-500 border-blue-600 text-white hover:bg-blue-600",completed:"bg-blue-600"},6:{base:"bg-purple-500 border-purple-600 text-white hover:bg-purple-600",completed:"bg-purple-600"},8:{base:"bg-rose-500 border-rose-600 text-white hover:bg-rose-600",completed:"bg-rose-600"}};return w.jsxs("div",{className:"space-y-6",children:[c&&w.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-xs",children:[w.jsx("div",{className:"font-bold text-blue-800 mb-1",children:" SAFE MODULAR VERSION:"}),w.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[w.jsx("div",{children:"Status:  Working"}),w.jsxs("div",{children:["Progress: ",E,"/8"]}),w.jsxs("div",{children:["Mode: ",y]}),w.jsxs("div",{children:["Sync: ",A]})]})]}),w.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-sm border-2 border-purple-200 p-6",children:w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsxs("div",{children:[w.jsxs("h3",{className:"text-2xl font-bold text-purple-800",children:["Strand ",t," Interactive Questions",s&&w.jsx("span",{className:"ml-2 text-sm bg-green-100 text-green-700 px-2 py-1 rounded-full",children:" Enhanced"})]}),w.jsx("p",{className:"text-purple-600 mt-2 text-lg",children:e==="critical-angle"?"Master critical angle principles and total internal reflection":"Explore fiber optics and light transmission technology"})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("div",{className:"text-4xl font-bold text-purple-600",children:[E,"/8"]}),w.jsx("div",{className:"text-sm text-purple-500 font-medium",children:"Overall Score"})]})]})}),w.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[w.jsx("h4",{className:"font-bold text-purple-700",children:" Select Question Level"}),w.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"All Levels Unlocked"})]}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[2,4,6,8].map(I=>{const Q=V(I),ne=g.blocks?.find(q=>q.level===I)?.questions?.length||0,Y=Q==="completed",ie=B[I];return w.jsx(jn.button,{onClick:()=>D(I),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-3 rounded-lg border-2 font-bold transition-all duration-300 ${Y?ie.completed:ie.base}`,children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"text-left",children:[w.jsxs("div",{className:"text-lg font-bold",children:["Level ",I]}),w.jsx("div",{className:"text-xs opacity-90",children:Y?"Completed":`${ne} questions`})]}),w.jsx("div",{className:"text-2xl",children:Y?"":I===2?"":I===4?"":I===6?"":""})]})},I)})}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-gray-600 border-t border-gray-200 pt-3",children:[w.jsxs("div",{children:[w.jsx("strong",{children:"Level 2:"})," Basic recall and simple understanding"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Level 4:"})," Application in familiar contexts"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Level 6:"})," Analysis and evaluation in new contexts"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Level 8:"})," Synthesis and creation of understanding"]})]})]}),w.jsx(b6,{mode:"wait",children:d&&w.jsx(jn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>h(null),className:"absolute top-4 right-4 z-10 p-2 bg-gray-200 hover:bg-gray-300 rounded-full text-gray-600 hover:text-gray-800 transition-colors",children:""}),w.jsx(kce,{block:d,onComplete:N,currentStudentId:n,sessionCode:r,experimentChoice:e,syncStatus:A,useUniversalRenderer:y==="universal",fallbackToIndividual:!0,enableEnhancedValidation:o})]})},`block-${d.id}`)})]})},i2={matchedKeywords:[],matchedConcepts:[],level:0,suggestions:[]},Cce=({currentStrand:t,learningPathChoice:e,currentStudentId:n,sessionCode:r,onNext:i,onPrevious:s})=>{const o=`strand${t}`,{userInputs:a,setUserInputs:l,strandProgress:c,setStrandProgress:u}=fm(),[d,h]=W.useState("questions"),[f,p]=W.useState({}),[g,v]=W.useState(!1),[y,x]=W.useState(null),S=a[o]?.level8||"",C=f[o]||i2,A=W.useCallback((L,E,B)=>{console.log(" PROGRESS UPDATE RECEIVED:",{strand:L,level:E,score:B,currentStrand:t}),u(I=>{const Q=[...I],Z=L-1;if(Z>=0&&Z<4){const ne=Q[Z]||0,Y=Math.max(ne,Math.min(8,Math.max(0,B)));return Q[Z]=Y,console.log(" PROGRESS UPDATED:",{strand:L,oldScore:ne,newScore:Y,fullProgress:Q}),Q}else return console.warn(" Invalid strand index:",Z),I})},[u]),O=W.useCallback(async L=>{if(!L.trim()){p(E=>({...E,[o]:i2})),u(E=>{const B=[...E];return B[t-1]=0,B});return}v(!0),console.log(" STARTING EVALUATION:",{strandKey:o,learningPathChoice:e,contentLength:L.length});try{const E=await h8(L,e,o);console.log(" EVALUATION COMPLETE:",{level:E.level,keywords:E.matchedKeywords.length,concepts:E.matchedConcepts.length,suggestions:E.suggestions.length}),p(B=>({...B,[o]:E})),u(B=>{const I=[...B];return I[t-1]=E.level,console.log(" EVALUATION PROGRESS UPDATE:",{strand:t,newLevel:E.level,fullProgress:I}),I})}catch(E){console.error(" EVALUATION ERROR:",E),p(B=>({...B,[o]:{...i2,suggestions:["Evaluation temporarily unavailable. Content saved successfully."]}}))}finally{v(!1)}},[e,o,t,u]);W.useEffect(()=>{y&&clearTimeout(y);const L=setTimeout(()=>{O(S)},1500);return x(L),()=>{L&&clearTimeout(L)}},[S,O]),W.useEffect(()=>{(async()=>{if(!(!n||!e||!r))try{const{data:E,error:B}=await gs.from("responses").select("strand1, strand2, strand3, strand4").eq("student_id",n).eq("experiment",e).eq("session_code",r).maybeSingle();if(B){console.error(" Error fetching strand data:",B);return}E&&(console.log(" LOADING SAVED DATA:",E),l({strand1:{level8:E.strand1||""},strand2:{level8:E.strand2||""},strand3:{level8:E.strand3||""},strand4:{level8:E.strand4||""}}))}catch(E){console.error(" Error in fetchStrands:",E)}})()},[n,e,r,l]);const M=W.useCallback(L=>{console.log(" EDITOR CONTENT CHANGED:",{length:L.length,strand:t}),l(E=>({...E,[o]:{...E[o],level8:L}}))},[o,l,t]),N=L=>L>=7?"bg-green-100 text-green-800 border-green-300":L>=5?"bg-blue-100 text-blue-800 border-blue-300":L>=3?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-100 text-gray-800 border-gray-300",V=(()=>{try{return fce?.[e]?.[o]||{}}catch(L){return console.error(" Error loading tips:",L),{}}})();return w.jsxs("div",{className:"strand-content-tabs p-4 border rounded-md shadow-sm bg-white",children:[!1,w.jsxs("h2",{className:"font-semibold text-lg mb-2",children:["Strand ",t]}),w.jsx("p",{className:"text-sm mb-4 text-gray-700",children:"Navigate through tabs to explore examples, try simulations, and complete interactive questions."}),w.jsxs("div",{className:"flex border-b mb-4 overflow-x-auto",children:[w.jsx("button",{className:`px-4 py-2 font-medium transition whitespace-nowrap ${d==="guided"?"border-b-2 border-purple-500 text-purple-600":""}`,onClick:()=>h("guided"),children:" Guided Example"}),w.jsx("button",{className:`px-4 py-2 font-medium transition whitespace-nowrap ${d==="sim"?"border-b-2 border-purple-500 text-purple-600":""}`,onClick:()=>h("sim"),children:" Simulation"}),w.jsx("button",{className:`px-4 py-2 font-medium transition whitespace-nowrap ${d==="questions"?"border-b-2 border-purple-500 text-purple-600":""}`,onClick:()=>h("questions"),children:" Interactive Questions"}),w.jsx("button",{className:`px-4 py-2 font-medium transition whitespace-nowrap ${d==="your"?"border-b-2 border-purple-500 text-purple-600":""}`,onClick:()=>h("your"),children:" Your Response"})]}),d==="guided"&&w.jsx("div",{className:"mt-4",children:w.jsx(hX,{currentStrand:t,learningPathChoice:e})}),d==="sim"&&w.jsx("div",{className:"mt-4",children:w.jsx(pce,{})}),d==="questions"&&w.jsx("div",{className:"mt-4",children:w.jsx(_ce,{currentStrand:t,experimentChoice:e,currentStudentId:n,sessionCode:r,onProgressUpdate:A})}),d==="your"&&w.jsxs("div",{className:"mt-4",children:[w.jsxs("label",{className:"block mb-2 font-medium text-sm",children:["Your Response for Strand ",t]}),Object.keys(V).length>0&&w.jsxs("div",{className:"bg-yellow-50 p-3 mb-3 rounded border border-yellow-200 text-sm",children:[w.jsx("h4",{className:"font-semibold text-sm mb-1",children:" Tips:"}),w.jsx("p",{className:"text-gray-700",children:"Focus on using scientific vocabulary and explaining concepts clearly."})]}),w.jsx(uce,{content:S,onChange:M,currentStudentId:n,currentStrand:t,currentExperimentChoice:e,sessionCode:r},o),w.jsxs("div",{className:`mt-4 p-4 rounded-lg border-2 transition-all duration-300 ${N(C.level)}`,children:[w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[w.jsxs("h4",{className:"font-semibold text-sm flex items-center",children:[" Live Evaluation",g&&w.jsx("span",{className:"ml-2 animate-spin text-blue-500",children:""})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("span",{className:"text-2xl font-bold",children:[C.level,"/8"]}),w.jsx("div",{className:"text-xs text-gray-600",children:C.level>=7?"Excellent":C.level>=5?"Good":C.level>=3?"Adequate":C.level>0?"Developing":"Start Writing"})]})]}),w.jsxs("div",{className:"mb-3",children:[w.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[w.jsx("span",{children:"Progress to Level 8"}),w.jsxs("span",{children:[Math.round(C.level/8*100),"%"]})]}),w.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:w.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${C.level/8*100}%`}})})]}),C.matchedKeywords.length>0&&w.jsxs("div",{className:"mb-3",children:[w.jsxs("p",{className:"text-sm font-semibold mb-2",children:[" Scientific Terms Found (",C.matchedKeywords.length,"):"]}),w.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.matchedKeywords.slice(0,8).map((L,E)=>w.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 border border-green-300",children:L.label},E)),C.matchedKeywords.length>8&&w.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:["+",C.matchedKeywords.length-8," more"]})]})]}),C.matchedConcepts.length>0&&w.jsxs("div",{className:"mb-3",children:[w.jsxs("p",{className:"text-sm font-semibold mb-2",children:[" Concepts Identified (",C.matchedConcepts.length,"):"]}),w.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.matchedConcepts.slice(0,6).map((L,E)=>w.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 border border-blue-300",children:L.label},E)),C.matchedConcepts.length>6&&w.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:["+",C.matchedConcepts.length-6," more"]})]})]}),C.suggestions.length>0&&w.jsxs("div",{className:"border-t pt-3",children:[w.jsx("p",{className:"text-sm font-semibold mb-2",children:" Suggestions for Improvement:"}),w.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1",children:C.suggestions.slice(0,3).map((L,E)=>w.jsx("li",{className:"text-gray-700",children:L},E))})]}),C.level===0&&S.length>0&&w.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded border",children:" Keep writing! Add scientific vocabulary and detailed explanations to improve your score."}),S.length===0&&w.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 p-3 rounded border text-center",children:" Start typing your response to see live evaluation feedback"})]})]}),w.jsxs("div",{className:"flex justify-between mt-6",children:[w.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition",disabled:t===1,children:" Previous Strand"}),w.jsx("button",{onClick:i,className:"px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition",children:t===4?"Complete Assessment ":"Next Strand "})]})]})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c1.apply(this,arguments)}var Cc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cc||(Cc={}));const lE="popstate";function Ace(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Z5("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:y8(i)}return Nce(e,n,null,t)}function Z_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tce(){return Math.random().toString(36).substr(2,8)}function cE(t,e){return{usr:t.state,key:t.key,idx:e}}function Z5(t,e,n,r){return n===void 0&&(n=null),c1({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?v8(e):e,{state:n,key:e&&e.key||r||Tce()})}function y8(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function v8(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Nce(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Cc.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(c1({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Cc.Pop;let v=u(),y=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:y})}function h(v,y){a=Cc.Push;let x=Z5(g.location,v,y);n&&n(x,v),c=u()+1;let S=cE(x,c),C=g.createHref(x);try{o.pushState(S,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(C)}s&&l&&l({action:a,location:g.location,delta:1})}function f(v,y){a=Cc.Replace;let x=Z5(g.location,v,y);n&&n(x,v),c=u();let S=cE(x,c),C=g.createHref(x);o.replaceState(S,"",C),s&&l&&l({action:a,location:g.location,delta:0})}function p(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof v=="string"?v:y8(v);return x=x.replace(/ $/,"%20"),Z_(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let g={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(lE,d),l=v,()=>{i.removeEventListener(lE,d),l=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(v){return o.go(v)}};return g}var uE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uE||(uE={}));function Pce(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const b8=["post","put","patch","delete"];new Set(b8);const Ece=["get",...b8];new Set(Ece);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(this,arguments)}const Mce=W.createContext(null),eC=W.createContext(null);function x8(){return W.useContext(eC)!=null}function Lce(){return x8()||Z_(!1),W.useContext(eC).location}function Oce(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Ice(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Cc.Pop,navigator:s,static:o=!1,future:a}=t;x8()&&Z_(!1);let l=e.replace(/^\/*/,"/"),c=W.useMemo(()=>({basename:l,navigator:s,static:o,future:eS({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=v8(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=W.useMemo(()=>{let v=Pce(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return g==null?null:W.createElement(Mce.Provider,{value:c},W.createElement(eC.Provider,{children:n,value:g}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Rce="6";try{window.__reactRouterVersion=Rce}catch{}const jce="startTransition",dE=f1[jce];function Dce(t){let{basename:e,children:n,future:r,window:i}=t,s=W.useRef();s.current==null&&(s.current=Ace({window:i,v5Compat:!0}));let o=s.current,[a,l]=W.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=W.useCallback(d=>{c&&dE?dE(()=>l(d)):l(d)},[l,c]);return W.useLayoutEffect(()=>o.listen(u),[o,u]),W.useEffect(()=>Oce(r),[r]),W.createElement(Ice,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var hE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hE||(hE={}));var fE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fE||(fE={}));const Fce=({currentStrand:t,setCurrentStrand:e,onNext:n,points:r,setPoints:i,strandStatus:s,setStrandStatus:o,earnedBadges:a,setEarnedBadges:l,learningPathData:c,learningPathChoice:u,experimentTitle:d})=>{const{userInputs:h,strandProgress:f}=fm();Lce();const p=new URLSearchParams(window.location.search);p.get("name");const g=p.get("studentId")??null,v=p.get("sessionCode");return w.jsxs("div",{className:"main-screen px-6 py-4 space-y-6",children:[w.jsxs("div",{className:"flex justify-between items-center px-4 py-3 bg-purple-600 text-white rounded-md shadow-md",children:[w.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:" Total Internal Reflection Explorer - MYP Criteria A "}),w.jsxs("div",{className:"text-sm md:text-base font-medium",children:[" ",r," POINTS / 100"]})]}),w.jsx(WW,{strandProgress:f,currentStrand:t,userInputs:h,setCurrentStrand:e,earnedBadges:a,experimentTitle:d}),w.jsx(Cce,{currentStrand:t,learningPathChoice:u,currentStudentId:g,sessionCode:v,onNext:()=>{t<4?e(t+1):n()},onPrevious:()=>{t>1&&e(t-1)}})]})};var $r=Uint8Array,Wi=Uint16Array,tC=Int32Array,Av=new $r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tv=new $r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tS=new $r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w8=function(t,e){for(var n=new Wi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new tC(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},S8=w8(Av,2),k8=S8.b,nS=S8.r;k8[28]=258,nS[258]=28;var _8=w8(Tv,0),Bce=_8.b,pE=_8.r,rS=new Wi(32768);for(var rn=0;rn<32768;++rn){var ja=(rn&43690)>>1|(rn&21845)<<1;ja=(ja&52428)>>2|(ja&13107)<<2,ja=(ja&61680)>>4|(ja&3855)<<4,rS[rn]=((ja&65280)>>8|(ja&255)<<8)>>1}var So=function(t,e,n){for(var r=t.length,i=0,s=new Wi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Wi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Wi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[rS[d]>>l]=c}else for(a=new Wi(r),i=0;i<r;++i)t[i]&&(a[i]=rS[o[t[i]-1]++]>>15-t[i]);return a},Ml=new $r(288);for(var rn=0;rn<144;++rn)Ml[rn]=8;for(var rn=144;rn<256;++rn)Ml[rn]=9;for(var rn=256;rn<280;++rn)Ml[rn]=7;for(var rn=280;rn<288;++rn)Ml[rn]=8;var tm=new $r(32);for(var rn=0;rn<32;++rn)tm[rn]=5;var zce=So(Ml,9,0),$ce=So(Ml,9,1),Vce=So(tm,5,0),Uce=So(tm,5,1),s2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Rs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},o2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},nC=function(t){return(t+7)/8|0},C8=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new $r(t.subarray(e,n))},qce=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zs=function(t,e,n){var r=new Error(e||qce[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,zs),!n)throw r;return r},Wce=function(t,e,n,r){var i=t.length,s=r?r.length:0;if(!i||e.f&&!e.l)return n||new $r(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new $r(i*3));var c=function(ve){var ke=n.length;if(ve>ke){var Te=new $r(Math.max(ke*2,ve));Te.set(n),n=Te}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,p=e.d,g=e.m,v=e.n,y=i*8;do{if(!f){u=Rs(t,d,1);var x=Rs(t,d+1,3);if(d+=3,x)if(x==1)f=$ce,p=Uce,g=9,v=5;else if(x==2){var O=Rs(t,d,31)+257,M=Rs(t,d+10,15)+4,N=O+Rs(t,d+5,31)+1;d+=14;for(var D=new $r(N),V=new $r(19),L=0;L<M;++L)V[tS[L]]=Rs(t,d+L*3,7);d+=M*3;for(var E=s2(V),B=(1<<E)-1,I=So(V,E,1),L=0;L<N;){var Q=I[Rs(t,d,B)];d+=Q&15;var S=Q>>4;if(S<16)D[L++]=S;else{var Z=0,ne=0;for(S==16?(ne=3+Rs(t,d,3),d+=2,Z=D[L-1]):S==17?(ne=3+Rs(t,d,7),d+=3):S==18&&(ne=11+Rs(t,d,127),d+=7);ne--;)D[L++]=Z}}var Y=D.subarray(0,O),ie=D.subarray(O);g=s2(Y),v=s2(ie),f=So(Y,g,1),p=So(ie,v,1)}else zs(1);else{var S=nC(d)+4,C=t[S-4]|t[S-3]<<8,A=S+C;if(A>i){l&&zs(0);break}a&&c(h+C),n.set(t.subarray(S,A),h),e.b=h+=C,e.p=d=A*8,e.f=u;continue}if(d>y){l&&zs(0);break}}a&&c(h+131072);for(var q=(1<<g)-1,G=(1<<v)-1,P=d;;P=d){var Z=f[o2(t,d)&q],U=Z>>4;if(d+=Z&15,d>y){l&&zs(0);break}if(Z||zs(2),U<256)n[h++]=U;else if(U==256){P=d,f=null;break}else{var K=U-254;if(U>264){var L=U-257,J=Av[L];K=Rs(t,d,(1<<J)-1)+k8[L],d+=J}var re=p[o2(t,d)&G],se=re>>4;re||zs(3),d+=re&15;var ie=Bce[se];if(se>3){var J=Tv[se];ie+=o2(t,d)&(1<<J)-1,d+=J}if(d>y){l&&zs(0);break}a&&c(h+131072);var ue=h+K;if(h<ie){var de=s-ie,xe=Math.min(ie,ue);for(de+h<0&&zs(3);h<xe;++h)n[h]=r[de+h]}for(;h<ue;++h)n[h]=n[h-ie]}}e.l=f,e.p=P,e.b=h,e.f=u,f&&(u=1,e.m=g,e.d=p,e.n=v)}while(!u);return h!=n.length&&o?C8(n,0,h):n.subarray(0,h)},$o=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},mf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},a2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:T8,l:0};if(i==1){var o=new $r(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(A,O){return A.f-O.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var f=new Wi(h+1),p=iS(n[u-1],f,0);if(p>e){var r=0,g=0,v=p-e,y=1<<v;for(s.sort(function(O,M){return f[M.s]-f[O.s]||O.f-M.f});r<i;++r){var x=s[r].s;if(f[x]>e)g+=y-(1<<p-f[x]),f[x]=e;else break}for(g>>=v;g>0;){var S=s[r].s;f[S]<e?g-=1<<e-f[S]++-1:++r}for(;r>=0&&g;--r){var C=s[r].s;f[C]==e&&(--f[C],++g)}p=e}return{t:new $r(f),l:p}},iS=function(t,e,n){return t.s==-1?Math.max(iS(t.l,e,n+1),iS(t.r,e,n+1)):e[t.s]=n},mE=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Wi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},gf=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},A8=function(t,e,n){var r=n.length,i=nC(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},gE=function(t,e,n,r,i,s,o,a,l,c,u){$o(e,u++,n),++i[256];for(var d=a2(i,15),h=d.t,f=d.l,p=a2(s,15),g=p.t,v=p.l,y=mE(h),x=y.c,S=y.n,C=mE(g),A=C.c,O=C.n,M=new Wi(19),N=0;N<x.length;++N)++M[x[N]&31];for(var N=0;N<A.length;++N)++M[A[N]&31];for(var D=a2(M,7),V=D.t,L=D.l,E=19;E>4&&!V[tS[E-1]];--E);var B=c+5<<3,I=gf(i,Ml)+gf(s,tm)+o,Q=gf(i,h)+gf(s,g)+o+14+3*E+gf(M,V)+2*M[16]+3*M[17]+7*M[18];if(l>=0&&B<=I&&B<=Q)return A8(e,u,t.subarray(l,l+c));var Z,ne,Y,ie;if($o(e,u,1+(Q<I)),u+=2,Q<I){Z=So(h,f,0),ne=h,Y=So(g,v,0),ie=g;var q=So(V,L,0);$o(e,u,S-257),$o(e,u+5,O-1),$o(e,u+10,E-4),u+=14;for(var N=0;N<E;++N)$o(e,u+3*N,V[tS[N]]);u+=3*E;for(var G=[x,A],P=0;P<2;++P)for(var U=G[P],N=0;N<U.length;++N){var K=U[N]&31;$o(e,u,q[K]),u+=V[K],K>15&&($o(e,u,U[N]>>5&127),u+=U[N]>>12)}}else Z=zce,ne=Ml,Y=Vce,ie=tm;for(var N=0;N<a;++N){var J=r[N];if(J>255){var K=J>>18&31;mf(e,u,Z[K+257]),u+=ne[K+257],K>7&&($o(e,u,J>>23&31),u+=Av[K]);var re=J&31;mf(e,u,Y[re]),u+=ie[re],re>3&&(mf(e,u,J>>5&8191),u+=Tv[re])}else mf(e,u,Z[J]),u+=ne[J]}return mf(e,u,Z[256]),u+ne[256]},Hce=new tC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),T8=new $r(0),Kce=function(t,e,n,r,i,s){var o=s.z||t.length,a=new $r(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var d=Hce[e-1],h=d>>13,f=d&8191,p=(1<<n)-1,g=s.p||new Wi(32768),v=s.h||new Wi(p+1),y=Math.ceil(n/3),x=2*y,S=function(Ie){return(t[Ie]^t[Ie+1]<<y^t[Ie+2]<<x)&p},C=new tC(25e3),A=new Wi(288),O=new Wi(32),M=0,N=0,D=s.i||0,V=0,L=s.w||0,E=0;D+2<o;++D){var B=S(D),I=D&32767,Q=v[B];if(g[I]=Q,v[B]=I,L<=D){var Z=o-D;if((M>7e3||V>24576)&&(Z>423||!c)){u=gE(t,l,0,C,A,O,N,V,E,D-E,u),V=M=N=0,E=D;for(var ne=0;ne<286;++ne)A[ne]=0;for(var ne=0;ne<30;++ne)O[ne]=0}var Y=2,ie=0,q=f,G=I-Q&32767;if(Z>2&&B==S(D-G))for(var P=Math.min(h,Z)-1,U=Math.min(32767,D),K=Math.min(258,Z);G<=U&&--q&&I!=Q;){if(t[D+Y]==t[D+Y-G]){for(var J=0;J<K&&t[D+J]==t[D+J-G];++J);if(J>Y){if(Y=J,ie=G,J>P)break;for(var re=Math.min(G,J-2),se=0,ne=0;ne<re;++ne){var ue=D-G+ne&32767,de=g[ue],xe=ue-de&32767;xe>se&&(se=xe,Q=ue)}}}I=Q,Q=g[I],G+=I-Q&32767}if(ie){C[V++]=268435456|nS[Y]<<18|pE[ie];var ve=nS[Y]&31,ke=pE[ie]&31;N+=Av[ve]+Tv[ke],++A[257+ve],++O[ke],L=D+Y,++M}else C[V++]=t[D],++A[t[D]]}}for(D=Math.max(D,L);D<o;++D)C[V++]=t[D],++A[t[D]];u=gE(t,l,c,C,A,O,N,V,E,D-E,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=v,s.p=g,s.i=D,s.w=L)}else{for(var D=s.w||0;D<o+c;D+=65535){var Te=D+65535;Te>=o&&(l[u/8|0]=c,Te=o),u=A8(l,u+1,t.subarray(D,Te))}s.i=o}return C8(a,0,r+nC(u)+i)},N8=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Gce=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new $r(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return Kce(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},P8=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Yce=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=N8();i.p(e.dictionary),P8(t,2,i.d())}},Xce=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&zs(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&zs(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function sS(t,e){e||(e={});var n=N8();n.p(t);var r=Gce(t,e,e.dictionary?6:2,4);return Yce(r,e),P8(r,r.length-4,n.d()),r}function Jce(t,e){return Wce(t.subarray(Xce(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Qce=typeof TextDecoder<"u"&&new TextDecoder,Zce=0;try{Qce.decode(T8,{stream:!0}),Zce=1}catch{}var ct=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function l2(){ct.console&&typeof ct.console.log=="function"&&ct.console.log.apply(ct.console,arguments)}var Ht={log:l2,warn:function(t){ct.console&&(typeof ct.console.warn=="function"?ct.console.warn.apply(ct.console,arguments):l2.call(null,arguments))},error:function(t){ct.console&&(typeof ct.console.error=="function"?ct.console.error.apply(ct.console,arguments):l2(t))}};function c2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){hc(r.response,e,n)},r.onerror=function(){Ht.error("could not download file")},r.send()}function yE(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function b0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var op,oS,hc=ct.saveAs||((typeof window>"u"?"undefined":Je(window))!=="object"||window!==ct?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ct.URL||ct.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?yE(i.href)?c2(t,e,n):b0(i,i.target="_blank"):b0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){b0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(yE(t))c2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){b0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Je(s)!=="object"&&(Ht.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return c2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ct.HTMLElement)||ct.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Je(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=ct.URL||ct.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function E8(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function u2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Or(n,r,i,s,e[0],7,-680876936),s=Or(s,n,r,i,e[1],12,-389564586),i=Or(i,s,n,r,e[2],17,606105819),r=Or(r,i,s,n,e[3],22,-1044525330),n=Or(n,r,i,s,e[4],7,-176418897),s=Or(s,n,r,i,e[5],12,1200080426),i=Or(i,s,n,r,e[6],17,-1473231341),r=Or(r,i,s,n,e[7],22,-45705983),n=Or(n,r,i,s,e[8],7,1770035416),s=Or(s,n,r,i,e[9],12,-1958414417),i=Or(i,s,n,r,e[10],17,-42063),r=Or(r,i,s,n,e[11],22,-1990404162),n=Or(n,r,i,s,e[12],7,1804603682),s=Or(s,n,r,i,e[13],12,-40341101),i=Or(i,s,n,r,e[14],17,-1502002290),n=Ir(n,r=Or(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ir(s,n,r,i,e[6],9,-1069501632),i=Ir(i,s,n,r,e[11],14,643717713),r=Ir(r,i,s,n,e[0],20,-373897302),n=Ir(n,r,i,s,e[5],5,-701558691),s=Ir(s,n,r,i,e[10],9,38016083),i=Ir(i,s,n,r,e[15],14,-660478335),r=Ir(r,i,s,n,e[4],20,-405537848),n=Ir(n,r,i,s,e[9],5,568446438),s=Ir(s,n,r,i,e[14],9,-1019803690),i=Ir(i,s,n,r,e[3],14,-187363961),r=Ir(r,i,s,n,e[8],20,1163531501),n=Ir(n,r,i,s,e[13],5,-1444681467),s=Ir(s,n,r,i,e[2],9,-51403784),i=Ir(i,s,n,r,e[7],14,1735328473),n=Rr(n,r=Ir(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Rr(s,n,r,i,e[8],11,-2022574463),i=Rr(i,s,n,r,e[11],16,1839030562),r=Rr(r,i,s,n,e[14],23,-35309556),n=Rr(n,r,i,s,e[1],4,-1530992060),s=Rr(s,n,r,i,e[4],11,1272893353),i=Rr(i,s,n,r,e[7],16,-155497632),r=Rr(r,i,s,n,e[10],23,-1094730640),n=Rr(n,r,i,s,e[13],4,681279174),s=Rr(s,n,r,i,e[0],11,-358537222),i=Rr(i,s,n,r,e[3],16,-722521979),r=Rr(r,i,s,n,e[6],23,76029189),n=Rr(n,r,i,s,e[9],4,-640364487),s=Rr(s,n,r,i,e[12],11,-421815835),i=Rr(i,s,n,r,e[15],16,530742520),n=jr(n,r=Rr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=jr(s,n,r,i,e[7],10,1126891415),i=jr(i,s,n,r,e[14],15,-1416354905),r=jr(r,i,s,n,e[5],21,-57434055),n=jr(n,r,i,s,e[12],6,1700485571),s=jr(s,n,r,i,e[3],10,-1894986606),i=jr(i,s,n,r,e[10],15,-1051523),r=jr(r,i,s,n,e[1],21,-2054922799),n=jr(n,r,i,s,e[8],6,1873313359),s=jr(s,n,r,i,e[15],10,-30611744),i=jr(i,s,n,r,e[6],15,-1560198380),r=jr(r,i,s,n,e[13],21,1309151649),n=jr(n,r,i,s,e[4],6,-145523070),s=jr(s,n,r,i,e[11],10,-1120210379),i=jr(i,s,n,r,e[2],15,718787259),r=jr(r,i,s,n,e[9],21,-343485551),t[0]=ll(n,t[0]),t[1]=ll(r,t[1]),t[2]=ll(i,t[2]),t[3]=ll(s,t[3])}function Nv(t,e,n,r,i,s){return e=ll(ll(e,t),ll(r,s)),ll(e<<i|e>>>32-i,n)}function Or(t,e,n,r,i,s,o){return Nv(e&n|~e&r,t,e,i,s,o)}function Ir(t,e,n,r,i,s,o){return Nv(e&r|n&~r,t,e,i,s,o)}function Rr(t,e,n,r,i,s,o){return Nv(e^n^r,t,e,i,s,o)}function jr(t,e,n,r,i,s,o){return Nv(n^(e|~r),t,e,i,s,o)}function M8(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)u2(r,eue(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(u2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,u2(r,i),r}function eue(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}op=ct.atob.bind(ct),oS=ct.btoa.bind(ct);var vE="0123456789abcdef".split("");function tue(t){for(var e="",n=0;n<4;n++)e+=vE[t>>8*n+4&15]+vE[t>>8*n&15];return e}function nue(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function aS(t){return M8(t).map(nue).join("")}var rue=function(t){for(var e=0;e<t.length;e++)t[e]=tue(t[e]);return t.join("")}(M8("hello"))!="5d41402abc4b2a76b9719d911017c592";function ll(t,e){if(rue){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lS(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=u,o=a[(a[h]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var bE={print:4,modify:8,copy:16,"annot-forms":32};function Ju(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(bE.perm!==void 0)throw new Error("Invalid permission: "+a);i+=bE[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=aS(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=lS(this.encryptionKey,this.padding)}function Qu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function xE(t){if(Je(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){ct.console&&Ht.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function u1(t){if(!(this instanceof u1))return new u1(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function L8(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function yc(t,e,n,r,i){if(!(this instanceof yc))return new yc(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,L8.call(this,r,i)}function wd(t,e,n,r,i){if(!(this instanceof wd))return new wd(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,L8.call(this,r,i)}function lt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;Je(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=xE;var p="1.3",g=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(k){p=k};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return v};var y=f.__private__.getPageFormat=function(k){return v[k]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},S=x.COMPAT;function C(){this.saveGraphicsState(),te(new Ye(De,0,0,-De,0,Sa()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),c="n",S=x.ADVANCED}function A(){this.restoreGraphicsState(),c="S",S=x.COMPAT}var O=f.__private__.combineFontStyleAndFontWeight=function(k,j){if(k=="bold"&&j=="normal"||k=="bold"&&j==400||k=="normal"&&j=="italic"||k=="bold"&&j=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return j&&(k=j==400||j==="normal"?k==="italic"?"italic":"normal":j!=700&&j!=="bold"||k!=="normal"?(j==700?"bold":j)+""+k:"bold"),k};f.advancedAPI=function(k){var j=S===x.COMPAT;return j&&C.call(this),typeof k!="function"||(k(this),j&&A.call(this)),this},f.compatAPI=function(k){var j=S===x.ADVANCED;return j&&A.call(this),typeof k!="function"||(k(this),j&&C.call(this)),this},f.isAdvancedAPI=function(){return S===x.ADVANCED};var M,N=function(k){if(S!==x.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=f.roundToPrecision=f.__private__.roundToPrecision=function(k,j){var ee=e||j;if(isNaN(k)||isNaN(ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(ee).replace(/0+$/,"")};M=f.hpf=f.__private__.hpf=typeof l=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return D(k,l)}:l==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return D(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return D(k,16)};var V=f.f2=f.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return D(k,2)},L=f.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return D(k,3)},E=f.scale=f.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return S===x.COMPAT?k*De:S===x.ADVANCED?k:void 0},B=function(k){return S===x.COMPAT?Sa()-k:S===x.ADVANCED?k:void 0},I=function(k){return E(B(k))};f.__private__.setPrecision=f.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var Q,Z="00000000000000000000000000000000",ne=f.__private__.getFileId=function(){return Z},Y=f.__private__.setFileId=function(k){return Z=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Pr=new Ju(u.userPermissions,u.userPassword,u.ownerPassword,Z)),Z};f.setFileId=function(k){return Y(k),this},f.getFileId=function(){return ne()};var ie=f.__private__.convertDateToPDFDate=function(k){var j=k.getTimezoneOffset(),ee=j<0?"+":"-",oe=Math.floor(Math.abs(j/60)),fe=Math.abs(j%60),be=[ee,K(oe),"'",K(fe),"'"].join("");return["D:",k.getFullYear(),K(k.getMonth()+1),K(k.getDate()),K(k.getHours()),K(k.getMinutes()),K(k.getSeconds()),be].join("")},q=f.__private__.convertPDFDateToDate=function(k){var j=parseInt(k.substr(2,4),10),ee=parseInt(k.substr(6,2),10)-1,oe=parseInt(k.substr(8,2),10),fe=parseInt(k.substr(10,2),10),be=parseInt(k.substr(12,2),10),Pe=parseInt(k.substr(14,2),10);return new Date(j,ee,oe,fe,be,Pe,0)},G=f.__private__.setCreationDate=function(k){var j;if(k===void 0&&(k=new Date),k instanceof Date)j=ie(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");j=k}return Q=j},P=f.__private__.getCreationDate=function(k){var j=Q;return k==="jsDate"&&(j=q(Q)),j};f.setCreationDate=function(k){return G(k),this},f.getCreationDate=function(k){return P(k)};var U,K=f.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},J=f.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},re=0,se=[],ue=[],de=0,xe=[],ve=[],ke=!1,Te=ue,Ie=function(){re=0,de=0,ue=[],se=[],xe=[],qn=xn(),wn=xn()};f.__private__.setCustomOutputDestination=function(k){ke=!0,Te=k};var ge=function(k){ke||(Te=k)};f.__private__.resetCustomOutputDestination=function(){ke=!1,Te=ue};var te=f.__private__.out=function(k){return k=k.toString(),de+=k.length+1,Te.push(k),Te},Ge=f.__private__.write=function(k){return te(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Be=f.__private__.getArrayBuffer=function(k){for(var j=k.length,ee=new ArrayBuffer(j),oe=new Uint8Array(ee);j--;)oe[j]=k.charCodeAt(j);return ee},Ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ae};var Ee=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(k){return Ee=S===x.ADVANCED?k/De:k,this};var Oe,Me=f.__private__.getFontSize=f.getFontSize=function(){return S===x.COMPAT?Ee:Ee*De},$e=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(k){return $e=k,this},f.__private__.getR2L=f.getR2L=function(){return $e};var Qe,it=f.__private__.setZoomMode=function(k){var j=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Oe=k;else if(isNaN(k)){if(j.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Oe=k}else Oe=parseInt(k,10)};f.__private__.getZoomMode=function(){return Oe};var pt,St=f.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Qe=k};f.__private__.getPageMode=function(){return Qe};var It=f.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');pt=k};f.__private__.getLayoutMode=function(){return pt},f.__private__.setDisplayMode=f.setDisplayMode=function(k,j,ee){return it(k),It(j),St(ee),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(k){if(Object.keys(et).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[k]},f.__private__.getDocumentProperties=function(){return et},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(k){for(var j in et)et.hasOwnProperty(j)&&k[j]&&(et[j]=k[j]);return this},f.__private__.setDocumentProperty=function(k,j){if(Object.keys(et).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[k]=j};var yt,De,Un,At,Ni,Ft={},Gt={},Zi=[],Rt={},No={},cn={},Pi={},Ns=null,un=0,ut=[],Tt=new xE(f),Ei=t.hotfixes||[],Mn={},ci={},gr=[],Ye=function k(j,ee,oe,fe,be,Pe){if(!(this instanceof k))return new k(j,ee,oe,fe,be,Pe);isNaN(j)&&(j=1),isNaN(ee)&&(ee=0),isNaN(oe)&&(oe=0),isNaN(fe)&&(fe=1),isNaN(be)&&(be=0),isNaN(Pe)&&(Pe=0),this._matrix=[j,ee,oe,fe,be,Pe]};Object.defineProperty(Ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ye.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(k)},Ye.prototype.multiply=function(k){var j=k.sx*this.sx+k.shy*this.shx,ee=k.sx*this.shy+k.shy*this.sy,oe=k.shx*this.sx+k.sy*this.shx,fe=k.shx*this.shy+k.sy*this.sy,be=k.tx*this.sx+k.ty*this.shx+this.tx,Pe=k.tx*this.shy+k.ty*this.sy+this.ty;return new Ye(j,ee,oe,fe,be,Pe)},Ye.prototype.decompose=function(){var k=this.sx,j=this.shy,ee=this.shx,oe=this.sy,fe=this.tx,be=this.ty,Pe=Math.sqrt(k*k+j*j),ze=(k/=Pe)*ee+(j/=Pe)*oe;ee-=k*ze,oe-=j*ze;var Xe=Math.sqrt(ee*ee+oe*oe);return ze/=Xe,k*(oe/=Xe)<j*(ee/=Xe)&&(k=-k,j=-j,ze=-ze,Pe=-Pe),{scale:new Ye(Pe,0,0,Xe,0,0),translate:new Ye(1,0,0,1,fe,be),rotate:new Ye(k,j,-j,k,0,0),skew:new Ye(1,0,ze,1,0,0)}},Ye.prototype.toString=function(k){return this.join(" ")},Ye.prototype.inversed=function(){var k=this.sx,j=this.shy,ee=this.shx,oe=this.sy,fe=this.tx,be=this.ty,Pe=1/(k*oe-j*ee),ze=oe*Pe,Xe=-j*Pe,mt=-ee*Pe,ht=k*Pe;return new Ye(ze,Xe,mt,ht,-ze*fe-mt*be,-Xe*fe-ht*be)},Ye.prototype.applyToPoint=function(k){var j=k.x*this.sx+k.y*this.shx+this.tx,ee=k.x*this.shy+k.y*this.sy+this.ty;return new xu(j,ee)},Ye.prototype.applyToRectangle=function(k){var j=this.applyToPoint(k),ee=this.applyToPoint(new xu(k.x+k.w,k.y+k.h));return new Ph(j.x,j.y,ee.x-j.x,ee.y-j.y)},Ye.prototype.clone=function(){var k=this.sx,j=this.shy,ee=this.shx,oe=this.sy,fe=this.tx,be=this.ty;return new Ye(k,j,ee,oe,fe,be)},f.Matrix=Ye;var ui=f.matrixMult=function(k,j){return j.multiply(k)},es=new Ye(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=es;var jt=function(k,j){if(!No[k]){var ee=(j instanceof yc?"Sh":"P")+(Object.keys(Rt).length+1).toString(10);j.id=ee,No[k]=ee,Rt[ee]=j,Tt.publish("addPattern",j)}};f.ShadingPattern=yc,f.TilingPattern=wd,f.addShadingPattern=function(k,j){return N("addShadingPattern()"),jt(k,j),this},f.beginTilingPattern=function(k){N("beginTilingPattern()"),$m(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},f.endTilingPattern=function(k,j){N("endTilingPattern()"),j.stream=ve[U].join(`
`),jt(k,j),Tt.publish("endTilingPattern",j),gr.pop().restore()};var bn=f.__private__.newObject=function(){var k=xn();return Mt(k,!0),k},xn=f.__private__.newObjectDeferred=function(){return re++,se[re]=function(){return de},re},Mt=function(k,j){return j=typeof j=="boolean"&&j,se[k]=de,j&&te(k+" 0 obj"),k},dn=f.__private__.newAdditionalObject=function(){var k={objId:xn(),content:""};return xe.push(k),k},qn=xn(),wn=xn(),Ar=f.__private__.decodeColorString=function(k){var j=k.split(" ");if(j.length!==2||j[1]!=="g"&&j[1]!=="G")j.length===5&&(j[4]==="k"||j[4]==="K")&&(j=[(1-j[0])*(1-j[3]),(1-j[1])*(1-j[3]),(1-j[2])*(1-j[3]),"r"]);else{var ee=parseFloat(j[0]);j=[ee,ee,ee,"r"]}for(var oe="#",fe=0;fe<3;fe++)oe+=("0"+Math.floor(255*parseFloat(j[fe])).toString(16)).slice(-2);return oe},Mi=f.__private__.encodeColorString=function(k){var j;typeof k=="string"&&(k={ch1:k});var ee=k.ch1,oe=k.ch2,fe=k.ch3,be=k.ch4,Pe=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ee=="string"&&ee.charAt(0)!=="#"){var ze=new E8(ee);if(ze.ok)ee=ze.toHex();else if(!/^\d*\.?\d*$/.test(ee))throw new Error('Invalid color "'+ee+'" passed to jsPDF.encodeColorString.')}if(typeof ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ee)&&(ee="#"+ee[1]+ee[1]+ee[2]+ee[2]+ee[3]+ee[3]),typeof ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ee)){var Xe=parseInt(ee.substr(1),16);ee=Xe>>16&255,oe=Xe>>8&255,fe=255&Xe}if(oe===void 0||be===void 0&&ee===oe&&oe===fe)if(typeof ee=="string")j=ee+" "+Pe[0];else switch(k.precision){case 2:j=V(ee/255)+" "+Pe[0];break;case 3:default:j=L(ee/255)+" "+Pe[0]}else if(be===void 0||Je(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return j=["1.","1.","1.",Pe[1]].join(" ");if(typeof ee=="string")j=[ee,oe,fe,Pe[1]].join(" ");else switch(k.precision){case 2:j=[V(ee/255),V(oe/255),V(fe/255),Pe[1]].join(" ");break;default:case 3:j=[L(ee/255),L(oe/255),L(fe/255),Pe[1]].join(" ")}}else if(typeof ee=="string")j=[ee,oe,fe,be,Pe[2]].join(" ");else switch(k.precision){case 2:j=[V(ee),V(oe),V(fe),V(be),Pe[2]].join(" ");break;case 3:default:j=[L(ee),L(oe),L(fe),L(be),Pe[2]].join(" ")}return j},Li=f.__private__.getFilters=function(){return o},Tr=f.__private__.putStream=function(k){var j=(k=k||{}).data||"",ee=k.filters||Li(),oe=k.alreadyAppliedFilters||[],fe=k.addLength1||!1,be=j.length,Pe=k.objectId,ze=function(Er){return Er};if(u!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ze=Pr.encryptor(Pe,0));var Xe={};ee===!0&&(ee=["FlateEncode"]);var mt=k.additionalKeyValues||[],ht=(Xe=lt.API.processDataByFilters!==void 0?lt.API.processDataByFilters(j,ee):{data:j,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(Xe.data.length!==0&&(mt.push({key:"Length",value:Xe.data.length}),fe===!0&&mt.push({key:"Length1",value:be})),ht.length!=0)if(ht.split("/").length-1==1)mt.push({key:"Filter",value:ht});else{mt.push({key:"Filter",value:"["+ht+"]"});for(var Et=0;Et<mt.length;Et+=1)if(mt[Et].key==="DecodeParms"){for(var pn=[],Sn=0;Sn<Xe.reverseChain.split("/").length-1;Sn+=1)pn.push("null");pn.push(mt[Et].value),mt[Et].value="["+pn.join(" ")+"]"}}te("<<");for(var Wn=0;Wn<mt.length;Wn++)te("/"+mt[Wn].key+" "+mt[Wn].value);te(">>"),Xe.data.length!==0&&(te("stream"),te(ze(Xe.data)),te("endstream"))},Oi=f.__private__.putPage=function(k){var j=k.number,ee=k.data,oe=k.objId,fe=k.contentsObjId;Mt(oe,!0),te("<</Type /Page"),te("/Parent "+k.rootDictionaryObjId+" 0 R"),te("/Resources "+k.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(M(k.mediaBox.bottomLeftX))+" "+parseFloat(M(k.mediaBox.bottomLeftY))+" "+M(k.mediaBox.topRightX)+" "+M(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&te("/CropBox ["+M(k.cropBox.bottomLeftX)+" "+M(k.cropBox.bottomLeftY)+" "+M(k.cropBox.topRightX)+" "+M(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&te("/BleedBox ["+M(k.bleedBox.bottomLeftX)+" "+M(k.bleedBox.bottomLeftY)+" "+M(k.bleedBox.topRightX)+" "+M(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&te("/TrimBox ["+M(k.trimBox.bottomLeftX)+" "+M(k.trimBox.bottomLeftY)+" "+M(k.trimBox.topRightX)+" "+M(k.trimBox.topRightY)+"]"),k.artBox!==null&&te("/ArtBox ["+M(k.artBox.bottomLeftX)+" "+M(k.artBox.bottomLeftY)+" "+M(k.artBox.topRightX)+" "+M(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&te("/UserUnit "+k.userUnit),Tt.publish("putPage",{objId:oe,pageContext:ut[j],pageNumber:j,page:ee}),te("/Contents "+fe+" 0 R"),te(">>"),te("endobj");var be=ee.join(`
`);return S===x.ADVANCED&&(be+=`
Q`),Mt(fe,!0),Tr({data:be,filters:Li(),objectId:fe}),te("endobj"),oe},Po=f.__private__.putPages=function(){var k,j,ee=[];for(k=1;k<=un;k++)ut[k].objId=xn(),ut[k].contentsObjId=xn();for(k=1;k<=un;k++)ee.push(Oi({number:k,data:ve[k],objId:ut[k].objId,contentsObjId:ut[k].contentsObjId,mediaBox:ut[k].mediaBox,cropBox:ut[k].cropBox,bleedBox:ut[k].bleedBox,trimBox:ut[k].trimBox,artBox:ut[k].artBox,userUnit:ut[k].userUnit,rootDictionaryObjId:qn,resourceDictionaryObjId:wn}));Mt(qn,!0),te("<</Type /Pages");var oe="/Kids [";for(j=0;j<un;j++)oe+=ee[j]+" 0 R ";te(oe+"]"),te("/Count "+un),te(">>"),te("endobj"),Tt.publish("postPutPages")},ba=function(k){Tt.publish("putFont",{font:k,out:te,newObject:bn,putStream:Tr}),k.isAlreadyPutted!==!0&&(k.objectNumber=bn(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Qu(k.postScriptName)),te("/Subtype /Type1"),typeof k.encoding=="string"&&te("/Encoding /"+k.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},Nr=function(){for(var k in Ft)Ft.hasOwnProperty(k)&&(d===!1||d===!0&&h.hasOwnProperty(k))&&ba(Ft[k])},uu=function(k){k.objectNumber=bn();var j=[];j.push({key:"Type",value:"/XObject"}),j.push({key:"Subtype",value:"/Form"}),j.push({key:"BBox",value:"["+[M(k.x),M(k.y),M(k.x+k.width),M(k.y+k.height)].join(" ")+"]"}),j.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var ee=k.pages[1].join(`
`);Tr({data:ee,additionalKeyValues:j,objectId:k.objectNumber}),te("endobj")},du=function(){for(var k in Mn)Mn.hasOwnProperty(k)&&uu(Mn[k])},km=function(k,j){var ee,oe=[],fe=1/(j-1);for(ee=0;ee<1;ee+=fe)oe.push(ee);if(oe.push(1),k[0].offset!=0){var be={offset:0,color:k[0].color};k.unshift(be)}if(k[k.length-1].offset!=1){var Pe={offset:1,color:k[k.length-1].color};k.push(Pe)}for(var ze="",Xe=0,mt=0;mt<oe.length;mt++){for(ee=oe[mt];ee>k[Xe+1].offset;)Xe++;var ht=k[Xe].offset,Et=(ee-ht)/(k[Xe+1].offset-ht),pn=k[Xe].color,Sn=k[Xe+1].color;ze+=J(Math.round((1-Et)*pn[0]+Et*Sn[0]).toString(16))+J(Math.round((1-Et)*pn[1]+Et*Sn[1]).toString(16))+J(Math.round((1-Et)*pn[2]+Et*Sn[2]).toString(16))}return ze.trim()},Pv=function(k,j){j||(j=21);var ee=bn(),oe=km(k.colors,j),fe=[];fe.push({key:"FunctionType",value:"0"}),fe.push({key:"Domain",value:"[0.0 1.0]"}),fe.push({key:"Size",value:"["+j+"]"}),fe.push({key:"BitsPerSample",value:"8"}),fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Tr({data:oe,additionalKeyValues:fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ee}),te("endobj"),k.objectNumber=bn(),te("<< /ShadingType "+k.type),te("/ColorSpace /DeviceRGB");var be="/Coords ["+M(parseFloat(k.coords[0]))+" "+M(parseFloat(k.coords[1]))+" ";k.type===2?be+=M(parseFloat(k.coords[2]))+" "+M(parseFloat(k.coords[3])):be+=M(parseFloat(k.coords[2]))+" "+M(parseFloat(k.coords[3]))+" "+M(parseFloat(k.coords[4]))+" "+M(parseFloat(k.coords[5])),te(be+="]"),k.matrix&&te("/Matrix ["+k.matrix.toString()+"]"),te("/Function "+ee+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Ev=function(k,j){var ee=xn(),oe=bn();j.push({resourcesOid:ee,objectOid:oe}),k.objectNumber=oe;var fe=[];fe.push({key:"Type",value:"/Pattern"}),fe.push({key:"PatternType",value:"1"}),fe.push({key:"PaintType",value:"1"}),fe.push({key:"TilingType",value:"1"}),fe.push({key:"BBox",value:"["+k.boundingBox.map(M).join(" ")+"]"}),fe.push({key:"XStep",value:M(k.xStep)}),fe.push({key:"YStep",value:M(k.yStep)}),fe.push({key:"Resources",value:ee+" 0 R"}),k.matrix&&fe.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Tr({data:k.stream,additionalKeyValues:fe,objectId:k.objectNumber}),te("endobj")},hu=function(k){var j;for(j in Rt)Rt.hasOwnProperty(j)&&(Rt[j]instanceof yc?Pv(Rt[j]):Rt[j]instanceof wd&&Ev(Rt[j],k))},_m=function(k){for(var j in k.objectNumber=bn(),te("<<"),k)switch(j){case"opacity":te("/ca "+V(k[j]));break;case"stroke-opacity":te("/CA "+V(k[j]))}te(">>"),te("endobj")},Mv=function(){var k;for(k in cn)cn.hasOwnProperty(k)&&_m(cn[k])},bh=function(){for(var k in te("/XObject <<"),Mn)Mn.hasOwnProperty(k)&&Mn[k].objectNumber>=0&&te("/"+k+" "+Mn[k].objectNumber+" 0 R");Tt.publish("putXobjectDict"),te(">>")},Lv=function(){Pr.oid=bn(),te("<<"),te("/Filter /Standard"),te("/V "+Pr.v),te("/R "+Pr.r),te("/U <"+Pr.toHexString(Pr.U)+">"),te("/O <"+Pr.toHexString(Pr.O)+">"),te("/P "+Pr.P),te(">>"),te("endobj")},Cm=function(){for(var k in te("/Font <<"),Ft)Ft.hasOwnProperty(k)&&(d===!1||d===!0&&h.hasOwnProperty(k))&&te("/"+k+" "+Ft[k].objectNumber+" 0 R");te(">>")},Ov=function(){if(Object.keys(Rt).length>0){for(var k in te("/Shading <<"),Rt)Rt.hasOwnProperty(k)&&Rt[k]instanceof yc&&Rt[k].objectNumber>=0&&te("/"+k+" "+Rt[k].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),te(">>")}},fu=function(k){if(Object.keys(Rt).length>0){for(var j in te("/Pattern <<"),Rt)Rt.hasOwnProperty(j)&&Rt[j]instanceof f.TilingPattern&&Rt[j].objectNumber>=0&&Rt[j].objectNumber<k&&te("/"+j+" "+Rt[j].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),te(">>")}},Iv=function(){if(Object.keys(cn).length>0){var k;for(k in te("/ExtGState <<"),cn)cn.hasOwnProperty(k)&&cn[k].objectNumber>=0&&te("/"+k+" "+cn[k].objectNumber+" 0 R");Tt.publish("putGStateDict"),te(">>")}},Ln=function(k){Mt(k.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Cm(),Ov(),fu(k.objectOid),Iv(),bh(),te(">>"),te("endobj")},Am=function(){var k=[];Nr(),Mv(),du(),hu(k),Tt.publish("putResources"),k.forEach(Ln),Ln({resourcesOid:wn,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources")},Tm=function(){Tt.publish("putAdditionalObjects");for(var k=0;k<xe.length;k++){var j=xe[k];Mt(j.objId,!0),te(j.content),te("endobj")}Tt.publish("postPutAdditionalObjects")},Nm=function(k){Gt[k.fontName]=Gt[k.fontName]||{},Gt[k.fontName][k.fontStyle]=k.id},xh=function(k,j,ee,oe,fe){var be={id:"F"+(Object.keys(Ft).length+1).toString(10),postScriptName:k,fontName:j,fontStyle:ee,encoding:oe,isStandardFont:fe||!1,metadata:{}};return Tt.publish("addFont",{font:be,instance:this}),Ft[be.id]=be,Nm(be),be.id},Rv=function(k){for(var j=0,ee=Ae.length;j<ee;j++){var oe=xh.call(this,k[j][0],k[j][1],k[j][2],Ae[j][3],!0);d===!1&&(h[oe]=!0);var fe=k[j][0].split("-");Nm({id:oe,fontName:fe[0],fontStyle:fe[1]||""})}Tt.publish("addFonts",{fonts:Ft,dictionary:Gt})},Ps=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(oe){var j=oe.stack||"";~j.indexOf(" at ")&&(j=j.split(" at ")[1]);var ee="Error in function "+j.split(`
`)[0].split("<")[0]+": "+oe.message;if(!ct.console)throw new Error(ee);ct.console.error(ee,oe),ct.alert&&alert(ee)}},k.foo.bar=k,k.foo},pu=function(k,j){var ee,oe,fe,be,Pe,ze,Xe,mt,ht;if(fe=(j=j||{}).sourceEncoding||"Unicode",Pe=j.outputEncoding,(j.autoencode||Pe)&&Ft[yt].metadata&&Ft[yt].metadata[fe]&&Ft[yt].metadata[fe].encoding&&(be=Ft[yt].metadata[fe].encoding,!Pe&&Ft[yt].encoding&&(Pe=Ft[yt].encoding),!Pe&&be.codePages&&(Pe=be.codePages[0]),typeof Pe=="string"&&(Pe=be[Pe]),Pe)){for(Xe=!1,ze=[],ee=0,oe=k.length;ee<oe;ee++)(mt=Pe[k.charCodeAt(ee)])?ze.push(String.fromCharCode(mt)):ze.push(k[ee]),ze[ee].charCodeAt(0)>>8&&(Xe=!0);k=ze.join("")}for(ee=k.length;Xe===void 0&&ee!==0;)k.charCodeAt(ee-1)>>8&&(Xe=!0),ee--;if(!Xe)return k;for(ze=j.noBOM?[]:[254,255],ee=0,oe=k.length;ee<oe;ee++){if((ht=(mt=k.charCodeAt(ee))>>8)>>8)throw new Error("Character at position "+ee+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ze.push(ht),ze.push(mt-(ht<<8))}return String.fromCharCode.apply(void 0,ze)},di=f.__private__.pdfEscape=f.pdfEscape=function(k,j){return pu(k,j).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wh=f.__private__.beginPage=function(k){ve[++un]=[],ut[un]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Em(un),ge(ve[U])},Pm=function(k,j){var ee,oe,fe;switch(n=j||n,typeof k=="string"&&(ee=y(k.toLowerCase()),Array.isArray(ee)&&(oe=ee[0],fe=ee[1])),Array.isArray(k)&&(oe=k[0]*De,fe=k[1]*De),isNaN(oe)&&(oe=i[0],fe=i[1]),(oe>14400||fe>14400)&&(Ht.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),fe=Math.min(14400,fe)),i=[oe,fe],n.substr(0,1)){case"l":fe>oe&&(i=[fe,oe]);break;case"p":oe>fe&&(i=[fe,oe])}wh(i),jm(Ch),te(Es),Th!==0&&te(Th+" J"),Nh!==0&&te(Nh+" j"),Tt.publish("addPage",{pageNumber:un})},jv=function(k){k>0&&k<=un&&(ve.splice(k,1),ut.splice(k,1),un--,U>un&&(U=un),this.setPage(U))},Em=function(k){k>0&&k<=un&&(U=k)},Dv=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return ve.length-1},Mm=function(k,j,ee){var oe,fe=void 0;return ee=ee||{},k=k!==void 0?k:Ft[yt].fontName,j=j!==void 0?j:Ft[yt].fontStyle,oe=k.toLowerCase(),Gt[oe]!==void 0&&Gt[oe][j]!==void 0?fe=Gt[oe][j]:Gt[k]!==void 0&&Gt[k][j]!==void 0?fe=Gt[k][j]:ee.disableWarning===!1&&Ht.warn("Unable to look up font label for font '"+k+"', '"+j+"'. Refer to getFontList() for available fonts."),fe||ee.noFallback||(fe=Gt.times[j])==null&&(fe=Gt.times.normal),fe},Fv=f.__private__.putInfo=function(){var k=bn(),j=function(oe){return oe};for(var ee in u!==null&&(j=Pr.encryptor(k,0)),te("<<"),te("/Producer ("+di(j("jsPDF "+lt.version))+")"),et)et.hasOwnProperty(ee)&&et[ee]&&te("/"+ee.substr(0,1).toUpperCase()+ee.substr(1)+" ("+di(j(et[ee]))+")");te("/CreationDate ("+di(j(Q))+")"),te(">>"),te("endobj")},Sh=f.__private__.putCatalog=function(k){var j=(k=k||{}).rootDictionaryObjId||qn;switch(bn(),te("<<"),te("/Type /Catalog"),te("/Pages "+j+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ee=""+Oe;ee.substr(ee.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&te("/OpenAction [3 0 R /XYZ null null "+V(Oe)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Qe&&te("/PageMode /"+Qe),Tt.publish("putCatalog"),te(">>"),te("endobj")},Bv=f.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(re+1)),te("/Root "+re+" 0 R"),te("/Info "+(re-1)+" 0 R"),u!==null&&te("/Encrypt "+Pr.oid+" 0 R"),te("/ID [ <"+Z+"> <"+Z+"> ]"),te(">>")},zv=f.__private__.putHeader=function(){te("%PDF-"+p),te("%")},$v=f.__private__.putXRef=function(){var k="0000000000";te("xref"),te("0 "+(re+1)),te("0000000000 65535 f ");for(var j=1;j<=re;j++)typeof se[j]=="function"?te((k+se[j]()).slice(-10)+" 00000 n "):se[j]!==void 0?te((k+se[j]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},Eo=f.__private__.buildDocument=function(){Ie(),ge(ue),Tt.publish("buildDocument"),zv(),Po(),Tm(),Am(),u!==null&&Lv(),Fv(),Sh();var k=de;return $v(),Bv(),te("startxref"),te(""+k),te("%%EOF"),ge(ve[U]),ue.join(`
`)},mu=f.__private__.getBlob=function(k){return new Blob([Be(k)],{type:"application/pdf"})},gu=f.output=f.__private__.output=Ps(function(k,j){switch(typeof(j=j||{})=="string"?j={filename:j}:j.filename=j.filename||"generated.pdf",k){case void 0:return Eo();case"save":f.save(j.filename);break;case"arraybuffer":return Be(Eo());case"blob":return mu(Eo());case"bloburi":case"bloburl":if(ct.URL!==void 0&&typeof ct.URL.createObjectURL=="function")return ct.URL&&ct.URL.createObjectURL(mu(Eo()))||void 0;Ht.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ee="",oe=Eo();try{ee=oS(oe)}catch{ee=oS(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+j.filename+";base64,"+ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';j.pdfObjectUrl&&(fe=j.pdfObjectUrl,be="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+fe+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(j)+");<\/script></body></html>",ze=ct.open();return ze!==null&&ze.document.write(Pe),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(j.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+j.filename+'" width="500px" height="400px" /></body></html>',mt=ct.open();if(mt!==null){mt.document.write(Xe);var ht=this;mt.document.documentElement.querySelector("#pdfViewer").onload=function(){mt.document.title=j.filename,mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ht.output("bloburl"))}}return mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ct)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",j)+'"></iframe></body></html>',pn=ct.open();if(pn!==null&&(pn.document.write(Et),pn.document.title=j.filename),pn||typeof safari>"u")return pn;break;case"datauri":case"dataurl":return ct.document.location.href=this.output("datauristring",j);default:return null}}),Lm=function(k){return Array.isArray(Ei)===!0&&Ei.indexOf(k)>-1};switch(r){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=Lm("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);De=r}var Pr=null;G(),Y();var Vv=function(k){return u!==null?Pr.encryptor(k,0):function(j){return j}},Om=f.__private__.getPageInfo=f.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[k].objId,pageNumber:k,pageContext:ut[k]}},dt=f.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var j in ut)if(ut[j].objId===k)break;return Om(j)},Uv=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ut[U].objId,pageNumber:U,pageContext:ut[U]}};f.addPage=function(){return Pm.apply(this,arguments),this},f.setPage=function(){return Em.apply(this,arguments),ge.call(this,ve[U]),this},f.insertPage=function(k){return this.addPage(),this.movePage(U,k),this},f.movePage=function(k,j){var ee,oe;if(k>j){ee=ve[k],oe=ut[k];for(var fe=k;fe>j;fe--)ve[fe]=ve[fe-1],ut[fe]=ut[fe-1];ve[j]=ee,ut[j]=oe,this.setPage(j)}else if(k<j){ee=ve[k],oe=ut[k];for(var be=k;be<j;be++)ve[be]=ve[be+1],ut[be]=ut[be+1];ve[j]=ee,ut[j]=oe,this.setPage(j)}return this},f.deletePage=function(){return jv.apply(this,arguments),this},f.__private__.text=f.text=function(k,j,ee,oe,fe){var be,Pe,ze,Xe,mt,ht,Et,pn,Sn,Wn=(oe=oe||{}).scope||this;if(typeof k=="number"&&typeof j=="number"&&(typeof ee=="string"||Array.isArray(ee))){var Er=ee;ee=j,j=k,k=Er}if(arguments[3]instanceof Ye?(N("The transform parameter of text() with a Matrix value"),Sn=fe):(ze=arguments[4],Xe=arguments[5],Je(Et=arguments[3])==="object"&&Et!==null||(typeof ze=="string"&&(Xe=ze,ze=null),typeof Et=="string"&&(Xe=Et,Et=null),typeof Et=="number"&&(ze=Et,Et=null),oe={flags:Et,angle:ze,align:Xe})),isNaN(j)||isNaN(ee)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Wn;var rr="",Ms=!1,Ii=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:ql,io=Wn.internal.scaleFactor;function Vm(Yt){return Yt=Yt.split("	").join(Array(oe.TabLen||9).join(" ")),di(Yt,Et)}function Oh(Yt){for(var Xt,In=Yt.concat(),Qn=[],Ro=In.length;Ro--;)typeof(Xt=In.shift())=="string"?Qn.push(Xt):Array.isArray(Yt)&&(Xt.length===1||Xt[1]===void 0&&Xt[2]===void 0)?Qn.push(Xt[0]):Qn.push([Xt[0],Xt[1],Xt[2]]);return Qn}function Ih(Yt,Xt){var In;if(typeof Yt=="string")In=Xt(Yt)[0];else if(Array.isArray(Yt)){for(var Qn,Ro,Vh=Yt.concat(),Mu=[],Km=Vh.length;Km--;)typeof(Qn=Vh.shift())=="string"?Mu.push(Xt(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(Ro=Xt(Qn[0],Qn[1],Qn[2]),Mu.push([Ro[0],Ro[1],Ro[2]]));In=Mu}return In}var Su=!1,Rh=!0;if(typeof k=="string")Su=!0;else if(Array.isArray(k)){var jh=k.concat();Pe=[];for(var ku,yr=jh.length;yr--;)(typeof(ku=jh.shift())!="string"||Array.isArray(ku)&&typeof ku[0]!="string")&&(Rh=!1);Su=Rh}if(Su===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var _u=Ee/Wn.internal.scaleFactor,Cu=_u*(Ii-1);switch(oe.baseline){case"bottom":ee-=Cu;break;case"top":ee+=_u-Cu;break;case"hanging":ee+=_u-2*Cu;break;case"middle":ee+=_u/2-Cu}if((ht=oe.maxWidth||0)>0&&(typeof k=="string"?k=Wn.splitTextToSize(k,ht):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Yt,Xt){return Yt.concat(Wn.splitTextToSize(Xt,ht))},[]))),be={text:k,x:j,y:ee,options:oe,mutex:{pdfEscape:di,activeFontKey:yt,fonts:Ft,activeFontSize:Ee}},Tt.publish("preProcessText",be),k=be.text,ze=(oe=be.options).angle,!(Sn instanceof Ye)&&ze&&typeof ze=="number"){ze*=Math.PI/180,oe.rotationDirection===0&&(ze=-ze),S===x.ADVANCED&&(ze=-ze);var Au=Math.cos(ze),Dh=Math.sin(ze);Sn=new Ye(Au,Dh,-Dh,Au,0,0)}else ze&&ze instanceof Ye&&(Sn=ze);S!==x.ADVANCED||Sn||(Sn=es),(mt=oe.charSpace||bu)!==void 0&&(rr+=M(E(mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pn=oe.horizontalScale)!==void 0&&(rr+=M(100*pn)+` Tz
`),oe.lang;var hi=-1,Zv=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Fh=Wn.internal.getCurrentPageInfo().pageContext;switch(Zv){case 0:case!1:case"fill":hi=0;break;case 1:case!0:case"stroke":hi=1;break;case 2:case"fillThenStroke":hi=2;break;case 3:case"invisible":hi=3;break;case 4:case"fillAndAddForClipping":hi=4;break;case 5:case"strokeAndAddPathForClipping":hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hi=6;break;case 7:case"addToPathForClipping":hi=7}var Um=Fh.usedRenderingMode!==void 0?Fh.usedRenderingMode:-1;hi!==-1?rr+=hi+` Tr
`:Um!==-1&&(rr+=`0 Tr
`),hi!==-1&&(Fh.usedRenderingMode=hi),Xe=oe.align||"left";var ts,Tu=Ee*Ii,qm=Wn.internal.pageSize.getWidth(),Wm=Ft[yt];mt=oe.charSpace||bu,ht=oe.maxWidth||0,Et=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var ka=[],Kl=function(Yt){return Wn.getStringUnitWidth(Yt,{font:Wm,charSpace:mt,fontSize:Ee,doKerning:!1})*Ee/io};if(Object.prototype.toString.call(k)==="[object Array]"){var fi;Pe=Oh(k),Xe!=="left"&&(ts=Pe.map(Kl));var Xr,_a=0;if(Xe==="right"){j-=ts[0],k=[],yr=Pe.length;for(var Lo=0;Lo<yr;Lo++)Lo===0?(Xr=ro(j),fi=Mo(ee)):(Xr=E(_a-ts[Lo]),fi=-Tu),k.push([Pe[Lo],Xr,fi]),_a=ts[Lo]}else if(Xe==="center"){j-=ts[0]/2,k=[],yr=Pe.length;for(var Oo=0;Oo<yr;Oo++)Oo===0?(Xr=ro(j),fi=Mo(ee)):(Xr=E((_a-ts[Oo])/2),fi=-Tu),k.push([Pe[Oo],Xr,fi]),_a=ts[Oo]}else if(Xe==="left"){k=[],yr=Pe.length;for(var Nu=0;Nu<yr;Nu++)k.push(Pe[Nu])}else if(Xe==="justify"&&Wm.encoding==="Identity-H"){k=[],yr=Pe.length,ht=ht!==0?ht:qm;for(var Io=0,On=0;On<yr;On++)if(fi=On===0?Mo(ee):-Tu,Xr=On===0?ro(j):Io,On<yr-1){var Bh=E((ht-ts[On])/(Pe[On].split(" ").length-1)),Jr=Pe[On].split(" ");k.push([Jr[0]+" ",Xr,fi]),Io=0;for(var ns=1;ns<Jr.length;ns++){var Pu=(Kl(Jr[ns-1]+" "+Jr[ns])-Kl(Jr[ns]))*io+Bh;ns==Jr.length-1?k.push([Jr[ns],Pu,0]):k.push([Jr[ns]+" ",Pu,0]),Io-=Pu}}else k.push([Pe[On],Xr,fi]);k.push(["",Io,0])}else{if(Xe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],yr=Pe.length,ht=ht!==0?ht:qm,On=0;On<yr;On++)fi=On===0?Mo(ee):-Tu,Xr=On===0?ro(j):0,On<yr-1?ka.push(M(E((ht-ts[On])/(Pe[On].split(" ").length-1)))):ka.push(0),k.push([Pe[On],Xr,fi])}}var Hm=typeof oe.R2L=="boolean"?oe.R2L:$e;Hm===!0&&(k=Ih(k,function(Yt,Xt,In){return[Yt.split("").reverse().join(""),Xt,In]})),be={text:k,x:j,y:ee,options:oe,mutex:{pdfEscape:di,activeFontKey:yt,fonts:Ft,activeFontSize:Ee}},Tt.publish("postProcessText",be),k=be.text,Ms=be.mutex.isHex||!1;var zh=Ft[yt].encoding;zh!=="WinAnsiEncoding"&&zh!=="StandardEncoding"||(k=Ih(k,function(Yt,Xt,In){return[Vm(Yt),Xt,In]})),Pe=Oh(k),k=[];for(var Gl,Yl,Ca,Xl=0,Eu=1,Jl=Array.isArray(Pe[0])?Eu:Xl,Aa="",$h=function(Yt,Xt,In){var Qn="";return In instanceof Ye?(In=typeof oe.angle=="number"?ui(In,new Ye(1,0,0,1,Yt,Xt)):ui(new Ye(1,0,0,1,Yt,Xt),In),S===x.ADVANCED&&(In=ui(new Ye(1,0,0,-1,0,0),In)),Qn=In.join(" ")+` Tm
`):Qn=M(Yt)+" "+M(Xt)+` Td
`,Qn},rs=0;rs<Pe.length;rs++){switch(Aa="",Jl){case Eu:Ca=(Ms?"<":"(")+Pe[rs][0]+(Ms?">":")"),Gl=parseFloat(Pe[rs][1]),Yl=parseFloat(Pe[rs][2]);break;case Xl:Ca=(Ms?"<":"(")+Pe[rs]+(Ms?">":")"),Gl=ro(j),Yl=Mo(ee)}ka!==void 0&&ka[rs]!==void 0&&(Aa=ka[rs]+` Tw
`),rs===0?k.push(Aa+$h(Gl,Yl,Sn)+Ca):Jl===Xl?k.push(Aa+Ca):Jl===Eu&&k.push(Aa+$h(Gl,Yl,Sn)+Ca)}k=Jl===Xl?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var is=`BT
/`;return is+=yt+" "+Ee+` Tf
`,is+=M(Ee*Ii)+` TL
`,is+=Wl+`
`,is+=rr,is+=k,te(is+="ET"),h[yt]=!0,Wn};var qv=f.__private__.clip=f.clip=function(k){return te(k==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return qv("evenodd")},f.__private__.discardPath=f.discardPath=function(){return te("n"),this};var no=f.__private__.isValidStyle=function(k){var j=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(j=!0),j};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(k){return no(k)&&(c=k),this};var Im=f.__private__.getStyle=f.getStyle=function(k){var j=c;switch(k){case"D":case"S":j="S";break;case"F":j="f";break;case"FD":case"DF":j="B";break;case"f":case"f*":case"B":case"B*":j=k}return j},Rm=f.close=function(){return te("h"),this};f.stroke=function(){return te("S"),this},f.fill=function(k){return yu("f",k),this},f.fillEvenOdd=function(k){return yu("f*",k),this},f.fillStroke=function(k){return yu("B",k),this},f.fillStrokeEvenOdd=function(k){return yu("B*",k),this};var yu=function(k,j){Je(j)==="object"?Hv(j,k):te(k)},kh=function(k){k===null||S===x.ADVANCED&&k===void 0||(k=Im(k),te(k))};function Wv(k,j,ee,oe,fe){var be=new wd(j||this.boundingBox,ee||this.xStep,oe||this.yStep,this.gState,fe||this.matrix);be.stream=this.stream;var Pe=k+"$$"+this.cloneIndex+++"$$";return jt(Pe,be),be}var Hv=function(k,j){var ee=No[k.key],oe=Rt[ee];if(oe instanceof yc)te("q"),te(Kv(j)),oe.gState&&f.setGState(oe.gState),te(k.matrix.toString()+" cm"),te("/"+ee+" sh"),te("Q");else if(oe instanceof wd){var fe=new Ye(1,0,0,-1,0,Sa());k.matrix&&(fe=fe.multiply(k.matrix||es),ee=Wv.call(oe,k.key,k.boundingBox,k.xStep,k.yStep,fe).id),te("q"),te("/Pattern cs"),te("/"+ee+" scn"),oe.gState&&f.setGState(oe.gState),te(j),te("Q")}},Kv=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_h=f.moveTo=function(k,j){return te(M(E(k))+" "+M(I(j))+" m"),this},Ul=f.lineTo=function(k,j){return te(M(E(k))+" "+M(I(j))+" l"),this},xa=f.curveTo=function(k,j,ee,oe,fe,be){return te([M(E(k)),M(I(j)),M(E(ee)),M(I(oe)),M(E(fe)),M(I(be)),"c"].join(" ")),this};f.__private__.line=f.line=function(k,j,ee,oe,fe){if(isNaN(k)||isNaN(j)||isNaN(ee)||isNaN(oe)||!no(fe))throw new Error("Invalid arguments passed to jsPDF.line");return S===x.COMPAT?this.lines([[ee-k,oe-j]],k,j,[1,1],fe||"S"):this.lines([[ee-k,oe-j]],k,j,[1,1]).stroke()},f.__private__.lines=f.lines=function(k,j,ee,oe,fe,be){var Pe,ze,Xe,mt,ht,Et,pn,Sn,Wn,Er,rr,Ms;if(typeof k=="number"&&(Ms=ee,ee=j,j=k,k=Ms),oe=oe||[1,1],be=be||!1,isNaN(j)||isNaN(ee)||!Array.isArray(k)||!Array.isArray(oe)||!no(fe)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_h(j,ee),Pe=oe[0],ze=oe[1],mt=k.length,Er=j,rr=ee,Xe=0;Xe<mt;Xe++)(ht=k[Xe]).length===2?(Er=ht[0]*Pe+Er,rr=ht[1]*ze+rr,Ul(Er,rr)):(Et=ht[0]*Pe+Er,pn=ht[1]*ze+rr,Sn=ht[2]*Pe+Er,Wn=ht[3]*ze+rr,Er=ht[4]*Pe+Er,rr=ht[5]*ze+rr,xa(Et,pn,Sn,Wn,Er,rr));return be&&Rm(),kh(fe),this},f.path=function(k){for(var j=0;j<k.length;j++){var ee=k[j],oe=ee.c;switch(ee.op){case"m":_h(oe[0],oe[1]);break;case"l":Ul(oe[0],oe[1]);break;case"c":xa.apply(this,oe);break;case"h":Rm()}}return this},f.__private__.rect=f.rect=function(k,j,ee,oe,fe){if(isNaN(k)||isNaN(j)||isNaN(ee)||isNaN(oe)||!no(fe))throw new Error("Invalid arguments passed to jsPDF.rect");return S===x.COMPAT&&(oe=-oe),te([M(E(k)),M(I(j)),M(E(ee)),M(E(oe)),"re"].join(" ")),kh(fe),this},f.__private__.triangle=f.triangle=function(k,j,ee,oe,fe,be,Pe){if(isNaN(k)||isNaN(j)||isNaN(ee)||isNaN(oe)||isNaN(fe)||isNaN(be)||!no(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ee-k,oe-j],[fe-ee,be-oe],[k-fe,j-be]],k,j,[1,1],Pe,!0),this},f.__private__.roundedRect=f.roundedRect=function(k,j,ee,oe,fe,be,Pe){if(isNaN(k)||isNaN(j)||isNaN(ee)||isNaN(oe)||isNaN(fe)||isNaN(be)||!no(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return fe=Math.min(fe,.5*ee),be=Math.min(be,.5*oe),this.lines([[ee-2*fe,0],[fe*ze,0,fe,be-be*ze,fe,be],[0,oe-2*be],[0,be*ze,-fe*ze,be,-fe,be],[2*fe-ee,0],[-fe*ze,0,-fe,-be*ze,-fe,-be],[0,2*be-oe],[0,-be*ze,fe*ze,-be,fe,-be]],k+fe,j,[1,1],Pe,!0),this},f.__private__.ellipse=f.ellipse=function(k,j,ee,oe,fe){if(isNaN(k)||isNaN(j)||isNaN(ee)||isNaN(oe)||!no(fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*ee,Pe=4/3*(Math.SQRT2-1)*oe;return _h(k+ee,j),xa(k+ee,j-Pe,k+be,j-oe,k,j-oe),xa(k-be,j-oe,k-ee,j-Pe,k-ee,j),xa(k-ee,j+Pe,k-be,j+oe,k,j+oe),xa(k+be,j+oe,k+ee,j+Pe,k+ee,j),kh(fe),this},f.__private__.circle=f.circle=function(k,j,ee,oe){if(isNaN(k)||isNaN(j)||isNaN(ee)||!no(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,j,ee,ee,oe)},f.setFont=function(k,j,ee){return ee&&(j=O(j,ee)),yt=Mm(k,j,{disableWarning:!1}),this};var Gv=f.__private__.getFont=f.getFont=function(){return Ft[Mm.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var k,j,ee={};for(k in Gt)if(Gt.hasOwnProperty(k))for(j in ee[k]=[],Gt[k])Gt[k].hasOwnProperty(j)&&ee[k].push(j);return ee},f.addFont=function(k,j,ee,oe,fe){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?fe=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(ee=O(ee,oe)),fe=fe||"Identity-H",xh.call(this,k,j,ee,fe)};var ql,Ch=t.lineWidth||.200025,vu=f.__private__.getLineWidth=f.getLineWidth=function(){return Ch},jm=f.__private__.setLineWidth=f.setLineWidth=function(k){return Ch=k,te(M(E(k))+" w"),this};f.__private__.setLineDash=lt.API.setLineDash=lt.API.setLineDashPattern=function(k,j){if(k=k||[],j=j||0,isNaN(j)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(ee){return M(E(ee))}).join(" "),j=M(E(j)),te("["+k+"] "+j+" d"),this};var Dm=f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*ql};f.__private__.getLineHeight=f.getLineHeight=function(){return Ee*ql};var Fm=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(ql=k),this},Bm=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ql};Fm(t.lineHeight);var ro=f.__private__.getHorizontalCoordinate=function(k){return E(k)},Mo=f.__private__.getVerticalCoordinate=function(k){return S===x.ADVANCED?k:ut[U].mediaBox.topRightY-ut[U].mediaBox.bottomLeftY-E(k)},Yv=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(k){return M(ro(k))},wa=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(k){return M(Mo(k))},Es=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ar(Es)},f.__private__.setStrokeColor=f.setDrawColor=function(k,j,ee,oe){return Es=Mi({ch1:k,ch2:j,ch3:ee,ch4:oe,pdfColorType:"draw",precision:2}),te(Es),this};var Ah=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ar(Ah)},f.__private__.setFillColor=f.setFillColor=function(k,j,ee,oe){return Ah=Mi({ch1:k,ch2:j,ch3:ee,ch4:oe,pdfColorType:"fill",precision:2}),te(Ah),this};var Wl=t.textColor||"0 g",Xv=f.__private__.getTextColor=f.getTextColor=function(){return Ar(Wl)};f.__private__.setTextColor=f.setTextColor=function(k,j,ee,oe){return Wl=Mi({ch1:k,ch2:j,ch3:ee,ch4:oe,pdfColorType:"text",precision:3}),this};var bu=t.charSpace,Jv=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(bu||0)};f.__private__.setCharSpace=f.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bu=k,this};var Th=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(k){var j=f.CapJoinStyles[k];if(j===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Th=j,te(j+" J"),this};var Nh=0;f.__private__.setLineJoin=f.setLineJoin=function(k){var j=f.CapJoinStyles[k];if(j===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nh=j,te(j+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(M(E(k))+" M"),this},f.GState=u1,f.setGState=function(k){(k=typeof k=="string"?cn[Pi[k]]:zm(null,k)).equals(Ns)||(te("/"+k.id+" gs"),Ns=k)};var zm=function(k,j){if(!k||!Pi[k]){var ee=!1;for(var oe in cn)if(cn.hasOwnProperty(oe)&&cn[oe].equals(j)){ee=!0;break}if(ee)j=cn[oe];else{var fe="GS"+(Object.keys(cn).length+1).toString(10);cn[fe]=j,j.id=fe}return k&&(Pi[k]=j.id),Tt.publish("addGState",j),j}};f.addGState=function(k,j){return zm(k,j),this},f.saveGraphicsState=function(){return te("q"),Zi.push({key:yt,size:Ee,color:Wl}),this},f.restoreGraphicsState=function(){te("Q");var k=Zi.pop();return yt=k.key,Ee=k.size,Wl=k.color,Ns=null,this},f.setCurrentTransformationMatrix=function(k){return te(k.toString()+" cm"),this},f.comment=function(k){return te("#"+k),this};var xu=function(k,j){var ee=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ee},set:function(be){isNaN(be)||(ee=parseFloat(be))}});var oe=j||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(be){isNaN(be)||(oe=parseFloat(be))}});var fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return fe},set:function(be){fe=be.toString()}}),this},Ph=function(k,j,ee,oe){xu.call(this,k,j),this.type="rect";var fe=ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return fe},set:function(Pe){isNaN(Pe)||(fe=parseFloat(Pe))}});var be=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(Pe){isNaN(Pe)||(be=parseFloat(Pe))}}),this},Eh=function(){this.page=un,this.currentPage=U,this.pages=ve.slice(0),this.pagesContext=ut.slice(0),this.x=Un,this.y=At,this.matrix=Ni,this.width=Hl(U),this.height=Sa(U),this.outputDestination=Te,this.id="",this.objectNumber=-1};Eh.prototype.restore=function(){un=this.page,U=this.currentPage,ut=this.pagesContext,ve=this.pages,Un=this.x,At=this.y,Ni=this.matrix,Mh(U,this.width),Lh(U,this.height),Te=this.outputDestination};var $m=function(k,j,ee,oe,fe){gr.push(new Eh),un=U=0,ve=[],Un=k,At=j,Ni=fe,wh([ee,oe])},Qv=function(k){if(ci[k])gr.pop().restore();else{var j=new Eh,ee="Xo"+(Object.keys(Mn).length+1).toString(10);j.id=ee,ci[k]=ee,Mn[ee]=j,Tt.publish("addFormObject",j),gr.pop().restore()}};for(var wu in f.beginFormObject=function(k,j,ee,oe,fe){return $m(k,j,ee,oe,fe),this},f.endFormObject=function(k){return Qv(k),this},f.doFormObject=function(k,j){var ee=Mn[ci[k]];return te("q"),te(j.toString()+" cm"),te("/"+ee.id+" Do"),te("Q"),this},f.getFormObject=function(k){var j=Mn[ci[k]];return{x:j.x,y:j.y,width:j.width,height:j.height,matrix:j.matrix}},f.save=function(k,j){return k=k||"generated.pdf",(j=j||{}).returnPromise=j.returnPromise||!1,j.returnPromise===!1?(hc(mu(Eo()),k),typeof hc.unload=="function"&&ct.setTimeout&&setTimeout(hc.unload,911),this):new Promise(function(ee,oe){try{var fe=hc(mu(Eo()),k);typeof hc.unload=="function"&&ct.setTimeout&&setTimeout(hc.unload,911),ee(fe)}catch(be){oe(be.message)}})},lt.API)lt.API.hasOwnProperty(wu)&&(wu==="events"&&lt.API.events.length?function(k,j){var ee,oe,fe;for(fe=j.length-1;fe!==-1;fe--)ee=j[fe][0],oe=j[fe][1],k.subscribe.apply(k,[ee].concat(typeof oe=="function"?[oe]:oe))}(Tt,lt.API.events):f[wu]=lt.API[wu]);var Hl=f.getPageWidth=function(k){return(ut[k=k||U].mediaBox.topRightX-ut[k].mediaBox.bottomLeftX)/De},Mh=f.setPageWidth=function(k,j){ut[k].mediaBox.topRightX=j*De+ut[k].mediaBox.bottomLeftX},Sa=f.getPageHeight=function(k){return(ut[k=k||U].mediaBox.topRightY-ut[k].mediaBox.bottomLeftY)/De},Lh=f.setPageHeight=function(k,j){ut[k].mediaBox.topRightY=j*De+ut[k].mediaBox.bottomLeftY};return f.internal={pdfEscape:di,getStyle:Im,getFont:Gv,getFontSize:Me,getCharSpace:Jv,getTextColor:Xv,getLineHeight:Dm,getLineHeightFactor:Bm,getLineWidth:vu,write:Ge,getHorizontalCoordinate:ro,getVerticalCoordinate:Mo,getCoordinateString:Yv,getVerticalCoordinateString:wa,collections:{},newObject:bn,newAdditionalObject:dn,newObjectDeferred:xn,newObjectDeferredBegin:Mt,getFilters:Li,putStream:Tr,events:Tt,scaleFactor:De,pageSize:{getWidth:function(){return Hl(U)},setWidth:function(k){Mh(U,k)},getHeight:function(){return Sa(U)},setHeight:function(k){Lh(U,k)}},encryptionOptions:u,encryption:Pr,getEncryptor:Vv,output:gu,getNumberOfPages:Dv,pages:ve,out:te,f2:V,f3:L,getPageInfo:Om,getPageInfoByObjId:dt,getCurrentPageInfo:Uv,getPDFVersion:g,Point:xu,Rectangle:Ph,Matrix:Ye,hasHotfix:Lm},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Hl(U)},set:function(k){Mh(U,k)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Sa(U)},set:function(k){Lh(U,k)},enumerable:!0,configurable:!0}),Rv.call(f,Ae),yt="F1",Pm(i,n),Tt.publish("initialized"),f}Ju.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ju.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ju.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ju.prototype.processOwnerPassword=function(t,e){return lS(aS(e).substr(0,5),t)},Ju.prototype.encryptor=function(t,e){var n=aS(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return lS(n,r)}},u1.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Je(t)!==Je(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},lt.API={events:[]},lt.version="2.5.2";var _n=lt.API,rC=1,cu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ft=function(t){return t.toFixed(2)},Da=function(t){return t.toFixed(5)};_n.__acroform__={};var Ti=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},wE=function(t){return t*rC},lo=function(t){var e=new I8,n=qe.internal.getHeight(t)||0,r=qe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ft(r)),Number(ft(n))],e},iue=_n.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},sue=_n.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},oue=_n.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Fn=_n.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oue(t,e-1)},Bn=_n.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iue(t,e-1)},zn=_n.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sue(t,e-1)},aue=_n.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(ft(l.lowerLeft_X)),Number(ft(l.lowerLeft_Y)),Number(ft(l.upperRight_X)),Number(ft(l.upperRight_Y))]},lue=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=cS(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ft(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=lo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},cS=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(L){return L.split(`
`)}):i.map(function(L){return[L]});var s=n,o=qe.internal.getHeight(t)||0;o=o<0?-o:o;var a=qe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(L,E,B){if(L+1<i.length){var I=E+" "+i[L+1][0];return x0(I,t,B).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,d=x0("3",t,s).height,h=t.multiline?o-s:(o-d)/2,f=h+=2,p=0,g=0,v=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+x0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var y="",x=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var C=!1;if(i[S].length!==1&&v!==i[S].length-1){if((d+2)*(x+2)+2>o)continue e;y+=i[S][v],C=!0,g=S,S--}else{y=(y+=i[S][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var A=parseInt(S),O=l(A,y,s),M=S>=i.length-1;if(O&&!M){y+=" ",v=0;continue}if(O||M){if(M)g=A;else if(t.multiline&&(d+2)*(x+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(x+2)+2>o)continue e;g=A}}for(var N="",D=p;D<=g;D++){var V=i[D];if(t.multiline){if(D===g){N+=V[v]+" ",v=(v+1)%V.length;continue}if(D===p){N+=V[V.length-1]+" ";continue}}N+=V[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=x0(N,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=ft(c)+" "+ft(f)+` Td
`,e+="("+cu(N)+`) Tj
`,e+=-ft(c)+` 0 Td
`,f=-(s+2),u=0,p=C?g:g+1,x++,y=""}break}return r.text=e,r.fontSize=s,r},x0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},cue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uue=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},due=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Je(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},hue=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(eo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(cue)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rC=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new R8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&uue(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=aue(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=qe.createDefaultAppearanceStream(a),Je(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=lue(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var p=f[o];typeof p=="function"&&(p=p.call(i,a)),d+="/"+o+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=f)=="function"&&(p=p.call(i,a)),d+="/"+o+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&due(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},O8=_n.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Je(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+cu(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},d2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+cu(r(t))+")"},go=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};go.prototype.toString=function(){return this.objId+" 0 R"},go.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},go.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:O8(i,this.objId,this.scope)}):i instanceof go?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var I8=function(){go.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ti(I8,go);var R8=function(){go.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cu(n(t))+")"}},set:function(n){t=n}})};Ti(R8,go);var eo=function t(){go.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fn(e,3)},set:function(y){y?this.F=Bn(e,3):this.F=zn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');n=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(y){r=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof d1)return;s="FieldObject"+t.FieldNum++}var y=function(x){return x};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+cu(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/rC:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof d1||this instanceof Vc))return d2(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof cr?h:d2(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof cr?y:y.substr(0,1)==="("?Hu(y.substr(1,y.length-2)):Hu(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof cr?Hu(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof cr?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof cr?f:d2(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof cr?y:y.substr(0,1)==="("?Hu(y.substr(1,y.length-2)):Hu(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof cr?Hu(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof cr?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(y){p=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,1)},set:function(y){y?this.Ff=Bn(this.Ff,1):this.Ff=zn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,2)},set:function(y){y?this.Ff=Bn(this.Ff,2):this.Ff=zn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,3)},set:function(y){y?this.Ff=Bn(this.Ff,3):this.Ff=zn(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Ti(eo,go);var Id=function(){eo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return O8(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,18)},set:function(n){n?this.Ff=Bn(this.Ff,18):this.Ff=zn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Bn(this.Ff,19):this.Ff=zn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,20)},set:function(n){n?(this.Ff=Bn(this.Ff,20),e.sort()):this.Ff=zn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,22)},set:function(n){n?this.Ff=Bn(this.Ff,22):this.Ff=zn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(n){n?this.Ff=Bn(this.Ff,23):this.Ff=zn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,27)},set:function(n){n?this.Ff=Bn(this.Ff,27):this.Ff=zn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ti(Id,eo);var Rd=function(){Id.call(this),this.fontName="helvetica",this.combo=!1};Ti(Rd,Id);var jd=function(){Rd.call(this),this.combo=!0};Ti(jd,Rd);var Z0=function(){jd.call(this),this.edit=!0};Ti(Z0,jd);var cr=function(){eo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,15)},set:function(n){n?this.Ff=Bn(this.Ff,15):this.Ff=zn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,16)},set:function(n){n?this.Ff=Bn(this.Ff,16):this.Ff=zn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,17)},set:function(n){n?this.Ff=Bn(this.Ff,17):this.Ff=zn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(n){n?this.Ff=Bn(this.Ff,26):this.Ff=zn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+cu(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Je(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ti(cr,eo);var ey=function(){cr.call(this),this.pushButton=!0};Ti(ey,cr);var Dd=function(){cr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ti(Dd,cr);var d1=function(){var t,e;eo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+cu(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Je(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=qe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ti(d1,eo),Dd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Dd.prototype.createOption=function(t){var e=new d1;return e.Parent=this,e.optionName=t,this.Kids.push(e),fue.call(this.scope,e),e};var ty=function(){cr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=qe.CheckBox.createAppearanceStream()};Ti(ty,cr);var Vc=function(){eo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,13)},set:function(e){e?this.Ff=Bn(this.Ff,13):this.Ff=zn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,21)},set:function(e){e?this.Ff=Bn(this.Ff,21):this.Ff=zn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(e){e?this.Ff=Bn(this.Ff,23):this.Ff=zn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,24)},set:function(e){e?this.Ff=Bn(this.Ff,24):this.Ff=zn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,25)},set:function(e){e?this.Ff=Bn(this.Ff,25):this.Ff=zn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(e){e?this.Ff=Bn(this.Ff,26):this.Ff=zn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ti(Vc,eo);var ny=function(){Vc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,14)},set:function(t){t?this.Ff=Bn(this.Ff,14):this.Ff=zn(this.Ff,14)}}),this.password=!0};Ti(ny,Vc);var qe={CheckBox:{createAppearanceStream:function(){return{N:{On:qe.CheckBox.YesNormal},D:{On:qe.CheckBox.YesPushDown,Off:qe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=cS(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ft(qe.internal.getWidth(t))+" "+ft(qe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ft(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=qe.internal.getHeight(t),o=qe.internal.getWidth(t),a=cS(t,t.caption);return i.push("1 g"),i.push("0 0 "+ft(o)+" "+ft(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ft(o-1)+" "+ft(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ft(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ft(qe.internal.getWidth(t))+" "+ft(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Circle.YesNormal,e.D[t]=qe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=qe.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Da(qe.internal.getWidth(t)/2)+" "+Da(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*qe.internal.Bezier_C).toFixed(5)),o=Number((r*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Da(qe.internal.getWidth(t)/2)+" "+Da(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Da(qe.internal.getWidth(t)/2)+" "+Da(qe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=qe.internal.getWidth(t)<=qe.internal.getHeight(t)?qe.internal.getWidth(t)/4:qe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*qe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Da(qe.internal.getWidth(t)/2)+" "+Da(qe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:qe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=qe.RadioButton.Cross.YesNormal,e.D[t]=qe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=qe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ft(qe.internal.getWidth(t)-2)+" "+ft(qe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ft(r.x1.x)+" "+ft(r.x1.y)+" m"),n.push(ft(r.x2.x)+" "+ft(r.x2.y)+" l"),n.push(ft(r.x4.x)+" "+ft(r.x4.y)+" m"),n.push(ft(r.x3.x)+" "+ft(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=qe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ft(qe.internal.getWidth(t))+" "+ft(qe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ft(qe.internal.getWidth(t)-2)+" "+ft(qe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ft(n.x1.x)+" "+ft(n.x1.y)+" m"),r.push(ft(n.x2.x)+" "+ft(n.x2.y)+" l"),r.push(ft(n.x4.x)+" "+ft(n.x4.y)+" m"),r.push(ft(n.x3.x)+" "+ft(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ft(qe.internal.getWidth(t))+" "+ft(qe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};qe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=qe.internal.getWidth(t),n=qe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},qe.internal.getWidth=function(t){var e=0;return Je(t)==="object"&&(e=wE(t.Rect[2])),e},qe.internal.getHeight=function(t){var e=0;return Je(t)==="object"&&(e=wE(t.Rect[3])),e};var fue=_n.addField=function(t){if(hue(this,t),!(t instanceof eo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};_n.AcroFormChoiceField=Id,_n.AcroFormListBox=Rd,_n.AcroFormComboBox=jd,_n.AcroFormEditBox=Z0,_n.AcroFormButton=cr,_n.AcroFormPushButton=ey,_n.AcroFormRadioButton=Dd,_n.AcroFormCheckBox=ty,_n.AcroFormTextField=Vc,_n.AcroFormPasswordField=ny,_n.AcroFormAppearance=qe,_n.AcroForm={ChoiceField:Id,ListBox:Rd,ComboBox:jd,EditBox:Z0,Button:cr,PushButton:ey,RadioButton:Dd,CheckBox:ty,TextField:Vc,PasswordField:ny,Appearance:qe},lt.AcroForm={ChoiceField:Id,ListBox:Rd,ComboBox:jd,EditBox:Z0,Button:cr,PushButton:ey,RadioButton:Dd,CheckBox:ty,TextField:Vc,PasswordField:ny,Appearance:qe};function j8(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(L,E){var B,I,Q,Z,ne,Y=e;if((E=E||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(O(L))for(ne in n)for(Q=n[ne],B=0;B<Q.length;B+=1){for(Z=!0,I=0;I<Q[B].length;I+=1)if(Q[B][I]!==void 0&&Q[B][I]!==L[I]){Z=!1;break}if(Z===!0){Y=ne;break}}else for(ne in n)for(Q=n[ne],B=0;B<Q.length;B+=1){for(Z=!0,I=0;I<Q[B].length;I+=1)if(Q[B][I]!==void 0&&Q[B][I]!==L.charCodeAt(I)){Z=!1;break}if(Z===!0){Y=ne;break}}return Y===e&&E!==e&&(Y=E),Y},i=function L(E){for(var B=this.internal.write,I=this.internal.putStream,Q=(0,this.internal.getFilters)();Q.indexOf("FlateEncode")!==-1;)Q.splice(Q.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:E.width}),Z.push({key:"Height",value:E.height}),E.colorSpace===v.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===v.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var ne="",Y=0,ie=E.transparency.length;Y<ie;Y++)ne+=E.transparency[Y]+" "+E.transparency[Y]+" ";Z.push({key:"Mask",value:"["+ne+"]"})}E.sMask!==void 0&&Z.push({key:"SMask",value:E.objectId+1+" 0 R"});var q=E.filter!==void 0?["/"+E.filter]:void 0;if(I({data:E.data,additionalKeyValues:Z,alreadyAppliedFilters:q,objectId:E.objectId}),B("endobj"),"sMask"in E&&E.sMask!==void 0){var G="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,P={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:G,data:E.sMask};"filter"in E&&(P.filter=E.filter),L.call(this,P)}if(E.colorSpace===v.INDEXED){var U=this.internal.newObject();I({data:N(new Uint8Array(E.palette)),objectId:U}),B("endobj")}},s=function(){var L=this.internal.collections.addImage_images;for(var E in L)i.call(this,L[E])},o=function(){var L,E=this.internal.collections.addImage_images,B=this.internal.write;for(var I in E)B("/I"+(L=E[I]).index,L.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var L=this.internal.collections.addImage_images;return a.call(this),L},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(L){return typeof t["process"+L.toUpperCase()]=="function"},d=function(L){return Je(L)==="object"&&L.nodeType===1},h=function(L,E){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var B=""+L.getAttribute("src");if(B.indexOf("data:image/")===0)return op(unescape(B).split("base64,").pop());var I=t.loadFile(B,!0);if(I!==void 0)return I}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var Q;switch(E){case"PNG":Q="image/png";break;case"WEBP":Q="image/webp";break;case"JPEG":case"JPG":default:Q="image/jpeg"}return op(L.toDataURL(Q,1).split("base64,").pop())}},f=function(L){var E=this.internal.collections.addImage_images;if(E){for(var B in E)if(L===E[B].alias)return E[B]}},p=function(L,E,B){return L||E||(L=-96,E=-96),L<0&&(L=-1*B.width*72/L/this.internal.scaleFactor),E<0&&(E=-1*B.height*72/E/this.internal.scaleFactor),L===0&&(L=E*B.width/B.height),E===0&&(E=L*B.height/B.width),[L,E]},g=function(L,E,B,I,Q,Z){var ne=p.call(this,B,I,Q),Y=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,q=l.call(this);if(B=ne[0],I=ne[1],q[Q.index]=Q,Z){Z*=Math.PI/180;var G=Math.cos(Z),P=Math.sin(Z),U=function(J){return J.toFixed(4)},K=[U(G),U(P),U(-1*P),U(G),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,Y(L),ie(E+I),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([Y(B),"0","0",Y(I),"0","0","cm"].join(" "))):this.internal.write([Y(B),"0","0",Y(I),Y(L),ie(E+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Q.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(L){var E,B,I=0;if(typeof L=="string")for(B=L.length,E=0;E<B;E++)I=(I<<5)-I+L.charCodeAt(E),I|=0;else if(O(L))for(B=L.byteLength/2,E=0;E<B;E++)I=(I<<5)-I+L[E],I|=0;return I},S=t.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var E=!0;return L.length===0&&(E=!1),L.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(E=!1),E},C=t.__addimage__.extractImageFromDataUrl=function(L){var E=(L=L||"").split("base64,"),B=null;if(E.length===2){var I=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(I)&&(B={mimeType:I[1],charset:I[2],data:E[1]})}return B},A=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(L){return A()&&L instanceof ArrayBuffer};var O=t.__addimage__.isArrayBufferView=function(L){return A()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},M=t.__addimage__.binaryStringToUint8Array=function(L){for(var E=L.length,B=new Uint8Array(E),I=0;I<E;I++)B[I]=L.charCodeAt(I);return B},N=t.__addimage__.arrayBufferToBinaryString=function(L){for(var E="",B=O(L)?L:new Uint8Array(L),I=0;I<B.length;I+=8192)E+=String.fromCharCode.apply(null,B.subarray(I,I+8192));return E};t.addImage=function(){var L,E,B,I,Q,Z,ne,Y,ie;if(typeof arguments[1]=="number"?(E=e,B=arguments[1],I=arguments[2],Q=arguments[3],Z=arguments[4],ne=arguments[5],Y=arguments[6],ie=arguments[7]):(E=arguments[1],B=arguments[2],I=arguments[3],Q=arguments[4],Z=arguments[5],ne=arguments[6],Y=arguments[7],ie=arguments[8]),Je(L=arguments[0])==="object"&&!d(L)&&"imageData"in L){var q=L;L=q.imageData,E=q.format||E||e,B=q.x||B||0,I=q.y||I||0,Q=q.w||q.width||Q,Z=q.h||q.height||Z,ne=q.alias||ne,Y=q.compression||Y,ie=q.rotation||q.angle||ie}var G=this.internal.getFilters();if(Y===void 0&&G.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(B)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var P=D.call(this,L,E,ne,Y);return g.call(this,B,I,Q,Z,P,ie),this};var D=function(L,E,B,I){var Q,Z,ne;if(typeof L=="string"&&r(L)===e){L=unescape(L);var Y=V(L,!1);(Y!==""||(Y=t.loadFile(L,!0))!==void 0)&&(L=Y)}if(d(L)&&(L=h(L,E)),E=r(L,E),!u(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((ne=B)==null||ne.length===0)&&(B=function(ie){return typeof ie=="string"||O(ie)?x(ie):O(ie.data)?x(ie.data):null}(L)),(Q=f.call(this,B))||(A()&&(L instanceof Uint8Array||E==="RGBA"||(Z=L,L=M(L))),Q=this["process"+E.toUpperCase()](L,c.call(this),B,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in t.image_compression?ie:y.NONE}(I),Z)),!Q)throw new Error("An unknown error occurred whilst processing the image.");return Q},V=t.__addimage__.convertBase64ToBinaryString=function(L,E){var B;E=typeof E!="boolean"||E;var I,Q="";if(typeof L=="string"){I=(B=C(L))!==null?B.data:L;try{Q=op(I)}catch(Z){if(E)throw S(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Q};t.getImageProperties=function(L){var E,B,I="";if(d(L)&&(L=h(L)),typeof L=="string"&&r(L)===e&&((I=V(L,!1))===""&&(I=t.loadFile(L)||""),L=I),B=r(L),!u(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!A()||L instanceof Uint8Array||(L=M(L)),!(E=this["process"+B.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=B,E}})(lt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};lt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(y(r.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(y(x))+") >>",g.content=s;var S=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(g.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(p(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var A=this.annotations._nameMap[r.options.name];r.options.pageNumber=A.page,r.options.top=A.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var O=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+O+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(lt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},a=t.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(g){var v=0,y=n,x="",S=0;for(v=0;v<g.length;v+=1)y[g.charCodeAt(v)]!==void 0?(S++,typeof(y=y[g.charCodeAt(v)])=="number"&&(x+=String.fromCharCode(y),y=n,S=0),v===g.length-1&&(y=n,x+=g.charAt(v-(S-1)),v-=S-1,S=0)):(y=n,x+=g.charAt(v-S),v-=S,S=0);return x};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(g,v,y){return o(g)?s(g)===!1?-1:!c(g)||!o(v)&&!o(y)||!o(y)&&a(v)||a(g)&&!o(v)||a(g)&&l(v)||a(g)&&a(v)?0:u(g)&&o(v)&&!a(v)&&o(y)&&c(y)?3:a(g)||!o(y)?1:2:-1},f=function(g){var v=0,y=0,x=0,S="",C="",A="",O=(g=g||"").split("\\s+"),M=[];for(v=0;v<O.length;v+=1){for(M.push(""),y=0;y<O[v].length;y+=1)S=O[v][y],C=O[v][y-1],A=O[v][y+1],o(S)?(x=h(S,C,A),M[v]+=x!==-1?String.fromCharCode(e[S.charCodeAt(0)][x]):S):M[v]+=S;M[v]=d(M[v])}return M.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var g,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var x=0;for(y=[],x=0;x<v.length;x+=1)Array.isArray(v[x])?y.push([f(v[x][0]),v[x][1],v[x][2]]):y.push([f(v[x])]);g=y}else g=f(v);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",p])}(lt.API),lt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(lt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,p=0,g=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,C){return S.concat(v.splitTextToSize(C,y))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)f<(g=this.getStringUnitWidth(l[x],{font:d})*u)&&(f=g);return f!==0&&(p=l.length),{w:f/=h,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,p,g,v,y=[],x=[],S=[],C={},A={},O=[],M=[],N=(h=h||{}).autoSize||!1,D=h.printHeaders!==!1,V=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,L=h.margins||Object.assign({width:this.getPageWidth()},e),E=typeof h.padding=="number"?h.padding:3,B=h.headerBackgroundColor||"#c8c8c8",I=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=I,this.setFontSize(V),d==null)x=y=Object.keys(u[0]),S=y.map(function(){return"left"});else if(Array.isArray(d)&&Je(d[0])==="object")for(y=d.map(function(q){return q.name}),x=d.map(function(q){return q.prompt||q.name||""}),S=d.map(function(q){return q.align||"left"}),f=0;f<d.length;f+=1)A[d[f].name]=d[f].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(x=y=d,S=y.map(function(){return"left"}));if(N||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<y.length;f+=1){for(C[v=y[f]]=u.map(function(q){return q[v]}),this.setFont(void 0,"bold"),O.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=C[v],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)O.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[v]=Math.max.apply(null,O)+E+E,O=[]}if(D){var Q={};for(f=0;f<y.length;f+=1)Q[y[f]]={},Q[y[f]].text=x[f],Q[y[f]].align=S[f];var Z=a.call(this,Q,A);M=y.map(function(q){return new s(l,c,A[q],Z,Q[q].text,void 0,Q[q].align)}),this.setTableHeaderRow(M),this.printHeaderRow(1,!1)}var ne=d.reduce(function(q,G){return q[G.name]=G.align,q},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var Y=a.call(this,u[f],A);for(g=0;g<y.length;g+=1){var ie=u[f][y[g]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:g,data:ie},this),o.call(this,new s(l,c,A[y[g]],Y,ie,f+2,ne[y[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var p=l[f];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,p){return Math.max(f,p)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(lt.API);var D8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},F8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uS=j8(F8),B8=[100,200,300,400,500,600,700,800,900],pue=j8(B8);function dS(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return D8[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof uS[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function SE(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var mue={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _E(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function gue(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},mue,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=dS(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+_E(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=uS[l],d=u<=uS.normal?-1:1,h=SE(c,F8,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=D8[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=pue[l],d=SE(c,B8,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+_E(s)+"'.");return o}function CE(t){return t.trimLeft()}function yue(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function vue(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var w0,AE,TE,h2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,u=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=P;Object.defineProperty(this,"pdf",{get:function(){return U}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(ge){K=!!ge}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(ge){J=!!ge}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ge){isNaN(ge)||(re=ge)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(ge){isNaN(ge)||(se=ge)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ge){var te;typeof ge=="number"?te=[ge,ge,ge,ge]:((te=new Array(4))[0]=ge[0],te[1]=ge.length>=2?ge[1]:te[0],te[2]=ge.length>=3?ge[2]:te[0],te[3]=ge.length>=4?ge[3]:te[1]),c.margin=te}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(ge){ue=ge}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(ge){de=ge}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(ge){xe=ge}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ge){ge instanceof u&&(c=ge)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ge){c.path=ge}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(ge){ve=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var te;te=h(ge),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var te=h(ge);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var ke=null;function Te(ge,te){if(ke===null){var Ge=function(Be){var Ae=[];return Object.keys(Be).forEach(function(Ee){Be[Ee].forEach(function(Oe){var Me=null;switch(Oe){case"bold":Me={family:Ee,weight:"bold"};break;case"italic":Me={family:Ee,style:"italic"};break;case"bolditalic":Me={family:Ee,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Ee}}Me!==null&&(Me.ref={name:Ee,style:Oe},Ae.push(Me))})}),Ae}(ge.getFontList());ke=function(Be){for(var Ae={},Ee=0;Ee<Be.length;++Ee){var Oe=dS(Be[Ee]),Me=Oe.family,$e=Oe.stretch,Qe=Oe.style,it=Oe.weight;Ae[Me]=Ae[Me]||{},Ae[Me][$e]=Ae[Me][$e]||{},Ae[Me][$e][Qe]=Ae[Me][$e][Qe]||{},Ae[Me][$e][Qe][it]=Oe}return Ae}(Ge.concat(te))}return ke}var Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(ge){ke=null,Ie=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var te;if(this.ctx.font=ge,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var Ge=te[1],Be=(te[2],te[3]),Ae=te[4],Ee=(te[5],te[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ae)[2];Ae=Math.floor(Oe==="px"?parseFloat(Ae)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ae)*this.pdf.getFontSize():parseFloat(Ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ae);var Me=function(et){var yt,De,Un=[],At=et.trim();if(At==="")return h2;if(At in kE)return[kE[At]];for(;At!=="";){switch(De=null,yt=(At=CE(At)).charAt(0)){case'"':case"'":De=yue(At.substring(1),yt);break;default:De=vue(At)}if(De===null||(Un.push(De[0]),(At=CE(De[1]))!==""&&At.charAt(0)!==","))return h2;At=At.replace(/^,/,"")}return Un}(Ee);if(this.fontFaces){var $e=gue(Te(this.pdf,this.fontFaces),Me.map(function(et){return{family:et,stretch:"normal",weight:Be,style:Ge}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var Qe="";(Be==="bold"||parseInt(Be,10)>=700||Ge==="bold")&&(Qe="bold"),Ge==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var it="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},St=0;St<Me.length;St++){if(this.pdf.internal.getFont(Me[St],Qe,{noFallback:!0,disableWarning:!0})!==void 0){it=Me[St];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(Me[St],"bold",{noFallback:!0,disableWarning:!0})!==void 0)it=Me[St],Qe="bold";else if(this.pdf.internal.getFont(Me[St],"normal",{noFallback:!0,disableWarning:!0})!==void 0){it=Me[St],Qe="normal";break}}if(it===""){for(var It=0;It<Me.length;It++)if(pt[Me[It]]){it=pt[Me[It]];break}}it=it===""?"Times":it,this.pdf.setFont(it,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};d.prototype.setLineDash=function(P){this.lineDash=P},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){C.call(this,"fill",!1)},d.prototype.stroke=function(){C.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(P,U){if(isNaN(P)||isNaN(U))throw Ht.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(P,U));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(P,U)},d.prototype.closePath=function(){var P=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Je(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){P=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},d.prototype.lineTo=function(P,U){if(isNaN(P)||isNaN(U))throw Ht.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(P,U));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},d.prototype.quadraticCurveTo=function(P,U,K,J){if(isNaN(K)||isNaN(J)||isNaN(P)||isNaN(U))throw Ht.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(K,J)),se=this.ctx.transform.applyToPoint(new o(P,U));this.path.push({type:"qct",x1:se.x,y1:se.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},d.prototype.bezierCurveTo=function(P,U,K,J,re,se){if(isNaN(re)||isNaN(se)||isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J))throw Ht.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new o(re,se)),de=this.ctx.transform.applyToPoint(new o(P,U)),xe=this.ctx.transform.applyToPoint(new o(K,J));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:xe.x,y2:xe.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new o(ue.x,ue.y)},d.prototype.arc=function(P,U,K,J,re,se){if(isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J)||isNaN(re))throw Ht.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new o(P,U));P=ue.x,U=ue.y;var de=this.ctx.transform.applyToPoint(new o(0,K)),xe=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(de.x-xe.x,2)+Math.pow(de.y-xe.y,2))}Math.abs(re-J)>=2*Math.PI&&(J=0,re=2*Math.PI),this.path.push({type:"arc",x:P,y:U,radius:K,startAngle:J,endAngle:re,counterclockwise:se})},d.prototype.arcTo=function(P,U,K,J,re){throw new Error("arcTo not implemented.")},d.prototype.rect=function(P,U,K,J){if(isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J))throw Ht.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,U),this.lineTo(P+K,U),this.lineTo(P+K,U+J),this.lineTo(P,U+J),this.lineTo(P,U),this.lineTo(P+K,U),this.lineTo(P,U)},d.prototype.fillRect=function(P,U,K,J){if(isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J))throw Ht.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,U,K,J),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},d.prototype.strokeRect=function(P,U,K,J){if(isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J))throw Ht.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(P,U,K,J),this.stroke())},d.prototype.clearRect=function(P,U,K,J){if(isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J))throw Ht.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,U,K,J))},d.prototype.save=function(P){P=typeof P!="boolean"||P;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},d.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(U),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(P){var U,K,J,re;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))U=0,K=0,J=0,re=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(se!==null)U=parseInt(se[1]),K=parseInt(se[2]),J=parseInt(se[3]),re=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)U=parseInt(se[1]),K=parseInt(se[2]),J=parseInt(se[3]),re=parseFloat(se[4]);else{if(re=1,typeof P=="string"&&P.charAt(0)!=="#"){var ue=new E8(P);P=ue.ok?ue.toHex():"#000000"}P.length===4?(U=P.substring(1,2),U+=U,K=P.substring(2,3),K+=K,J=P.substring(3,4),J+=J):(U=P.substring(1,3),K=P.substring(3,5),J=P.substring(5,7)),U=parseInt(U,16),K=parseInt(K,16),J=parseInt(J,16)}}return{r:U,g:K,b:J,a:re,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(P,U,K,J){if(isNaN(U)||isNaN(K)||typeof P!="string")throw Ht.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!f.call(this)){var re=Y(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;E.call(this,{text:P,x:U,y:K,scale:se,angle:re,align:this.textAlign,maxWidth:J})}},d.prototype.strokeText=function(P,U,K,J){if(isNaN(U)||isNaN(K)||typeof P!="string")throw Ht.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){J=isNaN(J)?void 0:J;var re=Y(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;E.call(this,{text:P,x:U,y:K,scale:se,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:J})}},d.prototype.measureText=function(P){if(typeof P!="string")throw Ht.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,K=this.pdf.internal.scaleFactor,J=U.internal.getFontSize(),re=U.getStringUnitWidth(P)*J/U.internal.scaleFactor,se=function(ue){var de=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new se({width:re*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(P,U){if(isNaN(P)||isNaN(U))throw Ht.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(P,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(P){if(isNaN(P))throw Ht.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.translate=function(P,U){if(isNaN(P)||isNaN(U))throw Ht.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,P,U);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(P,U,K,J,re,se){if(isNaN(P)||isNaN(U)||isNaN(K)||isNaN(J)||isNaN(re)||isNaN(se))throw Ht.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new l(P,U,K,J,re,se);this.ctx.transform=this.ctx.transform.multiply(ue)},d.prototype.setTransform=function(P,U,K,J,re,se){P=isNaN(P)?1:P,U=isNaN(U)?0:U,K=isNaN(K)?0:K,J=isNaN(J)?1:J,re=isNaN(re)?0:re,se=isNaN(se)?0:se,this.ctx.transform=new l(P,U,K,J,re,se)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(P,U,K,J,re,se,ue,de,xe){var ve=this.pdf.getImageProperties(P),ke=1,Te=1,Ie=1,ge=1;J!==void 0&&de!==void 0&&(Ie=de/J,ge=xe/re,ke=ve.width/J*de/J,Te=ve.height/re*xe/re),se===void 0&&(se=U,ue=K,U=0,K=0),J!==void 0&&de===void 0&&(de=J,xe=re),J===void 0&&de===void 0&&(de=ve.width,xe=ve.height);for(var te,Ge=this.ctx.transform.decompose(),Be=Y(Ge.rotate.shx),Ae=new l,Ee=(Ae=(Ae=(Ae=Ae.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale)).applyToRectangle(new a(se-U*Ie,ue-K*ge,J*ke,re*Te)),Oe=v.call(this,Ee),Me=[],$e=0;$e<Oe.length;$e+=1)Me.indexOf(Oe[$e])===-1&&Me.push(Oe[$e]);if(S(Me),this.autoPaging)for(var Qe=Me[0],it=Me[Me.length-1],pt=Qe;pt<it+1;pt++){this.pdf.setPage(pt);var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],It=pt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=pt===1?0:et+(pt-2)*yt;if(this.ctx.clip_path.length!==0){var Un=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(te,this.posX+this.margin[3],-De+It+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=Un}var At=JSON.parse(JSON.stringify(Ee));At=x([At],this.posX+this.margin[3],-De+It+this.ctx.prevPageLastElemOffset)[0];var Ni=(pt>Qe||pt<it)&&g.call(this);Ni&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,yt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",At.x,At.y,At.w,At.h,null,null,Be),Ni&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,Be)};var v=function(P,U,K){var J=[];U=U||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":J.push(Math.floor((P.y+re)/K)+1);break;case"arc":J.push(Math.floor((P.y+re-P.radius)/K)+1),J.push(Math.floor((P.y+re+P.radius)/K)+1);break;case"qct":var se=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);J.push(Math.floor((se.y+re)/K)+1),J.push(Math.floor((se.y+se.h+re)/K)+1);break;case"bct":var ue=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);J.push(Math.floor((ue.y+re)/K)+1),J.push(Math.floor((ue.y+ue.h+re)/K)+1);break;case"rect":J.push(Math.floor((P.y+re)/K)+1),J.push(Math.floor((P.y+P.h+re)/K)+1)}for(var de=0;de<J.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<J[de];)y.call(this);return J},y=function(){var P=this.fillStyle,U=this.strokeStyle,K=this.font,J=this.lineCap,re=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=U,this.font=K,this.lineCap=J,this.lineWidth=re,this.lineJoin=se},x=function(P,U,K){for(var J=0;J<P.length;J++)switch(P[J].type){case"bct":P[J].x2+=U,P[J].y2+=K;case"qct":P[J].x1+=U,P[J].y1+=K;case"mt":case"lt":case"arc":default:P[J].x+=U,P[J].y+=K}return P},S=function(P){return P.sort(function(U,K){return U-K})},C=function(P,U){for(var K,J,re=this.fillStyle,se=this.strokeStyle,ue=this.lineCap,de=this.lineWidth,xe=Math.abs(de*this.ctx.transform.scaleX),ve=this.lineJoin,ke=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),Ie=[],ge=0;ge<Te.length;ge++)if(Te[ge].x!==void 0)for(var te=v.call(this,Te[ge]),Ge=0;Ge<te.length;Ge+=1)Ie.indexOf(te[Ge])===-1&&Ie.push(te[Ge]);for(var Be=0;Be<Ie.length;Be++)for(;this.pdf.internal.getNumberOfPages()<Ie[Be];)y.call(this);if(S(Ie),this.autoPaging)for(var Ae=Ie[0],Ee=Ie[Ie.length-1],Oe=Ae;Oe<Ee+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=re,this.strokeStyle=se,this.lineCap=ue,this.lineWidth=xe,this.lineJoin=ve;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Oe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Oe===1?0:Qe+(Oe-2)*it;if(this.ctx.clip_path.length!==0){var St=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(K,this.posX+this.margin[3],-pt+$e+this.ctx.prevPageLastElemOffset),A.call(this,P,!0),this.path=St}if(J=JSON.parse(JSON.stringify(ke)),this.path=x(J,this.posX+this.margin[3],-pt+$e+this.ctx.prevPageLastElemOffset),U===!1||Oe===0){var It=(Oe>Ae||Oe<Ee)&&g.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,it,null).clip().discardPath()),A.call(this,P,U),It&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=xe,A.call(this,P,U),this.lineWidth=de;this.path=ke},A=function(P,U){if((P!=="stroke"||U||!p.call(this))&&(P==="stroke"||U||!f.call(this))){for(var K,J,re=[],se=this.path,ue=0;ue<se.length;ue++){var de=se[ue];switch(de.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:de,deltas:[],abs:[]});break;case"lt":var xe=re.length;if(se[ue-1]&&!isNaN(se[ue-1].x)&&(K=[de.x-se[ue-1].x,de.y-se[ue-1].y],xe>0)){for(;xe>=0;xe--)if(re[xe-1].close!==!0&&re[xe-1].begin!==!0){re[xe-1].deltas.push(K),re[xe-1].abs.push(de);break}}break;case"bct":K=[de.x1-se[ue-1].x,de.y1-se[ue-1].y,de.x2-se[ue-1].x,de.y2-se[ue-1].y,de.x-se[ue-1].x,de.y-se[ue-1].y],re[re.length-1].deltas.push(K);break;case"qct":var ve=se[ue-1].x+2/3*(de.x1-se[ue-1].x),ke=se[ue-1].y+2/3*(de.y1-se[ue-1].y),Te=de.x+2/3*(de.x1-de.x),Ie=de.y+2/3*(de.y1-de.y),ge=de.x,te=de.y;K=[ve-se[ue-1].x,ke-se[ue-1].y,Te-se[ue-1].x,Ie-se[ue-1].y,ge-se[ue-1].x,te-se[ue-1].y],re[re.length-1].deltas.push(K);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(de)}}J=U?null:P==="stroke"?"stroke":"fill";for(var Ge=!1,Be=0;Be<re.length;Be++)if(re[Be].arc)for(var Ae=re[Be].abs,Ee=0;Ee<Ae.length;Ee++){var Oe=Ae[Ee];Oe.type==="arc"?N.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,U,!Ge):B.call(this,Oe.x,Oe.y),Ge=!0}else if(re[Be].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(re[Be].begin!==!0){var Me=re[Be].start.x,$e=re[Be].start.y;I.call(this,re[Be].deltas,Me,$e),Ge=!0}J&&D.call(this,J),U&&V.call(this)}},O=function(P){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-K;case"top":return P+U-K;case"hanging":return P+U-2*K;case"middle":return P+U/2-K;case"ideographic":return P;case"alphabetic":default:return P}},M=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(U,K){this.colorStops.push([U,K])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(P,U,K,J,re,se,ue,de,xe){for(var ve=Z.call(this,K,J,re,se),ke=0;ke<ve.length;ke++){var Te=ve[ke];ke===0&&(xe?L.call(this,Te.x1+P,Te.y1+U):B.call(this,Te.x1+P,Te.y1+U)),Q.call(this,P,U,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}de?V.call(this):D.call(this,ue)},D=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(P,U){this.pdf.internal.out(n(P)+" "+r(U)+" m")},E=function(P){var U;switch(P.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var K=this.pdf.getTextDimensions(P.text),J=O.call(this,P.y),re=M.call(this,J)-K.h,se=this.ctx.transform.applyToPoint(new o(P.x,J)),ue=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var xe,ve,ke,Te=this.ctx.transform.applyToRectangle(new a(P.x,J,K.w,K.h)),Ie=de.applyToRectangle(new a(P.x,re,K.w,K.h)),ge=v.call(this,Ie),te=[],Ge=0;Ge<ge.length;Ge+=1)te.indexOf(ge[Ge])===-1&&te.push(ge[Ge]);if(S(te),this.autoPaging)for(var Be=te[0],Ae=te[te.length-1],Ee=Be;Ee<Ae+1;Ee++){this.pdf.setPage(Ee);var Oe=Ee===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],Qe=$e-this.margin[0],it=this.pdf.internal.pageSize.width-this.margin[1],pt=it-this.margin[3],St=Ee===1?0:Me+(Ee-2)*Qe;if(this.ctx.clip_path.length!==0){var It=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(xe,this.posX+this.margin[3],-1*St+Oe),A.call(this,"fill",!0),this.path=It}var et=x([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-St+Oe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*P.scale),ke=this.lineWidth,this.lineWidth=ke*P.scale);var yt=this.autoPaging!=="text";if(yt||et.y+et.h<=$e){if(yt||et.y>=Oe&&et.x<=it){var De=yt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||it-et.x)[0],Un=x([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-St+Oe+this.ctx.prevPageLastElemOffset)[0],At=yt&&(Ee>Be||Ee<Ae)&&g.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Qe,null).clip().discardPath()),this.pdf.text(De,Un.x,Un.y,{angle:P.angle,align:U,renderingMode:P.renderingMode}),At&&this.pdf.restoreGraphicsState()}}else et.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-et.y);P.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ke)}else P.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*P.scale),ke=this.lineWidth,this.lineWidth=ke*P.scale),this.pdf.text(P.text,se.x+this.posX,se.y+this.posY,{angle:P.angle,align:U,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ke)},B=function(P,U,K,J){K=K||0,J=J||0,this.pdf.internal.out(n(P+K)+" "+r(U+J)+" l")},I=function(P,U,K){return this.pdf.lines(P,U,K,null,null)},Q=function(P,U,K,J,re,se,ue,de){this.pdf.internal.out([e(i(K+P)),e(s(J+U)),e(i(re+P)),e(s(se+U)),e(i(ue+P)),e(s(de+U)),"c"].join(" "))},Z=function(P,U,K,J){for(var re=2*Math.PI,se=Math.PI/2;U>K;)U-=re;var ue=Math.abs(K-U);ue<re&&J&&(ue=re-ue);for(var de=[],xe=J?-1:1,ve=U;ue>1e-5;){var ke=ve+xe*Math.min(ue,se);de.push(ne.call(this,P,ve,ke)),ue-=Math.abs(ke-ve),ve=ke}return de},ne=function(P,U,K){var J=(K-U)/2,re=P*Math.cos(J),se=P*Math.sin(J),ue=re,de=-se,xe=ue*ue+de*de,ve=xe+ue*re+de*se,ke=4/3*(Math.sqrt(2*xe*ve)-ve)/(ue*se-de*re),Te=ue-ke*de,Ie=de+ke*ue,ge=Te,te=-Ie,Ge=J+U,Be=Math.cos(Ge),Ae=Math.sin(Ge);return{x1:P*Math.cos(U),y1:P*Math.sin(U),x2:Te*Be-Ie*Ae,y2:Te*Ae+Ie*Be,x3:ge*Be-te*Ae,y3:ge*Ae+te*Be,x4:P*Math.cos(K),y4:P*Math.sin(K)}},Y=function(P){return 180*P/Math.PI},ie=function(P,U,K,J,re,se){var ue=P+.5*(K-P),de=U+.5*(J-U),xe=re+.5*(K-re),ve=se+.5*(J-se),ke=Math.min(P,re,ue,xe),Te=Math.max(P,re,ue,xe),Ie=Math.min(U,se,de,ve),ge=Math.max(U,se,de,ve);return new a(ke,Ie,Te-ke,ge-Ie)},q=function(P,U,K,J,re,se,ue,de){var xe,ve,ke,Te,Ie,ge,te,Ge,Be,Ae,Ee,Oe,Me,$e,Qe=K-P,it=J-U,pt=re-K,St=se-J,It=ue-re,et=de-se;for(ve=0;ve<41;ve++)Be=(te=(ke=P+(xe=ve/40)*Qe)+xe*((Ie=K+xe*pt)-ke))+xe*(Ie+xe*(re+xe*It-Ie)-te),Ae=(Ge=(Te=U+xe*it)+xe*((ge=J+xe*St)-Te))+xe*(ge+xe*(se+xe*et-ge)-Ge),ve==0?(Ee=Be,Oe=Ae,Me=Be,$e=Ae):(Ee=Math.min(Ee,Be),Oe=Math.min(Oe,Ae),Me=Math.max(Me,Be),$e=Math.max($e,Ae));return new a(Math.round(Ee),Math.round(Oe),Math.round(Me-Ee),Math.round($e-Oe))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,U,K=(P=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:U}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(lt.API),function(t){var e=function(s){var o,a,l,c,u,d,h,f,p,g;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(g=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)-(h=u%85))/85)%85,a.push(d+33,h+33,f+33,p+33,g+33)):a.push(122);return function(v,y){for(var x=y;x>0;x--)v.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,d=String,h="length",f=255,p="charCodeAt",g="slice",v="replace";for(s[g](-2),s=s[g](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[g](s[h]%5||5))[h];u>c;c+=5)a=52200625*(s[p](c)-33)+614125*(s[p](c+1)-33)+7225*(s[p](c+2)-33)+85*(s[p](c+3)-33)+(s[p](c+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(y,x){for(var S=x;S>0;S--)y.pop()}(l,o[h]),d.fromCharCode.apply(d,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=sS(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(lt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(p){var g=p.length,v=[],y=String.fromCharCode;for(h=0;h<g;h+=1)v.push(y(255&p.charCodeAt(h)));return v.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(lt.API),function(t){function e(){return(ct.html2canvas?Promise.resolve(ct.html2canvas):_l(()=>import("./html2canvas.esm-f16e60ff.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ct.DOMPurify?Promise.resolve(ct.DOMPurify):_l(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Je(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var f=c[h],p=f.src.find(function(g){return g.format==="truetype"});p&&l.addFont(p.url,f.ref.name,f.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,lt.getPageSize=function(o,a,l){if(Je(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var f,p=0,g=0;if(h.hasOwnProperty(d))p=h[d][1]/u,g=h[d][0]/u;else try{p=l[1],g=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",g>p&&(f=g,g=p,p=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>g&&(f=g,g=p,p=f)}return{width:g,height:p,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(dS):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(lt.API),lt.API.addJS=function(t){return TE=t,this.internal.events.subscribe("postPutResources",function(){w0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(w0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),AE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+TE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){w0!==void 0&&AE!==void 0&&this.internal.out("/Names <</JavaScript "+w0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(lt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,g={width:0,height:0,numcomponents:1},v=4;v<p;v+=2){if(v+=f,e.indexOf(d.charCodeAt(v+1))!==-1){h=256*d.charCodeAt(v+5)+d.charCodeAt(v+6),g={width:256*d.charCodeAt(v+7)+d.charCodeAt(v+8),height:h,numcomponents:d.charCodeAt(v+9)};break}f=256*d.charCodeAt(v+2)+d.charCodeAt(v+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(lt.API);var Ku,S0,NE,PE,EE,bue=function(){var t,e,n;function r(s){var o,a,l,c,u,d,h,f,p,g,v,y,x,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),p=function(){var C,A;for(A=[],C=0;C<4;++C)A.push(String.fromCharCode(this.data[this.pos++]));return A}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),s=d?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((g=l-this.transparency.indexed.length)>0)for(x=0;0<=g?x<g:x>g;0<=g?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,v.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(d,h,f,p){var g,v,y,x,S,C,A,O,M,N,D,V,L,E,B,I,Q,Z,ne,Y,ie,q=Math.ceil((c.width-d)/f),G=Math.ceil((c.height-h)/p),P=c.width==q&&c.height==G;for(E=o*q,V=P?a:new Uint8Array(E*G),C=s.length,L=0,v=0;L<G&&l<C;){switch(s[l++]){case 0:for(x=Q=0;Q<E;x=Q+=1)V[v++]=s[l++];break;case 1:for(x=Z=0;Z<E;x=Z+=1)g=s[l++],S=x<o?0:V[v-o],V[v++]=(g+S)%256;break;case 2:for(x=ne=0;ne<E;x=ne+=1)g=s[l++],y=(x-x%o)/o,B=L&&V[(L-1)*E+y*o+x%o],V[v++]=(B+g)%256;break;case 3:for(x=Y=0;Y<E;x=Y+=1)g=s[l++],y=(x-x%o)/o,S=x<o?0:V[v-o],B=L&&V[(L-1)*E+y*o+x%o],V[v++]=(g+Math.floor((S+B)/2))%256;break;case 4:for(x=ie=0;ie<E;x=ie+=1)g=s[l++],y=(x-x%o)/o,S=x<o?0:V[v-o],L===0?B=I=0:(B=V[(L-1)*E+y*o+x%o],I=y&&V[(L-1)*E+(y-1)*o+x%o]),A=S+B-I,O=Math.abs(A-S),N=Math.abs(A-B),D=Math.abs(A-I),M=O<=N&&O<=D?S:N<=D?B:I,V[v++]=(g+M)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!P){var U=((h+L*p)*c.width+d)*o,K=L*E;for(x=0;x<q;x+=1){for(var J=0;J<o;J+=1)a[U++]=V[K++];U+=(f-1)*o}}L++}}return s=Jce(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,u,d,h,f;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=d=0,h=a.length;d<h;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(f=u[s++])!=null?f:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,u,d,h,f,p,g,v,y;if(l=this.colors,g=null,a=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,a=!0),p=(c=s.data||s).length,d=g||o,u=h=0,l===1)for(;u<p;)f=g?4*o[u/4]:h,v=d[f++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=a?d[f++]:255,h=f;else for(;u<p;)f=g?4*o[u/4]:h,c[u++]=d[f++],c[u++]=d[f++],c[u++]=d[f++],c[u++]=a?d[f++]:255,h=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ct)==="[object Window]"){try{e=ct.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,u,d,h,f;if(this.animation){for(f=[],a=u=0,d=(h=this.animation.frames).length;u<d;a=++u)o=h[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),c?.disposeOp===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,u,d,h=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(o=function(){var f,p;if(f=a++%c,p=l[f],h.renderFrame(s,f),c>1&&a/c<u)return h.animation._timeout=setTimeout(o,p.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function xue(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],!(1&g)&&(h=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,C=t[e++],A=C>>6&1,O=1<<(7&C)+1,M=a,N=l,D=!1;C>>7&&(D=!0,M=e,N=O,e+=3*O);var V=e;for(e++;;){var L;if(!((L=t[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}u.push({x:v,y,width:x,height:S,has_local_palette:D,palette_offset:M,palette_size:N,data_offset:V,data_length:e-V,transparent_index:h,interlaced:!!A,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,B){var I=this.frameInfo(E),Q=I.width*I.height,Z=new Uint8Array(Q);ME(t,I.data_offset,Z,Q);var ne=I.palette_offset,Y=I.transparent_index;Y===null&&(Y=256);var ie=I.width,q=n-ie,G=ie,P=4*(I.y*n+I.x),U=4*((I.y+I.height)*n+I.x),K=P,J=4*q;I.interlaced===!0&&(J+=4*n*7);for(var re=8,se=0,ue=Z.length;se<ue;++se){var de=Z[se];if(G===0&&(G=ie,(K+=J)>=U&&(J=4*q+4*n*(re-1),K=P+(ie+q)*(re<<1),re>>=1)),de===Y)K+=4;else{var xe=t[ne+3*de],ve=t[ne+3*de+1],ke=t[ne+3*de+2];B[K++]=ke,B[K++]=ve,B[K++]=xe,B[K++]=255}--G}},this.decodeAndBlitFrameRGBA=function(E,B){var I=this.frameInfo(E),Q=I.width*I.height,Z=new Uint8Array(Q);ME(t,I.data_offset,Z,Q);var ne=I.palette_offset,Y=I.transparent_index;Y===null&&(Y=256);var ie=I.width,q=n-ie,G=ie,P=4*(I.y*n+I.x),U=4*((I.y+I.height)*n+I.x),K=P,J=4*q;I.interlaced===!0&&(J+=4*n*7);for(var re=8,se=0,ue=Z.length;se<ue;++se){var de=Z[se];if(G===0&&(G=ie,(K+=J)>=U&&(J=4*q+4*n*(re-1),K=P+(ie+q)*(re<<1),re>>=1)),de===Y)K+=4;else{var xe=t[ne+3*de],ve=t[ne+3*de+1],ke=t[ne+3*de+2];B[K++]=xe,B[K++]=ve,B[K++]=ke,B[K++]=255}--G}}}function ME(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,f=t[e++],p=new Int32Array(4096),g=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var v=d&c;if(d>>=l,u-=l,v!==s){if(v===o)break;for(var y=v<a?v:g,x=0,S=y;S>s;)S=p[S]>>8,++x;var C=S;if(h+x+(y!==v?1:0)>r)return void Ht.log("Warning, gif stream longer than expected.");n[h++]=C;var A=h+=x;for(y!==v&&(n[h++]=C),S=y;x--;)S=p[S],n[--A]=255&S,S>>=8;g!==null&&a<4096&&(p[a++]=g<<8|C,a>=c+1&&l<12&&(++l,c=c<<1|1)),g=v}else a=o+1,c=(1<<(l=i+1))-1,g=null}return h!==r&&Ht.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function f2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),g=[],v=0,y=7,x=new Array(64),S=new Array(64),C=new Array(64),A=new Array(256),O=new Array(2048),M=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(P,U){for(var K=0,J=0,re=new Array,se=1;se<=16;se++){for(var ue=1;ue<=P[se];ue++)re[U[J]]=[],re[U[J]][0]=K,re[U[J]][1]=se,J++,K++;K*=2}return re}function ne(P){for(var U=P[0],K=P[1]-1;K>=0;)U&1<<K&&(v|=1<<y),K--,--y<0&&(v==255?(Y(255),Y(0)):Y(v),y=7,v=0)}function Y(P){g.push(P)}function ie(P){Y(P>>8&255),Y(255&P)}function q(P,U,K,J,re){for(var se,ue=re[0],de=re[240],xe=function(Ae,Ee){var Oe,Me,$e,Qe,it,pt,St,It,et,yt,De=0;for(et=0;et<8;++et){Oe=Ae[De],Me=Ae[De+1],$e=Ae[De+2],Qe=Ae[De+3],it=Ae[De+4],pt=Ae[De+5],St=Ae[De+6];var Un=Oe+(It=Ae[De+7]),At=Oe-It,Ni=Me+St,Ft=Me-St,Gt=$e+pt,Zi=$e-pt,Rt=Qe+it,No=Qe-it,cn=Un+Rt,Pi=Un-Rt,Ns=Ni+Gt,un=Ni-Gt;Ae[De]=cn+Ns,Ae[De+4]=cn-Ns;var ut=.707106781*(un+Pi);Ae[De+2]=Pi+ut,Ae[De+6]=Pi-ut;var Tt=.382683433*((cn=No+Zi)-(un=Ft+At)),Ei=.5411961*cn+Tt,Mn=1.306562965*un+Tt,ci=.707106781*(Ns=Zi+Ft),gr=At+ci,Ye=At-ci;Ae[De+5]=Ye+Ei,Ae[De+3]=Ye-Ei,Ae[De+1]=gr+Mn,Ae[De+7]=gr-Mn,De+=8}for(De=0,et=0;et<8;++et){Oe=Ae[De],Me=Ae[De+8],$e=Ae[De+16],Qe=Ae[De+24],it=Ae[De+32],pt=Ae[De+40],St=Ae[De+48];var ui=Oe+(It=Ae[De+56]),es=Oe-It,jt=Me+St,bn=Me-St,xn=$e+pt,Mt=$e-pt,dn=Qe+it,qn=Qe-it,wn=ui+dn,Ar=ui-dn,Mi=jt+xn,Li=jt-xn;Ae[De]=wn+Mi,Ae[De+32]=wn-Mi;var Tr=.707106781*(Li+Ar);Ae[De+16]=Ar+Tr,Ae[De+48]=Ar-Tr;var Oi=.382683433*((wn=qn+Mt)-(Li=bn+es)),Po=.5411961*wn+Oi,ba=1.306562965*Li+Oi,Nr=.707106781*(Mi=Mt+bn),uu=es+Nr,du=es-Nr;Ae[De+40]=du+Po,Ae[De+24]=du-Po,Ae[De+8]=uu+ba,Ae[De+56]=uu-ba,De++}for(et=0;et<64;++et)yt=Ae[et]*Ee[et],f[et]=yt>0?yt+.5|0:yt-.5|0;return f}(P,U),ve=0;ve<64;++ve)p[M[ve]]=xe[ve];var ke=p[0]-K;K=p[0],ke==0?ne(J[0]):(ne(J[h[se=32767+ke]]),ne(d[se]));for(var Te=63;Te>0&&p[Te]==0;)Te--;if(Te==0)return ne(ue),K;for(var Ie,ge=1;ge<=Te;){for(var te=ge;p[ge]==0&&ge<=Te;)++ge;var Ge=ge-te;if(Ge>=16){Ie=Ge>>4;for(var Be=1;Be<=Ie;++Be)ne(de);Ge&=15}se=32767+p[ge],ne(re[(Ge<<4)+h[se]]),ne(d[se]),ge++}return Te!=63&&ne(ue),K}function G(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(U){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var re=o((K[J]*U+50)/100);re=Math.min(Math.max(re,1),255),a[M[J]]=re}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var de=o((se[ue]*U+50)/100);de=Math.min(Math.max(de,1),255),l[M[ue]]=de}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,ke=0;ke<8;ke++)for(var Te=0;Te<8;Te++)c[ve]=1/(a[M[ve]]*xe[ke]*xe[Te]*8),u[ve]=1/(l[M[ve]]*xe[ke]*xe[Te]*8),ve++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,U){U&&G(U),g=new Array,v=0,y=7,ie(65496),ie(65504),ie(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),ie(1),ie(1),Y(0),Y(0),function(){ie(65499),ie(132),Y(0);for(var Me=0;Me<64;Me++)Y(a[Me]);Y(1);for(var $e=0;$e<64;$e++)Y(l[$e])}(),function(Me,$e){ie(65472),ie(17),Y(8),ie($e),ie(Me),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(P.width,P.height),function(){ie(65476),ie(418),Y(0);for(var Me=0;Me<16;Me++)Y(N[Me+1]);for(var $e=0;$e<=11;$e++)Y(D[$e]);Y(16);for(var Qe=0;Qe<16;Qe++)Y(V[Qe+1]);for(var it=0;it<=161;it++)Y(L[it]);Y(1);for(var pt=0;pt<16;pt++)Y(E[pt+1]);for(var St=0;St<=11;St++)Y(B[St]);Y(17);for(var It=0;It<16;It++)Y(I[It+1]);for(var et=0;et<=161;et++)Y(Q[et])}(),ie(65498),ie(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var K=0,J=0,re=0;v=0,y=7,this.encode.displayName="_encode_";for(var se,ue,de,xe,ve,ke,Te,Ie,ge,te=P.data,Ge=P.width,Be=P.height,Ae=4*Ge,Ee=0;Ee<Be;){for(se=0;se<Ae;){for(ve=Ae*Ee+se,Te=-1,Ie=0,ge=0;ge<64;ge++)ke=ve+(Ie=ge>>3)*Ae+(Te=4*(7&ge)),Ee+Ie>=Be&&(ke-=Ae*(Ee+1+Ie-Be)),se+Te>=Ae&&(ke-=se+Te-Ae+4),ue=te[ke++],de=te[ke++],xe=te[ke++],x[ge]=(O[ue]+O[de+256>>0]+O[xe+512>>0]>>16)-128,S[ge]=(O[ue+768>>0]+O[de+1024>>0]+O[xe+1280>>0]>>16)-128,C[ge]=(O[ue+1280>>0]+O[de+1536>>0]+O[xe+1792>>0]>>16)-128;K=q(x,c,K,e,r),J=q(S,u,J,n,i),re=q(C,u,re,n,i),se+=32}Ee+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,ne(Oe)}return ie(65497),new Uint8Array(g)},t=t||50,function(){for(var P=String.fromCharCode,U=0;U<256;U++)A[U]=P(U)}(),e=Z(N,D),n=Z(E,B),r=Z(V,L),i=Z(I,Q),function(){for(var P=1,U=2,K=1;K<=15;K++){for(var J=P;J<U;J++)h[32767+J]=K,d[32767+J]=[],d[32767+J][1]=K,d[32767+J][0]=J;for(var re=-(U-1);re<=-P;re++)h[32767+re]=K,d[32767+re]=[],d[32767+re][1]=K,d[32767+re][0]=U-1+re;P<<=1,U<<=1}}(),function(){for(var P=0;P<256;P++)O[P]=19595*P,O[P+256>>0]=38470*P,O[P+512>>0]=7471*P+32768,O[P+768>>0]=-11059*P,O[P+1024>>0]=-21709*P,O[P+1280>>0]=32768*P+8421375,O[P+1536>>0]=-27439*P,O[P+1792>>0]=-5329*P}(),G(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function js(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function LE(t){function e(N){if(!N)throw Error("assert :P")}function n(N,D,V){for(var L=0;4>L;L++)if(N[D+L]!=V.charCodeAt(L))return!0;return!1}function r(N,D,V,L,E){for(var B=0;B<E;B++)N[D+B]=V[L+B]}function i(N,D,V,L){for(var E=0;E<L;E++)N[D+E]=V}function s(N){return new Int32Array(N)}function o(N,D){for(var V=[],L=0;L<N;L++)V.push(new D);return V}function a(N,D){var V=[];return function L(E,B,I){for(var Q=I[B],Z=0;Z<Q&&(E.push(I.length>B+1?[]:new D),!(I.length<B+1));Z++)L(E[Z],B+1,I)}(V,0,N),V}var l=function(){var N=this;function D(m,b){for(var _=1<<b-1>>>0;m&_;)_>>>=1;return _?(m&_-1)+_:m}function V(m,b,_,T,R){e(!(T%_));do m[b+(T-=_)]=R;while(0<T)}function L(m,b,_,T,R){if(e(2328>=R),512>=R)var F=s(512);else if((F=s(R))==null)return 0;return function(z,$,H,X,ae,pe){var me,he,_e=$,ye=1<<H,le=s(16),ce=s(16);for(e(ae!=0),e(X!=null),e(z!=null),e(0<H),he=0;he<ae;++he){if(15<X[he])return 0;++le[X[he]]}if(le[0]==ae)return 0;for(ce[1]=0,me=1;15>me;++me){if(le[me]>1<<me)return 0;ce[me+1]=ce[me]+le[me]}for(he=0;he<ae;++he)me=X[he],0<X[he]&&(pe[ce[me]++]=he);if(ce[15]==1)return(X=new E).g=0,X.value=pe[0],V(z,_e,1,ye,X),ye;var we,Ne=-1,Se=ye-1,Ve=0,Re=1,tt=1,Fe=1<<H;for(he=0,me=1,ae=2;me<=H;++me,ae<<=1){if(Re+=tt<<=1,0>(tt-=le[me]))return 0;for(;0<le[me];--le[me])(X=new E).g=me,X.value=pe[he++],V(z,_e+Ve,ae,Fe,X),Ve=D(Ve,me)}for(me=H+1,ae=2;15>=me;++me,ae<<=1){if(Re+=tt<<=1,0>(tt-=le[me]))return 0;for(;0<le[me];--le[me]){if(X=new E,(Ve&Se)!=Ne){for(_e+=Fe,we=1<<(Ne=me)-H;15>Ne&&!(0>=(we-=le[Ne]));)++Ne,we<<=1;ye+=Fe=1<<(we=Ne-H),z[$+(Ne=Ve&Se)].g=we+H,z[$+Ne].value=_e-$-Ne}X.g=me-H,X.value=pe[he++],V(z,_e+(Ve>>H),ae,Fe,X),Ve=D(Ve,me)}}return Re!=2*ce[15]-1?0:ye}(m,b,_,T,R,F)}function E(){this.value=this.g=0}function B(){this.value=this.g=0}function I(){this.G=o(5,E),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(yr,B)}function Q(m,b,_,T){e(m!=null),e(b!=null),e(2147483648>T),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=b,m.pa=_,m.Jd=b,m.Yc=_+T,m.Zc=4<=T?_+T-4+1:_,se(m)}function Z(m,b){for(var _=0;0<b--;)_|=de(m,128)<<b;return _}function ne(m,b){var _=Z(m,b);return ue(m)?-_:_}function Y(m,b,_,T){var R,F=0;for(e(m!=null),e(b!=null),e(4294967288>T),m.Sb=T,m.Ra=0,m.u=0,m.h=0,4<T&&(T=4),R=0;R<T;++R)F+=b[_+R]<<8*R;m.Ra=F,m.bb=T,m.oa=b,m.pa=_}function ie(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<Au-8>>>0,++m.bb,m.u-=8;K(m)&&(m.h=1,m.u=0)}function q(m,b){if(e(0<=b),!m.h&&b<=Cu){var _=U(m)&_u[b];return m.u+=b,ie(m),_}return m.h=1,m.u=0}function G(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(m){return m.Ra>>>(m.u&Au-1)>>>0}function K(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>Au}function J(m,b){m.u=b,m.h=K(m)}function re(m){m.u>=Dh&&(e(m.u>=Dh),ie(m))}function se(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function ue(m){return Z(m,1)}function de(m,b){var _=m.Ca;0>m.b&&se(m);var T=m.b,R=_*b>>>8,F=(m.I>>>T>R)+0;for(F?(_-=R,m.I-=R+1<<T>>>0):_=R+1,T=_,R=0;256<=T;)R+=8,T>>=8;return T=7^R+hi[T],m.b-=T,m.Ca=(_<<T)-1,F}function xe(m,b,_){m[b+0]=_>>24&255,m[b+1]=_>>16&255,m[b+2]=_>>8&255,m[b+3]=_>>0&255}function ve(m,b){return m[b+0]<<0|m[b+1]<<8}function ke(m,b){return ve(m,b)|m[b+2]<<16}function Te(m,b){return ve(m,b)|ve(m,b+2)<<16}function Ie(m,b){var _=1<<b;return e(m!=null),e(0<b),m.X=s(_),m.X==null?0:(m.Mb=32-b,m.Xa=b,1)}function ge(m,b){e(m!=null),e(b!=null),e(m.Xa==b.Xa),r(b.X,0,m.X,0,1<<b.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function Ge(m,b,_,T){e(_!=null),e(T!=null);var R=_[0],F=T[0];return R==0&&(R=(m*F+b/2)/b),F==0&&(F=(b*R+m/2)/m),0>=R||0>=F?0:(_[0]=R,T[0]=F,1)}function Be(m,b){return m+(1<<b)-1>>>b}function Ae(m,b){return((4278255360&m)+(4278255360&b)>>>0&4278255360)+((16711935&m)+(16711935&b)>>>0&16711935)>>>0}function Ee(m,b){N[b]=function(_,T,R,F,z,$,H){var X;for(X=0;X<z;++X){var ae=N[m]($[H+X-1],R,F+X);$[H+X]=Ae(_[T+X],ae)}}}function Oe(){this.ud=this.hd=this.jd=0}function Me(m,b){return((4278124286&(m^b))>>>1)+(m&b)>>>0}function $e(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function Qe(m,b){return $e(m+(m-b+.5>>1))}function it(m,b,_){return Math.abs(b-_)-Math.abs(m-_)}function pt(m,b,_,T,R,F,z){for(T=F[z-1],_=0;_<R;++_)F[z+_]=T=Ae(m[b+_],T)}function St(m,b,_,T,R){var F;for(F=0;F<_;++F){var z=m[b+F],$=z>>8&255,H=16711935&(H=(H=16711935&z)+(($<<16)+$));T[R+F]=(4278255360&z)+H>>>0}}function It(m,b){b.jd=m>>0&255,b.hd=m>>8&255,b.ud=m>>16&255}function et(m,b,_,T,R,F){var z;for(z=0;z<T;++z){var $=b[_+z],H=$>>>8,X=$,ae=255&(ae=(ae=$>>>16)+((m.jd<<24>>24)*(H<<24>>24)>>>5));X=255&(X=(X=X+((m.hd<<24>>24)*(H<<24>>24)>>>5))+((m.ud<<24>>24)*(ae<<24>>24)>>>5)),R[F+z]=(4278255360&$)+(ae<<16)+X}}function yt(m,b,_,T,R){N[b]=function(F,z,$,H,X,ae,pe,me,he){for(H=pe;H<me;++H)for(pe=0;pe<he;++pe)X[ae++]=R($[T(F[z++])])},N[m]=function(F,z,$,H,X,ae,pe){var me=8>>F.b,he=F.Ea,_e=F.K[0],ye=F.w;if(8>me)for(F=(1<<F.b)-1,ye=(1<<me)-1;z<$;++z){var le,ce=0;for(le=0;le<he;++le)le&F||(ce=T(H[X++])),ae[pe++]=R(_e[ce&ye]),ce>>=me}else N["VP8LMapColor"+_](H,X,_e,ye,ae,pe,z,$,he)}}function De(m,b,_,T,R){for(_=b+_;b<_;){var F=m[b++];T[R++]=F>>16&255,T[R++]=F>>8&255,T[R++]=F>>0&255}}function Un(m,b,_,T,R){for(_=b+_;b<_;){var F=m[b++];T[R++]=F>>16&255,T[R++]=F>>8&255,T[R++]=F>>0&255,T[R++]=F>>24&255}}function At(m,b,_,T,R){for(_=b+_;b<_;){var F=(z=m[b++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;T[R++]=F,T[R++]=z}}function Ni(m,b,_,T,R){for(_=b+_;b<_;){var F=(z=m[b++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;T[R++]=F,T[R++]=z}}function Ft(m,b,_,T,R){for(_=b+_;b<_;){var F=m[b++];T[R++]=F>>0&255,T[R++]=F>>8&255,T[R++]=F>>16&255}}function Gt(m,b,_,T,R,F){if(F==0)for(_=b+_;b<_;)xe(T,((F=m[b++])[0]>>24|F[1]>>8&65280|F[2]<<8&16711680|F[3]<<24)>>>0),R+=32;else r(T,R,m,b,_)}function Zi(m,b){N[b][0]=N[m+"0"],N[b][1]=N[m+"1"],N[b][2]=N[m+"2"],N[b][3]=N[m+"3"],N[b][4]=N[m+"4"],N[b][5]=N[m+"5"],N[b][6]=N[m+"6"],N[b][7]=N[m+"7"],N[b][8]=N[m+"8"],N[b][9]=N[m+"9"],N[b][10]=N[m+"10"],N[b][11]=N[m+"11"],N[b][12]=N[m+"12"],N[b][13]=N[m+"13"],N[b][14]=N[m+"0"],N[b][15]=N[m+"0"]}function Rt(m){return m==nb||m==rb||m==Zm||m==ib}function No(){this.eb=[],this.size=this.A=this.fb=0}function cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new No,this.f.kb=new cn,this.sd=null}function Ns(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Tt(m,b){var _=m.T,T=b.ba.f.RGBA,R=T.eb,F=T.fb+m.ka*T.A,z=as[b.ba.S],$=m.y,H=m.O,X=m.f,ae=m.N,pe=m.ea,me=m.W,he=b.cc,_e=b.dc,ye=b.Mc,le=b.Nc,ce=m.ka,we=m.ka+m.T,Ne=m.U,Se=Ne+1>>1;for(ce==0?z($,H,null,null,X,ae,pe,me,X,ae,pe,me,R,F,null,null,Ne):(z(b.ec,b.fc,$,H,he,_e,ye,le,X,ae,pe,me,R,F-T.A,R,F,Ne),++_);ce+2<we;ce+=2)he=X,_e=ae,ye=pe,le=me,ae+=m.Rc,me+=m.Rc,F+=2*T.A,z($,(H+=2*m.fa)-m.fa,$,H,he,_e,ye,le,X,ae,pe,me,R,F-T.A,R,F,Ne);return H+=m.fa,m.j+we<m.o?(r(b.ec,b.fc,$,H,Ne),r(b.cc,b.dc,X,ae,Se),r(b.Mc,b.Nc,pe,me,Se),_--):1&we||z($,H,null,null,X,ae,pe,me,X,ae,pe,me,R,F+T.A,null,null,Ne),_}function Ei(m,b,_){var T=m.F,R=[m.J];if(T!=null){var F=m.U,z=b.ba.S,$=z==Qm||z==Zm;b=b.ba.f.RGBA;var H=[0],X=m.ka;H[0]=m.T,m.Kb&&(X==0?--H[0]:(--X,R[0]-=m.width),m.j+m.ka+m.T==m.o&&(H[0]=m.o-m.j-X));var ae=b.eb;X=b.fb+X*b.A,m=Xt(T,R[0],m.width,F,H,ae,X+($?0:3),b.A),e(_==H),m&&Rt(z)&&is(ae,X,$,F,H,b.A)}return 0}function Mn(m){var b=m.ma,_=b.ba.S,T=11>_,R=_==Xm||_==Jm||_==Qm||_==tb||_==12||Rt(_);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!Rh(b.Oa,m,R?11:12))return 0;if(R&&Rt(_)&&Pe(),m.da)alert("todo:use_scaling");else{if(T){if(b.Ib=ut,m.Kb){if(_=m.U+1>>1,b.memory=s(m.U+2*_),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+m.U,b.Mc=b.cc,b.Nc=b.dc+_,b.Ib=Tt,Pe()}}else alert("todo:EmitYUV");R&&(b.Jb=Ei,T&&fe())}if(T&&!pC){for(m=0;256>m;++m)a7[m]=89858*(m-128)+tg>>eg,u7[m]=-22014*(m-128)+tg,c7[m]=-45773*(m-128),l7[m]=113618*(m-128)+tg>>eg;for(m=qh;m<ab;++m)b=76283*(m-16)+tg>>eg,d7[m-qh]=Ii(b,255),h7[m-qh]=Ii(b+8>>4,15);pC=1}return 1}function ci(m){var b=m.ma,_=m.U,T=m.T;return e(!(1&m.ka)),0>=_||0>=T?0:(_=b.Ib(m,b),b.Jb!=null&&b.Jb(m,b,_),b.Dc+=_,1)}function gr(m){m.ma.memory=null}function Ye(m,b,_,T){return q(m,8)!=47?0:(b[0]=q(m,14)+1,_[0]=q(m,14)+1,T[0]=q(m,1),q(m,3)!=0?0:!m.h)}function ui(m,b){if(4>m)return m+1;var _=m-2>>1;return(2+(1&m)<<_)+q(b,_)+1}function es(m,b){return 120<b?b-120:1<=(_=((_=K8[b-1])>>4)*m+(8-(15&_)))?_:1;var _}function jt(m,b,_){var T=U(_),R=m[b+=255&T].g-8;return 0<R&&(J(_,_.u+8),T=U(_),b+=m[b].value,b+=T&(1<<R)-1),J(_,_.u+m[b].g),m[b].value}function bn(m,b,_){return _.g+=m.g,_.value+=m.value<<b>>>0,e(8>=_.g),m.g}function xn(m,b,_){var T=m.xc;return e((b=T==0?0:m.vc[m.md*(_>>T)+(b>>T)])<m.Wb),m.Ya[b]}function Mt(m,b,_,T){var R=m.ab,F=m.c*b,z=m.C;b=z+b;var $=_,H=T;for(T=m.Ta,_=m.Ua;0<R--;){var X=m.gc[R],ae=z,pe=b,me=$,he=H,_e=(H=T,$=_,X.Ea);switch(e(ae<pe),e(pe<=X.nc),X.hc){case 2:Um(me,he,(pe-ae)*_e,H,$);break;case 0:var ye=ae,le=pe,ce=H,we=$,Ne=(Fe=X).Ea;ye==0&&(Zv(me,he,null,null,1,ce,we),pt(me,he+1,0,0,Ne-1,ce,we+1),he+=Ne,we+=Ne,++ye);for(var Se=1<<Fe.b,Ve=Se-1,Re=Be(Ne,Fe.b),tt=Fe.K,Fe=Fe.w+(ye>>Fe.b)*Re;ye<le;){var Dt=tt,Bt=Fe,Lt=1;for(Fh(me,he,ce,we-Ne,1,ce,we);Lt<Ne;){var Nt=(Lt&~Ve)+Se;Nt>Ne&&(Nt=Ne),(0,ka[Dt[Bt++]>>8&15])(me,he+ +Lt,ce,we+Lt-Ne,Nt-Lt,ce,we+Lt),Lt=Nt}he+=Ne,we+=Ne,++ye&Ve||(Fe+=Re)}pe!=X.nc&&r(H,$-_e,H,$+(pe-ae-1)*_e,_e);break;case 1:for(_e=me,le=he,Ne=(me=X.Ea)-(we=me&~(ce=(he=1<<X.b)-1)),ye=Be(me,X.b),Se=X.K,X=X.w+(ae>>X.b)*ye;ae<pe;){for(Ve=Se,Re=X,tt=new Oe,Fe=le+we,Dt=le+me;le<Fe;)It(Ve[Re++],tt),Kl(tt,_e,le,he,H,$),le+=he,$+=he;le<Dt&&(It(Ve[Re++],tt),Kl(tt,_e,le,Ne,H,$),le+=Ne,$+=Ne),++ae&ce||(X+=ye)}break;case 3:if(me==H&&he==$&&0<X.b){for(le=H,me=_e=$+(pe-ae)*_e-(we=(pe-ae)*Be(X.Ea,X.b)),he=H,ce=$,ye=[],we=(Ne=we)-1;0<=we;--we)ye[we]=he[ce+we];for(we=Ne-1;0<=we;--we)le[me+we]=ye[we];ts(X,ae,pe,H,_e,H,$)}else ts(X,ae,pe,me,he,H,$)}$=T,H=_}H!=_&&r(T,_,$,H,F)}function dn(m,b){var _=m.V,T=m.Ba+m.c*m.C,R=b-m.C;if(e(b<=m.l.o),e(16>=R),0<R){var F=m.l,z=m.Ta,$=m.Ua,H=F.width;if(Mt(m,R,_,T),R=$=[$],e((_=m.C)<(T=b)),e(F.v<F.va),T>F.o&&(T=F.o),_<F.j){var X=F.j-_;_=F.j,R[0]+=X*H}if(_>=T?_=0:(R[0]+=4*F.v,F.ka=_-F.j,F.U=F.va-F.v,F.T=T-_,_=1),_){if($=$[0],11>(_=m.ca).S){var ae=_.f.RGBA,pe=(T=_.S,R=F.U,F=F.T,X=ae.eb,ae.A),me=F;for(ae=ae.fb+m.Ma*ae.A;0<me--;){var he=z,_e=$,ye=R,le=X,ce=ae;switch(T){case Ym:fi(he,_e,ye,le,ce);break;case Xm:Xr(he,_e,ye,le,ce);break;case nb:Xr(he,_e,ye,le,ce),is(le,ce,0,ye,1,0);break;case iC:Oo(he,_e,ye,le,ce);break;case Jm:Gt(he,_e,ye,le,ce,1);break;case rb:Gt(he,_e,ye,le,ce,1),is(le,ce,0,ye,1,0);break;case Qm:Gt(he,_e,ye,le,ce,0);break;case Zm:Gt(he,_e,ye,le,ce,0),is(le,ce,1,ye,1,0);break;case tb:_a(he,_e,ye,le,ce);break;case ib:_a(he,_e,ye,le,ce),Yt(le,ce,ye,1,0);break;case sC:Lo(he,_e,ye,le,ce);break;default:e(0)}$+=H,ae+=pe}m.Ma+=F}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=_.height)}}m.C=b,e(m.C<=m.i)}function qn(m){var b;if(0<m.ua)return 0;for(b=0;b<m.Wb;++b){var _=m.Ya[b].G,T=m.Ya[b].H;if(0<_[1][T[1]+0].g||0<_[2][T[2]+0].g||0<_[3][T[3]+0].g)return 0}return 1}function wn(m,b,_,T,R,F){if(m.Z!=0){var z=m.qd,$=m.rd;for(e(Na[m.Z]!=null);b<_;++b)Na[m.Z](z,$,T,R,T,R,F),z=T,$=R,R+=F;m.qd=z,m.rd=$}}function Ar(m,b){var _=m.l.ma,T=_.Z==0||_.Z==1?m.l.j:m.C;if(T=m.C<T?T:m.C,e(b<=m.l.o),b>T){var R=m.l.width,F=_.ca,z=_.tb+R*T,$=m.V,H=m.Ba+m.c*T,X=m.gc;e(m.ab==1),e(X[0].hc==3),qm(X[0],T,b,$,H,F,z),wn(_,T,b,F,z,R)}m.C=m.Ma=b}function Mi(m,b,_,T,R,F,z){var $=m.$/T,H=m.$%T,X=m.m,ae=m.s,pe=_+m.$,me=pe;R=_+T*R;var he=_+T*F,_e=280+ae.ua,ye=m.Pb?$:16777216,le=0<ae.ua?ae.Wa:null,ce=ae.wc,we=pe<he?xn(ae,H,$):null;e(m.C<F),e(he<=R);var Ne=!1;e:for(;;){for(;Ne||pe<he;){var Se=0;if($>=ye){var Ve=pe-_;e((ye=m).Pb),ye.wd=ye.m,ye.xd=Ve,0<ye.s.ua&&ge(ye.s.Wa,ye.s.vb),ye=$+Y8}if(H&ce||(we=xn(ae,H,$)),e(we!=null),we.Qb&&(b[pe]=we.qb,Ne=!0),!Ne)if(re(X),we.jc){Se=X,Ve=b;var Re=pe,tt=we.pd[U(Se)&yr-1];e(we.jc),256>tt.g?(J(Se,Se.u+tt.g),Ve[Re]=tt.value,Se=0):(J(Se,Se.u+tt.g-256),e(256<=tt.value),Se=tt.value),Se==0&&(Ne=!0)}else Se=jt(we.G[0],we.H[0],X);if(X.h)break;if(Ne||256>Se){if(!Ne)if(we.nd)b[pe]=(we.qb|Se<<8)>>>0;else{if(re(X),Ne=jt(we.G[1],we.H[1],X),re(X),Ve=jt(we.G[2],we.H[2],X),Re=jt(we.G[3],we.H[3],X),X.h)break;b[pe]=(Re<<24|Ne<<16|Se<<8|Ve)>>>0}if(Ne=!1,++pe,++H>=T&&(H=0,++$,z!=null&&$<=F&&!($%16)&&z(m,$),le!=null))for(;me<pe;)Se=b[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se}else if(280>Se){if(Se=ui(Se-256,X),Ve=jt(we.G[4],we.H[4],X),re(X),Ve=es(T,Ve=ui(Ve,X)),X.h)break;if(pe-_<Ve||R-pe<Se)break e;for(Re=0;Re<Se;++Re)b[pe+Re]=b[pe+Re-Ve];for(pe+=Se,H+=Se;H>=T;)H-=T,++$,z!=null&&$<=F&&!($%16)&&z(m,$);if(e(pe<=R),H&ce&&(we=xn(ae,H,$)),le!=null)for(;me<pe;)Se=b[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se}else{if(!(Se<_e))break e;for(Ne=Se-280,e(le!=null);me<pe;)Se=b[me++],le.X[(506832829*Se&4294967295)>>>le.Mb]=Se;Se=pe,e(!(Ne>>>(Ve=le).Xa)),b[Se]=Ve.X[Ne],Ne=!0}Ne||e(X.h==K(X))}if(m.Pb&&X.h&&pe<R)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&ge(m.s.vb,m.s.Wa);else{if(X.h)break e;z?.(m,$>F?F:$),m.a=0,m.$=pe-_}return 1}return m.a=3,0}function Li(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var b=m.Wa;b!=null&&(b.X=null),m.vb=null,e(m!=null)}function Tr(){var m=new Qv;return m==null?null:(m.a=0,m.xb=lC,Zi("Predictor","VP8LPredictors"),Zi("Predictor","VP8LPredictors_C"),Zi("PredictorAdd","VP8LPredictorsAdd"),Zi("PredictorAdd","VP8LPredictorsAdd_C"),Um=St,Kl=et,fi=De,Xr=Un,_a=At,Lo=Ni,Oo=Ft,N.VP8LMapColor32b=Tu,N.VP8LMapColor8b=Wm,m)}function Oi(m,b,_,T,R){var F=1,z=[m],$=[b],H=T.m,X=T.s,ae=null,pe=0;e:for(;;){if(_)for(;F&&q(H,1);){var me=z,he=$,_e=T,ye=1,le=_e.m,ce=_e.gc[_e.ab],we=q(le,2);if(_e.Oc&1<<we)F=0;else{switch(_e.Oc|=1<<we,ce.hc=we,ce.Ea=me[0],ce.nc=he[0],ce.K=[null],++_e.ab,e(4>=_e.ab),we){case 0:case 1:ce.b=q(le,3)+2,ye=Oi(Be(ce.Ea,ce.b),Be(ce.nc,ce.b),0,_e,ce.K),ce.K=ce.K[0];break;case 3:var Ne,Se=q(le,8)+1,Ve=16<Se?0:4<Se?1:2<Se?2:3;if(me[0]=Be(ce.Ea,Ve),ce.b=Ve,Ne=ye=Oi(Se,1,0,_e,ce.K)){var Re,tt=Se,Fe=ce,Dt=1<<(8>>Fe.b),Bt=s(Dt);if(Bt==null)Ne=0;else{var Lt=Fe.K[0],Nt=Fe.w;for(Bt[0]=Fe.K[0][0],Re=1;Re<1*tt;++Re)Bt[Re]=Ae(Lt[Nt+Re],Bt[Re-1]);for(;Re<4*Dt;++Re)Bt[Re]=0;Fe.K[0]=null,Fe.K[0]=Bt,Ne=1}}ye=Ne;break;case 2:break;default:e(0)}F=ye}}if(z=z[0],$=$[0],F&&q(H,1)&&!(F=1<=(pe=q(H,4))&&11>=pe)){T.a=3;break e}var Wt;if(Wt=F)t:{var qt,vt,Hn,pi=T,Kn=z,mi=$,zt=pe,ji=_,Di=pi.m,ir=pi.s,vr=[null],Qr=1,ls=0,so=G8[zt];n:for(;;){if(ji&&q(Di,1)){var sr=q(Di,3)+2,Do=Be(Kn,sr),Ql=Be(mi,sr),Lu=Do*Ql;if(!Oi(Do,Ql,0,pi,vr))break n;for(vr=vr[0],ir.xc=sr,qt=0;qt<Lu;++qt){var Pa=vr[qt]>>8&65535;vr[qt]=Pa,Pa>=Qr&&(Qr=Pa+1)}}if(Di.h)break n;for(vt=0;5>vt;++vt){var kn=oC[vt];!vt&&0<zt&&(kn+=1<<zt),ls<kn&&(ls=kn)}var lb=o(Qr*so,E),yC=Qr,vC=o(yC,I);if(vC==null)var rg=null;else e(65536>=yC),rg=vC;var Wh=s(ls);if(rg==null||Wh==null||lb==null){pi.a=1;break n}var ig=lb;for(qt=Hn=0;qt<Qr;++qt){var Os=rg[qt],Ou=Os.G,Iu=Os.H,bC=0,sg=1,xC=0;for(vt=0;5>vt;++vt){kn=oC[vt],Ou[vt]=ig,Iu[vt]=Hn,!vt&&0<zt&&(kn+=1<<zt);i:{var og,cb=kn,ag=pi,Hh=Wh,m7=ig,g7=Hn,ub=0,Ea=ag.m,y7=q(Ea,1);if(i(Hh,0,0,cb),y7){var v7=q(Ea,1)+1,b7=q(Ea,1),wC=q(Ea,b7==0?1:8);Hh[wC]=1,v7==2&&(Hh[wC=q(Ea,8)]=1);var lg=1}else{var SC=s(19),kC=q(Ea,4)+4;if(19<kC){ag.a=3;var cg=0;break i}for(og=0;og<kC;++og)SC[H8[og]]=q(Ea,3);var db=void 0,Kh=void 0,_C=ag,x7=SC,ug=cb,CC=Hh,hb=0,Ma=_C.m,AC=8,TC=o(128,E);r:for(;L(TC,0,7,x7,19);){if(q(Ma,1)){var w7=2+2*q(Ma,3);if((db=2+q(Ma,w7))>ug)break r}else db=ug;for(Kh=0;Kh<ug&&db--;){re(Ma);var NC=TC[0+(127&U(Ma))];J(Ma,Ma.u+NC.g);var Ru=NC.value;if(16>Ru)CC[Kh++]=Ru,Ru!=0&&(AC=Ru);else{var S7=Ru==16,PC=Ru-16,k7=q8[PC],EC=q(Ma,U8[PC])+k7;if(Kh+EC>ug)break r;for(var _7=S7?AC:0;0<EC--;)CC[Kh++]=_7}}hb=1;break r}hb||(_C.a=3),lg=hb}(lg=lg&&!Ea.h)&&(ub=L(m7,g7,8,Hh,cb)),lg&&ub!=0?cg=ub:(ag.a=3,cg=0)}if(cg==0)break n;if(sg&&W8[vt]==1&&(sg=ig[Hn].g==0),bC+=ig[Hn].g,Hn+=cg,3>=vt){var Gh,fb=Wh[0];for(Gh=1;Gh<kn;++Gh)Wh[Gh]>fb&&(fb=Wh[Gh]);xC+=fb}}if(Os.nd=sg,Os.Qb=0,sg&&(Os.qb=(Ou[3][Iu[3]+0].value<<24|Ou[1][Iu[1]+0].value<<16|Ou[2][Iu[2]+0].value)>>>0,bC==0&&256>Ou[0][Iu[0]+0].value&&(Os.Qb=1,Os.qb+=Ou[0][Iu[0]+0].value<<8)),Os.jc=!Os.Qb&&6>xC,Os.jc){var dg,Fo=Os;for(dg=0;dg<yr;++dg){var La=dg,Oa=Fo.pd[La],hg=Fo.G[0][Fo.H[0]+La];256<=hg.value?(Oa.g=hg.g+256,Oa.value=hg.value):(Oa.g=0,Oa.value=0,La>>=bn(hg,8,Oa),La>>=bn(Fo.G[1][Fo.H[1]+La],16,Oa),La>>=bn(Fo.G[2][Fo.H[2]+La],0,Oa),bn(Fo.G[3][Fo.H[3]+La],24,Oa))}}}ir.vc=vr,ir.Wb=Qr,ir.Ya=rg,ir.yc=lb,Wt=1;break t}Wt=0}if(!(F=Wt)){T.a=3;break e}if(0<pe){if(X.ua=1<<pe,!Ie(X.Wa,pe)){T.a=1,F=0;break e}}else X.ua=0;var pb=T,MC=z,C7=$,mb=pb.s,gb=mb.xc;if(pb.c=MC,pb.i=C7,mb.md=Be(MC,gb),mb.wc=gb==0?-1:(1<<gb)-1,_){T.xb=n7;break e}if((ae=s(z*$))==null){T.a=1,F=0;break e}F=(F=Mi(T,ae,0,z,$,$,null))&&!H.h;break e}return F?(R!=null?R[0]=ae:(e(ae==null),e(_)),T.$=0,_||Li(X)):Li(X),F}function Po(m,b){var _=m.c*m.i,T=_+b+16*b;return e(m.c<=b),m.V=s(T),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+_+b,1)}function ba(m,b){var _=m.C,T=b-_,R=m.V,F=m.Ba+m.c*_;for(e(b<=m.l.o);0<T;){var z=16<T?16:T,$=m.l.ma,H=m.l.width,X=H*z,ae=$.ca,pe=$.tb+H*_,me=m.Ta,he=m.Ua;Mt(m,z,R,F),In(me,he,ae,pe,X),wn($,_,_+z,ae,pe,H),T-=z,R+=z*m.c,_+=z}e(_==b),m.C=m.Ma=b}function Nr(){this.ub=this.yd=this.td=this.Rb=0}function uu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function du(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function km(){this.Yb=function(){var m=[];return function b(_,T,R){for(var F=R[T],z=0;z<F&&(_.push(R.length>T+1?[]:0),!(R.length<T+1));z++)b(_[z],T+1,R)}(m,0,[3,11]),m}()}function Pv(){this.jb=s(3),this.Wc=a([4,8],km),this.Xc=a([4,17],km)}function Ev(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hu(){this.ld=this.La=this.dd=this.tc=0}function _m(){this.Na=this.la=0}function Mv(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function bh(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Lv(){this.uc=this.M=this.Nb=0,this.wa=Array(new hu),this.Y=0,this.ya=Array(new bh),this.aa=0,this.l=new fu}function Cm(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ov(){this.cb=this.a=0,this.sc="",this.m=new G,this.Od=new Nr,this.Kc=new uu,this.ed=new Ev,this.Qa=new du,this.Ic=this.$c=this.Aa=0,this.D=new Lv,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,G),this.ia=0,this.pb=o(4,Mv),this.Pa=new Pv,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Cm),this.Hd=0,this.rb=Array(new _m),this.sb=0,this.wa=Array(new hu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new bh),this.L=this.aa=0,this.gd=a([4,2],hu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Iv(){var m=new Ov;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,Uh||(Uh=Nm)),m}function Ln(m,b,_){return m.a==0&&(m.a=b,m.sc=_,m.cb=0),0}function Am(m,b,_){return 3<=_&&m[b+0]==157&&m[b+1]==1&&m[b+2]==42}function Tm(m,b){if(m==null)return 0;if(m.a=0,m.sc="OK",b==null)return Ln(m,2,"null VP8Io passed to VP8GetHeaders()");var _=b.data,T=b.w,R=b.ha;if(4>R)return Ln(m,7,"Truncated header.");var F=_[T+0]|_[T+1]<<8|_[T+2]<<16,z=m.Od;if(z.Rb=!(1&F),z.td=F>>1&7,z.yd=F>>4&1,z.ub=F>>5,3<z.td)return Ln(m,3,"Incorrect keyframe parameters.");if(!z.yd)return Ln(m,4,"Frame not displayable.");T+=3,R-=3;var $=m.Kc;if(z.Rb){if(7>R)return Ln(m,7,"cannot parse picture header");if(!Am(_,T,R))return Ln(m,3,"Bad code word");$.c=16383&(_[T+4]<<8|_[T+3]),$.Td=_[T+4]>>6,$.i=16383&(_[T+6]<<8|_[T+5]),$.Ud=_[T+6]>>6,T+=7,R-=7,m.za=$.c+15>>4,m.Ub=$.i+15>>4,b.width=$.c,b.height=$.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,i((F=m.Pa).jb,0,255,F.jb.length),e((F=m.Qa)!=null),F.Cb=0,F.Bb=0,F.Fb=1,i(F.Zb,0,0,F.Zb.length),i(F.Lb,0,0,F.Lb)}if(z.ub>R)return Ln(m,7,"bad partition length");Q(F=m.m,_,T,z.ub),T+=z.ub,R-=z.ub,z.Rb&&($.Ld=ue(F),$.Kd=ue(F)),$=m.Qa;var H,X=m.Pa;if(e(F!=null),e($!=null),$.Cb=ue(F),$.Cb){if($.Bb=ue(F),ue(F)){for($.Fb=ue(F),H=0;4>H;++H)$.Zb[H]=ue(F)?ne(F,7):0;for(H=0;4>H;++H)$.Lb[H]=ue(F)?ne(F,6):0}if($.Bb)for(H=0;3>H;++H)X.jb[H]=ue(F)?Z(F,8):255}else $.Bb=0;if(F.Ka)return Ln(m,3,"cannot parse segment header");if(($=m.ed).zd=ue(F),$.Tb=Z(F,6),$.wb=Z(F,3),$.Pc=ue(F),$.Pc&&ue(F)){for(X=0;4>X;++X)ue(F)&&($.vd[X]=ne(F,6));for(X=0;4>X;++X)ue(F)&&($.od[X]=ne(F,6))}if(m.L=$.Tb==0?0:$.zd?1:2,F.Ka)return Ln(m,3,"cannot parse filter header");var ae=R;if(R=H=T,T=H+ae,$=ae,m.Xb=(1<<Z(m.m,2))-1,ae<3*(X=m.Xb))_=7;else{for(H+=3*X,$-=3*X,ae=0;ae<X;++ae){var pe=_[R+0]|_[R+1]<<8|_[R+2]<<16;pe>$&&(pe=$),Q(m.Jc[+ae],_,H,pe),H+=pe,$-=pe,R+=3}Q(m.Jc[+X],_,H,$),_=H<T?0:5}if(_!=0)return Ln(m,_,"cannot parse partitions");for(_=Z(H=m.m,7),R=ue(H)?ne(H,4):0,T=ue(H)?ne(H,4):0,$=ue(H)?ne(H,4):0,X=ue(H)?ne(H,4):0,H=ue(H)?ne(H,4):0,ae=m.Qa,pe=0;4>pe;++pe){if(ae.Cb){var me=ae.Zb[pe];ae.Fb||(me+=_)}else{if(0<pe){m.pb[pe]=m.pb[0];continue}me=_}var he=m.pb[pe];he.Sc[0]=sb[Ii(me+R,127)],he.Sc[1]=ob[Ii(me+0,127)],he.Eb[0]=2*sb[Ii(me+T,127)],he.Eb[1]=101581*ob[Ii(me+$,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=sb[Ii(me+X,117)],he.Qc[1]=ob[Ii(me+H,127)],he.lc=me+H}if(!z.Rb)return Ln(m,4,"Not a key frame.");for(ue(F),z=m.Pa,_=0;4>_;++_){for(R=0;8>R;++R)for(T=0;3>T;++T)for($=0;11>$;++$)X=de(F,e7[_][R][T][$])?Z(F,8):Q8[_][R][T][$],z.Wc[_][R].Yb[T][$]=X;for(R=0;17>R;++R)z.Xc[_][R]=z.Wc[_][t7[R]]}return m.kc=ue(F),m.kc&&(m.Bd=Z(F,8)),m.cb=1}function Nm(m,b,_,T,R,F,z){var $=b[R].Yb[_];for(_=0;16>R;++R){if(!de(m,$[_+0]))return R;for(;!de(m,$[_+1]);)if($=b[++R].Yb[0],_=0,R==16)return 16;var H=b[R+1].Yb;if(de(m,$[_+2])){var X=m,ae=0;if(de(X,(me=$)[(pe=_)+3]))if(de(X,me[pe+6])){for($=0,pe=2*(ae=de(X,me[pe+8]))+(me=de(X,me[pe+9+ae])),ae=0,me=X8[pe];me[$];++$)ae+=ae+de(X,me[$]);ae+=3+(8<<pe)}else de(X,me[pe+7])?(ae=7+2*de(X,165),ae+=de(X,145)):ae=5+de(X,159);else ae=de(X,me[pe+4])?3+de(X,me[pe+5]):2;$=H[2]}else ae=1,$=H[1];H=z+J8[R],0>(X=m).b&&se(X);var pe,me=X.b,he=(pe=X.Ca>>1)-(X.I>>me)>>31;--X.b,X.Ca+=he,X.Ca|=1,X.I-=(pe+1&he)<<me,F[H]=((ae^he)-he)*T[(0<R)+0]}return 16}function xh(m){var b=m.rb[m.sb-1];b.la=0,b.Na=0,i(m.zc,0,0,m.zc.length),m.ja=0}function Rv(m,b){if(m==null)return 0;if(b==null)return Ln(m,2,"NULL VP8Io parameter in VP8Decode().");if(!m.cb&&!Tm(m,b))return 0;if(e(m.cb),b.ac==null||b.ac(b)){b.ob&&(m.L=0);var _=ng[m.L];if(m.L==2?(m.yb=0,m.zb=0):(m.yb=b.v-_>>4,m.zb=b.j-_>>4,0>m.yb&&(m.yb=0),0>m.zb&&(m.zb=0)),m.Va=b.o+15+_>>4,m.Hb=b.va+15+_>>4,m.Hb>m.za&&(m.Hb=m.za),m.Va>m.Ub&&(m.Va=m.Ub),0<m.L){var T=m.ed;for(_=0;4>_;++_){var R;if(m.Qa.Cb){var F=m.Qa.Lb[_];m.Qa.Fb||(F+=T.Tb)}else F=T.Tb;for(R=0;1>=R;++R){var z=m.gd[_][R],$=F;if(T.Pc&&($+=T.vd[0],R&&($+=T.od[0])),0<($=0>$?0:63<$?63:$)){var H=$;0<T.wb&&(H=4<T.wb?H>>2:H>>1)>9-T.wb&&(H=9-T.wb),1>H&&(H=1),z.dd=H,z.tc=2*$+H,z.ld=40<=$?2:15<=$?1:0}else z.tc=0;z.La=R}}}_=0}else Ln(m,6,"Frame setup failed"),_=m.a;if(_=_==0){if(_){m.$c=0,0<m.Aa||(m.Ic=p7);e:{_=m.Ic,T=4*(H=m.za);var X=32*H,ae=H+1,pe=0<m.L?H*(0<m.Aa?2:1):0,me=(m.Aa==2?2:1)*H;if((z=T+832+(R=3*(16*_+ng[m.L])/2*X)+(F=m.Fa!=null&&0<m.Fa.length?m.Kc.c*m.Kc.i:0))!=z)_=0;else{if(z>m.Vb){if(m.Vb=0,m.Ec=s(z),m.Fc=0,m.Ec==null){_=Ln(m,1,"no memory during frame initialization.");break e}m.Vb=z}z=m.Ec,$=m.Fc,m.Ac=z,m.Bc=$,$+=T,m.Gd=o(X,Cm),m.Hd=0,m.rb=o(ae+1,_m),m.sb=1,m.wa=pe?o(pe,hu):null,m.Y=0,m.D.Nb=0,m.D.wa=m.wa,m.D.Y=m.Y,0<m.Aa&&(m.D.Y+=H),e(!0),m.oc=z,m.pc=$,$+=832,m.ya=o(me,bh),m.aa=0,m.D.ya=m.ya,m.D.aa=m.aa,m.Aa==2&&(m.D.aa+=H),m.R=16*H,m.B=8*H,H=(X=ng[m.L])*m.R,X=X/2*m.B,m.sa=z,m.ta=$+H,m.qa=m.sa,m.ra=m.ta+16*_*m.R+X,m.Ha=m.qa,m.Ia=m.ra+8*_*m.B+X,m.$c=0,$+=R,m.mb=F?z:null,m.nb=F?$:null,e($+F<=m.Fc+m.Vb),xh(m),i(m.Ac,m.Bc,0,T),_=1}}if(_){if(b.ka=0,b.y=m.sa,b.O=m.ta,b.f=m.qa,b.N=m.ra,b.ea=m.Ha,b.Vd=m.Ia,b.fa=m.R,b.Rc=m.B,b.F=null,b.J=0,!Km){for(_=-255;255>=_;++_)Qn[255+_]=0>_?-_:_;for(_=-1020;1020>=_;++_)Ro[1020+_]=-128>_?-128:127<_?127:_;for(_=-112;112>=_;++_)Vh[112+_]=-16>_?-16:15<_?15:_;for(_=-255;510>=_;++_)Mu[255+_]=0>_?0:255<_?255:_;Km=1}Nu=Fv,Io=jv,Bh=Em,Jr=Dv,ns=Mm,On=Pm,Pu=Ah,Hm=Wl,zh=Jv,Gl=Th,Yl=Xv,Ca=bu,Xl=Nh,Eu=zm,Jl=Bm,Aa=ro,$h=Mo,rs=Yv,Ls[0]=no,Ls[1]=Bv,Ls[2]=Uv,Ls[3]=qv,Ls[4]=Im,Ls[5]=yu,Ls[6]=Rm,Ls[7]=kh,Ls[8]=Hv,Ls[9]=Wv,Ta[0]=Lm,Ta[1]=$v,Ta[2]=Eo,Ta[3]=mu,Ta[4]=Pr,Ta[5]=Vv,Ta[6]=Om,jo[0]=xa,jo[1]=zv,jo[2]=Kv,jo[3]=_h,jo[4]=ql,jo[5]=Gv,jo[6]=Ch,_=1}else _=0}_&&(_=function(he,_e){for(he.M=0;he.M<he.Va;++he.M){var ye,le=he.Jc[he.M&he.Xb],ce=he.m,we=he;for(ye=0;ye<we.za;++ye){var Ne=ce,Se=we,Ve=Se.Ac,Re=Se.Bc+4*ye,tt=Se.zc,Fe=Se.ya[Se.aa+ye];if(Se.Qa.Bb?Fe.$b=de(Ne,Se.Pa.jb[0])?2+de(Ne,Se.Pa.jb[2]):de(Ne,Se.Pa.jb[1]):Fe.$b=0,Se.kc&&(Fe.Ad=de(Ne,Se.Bd)),Fe.Za=!de(Ne,145)+0,Fe.Za){var Dt=Fe.Ob,Bt=0;for(Se=0;4>Se;++Se){var Lt,Nt=tt[0+Se];for(Lt=0;4>Lt;++Lt){Nt=Z8[Ve[Re+Lt]][Nt];for(var Wt=aC[de(Ne,Nt[0])];0<Wt;)Wt=aC[2*Wt+de(Ne,Nt[Wt])];Nt=-Wt,Ve[Re+Lt]=Nt}r(Dt,Bt,Ve,Re,4),Bt+=4,tt[0+Se]=Nt}}else Nt=de(Ne,156)?de(Ne,128)?1:3:de(Ne,163)?2:0,Fe.Ob[0]=Nt,i(Ve,Re,Nt,4),i(tt,0,Nt,4);Fe.Dd=de(Ne,142)?de(Ne,114)?de(Ne,183)?1:3:2:0}if(we.m.Ka)return Ln(he,7,"Premature end-of-partition0 encountered.");for(;he.ja<he.za;++he.ja){if(we=le,Ne=(ce=he).rb[ce.sb-1],Ve=ce.rb[ce.sb+ce.ja],ye=ce.ya[ce.aa+ce.ja],Re=ce.kc?ye.Ad:0)Ne.la=Ve.la=0,ye.Za||(Ne.Na=Ve.Na=0),ye.Hc=0,ye.Gc=0,ye.ia=0;else{var qt,vt;if(Ne=Ve,Ve=we,Re=ce.Pa.Xc,tt=ce.ya[ce.aa+ce.ja],Fe=ce.pb[tt.$b],Se=tt.ad,Dt=0,Bt=ce.rb[ce.sb-1],Nt=Lt=0,i(Se,Dt,0,384),tt.Za)var Hn=0,pi=Re[3];else{Wt=s(16);var Kn=Ne.Na+Bt.Na;if(Kn=Uh(Ve,Re[1],Kn,Fe.Eb,0,Wt,0),Ne.Na=Bt.Na=(0<Kn)+0,1<Kn)Nu(Wt,0,Se,Dt);else{var mi=Wt[0]+3>>3;for(Wt=0;256>Wt;Wt+=16)Se[Dt+Wt]=mi}Hn=1,pi=Re[0]}var zt=15&Ne.la,ji=15&Bt.la;for(Wt=0;4>Wt;++Wt){var Di=1&ji;for(mi=vt=0;4>mi;++mi)zt=zt>>1|(Di=(Kn=Uh(Ve,pi,Kn=Di+(1&zt),Fe.Sc,Hn,Se,Dt))>Hn)<<7,vt=vt<<2|(3<Kn?3:1<Kn?2:Se[Dt+0]!=0),Dt+=16;zt>>=4,ji=ji>>1|Di<<7,Lt=(Lt<<8|vt)>>>0}for(pi=zt,Hn=ji>>4,qt=0;4>qt;qt+=2){for(vt=0,zt=Ne.la>>4+qt,ji=Bt.la>>4+qt,Wt=0;2>Wt;++Wt){for(Di=1&ji,mi=0;2>mi;++mi)Kn=Di+(1&zt),zt=zt>>1|(Di=0<(Kn=Uh(Ve,Re[2],Kn,Fe.Qc,0,Se,Dt)))<<3,vt=vt<<2|(3<Kn?3:1<Kn?2:Se[Dt+0]!=0),Dt+=16;zt>>=2,ji=ji>>1|Di<<5}Nt|=vt<<4*qt,pi|=zt<<4<<qt,Hn|=(240&ji)<<qt}Ne.la=pi,Bt.la=Hn,tt.Hc=Lt,tt.Gc=Nt,tt.ia=43690&Nt?0:Fe.ia,Re=!(Lt|Nt)}if(0<ce.L&&(ce.wa[ce.Y+ce.ja]=ce.gd[ye.$b][ye.Za],ce.wa[ce.Y+ce.ja].La|=!Re),we.Ka)return Ln(he,7,"Premature end-of-file encountered.")}if(xh(he),ce=_e,we=1,ye=(le=he).D,Ne=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(ye.M=le.M,ye.uc=Ne,Ih(le,ye),we=1,ye=(vt=le.D).Nb,Ne=(Nt=ng[le.L])*le.R,Ve=Nt/2*le.B,Wt=16*ye*le.R,mi=8*ye*le.B,Re=le.sa,tt=le.ta-Ne+Wt,Fe=le.qa,Se=le.ra-Ve+mi,Dt=le.Ha,Bt=le.Ia-Ve+mi,ji=(zt=vt.M)==0,Lt=zt>=le.Va-1,le.Aa==2&&Ih(le,vt),vt.uc)for(Di=(Kn=le).D.M,e(Kn.D.uc),vt=Kn.yb;vt<Kn.Hb;++vt){Hn=vt,pi=Di;var ir=(vr=(kn=Kn).D).Nb;qt=kn.R;var vr=vr.wa[vr.Y+Hn],Qr=kn.sa,ls=kn.ta+16*ir*qt+16*Hn,so=vr.dd,sr=vr.tc;if(sr!=0)if(e(3<=sr),kn.L==1)0<Hn&&Aa(Qr,ls,qt,sr+4),vr.La&&rs(Qr,ls,qt,sr),0<pi&&Jl(Qr,ls,qt,sr+4),vr.La&&$h(Qr,ls,qt,sr);else{var Do=kn.B,Ql=kn.qa,Lu=kn.ra+8*ir*Do+8*Hn,Pa=kn.Ha,kn=kn.Ia+8*ir*Do+8*Hn;ir=vr.ld,0<Hn&&(Hm(Qr,ls,qt,sr+4,so,ir),Gl(Ql,Lu,Pa,kn,Do,sr+4,so,ir)),vr.La&&(Ca(Qr,ls,qt,sr,so,ir),Eu(Ql,Lu,Pa,kn,Do,sr,so,ir)),0<pi&&(Pu(Qr,ls,qt,sr+4,so,ir),zh(Ql,Lu,Pa,kn,Do,sr+4,so,ir)),vr.La&&(Yl(Qr,ls,qt,sr,so,ir),Xl(Ql,Lu,Pa,kn,Do,sr,so,ir))}}if(le.ia&&alert("todo:DitherRow"),ce.put!=null){if(vt=16*zt,zt=16*(zt+1),ji?(ce.y=le.sa,ce.O=le.ta+Wt,ce.f=le.qa,ce.N=le.ra+mi,ce.ea=le.Ha,ce.W=le.Ia+mi):(vt-=Nt,ce.y=Re,ce.O=tt,ce.f=Fe,ce.N=Se,ce.ea=Dt,ce.W=Bt),Lt||(zt-=Nt),zt>ce.o&&(zt=ce.o),ce.F=null,ce.J=null,le.Fa!=null&&0<le.Fa.length&&vt<zt&&(ce.J=Lh(le,ce,vt,zt-vt),ce.F=le.mb,ce.F==null&&ce.F.length==0)){we=Ln(le,3,"Could not decode alpha data.");break e}vt<ce.j&&(Nt=ce.j-vt,vt=ce.j,e(!(1&Nt)),ce.O+=le.R*Nt,ce.N+=le.B*(Nt>>1),ce.W+=le.B*(Nt>>1),ce.F!=null&&(ce.J+=ce.width*Nt)),vt<zt&&(ce.O+=ce.v,ce.N+=ce.v>>1,ce.W+=ce.v>>1,ce.F!=null&&(ce.J+=ce.v),ce.ka=vt-ce.j,ce.U=ce.va-ce.v,ce.T=zt-vt,we=ce.put(ce))}ye+1!=le.Ic||Lt||(r(le.sa,le.ta-Ne,Re,tt+16*le.R,Ne),r(le.qa,le.ra-Ve,Fe,Se+8*le.B,Ve),r(le.Ha,le.Ia-Ve,Dt,Bt+8*le.B,Ve))}if(!we)return Ln(he,6,"Output aborted.")}return 1}(m,b)),b.bc!=null&&b.bc(b),_&=1}return _?(m.cb=0,_):0}function Ps(m,b,_,T,R){R=m[b+_+32*T]+(R>>3),m[b+_+32*T]=-256&R?0>R?0:255:R}function pu(m,b,_,T,R,F){Ps(m,b,0,_,T+R),Ps(m,b,1,_,T+F),Ps(m,b,2,_,T-F),Ps(m,b,3,_,T-R)}function di(m){return(20091*m>>16)+m}function wh(m,b,_,T){var R,F=0,z=s(16);for(R=0;4>R;++R){var $=m[b+0]+m[b+8],H=m[b+0]-m[b+8],X=(35468*m[b+4]>>16)-di(m[b+12]),ae=di(m[b+4])+(35468*m[b+12]>>16);z[F+0]=$+ae,z[F+1]=H+X,z[F+2]=H-X,z[F+3]=$-ae,F+=4,b++}for(R=F=0;4>R;++R)$=(m=z[F+0]+4)+z[F+8],H=m-z[F+8],X=(35468*z[F+4]>>16)-di(z[F+12]),Ps(_,T,0,0,$+(ae=di(z[F+4])+(35468*z[F+12]>>16))),Ps(_,T,1,0,H+X),Ps(_,T,2,0,H-X),Ps(_,T,3,0,$-ae),F++,T+=32}function Pm(m,b,_,T){var R=m[b+0]+4,F=35468*m[b+4]>>16,z=di(m[b+4]),$=35468*m[b+1]>>16;pu(_,T,0,R+z,m=di(m[b+1]),$),pu(_,T,1,R+F,m,$),pu(_,T,2,R-F,m,$),pu(_,T,3,R-z,m,$)}function jv(m,b,_,T,R){wh(m,b,_,T),R&&wh(m,b+16,_,T+4)}function Em(m,b,_,T){Io(m,b+0,_,T,1),Io(m,b+32,_,T+128,1)}function Dv(m,b,_,T){var R;for(m=m[b+0]+4,R=0;4>R;++R)for(b=0;4>b;++b)Ps(_,T,b,R,m)}function Mm(m,b,_,T){m[b+0]&&Jr(m,b+0,_,T),m[b+16]&&Jr(m,b+16,_,T+4),m[b+32]&&Jr(m,b+32,_,T+128),m[b+48]&&Jr(m,b+48,_,T+128+4)}function Fv(m,b,_,T){var R,F=s(16);for(R=0;4>R;++R){var z=m[b+0+R]+m[b+12+R],$=m[b+4+R]+m[b+8+R],H=m[b+4+R]-m[b+8+R],X=m[b+0+R]-m[b+12+R];F[0+R]=z+$,F[8+R]=z-$,F[4+R]=X+H,F[12+R]=X-H}for(R=0;4>R;++R)z=(m=F[0+4*R]+3)+F[3+4*R],$=F[1+4*R]+F[2+4*R],H=F[1+4*R]-F[2+4*R],X=m-F[3+4*R],_[T+0]=z+$>>3,_[T+16]=X+H>>3,_[T+32]=z-$>>3,_[T+48]=X-H>>3,T+=64}function Sh(m,b,_){var T,R=b-32,F=Ri,z=255-m[R-1];for(T=0;T<_;++T){var $,H=F,X=z+m[b-1];for($=0;$<_;++$)m[b+$]=H[X+m[R+$]];b+=32}}function Bv(m,b){Sh(m,b,4)}function zv(m,b){Sh(m,b,8)}function $v(m,b){Sh(m,b,16)}function Eo(m,b){var _;for(_=0;16>_;++_)r(m,b+32*_,m,b-32,16)}function mu(m,b){var _;for(_=16;0<_;--_)i(m,b,m[b-1],16),b+=32}function gu(m,b,_){var T;for(T=0;16>T;++T)i(b,_+32*T,m,16)}function Lm(m,b){var _,T=16;for(_=0;16>_;++_)T+=m[b-1+32*_]+m[b+_-32];gu(T>>5,m,b)}function Pr(m,b){var _,T=8;for(_=0;16>_;++_)T+=m[b-1+32*_];gu(T>>4,m,b)}function Vv(m,b){var _,T=8;for(_=0;16>_;++_)T+=m[b+_-32];gu(T>>4,m,b)}function Om(m,b){gu(128,m,b)}function dt(m,b,_){return m+2*b+_+2>>2}function Uv(m,b){var _,T=b-32;for(T=new Uint8Array([dt(m[T-1],m[T+0],m[T+1]),dt(m[T+0],m[T+1],m[T+2]),dt(m[T+1],m[T+2],m[T+3]),dt(m[T+2],m[T+3],m[T+4])]),_=0;4>_;++_)r(m,b+32*_,T,0,T.length)}function qv(m,b){var _=m[b-1],T=m[b-1+32],R=m[b-1+64],F=m[b-1+96];xe(m,b+0,16843009*dt(m[b-1-32],_,T)),xe(m,b+32,16843009*dt(_,T,R)),xe(m,b+64,16843009*dt(T,R,F)),xe(m,b+96,16843009*dt(R,F,F))}function no(m,b){var _,T=4;for(_=0;4>_;++_)T+=m[b+_-32]+m[b-1+32*_];for(T>>=3,_=0;4>_;++_)i(m,b+32*_,T,4)}function Im(m,b){var _=m[b-1+0],T=m[b-1+32],R=m[b-1+64],F=m[b-1-32],z=m[b+0-32],$=m[b+1-32],H=m[b+2-32],X=m[b+3-32];m[b+0+96]=dt(T,R,m[b-1+96]),m[b+1+96]=m[b+0+64]=dt(_,T,R),m[b+2+96]=m[b+1+64]=m[b+0+32]=dt(F,_,T),m[b+3+96]=m[b+2+64]=m[b+1+32]=m[b+0+0]=dt(z,F,_),m[b+3+64]=m[b+2+32]=m[b+1+0]=dt($,z,F),m[b+3+32]=m[b+2+0]=dt(H,$,z),m[b+3+0]=dt(X,H,$)}function Rm(m,b){var _=m[b+1-32],T=m[b+2-32],R=m[b+3-32],F=m[b+4-32],z=m[b+5-32],$=m[b+6-32],H=m[b+7-32];m[b+0+0]=dt(m[b+0-32],_,T),m[b+1+0]=m[b+0+32]=dt(_,T,R),m[b+2+0]=m[b+1+32]=m[b+0+64]=dt(T,R,F),m[b+3+0]=m[b+2+32]=m[b+1+64]=m[b+0+96]=dt(R,F,z),m[b+3+32]=m[b+2+64]=m[b+1+96]=dt(F,z,$),m[b+3+64]=m[b+2+96]=dt(z,$,H),m[b+3+96]=dt($,H,H)}function yu(m,b){var _=m[b-1+0],T=m[b-1+32],R=m[b-1+64],F=m[b-1-32],z=m[b+0-32],$=m[b+1-32],H=m[b+2-32],X=m[b+3-32];m[b+0+0]=m[b+1+64]=F+z+1>>1,m[b+1+0]=m[b+2+64]=z+$+1>>1,m[b+2+0]=m[b+3+64]=$+H+1>>1,m[b+3+0]=H+X+1>>1,m[b+0+96]=dt(R,T,_),m[b+0+64]=dt(T,_,F),m[b+0+32]=m[b+1+96]=dt(_,F,z),m[b+1+32]=m[b+2+96]=dt(F,z,$),m[b+2+32]=m[b+3+96]=dt(z,$,H),m[b+3+32]=dt($,H,X)}function kh(m,b){var _=m[b+0-32],T=m[b+1-32],R=m[b+2-32],F=m[b+3-32],z=m[b+4-32],$=m[b+5-32],H=m[b+6-32],X=m[b+7-32];m[b+0+0]=_+T+1>>1,m[b+1+0]=m[b+0+64]=T+R+1>>1,m[b+2+0]=m[b+1+64]=R+F+1>>1,m[b+3+0]=m[b+2+64]=F+z+1>>1,m[b+0+32]=dt(_,T,R),m[b+1+32]=m[b+0+96]=dt(T,R,F),m[b+2+32]=m[b+1+96]=dt(R,F,z),m[b+3+32]=m[b+2+96]=dt(F,z,$),m[b+3+64]=dt(z,$,H),m[b+3+96]=dt($,H,X)}function Wv(m,b){var _=m[b-1+0],T=m[b-1+32],R=m[b-1+64],F=m[b-1+96];m[b+0+0]=_+T+1>>1,m[b+2+0]=m[b+0+32]=T+R+1>>1,m[b+2+32]=m[b+0+64]=R+F+1>>1,m[b+1+0]=dt(_,T,R),m[b+3+0]=m[b+1+32]=dt(T,R,F),m[b+3+32]=m[b+1+64]=dt(R,F,F),m[b+3+64]=m[b+2+64]=m[b+0+96]=m[b+1+96]=m[b+2+96]=m[b+3+96]=F}function Hv(m,b){var _=m[b-1+0],T=m[b-1+32],R=m[b-1+64],F=m[b-1+96],z=m[b-1-32],$=m[b+0-32],H=m[b+1-32],X=m[b+2-32];m[b+0+0]=m[b+2+32]=_+z+1>>1,m[b+0+32]=m[b+2+64]=T+_+1>>1,m[b+0+64]=m[b+2+96]=R+T+1>>1,m[b+0+96]=F+R+1>>1,m[b+3+0]=dt($,H,X),m[b+2+0]=dt(z,$,H),m[b+1+0]=m[b+3+32]=dt(_,z,$),m[b+1+32]=m[b+3+64]=dt(T,_,z),m[b+1+64]=m[b+3+96]=dt(R,T,_),m[b+1+96]=dt(F,R,T)}function Kv(m,b){var _;for(_=0;8>_;++_)r(m,b+32*_,m,b-32,8)}function _h(m,b){var _;for(_=0;8>_;++_)i(m,b,m[b-1],8),b+=32}function Ul(m,b,_){var T;for(T=0;8>T;++T)i(b,_+32*T,m,8)}function xa(m,b){var _,T=8;for(_=0;8>_;++_)T+=m[b+_-32]+m[b-1+32*_];Ul(T>>4,m,b)}function Gv(m,b){var _,T=4;for(_=0;8>_;++_)T+=m[b+_-32];Ul(T>>3,m,b)}function ql(m,b){var _,T=4;for(_=0;8>_;++_)T+=m[b-1+32*_];Ul(T>>3,m,b)}function Ch(m,b){Ul(128,m,b)}function vu(m,b,_){var T=m[b-_],R=m[b+0],F=3*(R-T)+eb[1020+m[b-2*_]-m[b+_]],z=Gm[112+(F+4>>3)];m[b-_]=Ri[255+T+Gm[112+(F+3>>3)]],m[b+0]=Ri[255+R-z]}function jm(m,b,_,T){var R=m[b+0],F=m[b+_];return ss[255+m[b-2*_]-m[b-_]]>T||ss[255+F-R]>T}function Dm(m,b,_,T){return 4*ss[255+m[b-_]-m[b+0]]+ss[255+m[b-2*_]-m[b+_]]<=T}function Fm(m,b,_,T,R){var F=m[b-3*_],z=m[b-2*_],$=m[b-_],H=m[b+0],X=m[b+_],ae=m[b+2*_],pe=m[b+3*_];return 4*ss[255+$-H]+ss[255+z-X]>T?0:ss[255+m[b-4*_]-F]<=R&&ss[255+F-z]<=R&&ss[255+z-$]<=R&&ss[255+pe-ae]<=R&&ss[255+ae-X]<=R&&ss[255+X-H]<=R}function Bm(m,b,_,T){var R=2*T+1;for(T=0;16>T;++T)Dm(m,b+T,_,R)&&vu(m,b+T,_)}function ro(m,b,_,T){var R=2*T+1;for(T=0;16>T;++T)Dm(m,b+T*_,1,R)&&vu(m,b+T*_,1)}function Mo(m,b,_,T){var R;for(R=3;0<R;--R)Bm(m,b+=4*_,_,T)}function Yv(m,b,_,T){var R;for(R=3;0<R;--R)ro(m,b+=4,_,T)}function wa(m,b,_,T,R,F,z,$){for(F=2*F+1;0<R--;){if(Fm(m,b,_,F,z))if(jm(m,b,_,$))vu(m,b,_);else{var H=m,X=b,ae=_,pe=H[X-2*ae],me=H[X-ae],he=H[X+0],_e=H[X+ae],ye=H[X+2*ae],le=27*(we=eb[1020+3*(he-me)+eb[1020+pe-_e]])+63>>7,ce=18*we+63>>7,we=9*we+63>>7;H[X-3*ae]=Ri[255+H[X-3*ae]+we],H[X-2*ae]=Ri[255+pe+ce],H[X-ae]=Ri[255+me+le],H[X+0]=Ri[255+he-le],H[X+ae]=Ri[255+_e-ce],H[X+2*ae]=Ri[255+ye-we]}b+=T}}function Es(m,b,_,T,R,F,z,$){for(F=2*F+1;0<R--;){if(Fm(m,b,_,F,z))if(jm(m,b,_,$))vu(m,b,_);else{var H=m,X=b,ae=_,pe=H[X-ae],me=H[X+0],he=H[X+ae],_e=Gm[112+((ye=3*(me-pe))+4>>3)],ye=Gm[112+(ye+3>>3)],le=_e+1>>1;H[X-2*ae]=Ri[255+H[X-2*ae]+le],H[X-ae]=Ri[255+pe+ye],H[X+0]=Ri[255+me-_e],H[X+ae]=Ri[255+he-le]}b+=T}}function Ah(m,b,_,T,R,F){wa(m,b,_,1,16,T,R,F)}function Wl(m,b,_,T,R,F){wa(m,b,1,_,16,T,R,F)}function Xv(m,b,_,T,R,F){var z;for(z=3;0<z;--z)Es(m,b+=4*_,_,1,16,T,R,F)}function bu(m,b,_,T,R,F){var z;for(z=3;0<z;--z)Es(m,b+=4,1,_,16,T,R,F)}function Jv(m,b,_,T,R,F,z,$){wa(m,b,R,1,8,F,z,$),wa(_,T,R,1,8,F,z,$)}function Th(m,b,_,T,R,F,z,$){wa(m,b,1,R,8,F,z,$),wa(_,T,1,R,8,F,z,$)}function Nh(m,b,_,T,R,F,z,$){Es(m,b+4*R,R,1,8,F,z,$),Es(_,T+4*R,R,1,8,F,z,$)}function zm(m,b,_,T,R,F,z,$){Es(m,b+4,1,R,8,F,z,$),Es(_,T+4,1,R,8,F,z,$)}function xu(){this.ba=new Pi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ph(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Eh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $m(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new E}function Qv(){this.xb=this.a=0,this.l=new fu,this.ca=new Pi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $m,this.ab=0,this.gc=o(4,Eh),this.Oc=0}function wu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Hl(m,b,_,T,R,F,z){for(m=m==null?0:m[b+0],b=0;b<z;++b)R[F+b]=m+_[T+b]&255,m=R[F+b]}function Mh(m,b,_,T,R,F,z){var $;if(m==null)Hl(null,null,_,T,R,F,z);else for($=0;$<z;++$)R[F+$]=m[b+$]+_[T+$]&255}function Sa(m,b,_,T,R,F,z){if(m==null)Hl(null,null,_,T,R,F,z);else{var $,H=m[b+0],X=H,ae=H;for($=0;$<z;++$)X=ae+(H=m[b+$])-X,ae=_[T+$]+(-256&X?0>X?0:255:X)&255,X=H,R[F+$]=ae}}function Lh(m,b,_,T){var R=b.width,F=b.o;if(e(m!=null&&b!=null),0>_||0>=T||_+T>F)return null;if(!m.Cc){if(m.ga==null){var z;if(m.ga=new wu,(z=m.ga==null)||(z=b.width*b.o,e(m.Gb.length==0),m.Gb=s(z),m.Uc=0,m.Gb==null?z=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,z=1),z=!z),!z){z=m.ga;var $=m.Fa,H=m.P,X=m.qc,ae=m.mb,pe=m.nb,me=H+1,he=X-1,_e=z.l;if(e($!=null&&ae!=null&&b!=null),Na[0]=null,Na[1]=Hl,Na[2]=Mh,Na[3]=Sa,z.ca=ae,z.tb=pe,z.c=b.width,z.i=b.height,e(0<z.c&&0<z.i),1>=X)b=0;else if(z.$a=$[H+0]>>0&3,z.Z=$[H+0]>>2&3,z.Lc=$[H+0]>>4&3,H=$[H+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||H)b=0;else if(_e.put=ci,_e.ac=Mn,_e.bc=gr,_e.ma=z,_e.width=b.width,_e.height=b.height,_e.Da=b.Da,_e.v=b.v,_e.va=b.va,_e.j=b.j,_e.o=b.o,z.$a)e:{e(z.$a==1),b=Tr();t:for(;;){if(b==null){b=0;break e}if(e(z!=null),z.mc=b,b.c=z.c,b.i=z.i,b.l=z.l,b.l.ma=z,b.l.width=z.c,b.l.height=z.i,b.a=0,Y(b.m,$,me,he),!Oi(z.c,z.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&qn(b.s)?(z.ic=1,$=b.c*b.i,b.Ta=null,b.Ua=0,b.V=s($),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(z.ic=0,b=Po(b,z.c)),!b))break t;b=1;break e}z.mc=null,b=0}else b=he>=z.c*z.i;z=!b}if(z)return null;m.ga.Lc!=1?m.Ga=0:T=F-_}e(m.ga!=null),e(_+T<=F);e:{if(b=($=m.ga).c,F=$.l.o,$.$a==0){if(me=m.rc,he=m.Vc,_e=m.Fa,H=m.P+1+_*b,X=m.mb,ae=m.nb+_*b,e(H<=m.P+m.qc),$.Z!=0)for(e(Na[$.Z]!=null),z=0;z<T;++z)Na[$.Z](me,he,_e,H,X,ae,b),me=X,he=ae,ae+=b,H+=b;else for(z=0;z<T;++z)r(X,ae,_e,H,b),me=X,he=ae,ae+=b,H+=b;m.rc=me,m.Vc=he}else{if(e($.mc!=null),b=_+T,e((z=$.mc)!=null),e(b<=z.i),z.C>=b)b=1;else if($.ic||fe(),$.ic){$=z.V,me=z.Ba,he=z.c;var ye=z.i,le=(_e=1,H=z.$/he,X=z.$%he,ae=z.m,pe=z.s,z.$),ce=he*ye,we=he*b,Ne=pe.wc,Se=le<we?xn(pe,X,H):null;e(le<=ce),e(b<=ye),e(qn(pe));t:for(;;){for(;!ae.h&&le<we;){if(X&Ne||(Se=xn(pe,X,H)),e(Se!=null),re(ae),256>(ye=jt(Se.G[0],Se.H[0],ae)))$[me+le]=ye,++le,++X>=he&&(X=0,++H<=b&&!(H%16)&&Ar(z,H));else{if(!(280>ye)){_e=0;break t}ye=ui(ye-256,ae);var Ve,Re=jt(Se.G[4],Se.H[4],ae);if(re(ae),!(le>=(Re=es(he,Re=ui(Re,ae)))&&ce-le>=ye)){_e=0;break t}for(Ve=0;Ve<ye;++Ve)$[me+le+Ve]=$[me+le+Ve-Re];for(le+=ye,X+=ye;X>=he;)X-=he,++H<=b&&!(H%16)&&Ar(z,H);le<we&&X&Ne&&(Se=xn(pe,X,H))}e(ae.h==K(ae))}Ar(z,H>b?b:H);break t}!_e||ae.h&&le<ce?(_e=0,z.a=ae.h?5:3):z.$=le,b=_e}else b=Mi(z,z.V,z.Ba,z.c,z.i,b,ba);if(!b){T=0;break e}}_+T>=F&&(m.Cc=1),T=1}if(!T)return null;if(m.Cc&&((T=m.ga)!=null&&(T.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+_*R}function k(m,b,_,T,R,F){for(;0<R--;){var z,$=m,H=b+(_?1:0),X=m,ae=b+(_?0:3);for(z=0;z<T;++z){var pe=X[ae+4*z];pe!=255&&(pe*=32897,$[H+4*z+0]=$[H+4*z+0]*pe>>23,$[H+4*z+1]=$[H+4*z+1]*pe>>23,$[H+4*z+2]=$[H+4*z+2]*pe>>23)}b+=F}}function j(m,b,_,T,R){for(;0<T--;){var F;for(F=0;F<_;++F){var z=m[b+2*F+0],$=15&(X=m[b+2*F+1]),H=4369*$,X=(240&X|X>>4)*H>>16;m[b+2*F+0]=(240&z|z>>4)*H>>16&240|(15&z|z<<4)*H>>16>>4&15,m[b+2*F+1]=240&X|$}b+=R}}function ee(m,b,_,T,R,F,z,$){var H,X,ae=255;for(X=0;X<R;++X){for(H=0;H<T;++H){var pe=m[b+H];F[z+4*H]=pe,ae&=pe}b+=_,z+=$}return ae!=255}function oe(m,b,_,T,R){var F;for(F=0;F<R;++F)_[T+F]=m[b+F]>>8}function fe(){is=k,Yt=j,Xt=ee,In=oe}function be(m,b,_){N[m]=function(T,R,F,z,$,H,X,ae,pe,me,he,_e,ye,le,ce,we,Ne){var Se,Ve=Ne-1>>1,Re=$[H+0]|X[ae+0]<<16,tt=pe[me+0]|he[_e+0]<<16;e(T!=null);var Fe=3*Re+tt+131074>>2;for(b(T[R+0],255&Fe,Fe>>16,ye,le),F!=null&&(Fe=3*tt+Re+131074>>2,b(F[z+0],255&Fe,Fe>>16,ce,we)),Se=1;Se<=Ve;++Se){var Dt=$[H+Se]|X[ae+Se]<<16,Bt=pe[me+Se]|he[_e+Se]<<16,Lt=Re+Dt+tt+Bt+524296,Nt=Lt+2*(Dt+tt)>>3;Fe=Nt+Re>>1,Re=(Lt=Lt+2*(Re+Bt)>>3)+Dt>>1,b(T[R+2*Se-1],255&Fe,Fe>>16,ye,le+(2*Se-1)*_),b(T[R+2*Se-0],255&Re,Re>>16,ye,le+(2*Se-0)*_),F!=null&&(Fe=Lt+tt>>1,Re=Nt+Bt>>1,b(F[z+2*Se-1],255&Fe,Fe>>16,ce,we+(2*Se-1)*_),b(F[z+2*Se+0],255&Re,Re>>16,ce,we+(2*Se+0)*_)),Re=Dt,tt=Bt}1&Ne||(Fe=3*Re+tt+131074>>2,b(T[R+Ne-1],255&Fe,Fe>>16,ye,le+(Ne-1)*_),F!=null&&(Fe=3*tt+Re+131074>>2,b(F[z+Ne-1],255&Fe,Fe>>16,ce,we+(Ne-1)*_)))}}function Pe(){as[Ym]=r7,as[Xm]=cC,as[iC]=i7,as[Jm]=uC,as[Qm]=dC,as[tb]=hC,as[sC]=s7,as[nb]=cC,as[rb]=uC,as[Zm]=dC,as[ib]=hC}function ze(m){return m&~o7?0>m?0:255:m>>fC}function Xe(m,b){return ze((19077*m>>8)+(26149*b>>8)-14234)}function mt(m,b,_){return ze((19077*m>>8)-(6419*b>>8)-(13320*_>>8)+8708)}function ht(m,b){return ze((19077*m>>8)+(33050*b>>8)-17685)}function Et(m,b,_,T,R){T[R+0]=Xe(m,_),T[R+1]=mt(m,b,_),T[R+2]=ht(m,b)}function pn(m,b,_,T,R){T[R+0]=ht(m,b),T[R+1]=mt(m,b,_),T[R+2]=Xe(m,_)}function Sn(m,b,_,T,R){var F=mt(m,b,_);b=F<<3&224|ht(m,b)>>3,T[R+0]=248&Xe(m,_)|F>>5,T[R+1]=b}function Wn(m,b,_,T,R){var F=240&ht(m,b)|15;T[R+0]=240&Xe(m,_)|mt(m,b,_)>>4,T[R+1]=F}function Er(m,b,_,T,R){T[R+0]=255,Et(m,b,_,T,R+1)}function rr(m,b,_,T,R){pn(m,b,_,T,R),T[R+3]=255}function Ms(m,b,_,T,R){Et(m,b,_,T,R),T[R+3]=255}function Ii(m,b){return 0>m?0:m>b?b:m}function io(m,b,_){N[m]=function(T,R,F,z,$,H,X,ae,pe){for(var me=ae+(-2&pe)*_;ae!=me;)b(T[R+0],F[z+0],$[H+0],X,ae),b(T[R+1],F[z+0],$[H+0],X,ae+_),R+=2,++z,++H,ae+=2*_;1&pe&&b(T[R+0],F[z+0],$[H+0],X,ae)}}function Vm(m,b,_){return _==0?m==0?b==0?6:5:b==0?4:0:_}function Oh(m,b,_,T,R){switch(m>>>30){case 3:Io(b,_,T,R,0);break;case 2:On(b,_,T,R);break;case 1:Jr(b,_,T,R)}}function Ih(m,b){var _,T,R=b.M,F=b.Nb,z=m.oc,$=m.pc+40,H=m.oc,X=m.pc+584,ae=m.oc,pe=m.pc+600;for(_=0;16>_;++_)z[$+32*_-1]=129;for(_=0;8>_;++_)H[X+32*_-1]=129,ae[pe+32*_-1]=129;for(0<R?z[$-1-32]=H[X-1-32]=ae[pe-1-32]=129:(i(z,$-32-1,127,21),i(H,X-32-1,127,9),i(ae,pe-32-1,127,9)),T=0;T<m.za;++T){var me=b.ya[b.aa+T];if(0<T){for(_=-1;16>_;++_)r(z,$+32*_-4,z,$+32*_+12,4);for(_=-1;8>_;++_)r(H,X+32*_-4,H,X+32*_+4,4),r(ae,pe+32*_-4,ae,pe+32*_+4,4)}var he=m.Gd,_e=m.Hd+T,ye=me.ad,le=me.Hc;if(0<R&&(r(z,$-32,he[_e].y,0,16),r(H,X-32,he[_e].f,0,8),r(ae,pe-32,he[_e].ea,0,8)),me.Za){var ce=z,we=$-32+16;for(0<R&&(T>=m.za-1?i(ce,we,he[_e].y[15],4):r(ce,we,he[_e+1].y,0,4)),_=0;4>_;_++)ce[we+128+_]=ce[we+256+_]=ce[we+384+_]=ce[we+0+_];for(_=0;16>_;++_,le<<=2)ce=z,we=$+mC[_],Ls[me.Ob[_]](ce,we),Oh(le,ye,16*+_,ce,we)}else if(ce=Vm(T,R,me.Ob[0]),Ta[ce](z,$),le!=0)for(_=0;16>_;++_,le<<=2)Oh(le,ye,16*+_,z,$+mC[_]);for(_=me.Gc,ce=Vm(T,R,me.Dd),jo[ce](H,X),jo[ce](ae,pe),le=ye,ce=H,we=X,255&(me=_>>0)&&(170&me?Bh(le,256,ce,we):ns(le,256,ce,we)),me=ae,le=pe,255&(_>>=8)&&(170&_?Bh(ye,320,me,le):ns(ye,320,me,le)),R<m.Ub-1&&(r(he[_e].y,0,z,$+480,16),r(he[_e].f,0,H,X+224,8),r(he[_e].ea,0,ae,pe+224,8)),_=8*F*m.B,he=m.sa,_e=m.ta+16*T+16*F*m.R,ye=m.qa,me=m.ra+8*T+_,le=m.Ha,ce=m.Ia+8*T+_,_=0;16>_;++_)r(he,_e+_*m.R,z,$+32*_,16);for(_=0;8>_;++_)r(ye,me+_*m.B,H,X+32*_,8),r(le,ce+_*m.B,ae,pe+32*_,8)}}function Su(m,b,_,T,R,F,z,$,H){var X=[0],ae=[0],pe=0,me=H!=null?H.kd:0,he=H??new Ph;if(m==null||12>_)return 7;he.data=m,he.w=b,he.ha=_,b=[b],_=[_],he.gb=[he.gb];e:{var _e=b,ye=_,le=he.gb;if(e(m!=null),e(ye!=null),e(le!=null),le[0]=0,12<=ye[0]&&!n(m,_e[0],"RIFF")){if(n(m,_e[0]+8,"WEBP")){le=3;break e}var ce=Te(m,_e[0]+4);if(12>ce||4294967286<ce){le=3;break e}if(me&&ce>ye[0]-8){le=7;break e}le[0]=ce,_e[0]+=12,ye[0]-=12}le=0}if(le!=0)return le;for(ce=0<he.gb[0],_=_[0];;){e:{var we=m;ye=b,le=_;var Ne=X,Se=ae,Ve=_e=[0];if((Fe=pe=[pe])[0]=0,8>le[0])le=7;else{if(!n(we,ye[0],"VP8X")){if(Te(we,ye[0]+4)!=10){le=3;break e}if(18>le[0]){le=7;break e}var Re=Te(we,ye[0]+8),tt=1+ke(we,ye[0]+12);if(2147483648<=tt*(we=1+ke(we,ye[0]+15))){le=3;break e}Ve!=null&&(Ve[0]=Re),Ne!=null&&(Ne[0]=tt),Se!=null&&(Se[0]=we),ye[0]+=18,le[0]-=18,Fe[0]=1}le=0}}if(pe=pe[0],_e=_e[0],le!=0)return le;if(ye=!!(2&_e),!ce&&pe)return 3;if(F!=null&&(F[0]=!!(16&_e)),z!=null&&(z[0]=ye),$!=null&&($[0]=0),z=X[0],_e=ae[0],pe&&ye&&H==null){le=0;break}if(4>_){le=7;break}if(ce&&pe||!ce&&!pe&&!n(m,b[0],"ALPH")){_=[_],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{Re=m,le=b,ce=_;var Fe=he.gb;Ne=he.na,Se=he.P,Ve=he.Sa,tt=22,e(Re!=null),e(ce!=null),we=le[0];var Dt=ce[0];for(e(Ne!=null),e(Ve!=null),Ne[0]=null,Se[0]=null,Ve[0]=0;;){if(le[0]=we,ce[0]=Dt,8>Dt){le=7;break e}var Bt=Te(Re,we+4);if(4294967286<Bt){le=3;break e}var Lt=8+Bt+1&-2;if(tt+=Lt,0<Fe&&tt>Fe){le=3;break e}if(!n(Re,we,"VP8 ")||!n(Re,we,"VP8L")){le=0;break e}if(Dt[0]<Lt){le=7;break e}n(Re,we,"ALPH")||(Ne[0]=Re,Se[0]=we+8,Ve[0]=Bt),we+=Lt,Dt-=Lt}}if(_=_[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],le!=0)break}_=[_],he.Ja=[he.Ja],he.xa=[he.xa];e:if(Fe=m,le=b,ce=_,Ne=he.gb[0],Se=he.Ja,Ve=he.xa,Re=le[0],we=!n(Fe,Re,"VP8 "),tt=!n(Fe,Re,"VP8L"),e(Fe!=null),e(ce!=null),e(Se!=null),e(Ve!=null),8>ce[0])le=7;else{if(we||tt){if(Fe=Te(Fe,Re+4),12<=Ne&&Fe>Ne-12){le=3;break e}if(me&&Fe>ce[0]-8){le=7;break e}Se[0]=Fe,le[0]+=8,ce[0]-=8,Ve[0]=tt}else Ve[0]=5<=ce[0]&&Fe[Re+0]==47&&!(Fe[Re+4]>>5),Se[0]=ce[0];le=0}if(_=_[0],he.Ja=he.Ja[0],he.xa=he.xa[0],b=b[0],le!=0)break;if(4294967286<he.Ja)return 3;if($==null||ye||($[0]=he.xa?2:1),z=[z],_e=[_e],he.xa){if(5>_){le=7;break}$=z,me=_e,ye=F,m==null||5>_?m=0:5<=_&&m[b+0]==47&&!(m[b+4]>>5)?(ce=[0],Fe=[0],Ne=[0],Y(Se=new P,m,b,_),Ye(Se,ce,Fe,Ne)?($!=null&&($[0]=ce[0]),me!=null&&(me[0]=Fe[0]),ye!=null&&(ye[0]=Ne[0]),m=1):m=0):m=0}else{if(10>_){le=7;break}$=_e,m==null||10>_||!Am(m,b+3,_-3)?m=0:(me=m[b+0]|m[b+1]<<8|m[b+2]<<16,ye=16383&(m[b+7]<<8|m[b+6]),m=16383&(m[b+9]<<8|m[b+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=he.Ja||!ye||!m?m=0:(z&&(z[0]=ye),$&&($[0]=m),m=1))}if(!m||(z=z[0],_e=_e[0],pe&&(X[0]!=z||ae[0]!=_e)))return 3;H!=null&&(H[0]=he,H.offset=b-H.w,e(4294967286>b-H.w),e(H.offset==H.ha-_));break}return le==0||le==7&&pe&&H==null?(F!=null&&(F[0]|=he.na!=null&&0<he.na.length),T!=null&&(T[0]=z),R!=null&&(R[0]=_e),0):le}function Rh(m,b,_){var T=b.width,R=b.height,F=0,z=0,$=T,H=R;if(b.Da=m!=null&&0<m.Da,b.Da&&($=m.cd,H=m.bd,F=m.v,z=m.j,11>_||(F&=-2,z&=-2),0>F||0>z||0>=$||0>=H||F+$>T||z+H>R))return 0;if(b.v=F,b.j=z,b.va=F+$,b.o=z+H,b.U=$,b.T=H,b.da=m!=null&&0<m.da,b.da){if(!Ge($,H,_=[m.ib],F=[m.hb]))return 0;b.ib=_[0],b.hb=F[0]}return b.ob=m!=null&&m.ob,b.Kb=m==null||!m.Sd,b.da&&(b.ob=b.ib<3*T/4&&b.hb<3*R/4,b.Kb=0),1}function jh(m){if(m==null)return 2;if(11>m.S){var b=m.f.RGBA;b.fb+=(m.height-1)*b.A,b.A=-b.A}else b=m.f.kb,m=m.height,b.O+=(m-1)*b.fa,b.fa=-b.fa,b.N+=(m-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(m-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(m-1)*b.lb,b.lb=-b.lb);return 0}function ku(m,b,_,T){if(T==null||0>=m||0>=b)return 2;if(_!=null){if(_.Da){var R=_.cd,F=_.bd,z=-2&_.v,$=-2&_.j;if(0>z||0>$||0>=R||0>=F||z+R>m||$+F>b)return 2;m=R,b=F}if(_.da){if(!Ge(m,b,R=[_.ib],F=[_.hb]))return 2;m=R[0],b=F[0]}}T.width=m,T.height=b;e:{var H=T.width,X=T.height;if(m=T.S,0>=H||0>=X||!(m>=Ym&&13>m))m=2;else{if(0>=T.Rd&&T.sd==null){z=F=R=b=0;var ae=($=H*gC[m])*X;if(11>m||(F=(X+1)/2*(b=(H+1)/2),m==12&&(z=(R=H)*X)),(X=s(ae+2*F+z))==null){m=1;break e}T.sd=X,11>m?((H=T.f.RGBA).eb=X,H.fb=0,H.A=$,H.size=ae):((H=T.f.kb).y=X,H.O=0,H.fa=$,H.Fd=ae,H.f=X,H.N=0+ae,H.Ab=b,H.Cd=F,H.ea=X,H.W=0+ae+F,H.Db=b,H.Ed=F,m==12&&(H.F=X,H.J=0+ae+2*F),H.Tc=z,H.lb=R)}if(b=1,R=T.S,F=T.width,z=T.height,R>=Ym&&13>R)if(11>R)m=T.f.RGBA,b&=($=Math.abs(m.A))*(z-1)+F<=m.size,b&=$>=F*gC[R],b&=m.eb!=null;else{m=T.f.kb,$=(F+1)/2,ae=(z+1)/2,H=Math.abs(m.fa),X=Math.abs(m.Ab);var pe=Math.abs(m.Db),me=Math.abs(m.lb),he=me*(z-1)+F;b&=H*(z-1)+F<=m.Fd,b&=X*(ae-1)+$<=m.Cd,b=(b&=pe*(ae-1)+$<=m.Ed)&H>=F&X>=$&pe>=$,b&=m.y!=null,b&=m.f!=null,b&=m.ea!=null,R==12&&(b&=me>=F,b&=he<=m.Tc,b&=m.F!=null)}else b=0;m=b?0:2}}return m!=0||_!=null&&_.fd&&(m=jh(T)),m}var yr=64,_u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Cu=24,Au=32,Dh=8,hi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(m){return m},N.Predictor2=function(m,b,_){return b[_+0]},N.Predictor3=function(m,b,_){return b[_+1]},N.Predictor4=function(m,b,_){return b[_-1]},N.Predictor5=function(m,b,_){return Me(Me(m,b[_+1]),b[_+0])},N.Predictor6=function(m,b,_){return Me(m,b[_-1])},N.Predictor7=function(m,b,_){return Me(m,b[_+0])},N.Predictor8=function(m,b,_){return Me(b[_-1],b[_+0])},N.Predictor9=function(m,b,_){return Me(b[_+0],b[_+1])},N.Predictor10=function(m,b,_){return Me(Me(m,b[_-1]),Me(b[_+0],b[_+1]))},N.Predictor11=function(m,b,_){var T=b[_+0];return 0>=it(T>>24&255,m>>24&255,(b=b[_-1])>>24&255)+it(T>>16&255,m>>16&255,b>>16&255)+it(T>>8&255,m>>8&255,b>>8&255)+it(255&T,255&m,255&b)?T:m},N.Predictor12=function(m,b,_){var T=b[_+0];return($e((m>>24&255)+(T>>24&255)-((b=b[_-1])>>24&255))<<24|$e((m>>16&255)+(T>>16&255)-(b>>16&255))<<16|$e((m>>8&255)+(T>>8&255)-(b>>8&255))<<8|$e((255&m)+(255&T)-(255&b)))>>>0},N.Predictor13=function(m,b,_){var T=b[_-1];return(Qe((m=Me(m,b[_+0]))>>24&255,T>>24&255)<<24|Qe(m>>16&255,T>>16&255)<<16|Qe(m>>8&255,T>>8&255)<<8|Qe(m>>0&255,T>>0&255))>>>0};var Zv=N.PredictorAdd0;N.PredictorAdd1=pt,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var Fh=N.PredictorAdd2;yt("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Um,ts=N.ColorIndexInverseTransform,Tu=N.MapARGB,qm=N.VP8LColorIndexInverseTransformAlpha,Wm=N.MapAlpha,ka=N.VP8LPredictorsAdd=[];ka.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Kl,fi,Xr,_a,Lo,Oo,Nu,Io,On,Bh,Jr,ns,Pu,Hm,zh,Gl,Yl,Ca,Xl,Eu,Jl,Aa,$h,rs,is,Yt,Xt,In,Qn=s(511),Ro=s(2041),Vh=s(225),Mu=s(767),Km=0,eb=Ro,Gm=Vh,Ri=Mu,ss=Qn,Ym=0,Xm=1,iC=2,Jm=3,Qm=4,tb=5,sC=6,nb=7,rb=8,Zm=9,ib=10,U8=[2,3,7],q8=[3,3,11],oC=[280,256,256,256,40],W8=[0,1,1,1,0],H8=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],K8=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G8=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Y8=8,sb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ob=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Uh=null,X8=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],J8=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],aC=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Q8=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Z8=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],e7=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],t7=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ta=[],Ls=[],jo=[],n7=1,lC=2,Na=[],as=[];be("UpsampleRgbLinePair",Et,3),be("UpsampleBgrLinePair",pn,3),be("UpsampleRgbaLinePair",Ms,4),be("UpsampleBgraLinePair",rr,4),be("UpsampleArgbLinePair",Er,4),be("UpsampleRgba4444LinePair",Wn,2),be("UpsampleRgb565LinePair",Sn,2);var r7=N.UpsampleRgbLinePair,i7=N.UpsampleBgrLinePair,cC=N.UpsampleRgbaLinePair,uC=N.UpsampleBgraLinePair,dC=N.UpsampleArgbLinePair,hC=N.UpsampleRgba4444LinePair,s7=N.UpsampleRgb565LinePair,eg=16,tg=1<<eg-1,qh=-227,ab=482,fC=6,o7=(256<<fC)-1,pC=0,a7=s(256),l7=s(256),c7=s(256),u7=s(256),d7=s(ab-qh),h7=s(ab-qh);io("YuvToRgbRow",Et,3),io("YuvToBgrRow",pn,3),io("YuvToRgbaRow",Ms,4),io("YuvToBgraRow",rr,4),io("YuvToArgbRow",Er,4),io("YuvToRgba4444Row",Wn,2),io("YuvToRgb565Row",Sn,2);var mC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ng=[0,2,8],f7=[8,7,6,4,4,2,2,2,1,1,1,1],p7=1;this.WebPDecodeRGBA=function(m,b,_,T,R){var F=Xm,z=new xu,$=new Pi;z.ba=$,$.S=F,$.width=[$.width],$.height=[$.height];var H=$.width,X=$.height,ae=new Ns;if(ae==null||m==null)var pe=2;else e(ae!=null),pe=Su(m,b,_,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(pe!=0?H=0:(H!=null&&(H[0]=ae.width[0]),X!=null&&(X[0]=ae.height[0]),H=1),H){$.width=$.width[0],$.height=$.height[0],T!=null&&(T[0]=$.width),R!=null&&(R[0]=$.height);e:{if(T=new fu,(R=new Ph).data=m,R.w=b,R.ha=_,R.kd=1,b=[0],e(R!=null),((m=Su(R.data,R.w,R.ha,null,null,null,b,null,R))==0||m==7)&&b[0]&&(m=4),(b=m)==0){if(e(z!=null),T.data=R.data,T.w=R.w+R.offset,T.ha=R.ha-R.offset,T.put=ci,T.ac=Mn,T.bc=gr,T.ma=z,R.xa){if((m=Tr())==null){z=1;break e}if(function(me,he){var _e=[0],ye=[0],le=[0];t:for(;;){if(me==null)return 0;if(he==null)return me.a=2,0;if(me.l=he,me.a=0,Y(me.m,he.data,he.w,he.ha),!Ye(me.m,_e,ye,le)){me.a=3;break t}if(me.xb=lC,he.width=_e[0],he.height=ye[0],!Oi(_e[0],ye[0],1,me,null))break t;return 1}return e(me.a!=0),0}(m,T)){if(T=(b=ku(T.width,T.height,z.Oa,z.ba))==0){t:{T=m;n:for(;;){if(T==null){T=0;break t}if(e(T.s.yc!=null),e(T.s.Ya!=null),e(0<T.s.Wb),e((_=T.l)!=null),e((R=_.ma)!=null),T.xb!=0){if(T.ca=R.ba,T.tb=R.tb,e(T.ca!=null),!Rh(R.Oa,_,Jm)){T.a=2;break n}if(!Po(T,_.width)||_.da)break n;if((_.da||Rt(T.ca.S))&&fe(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&fe()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!Ie(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Mi(T,T.V,T.Ba,T.c,T.i,_.o,dn))break n;R.Dc=T.Ma,T=1;break t}e(T.a!=0),T=0}T=!T}T&&(b=m.a)}else b=m.a}else{if((m=new Iv)==null){z=1;break e}if(m.Fa=R.na,m.P=R.P,m.qc=R.Sa,Tm(m,T)){if((b=ku(T.width,T.height,z.Oa,z.ba))==0){if(m.Aa=0,_=z.Oa,e((R=m)!=null),_!=null){if(0<(H=0>(H=_.Md)?0:100<H?255:255*H/100)){for(X=ae=0;4>X;++X)12>(pe=R.pb[X]).lc&&(pe.ia=H*f7[0>pe.lc?0:pe.lc]>>3),ae|=pe.ia;ae&&(alert("todo:VP8InitRandom"),R.ia=1)}R.Ga=_.Id,100<R.Ga?R.Ga=100:0>R.Ga&&(R.Ga=0)}Rv(m,T)||(b=m.a)}}else b=m.a}b==0&&z.Oa!=null&&z.Oa.fd&&(b=jh(z.ba))}z=b}F=z!=0?null:11>F?$.f.RGBA.eb:$.f.kb.y}else F=null;return F};var gC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,D){for(var V="",L=0;L<4;L++)V+=String.fromCharCode(N[D++]);return V}function u(N,D){return(N[D+0]<<0|N[D+1]<<8|N[D+2]<<16)>>>0}function d(N,D){return(N[D+0]<<0|N[D+1]<<8|N[D+2]<<16|N[D+3]<<24)>>>0}new l;var h=[0],f=[0],p=[],g=new l,v=t,y=function(N,D){var V={},L=0,E=!1,B=0,I=0;if(V.frames=[],!function(U,K,J,re){for(var se=0;se<re;se++)if(U[K+se]!=J.charCodeAt(se))return!0;return!1}(N,D,"RIFF",4)){var Q,Z;for(d(N,D+=4),D+=8;D<N.length;){var ne=c(N,D),Y=d(N,D+=4);D+=4;var ie=Y+(1&Y);switch(ne){case"VP8 ":case"VP8L":V.frames[L]===void 0&&(V.frames[L]={}),(P=V.frames[L]).src_off=E?I:D-8,P.src_size=B+Y+8,L++,E&&(E=!1,B=0,I=0);break;case"VP8X":(P=V.header={}).feature_flags=N[D];var q=D+4;P.canvas_width=1+u(N,q),q+=3,P.canvas_height=1+u(N,q),q+=3;break;case"ALPH":E=!0,B=ie+8,I=D-8;break;case"ANIM":(P=V.header).bgcolor=d(N,D),q=D+4,P.loop_count=(Q=N)[(Z=q)+0]<<0|Q[Z+1]<<8,q+=2;break;case"ANMF":var G,P;(P=V.frames[L]={}).offset_x=2*u(N,D),D+=3,P.offset_y=2*u(N,D),D+=3,P.width=1+u(N,D),D+=3,P.height=1+u(N,D),D+=3,P.duration=u(N,D),D+=3,G=N[D++],P.dispose=1&G,P.blend=G>>1&1}ne!="ANMF"&&(D+=ie)}return V}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var x=y.header?y.header:null,S=y.frames?y.frames:null;if(x){x.loop_counter=x.loop_count,h=[x.canvas_height],f=[x.canvas_width];for(var C=0;C<S.length&&S[C].blend!=0;C++);}var A=S[0],O=g.WebPDecodeRGBA(v,A.src_off,A.src_size,f,h);A.rgba=O,A.imgwidth=f[0],A.imgheight=h[0];for(var M=0;M<f[0]*h[0]*4;M++)p[M]=O[M];return this.width=f,this.height=h,this.data=p,this}(function(t){var e=function(){return typeof sS=="function"},n=function(h,f,p,g){var v=4,y=o;switch(g){case t.image_compression.FAST:v=1,y=s;break;case t.image_compression.MEDIUM:v=6,y=a;break;case t.image_compression.SLOW:v=9,y=l}h=r(h,f,p,y);var x=sS(h,{level:v});return t.__addimage__.arrayBufferToBinaryString(x)},r=function(h,f,p,g){for(var v,y,x,S=h.length/f,C=new Uint8Array(h.length+S),A=u(),O=0;O<S;O+=1){if(x=O*f,v=h.subarray(x,x+f),g)C.set(g(v,p,y),x+O);else{for(var M,N=A.length,D=[];M<N;M+=1)D[M]=A[M](v,p,y);var V=d(D.concat());C.set(D[V],x+O)}y=v}return C},i=function(h){var f=Array.apply([],h);return f.unshift(0),f},s=function(h,f){var p,g=[],v=h.length;g[0]=1;for(var y=0;y<v;y+=1)p=h[y-f]||0,g[y+1]=h[y]-p+256&255;return g},o=function(h,f,p){var g,v=[],y=h.length;v[0]=2;for(var x=0;x<y;x+=1)g=p&&p[x]||0,v[x+1]=h[x]-g+256&255;return v},a=function(h,f,p){var g,v,y=[],x=h.length;y[0]=3;for(var S=0;S<x;S+=1)g=h[S-f]||0,v=p&&p[S]||0,y[S+1]=h[S]+256-(g+v>>>1)&255;return y},l=function(h,f,p){var g,v,y,x,S=[],C=h.length;S[0]=4;for(var A=0;A<C;A+=1)g=h[A-f]||0,v=p&&p[A]||0,y=p&&p[A-f]||0,x=c(g,v,y),S[A+1]=h[A]-x+256&255;return S},c=function(h,f,p){if(h===f&&f===p)return h;var g=Math.abs(f-p),v=Math.abs(h-p),y=Math.abs(h+f-p-p);return g<=v&&g<=y?h:v<=y?f:p},u=function(){return[i,s,o,a,l]},d=function(h){var f=h.map(function(p){return p.reduce(function(g,v){return g+Math.abs(v)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(h,f,p,g){var v,y,x,S,C,A,O,M,N,D,V,L,E,B,I,Q=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(x=new bue(h)).imgData,y=x.bits,v=x.colorSpace,C=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){N=(M=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,V=new Uint8Array(N*x.colors),D=new Uint8Array(N);var ne,Y=x.pixelBitlength-x.bits;for(B=0,I=0;B<N;B++){for(E=M[B],ne=0;ne<Y;)V[I++]=E>>>ne&255,ne+=x.bits;D[B]=E>>>ne&255}}if(x.bits===16){N=(M=new Uint32Array(x.decodePixels().buffer)).length,V=new Uint8Array(N*(32/x.pixelBitlength)*x.colors),D=new Uint8Array(N*(32/x.pixelBitlength)),L=x.colors>1,B=0,I=0;for(var ie=0;B<N;)E=M[B++],V[I++]=E>>>0&255,L&&(V[I++]=E>>>16&255,E=M[B++],V[I++]=E>>>0&255),D[ie++]=E>>>16&255;y=8}g!==t.image_compression.NONE&&e()?(h=n(V,x.width*x.colors,x.colors,g),O=n(D,x.width,1,g)):(h=V,O=D,Q=void 0)}if(x.colorType===3&&(v=this.color_spaces.INDEXED,A=x.palette,x.transparency.indexed)){var q=x.transparency.indexed,G=0;for(B=0,N=q.length;B<N;++B)G+=q[B];if((G/=255)===N-1&&q.indexOf(0)!==-1)S=[q.indexOf(0)];else if(G!==N){for(M=x.decodePixels(),D=new Uint8Array(M.length),B=0,N=M.length;B<N;B++)D[B]=q[M[B]];O=n(D,x.width,1)}}var P=function(U){var K;switch(U){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K}(g);return Q===this.decode.FLATE_DECODE&&(Z="/Predictor "+P+" "),Z+="/Colors "+C+" /BitsPerComponent "+y+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:p,data:h,index:f,filter:Q,decodeParameters:Z,transparency:S,palette:A,sMask:O,predictor:P,width:x.width,height:x.height,bitsPerComponent:y,colorSpace:v}}}})(lt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new xue(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new f2(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(lt.API),js.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},js.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ht.log("bit decode error:"+n)}},js.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},js.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},js.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},js.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},js.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},js.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},js.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},js.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new js(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new f2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(lt.API),LE.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new LE(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new f2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(lt.API),lt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];s[a++]=u,s[a++]=d,s[a++]=h,o[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},lt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ku=lt.API,S0=Ku.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=t.length,p=0,g=a[0]||l,v=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(h=d&&Je(c[r])==="object"&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,v.push((a[r]||g)/l+h)),p=r;return v},NE=Ku.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ku.processArabic&&(t=Ku.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:S0.apply(this,arguments).reduce(function(s,o){return s+o},0)},PE=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},EE=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],d=[u],h=n.textIndent||0,f=0,p=0,g=t.split(" "),v=S0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),x=[];g.map(function(C){(C=C.split(/\s*\n/)).length>1?x=x.concat(C.map(function(A,O){return(O&&A.length?`
`:"")+A})):x.push(C[0])}),g=x,l=NE.apply(this,[y,n])}for(s=0,o=g.length;s<o;s++){var S=0;if(r=g[s],l&&r[0]==`
`&&(r=r.substr(1),S=1),h+f+(p=(i=S0.apply(this,[r,n])).reduce(function(C,A){return C+A},0))>e||S){if(p>e){for(a=PE.apply(this,[r,i,e-(h+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(C,A){return C+A},0)}else u=[r];d.push(u),h=p+l,f=v}else u.push(r),h+=f+p,f=v}return c=l?function(C,A){return(A?y:"")+C.join(" ")}:function(C){return C.join(" ")},d.map(c)},Ku.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(EE.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,f,p,g,v=["{"];for(var y in d){if(h=d[y],isNaN(parseInt(y,10))?f="'"+y+"'":(y=parseInt(y,10),f=(f=s(y).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(p=s(h).slice(3),g="-"):(p=s(h).slice(2),g=""),p=g+p.slice(0,-1)+r[p.slice(-1)];else{if(Je(h)!=="object")throw new Error("Don't know what to do with value type "+Je(h)+".");p=o(h)}v.push(f+p)}return v.push("}"),v.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,p,g,v={},y=1,x=v,S=[],C="",A="",O=d.length-1,M=1;M<O;M+=1)(g=d[M])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(g):g=="{"?(S.push([x,p]),x={},p=void 0):g=="}"?((f=S.pop())[0][f[1]]=x,p=void 0,x=f[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(C+=n[g],p=parseInt(C,16)*y,y=1,C=""):C+=g:n.hasOwnProperty(g)?(A+=n[g],x[p]=parseInt(A,16)*y,y=1,p=void 0,A=""):A+=g;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,f=u.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(lt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(op(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(lt),function(t){function e(){return(ct.canvg?Promise.resolve(ct.canvg):_l(()=>import("./index.es-0803e22a.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}lt.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Ht.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ht.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(p){return p.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),lt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},lt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(p,g){var v,y=!1;for(v=0;v<p.length;v+=1)p[v]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(d=0;d<f;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Je(t)==="object"){for(i in t)if(s=t[i],h(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&h(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?g.push("/"+p+" /"+n[p].value):g.push("/"+p+" "+n[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(lt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(s).sort(function(f,p){return f-p})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var g=c();u({data:f,addLength1:!0,objectId:g}),l("endobj");var v=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Qu(a.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Qu(a.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Qu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var p=c();u({data:h,addLength1:!0,objectId:p}),l("endobj");var g=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var v=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Qu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var y=0;y<a.metadata.hmtx.widths.length;y++)a.metadata.hmtx.widths[y]=parseInt(a.metadata.hmtx.widths[y]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Qu(a.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,f=d.activeFontKey,p=d.fonts,g=f,v="",y=0,x="",S=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(x=a,g=f,Array.isArray(a)&&(x=a[0]),y=0;y<x.length;y+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[x[y].charCodeAt(0)]),o||x[y].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?v+=x[y]:v+="";var C="";return parseInt(g.slice(1))<14||S==="WinAnsiEncoding"?C=h(v,g).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(C=n(v,p[g])),d.isHex=!0,{text:C,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(lt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(lt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,S=0;this.__bidiEngine__={};var C=function(L){var E=L.charCodeAt(),B=E>>8,I=g[B];return I!==void 0?d[256*I+(255&E)]:B===252||B===253?"AL":y.test(B)?"L":B===8?"R":"N"},A=function(L){for(var E,B=0;B<L.length;B++){if((E=C(L.charAt(B)))==="L")return!1;if(E==="R")return!0}return!1},O=function(L,E,B,I){var Q,Z,ne,Y,ie=E[I];switch(ie){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(ie="AN");break;case"AL":x=!0,ie="R";break;case"WS":ie="N";break;case"CS":I<1||I+1>=E.length||(Q=B[I-1])!=="EN"&&Q!=="AN"||(Z=E[I+1])!=="EN"&&Z!=="AN"?ie="N":x&&(Z="AN"),ie=Z===Q?Z:"N";break;case"ES":ie=(Q=I>0?B[I-1]:"B")==="EN"&&I+1<E.length&&E[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&B[I-1]==="EN"){ie="EN";break}if(x){ie="N";break}for(ne=I+1,Y=E.length;ne<Y&&E[ne]==="ET";)ne++;ie=ne<Y&&E[ne]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Y=E.length,ne=I+1;ne<Y&&E[ne]==="NSM";)ne++;if(ne<Y){var q=L[I],G=q>=1425&&q<=2303||q===64286;if(Q=E[ne],G&&(Q==="R"||Q==="AL")){ie="R";break}}}ie=I<1||(Q=E[I-1])==="B"?"N":B[I-1];break;case"B":x=!1,i=!0,ie=S;break;case"S":s=!0,ie="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":ie="N"}return ie},M=function(L,E,B){var I=L.split("");return B&&N(I,B,{hiLevel:S}),I.reverse(),E&&E.reverse(),I.join("")},N=function(L,E,B){var I,Q,Z,ne,Y,ie=-1,q=L.length,G=0,P=[],U=S?f:h,K=[];for(x=!1,i=!1,s=!1,Q=0;Q<q;Q++)K[Q]=C(L[Q]);for(Z=0;Z<q;Z++){if(Y=G,P[Z]=O(L,K,P,Z),I=240&(G=U[Y][p[P[Z]]]),G&=15,E[Z]=ne=U[G][5],I>0)if(I===16){for(Q=ie;Q<Z;Q++)E[Q]=1;ie=-1}else ie=-1;if(U[G][6])ie===-1&&(ie=Z);else if(ie>-1){for(Q=ie;Q<Z;Q++)E[Q]=ne;ie=-1}K[Z]==="B"&&(E[Z]=0),B.hiLevel|=ne}s&&function(J,re,se){for(var ue=0;ue<se;ue++)if(J[ue]==="S"){re[ue]=S;for(var de=ue-1;de>=0&&J[de]==="WS";de--)re[de]=S}}(K,E,q)},D=function(L,E,B,I,Q){if(!(Q.hiLevel<L)){if(L===1&&S===1&&!i)return E.reverse(),void(B&&B.reverse());for(var Z,ne,Y,ie,q=E.length,G=0;G<q;){if(I[G]>=L){for(Y=G+1;Y<q&&I[Y]>=L;)Y++;for(ie=G,ne=Y-1;ie<ne;ie++,ne--)Z=E[ie],E[ie]=E[ne],E[ne]=Z,B&&(Z=B[ie],B[ie]=B[ne],B[ne]=Z);G=Y}G++}}},V=function(L,E,B){var I=L.split(""),Q={hiLevel:S};return B||(B=[]),N(I,B,Q),function(Z,ne,Y){if(Y.hiLevel!==0&&u)for(var ie,q=0;q<Z.length;q++)ne[q]===1&&(ie=v.indexOf(Z[q]))>=0&&(Z[q]=v[ie+1])}(I,B,Q),D(2,I,E,B,Q),D(1,I,E,B,Q),I.join("")};return this.__bidiEngine__.doBidiReorder=function(L,E,B){if(function(Q,Z){if(Z)for(var ne=0;ne<Q.length;ne++)Z[ne]=ne;a===void 0&&(a=A(Q)),c===void 0&&(c=A(Q))}(L,E),o||!l||c)if(o&&l&&a^c)S=a?1:0,L=M(L,E,B);else if(!o&&l&&c)S=a?1:0,L=V(L,E,B),L=M(L,E);else if(!o||a||l||c){if(o&&!l&&a^c)L=M(L,E),a?(S=0,L=V(L,E,B)):(S=1,L=V(L,E,B),L=M(L,E));else if(o&&a&&!l&&c)S=1,L=V(L,E,B),L=M(L,E);else if(!o&&!l&&a^c){var I=u;a?(S=1,L=V(L,E,B),S=0,u=!1,L=V(L,E,B),u=I):(S=0,L=V(L,E,B),L=M(L,E),S=1,u=!1,L=V(L,E,B),u=I,L=M(L,E))}}else S=0,L=V(L,E,B);else S=a?1:0,L=V(L,E,B);return L},this.__bidiEngine__.setOptions=function(L){L&&(o=L.isInputVisual,l=L.isOutputVisual,a=L.isInputRtl,c=L.isOutputRtl,u=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(lt),lt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ll(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Rue(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new wue(this.contents),this.head=new kue(this),this.name=new Nue(this),this.cmap=new z8(this),this.toUnicode={},this.hhea=new _ue(this),this.maxp=new Pue(this),this.hmtx=new Eue(this),this.post=new Aue(this),this.os2=new Cue(this),this.loca=new Iue(this),this.glyf=new Mue(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var to,Ll=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),wue=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,d,h,f,p,g;for(g in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),o=Math.floor(d/l),u=16*f-d,(i=new Ll).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(o),i.writeShort(u),s=16*f,c=i.pos+s,a=null,p=[],n)for(h=n[g],i.writeString(g),i.writeInt(t(h)),i.writeInt(c),i.writeInt(h.length),p=p.concat(h),g==="head"&&(a=c),c+=h.length;c%4;)p.push(0),c++;return i.write(p),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=$8.call(n);n.length%4;)n.push(0);for(s=new Ll(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Sue={}.hasOwnProperty,To=function(t,e){for(var n in e)Sue.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};to=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var kue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ll).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),OE=function(){function t(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,g,v,y,x,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var C,A;for(A=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)A.push(e.readUInt16());return A}(),e.pos+=2,g=function(){var C,A;for(A=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)A.push(e.readUInt16());return A}(),c=function(){var C,A;for(A=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)A.push(e.readUInt16());return A}(),u=function(){var C,A;for(A=[],l=C=0;0<=h?C<h:C>h;l=0<=h?++C:--C)A.push(e.readUInt16());return A}(),i=(this.length-e.pos+this.offset)/2,a=function(){var C,A;for(A=[],l=C=0;0<=i?C<i:C>i;l=0<=i?++C:--C)A.push(e.readUInt16());return A}(),l=y=0,S=s.length;y<S;l=++y)for(v=s[l],r=x=p=g[l];p<=v?x<=v:x>=v;r=p<=v?++x:--x)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-p)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,g,v,y,x,S,C,A,O,M,N,D,V,L,E,B,I,Q,Z,ne,Y,ie,q,G,P,U,K,J,re,se,ue,de,xe,ve,ke;switch(I=new Ll,o=Object.keys(e).sort(function(Te,Ie){return Te-Ie}),n){case"macroman":for(g=0,v=function(){var Te=[];for(p=0;p<256;++p)Te.push(0);return Te}(),x={0:0},s={},Q=0,ie=o.length;Q<ie;Q++)x[de=e[i=o[Q]]]==null&&(x[de]=++g),s[i]={old:e[i],new:x[e[i]]},v[i]=x[e[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(v),{charMap:s,subtable:I.data,maxGlyphID:g+1};case"unicode":for(E=[],d=[],S=0,x={},r={},y=c=null,Z=0,q=o.length;Z<q;Z++)x[A=e[i=o[Z]]]==null&&(x[A]=++S),r[i]={old:A,new:x[A]},a=x[A]-i,y!=null&&a===c||(y&&d.push(y),E.push(i),c=a),y=i;for(y&&d.push(y),d.push(65535),E.push(65535),V=2*(D=E.length),N=2*Math.pow(Math.log(D)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,M=2*D-N,l=[],O=[],f=[],p=ne=0,G=E.length;ne<G;p=++ne){if(L=E[p],u=d[p],L===65535){l.push(0),O.push(0);break}if(L-(B=r[L].new)>=32768)for(l.push(0),O.push(2*(f.length+D-p)),i=Y=L;L<=u?Y<=u:Y>=u;i=L<=u?++Y:--Y)f.push(r[i].new);else l.push(B-L),O.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*D+2*f.length),I.writeUInt16(0),I.writeUInt16(V),I.writeUInt16(N),I.writeUInt16(h),I.writeUInt16(M),se=0,P=d.length;se<P;se++)i=d[se],I.writeUInt16(i);for(I.writeUInt16(0),ue=0,U=E.length;ue<U;ue++)i=E[ue],I.writeUInt16(i);for(xe=0,K=l.length;xe<K;xe++)a=l[xe],I.writeUInt16(a);for(ve=0,J=O.length;ve<J;ve++)C=O[ve],I.writeUInt16(C);for(ke=0,re=f.length;ke<re;ke++)g=f[ke],I.writeUInt16(g);return{charMap:r,subtable:I.data,maxGlyphID:S+1}}},t}(),z8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new OE(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=OE.encode(n,r),(s=new Ll).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),_ue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Cue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Aue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}.call(this)}},e}(),Tue=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Nue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,u,d,h,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,h=i.length;d<h;o=++d)s=i[o],n.pos=s.offset,u=n.readString(s.length),a=new Tue(u,s),c[f=s.nameID]==null&&(c[f]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Pue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Eue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(n.readInt16());return d}(),this.widths=function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)o=h[u],f.push(o.advance);return f}.call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),$8=[].slice,Mue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,u,d,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ll(r.read(s))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new Oue(l,u,h,c,d):new Lue(l,a,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),Lue=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Oue=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ll($8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Iue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,to),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*i.length),d=0;d<i.length;++d)u[4*d+3]=255&i[d],u[4*d+2]=(65280&i[d])>>8,u[4*d+1]=(16711680&i[d])>>16,u[4*d]=(4278190080&i[d])>>24;return u},e}(),Rue=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,g,v,y;for(i in r=z8.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},y=r.charMap)f[(l=y[i]).old]=l.new;for(p in h=r.maxGlyphID,o)p in f||(f[p]=h++);return u=function(x){var S,C;for(S in C={},x)C[x[S]]=S;return C}(f),d=Object.keys(u).sort(function(x,S){return x-S}),g=function(){var x,S,C;for(C=[],x=0,S=d.length;x<S;x++)a=d[x],C.push(u[a]);return C}(),s=this.font.glyf.encode(o,g,f),c=this.font.loca.encode(s.offsets,g),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();lt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();async function jue({studentName:t,experimentTitle:e,strandProgress:n,userInputs:r,points:i,earnedBadges:s}){const o=new lt;let a=20;o.setFontSize(16),o.text(`Lab Report - ${t}`,105,a,{align:"center"}),a+=10,o.setFontSize(12),o.text(`Experiment: ${e}`,20,a),a+=8,o.text(`Student: ${t}`,20,a),a+=8,o.text(`Date: ${new Date().toLocaleDateString()}`,20,a),a+=8,o.text(`Total Score: ${n.reduce((l,c)=>l+c,0)}/40`,20,a),a+=8,o.text(`Points: ${i}`,20,a),a+=8,o.text(`Badges Earned: ${Object.values(s).filter(Boolean).length}/5`,20,a),a+=10;for(let l=0;l<5;l++){o.setFont("helvetica","bold"),o.text(`${l+1}. Strand ${l+1}`,20,a),a+=8,o.setFont("helvetica","normal"),o.text(`Level: ${n[l]||0}/8`,20,a),a+=6,o.text("Content:",20,a),a+=6;const c=r[`strand${l+1}`]?.level8||"",u=document.createElement("div");u.innerHTML=c;for(const d of Array.from(u.childNodes)){if(d.nodeType===3){const h=o.splitTextToSize(d.textContent||"",170);o.text(h,20,a),a+=h.length*6}else if(d.nodeName==="IMG"){const h=d;h.src.startsWith("data:image")&&(o.addImage(h.src,"JPEG",20,a,100,60),a+=65)}else if(d.nodeType===1){const h=d,f=o.splitTextToSize(h.innerText,170);o.text(f,20,a),a+=f.length*6}a>270&&(o.addPage(),a=20)}a+=8}return o.setFont("helvetica","bold"),o.text("Badges Summary:",20,a),a+=8,o.setFont("helvetica","normal"),Object.entries(s).forEach(([l,c])=>{o.text(`${l}: ${c?"":""}`,20,a),a+=6}),o.output("blob")}const Due=({studentName:t,learningPathChoice:e,learningPathData:n,setScreen:r,setStudentName:i,setLearningPathChoice:s,setCurrentStrand:o,pdfDataUrl:a,setPdfDataUrl:l,isPdfGenerating:c,setIsPdfGenerating:u,onReset:d})=>{const{strandProgress:h,userInputs:f,setStrandProgress:p,setUserInputs:g,earnedBadges:v,setEarnedBadges:y,points:x,setPoints:S,strandStatus:C,setStrandStatus:A}=fm(),O=h.reduce((V,L)=>V+L,0),M=Object.values(v??{}).filter(Boolean).length;W.useRef(null);const N=async()=>{try{u(!0);const V=await jue({studentName:t,experimentTitle:n[e]?.title||"TIR Learning Path",strandProgress:h,userInputs:f,points:x,earnedBadges:v}),L=URL.createObjectURL(V);l(L)}catch(V){alert("Failed to generate PDF"),console.error(V)}finally{u(!1)}},D=()=>{r("welcome"),i(""),s(null),o(1),p([0,0,0,0]),g({strand1:{level2:"",level4:"",level6:"",level8:""},strand2:{level2:"",level4:"",level6:"",level8:""},strand3:{level2:"",level4:"",level6:"",level8:""},strand4:{level2:"",level4:"",level6:"",level8:""}}),y({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1}),S(0),A(["in progress","not started","not started","not started"]),l(""),u(!1)};return w.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[w.jsxs("h1",{className:"text-3xl font-bold text-center text-purple-800 mb-4",children:[" Well Done, ",t,"! "]}),w.jsxs("p",{className:"text-center text-lg mb-6",children:["You completed the ",w.jsx("strong",{children:n[e]?.title})," learning journey."]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6",children:[w.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[w.jsx("p",{className:"text-sm text-purple-800",children:"Total Score"}),w.jsx("p",{className:"text-3xl font-bold text-purple-800",children:O})]}),w.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[w.jsx("p",{className:"text-sm text-purple-800",children:"Points"}),w.jsx("p",{className:"text-3xl font-bold text-purple-800",children:x})]}),w.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[w.jsx("p",{className:"text-sm text-purple-800",children:"Badges"}),w.jsxs("p",{className:"text-3xl font-bold text-purple-800",children:[M,"/4"]})," "]})]}),w.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg mb-6",children:[w.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:[" Learning Path: ",e==="critical-angle"?"Discovering Critical Angles":"How Fibre Optics Work"]}),w.jsx("p",{className:"text-purple-700",children:e==="critical-angle"?"You explored the physics behind total internal reflection and discovered the critical angle where this phenomenon begins.":"You investigated how light travels through glass fibers to enable modern communication and medical technologies."})]}),Array.from({length:4}).map((V,L)=>{const E=f[`strand${L+1}`]?.level8||"",B=["TIR Principles & Laws","Understanding TIR Phenomena","Real-World Applications","Analysis & Problem Solving"];return w.jsxs("div",{className:"border border-purple-200 p-4 rounded bg-white mb-4",children:[w.jsxs("h3",{className:"text-lg font-semibold text-purple-700",children:["Strand ",L+1,": ",B[L]]}),w.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Level: ",h[L]||0,"/8"]}),w.jsx("div",{className:"prose max-w-none text-sm text-gray-700",dangerouslySetInnerHTML:{__html:E}})]},L)}),w.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:" Badges Earned"}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"principlePioneer",label:"Principle Pioneer",icon:"",description:"TIR laws mastered"},{key:"conceptCrusader",label:"Concept Crusader",icon:"",description:"Deep understanding"},{key:"applicationAce",label:"Application Ace",icon:"",description:"Real-world connections"},{key:"analysisArchitect",label:"Analysis Architect",icon:"",description:"Problem solving"}].map(V=>w.jsxs("div",{className:`p-3 rounded-lg text-center text-sm transition ${v[V.key]?"bg-purple-100 border-2 border-purple-400 text-purple-800":"bg-gray-100 border-2 border-gray-300 text-gray-400"}`,children:[w.jsx("div",{className:"text-2xl mb-1",children:V.icon}),w.jsx("div",{className:"font-medium",children:V.label}),w.jsx("div",{className:"text-xs",children:V.description})]},V.key))})]}),w.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[w.jsx("button",{onClick:N,disabled:c,className:"bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition",children:c?"Generating PDF...":" Generate PDF Report"}),a&&w.jsx("a",{href:a,download:`TIR_Report_${t.replace(/\s+/g,"_")}_${new Date().toLocaleDateString()}.pdf`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white text-center py-3 rounded-lg hover:bg-blue-700 transition",children:" View & Download PDF"}),w.jsx("button",{onClick:d||D,className:"bg-purple-400 text-white py-3 rounded-lg hover:bg-purple-500 transition",children:" Try a Different Learning Path"})]})]})},Fue=()=>{const[t,e]=W.useState("welcome"),[n,r]=W.useState(""),[i,s]=W.useState(null),[o,a]=W.useState(""),[l,c]=W.useState(0),[u,d]=W.useState(["in progress","not started","not started","not started"]),[h,f]=W.useState({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1}),[p,g]=W.useState(""),[v,y]=W.useState(!1),[x,S]=W.useState(1),C=(O,M)=>{r(O),s(M),a(M==="critical-angle"?"Discovering Critical Angles - Total Internal Reflection":"How Fibre Optics Work - Light Transmission Technology"),e("main")},A=()=>{e("welcome"),r(""),s(null),S(1),d(["in progress","not started","not started","not started"]),f({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1}),c(0),g(""),y(!1)};return w.jsx(vce,{children:w.jsxs(HW,{children:[t==="welcome"&&w.jsx(y$,{onStart:C}),t==="main"&&w.jsx(Fce,{experimentTitle:o,learningPathData:{"critical-angle":{title:"Discovering Critical Angles - Total Internal Reflection"},"fiber-optics":{title:"How Fibre Optics Work - Light Transmission Technology"}},learningPathChoice:i,currentStrand:x,setCurrentStrand:S,points:l,setPoints:c,strandStatus:u,setStrandStatus:d,earnedBadges:h,setEarnedBadges:f,onNext:()=>e("results"),onBack:()=>e("welcome")}),t==="results"&&w.jsx(Due,{studentName:n,learningPathChoice:i,learningPathData:{"critical-angle":{title:"Discovering Critical Angles - Total Internal Reflection"},"fiber-optics":{title:"How Fibre Optics Work - Light Transmission Technology"}},setScreen:e,setStudentName:r,setLearningPathChoice:s,setCurrentStrand:S,pdfDataUrl:p,setPdfDataUrl:g,isPdfGenerating:v,setIsPdfGenerating:y,onReset:A})]})})};const Bue="/tir-criteria-a",V8=document.getElementById("root");if(!V8)throw new Error("No root element found");p2.createRoot(V8).render(w.jsx(nt.StrictMode,{children:w.jsx(Dce,{basename:Bue,children:w.jsx(Fue,{})})}));export{Ke as _,ks as c,hS as g};
