function A7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function N7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var OP={exports:{}},av={},IP={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=Symbol.for("react.element"),T7=Symbol.for("react.portal"),E7=Symbol.for("react.fragment"),P7=Symbol.for("react.strict_mode"),M7=Symbol.for("react.profiler"),j7=Symbol.for("react.provider"),L7=Symbol.for("react.context"),O7=Symbol.for("react.forward_ref"),I7=Symbol.for("react.suspense"),R7=Symbol.for("react.memo"),D7=Symbol.for("react.lazy"),A_=Symbol.iterator;function F7(t){return t===null||typeof t!="object"?null:(t=A_&&t[A_]||t["@@iterator"],typeof t=="function"?t:null)}var RP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DP=Object.assign,FP={};function ih(t,e,n){this.props=t,this.context=e,this.refs=FP,this.updater=n||RP}ih.prototype.isReactComponent={};ih.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ih.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BP(){}BP.prototype=ih.prototype;function oS(t,e,n){this.props=t,this.context=e,this.refs=FP,this.updater=n||RP}var aS=oS.prototype=new BP;aS.constructor=oS;DP(aS,ih.prototype);aS.isPureReactComponent=!0;var N_=Array.isArray,zP=Object.prototype.hasOwnProperty,lS={current:null},$P={key:!0,ref:!0,__self:!0,__source:!0};function VP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zP.call(e,r)&&!$P.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Jp,type:t,key:s,ref:o,props:i,_owner:lS.current}}function B7(t,e){return{$$typeof:Jp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jp}function z7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var T_=/\/+/g;function fb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?z7(""+t.key):e.toString(36)}function v0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jp:case T7:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fb(o,0):r,N_(i)?(n="",t!=null&&(n=t.replace(T_,"$&/")+"/"),v0(i,e,n,"",function(c){return c})):i!=null&&(cS(i)&&(i=B7(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(T_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",N_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+fb(s,a);o+=v0(s,e,n,l,i)}else if(l=F7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+fb(s,a++),o+=v0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lg(t,e,n){if(t==null)return t;var r=[],i=0;return v0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ai={current:null},b0={transition:null},V7={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:b0,ReactCurrentOwner:lS};function UP(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:lg,forEach:function(t,e,n){lg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lg(t,function(){e++}),e},toArray:function(t){return lg(t,function(e){return e})||[]},only:function(t){if(!cS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_t.Component=ih;_t.Fragment=E7;_t.Profiler=M7;_t.PureComponent=oS;_t.StrictMode=P7;_t.Suspense=I7;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V7;_t.act=UP;_t.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=DP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zP.call(e,l)&&!$P.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jp,type:t.type,key:i,ref:s,props:r,_owner:o}};_t.createContext=function(t){return t={$$typeof:L7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:j7,_context:t},t.Consumer=t};_t.createElement=VP;_t.createFactory=function(t){var e=VP.bind(null,t);return e.type=t,e};_t.createRef=function(){return{current:null}};_t.forwardRef=function(t){return{$$typeof:O7,render:t}};_t.isValidElement=cS;_t.lazy=function(t){return{$$typeof:D7,_payload:{_status:-1,_result:t},_init:$7}};_t.memo=function(t,e){return{$$typeof:R7,type:t,compare:e===void 0?null:e}};_t.startTransition=function(t){var e=b0.transition;b0.transition={};try{t()}finally{b0.transition=e}};_t.unstable_act=UP;_t.useCallback=function(t,e){return ai.current.useCallback(t,e)};_t.useContext=function(t){return ai.current.useContext(t)};_t.useDebugValue=function(){};_t.useDeferredValue=function(t){return ai.current.useDeferredValue(t)};_t.useEffect=function(t,e){return ai.current.useEffect(t,e)};_t.useId=function(){return ai.current.useId()};_t.useImperativeHandle=function(t,e,n){return ai.current.useImperativeHandle(t,e,n)};_t.useInsertionEffect=function(t,e){return ai.current.useInsertionEffect(t,e)};_t.useLayoutEffect=function(t,e){return ai.current.useLayoutEffect(t,e)};_t.useMemo=function(t,e){return ai.current.useMemo(t,e)};_t.useReducer=function(t,e,n){return ai.current.useReducer(t,e,n)};_t.useRef=function(t){return ai.current.useRef(t)};_t.useState=function(t){return ai.current.useState(t)};_t.useSyncExternalStore=function(t,e,n){return ai.current.useSyncExternalStore(t,e,n)};_t.useTransition=function(){return ai.current.useTransition()};_t.version="18.3.1";IP.exports=_t;var B=IP.exports;const Ze=sS(B),lv=A7({__proto__:null,default:Ze},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U7=B,q7=Symbol.for("react.element"),W7=Symbol.for("react.fragment"),H7=Object.prototype.hasOwnProperty,K7=U7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G7={key:!0,ref:!0,__self:!0,__source:!0};function qP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)H7.call(e,r)&&!G7.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:q7,type:t,key:s,ref:o,props:i,_owner:K7.current}}av.Fragment=W7;av.jsx=qP;av.jsxs=qP;OP.exports=av;var m=OP.exports,u2={},WP={exports:{}},Xi={},HP={exports:{}},KP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ie){var V=X.length;X.push(ie);e:for(;0<V;){var K=V-1>>>1,M=X[K];if(0<i(M,ie))X[K]=ie,X[V]=M,V=K;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ie=X[0],V=X.pop();if(V!==ie){X[0]=V;e:for(var K=0,M=X.length,U=M>>>1;K<U;){var G=2*(K+1)-1,Z=X[G],re=G+1,se=X[re];if(0>i(Z,V))re<M&&0>i(se,Z)?(X[K]=se,X[re]=V,K=re):(X[K]=Z,X[G]=V,K=G);else if(re<M&&0>i(se,V))X[K]=se,X[re]=V,K=re;else break e}}return ie}function i(X,ie){var V=X.sortIndex-ie.sortIndex;return V!==0?V:X.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(X){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=X)r(c),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(c)}}function _(X){if(y=!1,S(X),!p)if(n(l)!==null)p=!0,Y(A);else{var ie=n(c);ie!==null&&ee(_,ie.startTime-X)}}function A(X,ie){p=!1,y&&(y=!1,v(E),E=-1),f=!0;var V=h;try{for(S(ie),d=n(l);d!==null&&(!(d.expirationTime>ie)||X&&!j());){var K=d.callback;if(typeof K=="function"){d.callback=null,h=d.priorityLevel;var M=K(d.expirationTime<=ie);ie=t.unstable_now(),typeof M=="function"?d.callback=M:d===n(l)&&r(l),S(ie)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var G=n(c);G!==null&&ee(_,G.startTime-ie),U=!1}return U}finally{d=null,h=V,f=!1}}var T=!1,P=null,E=-1,z=5,H=-1;function j(){return!(t.unstable_now()-H<z)}function I(){if(P!==null){var X=t.unstable_now();H=X;var ie=!0;try{ie=P(!0,X)}finally{ie?q():(T=!1,P=null)}}else T=!1}var q;if(typeof x=="function")q=function(){x(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ne=F.port2;F.port1.onmessage=I,q=function(){ne.postMessage(null)}}else q=function(){b(I,0)};function Y(X){P=X,T||(T=!0,q())}function ee(X,ie){E=b(function(){X(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(A))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(h){case 1:case 2:case 3:var ie=3;break;default:ie=h}var V=h;h=ie;try{return X()}finally{h=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ie){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var V=h;h=X;try{return ie()}finally{h=V}},t.unstable_scheduleCallback=function(X,ie,V){var K=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,X){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=V+M,X={id:u++,callback:ie,priorityLevel:X,startTime:V,expirationTime:M,sortIndex:-1},V>K?(X.sortIndex=V,e(c,X),n(l)===null&&X===n(c)&&(y?(v(E),E=-1):y=!0,ee(_,V-K))):(X.sortIndex=M,e(l,X),p||f||(p=!0,Y(A))),X},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(X){var ie=h;return function(){var V=h;h=ie;try{return X.apply(this,arguments)}finally{h=V}}}})(KP);HP.exports=KP;var Y7=HP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X7=B,Gi=Y7;function Le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GP=new Set,rp={};function eu(t,e){Id(t,e),Id(t+"Capture",e)}function Id(t,e){for(rp[t]=e,t=0;t<e.length;t++)GP.add(e[t])}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d2=Object.prototype.hasOwnProperty,J7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E_={},P_={};function Q7(t){return d2.call(P_,t)?!0:d2.call(E_,t)?!1:J7.test(t)?P_[t]=!0:(E_[t]=!0,!1)}function Z7(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eF(t,e,n,r){if(e===null||typeof e>"u"||Z7(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function li(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_r[t]=new li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_r[e]=new li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_r[t]=new li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_r[t]=new li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_r[t]=new li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_r[t]=new li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_r[t]=new li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_r[t]=new li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_r[t]=new li(t,5,!1,t.toLowerCase(),null,!1,!1)});var uS=/[\-:]([a-z])/g;function dS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uS,dS);_r[e]=new li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uS,dS);_r[e]=new li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uS,dS);_r[e]=new li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_r[t]=new li(t,1,!1,t.toLowerCase(),null,!1,!1)});_r.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_r[t]=new li(t,1,!1,t.toLowerCase(),null,!0,!0)});function hS(t,e,n,r){var i=_r.hasOwnProperty(e)?_r[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eF(e,n,i,r)&&(n=null),r||i===null?Q7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ha=X7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cg=Symbol.for("react.element"),Xu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),h2=Symbol.for("react.profiler"),YP=Symbol.for("react.provider"),XP=Symbol.for("react.context"),pS=Symbol.for("react.forward_ref"),f2=Symbol.for("react.suspense"),p2=Symbol.for("react.suspense_list"),mS=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),JP=Symbol.for("react.offscreen"),M_=Symbol.iterator;function Hh(t){return t===null||typeof t!="object"?null:(t=M_&&t[M_]||t["@@iterator"],typeof t=="function"?t:null)}var bn=Object.assign,pb;function pf(t){if(pb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pb=e&&e[1]||""}return`
`+pb+t}var mb=!1;function gb(t,e){if(!t||mb)return"";mb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pf(t):""}function tF(t){switch(t.tag){case 5:return pf(t.type);case 16:return pf("Lazy");case 13:return pf("Suspense");case 19:return pf("SuspenseList");case 0:case 2:case 15:return t=gb(t.type,!1),t;case 11:return t=gb(t.type.render,!1),t;case 1:return t=gb(t.type,!0),t;default:return""}}function m2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ju:return"Fragment";case Xu:return"Portal";case h2:return"Profiler";case fS:return"StrictMode";case f2:return"Suspense";case p2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XP:return(t.displayName||"Context")+".Consumer";case YP:return(t._context.displayName||"Context")+".Provider";case pS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mS:return e=t.displayName||null,e!==null?e:m2(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return m2(t(e))}catch{}}return null}function nF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m2(e);case 8:return e===fS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rF(t){var e=QP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ug(t){t._valueTracker||(t._valueTracker=rF(t))}function ZP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=QP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Q0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function g2(t,e){var n=e.checked;return bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function j_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eM(t,e){e=e.checked,e!=null&&hS(t,"checked",e,!1)}function y2(t,e){eM(t,e);var n=Sl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?v2(t,e.type,n):e.hasOwnProperty("defaultValue")&&v2(t,e.type,Sl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function L_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function v2(t,e,n){(e!=="number"||Q0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mf=Array.isArray;function bd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function b2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return bn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Le(92));if(mf(n)){if(1<n.length)throw Error(Le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sl(n)}}function tM(t,e){var n=Sl(e.value),r=Sl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function I_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nM(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function x2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nM(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dg,rM=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dg=dg||document.createElement("div"),dg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ip(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iF=["Webkit","ms","Moz","O"];Object.keys(Ef).forEach(function(t){iF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ef[e]=Ef[t]})});function iM(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ef.hasOwnProperty(t)&&Ef[t]?(""+e).trim():e+"px"}function sM(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=iM(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sF=bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w2(t,e){if(e){if(sF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function S2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k2=null;function gS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var C2=null,xd=null,wd=null;function R_(t){if(t=em(t)){if(typeof C2!="function")throw Error(Le(280));var e=t.stateNode;e&&(e=fv(e),C2(t.stateNode,t.type,e))}}function oM(t){xd?wd?wd.push(t):wd=[t]:xd=t}function aM(){if(xd){var t=xd,e=wd;if(wd=xd=null,R_(t),e)for(t=0;t<e.length;t++)R_(e[t])}}function lM(t,e){return t(e)}function cM(){}var yb=!1;function uM(t,e,n){if(yb)return t(e,n);yb=!0;try{return lM(t,e,n)}finally{yb=!1,(xd!==null||wd!==null)&&(cM(),aM())}}function sp(t,e){var n=t.stateNode;if(n===null)return null;var r=fv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Le(231,e,typeof n));return n}var _2=!1;if(aa)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){_2=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{_2=!1}function oF(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Pf=!1,Z0=null,ey=!1,A2=null,aF={onError:function(t){Pf=!0,Z0=t}};function lF(t,e,n,r,i,s,o,a,l){Pf=!1,Z0=null,oF.apply(aF,arguments)}function cF(t,e,n,r,i,s,o,a,l){if(lF.apply(this,arguments),Pf){if(Pf){var c=Z0;Pf=!1,Z0=null}else throw Error(Le(198));ey||(ey=!0,A2=c)}}function tu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D_(t){if(tu(t)!==t)throw Error(Le(188))}function uF(t){var e=t.alternate;if(!e){if(e=tu(t),e===null)throw Error(Le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return D_(i),t;if(s===r)return D_(i),e;s=s.sibling}throw Error(Le(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?t:e}function hM(t){return t=uF(t),t!==null?fM(t):null}function fM(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fM(t);if(e!==null)return e;t=t.sibling}return null}var pM=Gi.unstable_scheduleCallback,F_=Gi.unstable_cancelCallback,dF=Gi.unstable_shouldYield,hF=Gi.unstable_requestPaint,Dn=Gi.unstable_now,fF=Gi.unstable_getCurrentPriorityLevel,yS=Gi.unstable_ImmediatePriority,mM=Gi.unstable_UserBlockingPriority,ty=Gi.unstable_NormalPriority,pF=Gi.unstable_LowPriority,gM=Gi.unstable_IdlePriority,cv=null,yo=null;function mF(t){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(cv,t,void 0,(t.current.flags&128)===128)}catch{}}var Ks=Math.clz32?Math.clz32:vF,gF=Math.log,yF=Math.LN2;function vF(t){return t>>>=0,t===0?32:31-(gF(t)/yF|0)|0}var hg=64,fg=4194304;function gf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ny(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=gf(a):(s&=o,s!==0&&(r=gf(s)))}else o=n&~i,o!==0?r=gf(o):s!==0&&(r=gf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ks(e),i=1<<n,r|=t[n],e&=~i;return r}function bF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ks(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=bF(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function N2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yM(){var t=hg;return hg<<=1,!(hg&4194240)&&(hg=64),t}function vb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ks(e),t[e]=n}function wF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ks(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ks(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Vt=0;function vM(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bM,bS,xM,wM,SM,T2=!1,pg=[],ll=null,cl=null,ul=null,op=new Map,ap=new Map,Ha=[],SF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B_(t,e){switch(t){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":cl=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":op.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ap.delete(e.pointerId)}}function Gh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=em(e),e!==null&&bS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kF(t,e,n,r,i){switch(e){case"focusin":return ll=Gh(ll,t,e,n,r,i),!0;case"dragenter":return cl=Gh(cl,t,e,n,r,i),!0;case"mouseover":return ul=Gh(ul,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return op.set(s,Gh(op.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ap.set(s,Gh(ap.get(s)||null,t,e,n,r,i)),!0}return!1}function kM(t){var e=vc(t.target);if(e!==null){var n=tu(e);if(n!==null){if(e=n.tag,e===13){if(e=dM(n),e!==null){t.blockedOn=e,SM(t.priority,function(){xM(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function x0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=E2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);k2=r,n.target.dispatchEvent(r),k2=null}else return e=em(n),e!==null&&bS(e),t.blockedOn=n,!1;e.shift()}return!0}function z_(t,e,n){x0(t)&&n.delete(e)}function CF(){T2=!1,ll!==null&&x0(ll)&&(ll=null),cl!==null&&x0(cl)&&(cl=null),ul!==null&&x0(ul)&&(ul=null),op.forEach(z_),ap.forEach(z_)}function Yh(t,e){t.blockedOn===e&&(t.blockedOn=null,T2||(T2=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,CF)))}function lp(t){function e(i){return Yh(i,t)}if(0<pg.length){Yh(pg[0],t);for(var n=1;n<pg.length;n++){var r=pg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ll!==null&&Yh(ll,t),cl!==null&&Yh(cl,t),ul!==null&&Yh(ul,t),op.forEach(e),ap.forEach(e),n=0;n<Ha.length;n++)r=Ha[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ha.length&&(n=Ha[0],n.blockedOn===null);)kM(n),n.blockedOn===null&&Ha.shift()}var Sd=ha.ReactCurrentBatchConfig,ry=!0;function _F(t,e,n,r){var i=Vt,s=Sd.transition;Sd.transition=null;try{Vt=1,xS(t,e,n,r)}finally{Vt=i,Sd.transition=s}}function AF(t,e,n,r){var i=Vt,s=Sd.transition;Sd.transition=null;try{Vt=4,xS(t,e,n,r)}finally{Vt=i,Sd.transition=s}}function xS(t,e,n,r){if(ry){var i=E2(t,e,n,r);if(i===null)Tb(t,e,r,iy,n),B_(t,r);else if(kF(i,t,e,n,r))r.stopPropagation();else if(B_(t,r),e&4&&-1<SF.indexOf(t)){for(;i!==null;){var s=em(i);if(s!==null&&bM(s),s=E2(t,e,n,r),s===null&&Tb(t,e,r,iy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tb(t,e,r,null,n)}}var iy=null;function E2(t,e,n,r){if(iy=null,t=gS(r),t=vc(t),t!==null)if(e=tu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iy=t,null}function CM(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fF()){case yS:return 1;case mM:return 4;case ty:case pF:return 16;case gM:return 536870912;default:return 16}default:return 16}}var Ja=null,wS=null,w0=null;function _M(){if(w0)return w0;var t,e=wS,n=e.length,r,i="value"in Ja?Ja.value:Ja.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return w0=i.slice(t,1<r?1-r:void 0)}function S0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mg(){return!0}function $_(){return!1}function Ji(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mg:$_,this.isPropagationStopped=$_,this}return bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mg)},persist:function(){},isPersistent:mg}),e}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SS=Ji(sh),Zp=bn({},sh,{view:0,detail:0}),NF=Ji(Zp),bb,xb,Xh,uv=bn({},Zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xh&&(Xh&&t.type==="mousemove"?(bb=t.screenX-Xh.screenX,xb=t.screenY-Xh.screenY):xb=bb=0,Xh=t),bb)},movementY:function(t){return"movementY"in t?t.movementY:xb}}),V_=Ji(uv),TF=bn({},uv,{dataTransfer:0}),EF=Ji(TF),PF=bn({},Zp,{relatedTarget:0}),wb=Ji(PF),MF=bn({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),jF=Ji(MF),LF=bn({},sh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OF=Ji(LF),IF=bn({},sh,{data:0}),U_=Ji(IF),RF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FF[t])?!!e[t]:!1}function kS(){return BF}var zF=bn({},Zp,{key:function(t){if(t.key){var e=RF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=S0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kS,charCode:function(t){return t.type==="keypress"?S0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?S0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$F=Ji(zF),VF=bn({},uv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q_=Ji(VF),UF=bn({},Zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kS}),qF=Ji(UF),WF=bn({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),HF=Ji(WF),KF=bn({},uv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GF=Ji(KF),YF=[9,13,27,32],CS=aa&&"CompositionEvent"in window,Mf=null;aa&&"documentMode"in document&&(Mf=document.documentMode);var XF=aa&&"TextEvent"in window&&!Mf,AM=aa&&(!CS||Mf&&8<Mf&&11>=Mf),W_=String.fromCharCode(32),H_=!1;function NM(t,e){switch(t){case"keyup":return YF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qu=!1;function JF(t,e){switch(t){case"compositionend":return TM(e);case"keypress":return e.which!==32?null:(H_=!0,W_);case"textInput":return t=e.data,t===W_&&H_?null:t;default:return null}}function QF(t,e){if(Qu)return t==="compositionend"||!CS&&NM(t,e)?(t=_M(),w0=wS=Ja=null,Qu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AM&&e.locale!=="ko"?null:e.data;default:return null}}var ZF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZF[t.type]:e==="textarea"}function EM(t,e,n,r){oM(r),e=sy(e,"onChange"),0<e.length&&(n=new SS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jf=null,cp=null;function eB(t){zM(t,0)}function dv(t){var e=td(t);if(ZP(e))return t}function tB(t,e){if(t==="change")return e}var PM=!1;if(aa){var Sb;if(aa){var kb="oninput"in document;if(!kb){var G_=document.createElement("div");G_.setAttribute("oninput","return;"),kb=typeof G_.oninput=="function"}Sb=kb}else Sb=!1;PM=Sb&&(!document.documentMode||9<document.documentMode)}function Y_(){jf&&(jf.detachEvent("onpropertychange",MM),cp=jf=null)}function MM(t){if(t.propertyName==="value"&&dv(cp)){var e=[];EM(e,cp,t,gS(t)),uM(eB,e)}}function nB(t,e,n){t==="focusin"?(Y_(),jf=e,cp=n,jf.attachEvent("onpropertychange",MM)):t==="focusout"&&Y_()}function rB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dv(cp)}function iB(t,e){if(t==="click")return dv(e)}function sB(t,e){if(t==="input"||t==="change")return dv(e)}function oB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Js=typeof Object.is=="function"?Object.is:oB;function up(t,e){if(Js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d2.call(e,i)||!Js(t[i],e[i]))return!1}return!0}function X_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J_(t,e){var n=X_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=X_(n)}}function jM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LM(){for(var t=window,e=Q0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Q0(t.document)}return e}function _S(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aB(t){var e=LM(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jM(n.ownerDocument.documentElement,n)){if(r!==null&&_S(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=J_(n,s);var o=J_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lB=aa&&"documentMode"in document&&11>=document.documentMode,Zu=null,P2=null,Lf=null,M2=!1;function Q_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;M2||Zu==null||Zu!==Q0(r)||(r=Zu,"selectionStart"in r&&_S(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lf&&up(Lf,r)||(Lf=r,r=sy(P2,"onSelect"),0<r.length&&(e=new SS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zu)))}function gg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ed={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},Cb={},OM={};aa&&(OM=document.createElement("div").style,"AnimationEvent"in window||(delete ed.animationend.animation,delete ed.animationiteration.animation,delete ed.animationstart.animation),"TransitionEvent"in window||delete ed.transitionend.transition);function hv(t){if(Cb[t])return Cb[t];if(!ed[t])return t;var e=ed[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OM)return Cb[t]=e[n];return t}var IM=hv("animationend"),RM=hv("animationiteration"),DM=hv("animationstart"),FM=hv("transitionend"),BM=new Map,Z_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ll(t,e){BM.set(t,e),eu(e,[t])}for(var _b=0;_b<Z_.length;_b++){var Ab=Z_[_b],cB=Ab.toLowerCase(),uB=Ab[0].toUpperCase()+Ab.slice(1);Ll(cB,"on"+uB)}Ll(IM,"onAnimationEnd");Ll(RM,"onAnimationIteration");Ll(DM,"onAnimationStart");Ll("dblclick","onDoubleClick");Ll("focusin","onFocus");Ll("focusout","onBlur");Ll(FM,"onTransitionEnd");Id("onMouseEnter",["mouseout","mouseover"]);Id("onMouseLeave",["mouseout","mouseover"]);Id("onPointerEnter",["pointerout","pointerover"]);Id("onPointerLeave",["pointerout","pointerover"]);eu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eu("onBeforeInput",["compositionend","keypress","textInput","paste"]);eu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dB=new Set("cancel close invalid load scroll toggle".split(" ").concat(yf));function eA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cF(r,e,void 0,t),t.currentTarget=null}function zM(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;eA(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;eA(i,a,c),s=l}}}if(ey)throw t=A2,ey=!1,A2=null,t}function nn(t,e){var n=e[R2];n===void 0&&(n=e[R2]=new Set);var r=t+"__bubble";n.has(r)||($M(e,t,2,!1),n.add(r))}function Nb(t,e,n){var r=0;e&&(r|=4),$M(n,t,r,e)}var yg="_reactListening"+Math.random().toString(36).slice(2);function dp(t){if(!t[yg]){t[yg]=!0,GP.forEach(function(n){n!=="selectionchange"&&(dB.has(n)||Nb(n,!1,t),Nb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yg]||(e[yg]=!0,Nb("selectionchange",!1,e))}}function $M(t,e,n,r){switch(CM(e)){case 1:var i=_F;break;case 4:i=AF;break;default:i=xS}n=i.bind(null,e,n,t),i=void 0,!_2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tb(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uM(function(){var c=s,u=gS(n),d=[];e:{var h=BM.get(t);if(h!==void 0){var f=SS,p=t;switch(t){case"keypress":if(S0(n)===0)break e;case"keydown":case"keyup":f=$F;break;case"focusin":p="focus",f=wb;break;case"focusout":p="blur",f=wb;break;case"beforeblur":case"afterblur":f=wb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=V_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=EF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=qF;break;case IM:case RM:case DM:f=jF;break;case FM:f=HF;break;case"scroll":f=NF;break;case"wheel":f=GF;break;case"copy":case"cut":case"paste":f=OF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=q_}var y=(e&4)!==0,b=!y&&t==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var x=c,S;x!==null;){S=x;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,v!==null&&(_=sp(x,v),_!=null&&y.push(hp(x,_,S)))),b)break;x=x.return}0<y.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==k2&&(p=n.relatedTarget||n.fromElement)&&(vc(p)||p[la]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?vc(p):null,p!==null&&(b=tu(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=V_,_="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=q_,_="onPointerLeave",v="onPointerEnter",x="pointer"),b=f==null?h:td(f),S=p==null?h:td(p),h=new y(_,x+"leave",f,n,u),h.target=b,h.relatedTarget=S,_=null,vc(u)===c&&(y=new y(v,x+"enter",p,n,u),y.target=S,y.relatedTarget=b,_=y),b=_,f&&p)t:{for(y=f,v=p,x=0,S=y;S;S=Lu(S))x++;for(S=0,_=v;_;_=Lu(_))S++;for(;0<x-S;)y=Lu(y),x--;for(;0<S-x;)v=Lu(v),S--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=Lu(y),v=Lu(v)}y=null}else y=null;f!==null&&tA(d,h,f,y,!1),p!==null&&b!==null&&tA(d,b,p,y,!0)}}e:{if(h=c?td(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var A=tB;else if(K_(h))if(PM)A=sB;else{A=rB;var T=nB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=iB);if(A&&(A=A(t,c))){EM(d,A,n,u);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&v2(h,"number",h.value)}switch(T=c?td(c):window,t){case"focusin":(K_(T)||T.contentEditable==="true")&&(Zu=T,P2=c,Lf=null);break;case"focusout":Lf=P2=Zu=null;break;case"mousedown":M2=!0;break;case"contextmenu":case"mouseup":case"dragend":M2=!1,Q_(d,n,u);break;case"selectionchange":if(lB)break;case"keydown":case"keyup":Q_(d,n,u)}var P;if(CS)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Qu?NM(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(AM&&n.locale!=="ko"&&(Qu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Qu&&(P=_M()):(Ja=u,wS="value"in Ja?Ja.value:Ja.textContent,Qu=!0)),T=sy(c,E),0<T.length&&(E=new U_(E,t,null,n,u),d.push({event:E,listeners:T}),P?E.data=P:(P=TM(n),P!==null&&(E.data=P)))),(P=XF?JF(t,n):QF(t,n))&&(c=sy(c,"onBeforeInput"),0<c.length&&(u=new U_("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}zM(d,e)})}function hp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sp(t,n),s!=null&&r.unshift(hp(t,s,i)),s=sp(t,e),s!=null&&r.push(hp(t,s,i))),t=t.return}return r}function Lu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tA(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=sp(n,s),l!=null&&o.unshift(hp(n,l,a))):i||(l=sp(n,s),l!=null&&o.push(hp(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hB=/\r\n?/g,fB=/\u0000|\uFFFD/g;function nA(t){return(typeof t=="string"?t:""+t).replace(hB,`
`).replace(fB,"")}function vg(t,e,n){if(e=nA(e),nA(t)!==e&&n)throw Error(Le(425))}function oy(){}var j2=null,L2=null;function O2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I2=typeof setTimeout=="function"?setTimeout:void 0,pB=typeof clearTimeout=="function"?clearTimeout:void 0,rA=typeof Promise=="function"?Promise:void 0,mB=typeof queueMicrotask=="function"?queueMicrotask:typeof rA<"u"?function(t){return rA.resolve(null).then(t).catch(gB)}:I2;function gB(t){setTimeout(function(){throw t})}function Eb(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lp(e)}function dl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oh=Math.random().toString(36).slice(2),po="__reactFiber$"+oh,fp="__reactProps$"+oh,la="__reactContainer$"+oh,R2="__reactEvents$"+oh,yB="__reactListeners$"+oh,vB="__reactHandles$"+oh;function vc(t){var e=t[po];if(e)return e;for(var n=t.parentNode;n;){if(e=n[la]||n[po]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iA(t);t!==null;){if(n=t[po])return n;t=iA(t)}return e}t=n,n=t.parentNode}return null}function em(t){return t=t[po]||t[la],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function td(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Le(33))}function fv(t){return t[fp]||null}var D2=[],nd=-1;function Ol(t){return{current:t}}function on(t){0>nd||(t.current=D2[nd],D2[nd]=null,nd--)}function en(t,e){nd++,D2[nd]=t.current,t.current=e}var kl={},Wr=Ol(kl),ki=Ol(!1),zc=kl;function Rd(t,e){var n=t.type.contextTypes;if(!n)return kl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ci(t){return t=t.childContextTypes,t!=null}function ay(){on(ki),on(Wr)}function sA(t,e,n){if(Wr.current!==kl)throw Error(Le(168));en(Wr,e),en(ki,n)}function VM(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Le(108,nF(t)||"Unknown",i));return bn({},n,r)}function ly(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kl,zc=Wr.current,en(Wr,t),en(ki,ki.current),!0}function oA(t,e,n){var r=t.stateNode;if(!r)throw Error(Le(169));n?(t=VM(t,e,zc),r.__reactInternalMemoizedMergedChildContext=t,on(ki),on(Wr),en(Wr,t)):on(ki),en(ki,n)}var Yo=null,pv=!1,Pb=!1;function UM(t){Yo===null?Yo=[t]:Yo.push(t)}function bB(t){pv=!0,UM(t)}function Il(){if(!Pb&&Yo!==null){Pb=!0;var t=0,e=Vt;try{var n=Yo;for(Vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yo=null,pv=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(t+1)),pM(yS,Il),i}finally{Vt=e,Pb=!1}}return null}var rd=[],id=0,cy=null,uy=0,ps=[],ms=0,$c=null,Jo=1,Qo="";function sc(t,e){rd[id++]=uy,rd[id++]=cy,cy=t,uy=e}function qM(t,e,n){ps[ms++]=Jo,ps[ms++]=Qo,ps[ms++]=$c,$c=t;var r=Jo;t=Qo;var i=32-Ks(r)-1;r&=~(1<<i),n+=1;var s=32-Ks(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jo=1<<32-Ks(e)+i|n<<i|r,Qo=s+t}else Jo=1<<s|n<<i|r,Qo=t}function AS(t){t.return!==null&&(sc(t,1),qM(t,1,0))}function NS(t){for(;t===cy;)cy=rd[--id],rd[id]=null,uy=rd[--id],rd[id]=null;for(;t===$c;)$c=ps[--ms],ps[ms]=null,Qo=ps[--ms],ps[ms]=null,Jo=ps[--ms],ps[ms]=null}var Hi=null,qi=null,fn=!1,qs=null;function WM(t,e){var n=vs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function aA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hi=t,qi=dl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hi=t,qi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$c!==null?{id:Jo,overflow:Qo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hi=t,qi=null,!0):!1;default:return!1}}function F2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function B2(t){if(fn){var e=qi;if(e){var n=e;if(!aA(t,e)){if(F2(t))throw Error(Le(418));e=dl(n.nextSibling);var r=Hi;e&&aA(t,e)?WM(r,n):(t.flags=t.flags&-4097|2,fn=!1,Hi=t)}}else{if(F2(t))throw Error(Le(418));t.flags=t.flags&-4097|2,fn=!1,Hi=t}}}function lA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hi=t}function bg(t){if(t!==Hi)return!1;if(!fn)return lA(t),fn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!O2(t.type,t.memoizedProps)),e&&(e=qi)){if(F2(t))throw HM(),Error(Le(418));for(;e;)WM(t,e),e=dl(e.nextSibling)}if(lA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qi=dl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qi=null}}else qi=Hi?dl(t.stateNode.nextSibling):null;return!0}function HM(){for(var t=qi;t;)t=dl(t.nextSibling)}function Dd(){qi=Hi=null,fn=!1}function TS(t){qs===null?qs=[t]:qs.push(t)}var xB=ha.ReactCurrentBatchConfig;function Jh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,t))}return t}function xg(t,e){throw t=Object.prototype.toString.call(e),Error(Le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cA(t){var e=t._init;return e(t._payload)}function KM(t){function e(v,x){if(t){var S=v.deletions;S===null?(v.deletions=[x],v.flags|=16):S.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=ml(v,x),v.index=0,v.sibling=null,v}function s(v,x,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<x?(v.flags|=2,x):S):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,S,_){return x===null||x.tag!==6?(x=Db(S,v.mode,_),x.return=v,x):(x=i(x,S),x.return=v,x)}function l(v,x,S,_){var A=S.type;return A===Ju?u(v,x,S.props.children,_,S.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===$a&&cA(A)===x.type)?(_=i(x,S.props),_.ref=Jh(v,x,S),_.return=v,_):(_=E0(S.type,S.key,S.props,null,v.mode,_),_.ref=Jh(v,x,S),_.return=v,_)}function c(v,x,S,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Fb(S,v.mode,_),x.return=v,x):(x=i(x,S.children||[]),x.return=v,x)}function u(v,x,S,_,A){return x===null||x.tag!==7?(x=Nc(S,v.mode,_,A),x.return=v,x):(x=i(x,S),x.return=v,x)}function d(v,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Db(""+x,v.mode,S),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cg:return S=E0(x.type,x.key,x.props,null,v.mode,S),S.ref=Jh(v,null,x),S.return=v,S;case Xu:return x=Fb(x,v.mode,S),x.return=v,x;case $a:var _=x._init;return d(v,_(x._payload),S)}if(mf(x)||Hh(x))return x=Nc(x,v.mode,S,null),x.return=v,x;xg(v,x)}return null}function h(v,x,S,_){var A=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return A!==null?null:a(v,x,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cg:return S.key===A?l(v,x,S,_):null;case Xu:return S.key===A?c(v,x,S,_):null;case $a:return A=S._init,h(v,x,A(S._payload),_)}if(mf(S)||Hh(S))return A!==null?null:u(v,x,S,_,null);xg(v,S)}return null}function f(v,x,S,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(S)||null,a(x,v,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case cg:return v=v.get(_.key===null?S:_.key)||null,l(x,v,_,A);case Xu:return v=v.get(_.key===null?S:_.key)||null,c(x,v,_,A);case $a:var T=_._init;return f(v,x,S,T(_._payload),A)}if(mf(_)||Hh(_))return v=v.get(S)||null,u(x,v,_,A,null);xg(x,_)}return null}function p(v,x,S,_){for(var A=null,T=null,P=x,E=x=0,z=null;P!==null&&E<S.length;E++){P.index>E?(z=P,P=null):z=P.sibling;var H=h(v,P,S[E],_);if(H===null){P===null&&(P=z);break}t&&P&&H.alternate===null&&e(v,P),x=s(H,x,E),T===null?A=H:T.sibling=H,T=H,P=z}if(E===S.length)return n(v,P),fn&&sc(v,E),A;if(P===null){for(;E<S.length;E++)P=d(v,S[E],_),P!==null&&(x=s(P,x,E),T===null?A=P:T.sibling=P,T=P);return fn&&sc(v,E),A}for(P=r(v,P);E<S.length;E++)z=f(P,v,E,S[E],_),z!==null&&(t&&z.alternate!==null&&P.delete(z.key===null?E:z.key),x=s(z,x,E),T===null?A=z:T.sibling=z,T=z);return t&&P.forEach(function(j){return e(v,j)}),fn&&sc(v,E),A}function y(v,x,S,_){var A=Hh(S);if(typeof A!="function")throw Error(Le(150));if(S=A.call(S),S==null)throw Error(Le(151));for(var T=A=null,P=x,E=x=0,z=null,H=S.next();P!==null&&!H.done;E++,H=S.next()){P.index>E?(z=P,P=null):z=P.sibling;var j=h(v,P,H.value,_);if(j===null){P===null&&(P=z);break}t&&P&&j.alternate===null&&e(v,P),x=s(j,x,E),T===null?A=j:T.sibling=j,T=j,P=z}if(H.done)return n(v,P),fn&&sc(v,E),A;if(P===null){for(;!H.done;E++,H=S.next())H=d(v,H.value,_),H!==null&&(x=s(H,x,E),T===null?A=H:T.sibling=H,T=H);return fn&&sc(v,E),A}for(P=r(v,P);!H.done;E++,H=S.next())H=f(P,v,E,H.value,_),H!==null&&(t&&H.alternate!==null&&P.delete(H.key===null?E:H.key),x=s(H,x,E),T===null?A=H:T.sibling=H,T=H);return t&&P.forEach(function(I){return e(v,I)}),fn&&sc(v,E),A}function b(v,x,S,_){if(typeof S=="object"&&S!==null&&S.type===Ju&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case cg:e:{for(var A=S.key,T=x;T!==null;){if(T.key===A){if(A=S.type,A===Ju){if(T.tag===7){n(v,T.sibling),x=i(T,S.props.children),x.return=v,v=x;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===$a&&cA(A)===T.type){n(v,T.sibling),x=i(T,S.props),x.ref=Jh(v,T,S),x.return=v,v=x;break e}n(v,T);break}else e(v,T);T=T.sibling}S.type===Ju?(x=Nc(S.props.children,v.mode,_,S.key),x.return=v,v=x):(_=E0(S.type,S.key,S.props,null,v.mode,_),_.ref=Jh(v,x,S),_.return=v,v=_)}return o(v);case Xu:e:{for(T=S.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(v,x.sibling),x=i(x,S.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Fb(S,v.mode,_),x.return=v,v=x}return o(v);case $a:return T=S._init,b(v,x,T(S._payload),_)}if(mf(S))return p(v,x,S,_);if(Hh(S))return y(v,x,S,_);xg(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,S),x.return=v,v=x):(n(v,x),x=Db(S,v.mode,_),x.return=v,v=x),o(v)):n(v,x)}return b}var Fd=KM(!0),GM=KM(!1),dy=Ol(null),hy=null,sd=null,ES=null;function PS(){ES=sd=hy=null}function MS(t){var e=dy.current;on(dy),t._currentValue=e}function z2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function kd(t,e){hy=t,ES=sd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Si=!0),t.firstContext=null)}function Cs(t){var e=t._currentValue;if(ES!==t)if(t={context:t,memoizedValue:e,next:null},sd===null){if(hy===null)throw Error(Le(308));sd=t,hy.dependencies={lanes:0,firstContext:t}}else sd=sd.next=t;return e}var bc=null;function jS(t){bc===null?bc=[t]:bc.push(t)}function YM(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jS(e)):(n.next=i.next,i.next=n),e.interleaved=n,ca(t,r)}function ca(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Va=!1;function LS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XM(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ca(t,n)}return i=r.interleaved,i===null?(e.next=e,jS(r)):(e.next=i.next,i.next=e),r.interleaved=e,ca(t,n)}function k0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vS(t,n)}}function uA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fy(t,e,n,r){var i=t.updateQueue;Va=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(h=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=bn({},d,h);break e;case 2:Va=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Uc|=o,t.lanes=o,t.memoizedState=d}}function dA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Le(191,i));i.call(r)}}}var tm={},vo=Ol(tm),pp=Ol(tm),mp=Ol(tm);function xc(t){if(t===tm)throw Error(Le(174));return t}function OS(t,e){switch(en(mp,e),en(pp,t),en(vo,tm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:x2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=x2(e,t)}on(vo),en(vo,e)}function Bd(){on(vo),on(pp),on(mp)}function JM(t){xc(mp.current);var e=xc(vo.current),n=x2(e,t.type);e!==n&&(en(pp,t),en(vo,n))}function IS(t){pp.current===t&&(on(vo),on(pp))}var gn=Ol(0);function py(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mb=[];function RS(){for(var t=0;t<Mb.length;t++)Mb[t]._workInProgressVersionPrimary=null;Mb.length=0}var C0=ha.ReactCurrentDispatcher,jb=ha.ReactCurrentBatchConfig,Vc=0,vn=null,Zn=null,lr=null,my=!1,Of=!1,gp=0,wB=0;function Mr(){throw Error(Le(321))}function DS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Js(t[n],e[n]))return!1;return!0}function FS(t,e,n,r,i,s){if(Vc=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,C0.current=t===null||t.memoizedState===null?_B:AB,t=n(r,i),Of){s=0;do{if(Of=!1,gp=0,25<=s)throw Error(Le(301));s+=1,lr=Zn=null,e.updateQueue=null,C0.current=NB,t=n(r,i)}while(Of)}if(C0.current=gy,e=Zn!==null&&Zn.next!==null,Vc=0,lr=Zn=vn=null,my=!1,e)throw Error(Le(300));return t}function BS(){var t=gp!==0;return gp=0,t}function co(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?vn.memoizedState=lr=t:lr=lr.next=t,lr}function _s(){if(Zn===null){var t=vn.alternate;t=t!==null?t.memoizedState:null}else t=Zn.next;var e=lr===null?vn.memoizedState:lr.next;if(e!==null)lr=e,Zn=t;else{if(t===null)throw Error(Le(310));Zn=t,t={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},lr===null?vn.memoizedState=lr=t:lr=lr.next=t}return lr}function yp(t,e){return typeof e=="function"?e(t):e}function Lb(t){var e=_s(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=Zn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Vc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,vn.lanes|=u,Uc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Js(r,e.memoizedState)||(Si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,vn.lanes|=s,Uc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ob(t){var e=_s(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Js(s,e.memoizedState)||(Si=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function QM(){}function ZM(t,e){var n=vn,r=_s(),i=e(),s=!Js(r.memoizedState,i);if(s&&(r.memoizedState=i,Si=!0),r=r.queue,zS(nj.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||lr!==null&&lr.memoizedState.tag&1){if(n.flags|=2048,vp(9,tj.bind(null,n,r,i,e),void 0,null),hr===null)throw Error(Le(349));Vc&30||ej(n,e,i)}return i}function ej(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tj(t,e,n,r){e.value=n,e.getSnapshot=r,rj(e)&&ij(t)}function nj(t,e,n){return n(function(){rj(e)&&ij(t)})}function rj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Js(t,n)}catch{return!0}}function ij(t){var e=ca(t,1);e!==null&&Gs(e,t,1,-1)}function hA(t){var e=co();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:t},e.queue=t,t=t.dispatch=CB.bind(null,vn,t),[e.memoizedState,t]}function vp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sj(){return _s().memoizedState}function _0(t,e,n,r){var i=co();vn.flags|=t,i.memoizedState=vp(1|e,n,void 0,r===void 0?null:r)}function mv(t,e,n,r){var i=_s();r=r===void 0?null:r;var s=void 0;if(Zn!==null){var o=Zn.memoizedState;if(s=o.destroy,r!==null&&DS(r,o.deps)){i.memoizedState=vp(e,n,s,r);return}}vn.flags|=t,i.memoizedState=vp(1|e,n,s,r)}function fA(t,e){return _0(8390656,8,t,e)}function zS(t,e){return mv(2048,8,t,e)}function oj(t,e){return mv(4,2,t,e)}function aj(t,e){return mv(4,4,t,e)}function lj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cj(t,e,n){return n=n!=null?n.concat([t]):null,mv(4,4,lj.bind(null,e,t),n)}function $S(){}function uj(t,e){var n=_s();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dj(t,e){var n=_s();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hj(t,e,n){return Vc&21?(Js(n,e)||(n=yM(),vn.lanes|=n,Uc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Si=!0),t.memoizedState=n)}function SB(t,e){var n=Vt;Vt=n!==0&&4>n?n:4,t(!0);var r=jb.transition;jb.transition={};try{t(!1),e()}finally{Vt=n,jb.transition=r}}function fj(){return _s().memoizedState}function kB(t,e,n){var r=pl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pj(t))mj(e,n);else if(n=YM(t,e,n,r),n!==null){var i=ni();Gs(n,t,r,i),gj(n,e,r)}}function CB(t,e,n){var r=pl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pj(t))mj(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Js(a,o)){var l=e.interleaved;l===null?(i.next=i,jS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YM(t,e,i,r),n!==null&&(i=ni(),Gs(n,t,r,i),gj(n,e,r))}}function pj(t){var e=t.alternate;return t===vn||e!==null&&e===vn}function mj(t,e){Of=my=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vS(t,n)}}var gy={readContext:Cs,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},_B={readContext:Cs,useCallback:function(t,e){return co().memoizedState=[t,e===void 0?null:e],t},useContext:Cs,useEffect:fA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_0(4194308,4,lj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _0(4194308,4,t,e)},useInsertionEffect:function(t,e){return _0(4,2,t,e)},useMemo:function(t,e){var n=co();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=co();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kB.bind(null,vn,t),[r.memoizedState,t]},useRef:function(t){var e=co();return t={current:t},e.memoizedState=t},useState:hA,useDebugValue:$S,useDeferredValue:function(t){return co().memoizedState=t},useTransition:function(){var t=hA(!1),e=t[0];return t=SB.bind(null,t[1]),co().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vn,i=co();if(fn){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=e(),hr===null)throw Error(Le(349));Vc&30||ej(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fA(nj.bind(null,r,s,t),[t]),r.flags|=2048,vp(9,tj.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=co(),e=hr.identifierPrefix;if(fn){var n=Qo,r=Jo;n=(r&~(1<<32-Ks(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AB={readContext:Cs,useCallback:uj,useContext:Cs,useEffect:zS,useImperativeHandle:cj,useInsertionEffect:oj,useLayoutEffect:aj,useMemo:dj,useReducer:Lb,useRef:sj,useState:function(){return Lb(yp)},useDebugValue:$S,useDeferredValue:function(t){var e=_s();return hj(e,Zn.memoizedState,t)},useTransition:function(){var t=Lb(yp)[0],e=_s().memoizedState;return[t,e]},useMutableSource:QM,useSyncExternalStore:ZM,useId:fj,unstable_isNewReconciler:!1},NB={readContext:Cs,useCallback:uj,useContext:Cs,useEffect:zS,useImperativeHandle:cj,useInsertionEffect:oj,useLayoutEffect:aj,useMemo:dj,useReducer:Ob,useRef:sj,useState:function(){return Ob(yp)},useDebugValue:$S,useDeferredValue:function(t){var e=_s();return Zn===null?e.memoizedState=t:hj(e,Zn.memoizedState,t)},useTransition:function(){var t=Ob(yp)[0],e=_s().memoizedState;return[t,e]},useMutableSource:QM,useSyncExternalStore:ZM,useId:fj,unstable_isNewReconciler:!1};function Bs(t,e){if(t&&t.defaultProps){e=bn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gv={isMounted:function(t){return(t=t._reactInternals)?tu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ni(),i=pl(t),s=ra(r,i);s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Gs(e,t,i,r),k0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ni(),i=pl(t),s=ra(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hl(t,s,i),e!==null&&(Gs(e,t,i,r),k0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ni(),r=pl(t),i=ra(n,r);i.tag=2,e!=null&&(i.callback=e),e=hl(t,i,r),e!==null&&(Gs(e,t,r,n),k0(e,t,r))}};function pA(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!up(n,r)||!up(i,s):!0}function yj(t,e,n){var r=!1,i=kl,s=e.contextType;return typeof s=="object"&&s!==null?s=Cs(s):(i=Ci(e)?zc:Wr.current,r=e.contextTypes,s=(r=r!=null)?Rd(t,i):kl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gv.enqueueReplaceState(e,e.state,null)}function V2(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},LS(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cs(s):(s=Ci(e)?zc:Wr.current,i.context=Rd(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($2(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gv.enqueueReplaceState(i,i.state,null),fy(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zd(t,e){try{var n="",r=e;do n+=tF(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ib(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function U2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TB=typeof WeakMap=="function"?WeakMap:Map;function vj(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vy||(vy=!0,Z2=r),U2(t,e)},n}function bj(t,e,n){n=ra(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){U2(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){U2(t,e),typeof r!="function"&&(fl===null?fl=new Set([this]):fl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VB.bind(null,t,e,n),e.then(t,t))}function yA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vA(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,hl(n,e,1))),n.lanes|=1),t)}var EB=ha.ReactCurrentOwner,Si=!1;function ei(t,e,n,r){e.child=t===null?GM(e,null,n,r):Fd(e,t.child,n,r)}function bA(t,e,n,r,i){n=n.render;var s=e.ref;return kd(e,i),r=FS(t,e,n,r,s,i),n=BS(),t!==null&&!Si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ua(t,e,i)):(fn&&n&&AS(e),e.flags|=1,ei(t,e,r,i),e.child)}function xA(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!YS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,xj(t,e,s,r,i)):(t=E0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:up,n(o,r)&&t.ref===e.ref)return ua(t,e,i)}return e.flags|=1,t=ml(s,r),t.ref=e.ref,t.return=e,e.child=t}function xj(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(up(s,r)&&t.ref===e.ref)if(Si=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Si=!0);else return e.lanes=t.lanes,ua(t,e,i)}return q2(t,e,n,r,i)}function wj(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(ad,zi),zi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,en(ad,zi),zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,en(ad,zi),zi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,en(ad,zi),zi|=r;return ei(t,e,i,n),e.child}function Sj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function q2(t,e,n,r,i){var s=Ci(n)?zc:Wr.current;return s=Rd(e,s),kd(e,i),n=FS(t,e,n,r,s,i),r=BS(),t!==null&&!Si?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ua(t,e,i)):(fn&&r&&AS(e),e.flags|=1,ei(t,e,n,i),e.child)}function wA(t,e,n,r,i){if(Ci(n)){var s=!0;ly(e)}else s=!1;if(kd(e,i),e.stateNode===null)A0(t,e),yj(e,n,r),V2(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Cs(c):(c=Ci(n)?zc:Wr.current,c=Rd(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&mA(e,o,r,c),Va=!1;var h=e.memoizedState;o.state=h,fy(e,r,o,i),l=e.memoizedState,a!==r||h!==l||ki.current||Va?(typeof u=="function"&&($2(e,n,u,r),l=e.memoizedState),(a=Va||pA(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XM(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Bs(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cs(l):(l=Ci(n)?zc:Wr.current,l=Rd(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&mA(e,o,r,l),Va=!1,h=e.memoizedState,o.state=h,fy(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||ki.current||Va?(typeof f=="function"&&($2(e,n,f,r),p=e.memoizedState),(c=Va||pA(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return W2(t,e,n,r,s,i)}function W2(t,e,n,r,i,s){Sj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&oA(e,n,!1),ua(t,e,s);r=e.stateNode,EB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fd(e,t.child,null,s),e.child=Fd(e,null,a,s)):ei(t,e,a,s),e.memoizedState=r.state,i&&oA(e,n,!0),e.child}function kj(t){var e=t.stateNode;e.pendingContext?sA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sA(t,e.context,!1),OS(t,e.containerInfo)}function SA(t,e,n,r,i){return Dd(),TS(i),e.flags|=256,ei(t,e,n,r),e.child}var H2={dehydrated:null,treeContext:null,retryLane:0};function K2(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cj(t,e,n){var r=e.pendingProps,i=gn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),en(gn,i&1),t===null)return B2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bv(o,r,0,null),t=Nc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=K2(n),e.memoizedState=H2,t):VS(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ml(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ml(a,s):(s=Nc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?K2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=H2,r}return s=t.child,t=s.sibling,r=ml(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function VS(t,e){return e=bv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wg(t,e,n,r){return r!==null&&TS(r),Fd(e,t.child,null,n),t=VS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ib(Error(Le(422))),wg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bv({mode:"visible",children:r.children},i,0,null),s=Nc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fd(e,t.child,null,o),e.child.memoizedState=K2(o),e.memoizedState=H2,s);if(!(e.mode&1))return wg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Le(419)),r=Ib(s,r,void 0),wg(t,e,o,r)}if(a=(o&t.childLanes)!==0,Si||a){if(r=hr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ca(t,i),Gs(r,t,i,-1))}return GS(),r=Ib(Error(Le(421))),wg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qi=dl(i.nextSibling),Hi=e,fn=!0,qs=null,t!==null&&(ps[ms++]=Jo,ps[ms++]=Qo,ps[ms++]=$c,Jo=t.id,Qo=t.overflow,$c=e),e=VS(e,r.children),e.flags|=4096,e)}function kA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),z2(t.return,e,n)}function Rb(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _j(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ei(t,e,r.children,n),r=gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kA(t,n,e);else if(t.tag===19)kA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(en(gn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&py(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rb(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&py(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rb(e,!0,n,null,s);break;case"together":Rb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function A0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ua(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Uc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Le(153));if(e.child!==null){for(t=e.child,n=ml(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ml(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MB(t,e,n){switch(e.tag){case 3:kj(e),Dd();break;case 5:JM(e);break;case 1:Ci(e.type)&&ly(e);break;case 4:OS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;en(dy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(en(gn,gn.current&1),e.flags|=128,null):n&e.child.childLanes?Cj(t,e,n):(en(gn,gn.current&1),t=ua(t,e,n),t!==null?t.sibling:null);en(gn,gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _j(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),en(gn,gn.current),r)break;return null;case 22:case 23:return e.lanes=0,wj(t,e,n)}return ua(t,e,n)}var Aj,G2,Nj,Tj;Aj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};G2=function(){};Nj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xc(vo.current);var s=null;switch(n){case"input":i=g2(t,i),r=g2(t,r),s=[];break;case"select":i=bn({},i,{value:void 0}),r=bn({},r,{value:void 0}),s=[];break;case"textarea":i=b2(t,i),r=b2(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oy)}w2(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Tj=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qh(t,e){if(!fn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jB(t,e,n){var r=e.pendingProps;switch(NS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(e),null;case 1:return Ci(e.type)&&ay(),jr(e),null;case 3:return r=e.stateNode,Bd(),on(ki),on(Wr),RS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qs!==null&&(nw(qs),qs=null))),G2(t,e),jr(e),null;case 5:IS(e);var i=xc(mp.current);if(n=e.type,t!==null&&e.stateNode!=null)Nj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Le(166));return jr(e),null}if(t=xc(vo.current),bg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[po]=e,r[fp]=s,t=(e.mode&1)!==0,n){case"dialog":nn("cancel",r),nn("close",r);break;case"iframe":case"object":case"embed":nn("load",r);break;case"video":case"audio":for(i=0;i<yf.length;i++)nn(yf[i],r);break;case"source":nn("error",r);break;case"img":case"image":case"link":nn("error",r),nn("load",r);break;case"details":nn("toggle",r);break;case"input":j_(r,s),nn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},nn("invalid",r);break;case"textarea":O_(r,s),nn("invalid",r)}w2(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,a,t),i=["children",""+a]):rp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nn("scroll",r)}switch(n){case"input":ug(r),L_(r,s,!0);break;case"textarea":ug(r),I_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=oy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nM(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[po]=e,t[fp]=r,Aj(t,e,!1,!1),e.stateNode=t;e:{switch(o=S2(n,r),n){case"dialog":nn("cancel",t),nn("close",t),i=r;break;case"iframe":case"object":case"embed":nn("load",t),i=r;break;case"video":case"audio":for(i=0;i<yf.length;i++)nn(yf[i],t);i=r;break;case"source":nn("error",t),i=r;break;case"img":case"image":case"link":nn("error",t),nn("load",t),i=r;break;case"details":nn("toggle",t),i=r;break;case"input":j_(t,r),i=g2(t,r),nn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=bn({},r,{value:void 0}),nn("invalid",t);break;case"textarea":O_(t,r),i=b2(t,r),nn("invalid",t);break;default:i=r}w2(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?sM(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rM(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ip(t,l):typeof l=="number"&&ip(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nn("scroll",t):l!=null&&hS(t,s,l,o))}switch(n){case"input":ug(t),L_(t,r,!1);break;case"textarea":ug(t),I_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?bd(t,!!r.multiple,s,!1):r.defaultValue!=null&&bd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=oy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jr(e),null;case 6:if(t&&e.stateNode!=null)Tj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Le(166));if(n=xc(mp.current),xc(vo.current),bg(e)){if(r=e.stateNode,n=e.memoizedProps,r[po]=e,(s=r.nodeValue!==n)&&(t=Hi,t!==null))switch(t.tag){case 3:vg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[po]=e,e.stateNode=r}return jr(e),null;case 13:if(on(gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fn&&qi!==null&&e.mode&1&&!(e.flags&128))HM(),Dd(),e.flags|=98560,s=!1;else if(s=bg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[po]=e}else Dd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jr(e),s=!1}else qs!==null&&(nw(qs),qs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gn.current&1?er===0&&(er=3):GS())),e.updateQueue!==null&&(e.flags|=4),jr(e),null);case 4:return Bd(),G2(t,e),t===null&&dp(e.stateNode.containerInfo),jr(e),null;case 10:return MS(e.type._context),jr(e),null;case 17:return Ci(e.type)&&ay(),jr(e),null;case 19:if(on(gn),s=e.memoizedState,s===null)return jr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Qh(s,!1);else{if(er!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=py(t),o!==null){for(e.flags|=128,Qh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return en(gn,gn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Dn()>$d&&(e.flags|=128,r=!0,Qh(s,!1),e.lanes=4194304)}else{if(!r)if(t=py(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!fn)return jr(e),null}else 2*Dn()-s.renderingStartTime>$d&&n!==1073741824&&(e.flags|=128,r=!0,Qh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Dn(),e.sibling=null,n=gn.current,en(gn,r?n&1|2:n&1),e):(jr(e),null);case 22:case 23:return KS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zi&1073741824&&(jr(e),e.subtreeFlags&6&&(e.flags|=8192)):jr(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function LB(t,e){switch(NS(e),e.tag){case 1:return Ci(e.type)&&ay(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bd(),on(ki),on(Wr),RS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return IS(e),null;case 13:if(on(gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));Dd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return on(gn),null;case 4:return Bd(),null;case 10:return MS(e.type._context),null;case 22:case 23:return KS(),null;case 24:return null;default:return null}}var Sg=!1,zr=!1,OB=typeof WeakSet=="function"?WeakSet:Set,qe=null;function od(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nn(t,e,r)}else n.current=null}function Y2(t,e,n){try{n()}catch(r){Nn(t,e,r)}}var CA=!1;function IB(t,e){if(j2=ry,t=LM(),_S(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(L2={focusedElem:t,selectionRange:n},ry=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,b=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Bs(e.type,y),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(_){Nn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return p=CA,CA=!1,p}function If(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Y2(e,n,s)}i=i.next}while(i!==r)}}function yv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function X2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ej(t){var e=t.alternate;e!==null&&(t.alternate=null,Ej(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[po],delete e[fp],delete e[R2],delete e[yB],delete e[vB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pj(t){return t.tag===5||t.tag===3||t.tag===4}function _A(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function J2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oy));else if(r!==4&&(t=t.child,t!==null))for(J2(t,e,n),t=t.sibling;t!==null;)J2(t,e,n),t=t.sibling}function Q2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Q2(t,e,n),t=t.sibling;t!==null;)Q2(t,e,n),t=t.sibling}var br=null,$s=!1;function La(t,e,n){for(n=n.child;n!==null;)Mj(t,e,n),n=n.sibling}function Mj(t,e,n){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(cv,n)}catch{}switch(n.tag){case 5:zr||od(n,e);case 6:var r=br,i=$s;br=null,La(t,e,n),br=r,$s=i,br!==null&&($s?(t=br,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):br.removeChild(n.stateNode));break;case 18:br!==null&&($s?(t=br,n=n.stateNode,t.nodeType===8?Eb(t.parentNode,n):t.nodeType===1&&Eb(t,n),lp(t)):Eb(br,n.stateNode));break;case 4:r=br,i=$s,br=n.stateNode.containerInfo,$s=!0,La(t,e,n),br=r,$s=i;break;case 0:case 11:case 14:case 15:if(!zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Y2(n,e,o),i=i.next}while(i!==r)}La(t,e,n);break;case 1:if(!zr&&(od(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nn(n,e,a)}La(t,e,n);break;case 21:La(t,e,n);break;case 22:n.mode&1?(zr=(r=zr)||n.memoizedState!==null,La(t,e,n),zr=r):La(t,e,n);break;default:La(t,e,n)}}function AA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OB),e.forEach(function(r){var i=qB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Os(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:br=a.stateNode,$s=!1;break e;case 3:br=a.stateNode.containerInfo,$s=!0;break e;case 4:br=a.stateNode.containerInfo,$s=!0;break e}a=a.return}if(br===null)throw Error(Le(160));Mj(s,o,i),br=null,$s=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Nn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jj(e,t),e=e.sibling}function jj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Os(e,t),oo(t),r&4){try{If(3,t,t.return),yv(3,t)}catch(y){Nn(t,t.return,y)}try{If(5,t,t.return)}catch(y){Nn(t,t.return,y)}}break;case 1:Os(e,t),oo(t),r&512&&n!==null&&od(n,n.return);break;case 5:if(Os(e,t),oo(t),r&512&&n!==null&&od(n,n.return),t.flags&32){var i=t.stateNode;try{ip(i,"")}catch(y){Nn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&eM(i,s),S2(a,o);var c=S2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?sM(i,d):u==="dangerouslySetInnerHTML"?rM(i,d):u==="children"?ip(i,d):hS(i,u,d,c)}switch(a){case"input":y2(i,s);break;case"textarea":tM(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?bd(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?bd(i,!!s.multiple,s.defaultValue,!0):bd(i,!!s.multiple,s.multiple?[]:"",!1))}i[fp]=s}catch(y){Nn(t,t.return,y)}}break;case 6:if(Os(e,t),oo(t),r&4){if(t.stateNode===null)throw Error(Le(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Nn(t,t.return,y)}}break;case 3:if(Os(e,t),oo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lp(e.containerInfo)}catch(y){Nn(t,t.return,y)}break;case 4:Os(e,t),oo(t);break;case 13:Os(e,t),oo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(WS=Dn())),r&4&&AA(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(zr=(c=zr)||u,Os(e,t),zr=c):Os(e,t),oo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(qe=t,u=t.child;u!==null;){for(d=qe=u;qe!==null;){switch(h=qe,f=h.child,h.tag){case 0:case 11:case 14:case 15:If(4,h,h.return);break;case 1:od(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Nn(r,n,y)}}break;case 5:od(h,h.return);break;case 22:if(h.memoizedState!==null){TA(d);continue}}f!==null?(f.return=h,qe=f):TA(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iM("display",o))}catch(y){Nn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Nn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Os(e,t),oo(t),r&4&&AA(t);break;case 21:break;default:Os(e,t),oo(t)}}function oo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Pj(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ip(i,""),r.flags&=-33);var s=_A(t);Q2(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_A(t);J2(t,a,o);break;default:throw Error(Le(161))}}catch(l){Nn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RB(t,e,n){qe=t,Lj(t)}function Lj(t,e,n){for(var r=(t.mode&1)!==0;qe!==null;){var i=qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zr;a=Sg;var c=zr;if(Sg=o,(zr=l)&&!c)for(qe=i;qe!==null;)o=qe,l=o.child,o.tag===22&&o.memoizedState!==null?EA(i):l!==null?(l.return=o,qe=l):EA(i);for(;s!==null;)qe=s,Lj(s),s=s.sibling;qe=i,Sg=a,zr=c}NA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,qe=s):NA(t)}}function NA(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||yv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dA(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dA(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&lp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}zr||e.flags&512&&X2(e)}catch(h){Nn(e,e.return,h)}}if(e===t){qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}}function TA(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qe=n;break}qe=e.return}}function EA(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yv(4,e)}catch(l){Nn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Nn(e,i,l)}}var s=e.return;try{X2(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{X2(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===t){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var DB=Math.ceil,yy=ha.ReactCurrentDispatcher,US=ha.ReactCurrentOwner,xs=ha.ReactCurrentBatchConfig,Lt=0,hr=null,Yn=null,Cr=0,zi=0,ad=Ol(0),er=0,bp=null,Uc=0,vv=0,qS=0,Rf=null,bi=null,WS=0,$d=1/0,Ho=null,vy=!1,Z2=null,fl=null,kg=!1,Qa=null,by=0,Df=0,ew=null,N0=-1,T0=0;function ni(){return Lt&6?Dn():N0!==-1?N0:N0=Dn()}function pl(t){return t.mode&1?Lt&2&&Cr!==0?Cr&-Cr:xB.transition!==null?(T0===0&&(T0=yM()),T0):(t=Vt,t!==0||(t=window.event,t=t===void 0?16:CM(t.type)),t):1}function Gs(t,e,n,r){if(50<Df)throw Df=0,ew=null,Error(Le(185));Qp(t,n,r),(!(Lt&2)||t!==hr)&&(t===hr&&(!(Lt&2)&&(vv|=n),er===4&&Ka(t,Cr)),_i(t,r),n===1&&Lt===0&&!(e.mode&1)&&($d=Dn()+500,pv&&Il()))}function _i(t,e){var n=t.callbackNode;xF(t,e);var r=ny(t,t===hr?Cr:0);if(r===0)n!==null&&F_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&F_(n),e===1)t.tag===0?bB(PA.bind(null,t)):UM(PA.bind(null,t)),mB(function(){!(Lt&6)&&Il()}),n=null;else{switch(vM(r)){case 1:n=yS;break;case 4:n=mM;break;case 16:n=ty;break;case 536870912:n=gM;break;default:n=ty}n=$j(n,Oj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Oj(t,e){if(N0=-1,T0=0,Lt&6)throw Error(Le(327));var n=t.callbackNode;if(Cd()&&t.callbackNode!==n)return null;var r=ny(t,t===hr?Cr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xy(t,r);else{e=r;var i=Lt;Lt|=2;var s=Rj();(hr!==t||Cr!==e)&&(Ho=null,$d=Dn()+500,Ac(t,e));do try{zB();break}catch(a){Ij(t,a)}while(1);PS(),yy.current=s,Lt=i,Yn!==null?e=0:(hr=null,Cr=0,e=er)}if(e!==0){if(e===2&&(i=N2(t),i!==0&&(r=i,e=tw(t,i))),e===1)throw n=bp,Ac(t,0),Ka(t,r),_i(t,Dn()),n;if(e===6)Ka(t,r);else{if(i=t.current.alternate,!(r&30)&&!FB(i)&&(e=xy(t,r),e===2&&(s=N2(t),s!==0&&(r=s,e=tw(t,s))),e===1))throw n=bp,Ac(t,0),Ka(t,r),_i(t,Dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Le(345));case 2:oc(t,bi,Ho);break;case 3:if(Ka(t,r),(r&130023424)===r&&(e=WS+500-Dn(),10<e)){if(ny(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ni(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=I2(oc.bind(null,t,bi,Ho),e);break}oc(t,bi,Ho);break;case 4:if(Ka(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ks(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DB(r/1960))-r,10<r){t.timeoutHandle=I2(oc.bind(null,t,bi,Ho),r);break}oc(t,bi,Ho);break;case 5:oc(t,bi,Ho);break;default:throw Error(Le(329))}}}return _i(t,Dn()),t.callbackNode===n?Oj.bind(null,t):null}function tw(t,e){var n=Rf;return t.current.memoizedState.isDehydrated&&(Ac(t,e).flags|=256),t=xy(t,e),t!==2&&(e=bi,bi=n,e!==null&&nw(e)),t}function nw(t){bi===null?bi=t:bi.push.apply(bi,t)}function FB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ka(t,e){for(e&=~qS,e&=~vv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ks(e),r=1<<n;t[n]=-1,e&=~r}}function PA(t){if(Lt&6)throw Error(Le(327));Cd();var e=ny(t,0);if(!(e&1))return _i(t,Dn()),null;var n=xy(t,e);if(t.tag!==0&&n===2){var r=N2(t);r!==0&&(e=r,n=tw(t,r))}if(n===1)throw n=bp,Ac(t,0),Ka(t,e),_i(t,Dn()),n;if(n===6)throw Error(Le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oc(t,bi,Ho),_i(t,Dn()),null}function HS(t,e){var n=Lt;Lt|=1;try{return t(e)}finally{Lt=n,Lt===0&&($d=Dn()+500,pv&&Il())}}function qc(t){Qa!==null&&Qa.tag===0&&!(Lt&6)&&Cd();var e=Lt;Lt|=1;var n=xs.transition,r=Vt;try{if(xs.transition=null,Vt=1,t)return t()}finally{Vt=r,xs.transition=n,Lt=e,!(Lt&6)&&Il()}}function KS(){zi=ad.current,on(ad)}function Ac(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pB(n)),Yn!==null)for(n=Yn.return;n!==null;){var r=n;switch(NS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ay();break;case 3:Bd(),on(ki),on(Wr),RS();break;case 5:IS(r);break;case 4:Bd();break;case 13:on(gn);break;case 19:on(gn);break;case 10:MS(r.type._context);break;case 22:case 23:KS()}n=n.return}if(hr=t,Yn=t=ml(t.current,null),Cr=zi=e,er=0,bp=null,qS=vv=Uc=0,bi=Rf=null,bc!==null){for(e=0;e<bc.length;e++)if(n=bc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bc=null}return t}function Ij(t,e){do{var n=Yn;try{if(PS(),C0.current=gy,my){for(var r=vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}my=!1}if(Vc=0,lr=Zn=vn=null,Of=!1,gp=0,US.current=null,n===null||n.return===null){er=1,bp=e,Yn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Cr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=yA(o);if(f!==null){f.flags&=-257,vA(f,o,a,s,e),f.mode&1&&gA(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){gA(s,c,e),GS();break e}l=Error(Le(426))}}else if(fn&&a.mode&1){var b=yA(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),vA(b,o,a,s,e),TS(zd(l,a));break e}}s=l=zd(l,a),er!==4&&(er=2),Rf===null?Rf=[s]:Rf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=vj(s,l,e);uA(s,v);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(fl===null||!fl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=bj(s,a,e);uA(s,_);break e}}s=s.return}while(s!==null)}Fj(n)}catch(A){e=A,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(1)}function Rj(){var t=yy.current;return yy.current=gy,t===null?gy:t}function GS(){(er===0||er===3||er===2)&&(er=4),hr===null||!(Uc&268435455)&&!(vv&268435455)||Ka(hr,Cr)}function xy(t,e){var n=Lt;Lt|=2;var r=Rj();(hr!==t||Cr!==e)&&(Ho=null,Ac(t,e));do try{BB();break}catch(i){Ij(t,i)}while(1);if(PS(),Lt=n,yy.current=r,Yn!==null)throw Error(Le(261));return hr=null,Cr=0,er}function BB(){for(;Yn!==null;)Dj(Yn)}function zB(){for(;Yn!==null&&!dF();)Dj(Yn)}function Dj(t){var e=zj(t.alternate,t,zi);t.memoizedProps=t.pendingProps,e===null?Fj(t):Yn=e,US.current=null}function Fj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LB(n,e),n!==null){n.flags&=32767,Yn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{er=6,Yn=null;return}}else if(n=jB(n,e,zi),n!==null){Yn=n;return}if(e=e.sibling,e!==null){Yn=e;return}Yn=e=t}while(e!==null);er===0&&(er=5)}function oc(t,e,n){var r=Vt,i=xs.transition;try{xs.transition=null,Vt=1,$B(t,e,n,r)}finally{xs.transition=i,Vt=r}return null}function $B(t,e,n,r){do Cd();while(Qa!==null);if(Lt&6)throw Error(Le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wF(t,s),t===hr&&(Yn=hr=null,Cr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kg||(kg=!0,$j(ty,function(){return Cd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=xs.transition,xs.transition=null;var o=Vt;Vt=1;var a=Lt;Lt|=4,US.current=null,IB(t,n),jj(n,t),aB(L2),ry=!!j2,L2=j2=null,t.current=n,RB(n),hF(),Lt=a,Vt=o,xs.transition=s}else t.current=n;if(kg&&(kg=!1,Qa=t,by=i),s=t.pendingLanes,s===0&&(fl=null),mF(n.stateNode),_i(t,Dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vy)throw vy=!1,t=Z2,Z2=null,t;return by&1&&t.tag!==0&&Cd(),s=t.pendingLanes,s&1?t===ew?Df++:(Df=0,ew=t):Df=0,Il(),null}function Cd(){if(Qa!==null){var t=vM(by),e=xs.transition,n=Vt;try{if(xs.transition=null,Vt=16>t?16:t,Qa===null)var r=!1;else{if(t=Qa,Qa=null,by=0,Lt&6)throw Error(Le(331));var i=Lt;for(Lt|=4,qe=t.current;qe!==null;){var s=qe,o=s.child;if(qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(qe=c;qe!==null;){var u=qe;switch(u.tag){case 0:case 11:case 15:If(8,u,s)}var d=u.child;if(d!==null)d.return=u,qe=d;else for(;qe!==null;){u=qe;var h=u.sibling,f=u.return;if(Ej(u),u===c){qe=null;break}if(h!==null){h.return=f,qe=h;break}qe=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,qe=o;else e:for(;qe!==null;){if(s=qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:If(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,qe=v;break e}qe=s.return}}var x=t.current;for(qe=x;qe!==null;){o=qe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,qe=S;else e:for(o=x;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yv(9,a)}}catch(A){Nn(a,a.return,A)}if(a===o){qe=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,qe=_;break e}qe=a.return}}if(Lt=i,Il(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(cv,t)}catch{}r=!0}return r}finally{Vt=n,xs.transition=e}}return!1}function MA(t,e,n){e=zd(n,e),e=vj(t,e,1),t=hl(t,e,1),e=ni(),t!==null&&(Qp(t,1,e),_i(t,e))}function Nn(t,e,n){if(t.tag===3)MA(t,t,n);else for(;e!==null;){if(e.tag===3){MA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fl===null||!fl.has(r))){t=zd(n,t),t=bj(e,t,1),e=hl(e,t,1),t=ni(),e!==null&&(Qp(e,1,t),_i(e,t));break}}e=e.return}}function VB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ni(),t.pingedLanes|=t.suspendedLanes&n,hr===t&&(Cr&n)===n&&(er===4||er===3&&(Cr&130023424)===Cr&&500>Dn()-WS?Ac(t,0):qS|=n),_i(t,e)}function Bj(t,e){e===0&&(t.mode&1?(e=fg,fg<<=1,!(fg&130023424)&&(fg=4194304)):e=1);var n=ni();t=ca(t,e),t!==null&&(Qp(t,e,n),_i(t,n))}function UB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bj(t,n)}function qB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(e),Bj(t,n)}var zj;zj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ki.current)Si=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Si=!1,MB(t,e,n);Si=!!(t.flags&131072)}else Si=!1,fn&&e.flags&1048576&&qM(e,uy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;A0(t,e),t=e.pendingProps;var i=Rd(e,Wr.current);kd(e,n),i=FS(null,e,r,t,i,n);var s=BS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ci(r)?(s=!0,ly(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,LS(e),i.updater=gv,e.stateNode=i,i._reactInternals=e,V2(e,r,t,n),e=W2(null,e,r,!0,s,n)):(e.tag=0,fn&&s&&AS(e),ei(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(A0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HB(r),t=Bs(r,t),i){case 0:e=q2(null,e,r,t,n);break e;case 1:e=wA(null,e,r,t,n);break e;case 11:e=bA(null,e,r,t,n);break e;case 14:e=xA(null,e,r,Bs(r.type,t),n);break e}throw Error(Le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),q2(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),wA(t,e,r,i,n);case 3:e:{if(kj(e),t===null)throw Error(Le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XM(t,e),fy(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zd(Error(Le(423)),e),e=SA(t,e,r,n,i);break e}else if(r!==i){i=zd(Error(Le(424)),e),e=SA(t,e,r,n,i);break e}else for(qi=dl(e.stateNode.containerInfo.firstChild),Hi=e,fn=!0,qs=null,n=GM(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dd(),r===i){e=ua(t,e,n);break e}ei(t,e,r,n)}e=e.child}return e;case 5:return JM(e),t===null&&B2(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,O2(r,i)?o=null:s!==null&&O2(r,s)&&(e.flags|=32),Sj(t,e),ei(t,e,o,n),e.child;case 6:return t===null&&B2(e),null;case 13:return Cj(t,e,n);case 4:return OS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fd(e,null,r,n):ei(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),bA(t,e,r,i,n);case 7:return ei(t,e,e.pendingProps,n),e.child;case 8:return ei(t,e,e.pendingProps.children,n),e.child;case 12:return ei(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,en(dy,r._currentValue),r._currentValue=o,s!==null)if(Js(s.value,o)){if(s.children===i.children&&!ki.current){e=ua(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ra(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),z2(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),z2(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ei(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,kd(e,n),i=Cs(i),r=r(i),e.flags|=1,ei(t,e,r,n),e.child;case 14:return r=e.type,i=Bs(r,e.pendingProps),i=Bs(r.type,i),xA(t,e,r,i,n);case 15:return xj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bs(r,i),A0(t,e),e.tag=1,Ci(r)?(t=!0,ly(e)):t=!1,kd(e,n),yj(e,r,i),V2(e,r,i,n),W2(null,e,r,!0,t,n);case 19:return _j(t,e,n);case 22:return wj(t,e,n)}throw Error(Le(156,e.tag))};function $j(t,e){return pM(t,e)}function WB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(t,e,n,r){return new WB(t,e,n,r)}function YS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HB(t){if(typeof t=="function")return YS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pS)return 11;if(t===mS)return 14}return 2}function ml(t,e){var n=t.alternate;return n===null?(n=vs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function E0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")YS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ju:return Nc(n.children,i,s,e);case fS:o=8,i|=8;break;case h2:return t=vs(12,n,e,i|2),t.elementType=h2,t.lanes=s,t;case f2:return t=vs(13,n,e,i),t.elementType=f2,t.lanes=s,t;case p2:return t=vs(19,n,e,i),t.elementType=p2,t.lanes=s,t;case JP:return bv(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YP:o=10;break e;case XP:o=9;break e;case pS:o=11;break e;case mS:o=14;break e;case $a:o=16,r=null;break e}throw Error(Le(130,t==null?t:typeof t,""))}return e=vs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nc(t,e,n,r){return t=vs(7,t,r,e),t.lanes=n,t}function bv(t,e,n,r){return t=vs(22,t,r,e),t.elementType=JP,t.lanes=n,t.stateNode={isHidden:!1},t}function Db(t,e,n){return t=vs(6,t,null,e),t.lanes=n,t}function Fb(t,e,n){return e=vs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vb(0),this.expirationTimes=vb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function XS(t,e,n,r,i,s,o,a,l){return t=new KB(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LS(s),t}function GB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Vj(t){if(!t)return kl;t=t._reactInternals;e:{if(tu(t)!==t||t.tag!==1)throw Error(Le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(t.tag===1){var n=t.type;if(Ci(n))return VM(t,n,e)}return e}function Uj(t,e,n,r,i,s,o,a,l){return t=XS(n,r,!0,t,i,s,o,a,l),t.context=Vj(null),n=t.current,r=ni(),i=pl(n),s=ra(r,i),s.callback=e??null,hl(n,s,i),t.current.lanes=i,Qp(t,i,r),_i(t,r),t}function xv(t,e,n,r){var i=e.current,s=ni(),o=pl(i);return n=Vj(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hl(i,e,o),t!==null&&(Gs(t,i,o,s),k0(t,i,o)),o}function wy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function JS(t,e){jA(t,e),(t=t.alternate)&&jA(t,e)}function YB(){return null}var qj=typeof reportError=="function"?reportError:function(t){console.error(t)};function QS(t){this._internalRoot=t}wv.prototype.render=QS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Le(409));xv(t,e,null,null)};wv.prototype.unmount=QS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qc(function(){xv(null,t,null,null)}),e[la]=null}};function wv(t){this._internalRoot=t}wv.prototype.unstable_scheduleHydration=function(t){if(t){var e=wM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ha.length&&e!==0&&e<Ha[n].priority;n++);Ha.splice(n,0,t),n===0&&kM(t)}};function ZS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LA(){}function XB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wy(o);s.call(c)}}var o=Uj(e,r,t,0,null,!1,!1,"",LA);return t._reactRootContainer=o,t[la]=o.current,dp(t.nodeType===8?t.parentNode:t),qc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=wy(l);a.call(c)}}var l=XS(t,0,!1,null,null,!1,!1,"",LA);return t._reactRootContainer=l,t[la]=l.current,dp(t.nodeType===8?t.parentNode:t),qc(function(){xv(e,l,n,r)}),l}function kv(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=wy(o);a.call(l)}}xv(e,o,t,i)}else o=XB(n,e,t,i,r);return wy(o)}bM=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gf(e.pendingLanes);n!==0&&(vS(e,n|1),_i(e,Dn()),!(Lt&6)&&($d=Dn()+500,Il()))}break;case 13:qc(function(){var r=ca(t,1);if(r!==null){var i=ni();Gs(r,t,1,i)}}),JS(t,1)}};bS=function(t){if(t.tag===13){var e=ca(t,134217728);if(e!==null){var n=ni();Gs(e,t,134217728,n)}JS(t,134217728)}};xM=function(t){if(t.tag===13){var e=pl(t),n=ca(t,e);if(n!==null){var r=ni();Gs(n,t,e,r)}JS(t,e)}};wM=function(){return Vt};SM=function(t,e){var n=Vt;try{return Vt=t,e()}finally{Vt=n}};C2=function(t,e,n){switch(e){case"input":if(y2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fv(r);if(!i)throw Error(Le(90));ZP(r),y2(r,i)}}}break;case"textarea":tM(t,n);break;case"select":e=n.value,e!=null&&bd(t,!!n.multiple,e,!1)}};lM=HS;cM=qc;var JB={usingClientEntryPoint:!1,Events:[em,td,fv,oM,aM,HS]},Zh={findFiberByHostInstance:vc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QB={bundleType:Zh.bundleType,version:Zh.version,rendererPackageName:Zh.rendererPackageName,rendererConfig:Zh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ha.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hM(t),t===null?null:t.stateNode},findFiberByHostInstance:Zh.findFiberByHostInstance||YB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{cv=Cg.inject(QB),yo=Cg}catch{}}Xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JB;Xi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZS(e))throw Error(Le(200));return GB(t,e,null,n)};Xi.createRoot=function(t,e){if(!ZS(t))throw Error(Le(299));var n=!1,r="",i=qj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=XS(t,1,!1,null,null,n,!1,r,i),t[la]=e.current,dp(t.nodeType===8?t.parentNode:t),new QS(e)};Xi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Le(188)):(t=Object.keys(t).join(","),Error(Le(268,t)));return t=hM(e),t=t===null?null:t.stateNode,t};Xi.flushSync=function(t){return qc(t)};Xi.hydrate=function(t,e,n){if(!Sv(e))throw Error(Le(200));return kv(null,t,e,!0,n)};Xi.hydrateRoot=function(t,e,n){if(!ZS(t))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Uj(e,null,t,1,n??null,i,!1,s,o),t[la]=e.current,dp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new wv(e)};Xi.render=function(t,e,n){if(!Sv(e))throw Error(Le(200));return kv(null,t,e,!1,n)};Xi.unmountComponentAtNode=function(t){if(!Sv(t))throw Error(Le(40));return t._reactRootContainer?(qc(function(){kv(null,null,t,!1,function(){t._reactRootContainer=null,t[la]=null})}),!0):!1};Xi.unstable_batchedUpdates=HS;Xi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sv(n))throw Error(Le(200));if(t==null||t._reactInternals===void 0)throw Error(Le(38));return kv(t,e,n,!1,r)};Xi.version="18.3.1-next-f1338f8080-20240426";function Wj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wj)}catch(t){console.error(t)}}Wj(),WP.exports=Xi;var Hj=WP.exports;const Sy=sS(Hj);var OA=Hj;u2.createRoot=OA.createRoot,u2.hydrateRoot=OA.hydrateRoot;const ZB="modulepreload",ez=function(t){return"/tir-criteria-a/"+t},IA={},Cl=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ez(s),s in IA)return;IA[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":ZB,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},tz=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Cl(()=>Promise.resolve().then(()=>ah),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ek extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class nz extends ek{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class rz extends ek{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iz extends ek{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var rw;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(rw||(rw={}));var sz=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class oz{constructor(e,{headers:n={},customFetch:r,region:i=rw.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=tz(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return sz(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(p=>{throw new nz(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new rz(u);if(!u.ok)throw new iz(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var xi={},tk={},Cv={},nm={},_v={},Av={},az=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vd=az();const lz=Vd.fetch,Kj=Vd.fetch.bind(Vd),Gj=Vd.Headers,cz=Vd.Request,uz=Vd.Response,ah=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gj,Request:cz,Response:uz,default:Kj,fetch:lz},Symbol.toStringTag,{value:"Module"})),dz=N7(ah);var Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});let hz=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Nv.default=hz;var Yj=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Av,"__esModule",{value:!0});const fz=Yj(dz),pz=Yj(Nv);let mz=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=fz.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,h=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&b&&b.length>1&&(d=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,h=200,f="OK")}catch{s.status===404&&y===""?(h=204,f="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new pz.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Av.default=mz;var gz=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_v,"__esModule",{value:!0});const yz=gz(Av);let vz=class extends yz.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_v.default=vz;var bz=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nm,"__esModule",{value:!0});const xz=bz(_v);let wz=class extends xz.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};nm.default=wz;var Sz=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cv,"__esModule",{value:!0});const ef=Sz(nm);let kz=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ef.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ef.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new ef.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new ef.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ef.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Cv.default=kz;var Tv={},Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.version=void 0;Ev.version="0.0.0-automated";Object.defineProperty(Tv,"__esModule",{value:!0});Tv.DEFAULT_HEADERS=void 0;const Cz=Ev;Tv.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Cz.version}`};var Xj=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tk,"__esModule",{value:!0});const _z=Xj(Cv),Az=Xj(nm),Nz=Tv;let Tz=class Jj{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Nz.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new _z.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jj(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new Az.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};tk.default=Tz;var lh=ks&&ks.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xi,"__esModule",{value:!0});xi.PostgrestError=xi.PostgrestBuilder=xi.PostgrestTransformBuilder=xi.PostgrestFilterBuilder=xi.PostgrestQueryBuilder=xi.PostgrestClient=void 0;const Qj=lh(tk);xi.PostgrestClient=Qj.default;const Zj=lh(Cv);xi.PostgrestQueryBuilder=Zj.default;const eL=lh(nm);xi.PostgrestFilterBuilder=eL.default;const tL=lh(_v);xi.PostgrestTransformBuilder=tL.default;const nL=lh(Av);xi.PostgrestBuilder=nL.default;const rL=lh(Nv);xi.PostgrestError=rL.default;var Ez=xi.default={PostgrestClient:Qj.default,PostgrestQueryBuilder:Zj.default,PostgrestFilterBuilder:eL.default,PostgrestTransformBuilder:tL.default,PostgrestBuilder:nL.default,PostgrestError:rL.default};const{PostgrestClient:Pz,PostgrestQueryBuilder:dde,PostgrestFilterBuilder:hde,PostgrestTransformBuilder:fde,PostgrestBuilder:pde,PostgrestError:mde}=Ez;let iw;typeof window>"u"?iw=require("ws"):iw=window.WebSocket;const Mz=iw,jz="2.11.10",Lz={"X-Client-Info":`realtime-js/${jz}`},Oz="1.0.0",iL=1e4,Iz=1e3;var _d;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_d||(_d={}));var Zr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Zr||(Zr={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var sw;(function(t){t.websocket="websocket"})(sw||(sw={}));var fc;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fc||(fc={}));class Rz{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class sL{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Qt||(Qt={}));const RA=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Dz(o,t,e,i),s),{})},Dz=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i?.type,o=n[t];return s&&!r.includes(s)?oL(s,o):ow(o)},oL=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return $z(e,n)}switch(t){case Qt.bool:return Fz(e);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return Bz(e);case Qt.json:case Qt.jsonb:return zz(e);case Qt.timestamp:return Vz(e);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return ow(e);default:return ow(e)}},ow=t=>t,Fz=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Bz=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zz=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},$z=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>oL(e,a))}return t},Vz=t=>typeof t=="string"?t.replace(" ","T"):t,aL=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Bb{constructor(e,n,r={},i=iL){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var DA;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(DA||(DA={}));class Ff{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ff.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ff.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ff.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const h=u.map(b=>b.presence_ref),f=d.map(b=>b.presence_ref),p=u.filter(b=>f.indexOf(b.presence_ref)<0),y=d.filter(b=>h.indexOf(b.presence_ref)<0);p.length>0&&(a[c]=p),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var FA;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(FA||(FA={}));var BA;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(BA||(BA={}));var Ko;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ko||(Ko={}));class nk{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Zr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Bb(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new sL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Zr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ff(this),this.broadcastEndpointURL=aL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e?.(Ko.CHANNEL_ERROR,u)),this._onClose(()=>e?.(Ko.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e?.(Ko.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h?.length)!==null&&d!==void 0?d:0,p=[];for(let y=0;y<f;y++){const b=h[y],{filter:{event:v,schema:x,table:S,filter:_}}=b,A=u&&u[y];if(A&&A.event===v&&A.schema===x&&A.table===S&&A.filter===_)p.push(Object.assign(Object.assign({},b),{id:A.id}));else{this.unsubscribe(),this.state=Zr.errored,e?.(Ko.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ko.SUBSCRIBED);return}}).receive("error",u=>{this.state=Zr.errored,e?.(Ko.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ko.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Zr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new Bb(this,Vs.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bb(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Vs;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,y,b;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(y=f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var p,y,b,v,x,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,A=(p=f.filter)===null||p===void 0?void 0:p.event;return _&&((y=n.ids)===null||y===void 0?void 0:y.includes(_))&&(A==="*"||A?.toLocaleLowerCase()===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(x=(v=f?.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((S=n?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:y,table:b,commit_timestamp:v,type:x,errors:S}=p;h=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:v,eventType:x,new:{},old:{},errors:S}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Zr.closed}_isJoined(){return this.state===Zr.joined}_isJoining(){return this.state===Zr.joining}_isLeaving(){return this.state===Zr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&nk.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=RA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=RA(e.columns,e.old_record)),n}}const zA=()=>{},Uz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qz{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Lz,this.params={},this.timeout=iL,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zA,this.ref=0,this.logger=zA,this.conn=null,this.sendBuffer=[],this.serializer=new Rz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Cl(()=>Promise.resolve().then(()=>ah),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${sw.websocket}`,this.httpEndpoint=aL(e),n?.transport?this.transport=n.transport:this.transport=null,n?.params&&(this.params=n.params),n?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n?.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sL(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch),n?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=n?.worker||!1,this.workerUrl=n?.workerUrl}this.accessToken=n?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Mz),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Wz(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Oz}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _d.connecting:return fc.Connecting;case _d.open:return fc.Open;case _d.closing:return fc.Closing;default:return fc.Closed}}isConnected(){return this.connectionState()===fc.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new nk(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Vs.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Iz,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Uz],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Wz{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=_d.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class rk extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ar(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Hz extends rk{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class aw extends rk{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Kz=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const lL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Cl(()=>Promise.resolve().then(()=>ah),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Gz=()=>Kz(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cl(()=>Promise.resolve().then(()=>ah),void 0)).Response:Response}),lw=t=>{if(Array.isArray(t))return t.map(n=>lw(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=lw(r)}),e};var nu=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const zb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yz=(t,e,n)=>nu(void 0,void 0,void 0,function*(){const r=yield Gz();t instanceof r&&!n?.noResolveJson?t.json().then(i=>{e(new Hz(zb(i),t.status||500))}).catch(i=>{e(new aw(zb(i),i))}):e(new aw(zb(t),t))}),Xz=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function rm(t,e,n,r,i,s){return nu(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Xz(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Yz(l,a,r))})})}function ky(t,e,n,r){return nu(this,void 0,void 0,function*(){return rm(t,"GET",e,n,r)})}function Ua(t,e,n,r,i){return nu(this,void 0,void 0,function*(){return rm(t,"POST",e,r,i,n)})}function Jz(t,e,n,r,i){return nu(this,void 0,void 0,function*(){return rm(t,"PUT",e,r,i,n)})}function Qz(t,e,n,r){return nu(this,void 0,void 0,function*(){return rm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cL(t,e,n,r,i){return nu(this,void 0,void 0,function*(){return rm(t,"DELETE",e,r,i,n)})}var gi=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Zz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$A={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class e${constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=lL(i)}uploadOrUpdate(e,n,r,i){return gi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},$A),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(ar(s))return{data:null,error:s};throw s}})}upload(e,n,r){return gi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return gi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:$A.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ar(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return gi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const s=yield Ua(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new rk("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}update(e,n,r){return gi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return gi(this,void 0,void 0,function*(){try{return{data:yield Ua(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}copy(e,n,r){return gi(this,void 0,void 0,function*(){try{return{data:{path:(yield Ua(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return gi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ua(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return gi(this,void 0,void 0,function*(){try{const i=yield Ua(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}download(e,n){return gi(this,void 0,void 0,function*(){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ky(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ar(a))return{data:null,error:a};throw a}})}info(e){return gi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ky(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:lw(r),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}exists(e){return gi(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Qz(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ar(r)&&r instanceof aw){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n?.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return gi(this,void 0,void 0,function*(){try{return{data:yield cL(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}list(e,n,r){return gi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Zz),n),{prefix:e||""});return{data:yield Ua(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ar(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const t$="2.7.1",n$={"X-Client-Info":`storage-js/${t$}`};var Ou=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class r${constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},n$),n),this.fetch=lL(r)}listBuckets(){return Ou(this,void 0,void 0,function*(){try{return{data:yield ky(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ar(e))return{data:null,error:e};throw e}})}getBucket(e){return Ou(this,void 0,void 0,function*(){try{return{data:yield ky(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ou(this,void 0,void 0,function*(){try{return{data:yield Ua(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ou(this,void 0,void 0,function*(){try{return{data:yield Jz(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ou(this,void 0,void 0,function*(){try{return{data:yield Ua(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ou(this,void 0,void 0,function*(){try{return{data:yield cL(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ar(n))return{data:null,error:n};throw n}})}}class i$ extends r${constructor(e,n={},r){super(e,n,r)}from(e){return new e$(this.url,this.headers,e,this.fetch)}}const s$="2.50.0";let vf="";typeof Deno<"u"?vf="deno":typeof document<"u"?vf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vf="react-native":vf="node";const o$={"X-Client-Info":`supabase-js-${vf}/${s$}`},a$={headers:o$},l$={schema:"public"},c$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},u$={};var d$=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const h$=t=>{let e;return t?e=t:typeof fetch>"u"?e=Kj:e=fetch,(...n)=>e(...n)},f$=()=>typeof Headers>"u"?Gj:Headers,p$=(t,e,n)=>{const r=h$(n),i=f$();return(s,o)=>d$(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var m$=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function g$(t){return t.endsWith("/")?t:t+"/"}function y$(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>m$(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const uL="2.70.0",Wu=30*1e3,cw=3,$b=cw*Wu,v$="http://localhost:9999",b$="supabase.auth.token",x$={"X-Client-Info":`gotrue-js/${uL}`},uw="X-Supabase-Api-Version",dL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},w$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,S$=6e5;class ik extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function bt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class k$ extends ik{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function C$(t){return bt(t)&&t.name==="AuthApiError"}class hL extends ik{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Rl extends ik{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Da extends Rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _$(t){return bt(t)&&t.name==="AuthSessionMissingError"}class _g extends Rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ag extends Rl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ng extends Rl{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A$(t){return bt(t)&&t.name==="AuthImplicitGrantRedirectError"}class VA extends Rl{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dw extends Rl{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Vb(t){return bt(t)&&t.name==="AuthRetryableFetchError"}class UA extends Rl{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Bf extends Rl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qA=` 	
\r=`.split(""),N$=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qA.length;e+=1)t[qA[e].charCodeAt(0)]=-2;for(let e=0;e<Cy.length;e+=1)t[Cy[e].charCodeAt(0)]=e;return t})();function WA(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Cy[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Cy[r]),e.queuedBits-=6}}function fL(t,e,n){const r=N$[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function HA(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{P$(o,r,n)};for(let o=0;o<t.length;o+=1)fL(t.charCodeAt(o),i,s);return e.join("")}function T$(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function E$(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}T$(r,e)}}function P$(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function M$(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)fL(t.charCodeAt(i),n,r);return new Uint8Array(e)}function j$(t){const e=[];return E$(t,n=>e.push(n)),new Uint8Array(e)}function L$(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>WA(i,n,r)),WA(null,n,r),e.join("")}function O$(t){return Math.round(Date.now()/1e3)+t}function I$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ds=()=>typeof window<"u"&&typeof document<"u",Zl={tested:!1,writable:!1},zf=()=>{if(!Ds())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zl.tested)return Zl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Zl.tested=!0,Zl.writable=!0}catch{Zl.tested=!0,Zl.writable=!1}return Zl.writable};function R$(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const pL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Cl(()=>Promise.resolve().then(()=>ah),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},D$=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mL=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Tg=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Eg=async(t,e)=>{await t.removeItem(e)};class Pv{constructor(){this.promise=new Pv.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Pv.promiseConstructor=Promise;function Ub(t){const e=t.split(".");if(e.length!==3)throw new Bf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!w$.test(e[r]))throw new Bf("JWT not in base64url format");return{header:JSON.parse(HA(e[0])),payload:JSON.parse(HA(e[1])),signature:M$(e[2]),raw:{header:e[0],payload:e[1]}}}async function F$(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function B$(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function z$(t){return("0"+t.toString(16)).substr(-2)}function $$(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,z$).join("")}async function V$(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function U$(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await V$(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Iu(t,e,n=!1){const r=$$();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await mL(t,`${e}-code-verifier`,i);const s=await U$(r);return[s,r===s?"plain":"s256"]}const q$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function W$(t){const e=t.headers.get(uw);if(!e||!e.match(q$))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function H$(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function K$(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const G$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ru(t){if(!G$.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Y$=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ac=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),X$=[502,503,504];async function KA(t){var e;if(!D$(t))throw new dw(ac(t),0);if(X$.includes(t.status))throw new dw(ac(t),t.status);let n;try{n=await t.json()}catch(s){throw new hL(ac(s),s)}let r;const i=W$(t);if(i&&i.getTime()>=dL["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new UA(ac(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Da}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new UA(ac(n),t.status,n.weak_password.reasons);throw new k$(ac(n),t.status||500,r)}const J$=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function kt(t,e,n,r){var i;const s=Object.assign({},r?.headers);s[uw]||(s[uw]=dL["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Q$(t,e,n+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function Q$(t,e,n,r,i,s){const o=J$(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new dw(ac(l),0)}if(a.ok||await KA(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await KA(l)}}function Vo(t){var e;let n=null;n9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=O$(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function GA(t){const e=Vo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ga(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Z$(t){return{data:t,error:null}}function e9(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Y$(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function t9(t){return t}function n9(t){return t.access_token&&t.refresh_token&&t.expires_in}const qb=["global","local","others"];var r9=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class i9{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=pL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=qb[0]){if(qb.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qb.join(", ")}`);try{return await kt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await kt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ga})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=r9(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await kt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:e9,redirectTo:n?.redirectTo})}catch(n){if(bt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await kt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ga})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await kt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:t9});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);c[`${b}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(bt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ru(e);try{return await kt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ga})}catch(n){if(bt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ru(e);try{return await kt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ga})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ru(e);try{return await kt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ga})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ru(e.userId);try{const{data:n,error:r}=await kt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ru(e.userId),Ru(e.id);try{return{data:await kt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}}const s9={getItem:t=>zf()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{zf()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{zf()&&globalThis.localStorage.removeItem(t)}};function YA(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function o9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Du={debug:!!(globalThis&&zf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class a9 extends gL{}async function l9(t,e,n){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Du.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Du.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new a9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Du.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}o9();const c9={url:v$,storageKey:b$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:x$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function XA(t,e,n){return await n()}class xp{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xp.nextInstanceID,xp.nextInstanceID+=1,this.instanceID>0&&Ds()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},c9),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new i9({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=pL(i.fetch),this.lock=i.lock||XA,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ds()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=l9:this.lock=XA,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:zf()?this.storage=s9:(this.memoryStorage={},this.storage=YA(this.memoryStorage)):(this.memoryStorage={},this.storage=YA(this.memoryStorage)),Ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=R$(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ds()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),A$(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return bt(n)?{error:n}:{error:new hL("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Vo}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Iu(this.storage,this.storageKey)),s=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:p},xform:Vo})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h?.data)!==null&&r!==void 0?r:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Vo})}else throw new Ag("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(bt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:GA})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:GA})}else throw new Ag("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _g}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,d,h,f;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:b,wallet:v,statement:x,options:S}=e;let _;if(Ds())if(typeof v=="object")_=v;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))_=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const A=new URL((n=S?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const T=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let P;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")P=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)P=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)p=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),y=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${A.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(i=(r=S?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((c=S?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((d=(u=S?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...S.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const T=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=T}}try{const{data:b,error:v}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:L$(y)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Vo});if(v)throw v;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new _g}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:v})}catch(b){if(bt(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Tg(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Vo});if(await Eg(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new _g}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(bt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await kt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Vo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new _g}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Iu(this.storage,this.storageKey));const{error:d}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c?.message_id},error:u}}throw new Ag("You must provide either an email or phone number.")}catch(a){if(bt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await kt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Vo});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(bt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Iu(this.storage,this.storageKey)),await kt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Z$})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Da;const{error:i}=await kt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(bt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await kt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await kt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new Ag("You must provide either an email or phone number and a type")}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Tg(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$b:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ga}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Da}:await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ga})})}catch(n){if(bt(n))return _$(n)&&(await this._removeSession(),await Eg(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Da;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Iu(this.storage,this.storageKey));const{data:c,error:u}=await kt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ga});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(bt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Da;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=Ub(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(bt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Da;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(bt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ds())throw new Ng("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ng(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new VA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ng("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new VA("No code detected.");const{data:x,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Ng("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=Wu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:y,error:b}=await this._getUser(s);if(b)throw b;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(bt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Tg(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(C$(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Eg(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=I$(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Iu(this.storage,this.storageKey,!0));try{return await kt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(bt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await kt(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ds()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(bt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await kt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await B$(async i=>(i>0&&await F$(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await kt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vo})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Vb(s)&&Date.now()+o-r<Wu})}catch(r){if(this._debug(n,"error",r),bt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ds()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Tg(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<$b;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${$b}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Vb(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Da;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Pv;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Da;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),bt(s)){const o={session:null,error:s};return Vb(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Eg(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ds()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Wu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Wu}ms, refresh threshold is ${cw} ticks`),i<=cw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ds()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Iu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r?.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await kt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await kt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(bt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await kt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await kt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(bt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=e?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ub(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+S$>Date.now()))return r;const{data:i,error:s}=await kt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Bf("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Bf("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Ub(r);if(H$(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:s,header:i,signature:o},error:null}}const c=K$(i.alg),u=await this.fetchJwk(i.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,j$(`${a}.${l}`)))throw new Bf("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}}}xp.nextInstanceID=0;const u9=xp;class d9 extends u9{constructor(e){super(e)}}var h9=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class f9{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=g$(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:l$,realtime:u$,auth:Object.assign(Object.assign({},c$),{storageKey:c}),global:a$},d=y$(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=p$(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Pz(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new oz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new i$(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return h9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d9({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qz(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const p9=(t,e,n)=>new f9(t,e,n),m9="https://qhjqccpoqingzjhubmyt.supabase.co",g9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFoanFjY3BvcWluZ3pqaHVibXl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM3ODM0MTIsImV4cCI6MjA1OTM1OTQxMn0.3Sgkz2YXEECwNmGWKtXVPhbAhIbH-jxTaGTHoPZQtDA",gs=p9(m9,g9),y9=({onStart:t})=>{const[e,n]=B.useState(""),[r,i]=B.useState(null),[s,o]=B.useState(null);B.useEffect(()=>{const l=new URLSearchParams(window.location.search),c=l.get("name"),u=l.get("studentId");c&&c.trim()&&n(c),u&&/^[0-9a-fA-F-]{36}$/.test(u)?i(u):console.warn("❌ Invalid or missing studentId in URL:",u)},[]);const a=async()=>{if(!e||!s){alert("Please enter your name and choose a learning path");return}try{if(r){const c=new URLSearchParams(window.location.search).get("sessionCode")??"unknown",{error:u}=await gs.from("responses").upsert({student_id:r,player_name:e,session_code:c,experiment:s,updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment"});u?console.error("💥 Error syncing learning path:",u.message):console.log("✅ Synced learning path choice for:",e)}t(e,s)}catch(l){console.error("Error starting journey:",l),alert("Failed to start journey. Please try again.")}};return m.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-purple-100 to-purple-400",children:[m.jsxs("header",{className:"bg-purple-600 text-white p-4 shadow-md",children:[m.jsx("h1",{className:"text-xl md:text-2xl font-bold text-center",children:"🌟 Total Internal Reflection Explorer 💎"}),m.jsx("p",{className:"text-center text-sm",children:"MYP Science Criteria A: Knowledge & Understanding"})]}),m.jsx("main",{className:"flex-grow flex flex-col items-center justify-center p-6 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full",children:[m.jsx("h2",{className:"text-2xl font-bold text-purple-800 mb-2 text-center",children:"🌟 Total Internal Reflection Explorer 💎"}),m.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg mb-4",children:[m.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"Statement of Inquiry:"}),m.jsx("p",{className:"text-purple-700 italic text-center",children:'"The development of science and technology gives us the possibility of changing the world for the better."'})]}),m.jsxs("p",{className:"text-center text-gray-600 text-sm mb-4",children:["⏱️ ",m.jsx("strong",{children:"Estimated Completion Time: 40 minutes"})]}),m.jsx("p",{className:"text-gray-700 text-sm mb-6 text-center",children:"In this Criteria A activity, you'll demonstrate your knowledge and understanding of total internal reflection, apply scientific principles to real-world situations, and analyze how this phenomenon enables modern technologies like fiber optics."}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"🏅 Available Badges"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[m.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[m.jsx("span",{className:"text-lg",children:"🔬"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Principle Pioneer"}),m.jsx("p",{className:"text-gray-600",children:"Master TIR laws and principles"})]})]}),m.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[m.jsx("span",{className:"text-lg",children:"🧠"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Concept Crusader"}),m.jsx("p",{className:"text-gray-600",children:"Understand TIR phenomena deeply"})]})]}),m.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[m.jsx("span",{className:"text-lg",children:"⚡"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Application Ace"}),m.jsx("p",{className:"text-gray-600",children:"Connect TIR to real-world uses"})]})]}),m.jsxs("div",{className:"border rounded-lg p-3 flex items-start gap-3 bg-purple-50",children:[m.jsx("span",{className:"text-lg",children:"📊"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Analysis Architect"}),m.jsx("p",{className:"text-gray-600",children:"Analyze and solve TIR problems"})]})]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),m.jsx("input",{type:"text",id:"name",value:e,onChange:l=>n(l.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-purple-500 focus:border-purple-500",placeholder:"Enter your name"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"Choose Your Learning Path"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("button",{onClick:()=>o("critical-angle"),className:`p-4 border rounded text-left transition-all ${s==="critical-angle"?"border-purple-500 bg-purple-50 ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"}`,children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("span",{className:"text-lg",children:"🔍"}),m.jsx("p",{className:"font-medium text-purple-800",children:"Discovering Critical Angles"})]}),m.jsx("p",{className:"text-sm text-gray-600",children:"Explore how light behaves at different angles and discover the magic angle where total internal reflection begins"})]}),m.jsxs("button",{onClick:()=>o("fiber-optics"),className:`p-4 border rounded text-left transition-all ${s==="fiber-optics"?"border-purple-500 bg-purple-50 ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"}`,children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("span",{className:"text-lg",children:"🌐"}),m.jsx("p",{className:"font-medium text-purple-800",children:"How Fibre Optics Work"})]}),m.jsx("p",{className:"text-sm text-gray-600",children:"Investigate how light travels through glass fibers and enables high-speed internet and medical procedures"})]})]})]}),m.jsxs("div",{className:"mb-6 bg-purple-50 p-4 rounded-lg",children:[m.jsx("h3",{className:"text-md font-semibold text-purple-800 mb-2",children:"💡 What You'll Learn:"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[m.jsxs("div",{children:[m.jsx("p",{children:"• Critical angle calculations"}),m.jsx("p",{children:"• TIR in diamonds and gems"}),m.jsx("p",{children:"• Snell's law applications"})]}),m.jsxs("div",{children:[m.jsx("p",{children:"• Refractive index applications"}),m.jsx("p",{children:"• Fiber optic technology"}),m.jsx("p",{children:"• Light speed in materials"})]})]})]}),m.jsx("button",{onClick:a,disabled:!e||!s,className:`w-full py-3 rounded-lg shadow-md transition font-medium ${e&&s?"bg-purple-600 hover:bg-purple-700 text-white transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:e&&s?"🚀 Begin Learning Journey":"Please complete all fields above"}),!1]})})]})},sk=B.createContext({});function ok(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const Mv=B.createContext(null),ak=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class v9 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function b9({children:t,isPresent:e}){const n=B.useId(),r=B.useRef(null),i=B.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=B.useContext(ak);return B.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),m.jsx(v9,{isPresent:e,childRef:r,sizeRef:i,children:B.cloneElement(t,{ref:r})})}const x9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=ok(w9),l=B.useId(),c=B.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),u=B.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return B.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),B.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=m.jsx(b9,{isPresent:n,children:t})),m.jsx(Mv.Provider,{value:u,children:t})};function w9(){return new Map}function yL(t=!0){const e=B.useContext(Mv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=B.useId();B.useEffect(()=>{t&&i(s)},[t]);const o=B.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Pg=t=>t.key||"";function JA(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const lk=typeof window<"u",vL=lk?B.useLayoutEffect:B.useEffect,jv=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=yL(o),c=B.useMemo(()=>JA(t),[t]),u=o&&!a?[]:c.map(Pg),d=B.useRef(!0),h=B.useRef(c),f=ok(()=>new Map),[p,y]=B.useState(c),[b,v]=B.useState(c);vL(()=>{d.current=!1,h.current=c;for(let _=0;_<b.length;_++){const A=Pg(b[_]);u.includes(A)?f.delete(A):f.get(A)!==!0&&f.set(A,!1)}},[b,u.length,u.join("-")]);const x=[];if(c!==p){let _=[...c];for(let A=0;A<b.length;A++){const T=b[A],P=Pg(T);u.includes(P)||(_.splice(A,0,T),x.push(T))}s==="wait"&&x.length&&(_=x),v(JA(_)),y(c);return}const{forceRender:S}=B.useContext(sk);return m.jsx(m.Fragment,{children:b.map(_=>{const A=Pg(_),T=o&&!a?!1:c===b||u.includes(A),P=()=>{if(f.has(A))f.set(A,!0);else return;let E=!0;f.forEach(z=>{z||(E=!1)}),E&&(S?.(),v(h.current),o&&l?.(),r&&r())};return m.jsx(x9,{isPresent:T,initial:!d.current||n?void 0:!1,custom:T?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:T?void 0:P,children:_},A)})})},Ki=t=>t;let bL=Ki;function ck(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ud=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ia=t=>t*1e3,sa=t=>t/1e3,S9={skipAnimations:!1,useManualTiming:!1};function k9(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const f=d&&r?e:n;return u&&s.add(c),f.has(c)||f.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Mg=["read","resolveKeyframes","update","preRender","render","postRender"],C9=40;function xL(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Mg.reduce((v,x)=>(v[x]=k9(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,f=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,C9),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(f))},p=()=>{n=!0,r=!0,i.isProcessing||t(f)};return{schedule:Mg.reduce((v,x)=>{const S=o[x];return v[x]=(_,A=!1,T=!1)=>(n||p(),S.schedule(_,A,T)),v},{}),cancel:v=>{for(let x=0;x<Mg.length;x++)o[Mg[x]].cancel(v)},state:i,steps:o}}const{schedule:ln,cancel:_l,state:wr,steps:Wb}=xL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ki,!0),wL=B.createContext({strict:!1}),QA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qd={};for(const t in QA)qd[t]={isEnabled:e=>QA[t].some(n=>!!e[n])};function _9(t){for(const e in t)qd[e]={...qd[e],...t[e]}}const A9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _y(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||A9.has(t)}let SL=t=>!_y(t);function N9(t){t&&(SL=e=>e.startsWith("on")?!_y(e):t(e))}try{N9(require("@emotion/is-prop-valid").default)}catch{}function T9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(SL(i)||n===!0&&_y(i)||!e&&!_y(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function E9(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Lv=B.createContext({});function wp(t){return typeof t=="string"||Array.isArray(t)}function Ov(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const uk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dk=["initial",...uk];function Iv(t){return Ov(t.animate)||dk.some(e=>wp(t[e]))}function kL(t){return!!(Iv(t)||t.variants)}function P9(t,e){if(Iv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||wp(n)?n:void 0,animate:wp(r)?r:void 0}}return t.inherit!==!1?e:{}}function M9(t){const{initial:e,animate:n}=P9(t,B.useContext(Lv));return B.useMemo(()=>({initial:e,animate:n}),[ZA(e),ZA(n)])}function ZA(t){return Array.isArray(t)?t.join(" "):t}const j9=Symbol.for("motionComponentSymbol");function ld(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function L9(t,e,n){return B.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ld(n)&&(n.current=r))},[e])}const hk=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),O9="framerAppearId",CL="data-"+hk(O9),{schedule:fk,cancel:gde}=xL(queueMicrotask,!1),_L=B.createContext({});function I9(t,e,n,r,i){var s,o;const{visualElement:a}=B.useContext(Lv),l=B.useContext(wL),c=B.useContext(Mv),u=B.useContext(ak).reducedMotion,d=B.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,f=B.useContext(_L);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&R9(d.current,n,i,f);const p=B.useRef(!1);B.useInsertionEffect(()=>{h&&p.current&&h.update(n,c)});const y=n[CL],b=B.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return vL(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),fk.render(h.render),b.current&&h.animationState&&h.animationState.animateChanges())}),B.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,y)}),b.current=!1))}),h}function R9(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:AL(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ld(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function AL(t){if(t)return t.options.allowProjection!==!1?t.projection:AL(t.parent)}function D9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&_9(t);function a(c,u){let d;const h={...B.useContext(ak),...c,layoutId:F9(c)},{isStatic:f}=h,p=M9(c),y=r(c,f);if(!f&&lk){B9();const b=z9(h);d=b.MeasureLayout,p.visualElement=I9(i,y,h,e,b.ProjectionNode)}return m.jsxs(Lv.Provider,{value:p,children:[d&&p.visualElement?m.jsx(d,{visualElement:p.visualElement,...h}):null,n(i,c,L9(y,p.visualElement,u),y,f,p.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=B.forwardRef(a);return l[j9]=i,l}function F9({layoutId:t}){const e=B.useContext(sk).id;return e&&t!==void 0?e+"-"+t:t}function B9(t,e){B.useContext(wL).strict}function z9(t){const{drag:e,layout:n}=qd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const $9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pk(t){return typeof t!="string"||t.includes("-")?!1:!!($9.indexOf(t)>-1||/[A-Z]/u.test(t))}function eN(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function mk(t,e,n,r){if(typeof e=="function"){const[i,s]=eN(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=eN(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const hw=t=>Array.isArray(t),V9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),U9=t=>hw(t)?t[t.length-1]||0:t,Vr=t=>!!(t&&t.getVelocity);function P0(t){const e=Vr(t)?t.get():t;return V9(e)?e.toValue():e}function q9({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:W9(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const NL=t=>(e,n)=>{const r=B.useContext(Lv),i=B.useContext(Mv),s=()=>q9(t,e,r,i);return n?s():ok(s)};function W9(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=P0(s[h]);let{initial:o,animate:a}=t;const l=Iv(t),c=kL(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Ov(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=mk(t,h[f]);if(p){const{transitionEnd:y,transition:b,...v}=p;for(const x in v){let S=v[x];if(Array.isArray(S)){const _=u?S.length-1:0;S=S[_]}S!==null&&(i[x]=S)}for(const x in y)i[x]=y[x]}}}return i}const ch=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ru=new Set(ch),TL=t=>e=>typeof e=="string"&&e.startsWith(t),EL=TL("--"),H9=TL("var(--"),gk=t=>H9(t)?K9.test(t.split("/*")[0].trim()):!1,K9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,PL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,da=(t,e,n)=>n>e?e:n<t?t:n,uh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sp={...uh,transform:t=>da(0,1,t)},jg={...uh,default:1},im=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fa=im("deg"),bo=im("%"),ot=im("px"),G9=im("vh"),Y9=im("vw"),tN={...bo,parse:t=>bo.parse(t)/100,transform:t=>bo.transform(t*100)},X9={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot},J9={rotate:Fa,rotateX:Fa,rotateY:Fa,rotateZ:Fa,scale:jg,scaleX:jg,scaleY:jg,scaleZ:jg,skew:Fa,skewX:Fa,skewY:Fa,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:Sp,originX:tN,originY:tN,originZ:ot},nN={...uh,transform:Math.round},yk={...X9,...J9,zIndex:nN,size:ot,fillOpacity:Sp,strokeOpacity:Sp,numOctaves:nN},Q9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Z9=ch.length;function eV(t,e,n){let r="",i=!0;for(let s=0;s<Z9;s++){const o=ch[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=PL(a,yk[o]);if(!l){i=!1;const u=Q9[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function vk(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ru.has(l)){o=!0;continue}else if(EL(l)){i[l]=c;continue}else{const u=PL(c,yk[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=eV(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const tV={offset:"stroke-dashoffset",array:"stroke-dasharray"},nV={offset:"strokeDashoffset",array:"strokeDasharray"};function rV(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?tV:nV;t[s.offset]=ot.transform(-r);const o=ot.transform(e),a=ot.transform(n);t[s.array]=`${o} ${a}`}function rN(t,e,n){return typeof t=="string"?t:ot.transform(e+n*t)}function iV(t,e,n){const r=rN(e,t.x,t.width),i=rN(n,t.y,t.height);return`${r} ${i}`}function bk(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(vk(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:p}=t;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=iV(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&rV(h,o,a,l,!1)}const xk=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ML=()=>({...xk(),attrs:{}}),wk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function jL(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const LL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OL(t,e,n,r){jL(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(LL.has(i)?i:hk(i),e.attrs[i])}const Ay={};function sV(t){Object.assign(Ay,t)}function IL(t,{layout:e,layoutId:n}){return ru.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ay[t]||t==="opacity")}function Sk(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Vr(i[o])||e.style&&Vr(e.style[o])||IL(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function RL(t,e,n){const r=Sk(t,e,n);for(const i in t)if(Vr(t[i])||Vr(e[i])){const s=ch.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function oV(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const iN=["x","y","width","height","cx","cy","r"],aV={useVisualState:NL({scrapeMotionValuesFromProps:RL,createRenderState:ML,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ru.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<iN.length;a++){const l=iN[a];t[l]!==e[l]&&(o=!0)}o&&ln.read(()=>{oV(n,r),ln.render(()=>{bk(r,i,wk(n.tagName),t.transformTemplate),OL(n,r)})})}})},lV={useVisualState:NL({scrapeMotionValuesFromProps:Sk,createRenderState:xk})};function DL(t,e,n){for(const r in e)!Vr(e[r])&&!IL(r,n)&&(t[r]=e[r])}function cV({transformTemplate:t},e){return B.useMemo(()=>{const n=xk();return vk(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uV(t,e){const n=t.style||{},r={};return DL(r,n,t),Object.assign(r,cV(t,e)),r}function dV(t,e){const n={},r=uV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function hV(t,e,n,r){const i=B.useMemo(()=>{const s=ML();return bk(s,e,wk(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};DL(s,t.style,t),i.style={...s,...i.style}}return i}function fV(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(pk(n)?hV:dV)(r,s,o,n),c=T9(r,typeof n=="string",t),u=n!==B.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=B.useMemo(()=>Vr(d)?d.get():d,[d]);return B.createElement(n,{...u,children:h})}}function pV(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...pk(r)?aV:lV,preloadedFeatures:t,useRender:fV(i),createVisualElement:e,Component:r};return D9(o)}}function FL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Rv(t,e,n){const r=t.getProps();return mk(r,e,n!==void 0?n:r.custom,t)}const mV=ck(()=>window.ScrollTimeline!==void 0);class gV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(mV()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class yV extends gV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function kk(t,e){return t?t[e]||t.default||t:void 0}const fw=2e4;function BL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fw;)e+=n,r=t.next(e);return e>=fw?1/0:e}function Ck(t){return typeof t=="function"}function sN(t,e){t.timeline=e,t.onfinish=null}const _k=t=>Array.isArray(t)&&typeof t[0]=="number",vV={linearEasing:void 0};function bV(t,e){const n=ck(t);return()=>{var r;return(r=vV[e])!==null&&r!==void 0?r:n()}}const Ny=bV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zL=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Ud(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function $L(t){return!!(typeof t=="function"&&Ny()||!t||typeof t=="string"&&(t in pw||Ny())||_k(t)||Array.isArray(t)&&t.every($L))}const bf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,pw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bf([0,.65,.55,1]),circOut:bf([.55,0,1,.45]),backIn:bf([.31,.01,.66,-.59]),backOut:bf([.33,1.53,.69,.99])};function VL(t,e){if(t)return typeof t=="function"&&Ny()?zL(t,e):_k(t)?bf(t):Array.isArray(t)?t.map(n=>VL(n,e)||pw.easeOut):pw[t]}const Fs={x:!1,y:!1};function UL(){return Fs.x||Fs.y}function xV(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;e&&(i=e.current);const s=(r=n?.[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function qL(t,e){const n=xV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function oN(t){return e=>{e.pointerType==="touch"||UL()||t(e)}}function wV(t,e,n={}){const[r,i,s]=qL(t,n),o=oN(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=oN(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const WL=(t,e)=>e?t===e?!0:WL(t,e.parentElement):!1,Ak=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,SV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kV(t){return SV.has(t.tagName)||t.tabIndex!==-1}const xf=new WeakSet;function aN(t){return e=>{e.key==="Enter"&&t(e)}}function Hb(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const CV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=aN(()=>{if(xf.has(n))return;Hb(n,"down");const i=aN(()=>{Hb(n,"up")}),s=()=>Hb(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function lN(t){return Ak(t)&&!UL()}function _V(t,e,n={}){const[r,i,s]=qL(t,n),o=a=>{const l=a.currentTarget;if(!lN(a)||xf.has(l))return;xf.add(l);const c=e(a),u=(f,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!lN(f)||!xf.has(l))&&(xf.delete(l),typeof c=="function"&&c(f,{success:p}))},d=f=>{u(f,n.useGlobalTarget||WL(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!kV(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>CV(c,i),i)}),s}function AV(t){return t==="x"||t==="y"?Fs[t]?null:(Fs[t]=!0,()=>{Fs[t]=!1}):Fs.x||Fs.y?null:(Fs.x=Fs.y=!0,()=>{Fs.x=Fs.y=!1})}const HL=new Set(["width","height","top","left","right","bottom",...ch]);let M0;function NV(){M0=void 0}const xo={now:()=>(M0===void 0&&xo.set(wr.isProcessing||S9.useManualTiming?wr.timestamp:performance.now()),M0),set:t=>{M0=t,queueMicrotask(NV)}};function Nk(t,e){t.indexOf(e)===-1&&t.push(e)}function Tk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ek{constructor(){this.subscriptions=[]}add(e){return Nk(this.subscriptions,e),()=>Tk(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function KL(t,e){return e?t*(1e3/e):0}const cN=30,TV=t=>!isNaN(parseFloat(t));class EV{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=xo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=xo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=TV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ek);const r=this.events[e].add(n);return e==="change"?()=>{r(),ln.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=xo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cN)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cN);return KL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kp(t,e){return new EV(t,e)}function PV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,kp(n))}function MV(t,e){const n=Rv(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=U9(s[o]);PV(t,o,a)}}function jV(t){return!!(Vr(t)&&t.add)}function mw(t,e){const n=t.getValue("willChange");if(jV(n))return n.add(e)}function GL(t){return t.props[CL]}const YL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LV=1e-7,OV=12;function IV(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=YL(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>LV&&++a<OV);return o}function sm(t,e,n,r){if(t===e&&n===r)return Ki;const i=s=>IV(s,0,1,t,n);return s=>s===0||s===1?s:YL(i(s),e,r)}const XL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,JL=t=>e=>1-t(1-e),QL=sm(.33,1.53,.69,.99),Pk=JL(QL),ZL=XL(Pk),e6=t=>(t*=2)<1?.5*Pk(t):.5*(2-Math.pow(2,-10*(t-1))),Mk=t=>1-Math.sin(Math.acos(t)),t6=JL(Mk),n6=XL(Mk),r6=t=>/^0[^.\s]+$/u.test(t);function RV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||r6(t):!0}const $f=t=>Math.round(t*1e5)/1e5,jk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DV(t){return t==null}const FV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lk=(t,e)=>n=>!!(typeof n=="string"&&FV.test(n)&&n.startsWith(t)||e&&!DV(n)&&Object.prototype.hasOwnProperty.call(n,e)),i6=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(jk);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},BV=t=>da(0,255,t),Kb={...uh,transform:t=>Math.round(BV(t))},wc={test:Lk("rgb","red"),parse:i6("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Kb.transform(t)+", "+Kb.transform(e)+", "+Kb.transform(n)+", "+$f(Sp.transform(r))+")"};function zV(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const gw={test:Lk("#"),parse:zV,transform:wc.transform},cd={test:Lk("hsl","hue"),parse:i6("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bo.transform($f(e))+", "+bo.transform($f(n))+", "+$f(Sp.transform(r))+")"},Fr={test:t=>wc.test(t)||gw.test(t)||cd.test(t),parse:t=>wc.test(t)?wc.parse(t):cd.test(t)?cd.parse(t):gw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wc.transform(t):cd.transform(t)},$V=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VV(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jk))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($V))===null||n===void 0?void 0:n.length)||0)>0}const s6="number",o6="color",UV="var",qV="var(",uN="${}",WV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(WV,l=>(Fr.test(l)?(r.color.push(s),i.push(o6),n.push(Fr.parse(l))):l.startsWith(qV)?(r.var.push(s),i.push(UV),n.push(l)):(r.number.push(s),i.push(s6),n.push(parseFloat(l))),++s,uN)).split(uN);return{values:n,split:a,indexes:r,types:i}}function a6(t){return Cp(t).values}function l6(t){const{split:e,types:n}=Cp(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===s6?s+=$f(i[o]):a===o6?s+=Fr.transform(i[o]):s+=i[o]}return s}}const HV=t=>typeof t=="number"?0:t;function KV(t){const e=a6(t);return l6(t)(e.map(HV))}const Al={test:VV,parse:a6,createTransformer:l6,getAnimatableNone:KV},GV=new Set(["brightness","contrast","saturate","opacity"]);function YV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(jk)||[];if(!r)return t;const i=n.replace(r,"");let s=GV.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const XV=/\b([a-z-]*)\(.*?\)/gu,yw={...Al,getAnimatableNone:t=>{const e=t.match(XV);return e?e.map(YV).join(" "):t}},JV={...yk,color:Fr,backgroundColor:Fr,outlineColor:Fr,fill:Fr,stroke:Fr,borderColor:Fr,borderTopColor:Fr,borderRightColor:Fr,borderBottomColor:Fr,borderLeftColor:Fr,filter:yw,WebkitFilter:yw},Ok=t=>JV[t];function c6(t,e){let n=Ok(t);return n!==yw&&(n=Al),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QV=new Set(["auto","none","0"]);function ZV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!QV.has(s)&&Cp(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=c6(n,i)}const dN=t=>t===uh||t===ot,hN=(t,e)=>parseFloat(t.split(", ")[e]),fN=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return hN(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?hN(s[1],t):0}},eU=new Set(["x","y","z"]),tU=ch.filter(t=>!eU.has(t));function nU(t){const e=[];return tU.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Wd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:fN(4,13),y:fN(5,14)};Wd.translateX=Wd.x;Wd.translateY=Wd.y;const Tc=new Set;let vw=!1,bw=!1;function u6(){if(bw){const t=Array.from(Tc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=nU(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}bw=!1,vw=!1,Tc.forEach(t=>t.complete()),Tc.clear()}function d6(){Tc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(bw=!0)})}function rU(){d6(),u6()}class Ik{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Tc.add(this),vw||(vw=!0,ln.read(d6),ln.resolveKeyframes(u6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Tc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Tc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const h6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),iU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sU(t){const e=iU.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function f6(t,e,n=1){const[r,i]=sU(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return h6(o)?parseFloat(o):o}return gk(i)?f6(i,e,n+1):i}const p6=t=>e=>e.test(t),oU={test:t=>t==="auto",parse:t=>t},m6=[uh,ot,bo,Fa,Y9,G9,oU],pN=t=>m6.find(p6(t));class g6 extends Ik{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),gk(c))){const u=f6(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!HL.has(r)||e.length!==2)return;const[i,s]=e,o=pN(i),a=pN(s);if(o!==a)if(dN(o)&&dN(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)RV(e[i])&&r.push(i);r.length&&ZV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Wd[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const mN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Al.test(t)||t==="0")&&!t.startsWith("url("));function aU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function lU(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=mN(i,e),a=mN(s,e);return!o||!a?!1:aU(t)||(n==="spring"||Ck(n))&&r}const cU=t=>t!==null;function Dv(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(cU),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const uU=40;class y6{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=xo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>uU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rU(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=xo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!lU(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Dv(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yn=(t,e,n)=>t+(e-t)*n;function Gb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function dU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Gb(l,a,t+1/3),s=Gb(l,a,t),o=Gb(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Ty(t,e){return n=>n>0?e:t}const Yb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},hU=[gw,wc,cd],fU=t=>hU.find(e=>e.test(t));function gN(t){const e=fU(t);if(!e)return!1;let n=e.parse(t);return e===cd&&(n=dU(n)),n}const yN=(t,e)=>{const n=gN(t),r=gN(e);if(!n||!r)return Ty(t,e);const i={...n};return s=>(i.red=Yb(n.red,r.red,s),i.green=Yb(n.green,r.green,s),i.blue=Yb(n.blue,r.blue,s),i.alpha=yn(n.alpha,r.alpha,s),wc.transform(i))},pU=(t,e)=>n=>e(t(n)),om=(...t)=>t.reduce(pU),xw=new Set(["none","hidden"]);function mU(t,e){return xw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function gU(t,e){return n=>yn(t,e,n)}function Rk(t){return typeof t=="number"?gU:typeof t=="string"?gk(t)?Ty:Fr.test(t)?yN:bU:Array.isArray(t)?v6:typeof t=="object"?Fr.test(t)?yN:yU:Ty}function v6(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Rk(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function yU(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Rk(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function vU(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const bU=(t,e)=>{const n=Al.createTransformer(e),r=Cp(t),i=Cp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?xw.has(t)&&!i.values.length||xw.has(e)&&!r.values.length?mU(t,e):om(v6(vU(r,i),i.values),n):Ty(t,e)};function b6(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yn(t,e,n):Rk(t)(t,e)}const xU=5;function x6(t,e,n){const r=Math.max(e-xU,0);return KL(n-t(r),e-r)}const An={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xb=.001;function wU({duration:t=An.duration,bounce:e=An.bounce,velocity:n=An.velocity,mass:r=An.mass}){let i,s,o=1-e;o=da(An.minDamping,An.maxDamping,o),t=da(An.minDuration,An.maxDuration,sa(t)),o<1?(i=c=>{const u=c*o,d=u*t,h=u-n,f=ww(c,o),p=Math.exp(-d);return Xb-h/f*p},s=c=>{const d=c*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),y=ww(Math.pow(c,2),o);return(-i(c)+Xb>0?-1:1)*((h-f)*p)/y}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Xb+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=kU(i,s,a);if(t=ia(t),isNaN(l))return{stiffness:An.stiffness,damping:An.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const SU=12;function kU(t,e,n){let r=n;for(let i=1;i<SU;i++)r=r-t(r)/e(r);return r}function ww(t,e){return t*Math.sqrt(1-e*e)}const CU=["duration","bounce"],_U=["stiffness","damping","mass"];function vN(t,e){return e.some(n=>t[n]!==void 0)}function AU(t){let e={velocity:An.velocity,stiffness:An.stiffness,damping:An.damping,mass:An.mass,isResolvedFromDuration:!1,...t};if(!vN(t,_U)&&vN(t,CU))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*da(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:An.mass,stiffness:i,damping:s}}else{const n=wU(t);e={...e,...n,mass:An.mass},e.isResolvedFromDuration=!0}return e}function w6(t=An.visualDuration,e=An.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=AU({...n,velocity:-sa(n.velocity||0)}),p=h||0,y=c/(2*Math.sqrt(l*u)),b=o-s,v=sa(Math.sqrt(l/u)),x=Math.abs(b)<5;r||(r=x?An.restSpeed.granular:An.restSpeed.default),i||(i=x?An.restDelta.granular:An.restDelta.default);let S;if(y<1){const A=ww(v,y);S=T=>{const P=Math.exp(-y*v*T);return o-P*((p+y*v*b)/A*Math.sin(A*T)+b*Math.cos(A*T))}}else if(y===1)S=A=>o-Math.exp(-v*A)*(b+(p+v*b)*A);else{const A=v*Math.sqrt(y*y-1);S=T=>{const P=Math.exp(-y*v*T),E=Math.min(A*T,300);return o-P*((p+y*v*b)*Math.sinh(E)+A*b*Math.cosh(E))/A}}const _={calculatedDuration:f&&d||null,next:A=>{const T=S(A);if(f)a.done=A>=d;else{let P=0;y<1&&(P=A===0?ia(p):x6(S,A,T));const E=Math.abs(P)<=r,z=Math.abs(o-T)<=i;a.done=E&&z}return a.value=a.done?o:T,a},toString:()=>{const A=Math.min(BL(_),fw),T=zL(P=>_.next(A*P).value,A,30);return A+"ms "+T}};return _}function bN({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=E=>a!==void 0&&E<a||l!==void 0&&E>l,p=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let y=n*e;const b=d+y,v=o===void 0?b:o(b);v!==b&&(y=v-d);const x=E=>-y*Math.exp(-E/r),S=E=>v+x(E),_=E=>{const z=x(E),H=S(E);h.done=Math.abs(z)<=c,h.value=h.done?v:H};let A,T;const P=E=>{f(h.value)&&(A=E,T=w6({keyframes:[h.value,p(h.value)],velocity:x6(S,E,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:E=>{let z=!1;return!T&&A===void 0&&(z=!0,_(E),P(E)),A!==void 0&&E>=A?T.next(E-A):(!z&&_(E),h)}}}const NU=sm(.42,0,1,1),TU=sm(0,0,.58,1),S6=sm(.42,0,.58,1),EU=t=>Array.isArray(t)&&typeof t[0]!="number",PU={linear:Ki,easeIn:NU,easeInOut:S6,easeOut:TU,circIn:Mk,circInOut:n6,circOut:t6,backIn:Pk,backInOut:ZL,backOut:QL,anticipate:e6},xN=t=>{if(_k(t)){bL(t.length===4);const[e,n,r,i]=t;return sm(e,n,r,i)}else if(typeof t=="string")return PU[t];return t};function MU(t,e,n){const r=[],i=n||b6,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ki:e;a=om(l,a)}r.push(a)}return r}function jU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(bL(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=MU(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Ud(t[d],t[d+1],u);return a[d](h)};return n?u=>c(da(t[0],t[s-1],u)):c}function LU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ud(0,e,r);t.push(yn(n,1,i))}}function OU(t){const e=[0];return LU(e,t.length-1),e}function IU(t,e){return t.map(n=>n*e)}function RU(t,e){return t.map(()=>e||S6).splice(0,t.length-1)}function Ey({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=EU(r)?r.map(xN):xN(r),s={done:!1,value:e[0]},o=IU(n&&n.length===e.length?n:OU(e),t),a=jU(o,e,{ease:Array.isArray(i)?i:RU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const DU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ln.update(e,!0),stop:()=>_l(e),now:()=>wr.isProcessing?wr.timestamp:xo.now()}},FU={decay:bN,inertia:bN,tween:Ey,keyframes:Ey,spring:w6},BU=t=>t/100;class Dk extends y6{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||Ik,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Ck(n)?n:FU[n]||Ey;let l,c;a!==Ey&&typeof e[0]!="number"&&(l=om(BU,b6(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=BL(u));const{calculatedDuration:d}=u,h=d+i,f=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:f,repeatType:p,repeatDelay:y,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,_=s;if(f){const E=Math.min(this.currentTime,u)/d;let z=Math.floor(E),H=E%1;!H&&E>=1&&(H=1),H===1&&z--,z=Math.min(z,f+1),!!(z%2)&&(p==="reverse"?(H=1-H,y&&(H-=y/d)):p==="mirror"&&(_=o)),S=da(0,1,H)*d}const A=x?{done:!1,value:l[0]}:_.next(S);a&&(A.value=a(A.value));let{done:T}=A;!x&&c!==null&&(T=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return P&&i!==void 0&&(A.value=Dv(l,this.options,i)),b&&b(A.value),P&&this.finish(),A}get duration(){const{resolved:e}=this;return e?sa(e.calculatedDuration):0}get time(){return sa(this.currentTime)}set time(e){e=ia(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=sa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=DU,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const zU=new Set(["opacity","clipPath","filter","transform"]);function $U(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=VL(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const VU=ck(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Py=10,UU=2e4;function qU(t){return Ck(t.type)||t.type==="spring"||!$L(t.ease)}function WU(t,e){const n=new Dk({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<UU;)r=n.sample(s),i.push(r.value),s+=Py;return{times:void 0,keyframes:i,duration:s-Py,ease:"linear"}}const k6={anticipate:e6,backInOut:ZL,circInOut:n6};function HU(t){return t in k6}class wN extends y6{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new g6(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Ny()&&HU(s)&&(s=k6[s]),qU(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:p,...y}=this.options,b=WU(e,y);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const u=$U(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(sN(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Dv(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return sa(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return sa(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ia(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ki;const{animation:r}=n;sN(r,e)}return Ki}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...f}=this.options,p=new Dk({...f,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),y=ia(this.time);c.setWithVelocity(p.sample(y-Py).value,p.sample(y).value,Py)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return VU()&&r&&zU.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const KU={type:"spring",stiffness:500,damping:25,restSpeed:10},GU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),YU={type:"keyframes",duration:.8},XU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JU=(t,{keyframes:e})=>e.length>2?YU:ru.has(t)?t.startsWith("scale")?GU(e[1]):KU:XU;function QU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Fk=(t,e,n,r={},i,s)=>o=>{const a=kk(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ia(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};QU(a)||(u={...u,...JU(t,u)}),u.duration&&(u.duration=ia(u.duration)),u.repeatDelay&&(u.repeatDelay=ia(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=Dv(u.keyframes,a);if(h!==void 0)return ln.update(()=>{u.onUpdate(h),u.onComplete()}),new yV([])}return!s&&wN.supports(u)?new wN(u):new Dk(u)};function ZU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function C6(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),f=l[d];if(f===void 0||u&&ZU(u,d))continue;const p={delay:n,...kk(o||{},d)};let y=!1;if(window.MotionHandoffAnimation){const v=GL(t);if(v){const x=window.MotionHandoffAnimation(v,d,ln);x!==null&&(p.startTime=x,y=!0)}}mw(t,d),h.start(Fk(d,h,f,t.shouldReduceMotion&&HL.has(d)?{type:!1}:p,t,y));const b=h.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{ln.update(()=>{a&&MV(t,a)})}),c}function Sw(t,e,n={}){var r;const i=Rv(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(C6(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return eq(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function eq(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(tq).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Sw(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function tq(t,e){return t.sortNodePosition(e)}function nq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Sw(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Sw(t,e,n);else{const i=typeof e=="function"?Rv(t,e,n.custom):e;r=Promise.all(C6(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const rq=dk.length;function _6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?_6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<rq;n++){const r=dk[n],i=t.props[r];(wp(i)||i===!1)&&(e[r]=i)}return e}const iq=[...uk].reverse(),sq=uk.length;function oq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>nq(t,n,r)))}function aq(t){let e=oq(t),n=SN(),r=!0;const i=l=>(c,u)=>{var d;const h=Rv(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...y}=h;c={...c,...y,...p}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=_6(t.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let b=0;b<sq;b++){const v=iq[b],x=n[v],S=c[v]!==void 0?c[v]:u[v],_=wp(S),A=v===l?x.isActive:null;A===!1&&(p=b);let T=S===u[v]&&S!==c[v]&&_;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),x.protectedKeys={...f},!x.isActive&&A===null||!S&&!x.prevProp||Ov(S)||typeof S=="boolean")continue;const P=lq(x.prevProp,S);let E=P||v===l&&x.isActive&&!T&&_||b>p&&_,z=!1;const H=Array.isArray(S)?S:[S];let j=H.reduce(i(v),{});A===!1&&(j={});const{prevResolvedValues:I={}}=x,q={...I,...j},F=ee=>{E=!0,h.has(ee)&&(z=!0,h.delete(ee)),x.needsAnimating[ee]=!0;const X=t.getValue(ee);X&&(X.liveStyle=!1)};for(const ee in q){const X=j[ee],ie=I[ee];if(f.hasOwnProperty(ee))continue;let V=!1;hw(X)&&hw(ie)?V=!FL(X,ie):V=X!==ie,V?X!=null?F(ee):h.add(ee):X!==void 0&&h.has(ee)?F(ee):x.protectedKeys[ee]=!0}x.prevProp=S,x.prevResolvedValues=j,x.isActive&&(f={...f,...j}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(T&&P)||z)&&d.push(...H.map(ee=>({animation:ee,options:{type:v}})))}if(h.size){const b={};h.forEach(v=>{const x=t.getBaseTarget(v),S=t.getValue(v);S&&(S.liveStyle=!0),b[v]=x??null}),d.push({animation:b})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=SN(),r=!0}}}function lq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FL(e,t):!1}function ec(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SN(){return{animate:ec(!0),whileInView:ec(),whileHover:ec(),whileTap:ec(),whileDrag:ec(),whileFocus:ec(),exit:ec()}}class Dl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class cq extends Dl{constructor(e){super(e),e.animationState||(e.animationState=aq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ov(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let uq=0;class dq extends Dl{constructor(){super(...arguments),this.id=uq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const hq={animation:{Feature:cq},exit:{Feature:dq}};function _p(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function am(t){return{point:{x:t.pageX,y:t.pageY}}}const fq=t=>e=>Ak(e)&&t(e,am(e));function Vf(t,e,n,r){return _p(t,e,fq(n),r)}const kN=(t,e)=>Math.abs(t-e);function pq(t,e){const n=kN(t.x,e.x),r=kN(t.y,e.y);return Math.sqrt(n**2+r**2)}class A6{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Qb(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=pq(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:p}=d,{timestamp:y}=wr;this.history.push({...p,timestamp:y});const{onStart:b,onMove:v}=this.handlers;h||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Jb(h,this.transformPagePoint),ln.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:p,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Qb(d.type==="pointercancel"?this.lastMoveEventInfo:Jb(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,b),p&&p(d,b)},!Ak(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=am(e),a=Jb(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=wr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Qb(a,this.history)),this.removeListeners=om(Vf(this.contextWindow,"pointermove",this.handlePointerMove),Vf(this.contextWindow,"pointerup",this.handlePointerUp),Vf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_l(this.updatePoint)}}function Jb(t,e){return e?{point:e(t.point)}:t}function CN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Qb({point:t},e){return{point:t,delta:CN(t,N6(e)),offset:CN(t,mq(e)),velocity:gq(e,.1)}}function mq(t){return t[0]}function N6(t){return t[t.length-1]}function gq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=N6(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ia(e)));)n--;if(!r)return{x:0,y:0};const s=sa(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const T6=1e-4,yq=1-T6,vq=1+T6,E6=.01,bq=0-E6,xq=0+E6;function Yi(t){return t.max-t.min}function wq(t,e,n){return Math.abs(t-e)<=n}function _N(t,e,n,r=.5){t.origin=r,t.originPoint=yn(e.min,e.max,t.origin),t.scale=Yi(n)/Yi(e),t.translate=yn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=yq&&t.scale<=vq||isNaN(t.scale))&&(t.scale=1),(t.translate>=bq&&t.translate<=xq||isNaN(t.translate))&&(t.translate=0)}function Uf(t,e,n,r){_N(t.x,e.x,n.x,r?r.originX:void 0),_N(t.y,e.y,n.y,r?r.originY:void 0)}function AN(t,e,n){t.min=n.min+e.min,t.max=t.min+Yi(e)}function Sq(t,e,n){AN(t.x,e.x,n.x),AN(t.y,e.y,n.y)}function NN(t,e,n){t.min=e.min-n.min,t.max=t.min+Yi(e)}function qf(t,e,n){NN(t.x,e.x,n.x),NN(t.y,e.y,n.y)}function kq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yn(n,t,r.max):Math.min(t,n)),t}function TN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Cq(t,{top:e,left:n,bottom:r,right:i}){return{x:TN(t.x,n,i),y:TN(t.y,e,r)}}function EN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _q(t,e){return{x:EN(t.x,e.x),y:EN(t.y,e.y)}}function Aq(t,e){let n=.5;const r=Yi(t),i=Yi(e);return i>r?n=Ud(e.min,e.max-r,t.min):r>i&&(n=Ud(t.min,t.max-i,e.min)),da(0,1,n)}function Nq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const kw=.35;function Tq(t=kw){return t===!1?t=0:t===!0&&(t=kw),{x:PN(t,"left","right"),y:PN(t,"top","bottom")}}function PN(t,e,n){return{min:MN(t,e),max:MN(t,n)}}function MN(t,e){return typeof t=="number"?t:t[e]||0}const jN=()=>({translate:0,scale:1,origin:0,originPoint:0}),ud=()=>({x:jN(),y:jN()}),LN=()=>({min:0,max:0}),Rn=()=>({x:LN(),y:LN()});function hs(t){return[t("x"),t("y")]}function P6({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Eq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Pq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zb(t){return t===void 0||t===1}function Cw({scale:t,scaleX:e,scaleY:n}){return!Zb(t)||!Zb(e)||!Zb(n)}function lc(t){return Cw(t)||M6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function M6(t){return ON(t.x)||ON(t.y)}function ON(t){return t&&t!=="0%"}function My(t,e,n){const r=t-n,i=e*r;return n+i}function IN(t,e,n,r,i){return i!==void 0&&(t=My(t,i,r)),My(t,n,r)+e}function _w(t,e=0,n=1,r,i){t.min=IN(t.min,e,n,r,i),t.max=IN(t.max,e,n,r,i)}function j6(t,{x:e,y:n}){_w(t.x,e.translate,e.scale,e.originPoint),_w(t.y,n.translate,n.scale,n.originPoint)}const RN=.999999999999,DN=1.0000000000001;function Mq(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&hd(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,j6(t,o)),r&&lc(s.latestValues)&&hd(t,s.latestValues))}e.x<DN&&e.x>RN&&(e.x=1),e.y<DN&&e.y>RN&&(e.y=1)}function dd(t,e){t.min=t.min+e,t.max=t.max+e}function FN(t,e,n,r,i=.5){const s=yn(t.min,t.max,i);_w(t,e,n,s,r)}function hd(t,e){FN(t.x,e.x,e.scaleX,e.scale,e.originX),FN(t.y,e.y,e.scaleY,e.scale,e.originY)}function L6(t,e){return P6(Pq(t.getBoundingClientRect(),e))}function jq(t,e,n){const r=L6(t,n),{scroll:i}=e;return i&&(dd(r.x,i.offset.x),dd(r.y,i.offset.y)),r}const O6=({current:t})=>t?t.ownerDocument.defaultView:null,Lq=new WeakMap;class Oq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(am(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:p}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AV(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hs(b=>{let v=this.getAxisMotionValue(b).get()||0;if(bo.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[b];S&&(v=Yi(S)*(parseFloat(v)/100))}}this.originPoint[b]=v}),p&&ln.postRender(()=>p(u,d)),mw(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:p,onDrag:y}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=d;if(f&&this.currentDirection===null){this.currentDirection=Iq(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),y&&y(u,d)},a=(u,d)=>this.stop(u,d),l=()=>hs(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new A6(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:O6(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ln.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Lg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=kq(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ld(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Cq(i.layoutBox,n):this.constraints=!1,this.elastic=Tq(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Nq(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ld(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=jq(r,i.root,this.visualElement.getTransformPagePoint());let o=_q(i.layout.layoutBox,s);if(n){const a=n(Eq(o));this.hasMutatedConstraints=!!a,a&&(o=P6(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=hs(u=>{if(!Lg(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return mw(this.visualElement,e),r.start(Fk(e,r,0,n,this.visualElement,!1))}stopAnimation(){hs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){hs(n=>{const{drag:r}=this.getProps();if(!Lg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-yn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ld(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Aq({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),hs(o=>{if(!Lg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(yn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Lq.set(this.visualElement,this);const e=this.visualElement.current,n=Vf(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ld(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ln.read(r);const o=_p(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(hs(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=kw,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Lg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Iq(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Rq extends Dl{constructor(e){super(e),this.removeGroupControls=Ki,this.removeListeners=Ki,this.controls=new Oq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const BN=t=>(e,n)=>{t&&ln.postRender(()=>t(e,n))};class Dq extends Dl{constructor(){super(...arguments),this.removePointerDownListener=Ki}onPointerDown(e){this.session=new A6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:O6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:BN(e),onStart:BN(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&ln.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Vf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const j0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ot.test(t))t=parseFloat(t);else return t;const n=zN(t,e.target.x),r=zN(t,e.target.y);return`${n}% ${r}%`}},Fq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Al.parse(t);if(i.length>5)return r;const s=Al.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=yn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Bq extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;sV(zq),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),j0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ln.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function I6(t){const[e,n]=yL(),r=B.useContext(sk);return m.jsx(Bq,{...t,layoutGroup:r,switchLayoutGroup:B.useContext(_L),isPresent:e,safeToRemove:n})}const zq={borderRadius:{...tf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tf,borderTopRightRadius:tf,borderBottomLeftRadius:tf,borderBottomRightRadius:tf,boxShadow:Fq};function $q(t,e,n){const r=Vr(t)?t:kp(t);return r.start(Fk("",r,e,n)),r.animation}function Vq(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Uq=(t,e)=>t.depth-e.depth;class qq{constructor(){this.children=[],this.isDirty=!1}add(e){Nk(this.children,e),this.isDirty=!0}remove(e){Tk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Uq),this.isDirty=!1,this.children.forEach(e)}}function Wq(t,e){const n=xo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(_l(r),t(s-e))};return ln.read(r,!0),()=>_l(r)}const R6=["TopLeft","TopRight","BottomLeft","BottomRight"],Hq=R6.length,$N=t=>typeof t=="string"?parseFloat(t):t,VN=t=>typeof t=="number"||ot.test(t);function Kq(t,e,n,r,i,s){i?(t.opacity=yn(0,n.opacity!==void 0?n.opacity:1,Gq(r)),t.opacityExit=yn(e.opacity!==void 0?e.opacity:1,0,Yq(r))):s&&(t.opacity=yn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Hq;o++){const a=`border${R6[o]}Radius`;let l=UN(e,a),c=UN(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||VN(l)===VN(c)?(t[a]=Math.max(yn($N(l),$N(c),r),0),(bo.test(c)||bo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=yn(e.rotate||0,n.rotate||0,r))}function UN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Gq=D6(0,.5,t6),Yq=D6(.5,.95,Ki);function D6(t,e,n){return r=>r<t?0:r>e?1:n(Ud(t,e,r))}function qN(t,e){t.min=e.min,t.max=e.max}function cs(t,e){qN(t.x,e.x),qN(t.y,e.y)}function WN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function HN(t,e,n,r,i){return t-=e,t=My(t,1/n,r),i!==void 0&&(t=My(t,1/i,r)),t}function Xq(t,e=0,n=1,r=.5,i,s=t,o=t){if(bo.test(e)&&(e=parseFloat(e),e=yn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=yn(s.min,s.max,r);t===s&&(a-=e),t.min=HN(t.min,e,n,a,i),t.max=HN(t.max,e,n,a,i)}function KN(t,e,[n,r,i],s,o){Xq(t,e[n],e[r],e[i],e.scale,s,o)}const Jq=["x","scaleX","originX"],Qq=["y","scaleY","originY"];function GN(t,e,n,r){KN(t.x,e,Jq,n?n.x:void 0,r?r.x:void 0),KN(t.y,e,Qq,n?n.y:void 0,r?r.y:void 0)}function YN(t){return t.translate===0&&t.scale===1}function F6(t){return YN(t.x)&&YN(t.y)}function XN(t,e){return t.min===e.min&&t.max===e.max}function Zq(t,e){return XN(t.x,e.x)&&XN(t.y,e.y)}function JN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function B6(t,e){return JN(t.x,e.x)&&JN(t.y,e.y)}function QN(t){return Yi(t.x)/Yi(t.y)}function ZN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eW{constructor(){this.members=[]}add(e){Nk(this.members,e),e.scheduleRender()}remove(e){if(Tk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tW(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const cc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},wf=typeof window<"u"&&window.MotionDebug!==void 0,ex=["","X","Y","Z"],nW={visibility:"hidden"},e3=1e3;let rW=0;function tx(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function z6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=GL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ln,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&z6(r)}function $6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=rW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wf&&(cc.totalNodes=cc.resolvedTargetDeltas=cc.recalculatedProjection=0),this.nodes.forEach(oW),this.nodes.forEach(dW),this.nodes.forEach(hW),this.nodes.forEach(aW),wf&&window.MotionDebug.record(cc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new qq)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ek),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Vq(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Wq(h,250),j0.hasAnimatedSinceResize&&(j0.hasAnimatedSinceResize=!1,this.nodes.forEach(n3))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||yW,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!B6(this.targetLayout,p)||f,S=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const _={...kk(y,"layout"),onPlay:b,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else h||n3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_l(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&z6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(t3);return}this.isUpdating||this.nodes.forEach(cW),this.isUpdating=!1,this.nodes.forEach(uW),this.nodes.forEach(iW),this.nodes.forEach(sW),this.clearAllSnapshots();const a=xo.now();wr.delta=da(0,1e3/60,a-wr.timestamp),wr.timestamp=a,wr.isProcessing=!0,Wb.update.process(wr),Wb.preRender.process(wr),Wb.render.process(wr),wr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lW),this.sharedNodes.forEach(pW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ln.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ln.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!F6(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||lc(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Rn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(bW))){const{scroll:u}=this.root;u&&(dd(l.x,u.offset.x),dd(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Rn();if(cs(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&cs(l,o),dd(l.x,d.offset.x),dd(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=Rn();cs(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&hd(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),lc(u.latestValues)&&hd(l,u.latestValues)}return lc(this.latestValues)&&hd(l,this.latestValues),l}removeTransform(o){const a=Rn();cs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!lc(c.latestValues))continue;Cw(c.latestValues)&&c.updateSnapshot();const u=Rn(),d=c.measurePageBox();cs(u,d),GN(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return lc(this.latestValues)&&GN(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=wr.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),qf(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rn(),this.targetWithTransforms=Rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Sq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cs(this.target,this.layout.layoutBox),j6(this.target,this.targetDelta)):cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),qf(this.relativeTargetOrigin,this.target,f.target),cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wf&&cc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Cw(this.parent.latestValues)||M6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===wr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;cs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Mq(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Rn());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WN(this.prevProjectionDelta.x,this.projectionDelta.x),WN(this.prevProjectionDelta.y,this.projectionDelta.y)),Uf(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!ZN(this.projectionDelta.x,this.prevProjectionDelta.x)||!ZN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),wf&&cc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ud(),this.projectionDelta=ud(),this.projectionDeltaWithTransform=ud()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=ud();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Rn(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,y=f!==p,b=this.getStack(),v=!b||b.members.length<=1,x=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(gW));this.animationProgress=0;let S;this.mixTargetDelta=_=>{const A=_/1e3;r3(d.x,o.x,A),r3(d.y,o.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qf(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mW(this.relativeTarget,this.relativeTargetOrigin,h,A),S&&Zq(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Rn()),cs(S,this.relativeTarget)),y&&(this.animationValues=u,Kq(u,c,this.latestValues,A,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_l(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ln.update(()=>{j0.hasAnimatedSinceResize=!0,this.currentAnimation=$q(0,e3,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&V6(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Rn();const d=Yi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=Yi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}cs(a,l),hd(a,u),Uf(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new eW),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&tx("z",o,c,this.animationValues);for(let u=0;u<ex.length;u++)tx(`rotate${ex[u]}`,o,c,this.animationValues),tx(`skew${ex[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nW;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=P0(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=P0(o?.pointerEvents)||""),this.hasProjected&&!lc(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=tW(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:p}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in Ay){if(h[y]===void 0)continue;const{correct:b,applyTo:v}=Ay[y],x=c.transform==="none"?h[y]:b(h[y],d);if(v){const S=v.length;for(let _=0;_<S;_++)c[v[_]]=x}else c[y]=x}return this.options.layoutId&&(c.pointerEvents=d===this?P0(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(t3),this.root.sharedNodes.clear()}}}function iW(t){t.updateLayout()}function sW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?hs(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Yi(h);h.min=r[d].min,h.max=h.min+f}):V6(s,n.layoutBox,r)&&hs(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=Yi(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=ud();Uf(a,r,n.layoutBox);const l=ud();o?Uf(l,t.applyTransform(i,!0),n.measuredBox):Uf(l,r,n.layoutBox);const c=!F6(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const p=Rn();qf(p,n.layoutBox,h.layoutBox);const y=Rn();qf(y,r,f.layoutBox),B6(p,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function oW(t){wf&&cc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function aW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lW(t){t.clearSnapshot()}function t3(t){t.clearMeasurements()}function cW(t){t.isLayoutDirty=!1}function uW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function n3(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function dW(t){t.resolveTargetDelta()}function hW(t){t.calcProjection()}function fW(t){t.resetSkewAndRotation()}function pW(t){t.removeLeadSnapshot()}function r3(t,e,n){t.translate=yn(e.translate,0,n),t.scale=yn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function i3(t,e,n,r){t.min=yn(e.min,n.min,r),t.max=yn(e.max,n.max,r)}function mW(t,e,n,r){i3(t.x,e.x,n.x,r),i3(t.y,e.y,n.y,r)}function gW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yW={duration:.45,ease:[.4,0,.1,1]},s3=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),o3=s3("applewebkit/")&&!s3("chrome/")?Math.round:Ki;function a3(t){t.min=o3(t.min),t.max=o3(t.max)}function vW(t){a3(t.x),a3(t.y)}function V6(t,e,n){return t==="position"||t==="preserve-aspect"&&!wq(QN(e),QN(n),.2)}function bW(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const xW=$6({attachResizeListener:(t,e)=>_p(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nx={current:void 0},U6=$6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nx.current){const t=new xW({});t.mount(window),t.setOptions({layoutScroll:!0}),nx.current=t}return nx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wW={pan:{Feature:Dq},drag:{Feature:Rq,ProjectionNode:U6,MeasureLayout:I6}};function l3(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ln.postRender(()=>s(e,am(e)))}class SW extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=wV(e,n=>(l3(this.node,n,"Start"),r=>l3(this.node,r,"End"))))}unmount(){}}class kW extends Dl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=om(_p(this.node.current,"focus",()=>this.onFocus()),_p(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function c3(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ln.postRender(()=>s(e,am(e)))}class CW extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=_V(e,n=>(c3(this.node,n,"Start"),(r,{success:i})=>c3(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Aw=new WeakMap,rx=new WeakMap,_W=t=>{const e=Aw.get(t.target);e&&e(t)},AW=t=>{t.forEach(_W)};function NW({root:t,...e}){const n=t||document;rx.has(n)||rx.set(n,{});const r=rx.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(AW,{root:t,...e})),r[i]}function TW(t,e,n){const r=NW(e);return Aw.set(t,n),r.observe(t),()=>{Aw.delete(t),r.unobserve(t)}}const EW={some:0,all:1};class PW extends Dl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:EW[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return TW(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MW(e,n))&&this.startObserver()}unmount(){}}function MW({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jW={inView:{Feature:PW},tap:{Feature:CW},focus:{Feature:kW},hover:{Feature:SW}},LW={layout:{ProjectionNode:U6,MeasureLayout:I6}},Nw={current:null},q6={current:!1};function OW(){if(q6.current=!0,!!lk)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Nw.current=t.matches;t.addListener(e),e()}else Nw.current=!1}const IW=[...m6,Fr,Al],RW=t=>IW.find(p6(t)),u3=new WeakMap;function DW(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Vr(i))t.addValue(r,i);else if(Vr(s))t.addValue(r,kp(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,kp(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const d3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FW{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ik,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=xo.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ln.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Iv(n),this.isVariantNode=kL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&Vr(p)&&p.set(l[f],!1)}}mount(e){this.current=e,u3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),q6.current||OW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Nw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){u3.delete(this.current),this.projection&&this.projection.unmount(),_l(this.notifyUpdate),_l(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ru.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ln.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qd){const n=qd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<d3.length;r++){const i=d3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=DW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=kp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(h6(i)||r6(i))?i=parseFloat(i):!RW(i)&&Al.test(n)&&(i=c6(e,n)),this.setBaseTarget(e,Vr(i)?i.get():i)),Vr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=mk(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ek),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class W6 extends FW{constructor(){super(...arguments),this.KeyframeResolver=g6}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function BW(t){return window.getComputedStyle(t)}class zW extends W6{constructor(){super(...arguments),this.type="html",this.renderInstance=jL}readValueFromInstance(e,n){if(ru.has(n)){const r=Ok(n);return r&&r.default||0}else{const r=BW(e),i=(EL(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return L6(e,n)}build(e,n,r){vk(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Sk(e,n,r)}}class $W extends W6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ru.has(n)){const r=Ok(n);return r&&r.default||0}return n=LL.has(n)?n:hk(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return RL(e,n,r)}build(e,n,r){bk(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){OL(e,n,r,i)}mount(e){this.isSVGTag=wk(e.tagName),super.mount(e)}}const VW=(t,e)=>pk(t)?new $W(e):new zW(e,{allowProjection:t!==B.Fragment}),UW=pV({...hq,...jW,...wW,...LW},VW),Gt=E9(UW);var Bk={};(function t(e,n,r,i){var s=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!e.OffscreenCanvas)return!1;var V=new OffscreenCanvas(1,1),K=V.getContext("2d");K.fillRect(0,0,1,1);var M=V.transferToImageBitmap();try{K.createPattern(M,"no-repeat")}catch{return!1}return!0}();function l(){}function c(V){var K=n.exports.Promise,M=K!==void 0?K:e.Promise;return typeof M=="function"?new M(V):(V(l,l),null)}var u=function(V,K){return{transform:function(M){if(V)return M;if(K.has(M))return K.get(M);var U=new OffscreenCanvas(M.width,M.height),G=U.getContext("2d");return G.drawImage(M,0,0),K.set(M,U),U},clear:function(){K.clear()}}}(a,new Map),d=function(){var V=Math.floor(16.666666666666668),K,M,U={},G=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(K=function(Z){var re=Math.random();return U[re]=requestAnimationFrame(function se(ce){G===ce||G+V-1<ce?(G=ce,delete U[re],Z()):U[re]=requestAnimationFrame(se)}),re},M=function(Z){U[Z]&&cancelAnimationFrame(U[Z])}):(K=function(Z){return setTimeout(Z,V)},M=function(Z){return clearTimeout(Z)}),{frame:K,cancel:M}}(),h=function(){var V,K,M={};function U(G){function Z(re,se){G.postMessage({options:re||{},callback:se})}G.init=function(se){var ce=se.transferControlToOffscreen();G.postMessage({canvas:ce},[ce])},G.fire=function(se,ce,he){if(K)return Z(se,null),K;var ke=Math.random().toString(36).slice(2);return K=c(function(be){function ye(ve){ve.data.callback===ke&&(delete M[ke],G.removeEventListener("message",ye),K=null,u.clear(),he(),be())}G.addEventListener("message",ye),Z(se,ke),M[ke]=ye.bind(null,{data:{callback:ke}})}),K},G.reset=function(){G.postMessage({reset:!0});for(var se in M)M[se](),delete M[se]}}return function(){if(V)return V;if(!r&&s){var G=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{V=new Worker(URL.createObjectURL(new Blob([G])))}catch(Z){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",Z),null}U(V)}return V}}(),f={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function p(V,K){return K?K(V):V}function y(V){return V!=null}function b(V,K,M){return p(V&&y(V[K])?V[K]:f[K],M)}function v(V){return V<0?0:Math.floor(V)}function x(V,K){return Math.floor(Math.random()*(K-V))+V}function S(V){return parseInt(V,16)}function _(V){return V.map(A)}function A(V){var K=String(V).replace(/[^0-9a-f]/gi,"");return K.length<6&&(K=K[0]+K[0]+K[1]+K[1]+K[2]+K[2]),{r:S(K.substring(0,2)),g:S(K.substring(2,4)),b:S(K.substring(4,6))}}function T(V){var K=b(V,"origin",Object);return K.x=b(K,"x",Number),K.y=b(K,"y",Number),K}function P(V){V.width=document.documentElement.clientWidth,V.height=document.documentElement.clientHeight}function E(V){var K=V.getBoundingClientRect();V.width=K.width,V.height=K.height}function z(V){var K=document.createElement("canvas");return K.style.position="fixed",K.style.top="0px",K.style.left="0px",K.style.pointerEvents="none",K.style.zIndex=V,K}function H(V,K,M,U,G,Z,re,se,ce){V.save(),V.translate(K,M),V.rotate(Z),V.scale(U,G),V.arc(0,0,1,re,se,ce),V.restore()}function j(V){var K=V.angle*(Math.PI/180),M=V.spread*(Math.PI/180);return{x:V.x,y:V.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:V.startVelocity*.5+Math.random()*V.startVelocity,angle2D:-K+(.5*M-Math.random()*M),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:V.color,shape:V.shape,tick:0,totalTicks:V.ticks,decay:V.decay,drift:V.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:V.gravity*3,ovalScalar:.6,scalar:V.scalar,flat:V.flat}}function I(V,K){K.x+=Math.cos(K.angle2D)*K.velocity+K.drift,K.y+=Math.sin(K.angle2D)*K.velocity+K.gravity,K.velocity*=K.decay,K.flat?(K.wobble=0,K.wobbleX=K.x+10*K.scalar,K.wobbleY=K.y+10*K.scalar,K.tiltSin=0,K.tiltCos=0,K.random=1):(K.wobble+=K.wobbleSpeed,K.wobbleX=K.x+10*K.scalar*Math.cos(K.wobble),K.wobbleY=K.y+10*K.scalar*Math.sin(K.wobble),K.tiltAngle+=.1,K.tiltSin=Math.sin(K.tiltAngle),K.tiltCos=Math.cos(K.tiltAngle),K.random=Math.random()+2);var M=K.tick++/K.totalTicks,U=K.x+K.random*K.tiltCos,G=K.y+K.random*K.tiltSin,Z=K.wobbleX+K.random*K.tiltCos,re=K.wobbleY+K.random*K.tiltSin;if(V.fillStyle="rgba("+K.color.r+", "+K.color.g+", "+K.color.b+", "+(1-M)+")",V.beginPath(),o&&K.shape.type==="path"&&typeof K.shape.path=="string"&&Array.isArray(K.shape.matrix))V.fill(ee(K.shape.path,K.shape.matrix,K.x,K.y,Math.abs(Z-U)*.1,Math.abs(re-G)*.1,Math.PI/10*K.wobble));else if(K.shape.type==="bitmap"){var se=Math.PI/10*K.wobble,ce=Math.abs(Z-U)*.1,he=Math.abs(re-G)*.1,ke=K.shape.bitmap.width*K.scalar,be=K.shape.bitmap.height*K.scalar,ye=new DOMMatrix([Math.cos(se)*ce,Math.sin(se)*ce,-Math.sin(se)*he,Math.cos(se)*he,K.x,K.y]);ye.multiplySelf(new DOMMatrix(K.shape.matrix));var ve=V.createPattern(u.transform(K.shape.bitmap),"no-repeat");ve.setTransform(ye),V.globalAlpha=1-M,V.fillStyle=ve,V.fillRect(K.x-ke/2,K.y-be/2,ke,be),V.globalAlpha=1}else if(K.shape==="circle")V.ellipse?V.ellipse(K.x,K.y,Math.abs(Z-U)*K.ovalScalar,Math.abs(re-G)*K.ovalScalar,Math.PI/10*K.wobble,0,2*Math.PI):H(V,K.x,K.y,Math.abs(Z-U)*K.ovalScalar,Math.abs(re-G)*K.ovalScalar,Math.PI/10*K.wobble,0,2*Math.PI);else if(K.shape==="star")for(var Se=Math.PI/2*3,fe=4*K.scalar,Q=8*K.scalar,Re=K.x,Ie=K.y,Te=5,Me=Math.PI/Te;Te--;)Re=K.x+Math.cos(Se)*Q,Ie=K.y+Math.sin(Se)*Q,V.lineTo(Re,Ie),Se+=Me,Re=K.x+Math.cos(Se)*fe,Ie=K.y+Math.sin(Se)*fe,V.lineTo(Re,Ie),Se+=Me;else V.moveTo(Math.floor(K.x),Math.floor(K.y)),V.lineTo(Math.floor(K.wobbleX),Math.floor(G)),V.lineTo(Math.floor(Z),Math.floor(re)),V.lineTo(Math.floor(U),Math.floor(K.wobbleY));return V.closePath(),V.fill(),K.tick<K.totalTicks}function q(V,K,M,U,G){var Z=K.slice(),re=V.getContext("2d"),se,ce,he=c(function(ke){function be(){se=ce=null,re.clearRect(0,0,U.width,U.height),u.clear(),G(),ke()}function ye(){r&&!(U.width===i.width&&U.height===i.height)&&(U.width=V.width=i.width,U.height=V.height=i.height),!U.width&&!U.height&&(M(V),U.width=V.width,U.height=V.height),re.clearRect(0,0,U.width,U.height),Z=Z.filter(function(ve){return I(re,ve)}),Z.length?se=d.frame(ye):be()}se=d.frame(ye),ce=be});return{addFettis:function(ke){return Z=Z.concat(ke),he},canvas:V,promise:he,reset:function(){se&&d.cancel(se),ce&&ce()}}}function F(V,K){var M=!V,U=!!b(K||{},"resize"),G=!1,Z=b(K,"disableForReducedMotion",Boolean),re=s&&!!b(K||{},"useWorker"),se=re?h():null,ce=M?P:E,he=V&&se?!!V.__confetti_initialized:!1,ke=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,be;function ye(Se,fe,Q){for(var Re=b(Se,"particleCount",v),Ie=b(Se,"angle",Number),Te=b(Se,"spread",Number),Me=b(Se,"startVelocity",Number),Oe=b(Se,"decay",Number),je=b(Se,"gravity",Number),Ve=b(Se,"drift",Number),Qe=b(Se,"colors",_),it=b(Se,"ticks",Number),pt=b(Se,"shapes"),St=b(Se,"scalar"),Ot=!!b(Se,"flat"),tt=T(Se),yt=Re,Be=[],Un=V.width*tt.x,At=V.height*tt.y;yt--;)Be.push(j({x:Un,y:At,angle:Ie,spread:Te,startVelocity:Me,color:Qe[yt%Qe.length],shape:pt[x(0,pt.length)],ticks:it,decay:Oe,gravity:je,drift:Ve,scalar:St,flat:Ot}));return be?be.addFettis(Be):(be=q(V,Be,ce,fe,Q),be.promise)}function ve(Se){var fe=Z||b(Se,"disableForReducedMotion",Boolean),Q=b(Se,"zIndex",Number);if(fe&&ke)return c(function(Me){Me()});M&&be?V=be.canvas:M&&!V&&(V=z(Q),document.body.appendChild(V)),U&&!he&&ce(V);var Re={width:V.width,height:V.height};se&&!he&&se.init(V),he=!0,se&&(V.__confetti_initialized=!0);function Ie(){if(se){var Me={getBoundingClientRect:function(){if(!M)return V.getBoundingClientRect()}};ce(Me),se.postMessage({resize:{width:Me.width,height:Me.height}});return}Re.width=Re.height=null}function Te(){be=null,U&&(G=!1,e.removeEventListener("resize",Ie)),M&&V&&(document.body.contains(V)&&document.body.removeChild(V),V=null,he=!1)}return U&&!G&&(G=!0,e.addEventListener("resize",Ie,!1)),se?se.fire(Se,Re,Te):ye(Se,Re,Te)}return ve.reset=function(){se&&se.reset(),be&&be.reset()},ve}var ne;function Y(){return ne||(ne=F(null,{useWorker:!0,resize:!0})),ne}function ee(V,K,M,U,G,Z,re){var se=new Path2D(V),ce=new Path2D;ce.addPath(se,new DOMMatrix(K));var he=new Path2D;return he.addPath(ce,new DOMMatrix([Math.cos(re)*G,Math.sin(re)*G,-Math.sin(re)*Z,Math.cos(re)*Z,M,U])),he}function X(V){if(!o)throw new Error("path confetti are not supported in this browser");var K,M;typeof V=="string"?K=V:(K=V.path,M=V.matrix);var U=new Path2D(K),G=document.createElement("canvas"),Z=G.getContext("2d");if(!M){for(var re=1e3,se=re,ce=re,he=0,ke=0,be,ye,ve=0;ve<re;ve+=2)for(var Se=0;Se<re;Se+=2)Z.isPointInPath(U,ve,Se,"nonzero")&&(se=Math.min(se,ve),ce=Math.min(ce,Se),he=Math.max(he,ve),ke=Math.max(ke,Se));be=he-se,ye=ke-ce;var fe=10,Q=Math.min(fe/be,fe/ye);M=[Q,0,0,Q,-Math.round(be/2+se)*Q,-Math.round(ye/2+ce)*Q]}return{type:"path",path:K,matrix:M}}function ie(V){var K,M=1,U="#000000",G='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof V=="string"?K=V:(K=V.text,M="scalar"in V?V.scalar:M,G="fontFamily"in V?V.fontFamily:G,U="color"in V?V.color:U);var Z=10*M,re=""+Z+"px "+G,se=new OffscreenCanvas(Z,Z),ce=se.getContext("2d");ce.font=re;var he=ce.measureText(K),ke=Math.ceil(he.actualBoundingBoxRight+he.actualBoundingBoxLeft),be=Math.ceil(he.actualBoundingBoxAscent+he.actualBoundingBoxDescent),ye=2,ve=he.actualBoundingBoxLeft+ye,Se=he.actualBoundingBoxAscent+ye;ke+=ye+ye,be+=ye+ye,se=new OffscreenCanvas(ke,be),ce=se.getContext("2d"),ce.font=re,ce.fillStyle=U,ce.fillText(K,ve,Se);var fe=1/M;return{type:"bitmap",bitmap:se.transferToImageBitmap(),matrix:[fe,0,0,fe,-ke*fe/2,-be*fe/2]}}n.exports=function(){return Y().apply(this,arguments)},n.exports.reset=function(){Y().reset()},n.exports.create=F,n.exports.shapeFromPath=X,n.exports.shapeFromText=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Bk,!1);const gl=Bk.exports;Bk.exports.create;const h3=["TIR Principles & Laws","Understanding TIR Phenomena","Real-World Applications","Analysis & Problem Solving"],qW=({userInputs:t,currentStrand:e,strandProgress:n,setCurrentStrand:r,earnedBadges:i,experimentTitle:s})=>{const o=B.useRef([0,0,0,0]),[a,l]=B.useState(0),[c,u]=B.useState(!1);B.useEffect(()=>{let x=!1;n.forEach((S,_)=>{const A=o.current[_]||0,T=S||0;T>A&&(x=!0,T>=8?gl({particleCount:200,spread:90,origin:{y:.6},colors:["#ffd700","#ffed4e","#fbbf24","#f59e0b"]}):T>=6?gl({particleCount:100,spread:70,origin:{y:.6},colors:["#9333ea","#a855f7","#c084fc"]}):T>=4&&gl({particleCount:50,spread:50,origin:{y:.6},colors:["#3b82f6","#60a5fa"]}))}),x&&(o.current=[...n],l(S=>S+1))},[n]);const d=x=>{const S=Math.min(Math.max(x||0,0),8);return Math.floor(S/8*100)},h=x=>x>=8?"from-yellow-400 to-yellow-500":x>=6?"from-green-400 to-green-500":x>=4?"from-blue-400 to-blue-500":x>=2?"from-purple-400 to-purple-500":"from-gray-300 to-gray-400",f=x=>{document.startViewTransition?document.startViewTransition(x):x()},p=n.reduce((x,S)=>x+(S||0),0),y=32,b=Math.round(p/y*100),v=()=>{u(!c)};return m.jsxs("div",{className:"progress-bar-section bg-white border border-gray-200 rounded-lg shadow-sm",children:[m.jsx("div",{className:"px-4 py-2 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{children:[m.jsx("h2",{className:"font-semibold text-sm text-purple-800",children:"Knowledge Progress"}),m.jsx("p",{className:"text-xs text-gray-500",children:s||"Critical Angles - Total Internal Reflection"})]})}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"text-xs text-gray-600",children:[p,"/",y]}),m.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-1.5",children:m.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-1.5 rounded-full transition-all duration-500",style:{width:`${b}%`}})}),m.jsxs("span",{className:"text-xs font-medium text-purple-700",children:[b,"%"]})]}),m.jsx("button",{onClick:v,className:"flex items-center gap-1 px-2 py-1 text-xs bg-white border border-purple-200 hover:border-purple-300 rounded-md transition-all hover:shadow-sm",title:c?"Switch to expanded view":"Switch to compact view",children:c?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),"Expand"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Compact"]})})]})]})}),c&&m.jsxs("div",{className:"px-4 py-2",children:[m.jsx("div",{className:"flex gap-2 items-center",children:h3.map((x,S)=>{const _=n[S]||0,A=d(_),T=e-1===S,P=_===8;return m.jsxs("div",{onClick:()=>f(()=>r(S+1)),className:"flex-1 cursor-pointer group",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:`text-xs font-medium transition-colors ${T?"text-purple-700":"text-gray-600"}`,children:["S",S+1,T&&m.jsx("span",{className:"ml-1 text-purple-500",children:"●"})]}),m.jsx("span",{className:`text-xs font-bold ${P?"text-yellow-600":_>=6?"text-green-600":_>=4?"text-blue-600":_>=2?"text-purple-600":"text-gray-400"}`,children:_})]}),m.jsx("div",{className:`bg-gray-200 h-1 w-full rounded-full overflow-hidden border ${T?"border-purple-300":"border-transparent"}`,children:m.jsx(Gt.div,{className:`bg-gradient-to-r ${h(_)} h-1 rounded-full`,initial:{width:0},animate:{width:`${A}%`},transition:{duration:.6,ease:"easeOut"}},`${a}-${S}-compact`)})]},S)})}),m.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-100",children:[m.jsx("div",{className:"flex gap-1",children:[{key:"principlePioneer",icon:"🔬",strand:1},{key:"conceptCrusader",icon:"🧠",strand:2},{key:"applicationAce",icon:"⚡",strand:3},{key:"analysisArchitect",icon:"📊",strand:4}].map(x=>{const S=i[x.key];return m.jsx("span",{className:`text-sm transition-all ${S?"grayscale-0 opacity-100":"grayscale opacity-40"}`,title:x.key,children:x.icon},x.key)})}),m.jsxs("span",{className:"text-xs text-gray-500",children:[Object.values(i).filter(Boolean).length,"/4 badges"]})]})]}),!c&&m.jsxs("div",{className:"p-3",children:[m.jsx("div",{className:"flex overflow-x-auto gap-3 pb-2 scrollbar-thin scrollbar-thumb-purple-300",children:h3.map((x,S)=>{const _=n[S]||0,A=d(_),T=e-1===S,P=_===8;return m.jsxs("div",{onClick:()=>f(()=>r(S+1)),className:`min-w-[220px] flex-shrink-0 cursor-pointer border rounded-lg p-3 transition-all transform hover:scale-[1.01] ${T?"bg-purple-50 border-purple-400 ring-1 ring-purple-200 shadow-sm":"bg-white border-gray-200 hover:border-purple-300"} ${P?"ring-1 ring-yellow-300 bg-yellow-50":""}`,children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"font-medium text-gray-800 text-xs leading-tight",children:x}),m.jsxs("p",{className:"text-xs text-gray-500",children:["Strand ",S+1]})]}),m.jsx("div",{className:"text-right ml-2",children:m.jsxs("div",{className:"text-sm font-bold text-purple-600",children:[_,"/8"]})})]}),m.jsx("div",{className:"mb-2",children:m.jsx("div",{className:"bg-gray-200 h-1.5 w-full rounded-full overflow-hidden",children:m.jsx(Gt.div,{className:`bg-gradient-to-r ${h(_)} h-1.5 rounded-full`,initial:{width:0},animate:{width:`${A}%`},transition:{duration:.8,ease:"easeOut"}},`${a}-${S}`)})}),m.jsxs("div",{className:"flex justify-between text-xs",children:[m.jsx("span",{className:`transition-colors ${_>=2?"text-purple-600 font-medium":"text-gray-400"}`,children:"Basic"}),m.jsx("span",{className:`transition-colors ${_>=4?"text-blue-600 font-medium":"text-gray-400"}`,children:"Good"}),m.jsx("span",{className:`transition-colors ${_>=6?"text-green-600 font-medium":"text-gray-400"}`,children:"Strong"}),m.jsx("span",{className:`transition-colors ${_>=8?"text-yellow-600 font-bold":"text-gray-400"}`,children:"Perfect"})]}),m.jsxs("div",{className:"mt-2 flex justify-center gap-1",children:[P&&m.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full font-medium",children:"🏆 Mastered"}),T&&m.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-medium",children:"📍 Current"})]})]},S)})}),m.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("h3",{className:"font-medium text-xs text-gray-700 flex items-center gap-1",children:"🎖️ Achievement Badges"}),m.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:[Object.values(i).filter(Boolean).length,"/4"]})]}),m.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:[{key:"principlePioneer",label:"Principle Pioneer",icon:"🔬",strand:1},{key:"conceptCrusader",label:"Concept Crusader",icon:"🧠",strand:2},{key:"applicationAce",label:"Application Ace",icon:"⚡",strand:3},{key:"analysisArchitect",label:"Analysis Architect",icon:"📊",strand:4}].map(x=>{const S=i[x.key],_=n[x.strand-1]||0,A=_>=6&&!S;return m.jsxs("div",{className:`flex-shrink-0 flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs transition-all ${S?"bg-purple-50 border-purple-300 text-purple-800":A?"bg-yellow-50 border-yellow-300 text-yellow-700":"bg-gray-50 border-gray-200 text-gray-500"}`,children:[m.jsx("span",{className:"text-sm",children:x.icon}),m.jsx("span",{className:"font-medium whitespace-nowrap",children:x.label}),S?m.jsx("span",{className:"text-green-600 font-bold",children:"✅"}):A?m.jsx("span",{className:"text-yellow-600",children:"🔥"}):m.jsxs("span",{className:"text-gray-400",children:[_,"/8"]})]},x.key)})})]})]}),!1]})},H6=B.createContext(null),WW=({children:t})=>{const[e,n]=B.useState({strand1:{level2:"",level4:"",level6:"",level8:""},strand2:{level2:"",level4:"",level6:"",level8:""},strand3:{level2:"",level4:"",level6:"",level8:""},strand4:{level2:"",level4:"",level6:"",level8:""}}),[r,i]=B.useState([0,0,0,0]),[s,o]=B.useState(0),[a,l]=B.useState(["in progress","not started","not started","not started"]),[c,u]=B.useState({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1});return m.jsx(H6.Provider,{value:{userInputs:e,setUserInputs:n,strandProgress:r,setStrandProgress:i,points:s,setPoints:o,strandStatus:a,setStrandStatus:l,earnedBadges:c,setEarnedBadges:u},children:t})},lm=()=>{const t=B.useContext(H6);if(!t)throw new Error("useStrandContext must be used within a StrandProvider");return t},HW={"critical-angle":{strand1:[{id:"ca-s1-l2-1",type:"mcq",level:2,commandTerm:"define",question:"Define total internal reflection.",options:["When light bounces off a surface","When light completely reflects at a boundary between two media","When light bends as it passes through materials","When light splits into different colors"],correctAnswer:"When light completely reflects at a boundary between two media",explanation:"Total internal reflection occurs when light traveling from a denser to less dense medium is completely reflected at the boundary.",keywords:["total internal reflection","reflect","boundary","media"],rubricMapping:["States basic scientific facts","Uses simple scientific vocabulary"]},{id:"ca-s1-l2-2",type:"fill-blank",level:2,commandTerm:"state",question:"Complete: The _______ angle is the minimum angle of incidence for total internal reflection to occur.",options:[],correctAnswer:"critical",explanation:"The critical angle is the specific angle of incidence at which total internal reflection begins.",keywords:["critical angle","angle of incidence","minimum"],rubricMapping:["States basic scientific facts"]},{id:"ca-s1-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe the conditions required for total internal reflection to occur.",options:[],correctAnswer:"Light must travel from a denser medium (higher refractive index) to a less dense medium (lower refractive index), and the angle of incidence must be greater than the critical angle.",explanation:"TIR requires specific conditions: direction from dense to less dense medium and incident angle exceeding critical angle.",keywords:["dense medium","less dense medium","refractive index","angle of incidence","critical angle"],rubricMapping:["Describes scientific concepts clearly","Uses appropriate scientific terminology"]},{id:"ca-s1-l4-2",type:"mcq",level:4,commandTerm:"identify",question:"Identify which equation correctly represents the critical angle formula.",options:["sin(θc) = n₁/n₂","sin(θc) = n₂/n₁","cos(θc) = n₂/n₁","tan(θc) = n₁/n₂"],correctAnswer:"sin(θc) = n₂/n₁",explanation:"The critical angle formula is sin(θc) = n₂/n₁ where n₁ is the denser medium and n₂ is the less dense medium.",keywords:["critical angle","formula","sine","refractive index"],rubricMapping:["Shows understanding of relationships between concepts"]},{id:"ca-s1-l6-1",type:"calculation",level:6,commandTerm:"calculate",question:"Calculate the critical angle for light traveling from glass (n = 1.5) to air (n = 1.0). Show your work.",options:[],correctAnswer:"θc = arcsin(1.0/1.5) = arcsin(0.667) = 41.8°",explanation:"Using sin(θc) = n₂/n₁ = 1.0/1.5 = 0.667, therefore θc = arcsin(0.667) = 41.8°",keywords:["calculate","critical angle","glass","air","refractive index","arcsin"],rubricMapping:["Applies knowledge to solve problems","Demonstrates comprehensive understanding"]},{id:"ca-s1-l6-2",type:"short-answer",level:6,commandTerm:"explain",question:"Explain why total internal reflection only occurs when light travels from a denser to less dense medium.",options:[],correctAnswer:"When light travels from dense to less dense medium, it bends away from the normal. At the critical angle, the refracted ray grazes the surface (90° to normal). Beyond this angle, no refraction is possible, so all light is reflected. In the opposite direction (less dense to more dense), light bends toward the normal and can always be refracted.",explanation:"The physics of refraction and Snells law determine that TIR is only possible in one direction due to the bending behavior of light.",keywords:["dense medium","less dense medium","refraction","normal","snells law"],rubricMapping:["Explains scientific phenomena using theories","Comprehensive understanding of concepts"]},{id:"ca-s1-l8-1",type:"extended-response",level:8,commandTerm:"analyze",question:"Analyze how the critical angle would change if you increased the refractive index difference between two media. Discuss the implications for optical fiber design.",options:[],correctAnswer:"Increasing the refractive index difference (n₁ - n₂) decreases the critical angle because sin(θc) = n₂/n₁ becomes smaller. This means light can be trapped at smaller incident angles, making the fiber more efficient at capturing and guiding light. However, very high index differences can cause modal dispersion and signal distortion. Optimal fiber design balances light-gathering ability with signal quality, typically using step-index or graded-index profiles.",explanation:"This demonstrates sophisticated understanding of the relationship between material properties and optical performance.",keywords:["refractive index difference","critical angle","optical fiber","modal dispersion","signal quality"],rubricMapping:["Analyzes complex scenarios","Synthesizes knowledge from multiple sources","Sophisticated understanding"]}],strand2:[{id:"ca-s2-l2-1",type:"mcq",level:2,commandTerm:"identify",question:"Identify when total internal reflection occurs.",options:["When light hits any surface","When the incident angle is very small","When the incident angle exceeds the critical angle","When light travels through the same medium"],correctAnswer:"When the incident angle exceeds the critical angle",explanation:"TIR only occurs when the angle of incidence is greater than the critical angle.",keywords:["incident angle","critical angle","exceeds"],rubricMapping:["States basic scientific facts"]},{id:"ca-s2-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe what happens to light at the critical angle.",options:[],correctAnswer:"At the critical angle, the refracted ray travels along the boundary between the two media at 90° to the normal. This is the transition point between refraction and total internal reflection.",explanation:"The critical angle represents the boundary condition where the refracted ray just grazes the surface.",keywords:["critical angle","refracted ray","boundary","normal","90 degrees"],rubricMapping:["Describes scientific concepts clearly","Appropriate scientific terminology"]},{id:"ca-s2-l6-1",type:"diagram-analysis",level:6,commandTerm:"explain",question:"Explain why light rays with incident angles less than the critical angle undergo both reflection and refraction, while rays above the critical angle only reflect.",options:[],correctAnswer:"Below the critical angle, Snells law can be satisfied (n₁sin(θ₁) = n₂sin(θ₂)) because sin(θ₂) < 1. Some light energy is transmitted (refracted) and some is reflected. Above the critical angle, Snells law would require sin(θ₂) > 1, which is mathematically impossible. Therefore, no light can be transmitted and all energy is reflected.",explanation:"This demonstrates understanding of the mathematical constraints that govern optical phenomena.",keywords:["snells law","reflection","refraction","mathematical constraint","energy"],rubricMapping:["Explains scientific phenomena using theories","Applies knowledge to solve problems"]},{id:"ca-s2-l8-1",type:"extended-response",level:8,commandTerm:"evaluate",question:"Evaluate the factors that affect the critical angle and discuss how these principles are applied in the design of optical devices.",options:[],correctAnswer:"The critical angle depends solely on the refractive indices of the two media (θc = arcsin(n₂/n₁)). Key factors include: 1) Material selection - higher index contrast creates smaller critical angles and better light confinement, 2) Wavelength dependence - dispersion causes different colors to have slightly different critical angles, 3) Temperature effects - refractive indices change with temperature, affecting critical angles. These principles are applied in: optical fibers (core-cladding index difference), prisms (precise angle cutting for total reflection), LED design (light extraction efficiency), and waveguides (mode confinement). Successful optical device design requires balancing these factors against cost, manufacturing constraints, and performance requirements.",explanation:"This demonstrates comprehensive analysis of multiple interrelated factors and their practical applications.",keywords:["refractive indices","material selection","wavelength dependence","temperature effects","optical devices"],rubricMapping:["Analyzes complex scenarios","Evaluates theories critically","Synthesizes knowledge","Sophisticated understanding"]}],strand3:[{id:"ca-s3-l2-1",type:"mcq",level:2,commandTerm:"list",question:"List which of these uses total internal reflection.",options:["Mirrors","Glass windows","Optical fibers","Camera lenses"],correctAnswer:"Optical fibers",explanation:"Optical fibers rely on total internal reflection to guide light through the fiber core.",keywords:["optical fibers","total internal reflection"],rubricMapping:["States basic scientific facts"]},{id:"ca-s3-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe how diamonds use total internal reflection to create brilliance.",options:[],correctAnswer:"Diamonds have a very high refractive index (2.42), which creates a small critical angle. Light entering the diamond undergoes multiple total internal reflections, bouncing around inside before exiting. This traps light and creates the sparkling brilliance diamonds are known for.",explanation:"High refractive index materials can trap light effectively through multiple internal reflections.",keywords:["diamond","high refractive index","2.42","critical angle","brilliance","sparkling"],rubricMapping:["Describes benefits in applications","Uses appropriate terminology"]},{id:"ca-s3-l6-1",type:"short-answer",level:6,commandTerm:"explain",question:"Explain how fiber optic internet cables use total internal reflection to transmit data over long distances.",options:[],correctAnswer:"Fiber optic cables consist of a high refractive index glass core surrounded by lower index cladding. Light signals representing digital data are injected into the core at angles exceeding the critical angle. The light undergoes total internal reflection at the core-cladding boundary, bouncing down the length of the fiber with minimal loss. This allows data transmission over kilometers without significant signal degradation, enabling high-speed internet connectivity.",explanation:"This shows understanding of how TIR principles enable practical technology applications.",keywords:["fiber optic cables","core","cladding","refractive index","digital data","signal transmission"],rubricMapping:["Explains physics behind applications","Comprehensive understanding"]},{id:"ca-s3-l8-1",type:"extended-response",level:8,commandTerm:"analyze",question:"Analyze the advantages and limitations of using total internal reflection in medical endoscopy compared to traditional imaging methods.",options:[],correctAnswer:"TIR-based endoscopy offers several advantages: 1) Flexibility - fiber bundles can bend around corners while maintaining image quality, 2) Minimal invasiveness - thin fibers require smaller incisions, 3) Light efficiency - TIR preserves light intensity for better illumination, 4) Multi-functionality - separate fibers can carry light in and images out. Limitations include: 1) Resolution constraints - fiber diameter limits pixel count, 2) Coherent bundle requirements - fibers must maintain spatial relationships, 3) Fragility - glass fibers can break with excessive bending, 4) Cost - precision manufacturing is expensive. Compared to traditional methods like X-rays or external cameras, endoscopy provides real-time internal visualization but with trade-offs in image resolution and equipment complexity. Recent developments in gradient-index fibers and digital processing are addressing some limitations.",explanation:"This demonstrates sophisticated analysis of technological applications with critical evaluation of trade-offs.",keywords:["endoscopy","fiber bundles","flexibility","resolution","coherent bundle","gradient-index"],rubricMapping:["Analyzes multiple applications","Evaluates effectiveness and limitations","Critical evaluation"]}],strand4:[{id:"ca-s4-l2-1",type:"calculation",level:2,commandTerm:"calculate",question:"Calculate the critical angle when n₁ = 1.4 and n₂ = 1.0 (given: sin⁻¹(0.714) = 45.6°)",options:[],correctAnswer:"45.6°",explanation:"Using the given inverse sine value, θc = sin⁻¹(n₂/n₁) = sin⁻¹(1.0/1.4) = sin⁻¹(0.714) = 45.6°",keywords:["critical angle","calculate","inverse sine"],rubricMapping:["Performs simple calculations with given formulas"]},{id:"ca-s4-l4-1",type:"calculation",level:4,commandTerm:"determine",question:"Determine the refractive index of glass if the critical angle for glass-air interface is 42°.",options:[],correctAnswer:"n = 1.49",explanation:"Using sin(θc) = n₂/n₁, we have sin(42°) = 1.0/n₁, so n₁ = 1.0/sin(42°) = 1.0/0.669 = 1.49",keywords:["refractive index","determine","glass-air interface"],rubricMapping:["Solves basic TIR problems","Uses appropriate equations"]},{id:"ca-s4-l6-1",type:"calculation",level:6,commandTerm:"analyze",question:"Analyze this scenario: Light travels from water (n=1.33) to glass (n=1.5) at 45°. Will total internal reflection occur? Show calculations and explain.",options:[],correctAnswer:"No, TIR will not occur. TIR requires light to travel from higher to lower refractive index (n₁ > n₂). Here, light travels from water (n=1.33) to glass (n=1.5), so n₁ < n₂. The light will refract toward the normal according to Snells law: n₁sin(θ₁) = n₂sin(θ₂), so 1.33×sin(45°) = 1.5×sin(θ₂), giving θ₂ = 38.9°.",explanation:"This demonstrates understanding that TIR direction matters and ability to apply Snells law when TIR does not occur.",keywords:["water","glass","refractive index","snells law","refraction"],rubricMapping:["Analyzes complex scenarios","Calculates multiple variables"]},{id:"ca-s4-l8-1",type:"extended-response",level:8,commandTerm:"evaluate",question:"Evaluate an experimental design to measure the critical angle of an unknown liquid. Include sources of error and suggest improvements.",options:[],correctAnswer:"Experimental setup: Place liquid in semicircular container, use laser pointer to direct light from liquid to air at various angles, measure incident angles where TIR begins. Sources of error: 1) Angle measurement precision - use digital protractor, 2) Surface quality - ensure clean liquid-air interface, 3) Temperature effects - control temperature as refractive index varies with temperature, 4) Laser beam width - use narrow beam for precise angle definition, 5) Multiple reflections - use black absorbing surfaces. Improvements: 1) Automated angle adjustment with stepper motor, 2) Digital imaging to detect TIR onset, 3) Multiple measurements and statistical analysis, 4) Temperature monitoring and correction, 5) Use of different wavelengths to study dispersion. Expected accuracy: ±0.5° with careful technique, allowing refractive index determination to ±0.01.",explanation:"This demonstrates sophisticated experimental design thinking and understanding of practical measurement challenges.",keywords:["experimental design","measurement precision","sources of error","improvements","accuracy"],rubricMapping:["Evaluates experimental designs","Synthesizes solutions to novel problems"]}]},"fiber-optics":{strand1:[{id:"fo-s1-l2-1",type:"mcq",level:2,commandTerm:"identify",question:"Identify the main components of an optical fiber.",options:["Core and coating","Core and cladding","Wire and insulation","Glass and plastic"],correctAnswer:"Core and cladding",explanation:"Optical fibers consist of a high refractive index core surrounded by lower refractive index cladding.",keywords:["core","cladding","optical fiber"],rubricMapping:["States basic components"]},{id:"fo-s1-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe how light is kept inside the core of an optical fiber.",options:[],correctAnswer:"Light is trapped in the fiber core by total internal reflection. The core has a higher refractive index than the cladding, so light hitting the core-cladding boundary at angles greater than the critical angle undergoes total internal reflection and bounces along the fiber.",explanation:"This shows understanding of the basic principle behind optical fiber operation.",keywords:["trapped","total internal reflection","core","cladding","refractive index","critical angle"],rubricMapping:["Describes how light travels through fibers"]},{id:"fo-s1-l6-1",type:"calculation",level:6,commandTerm:"calculate",question:"Calculate the numerical aperture of a step-index fiber with core index n₁ = 1.48 and cladding index n₂ = 1.46.",options:[],correctAnswer:"NA = 0.242",explanation:"Numerical aperture NA = √(n₁² - n₂²) = √(1.48² - 1.46²) = √(2.1904 - 2.1316) = √0.0588 = 0.242",keywords:["numerical aperture","step-index fiber","core index","cladding index"],rubricMapping:["Applies knowledge to solve problems","Uses fiber optic equations"]},{id:"fo-s1-l8-1",type:"extended-response",level:8,commandTerm:"analyze",question:"Analyze the trade-offs between single-mode and multimode fibers for different applications.",options:[],correctAnswer:"Single-mode fibers have very small cores (~9μm) that support only one light propagation mode, eliminating modal dispersion and enabling high-bandwidth, long-distance transmission. They require expensive laser sources and precise alignment but offer superior performance for telecommunications. Multimode fibers have larger cores (50-100μm) supporting multiple light paths, making them easier to couple and cheaper to install, but modal dispersion limits bandwidth and distance. Step-index multimode fibers have higher dispersion than graded-index types. Applications: single-mode for long-haul telecommunications and high-speed data networks; multimode for short-distance applications like LANs, data centers, and building networks where cost and ease of installation outweigh bandwidth limitations.",explanation:"This demonstrates comprehensive understanding of fiber types and their optimal applications.",keywords:["single-mode","multimode","modal dispersion","bandwidth","telecommunications","applications"],rubricMapping:["Analyzes different fiber types","Evaluates trade-offs comprehensively"]}],strand2:[{id:"fo-s2-l2-1",type:"mcq",level:2,commandTerm:"identify",question:"Identify what converts electrical signals to light in fiber optic systems.",options:["Photodetector","Amplifier","LED or laser diode","Connector"],correctAnswer:"LED or laser diode",explanation:"LEDs and laser diodes are light sources that convert electrical signals into optical signals for transmission through fibers.",keywords:["LED","laser diode","electrical signals","optical signals"],rubricMapping:["Identifies components of fiber systems"]},{id:"fo-s2-l6-1",type:"short-answer",level:6,commandTerm:"explain",question:"Explain how wavelength division multiplexing increases fiber optic capacity.",options:[],correctAnswer:"WDM combines multiple optical signals at different wavelengths onto a single fiber, similar to how radio stations use different frequencies. Each wavelength can carry independent data streams. Dense WDM (DWDM) can multiplex 40-80 channels with 0.8nm spacing, dramatically increasing fiber capacity without laying new cables. Optical multiplexers combine signals at the transmitter, and demultiplexers separate them at the receiver.",explanation:"This demonstrates understanding of advanced fiber optic technologies and capacity enhancement methods.",keywords:["wavelength division multiplexing","optical signals","different wavelengths","DWDM","capacity"],rubricMapping:["Explains advanced fiber technologies","Demonstrates comprehensive understanding"]}],strand3:[{id:"fo-s3-l4-1",type:"short-answer",level:4,commandTerm:"describe",question:"Describe three major applications of fiber optic technology.",options:[],correctAnswer:"1) Telecommunications - high-speed internet and phone networks, 2) Medical applications - endoscopes for internal imaging and laser surgery delivery, 3) Industrial sensing - monitoring temperature, pressure, and structural health in harsh environments.",explanation:"Fiber optics have revolutionized multiple industries through their unique properties.",keywords:["telecommunications","medical applications","endoscopes","industrial sensing"],rubricMapping:["Describes benefits of fiber optics in applications"]},{id:"fo-s3-l8-1",type:"extended-response",level:8,commandTerm:"evaluate",question:"Evaluate the societal impact of fiber optic technology on global communications.",options:[],correctAnswer:"Fiber optics revolutionized global communications by enabling the modern internet era. Key impacts: 1) Economic transformation - enabled e-commerce, remote work, and digital economies, 2) Social connectivity - video calls, social media, and instant global communication, 3) Educational access - online learning and digital resources, 4) Healthcare - telemedicine and remote diagnostics, 5) Entertainment - streaming services and digital media. Undersea cables connect continents with terabit capacities. However, this created digital divides between fiber-connected and unconnected regions. Environmental concerns include energy consumption of data centers and electronic waste. Future implications include smart cities, IoT networks, and augmented reality applications requiring even higher bandwidths.",explanation:"This demonstrates sophisticated analysis of technology impact on society and future implications.",keywords:["societal impact","global communications","digital divide","undersea cables","smart cities"],rubricMapping:["Analyzes societal impact","Evaluates future potential"]}],strand4:[{id:"fo-s4-l6-1",type:"short-answer",level:6,commandTerm:"explain",question:"Explain the key design considerations for a fiber optic installation in a building.",options:[],correctAnswer:"Key considerations: 1) Bend radius - fibers must not be bent too tightly to avoid signal loss, 2) Environmental protection - temperature, humidity, and mechanical stress protection, 3) Connector types - match equipment requirements (SC, LC, ST), 4) Cable routing - avoid electrical interference and sharp edges, 5) Future expansion - install extra capacity for growth, 6) Testing procedures - verify installation meets specifications, 7) Documentation - maintain records for maintenance.",explanation:"This shows understanding of practical engineering considerations in fiber optic system design.",keywords:["bend radius","environmental protection","connector types","cable routing","testing"],rubricMapping:["Explains design considerations","Applies engineering principles"]}]}};var K6={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(K6);var KW=K6.exports;const ko=sS(KW);function bs(){return bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bs.apply(null,arguments)}function Je(t){"@babel/helpers - typeof";return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(t)}var GW=Symbol.for("react.element"),YW=Symbol.for("react.transitional.element"),XW=Symbol.for("react.fragment");function G6(t){return t&&Je(t)==="object"&&(t.$$typeof===GW||t.$$typeof===YW)&&t.type===XW}function jy(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return Ze.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(jy(r)):G6(r)&&r.props?n=n.concat(jy(r.props.children,e)):n.push(r))}),n}var Tw={},JW=function(e){};function QW(t,e){}function ZW(t,e){}function eH(){Tw={}}function Y6(t,e,n){!e&&!Tw[n]&&(t(!1,n),Tw[n]=!0)}function dh(t,e){Y6(QW,t,e)}function tH(t,e){Y6(ZW,t,e)}dh.preMessage=JW;dh.resetWarned=eH;dh.noteOnce=tH;function nH(t,e){if(Je(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Je(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X6(t){var e=nH(t,"string");return Je(e)=="symbol"?e:e+""}function Ge(t,e,n){return(e=X6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f3(Object(n),!0).forEach(function(r){Ge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p3(t){return t instanceof HTMLElement||t instanceof SVGElement}function rH(t){return t&&Je(t)==="object"&&p3(t.nativeElement)?t.nativeElement:p3(t)?t:null}function iH(t){var e=rH(t);if(e)return e;if(t instanceof Ze.Component){var n;return(n=Sy.findDOMNode)===null||n===void 0?void 0:n.call(Sy,t)}return null}var J6={exports:{}},Ut={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=Symbol.for("react.element"),$k=Symbol.for("react.portal"),Fv=Symbol.for("react.fragment"),Bv=Symbol.for("react.strict_mode"),zv=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),Vv=Symbol.for("react.context"),sH=Symbol.for("react.server_context"),Uv=Symbol.for("react.forward_ref"),qv=Symbol.for("react.suspense"),Wv=Symbol.for("react.suspense_list"),Hv=Symbol.for("react.memo"),Kv=Symbol.for("react.lazy"),oH=Symbol.for("react.offscreen"),Q6;Q6=Symbol.for("react.module.reference");function Ns(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case zk:switch(t=t.type,t){case Fv:case zv:case Bv:case qv:case Wv:return t;default:switch(t=t&&t.$$typeof,t){case sH:case Vv:case Uv:case Kv:case Hv:case $v:return t;default:return e}}case $k:return e}}}Ut.ContextConsumer=Vv;Ut.ContextProvider=$v;Ut.Element=zk;Ut.ForwardRef=Uv;Ut.Fragment=Fv;Ut.Lazy=Kv;Ut.Memo=Hv;Ut.Portal=$k;Ut.Profiler=zv;Ut.StrictMode=Bv;Ut.Suspense=qv;Ut.SuspenseList=Wv;Ut.isAsyncMode=function(){return!1};Ut.isConcurrentMode=function(){return!1};Ut.isContextConsumer=function(t){return Ns(t)===Vv};Ut.isContextProvider=function(t){return Ns(t)===$v};Ut.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===zk};Ut.isForwardRef=function(t){return Ns(t)===Uv};Ut.isFragment=function(t){return Ns(t)===Fv};Ut.isLazy=function(t){return Ns(t)===Kv};Ut.isMemo=function(t){return Ns(t)===Hv};Ut.isPortal=function(t){return Ns(t)===$k};Ut.isProfiler=function(t){return Ns(t)===zv};Ut.isStrictMode=function(t){return Ns(t)===Bv};Ut.isSuspense=function(t){return Ns(t)===qv};Ut.isSuspenseList=function(t){return Ns(t)===Wv};Ut.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Fv||t===zv||t===Bv||t===qv||t===Wv||t===oH||typeof t=="object"&&t!==null&&(t.$$typeof===Kv||t.$$typeof===Hv||t.$$typeof===$v||t.$$typeof===Vv||t.$$typeof===Uv||t.$$typeof===Q6||t.getModuleId!==void 0)};Ut.typeOf=Ns;J6.exports=Ut;var ix=J6.exports;function Z6(t,e,n){var r=B.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var aH=Number(B.version.split(".")[0]),lH=function(e,n){typeof e=="function"?e(n):Je(e)==="object"&&e&&"current"in e&&(e.current=n)},cH=function(e){var n,r;if(!e)return!1;if(eO(e)&&aH>=19)return!0;var i=ix.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==ix.ForwardRef||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==ix.ForwardRef)};function eO(t){return B.isValidElement(t)&&!G6(t)}var uH=function(e){if(e&&eO(e)){var n=e;return n.props.propertyIsEnumerable("ref")?n.props.ref:n.ref}return null};function fa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X6(r.key),r)}}function pa(t,e,n){return e&&m3(t.prototype,e),n&&m3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ew(t,e){return Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ew(t,e)}function Gv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ew(t,e)}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ly(t)}function tO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tO=function(){return!!t})()}function Ec(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dH(t,e){if(e&&(Je(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ec(t)}function Yv(t){var e=tO();return function(){var n,r=Ly(t);if(e){var i=Ly(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dH(this,n)}}function Pw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hH(t){if(Array.isArray(t))return Pw(t)}function nO(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vk(t,e){if(t){if(typeof t=="string")return Pw(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pw(t,e):void 0}}function fH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ma(t){return hH(t)||nO(t)||Vk(t)||fH()}var rO=function(e){return+setTimeout(e,16)},iO=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(rO=function(e){return window.requestAnimationFrame(e)},iO=function(e){return window.cancelAnimationFrame(e)});var g3=0,Uk=new Map;function sO(t){Uk.delete(t)}var Mw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;g3+=1;var r=g3;function i(s){if(s===0)sO(r),e();else{var o=rO(function(){i(s-1)});Uk.set(r,o)}}return i(n),r};Mw.cancel=function(t){var e=Uk.get(t);return sO(t),iO(e)};function oO(t){if(Array.isArray(t))return t}function pH(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function aO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(t,e){return oO(t)||pH(t,e)||Vk(t,e)||aO()}function Ap(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function ga(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function mH(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var y3="data-rc-order",v3="data-rc-priority",gH="rc-util-key",jw=new Map;function lO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):gH}function Xv(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function yH(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function qk(t){return Array.from((jw.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function cO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ga())return null;var n=e.csp,r=e.prepend,i=e.priority,s=i===void 0?0:i,o=yH(r),a=o==="prependQueue",l=document.createElement("style");l.setAttribute(y3,o),a&&s&&l.setAttribute(v3,"".concat(s)),n!=null&&n.nonce&&(l.nonce=n?.nonce),l.innerHTML=t;var c=Xv(e),u=c.firstChild;if(r){if(a){var d=(e.styles||qk(c)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(y3)))return!1;var f=Number(h.getAttribute(v3)||0);return s>=f});if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function uO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Xv(e);return(e.styles||qk(n)).find(function(r){return r.getAttribute(lO(e))===t})}function dO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=uO(t,e);if(n){var r=Xv(e);r.removeChild(n)}}function vH(t,e){var n=jw.get(t);if(!n||!mH(document,n)){var r=cO("",e),i=r.parentNode;jw.set(t,i),t.removeChild(r)}}function Pc(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Xv(n),i=qk(r),s=Ke(Ke({},n),{},{styles:i});vH(r,s);var o=uO(e,s);if(o){var a,l;if((a=s.csp)!==null&&a!==void 0&&a.nonce&&o.nonce!==((l=s.csp)===null||l===void 0?void 0:l.nonce)){var c;o.nonce=(c=s.csp)===null||c===void 0?void 0:c.nonce}return o.innerHTML!==t&&(o.innerHTML=t),o}var u=cO(t,s);return u.setAttribute(lO(s),e),u}function bH(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Wc(t,e){if(t==null)return{};var n,r,i=bH(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xH(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(s,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=r.has(s);if(dh(!l,"Warning: There may be circular references"),l)return!1;if(s===o)return!0;if(n&&a>1)return!1;r.add(s);var c=a+1;if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(var u=0;u<s.length;u++)if(!i(s[u],o[u],c))return!1;return!0}if(s&&o&&Je(s)==="object"&&Je(o)==="object"){var d=Object.keys(s);return d.length!==Object.keys(o).length?!1:d.every(function(h){return i(s[h],o[h],c)})}return!1}return i(t,e)}var wH="%";function Lw(t){return t.join(wH)}var SH=function(){function t(e){fa(this,t),Ge(this,"instanceId",void 0),Ge(this,"cache",new Map),this.instanceId=e}return pa(t,[{key:"get",value:function(n){return this.opGet(Lw(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(Lw(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),s=r(i);s===null?this.cache.delete(n):this.cache.set(n,s)}}]),t}(),Hd="data-token-hash",Ys="data-css-hash",Za="__cssinjs_instance__";function kH(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Ys,"]"))||[],n=document.head.firstChild;Array.from(e).forEach(function(i){i[Za]=i[Za]||t,i[Za]===t&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(Ys,"]"))).forEach(function(i){var s=i.getAttribute(Ys);if(r[s]){if(i[Za]===t){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}}else r[s]=!0})}return new SH(t)}var cm=B.createContext({hashPriority:"low",cache:kH(),defaultCache:!0});function CH(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var Wk=function(){function t(){fa(this,t),Ge(this,"cache",void 0),Ge(this,"keys",void 0),Ge(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return pa(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o={map:this.cache};return n.forEach(function(a){if(!o)o=void 0;else{var l;o=(l=o)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(a)}}),(r=o)!==null&&r!==void 0&&r.value&&s&&(o.value[1]=this.cacheCallTimes++),(i=o)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(c,u){var d=gt(c,2),h=d[1];return i.internalGet(u)[1]<h?[u,i.internalGet(u)[1]]:c},[this.keys[0],this.cacheCallTimes]),o=gt(s,1),a=o[0];this.delete(a)}this.keys.push(n)}var l=this.cache;n.forEach(function(c,u){if(u===n.length-1)l.set(c,{value:[r,i.cacheCallTimes++]});else{var d=l.get(c);d?d.map||(d.map=new Map):l.set(c,{map:new Map}),l=l.get(c).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var s;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(s=i.value)===null||s===void 0?void 0:s[0]}var o=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),o}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!CH(r,n)}),this.deleteByPath(this.cache,n)}}]),t}();Ge(Wk,"MAX_CACHE_SIZE",20);Ge(Wk,"MAX_CACHE_OFFSET",5);var b3=0,hO=function(){function t(e){fa(this,t),Ge(this,"derivatives",void 0),Ge(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=b3,e.length===0&&(e.length>0,void 0),b3+=1}return pa(t,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),t}(),sx=new Wk;function Ow(t){var e=Array.isArray(t)?t:[t];return sx.has(e)||sx.set(e,new hO(e)),sx.get(e)}var _H=new WeakMap,ox={};function AH(t,e){for(var n=_H,r=0;r<e.length;r+=1){var i=e[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(ox)||n.set(ox,t()),n.get(ox)}var x3=new WeakMap;function Wf(t){var e=x3.get(t)||"";return e||(Object.keys(t).forEach(function(n){var r=t[n];e+=n,r instanceof hO?e+=r.id:r&&Je(r)==="object"?e+=Wf(r):e+=r}),e=Ap(e),x3.set(t,e)),e}function w3(t,e){return Ap("".concat(e,"_").concat(Wf(t)))}var Iw=ga();function vi(t){return typeof t=="number"?"".concat(t,"px"):t}function Oy(t,e,n){var r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s)return t;var o=Ke(Ke({},i),{},(r={},Ge(r,Hd,e),Ge(r,Ys,n),r)),a=Object.keys(o).map(function(l){var c=o[l];return c?"".concat(l,'="').concat(c,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(a,">").concat(t,"</style>")}var L0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},NH=function(e,n,r){return Object.keys(e).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(e).map(function(i){var s=gt(i,2),o=s[0],a=s[1];return"".concat(o,":").concat(a,";")}).join(""),"}"):""},fO=function(e,n,r){var i={},s={};return Object.entries(e).forEach(function(o){var a,l,c=gt(o,2),u=c[0],d=c[1];if(r!=null&&(a=r.preserve)!==null&&a!==void 0&&a[u])s[u]=d;else if((typeof d=="string"||typeof d=="number")&&!(r!=null&&(l=r.ignore)!==null&&l!==void 0&&l[u])){var h,f=L0(u,r?.prefix);i[f]=typeof d=="number"&&!(r!=null&&(h=r.unitless)!==null&&h!==void 0&&h[u])?"".concat(d,"px"):String(d),s[u]="var(".concat(f,")")}}),[s,NH(i,n,{scope:r?.scope})]},S3=ga()?B.useLayoutEffect:B.useEffect,pO=function(e,n){var r=B.useRef(!0);S3(function(){return e(r.current)},n),S3(function(){return r.current=!1,function(){r.current=!0}},[])},k3=function(e,n){pO(function(r){if(!r)return e()},n)},TH=Ke({},lv),C3=TH.useInsertionEffect,EH=function(e,n,r){B.useMemo(e,r),pO(function(){return n(!0)},r)},PH=C3?function(t,e,n){return C3(function(){return t(),e()},n)}:EH,MH=Ke({},lv),jH=MH.useInsertionEffect,LH=function(e){var n=[],r=!1;function i(s){r||n.push(s)}return B.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(s){return s()})}},e),i},OH=function(){return function(e){e()}},IH=typeof jH<"u"?LH:OH;function Hk(t,e,n,r,i){var s=B.useContext(cm),o=s.cache,a=[t].concat(ma(e)),l=Lw(a),c=IH([l]),u=function(p){o.opUpdate(l,function(y){var b=y||[void 0,void 0],v=gt(b,2),x=v[0],S=x===void 0?0:x,_=v[1],A=_,T=A||n(),P=[S,T];return p?p(P):P})};B.useMemo(function(){u()},[l]);var d=o.opGet(l),h=d[1];return PH(function(){i?.(h)},function(f){return u(function(p){var y=gt(p,2),b=y[0],v=y[1];return f&&b===0&&i?.(h),[b+1,v]}),function(){o.opUpdate(l,function(p){var y=p||[],b=gt(y,2),v=b[0],x=v===void 0?0:v,S=b[1],_=x-1;return _===0?(c(function(){(f||!o.opGet(l))&&r?.(S,!1)}),null):[x-1,S]})}},[l]),h}var RH={},DH="css",pc=new Map;function FH(t){pc.set(t,(pc.get(t)||0)+1)}function BH(t,e){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(Hd,'="').concat(t,'"]'));n.forEach(function(r){if(r[Za]===e){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var zH=0;function $H(t,e){pc.set(t,(pc.get(t)||0)-1);var n=Array.from(pc.keys()),r=n.filter(function(i){var s=pc.get(i)||0;return s<=0});n.length-r.length>zH&&r.forEach(function(i){BH(i,e),pc.delete(i)})}var VH=function(e,n,r,i){var s=r.getDerivativeToken(e),o=Ke(Ke({},s),n);return i&&(o=i(o)),o},mO="token";function UH(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=B.useContext(cm),i=r.cache.instanceId,s=r.container,o=n.salt,a=o===void 0?"":o,l=n.override,c=l===void 0?RH:l,u=n.formatToken,d=n.getComputedToken,h=n.cssVar,f=AH(function(){return Object.assign.apply(Object,[{}].concat(ma(e)))},e),p=Wf(f),y=Wf(c),b=h?Wf(h):"",v=Hk(mO,[a,t.id,p,y,b],function(){var x,S=d?d(f,c,t):VH(f,c,t,u),_=Ke({},S),A="";if(h){var T=fO(S,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),P=gt(T,2);S=P[0],A=P[1]}var E=w3(S,a);S._tokenKey=E,_._tokenKey=w3(_,a);var z=(x=h?.key)!==null&&x!==void 0?x:E;S._themeKey=z,FH(z);var H="".concat(DH,"-").concat(Ap(E));return S._hashId=H,[S,H,_,A,h?.key||""]},function(x){$H(x[0]._themeKey,i)},function(x){var S=gt(x,4),_=S[0],A=S[3];if(h&&A){var T=Pc(A,Ap("css-variables-".concat(_._themeKey)),{mark:Ys,prepend:"queue",attachTo:s,priority:-999});T[Za]=i,T.setAttribute(Hd,_._themeKey)}});return v}var qH=function(e,n,r){var i=gt(e,5),s=i[2],o=i[3],a=i[4],l=r||{},c=l.plain;if(!o)return null;var u=s._tokenKey,d=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},f=Oy(o,a,u,h,c);return[d,u,f]},WH={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gO="comm",yO="rule",vO="decl",HH="@import",KH="@namespace",GH="@keyframes",YH="@layer",bO=Math.abs,Kk=String.fromCharCode;function xO(t){return t.trim()}function O0(t,e,n){return t.replace(e,n)}function XH(t,e,n){return t.indexOf(e,n)}function Ad(t,e){return t.charCodeAt(e)|0}function Kd(t,e,n){return t.slice(e,n)}function fo(t){return t.length}function JH(t){return t.length}function Og(t,e){return e.push(t),t}var Jv=1,Gd=1,wO=0,As=0,Gn=0,hh="";function Gk(t,e,n,r,i,s,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Jv,column:Gd,length:o,return:"",siblings:a}}function QH(){return Gn}function ZH(){return Gn=As>0?Ad(hh,--As):0,Gd--,Gn===10&&(Gd=1,Jv--),Gn}function Xs(){return Gn=As<wO?Ad(hh,As++):0,Gd++,Gn===10&&(Gd=1,Jv++),Gn}function el(){return Ad(hh,As)}function I0(){return As}function Qv(t,e){return Kd(hh,t,e)}function Np(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eK(t){return Jv=Gd=1,wO=fo(hh=t),As=0,[]}function tK(t){return hh="",t}function ax(t){return xO(Qv(As-1,Rw(t===91?t+2:t===40?t+1:t)))}function nK(t){for(;(Gn=el())&&Gn<33;)Xs();return Np(t)>2||Np(Gn)>3?"":" "}function rK(t,e){for(;--e&&Xs()&&!(Gn<48||Gn>102||Gn>57&&Gn<65||Gn>70&&Gn<97););return Qv(t,I0()+(e<6&&el()==32&&Xs()==32))}function Rw(t){for(;Xs();)switch(Gn){case t:return As;case 34:case 39:t!==34&&t!==39&&Rw(Gn);break;case 40:t===41&&Rw(t);break;case 92:Xs();break}return As}function iK(t,e){for(;Xs()&&t+Gn!==47+10;)if(t+Gn===42+42&&el()===47)break;return"/*"+Qv(e,As-1)+"*"+Kk(t===47?t:Xs())}function sK(t){for(;!Np(el());)Xs();return Qv(t,As)}function oK(t){return tK(R0("",null,null,null,[""],t=eK(t),0,[0],t))}function R0(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,y=1,b=1,v=1,x=0,S="",_=i,A=s,T=r,P=S;b;)switch(p=x,x=Xs()){case 40:if(p!=108&&Ad(P,d-1)==58){XH(P+=O0(ax(x),"&","&\f"),"&\f",bO(c?a[c-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:P+=ax(x);break;case 9:case 10:case 13:case 32:P+=nK(p);break;case 92:P+=rK(I0()-1,7);continue;case 47:switch(el()){case 42:case 47:Og(aK(iK(Xs(),I0()),e,n,l),l),(Np(p||1)==5||Np(el()||1)==5)&&fo(P)&&Kd(P,-1,void 0)!==" "&&(P+=" ");break;default:P+="/"}break;case 123*y:a[c++]=fo(P)*v;case 125*y:case 59:case 0:switch(x){case 0:case 125:b=0;case 59+u:v==-1&&(P=O0(P,/\f/g,"")),f>0&&(fo(P)-d||y===0&&p===47)&&Og(f>32?A3(P+";",r,n,d-1,l):A3(O0(P," ","")+";",r,n,d-2,l),l);break;case 59:P+=";";default:if(Og(T=_3(P,e,n,c,u,i,a,S,_=[],A=[],d,s),s),x===123)if(u===0)R0(P,e,T,T,_,s,d,a,A);else{switch(h){case 99:if(Ad(P,3)===110)break;case 108:if(Ad(P,2)===97)break;default:u=0;case 100:case 109:case 115:}u?R0(t,T,T,r&&Og(_3(t,T,T,0,0,i,a,S,i,_=[],d,A),A),i,A,d,a,r?_:A):R0(P,T,T,T,[""],A,0,a,A)}}c=u=f=0,y=v=1,S=P="",d=o;break;case 58:d=1+fo(P),f=p;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&ZH()==125)continue}switch(P+=Kk(x),x*y){case 38:v=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(fo(P)-1)*v,v=1;break;case 64:el()===45&&(P+=ax(Xs())),h=el(),u=d=fo(S=P+=sK(I0())),x++;break;case 45:p===45&&fo(P)==2&&(y=0)}}return s}function _3(t,e,n,r,i,s,o,a,l,c,u,d){for(var h=i-1,f=i===0?s:[""],p=JH(f),y=0,b=0,v=0;y<r;++y)for(var x=0,S=Kd(t,h+1,h=bO(b=o[y])),_=t;x<p;++x)(_=xO(b>0?f[x]+" "+S:O0(S,/&\f/g,f[x])))&&(l[v++]=_);return Gk(t,e,n,i===0?yO:a,l,c,u,d)}function aK(t,e,n,r){return Gk(t,e,n,gO,Kk(QH()),Kd(t,2,-2),0,r)}function A3(t,e,n,r,i){return Gk(t,e,n,vO,Kd(t,0,r),Kd(t,r+1,-1),r,i)}function Dw(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function lK(t,e,n,r){switch(t.type){case YH:if(t.children.length)break;case HH:case KH:case vO:return t.return=t.return||t.value;case gO:return"";case GH:return t.return=t.value+"{"+Dw(t.children,r)+"}";case yO:if(!fo(t.value=t.props.join(",")))return""}return fo(n=Dw(t.children,r))?t.return=t.value+"{"+n+"}":""}var N3="data-ant-cssinjs-cache-path",SO="_FILE_STYLE__",Mc,kO=!0;function cK(){if(!Mc&&(Mc={},ga())){var t=document.createElement("div");t.className=N3,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(i){var s=i.split(":"),o=gt(s,2),a=o[0],l=o[1];Mc[a]=l});var n=document.querySelector("style[".concat(N3,"]"));if(n){var r;kO=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(t)}}function uK(t){return cK(),!!Mc[t]}function dK(t){var e=Mc[t],n=null;if(e&&ga())if(kO)n=SO;else{var r=document.querySelector("style[".concat(Ys,'="').concat(Mc[t],'"]'));r?n=r.innerHTML:delete Mc[t]}return[n,e]}var hK="_skip_check_",CO="_multi_value_";function D0(t){var e=Dw(oK(t),lK);return e.replace(/\{%%%\:[^;];}/g,";")}function fK(t){return Je(t)==="object"&&t&&(hK in t||CO in t)}function T3(t,e,n){if(!e)return t;var r=".".concat(e),i=n==="low"?":where(".concat(r,")"):r,s=t.split(",").map(function(o){var a,l=o.trim().split(/\s+/),c=l[0]||"",u=((a=c.match(/^\w+/))===null||a===void 0?void 0:a[0])||"";return c="".concat(u).concat(i).concat(c.slice(u.length)),[c].concat(ma(l.slice(1))).join(" ")});return s.join(",")}var pK=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,s=r.injectHash,o=r.parentSelectors,a=n.hashId,l=n.layer;n.path;var c=n.hashPriority,u=n.transformers,d=u===void 0?[]:u;n.linters;var h="",f={};function p(v){var x=v.getName(a);if(!f[x]){var S=t(v.style,n,{root:!1,parentSelectors:o}),_=gt(S,1),A=_[0];f[x]="@keyframes ".concat(v.getName(a)).concat(A)}}function y(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v.forEach(function(S){Array.isArray(S)?y(S,x):S&&x.push(S)}),x}var b=y(Array.isArray(e)?e:[e]);return b.forEach(function(v){var x=typeof v=="string"&&!i?{}:v;if(typeof x=="string")h+="".concat(x,`
`);else if(x._keyframe)p(x);else{var S=d.reduce(function(_,A){var T;return(A==null||(T=A.visit)===null||T===void 0?void 0:T.call(A,_))||_},x);Object.keys(S).forEach(function(_){var A=S[_];if(Je(A)==="object"&&A&&(_!=="animationName"||!A._keyframe)&&!fK(A)){var T=!1,P=_.trim(),E=!1;(i||s)&&a?P.startsWith("@")?T=!0:P==="&"?P=T3("",a,c):P=T3(_,a,c):i&&!a&&(P==="&"||P==="")&&(P="",E=!0);var z=t(A,n,{root:E,injectHash:T,parentSelectors:[].concat(ma(o),[P])}),H=gt(z,2),j=H[0],I=H[1];f=Ke(Ke({},f),I),h+="".concat(P).concat(j)}else{let ne=function(Y,ee){var X=Y.replace(/[A-Z]/g,function(V){return"-".concat(V.toLowerCase())}),ie=ee;!WH[Y]&&typeof ie=="number"&&ie!==0&&(ie="".concat(ie,"px")),Y==="animationName"&&ee!==null&&ee!==void 0&&ee._keyframe&&(p(ee),ie=ee.getName(a)),h+="".concat(X,":").concat(ie,";")};var q,F=(q=A?.value)!==null&&q!==void 0?q:A;Je(A)==="object"&&A!==null&&A!==void 0&&A[CO]&&Array.isArray(F)?F.forEach(function(Y){ne(_,Y)}):ne(_,F)}})}}),i?l&&(h&&(h="@layer ".concat(l.name," {").concat(h,"}")),l.dependencies&&(f["@layer ".concat(l.name)]=l.dependencies.map(function(v){return"@layer ".concat(v,", ").concat(l.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,f]};function _O(t,e){return Ap("".concat(t.join("%")).concat(e))}function mK(){return null}var AO="style";function Fw(t,e){var n=t.token,r=t.path,i=t.hashId,s=t.layer,o=t.nonce,a=t.clientOnly,l=t.order,c=l===void 0?0:l,u=B.useContext(cm),d=u.autoClear;u.mock;var h=u.defaultCache,f=u.hashPriority,p=u.container,y=u.ssrInline,b=u.transformers,v=u.linters,x=u.cache,S=u.layer,_=n._tokenKey,A=[_];S&&A.push("layer"),A.push.apply(A,ma(r));var T=Iw,P=Hk(AO,A,function(){var I=A.join("|");if(uK(I)){var q=dK(I),F=gt(q,2),ne=F[0],Y=F[1];if(ne)return[ne,_,Y,{},a,c]}var ee=e(),X=pK(ee,{hashId:i,hashPriority:f,layer:S?s:void 0,path:r.join("-"),transformers:b,linters:v}),ie=gt(X,2),V=ie[0],K=ie[1],M=D0(V),U=_O(A,M);return[M,_,U,K,a,c]},function(I,q){var F=gt(I,3),ne=F[2];(q||d)&&Iw&&dO(ne,{mark:Ys})},function(I){var q=gt(I,4),F=q[0];q[1];var ne=q[2],Y=q[3];if(T&&F!==SO){var ee={mark:Ys,prepend:S?!1:"queue",attachTo:p,priority:c},X=typeof o=="function"?o():o;X&&(ee.csp={nonce:X});var ie=[],V=[];Object.keys(Y).forEach(function(M){M.startsWith("@layer")?ie.push(M):V.push(M)}),ie.forEach(function(M){Pc(D0(Y[M]),"_layer-".concat(M),Ke(Ke({},ee),{},{prepend:!0}))});var K=Pc(F,ne,ee);K[Za]=x.instanceId,K.setAttribute(Hd,_),V.forEach(function(M){Pc(D0(Y[M]),"_effect-".concat(M),ee)})}}),E=gt(P,3),z=E[0],H=E[1],j=E[2];return function(I){var q;if(!y||T||!h)q=B.createElement(mK,null);else{var F;q=B.createElement("style",bs({},(F={},Ge(F,Hd,H),Ge(F,Ys,j),F),{dangerouslySetInnerHTML:{__html:z}}))}return B.createElement(B.Fragment,null,q,I)}}var gK=function(e,n,r){var i=gt(e,6),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=r||{},h=d.plain;if(c)return null;var f=s,p={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return f=Oy(s,o,a,p,h),l&&Object.keys(l).forEach(function(y){if(!n[y]){n[y]=!0;var b=D0(l[y]),v=Oy(b,o,"_effect-".concat(y),p,h);y.startsWith("@layer")?f=v+f:f+=v}}),[u,a,f]},NO="cssVar",yK=function(e,n){var r=e.key,i=e.prefix,s=e.unitless,o=e.ignore,a=e.token,l=e.scope,c=l===void 0?"":l,u=B.useContext(cm),d=u.cache.instanceId,h=u.container,f=a._tokenKey,p=[].concat(ma(e.path),[r,c,f]),y=Hk(NO,p,function(){var b=n(),v=fO(b,r,{prefix:i,unitless:s,ignore:o,scope:c}),x=gt(v,2),S=x[0],_=x[1],A=_O(p,_);return[S,_,A,r]},function(b){var v=gt(b,3),x=v[2];Iw&&dO(x,{mark:Ys})},function(b){var v=gt(b,3),x=v[1],S=v[2];if(x){var _=Pc(x,S,{mark:Ys,prepend:"queue",attachTo:h,priority:-999});_[Za]=d,_.setAttribute(Hd,r)}});return y},vK=function(e,n,r){var i=gt(e,4),s=i[1],o=i[2],a=i[3],l=r||{},c=l.plain;if(!s)return null;var u=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},h=Oy(s,a,o,d,c);return[u,o,h]},nf;nf={},Ge(nf,AO,gK),Ge(nf,mO,qH),Ge(nf,NO,vK);function Fu(t){return t.notSplit=!0,t}Fu(["borderTop","borderBottom"]),Fu(["borderTop"]),Fu(["borderBottom"]),Fu(["borderLeft","borderRight"]),Fu(["borderLeft"]),Fu(["borderRight"]);var bK=B.createContext({});const Yk=bK;function xK(t){return oO(t)||nO(t)||Vk(t)||aO()}function Bw(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}function TO(t,e,n,r){if(!e.length)return n;var i=xK(e),s=i[0],o=i.slice(1),a;return!t&&typeof s=="number"?a=[]:Array.isArray(t)?a=ma(t):a=Ke({},t),r&&n===void 0&&o.length===1?delete a[s][o[0]]:a[s]=TO(a[s],o,n,r),a}function lx(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&r&&n===void 0&&!Bw(t,e.slice(0,-1))?t:TO(t,e,n,r)}function wK(t){return Je(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function E3(t){return Array.isArray(t)?[]:{}}var SK=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function kK(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=E3(e[0]);return e.forEach(function(i){function s(o,a){var l=new Set(a),c=Bw(i,o),u=Array.isArray(c);if(u||wK(c)){if(!l.has(c)){l.add(c);var d=Bw(r,o);u?r=lx(r,o,[]):(!d||Je(d)!=="object")&&(r=lx(r,o,E3(c))),SK(c).forEach(function(h){s([].concat(ma(o),[h]),l)})}}else r=lx(r,o,c)}s([])}),r}const CK=B.createContext({}),_K=B.createContext(void 0);var AK={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},NK={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},TK=Ke(Ke({},NK),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const EK={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},EO=EK,PK={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},TK),timePickerLocale:Object.assign({},EO)},P3=PK,Fi="${label} is not a valid ${type}",MK={locale:"en",Pagination:AK,DatePicker:P3,TimePicker:EO,Calendar:P3,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Fi,method:Fi,array:Fi,object:Fi,number:Fi,date:Fi,boolean:Fi,integer:Fi,float:Fi,regexp:Fi,email:Fi,url:Fi,hex:Fi},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}},Zv=MK;Object.assign({},Zv.Modal);let F0=[];const M3=()=>F0.reduce((t,e)=>Object.assign(Object.assign({},t),e),Zv.Modal);function jK(t){if(t){const e=Object.assign({},t);return F0.push(e),M3(),()=>{F0=F0.filter(n=>n!==e),M3()}}Object.assign({},Zv.Modal)}const LK=B.createContext(void 0),PO=LK,OK="internalMark",IK=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;B.useEffect(()=>jK(e?.Modal),[e]);const i=B.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return B.createElement(PO.Provider,{value:i},n)},RK=IK,MO={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},DK=Object.assign(Object.assign({},MO),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Tp=DK,or=Math.round;function cx(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const j3=(t,e,n)=>n===0?t:t/100;function rf(t,e){const n=e||255;return t>n?n:t<0?0:t}class $n{constructor(e){Ge(this,"isValid",!0),Ge(this,"r",0),Ge(this,"g",0),Ge(this,"b",0),Ge(this,"a",1),Ge(this,"_h",void 0),Ge(this,"_s",void 0),Ge(this,"_l",void 0),Ge(this,"_v",void 0),Ge(this,"_max",void 0),Ge(this,"_min",void 0),Ge(this,"_brightness",void 0);function n(r){return r[0]in e&&r[1]in e&&r[2]in e}if(e)if(typeof e=="string"){let i=function(s){return r.startsWith(s)};const r=e.trim();/^#?[A-F\d]{3,8}$/i.test(r)?this.fromHexString(r):i("rgb")?this.fromRgbString(r):i("hsl")?this.fromHslString(r):(i("hsv")||i("hsb"))&&this.fromHsvString(r)}else if(e instanceof $n)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=rf(e.r),this.g=rf(e.g),this.b=rf(e.b),this.a=typeof e.a=="number"?rf(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(s){const o=s/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=or(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,s=a=>(r[a]-this[a])*i+this[a],o={r:or(s("r")),g:or(s("g")),b:or(s("b")),a:or(s("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=s=>or((this[s]*this.a+n[s]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=or(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=or(this.getSaturation()*100),r=or(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=rf(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,s){return parseInt(n[i]+n[s||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const h=or(r*255);this.r=h,this.g=h,this.b=h}let s=0,o=0,a=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(s=c,o=u):l>=1&&l<2?(s=u,o=c):l>=2&&l<3?(o=c,a=u):l>=3&&l<4?(o=u,a=c):l>=4&&l<5?(s=u,a=c):l>=5&&l<6&&(s=c,a=u);const d=r-c/2;this.r=or((s+d)*255),this.g=or((o+d)*255),this.b=or((a+d)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const s=or(r*255);if(this.r=s,this.g=s,this.b=s,n<=0)return;const o=e/60,a=Math.floor(o),l=o-a,c=or(r*(1-n)*255),u=or(r*(1-n*l)*255),d=or(r*(1-n*(1-l))*255);switch(a){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=cx(e,j3);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=cx(e,j3);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=cx(e,(r,i)=>i.includes("%")?or(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var Ig=2,L3=.16,FK=.05,BK=.05,zK=.15,jO=5,LO=4,$K=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function O3(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-Ig*e:Math.round(t.h)+Ig*e:r=n?Math.round(t.h)+Ig*e:Math.round(t.h)-Ig*e,r<0?r+=360:r>=360&&(r-=360),r}function I3(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-L3*e:e===LO?r=t.s+L3:r=t.s+FK*e,r>1&&(r=1),n&&e===jO&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function R3(t,e,n){var r;return n?r=t.v+BK*e:r=t.v-zK*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function Ep(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new $n(t),i=r.toHsv(),s=jO;s>0;s-=1){var o=new $n({h:O3(i,s,!0),s:I3(i,s,!0),v:R3(i,s,!0)});n.push(o)}n.push(r);for(var a=1;a<=LO;a+=1){var l=new $n({h:O3(i,a),s:I3(i,a),v:R3(i,a)});n.push(l)}return e.theme==="dark"?$K.map(function(c){var u=c.index,d=c.amount;return new $n(e.backgroundColor||"#141414").mix(n[u],d).toHexString()}):n.map(function(c){return c.toHexString()})}var ux={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},zw=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];zw.primary=zw[5];var $w=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];$w.primary=$w[5];var Vw=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Vw.primary=Vw[5];var Uw=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];Uw.primary=Uw[5];var qw=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];qw.primary=qw[5];var Ww=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Ww.primary=Ww[5];var Hw=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Hw.primary=Hw[5];var Kw=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Kw.primary=Kw[5];var Iy=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Iy.primary=Iy[5];var Gw=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Gw.primary=Gw[5];var Yw=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Yw.primary=Yw[5];var Xw=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];Xw.primary=Xw[5];var Jw=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Jw.primary=Jw[5];var dx={red:zw,volcano:$w,orange:Vw,gold:Uw,yellow:qw,lime:Ww,green:Hw,cyan:Kw,blue:Iy,geekblue:Gw,purple:Yw,magenta:Xw,grey:Jw};function VK(t,{generateColorPalettes:e,generateNeutralColorPalettes:n}){const{colorSuccess:r,colorWarning:i,colorError:s,colorInfo:o,colorPrimary:a,colorBgBase:l,colorTextBase:c}=t,u=e(a),d=e(r),h=e(i),f=e(s),p=e(o),y=n(l,c),b=t.colorLink||t.colorInfo,v=e(b),x=new $n(f[1]).mix(new $n(f[3]),50).toHexString();return Object.assign(Object.assign({},y),{colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:f[1],colorErrorBgHover:f[2],colorErrorBgFilledHover:x,colorErrorBgActive:f[3],colorErrorBorder:f[3],colorErrorBorderHover:f[4],colorErrorHover:f[5],colorError:f[6],colorErrorActive:f[7],colorErrorTextHover:f[8],colorErrorText:f[9],colorErrorTextActive:f[10],colorWarningBg:h[1],colorWarningBgHover:h[2],colorWarningBorder:h[3],colorWarningBorderHover:h[4],colorWarningHover:h[4],colorWarning:h[6],colorWarningActive:h[7],colorWarningTextHover:h[8],colorWarningText:h[9],colorWarningTextActive:h[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:v[4],colorLink:v[6],colorLinkActive:v[7],colorBgMask:new $n("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const UK=t=>{let e=t,n=t,r=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:i}},qK=UK;function WK(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+e*2).toFixed(1)}s`,motionDurationSlow:`${(n+e*3).toFixed(1)}s`,lineWidthBold:i+1},qK(r))}const HK=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}},KK=HK;function GK(t){return(t+8)/t}function YK(t){const e=Array.from({length:10}).map((n,r)=>{const i=r-1,s=t*Math.pow(Math.E,i/5),o=r>1?Math.floor(s):Math.ceil(s);return Math.floor(o/2)*2});return e[1]=t,e.map(n=>({size:n,lineHeight:GK(n)}))}const XK=t=>{const e=YK(t),n=e.map(u=>u.size),r=e.map(u=>u.lineHeight),i=n[1],s=n[0],o=n[2],a=r[1],l=r[0],c=r[2];return{fontSizeSM:s,fontSize:i,fontSizeLG:o,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:a,lineHeightLG:c,lineHeightSM:l,fontHeight:Math.round(a*i),fontHeightLG:Math.round(c*o),fontHeightSM:Math.round(l*s),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}},JK=XK;function QK(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}const us=(t,e)=>new $n(t).setA(e).toRgbString(),sf=(t,e)=>new $n(t).darken(e).toHexString(),ZK=t=>{const e=Ep(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},eG=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:us(r,.88),colorTextSecondary:us(r,.65),colorTextTertiary:us(r,.45),colorTextQuaternary:us(r,.25),colorFill:us(r,.15),colorFillSecondary:us(r,.06),colorFillTertiary:us(r,.04),colorFillQuaternary:us(r,.02),colorBgSolid:us(r,1),colorBgSolidHover:us(r,.75),colorBgSolidActive:us(r,.95),colorBgLayout:sf(n,4),colorBgContainer:sf(n,0),colorBgElevated:sf(n,0),colorBgSpotlight:us(r,.85),colorBgBlur:"transparent",colorBorder:sf(n,15),colorBorderSecondary:sf(n,6)}};function tG(t){ux.pink=ux.magenta,dx.pink=dx.magenta;const e=Object.keys(MO).map(n=>{const r=t[n]===ux[n]?dx[n]:Ep(t[n]);return Array.from({length:10},()=>1).reduce((i,s,o)=>(i[`${n}-${o+1}`]=r[o],i[`${n}${o+1}`]=r[o],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),VK(t,{generateColorPalettes:ZK,generateNeutralColorPalettes:eG})),JK(t.fontSize)),QK(t)),KK(t)),WK(t))}const nG=Ow(tG),OO=nG,Qw={token:Tp,override:{override:Tp},hashed:!0},IO=Ze.createContext(Qw),Ry="ant",Xk="anticon",rG=(t,e)=>e||(t?`${Ry}-${t}`:Ry),Hc=B.createContext({getPrefixCls:rG,iconPrefixCls:Xk}),D3={};function iG(t){const e=B.useContext(Hc),{getPrefixCls:n,direction:r,getPopupContainer:i}=e,s=e[t];return Object.assign(Object.assign({classNames:D3,styles:D3},s),{getPrefixCls:n,direction:r,getPopupContainer:i})}const sG=`-ant-${Date.now()}-${Math.random()}`;function oG(t,e){const n={},r=(o,a)=>{let l=o.clone();return l=a?.(l)||l,l.toRgbString()},i=(o,a)=>{const l=new $n(o),c=Ep(l.toRgbString());n[`${a}-color`]=r(l),n[`${a}-color-disabled`]=c[1],n[`${a}-color-hover`]=c[4],n[`${a}-color-active`]=c[6],n[`${a}-color-outline`]=l.clone().setA(.2).toRgbString(),n[`${a}-color-deprecated-bg`]=c[0],n[`${a}-color-deprecated-border`]=c[2]};if(e.primaryColor){i(e.primaryColor,"primary");const o=new $n(e.primaryColor),a=Ep(o.toRgbString());a.forEach((c,u)=>{n[`primary-${u+1}`]=c}),n["primary-color-deprecated-l-35"]=r(o,c=>c.lighten(35)),n["primary-color-deprecated-l-20"]=r(o,c=>c.lighten(20)),n["primary-color-deprecated-t-20"]=r(o,c=>c.tint(20)),n["primary-color-deprecated-t-50"]=r(o,c=>c.tint(50)),n["primary-color-deprecated-f-12"]=r(o,c=>c.setA(c.a*.12));const l=new $n(a[0]);n["primary-color-active-deprecated-f-30"]=r(l,c=>c.setA(c.a*.3)),n["primary-color-active-deprecated-d-02"]=r(l,c=>c.darken(2))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(o=>`--${t}-${o}: ${n[o]};`).join(`
`)}
  }
  `.trim()}function aG(t,e){const n=oG(t,e);ga()&&Pc(n,`${sG}-dynamic-theme`)}const Zw=B.createContext(!1),lG=({children:t,disabled:e})=>{const n=B.useContext(Zw);return B.createElement(Zw.Provider,{value:e??n},t)},cG=Zw,e5=B.createContext(void 0),uG=({children:t,size:e})=>{const n=B.useContext(e5);return B.createElement(e5.Provider,{value:e||n},t)},e1=e5;function dG(){const t=B.useContext(cG),e=B.useContext(e1);return{componentDisabled:t,componentSize:e}}var RO=pa(function t(){fa(this,t)}),DO="CALC_UNIT",hG=new RegExp(DO,"g");function hx(t){return typeof t=="number"?"".concat(t).concat(DO):t}var fG=function(t){Gv(n,t);var e=Yv(n);function n(r,i){var s;fa(this,n),s=e.call(this),Ge(Ec(s),"result",""),Ge(Ec(s),"unitlessCssVar",void 0),Ge(Ec(s),"lowPriority",void 0);var o=Je(r);return s.unitlessCssVar=i,r instanceof n?s.result="(".concat(r.result,")"):o==="number"?s.result=hx(r):o==="string"&&(s.result=r),s}return pa(n,[{key:"add",value:function(i){return i instanceof n?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(hx(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof n?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(hx(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var s=this,o=i||{},a=o.unit,l=!0;return typeof a=="boolean"?l=a:Array.from(this.unitlessCssVar).some(function(c){return s.result.includes(c)})&&(l=!1),this.result=this.result.replace(hG,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(RO),pG=function(t){Gv(n,t);var e=Yv(n);function n(r){var i;return fa(this,n),i=e.call(this),Ge(Ec(i),"result",0),r instanceof n?i.result=r.result:typeof r=="number"&&(i.result=r),i}return pa(n,[{key:"add",value:function(i){return i instanceof n?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof n?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof n?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof n?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),n}(RO),mG=function(e,n){var r=e==="css"?fG:pG;return function(i){return new r(i,n)}},F3=function(e,n){return"".concat([n,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Pp(t){var e=B.useRef();e.current=t;var n=B.useCallback(function(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(s))},[]);return n}function Mp(t){var e=B.useRef(!1),n=B.useState(t),r=gt(n,2),i=r[0],s=r[1];B.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(a,l){l&&e.current||s(a)}return[i,o]}function fx(t){return t!==void 0}function gG(t,e){var n=e||{},r=n.defaultValue,i=n.value,s=n.onChange,o=n.postState,a=Mp(function(){return fx(i)?i:fx(r)?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=gt(a,2),c=l[0],u=l[1],d=i!==void 0?i:c,h=o?o(d):d,f=Pp(s),p=Mp([d]),y=gt(p,2),b=y[0],v=y[1];k3(function(){var S=b[0];c!==S&&f(c,S)},[b]),k3(function(){fx(i)||u(i)},[i]);var x=Pp(function(S,_){u(S,_),v([d],_)});return[h,x]}function B3(t,e,n,r){var i=Ke({},e[t]);if(r!=null&&r.deprecatedTokens){var s=r.deprecatedTokens;s.forEach(function(a){var l=gt(a,2),c=l[0],u=l[1];if(i!=null&&i[c]||i!=null&&i[u]){var d;(d=i[u])!==null&&d!==void 0||(i[u]=i?.[c])}})}var o=Ke(Ke({},n),i);return Object.keys(o).forEach(function(a){o[a]===e[a]&&delete o[a]}),o}var FO=typeof CSSINJS_STATISTIC<"u",t5=!0;function Jk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!FO)return Object.assign.apply(Object,[{}].concat(e));t5=!1;var r={};return e.forEach(function(i){if(Je(i)==="object"){var s=Object.keys(i);s.forEach(function(o){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return i[o]}})})}}),t5=!0,r}var z3={};function yG(){}var vG=function(e){var n,r=e,i=yG;return FO&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(e,{get:function(o,a){if(t5){var l;(l=n)===null||l===void 0||l.add(a)}return o[a]}}),i=function(o,a){var l;z3[o]={global:Array.from(n),component:Ke(Ke({},(l=z3[o])===null||l===void 0?void 0:l.component),a)}}),{token:r,keys:n,flush:i}};function $3(t,e,n){if(typeof n=="function"){var r;return n(Jk(e,(r=e[t])!==null&&r!==void 0?r:{}))}return n??{}}function bG(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"max(".concat(r.map(function(s){return vi(s)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"min(".concat(r.map(function(s){return vi(s)}).join(","),")")}}}var xG=1e3*60*10,wG=function(){function t(){fa(this,t),Ge(this,"map",new Map),Ge(this,"objectIDMap",new WeakMap),Ge(this,"nextID",0),Ge(this,"lastAccessBeat",new Map),Ge(this,"accessBeat",0)}return pa(t,[{key:"set",value:function(n,r){this.clear();var i=this.getCompositeKey(n);this.map.set(i,r),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),i=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(n){var r=this,i=n.map(function(s){return s&&Je(s)==="object"?"obj_".concat(r.getObjectID(s)):"".concat(Je(s),"_").concat(s)});return i.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(i,s){r-i>xG&&(n.map.delete(s),n.lastAccessBeat.delete(s))}),this.accessBeat=0}}}]),t}(),V3=new wG;function SG(t,e){return Ze.useMemo(function(){var n=V3.get(e);if(n)return n;var r=t();return V3.set(e,r),r},e)}var kG=function(){return{}};function CG(t){var e=t.useCSP,n=e===void 0?kG:e,r=t.useToken,i=t.usePrefix,s=t.getResetStyles,o=t.getCommonStyle,a=t.getCompUnitless;function l(h,f,p,y){var b=Array.isArray(h)?h[0]:h;function v(E){return"".concat(String(b)).concat(E.slice(0,1).toUpperCase()).concat(E.slice(1))}var x=y?.unitless||{},S=typeof a=="function"?a(h):{},_=Ke(Ke({},S),{},Ge({},v("zIndexPopup"),!0));Object.keys(x).forEach(function(E){_[v(E)]=x[E]});var A=Ke(Ke({},y),{},{unitless:_,prefixToken:v}),T=u(h,f,p,A),P=c(b,p,A);return function(E){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E,H=T(E,z),j=gt(H,2),I=j[1],q=P(z),F=gt(q,2),ne=F[0],Y=F[1];return[ne,I,Y]}}function c(h,f,p){var y=p.unitless,b=p.injectStyle,v=b===void 0?!0:b,x=p.prefixToken,S=p.ignore,_=function(P){var E=P.rootCls,z=P.cssVar,H=z===void 0?{}:z,j=r(),I=j.realToken;return yK({path:[h],prefix:H.prefix,key:H.key,unitless:y,ignore:S,token:I,scope:E},function(){var q=$3(h,I,f),F=B3(h,I,q,{deprecatedTokens:p?.deprecatedTokens});return Object.keys(q).forEach(function(ne){F[x(ne)]=F[ne],delete F[ne]}),F}),null},A=function(P){var E=r(),z=E.cssVar;return[function(H){return v&&z?Ze.createElement(Ze.Fragment,null,Ze.createElement(_,{rootCls:P,cssVar:z,component:h}),H):H},z?.key]};return A}function u(h,f,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=Array.isArray(h)?h:[h,h],v=gt(b,1),x=v[0],S=b.join("-"),_=t.layer||{name:"antd"};return function(A){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A,P=r(),E=P.theme,z=P.realToken,H=P.hashId,j=P.token,I=P.cssVar,q=i(),F=q.rootPrefixCls,ne=q.iconPrefixCls,Y=n(),ee=I?"css":"js",X=SG(function(){var G=new Set;return I&&Object.keys(y.unitless||{}).forEach(function(Z){G.add(L0(Z,I.prefix)),G.add(L0(Z,F3(x,I.prefix)))}),mG(ee,G)},[ee,x,I?.prefix]),ie=bG(ee),V=ie.max,K=ie.min,M={theme:E,token:j,hashId:H,nonce:function(){return Y.nonce},clientOnly:y.clientOnly,layer:_,order:y.order||-999};typeof s=="function"&&Fw(Ke(Ke({},M),{},{clientOnly:!1,path:["Shared",F]}),function(){return s(j,{prefix:{rootPrefixCls:F,iconPrefixCls:ne},csp:Y})});var U=Fw(Ke(Ke({},M),{},{path:[S,A,ne]}),function(){if(y.injectStyle===!1)return[];var G=vG(j),Z=G.token,re=G.flush,se=$3(x,z,p),ce=".".concat(A),he=B3(x,z,se,{deprecatedTokens:y.deprecatedTokens});I&&se&&Je(se)==="object"&&Object.keys(se).forEach(function(ve){se[ve]="var(".concat(L0(ve,F3(x,I.prefix)),")")});var ke=Jk(Z,{componentCls:ce,prefixCls:A,iconCls:".".concat(ne),antCls:".".concat(F),calc:X,max:V,min:K},I?se:he),be=f(ke,{hashId:H,prefixCls:A,rootPrefixCls:F,iconPrefixCls:ne});re(x,he);var ye=typeof o=="function"?o(ke,A,T,y.resetFont):null;return[y.resetStyle===!1?null:ye,be]});return[U,H]}}function d(h,f,p){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=u(h,f,p,Ke({resetStyle:!1,order:-998},y)),v=function(S){var _=S.prefixCls,A=S.rootCls,T=A===void 0?_:A;return b(_,T),null};return v}return{genStyleHooks:l,genSubStyleComponent:d,genComponentStyleHook:u}}const _G="5.26.0";function px(t){return t>=0&&t<=255}function Rg(t,e){const{r:n,g:r,b:i,a:s}=new $n(t).toRgb();if(s<1)return t;const{r:o,g:a,b:l}=new $n(e).toRgb();for(let c=.01;c<=1;c+=.01){const u=Math.round((n-o*(1-c))/c),d=Math.round((r-a*(1-c))/c),h=Math.round((i-l*(1-c))/c);if(px(u)&&px(d)&&px(h))return new $n({r:u,g:d,b:h,a:Math.round(c*100)/100}).toRgbString()}return new $n({r:n,g:r,b:i,a:1}).toRgbString()}var AG=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function BO(t){const{override:e}=t,n=AG(t,["override"]),r=Object.assign({},e);Object.keys(Tp).forEach(h=>{delete r[h]});const i=Object.assign(Object.assign({},n),r),s=480,o=576,a=768,l=992,c=1200,u=1600;if(i.motion===!1){const h="0s";i.motionDurationFast=h,i.motionDurationMid=h,i.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Rg(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Rg(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Rg(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*3,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Rg(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:s,screenXSMin:s,screenXSMax:o-1,screenSM:o,screenSMMin:o,screenSMMax:a-1,screenMD:a,screenMDMin:a,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:c-1,screenXL:c,screenXLMin:c,screenXLMax:u-1,screenXXL:u,screenXXLMin:u,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new $n("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new $n("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new $n("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var U3=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const zO={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},NG={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},TG={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},$O=(t,e,n)=>{const r=n.getDerivativeToken(t),{override:i}=e,s=U3(e,["override"]);let o=Object.assign(Object.assign({},r),{override:i});return o=BO(o),s&&Object.entries(s).forEach(([a,l])=>{const{theme:c}=l,u=U3(l,["theme"]);let d=u;c&&(d=$O(Object.assign(Object.assign({},o),u),{override:u},c)),o[a]=d}),o};function Qk(){const{token:t,hashed:e,theme:n,override:r,cssVar:i}=Ze.useContext(IO),s=`${_G}-${e||""}`,o=n||OO,[a,l,c]=UH(o,[Tp,t],{salt:s,override:r,getComputedToken:$O,formatToken:BO,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:zO,ignore:NG,preserve:TG}});return[o,c,e?l:"",a,i]}const EG=(t,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}),VO=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),PG=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),MG=(t,e,n,r)=>{const i=`[class^="${e}"], [class*=" ${e}"]`,s=n?`.${n}`:i,o={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let a={};return r!==!1&&(a={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[s]:Object.assign(Object.assign(Object.assign({},a),o),{[i]:o})}},jG=(t,e)=>({outline:`${vi(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),LG=(t,e)=>({"&:focus-visible":Object.assign({},jG(t,e))}),UO=t=>({[`.${t}`]:Object.assign(Object.assign({},VO()),{[`.${t} .${t}-icon`]:{display:"block"}})}),{genStyleHooks:OG,genComponentStyleHook:vde,genSubStyleComponent:bde}=CG({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=B.useContext(Hc);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,r,i]=Qk();return{theme:t,realToken:e,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:t}=B.useContext(Hc);return t??{}},getResetStyles:(t,e)=>{var n;const r=PG(t);return[r,{"&":r},UO((n=e?.prefix.iconPrefixCls)!==null&&n!==void 0?n:Xk)]},getCommonStyle:MG,getCompUnitless:()=>zO}),IG=(t,e)=>{const[n,r]=Qk();return Fw({theme:n,token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>e?.nonce,layer:{name:"antd"}},()=>[UO(t)])},RG=IG,DG=Object.assign({},lv),{useId:q3}=DG,FG=()=>"",BG=typeof q3>"u"?FG:q3,zG=BG;function $G(t,e,n){var r;const i=t||{},s=i.inherit===!1||!e?Object.assign(Object.assign({},Qw),{hashed:(r=e?.hashed)!==null&&r!==void 0?r:Qw.hashed,cssVar:e?.cssVar}):e,o=zG();return Z6(()=>{var a,l;if(!t)return e;const c=Object.assign({},s.components);Object.keys(t.components||{}).forEach(h=>{c[h]=Object.assign(Object.assign({},c[h]),t.components[h])});const u=`css-var-${o.replace(/:/g,"")}`,d=((a=i.cssVar)!==null&&a!==void 0?a:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n?.prefixCls},typeof s.cssVar=="object"?s.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((l=i.cssVar)===null||l===void 0?void 0:l.key)||u});return Object.assign(Object.assign(Object.assign({},s),i),{token:Object.assign(Object.assign({},s.token),i.token),components:c,cssVar:d})},[i,s],(a,l)=>a.some((c,u)=>{const d=l[u];return!xH(c,d,!0)}))}var VG=["children"],qO=B.createContext({});function UG(t){var e=t.children,n=Wc(t,VG);return B.createElement(qO.Provider,{value:n},e)}var qG=function(t){Gv(n,t);var e=Yv(n);function n(){return fa(this,n),e.apply(this,arguments)}return pa(n,[{key:"render",value:function(){return this.props.children}}]),n}(B.Component);function WG(t){var e=B.useReducer(function(a){return a+1},0),n=gt(e,2),r=n[1],i=B.useRef(t),s=Pp(function(){return i.current}),o=Pp(function(a){i.current=typeof a=="function"?a(i.current):a,r()});return[s,o]}var Ba="none",Dg="appear",Fg="enter",Bg="leave",W3="none",Us="prepare",fd="start",pd="active",Zk="end",WO="prepared";function H3(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function HG(t,e){var n={animationend:H3("Animation","AnimationEnd"),transitionend:H3("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var KG=HG(ga(),typeof window<"u"?window:{}),HO={};if(ga()){var GG=document.createElement("div");HO=GG.style}var zg={};function KO(t){if(zg[t])return zg[t];var e=KG[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var s=n[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in HO)return zg[t]=e[s],zg[t]}return""}var GO=KO("animationend"),YO=KO("transitionend"),XO=!!(GO&&YO),K3=GO||"animationend",G3=YO||"transitionend";function Y3(t,e){if(!t)return null;if(Je(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const YG=function(t){var e=B.useRef();function n(i){i&&(i.removeEventListener(G3,t),i.removeEventListener(K3,t))}function r(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(G3,t),i.addEventListener(K3,t),e.current=i)}return B.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var JO=ga()?B.useLayoutEffect:B.useEffect;const XG=function(){var t=B.useRef(null);function e(){Mw.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Mw(function(){i<=1?r({isCanceled:function(){return s!==t.current}}):n(r,i-1)});t.current=s}return B.useEffect(function(){return function(){e()}},[]),[n,e]};var JG=[Us,fd,pd,Zk],QG=[Us,WO],QO=!1,ZG=!0;function ZO(t){return t===pd||t===Zk}const eY=function(t,e,n){var r=Mp(W3),i=gt(r,2),s=i[0],o=i[1],a=XG(),l=gt(a,2),c=l[0],u=l[1];function d(){o(Us,!0)}var h=e?QG:JG;return JO(function(){if(s!==W3&&s!==Zk){var f=h.indexOf(s),p=h[f+1],y=n(s);y===QO?o(p,!0):p&&c(function(b){function v(){b.isCanceled()||o(p,!0)}y===!0?v():Promise.resolve(y).then(v)})}},[t,s]),B.useEffect(function(){return function(){u()}},[]),[d,s]};function tY(t,e,n,r){var i=r.motionEnter,s=i===void 0?!0:i,o=r.motionAppear,a=o===void 0?!0:o,l=r.motionLeave,c=l===void 0?!0:l,u=r.motionDeadline,d=r.motionLeaveImmediately,h=r.onAppearPrepare,f=r.onEnterPrepare,p=r.onLeavePrepare,y=r.onAppearStart,b=r.onEnterStart,v=r.onLeaveStart,x=r.onAppearActive,S=r.onEnterActive,_=r.onLeaveActive,A=r.onAppearEnd,T=r.onEnterEnd,P=r.onLeaveEnd,E=r.onVisibleChanged,z=Mp(),H=gt(z,2),j=H[0],I=H[1],q=WG(Ba),F=gt(q,2),ne=F[0],Y=F[1],ee=Mp(null),X=gt(ee,2),ie=X[0],V=X[1],K=ne(),M=B.useRef(!1),U=B.useRef(null);function G(){return n()}var Z=B.useRef(!1);function re(){Y(Ba),V(null,!0)}var se=Pp(function(Oe){var je=ne();if(je!==Ba){var Ve=G();if(!(Oe&&!Oe.deadline&&Oe.target!==Ve)){var Qe=Z.current,it;je===Dg&&Qe?it=A?.(Ve,Oe):je===Fg&&Qe?it=T?.(Ve,Oe):je===Bg&&Qe&&(it=P?.(Ve,Oe)),Qe&&it!==!1&&re()}}}),ce=YG(se),he=gt(ce,1),ke=he[0],be=function(je){switch(je){case Dg:return Ge(Ge(Ge({},Us,h),fd,y),pd,x);case Fg:return Ge(Ge(Ge({},Us,f),fd,b),pd,S);case Bg:return Ge(Ge(Ge({},Us,p),fd,v),pd,_);default:return{}}},ye=B.useMemo(function(){return be(K)},[K]),ve=eY(K,!t,function(Oe){if(Oe===Us){var je=ye[Us];return je?je(G()):QO}if(Q in ye){var Ve;V(((Ve=ye[Q])===null||Ve===void 0?void 0:Ve.call(ye,G(),null))||null)}return Q===pd&&K!==Ba&&(ke(G()),u>0&&(clearTimeout(U.current),U.current=setTimeout(function(){se({deadline:!0})},u))),Q===WO&&re(),ZG}),Se=gt(ve,2),fe=Se[0],Q=Se[1],Re=ZO(Q);Z.current=Re;var Ie=B.useRef(null);JO(function(){if(!(M.current&&Ie.current===e)){I(e);var Oe=M.current;M.current=!0;var je;!Oe&&e&&a&&(je=Dg),Oe&&e&&s&&(je=Fg),(Oe&&!e&&c||!Oe&&d&&!e&&c)&&(je=Bg);var Ve=be(je);je&&(t||Ve[Us])?(Y(je),fe()):Y(Ba),Ie.current=e}},[e]),B.useEffect(function(){(K===Dg&&!a||K===Fg&&!s||K===Bg&&!c)&&Y(Ba)},[a,s,c]),B.useEffect(function(){return function(){M.current=!1,clearTimeout(U.current)}},[]);var Te=B.useRef(!1);B.useEffect(function(){j&&(Te.current=!0),j!==void 0&&K===Ba&&((Te.current||j)&&E?.(j),Te.current=!0)},[j,K]);var Me=ie;return ye[Us]&&Q===fd&&(Me=Ke({transition:"none"},Me)),[K,Q,Me,j??e]}function nY(t){var e=t;Je(t)==="object"&&(e=t.transitionSupport);function n(i,s){return!!(i.motionName&&e&&s!==!1)}var r=B.forwardRef(function(i,s){var o=i.visible,a=o===void 0?!0:o,l=i.removeOnLeave,c=l===void 0?!0:l,u=i.forceRender,d=i.children,h=i.motionName,f=i.leavedClassName,p=i.eventProps,y=B.useContext(qO),b=y.motion,v=n(i,b),x=B.useRef(),S=B.useRef();function _(){try{return x.current instanceof HTMLElement?x.current:iH(S.current)}catch{return null}}var A=tY(v,a,_,i),T=gt(A,4),P=T[0],E=T[1],z=T[2],H=T[3],j=B.useRef(H);H&&(j.current=!0);var I=B.useCallback(function(X){x.current=X,lH(s,X)},[s]),q,F=Ke(Ke({},p),{},{visible:a});if(!d)q=null;else if(P===Ba)H?q=d(Ke({},F),I):!c&&j.current&&f?q=d(Ke(Ke({},F),{},{className:f}),I):u||!c&&!f?q=d(Ke(Ke({},F),{},{style:{display:"none"}}),I):q=null;else{var ne;E===Us?ne="prepare":ZO(E)?ne="active":E===fd&&(ne="start");var Y=Y3(h,"".concat(P,"-").concat(ne));q=d(Ke(Ke({},F),{},{className:ko(Y3(h,P),Ge(Ge({},Y,Y&&ne),h,typeof h=="string")),style:z}),I)}if(B.isValidElement(q)&&cH(q)){var ee=uH(q);ee||(q=B.cloneElement(q,{ref:I}))}return B.createElement(qG,{ref:S},q)});return r.displayName="CSSMotion",r}const eI=nY(XO);var n5="add",r5="keep",i5="remove",mx="removed";function rY(t){var e;return t&&Je(t)==="object"&&"key"in t?e=t:e={key:t},Ke(Ke({},e),{},{key:String(e.key)})}function s5(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(rY)}function iY(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,s=s5(t),o=s5(e);s.forEach(function(c){for(var u=!1,d=r;d<i;d+=1){var h=o[d];if(h.key===c.key){r<d&&(n=n.concat(o.slice(r,d).map(function(f){return Ke(Ke({},f),{},{status:n5})})),r=d),n.push(Ke(Ke({},h),{},{status:r5})),r+=1,u=!0;break}}u||n.push(Ke(Ke({},c),{},{status:i5}))}),r<i&&(n=n.concat(o.slice(r).map(function(c){return Ke(Ke({},c),{},{status:n5})})));var a={};n.forEach(function(c){var u=c.key;a[u]=(a[u]||0)+1});var l=Object.keys(a).filter(function(c){return a[c]>1});return l.forEach(function(c){n=n.filter(function(u){var d=u.key,h=u.status;return d!==c||h!==i5}),n.forEach(function(u){u.key===c&&(u.status=r5)})}),n}var sY=["component","children","onVisibleChanged","onAllRemoved"],oY=["status"],aY=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function lY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eI,n=function(r){Gv(s,r);var i=Yv(s);function s(){var o;fa(this,s);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=i.call.apply(i,[this].concat(l)),Ge(Ec(o),"state",{keyEntities:[]}),Ge(Ec(o),"removeKey",function(u){o.setState(function(d){var h=d.keyEntities.map(function(f){return f.key!==u?f:Ke(Ke({},f),{},{status:mx})});return{keyEntities:h}},function(){var d=o.state.keyEntities,h=d.filter(function(f){var p=f.status;return p!==mx}).length;h===0&&o.props.onAllRemoved&&o.props.onAllRemoved()})}),o}return pa(s,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,c=this.props,u=c.component,d=c.children,h=c.onVisibleChanged;c.onAllRemoved;var f=Wc(c,sY),p=u||B.Fragment,y={};return aY.forEach(function(b){y[b]=f[b],delete f[b]}),delete f.keys,B.createElement(p,f,l.map(function(b,v){var x=b.status,S=Wc(b,oY),_=x===n5||x===r5;return B.createElement(e,bs({},y,{key:S.key,visible:_,eventProps:S,onVisibleChanged:function(T){h?.(T,{key:S.key}),T||a.removeKey(S.key)}}),function(A,T){return d(Ke(Ke({},A),{},{index:v}),T)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var c=a.keys,u=l.keyEntities,d=s5(c),h=iY(u,d);return{keyEntities:h.filter(function(f){var p=u.find(function(y){var b=y.key;return f.key===b});return!(p&&p.status===mx&&f.status===i5)})}}}]),s}(B.Component);return Ge(n,"defaultProps",{component:"div"}),n}lY(XO);const X3=B.createContext(!0);function cY(t){const e=B.useContext(X3),{children:n}=t,[,r]=Qk(),{motion:i}=r,s=B.useRef(!1);return s.current||(s.current=e!==i),s.current?B.createElement(X3.Provider,{value:i},B.createElement(UG,{motion:i},n)):n}const uY=()=>null;var dY=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const hY=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let tI;function fY(){return tI||Ry}function pY(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const mY=t=>{const{prefixCls:e,iconPrefixCls:n,theme:r,holderRender:i}=t;e!==void 0&&(tI=e),r&&pY(r)&&aG(fY(),r)},gY=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:s,form:o,locale:a,componentSize:l,direction:c,space:u,splitter:d,virtual:h,dropdownMatchSelectWidth:f,popupMatchSelectWidth:p,popupOverflow:y,legacyLocale:b,parentContext:v,iconPrefixCls:x,theme:S,componentDisabled:_,segmented:A,statistic:T,spin:P,calendar:E,carousel:z,cascader:H,collapse:j,typography:I,checkbox:q,descriptions:F,divider:ne,drawer:Y,skeleton:ee,steps:X,image:ie,layout:V,list:K,mentions:M,modal:U,progress:G,result:Z,slider:re,breadcrumb:se,menu:ce,pagination:he,input:ke,textArea:be,empty:ye,badge:ve,radio:Se,rate:fe,switch:Q,transfer:Re,avatar:Ie,message:Te,tag:Me,table:Oe,card:je,tabs:Ve,timeline:Qe,timePicker:it,upload:pt,notification:St,tree:Ot,colorPicker:tt,datePicker:yt,rangePicker:Be,flex:Un,wave:At,dropdown:Ti,warning:Ft,tour:Yt,tooltip:Zi,popover:It,popconfirm:To,floatButtonGroup:un,variant:Ei,inputNumber:Ts,treeSelect:dn}=t,ut=B.useCallback((Mt,hn)=>{const{prefixCls:qn}=t;if(hn)return hn;const Sn=qn||v.getPrefixCls("");return Mt?`${Sn}-${Mt}`:Sn},[v.getPrefixCls,t.prefixCls]),Nt=x||v.iconPrefixCls||Xk,Pi=n||v.csp;RG(Nt,Pi);const jn=$G(S,v.theme,{prefixCls:ut("")}),ci={csp:Pi,autoInsertSpaceInButton:r,alert:i,anchor:s,locale:a||b,direction:c,space:u,splitter:d,virtual:h,popupMatchSelectWidth:p??f,popupOverflow:y,getPrefixCls:ut,iconPrefixCls:Nt,theme:jn,segmented:A,statistic:T,spin:P,calendar:E,carousel:z,cascader:H,collapse:j,typography:I,checkbox:q,descriptions:F,divider:ne,drawer:Y,skeleton:ee,steps:X,image:ie,input:ke,textArea:be,layout:V,list:K,mentions:M,modal:U,progress:G,result:Z,slider:re,breadcrumb:se,menu:ce,pagination:he,empty:ye,badge:ve,radio:Se,rate:fe,switch:Q,transfer:Re,avatar:Ie,message:Te,tag:Me,table:Oe,card:je,tabs:Ve,timeline:Qe,timePicker:it,upload:pt,notification:St,tree:Ot,colorPicker:tt,datePicker:yt,rangePicker:Be,flex:Un,wave:At,dropdown:Ti,warning:Ft,tour:Yt,tooltip:Zi,popover:It,popconfirm:To,floatButtonGroup:un,variant:Ei,inputNumber:Ts,treeSelect:dn},gr=Object.assign({},v);Object.keys(ci).forEach(Mt=>{ci[Mt]!==void 0&&(gr[Mt]=ci[Mt])}),hY.forEach(Mt=>{const hn=t[Mt];hn&&(gr[Mt]=hn)}),typeof r<"u"&&(gr.button=Object.assign({autoInsertSpace:r},gr.button));const Ye=Z6(()=>gr,gr,(Mt,hn)=>{const qn=Object.keys(Mt),Sn=Object.keys(hn);return qn.length!==Sn.length||qn.some(Ar=>Mt[Ar]!==hn[Ar])}),{layer:ui}=B.useContext(cm),es=B.useMemo(()=>({prefixCls:Nt,csp:Pi,layer:ui?"antd":void 0}),[Nt,Pi,ui]);let Rt=B.createElement(B.Fragment,null,B.createElement(uY,{dropdownMatchSelectWidth:f}),e);const xn=B.useMemo(()=>{var Mt,hn,qn,Sn;return kK(((Mt=Zv.Form)===null||Mt===void 0?void 0:Mt.defaultValidateMessages)||{},((qn=(hn=Ye.locale)===null||hn===void 0?void 0:hn.Form)===null||qn===void 0?void 0:qn.defaultValidateMessages)||{},((Sn=Ye.form)===null||Sn===void 0?void 0:Sn.validateMessages)||{},o?.validateMessages||{})},[Ye,o?.validateMessages]);Object.keys(xn).length>0&&(Rt=B.createElement(_K.Provider,{value:xn},Rt)),a&&(Rt=B.createElement(RK,{locale:a,_ANT_MARK__:OK},Rt)),(Nt||Pi)&&(Rt=B.createElement(Yk.Provider,{value:es},Rt)),l&&(Rt=B.createElement(uG,{size:l},Rt)),Rt=B.createElement(cY,null,Rt);const wn=B.useMemo(()=>{const Mt=jn||{},{algorithm:hn,token:qn,components:Sn,cssVar:Ar}=Mt,Mi=dY(Mt,["algorithm","token","components","cssVar"]),ji=hn&&(!Array.isArray(hn)||hn.length>0)?Ow(hn):OO,Nr={};Object.entries(Sn||{}).forEach(([Eo,va])=>{const Tr=Object.assign({},va);"algorithm"in Tr&&(Tr.algorithm===!0?Tr.theme=ji:(Array.isArray(Tr.algorithm)||typeof Tr.algorithm=="function")&&(Tr.theme=Ow(Tr.algorithm)),delete Tr.algorithm),Nr[Eo]=Tr});const Li=Object.assign(Object.assign({},Tp),qn);return Object.assign(Object.assign({},Mi),{theme:ji,token:Li,components:Nr,override:Object.assign({override:Li},Nr),cssVar:Ar})},[jn]);return S&&(Rt=B.createElement(IO.Provider,{value:wn},Rt)),Ye.warning&&(Rt=B.createElement(CK.Provider,{value:Ye.warning},Rt)),_!==void 0&&(Rt=B.createElement(lG,{disabled:_},Rt)),B.createElement(Hc.Provider,{value:Ye},Rt)},um=t=>{const e=B.useContext(Hc),n=B.useContext(PO);return B.createElement(gY,Object.assign({parentContext:e,legacyLocale:n},t))};um.ConfigContext=Hc;um.SizeContext=e1;um.config=mY;um.useConfig=dG;Object.defineProperty(um,"SizeContext",{get:()=>e1});function nI(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function yY(t){return nI(t)instanceof ShadowRoot}function vY(t){return yY(t)?nI(t):null}function bY(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function xY(t,e){dh(t,"[@ant-design/icons] ".concat(e))}function J3(t){return Je(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(Je(t.icon)==="object"||typeof t.icon=="function")}function Q3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[bY(n)]=r}return e},{})}function o5(t,e,n){return n?Ze.createElement(t.tag,Ke(Ke({key:e},Q3(t.attrs)),n),(t.children||[]).map(function(r,i){return o5(r,"".concat(e,"-").concat(t.tag,"-").concat(i))})):Ze.createElement(t.tag,Ke({key:e},Q3(t.attrs)),(t.children||[]).map(function(r,i){return o5(r,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function rI(t){return Ep(t)[0]}function iI(t){return t?Array.isArray(t)?t:[t]:[]}var wY=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,SY=function(e){var n=B.useContext(Yk),r=n.csp,i=n.prefixCls,s=n.layer,o=wY;i&&(o=o.replace(/anticon/g,i)),s&&(o="@layer ".concat(s,` {
`).concat(o,`
}`)),B.useEffect(function(){var a=e.current,l=vY(a);Pc(o,"@ant-design-icons",{prepend:!s,csp:r,attachTo:l})},[])},kY=["icon","className","onClick","style","primaryColor","secondaryColor"],Hf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function CY(t){var e=t.primaryColor,n=t.secondaryColor;Hf.primaryColor=e,Hf.secondaryColor=n||rI(e),Hf.calculated=!!n}function _Y(){return Ke({},Hf)}var t1=function(e){var n=e.icon,r=e.className,i=e.onClick,s=e.style,o=e.primaryColor,a=e.secondaryColor,l=Wc(e,kY),c=B.useRef(),u=Hf;if(o&&(u={primaryColor:o,secondaryColor:a||rI(o)}),SY(c),xY(J3(n),"icon should be icon definiton, but got ".concat(n)),!J3(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=Ke(Ke({},d),{},{icon:d.icon(u.primaryColor,u.secondaryColor)})),o5(d.icon,"svg-".concat(d.name),Ke(Ke({className:r,onClick:i,style:s,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};t1.displayName="IconReact";t1.getTwoToneColors=_Y;t1.setTwoToneColors=CY;const eC=t1;function sI(t){var e=iI(t),n=gt(e,2),r=n[0],i=n[1];return eC.setTwoToneColors({primaryColor:r,secondaryColor:i})}function AY(){var t=eC.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var NY=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];sI(Iy.primary);var n1=B.forwardRef(function(t,e){var n=t.className,r=t.icon,i=t.spin,s=t.rotate,o=t.tabIndex,a=t.onClick,l=t.twoToneColor,c=Wc(t,NY),u=B.useContext(Yk),d=u.prefixCls,h=d===void 0?"anticon":d,f=u.rootClassName,p=ko(f,h,Ge(Ge({},"".concat(h,"-").concat(r.name),!!r.name),"".concat(h,"-spin"),!!i||r.name==="loading"),n),y=o;y===void 0&&a&&(y=-1);var b=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,v=iI(l),x=gt(v,2),S=x[0],_=x[1];return B.createElement("span",bs({role:"img","aria-label":r.name},c,{ref:e,tabIndex:y,onClick:a,className:p}),B.createElement(eC,{icon:r,primaryColor:S,secondaryColor:_,style:b}))});n1.displayName="AntdIcon";n1.getTwoToneColor=AY;n1.setTwoToneColor=sI;const TY=n1;var EY=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,PY=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,MY="".concat(EY," ").concat(PY).split(/[\s\n]+/),jY="aria-",LY="data-";function Z3(t,e){return t.indexOf(e)===0}function OY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=Ke({},e);var r={};return Object.keys(t).forEach(function(i){(n.aria&&(i==="role"||Z3(i,jY))||n.data&&Z3(i,LY)||n.attr&&MY.includes(i))&&(r[i]=t[i])}),r}const IY=(t,e,n)=>Ze.isValidElement(t)?Ze.cloneElement(t,typeof n=="function"?n(t.props||{}):n):e;function eT(t,e){return IY(t,t,e)}var st={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var n=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||n>=st.F1&&n<=st.F12)return!1;switch(n){case st.ALT:case st.CAPS_LOCK:case st.CONTEXT_MENU:case st.CTRL:case st.DOWN:case st.END:case st.ESC:case st.HOME:case st.INSERT:case st.LEFT:case st.MAC_FF_META:case st.META:case st.NUMLOCK:case st.NUM_CENTER:case st.PAGE_DOWN:case st.PAGE_UP:case st.PAUSE:case st.PRINT_SCREEN:case st.RIGHT:case st.SHIFT:case st.UP:case st.WIN_KEY:case st.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=st.ZERO&&e<=st.NINE||e>=st.NUM_ZERO&&e<=st.NUM_MULTIPLY||e>=st.A&&e<=st.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case st.SPACE:case st.QUESTION_MARK:case st.NUM_PLUS:case st.NUM_MINUS:case st.NUM_PERIOD:case st.NUM_DIVISION:case st.SEMICOLON:case st.DASH:case st.EQUALS:case st.COMMA:case st.PERIOD:case st.SLASH:case st.APOSTROPHE:case st.SINGLE_QUOTE:case st.OPEN_SQUARE_BRACKET:case st.BACKSLASH:case st.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const gx=()=>({height:0,opacity:0}),tT=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},RY=t=>({height:t?t.offsetHeight:0}),yx=(t,e)=>e?.deadline===!0||e.propertyName==="height",DY=(t=Ry)=>({motionName:`${t}-motion-collapse`,onAppearStart:gx,onEnterStart:gx,onAppearActive:tT,onEnterActive:tT,onLeaveStart:RY,onLeaveActive:gx,onAppearEnd:yx,onEnterEnd:yx,onLeaveEnd:yx,motionDeadline:500}),FY=DY;function nT(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}const BY=t=>{const e=Ze.useContext(e1);return Ze.useMemo(()=>t?typeof t=="string"?t??e:typeof t=="function"?t(e):e:e,[t,e])},zY=BY;var $Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const VY=$Y;var UY=function(e,n){return B.createElement(TY,bs({},e,{ref:n,icon:VY}))},qY=B.forwardRef(UY);const WY=qY;var oI=Ze.forwardRef(function(t,e){var n=t.prefixCls,r=t.forceRender,i=t.className,s=t.style,o=t.children,a=t.isActive,l=t.role,c=t.classNames,u=t.styles,d=Ze.useState(a||r),h=gt(d,2),f=h[0],p=h[1];return Ze.useEffect(function(){(r||a)&&p(!0)},[r,a]),f?Ze.createElement("div",{ref:e,className:ko("".concat(n,"-content"),Ge(Ge({},"".concat(n,"-content-active"),a),"".concat(n,"-content-inactive"),!a),i),style:s,role:l},Ze.createElement("div",{className:ko("".concat(n,"-content-box"),c?.body),style:u?.body},o)):null});oI.displayName="PanelContent";var HY=["showArrow","headerClass","isActive","onItemClick","forceRender","className","classNames","styles","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],aI=Ze.forwardRef(function(t,e){var n=t.showArrow,r=n===void 0?!0:n,i=t.headerClass,s=t.isActive,o=t.onItemClick,a=t.forceRender,l=t.className,c=t.classNames,u=c===void 0?{}:c,d=t.styles,h=d===void 0?{}:d,f=t.prefixCls,p=t.collapsible,y=t.accordion,b=t.panelKey,v=t.extra,x=t.header,S=t.expandIcon,_=t.openMotion,A=t.destroyInactivePanel,T=t.children,P=Wc(t,HY),E=p==="disabled",z=v!=null&&typeof v!="boolean",H=Ge(Ge(Ge({onClick:function(){o?.(b)},onKeyDown:function(ee){(ee.key==="Enter"||ee.keyCode===st.ENTER||ee.which===st.ENTER)&&o?.(b)},role:y?"tab":"button"},"aria-expanded",s),"aria-disabled",E),"tabIndex",E?-1:0),j=typeof S=="function"?S(t):Ze.createElement("i",{className:"arrow"}),I=j&&Ze.createElement("div",bs({className:"".concat(f,"-expand-icon")},["header","icon"].includes(p)?H:{}),j),q=ko("".concat(f,"-item"),Ge(Ge({},"".concat(f,"-item-active"),s),"".concat(f,"-item-disabled"),E),l),F=ko(i,"".concat(f,"-header"),Ge({},"".concat(f,"-collapsible-").concat(p),!!p),u.header),ne=Ke({className:F,style:h.header},["header","icon"].includes(p)?{}:H);return Ze.createElement("div",bs({},P,{ref:e,className:q}),Ze.createElement("div",ne,r&&I,Ze.createElement("span",bs({className:"".concat(f,"-header-text")},p==="header"?H:{}),x),z&&Ze.createElement("div",{className:"".concat(f,"-extra")},v)),Ze.createElement(eI,bs({visible:s,leavedClassName:"".concat(f,"-content-hidden")},_,{forceRender:a,removeOnLeave:A}),function(Y,ee){var X=Y.className,ie=Y.style;return Ze.createElement(oI,{ref:ee,prefixCls:f,className:X,classNames:u,style:ie,styles:h,isActive:s,forceRender:a,role:y?"tabpanel":void 0},T)}))}),KY=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],GY=function(e,n){var r=n.prefixCls,i=n.accordion,s=n.collapsible,o=n.destroyInactivePanel,a=n.onItemClick,l=n.activeKey,c=n.openMotion,u=n.expandIcon;return e.map(function(d,h){var f=d.children,p=d.label,y=d.key,b=d.collapsible,v=d.onItemClick,x=d.destroyInactivePanel,S=Wc(d,KY),_=String(y??h),A=b??s,T=x??o,P=function(H){A!=="disabled"&&(a(H),v?.(H))},E=!1;return i?E=l[0]===_:E=l.indexOf(_)>-1,Ze.createElement(aI,bs({},S,{prefixCls:r,key:_,panelKey:_,isActive:E,accordion:i,openMotion:c,expandIcon:u,header:p,collapsible:A,onItemClick:P,destroyInactivePanel:T}),f)})},YY=function(e,n,r){if(!e)return null;var i=r.prefixCls,s=r.accordion,o=r.collapsible,a=r.destroyInactivePanel,l=r.onItemClick,c=r.activeKey,u=r.openMotion,d=r.expandIcon,h=e.key||String(n),f=e.props,p=f.header,y=f.headerClass,b=f.destroyInactivePanel,v=f.collapsible,x=f.onItemClick,S=!1;s?S=c[0]===h:S=c.indexOf(h)>-1;var _=v??o,A=function(E){_!=="disabled"&&(l(E),x?.(E))},T={key:h,panelKey:h,header:p,headerClass:y,isActive:S,prefixCls:i,destroyInactivePanel:b??a,openMotion:u,accordion:s,children:e.props.children,onItemClick:A,expandIcon:d,collapsible:_};return typeof e.type=="string"?e:(Object.keys(T).forEach(function(P){typeof T[P]>"u"&&delete T[P]}),Ze.cloneElement(e,T))};function XY(t,e,n){return Array.isArray(t)?GY(t,n):jy(e).map(function(r,i){return YY(r,i,n)})}function JY(t){var e=t;if(!Array.isArray(e)){var n=Je(e);e=n==="number"||n==="string"?[e]:[]}return e.map(function(r){return String(r)})}var QY=Ze.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-collapse":n,i=t.destroyInactivePanel,s=i===void 0?!1:i,o=t.style,a=t.accordion,l=t.className,c=t.children,u=t.collapsible,d=t.openMotion,h=t.expandIcon,f=t.activeKey,p=t.defaultActiveKey,y=t.onChange,b=t.items,v=ko(r,l),x=gG([],{value:f,onChange:function(z){return y?.(z)},defaultValue:p,postState:JY}),S=gt(x,2),_=S[0],A=S[1],T=function(z){return A(function(){if(a)return _[0]===z?[]:[z];var H=_.indexOf(z),j=H>-1;return j?_.filter(function(I){return I!==z}):[].concat(ma(_),[z])})};dh(!c,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var P=XY(b,c,{prefixCls:r,accordion:a,openMotion:d,expandIcon:h,collapsible:u,destroyInactivePanel:s,onItemClick:T,activeKey:_});return Ze.createElement("div",bs({ref:e,className:v,style:o,role:a?"tablist":void 0},OY(t,{aria:!0,data:!0})),P)});const tC=Object.assign(QY,{Panel:aI});tC.Panel;const ZY=B.forwardRef((t,e)=>{const{getPrefixCls:n}=B.useContext(Hc),{prefixCls:r,className:i,showArrow:s=!0}=t,o=n("collapse",r),a=ko({[`${o}-no-arrow`]:!s},i);return B.createElement(tC.Panel,Object.assign({ref:e},t,{prefixCls:o,className:a}))}),eX=ZY,tX=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),nX=tX,rX=t=>{const{componentCls:e,contentBg:n,padding:r,headerBg:i,headerPadding:s,collapseHeaderPaddingSM:o,collapseHeaderPaddingLG:a,collapsePanelBorderRadius:l,lineWidth:c,lineType:u,colorBorder:d,colorText:h,colorTextHeading:f,colorTextDisabled:p,fontSizeLG:y,lineHeight:b,lineHeightLG:v,marginSM:x,paddingSM:S,paddingLG:_,paddingXS:A,motionDurationSlow:T,fontSizeIcon:P,contentPadding:E,fontHeight:z,fontHeightLG:H}=t,j=`${vi(c)} ${u} ${d}`;return{[e]:Object.assign(Object.assign({},EG(t)),{backgroundColor:i,border:j,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${e}-item`]:{borderBottom:j,"&:first-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`${vi(l)} ${vi(l)} 0 0`}},"&:last-child":{[`
            &,
            & > ${e}-header`]:{borderRadius:`0 0 ${vi(l)} ${vi(l)}`}},[`> ${e}-header`]:Object.assign(Object.assign({position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:s,color:f,lineHeight:b,cursor:"pointer",transition:`all ${T}, visibility 0s`},LG(t)),{[`> ${e}-header-text`]:{flex:"auto"},[`${e}-expand-icon`]:{height:z,display:"flex",alignItems:"center",paddingInlineEnd:x},[`${e}-arrow`]:Object.assign(Object.assign({},VO()),{fontSize:P,transition:`transform ${T}`,svg:{transition:`transform ${T}`}}),[`${e}-header-text`]:{marginInlineEnd:"auto"}}),[`${e}-collapsible-header`]:{cursor:"default",[`${e}-header-text`]:{flex:"none",cursor:"pointer"}},[`${e}-collapsible-icon`]:{cursor:"unset",[`${e}-expand-icon`]:{cursor:"pointer"}}},[`${e}-content`]:{color:h,backgroundColor:n,borderTop:j,[`& > ${e}-content-box`]:{padding:E},"&-hidden":{display:"none"}},"&-small":{[`> ${e}-item`]:{[`> ${e}-header`]:{padding:o,paddingInlineStart:A,[`> ${e}-expand-icon`]:{marginInlineStart:t.calc(S).sub(A).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:S}}},"&-large":{[`> ${e}-item`]:{fontSize:y,lineHeight:v,[`> ${e}-header`]:{padding:a,paddingInlineStart:r,[`> ${e}-expand-icon`]:{height:H,marginInlineStart:t.calc(_).sub(r).equal()}},[`> ${e}-content > ${e}-content-box`]:{padding:_}}},[`${e}-item:last-child`]:{borderBottom:0,[`> ${e}-content`]:{borderRadius:`0 0 ${vi(l)} ${vi(l)}`}},[`& ${e}-item-disabled > ${e}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:p,cursor:"not-allowed"}},[`&${e}-icon-position-end`]:{[`& > ${e}-item`]:{[`> ${e}-header`]:{[`${e}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:x}}}}})}},iX=t=>{const{componentCls:e}=t,n=`> ${e}-item > ${e}-header ${e}-arrow`;return{[`${e}-rtl`]:{[n]:{transform:"rotate(180deg)"}}}},sX=t=>{const{componentCls:e,headerBg:n,borderlessContentPadding:r,borderlessContentBg:i,colorBorder:s}=t;return{[`${e}-borderless`]:{backgroundColor:n,border:0,[`> ${e}-item`]:{borderBottom:`1px solid ${s}`},[`
        > ${e}-item:last-child,
        > ${e}-item:last-child ${e}-header
      `]:{borderRadius:0},[`> ${e}-item:last-child`]:{borderBottom:0},[`> ${e}-item > ${e}-content`]:{backgroundColor:i,borderTop:0},[`> ${e}-item > ${e}-content > ${e}-content-box`]:{padding:r}}}},oX=t=>{const{componentCls:e,paddingSM:n}=t;return{[`${e}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${e}-item`]:{borderBottom:0,[`> ${e}-content`]:{backgroundColor:"transparent",border:0,[`> ${e}-content-box`]:{paddingBlock:n}}}}}},aX=t=>({headerPadding:`${t.paddingSM}px ${t.padding}px`,headerBg:t.colorFillAlter,contentPadding:`${t.padding}px 16px`,contentBg:t.colorBgContainer,borderlessContentPadding:`${t.paddingXXS}px 16px ${t.padding}px`,borderlessContentBg:"transparent"}),lX=OG("Collapse",t=>{const e=Jk(t,{collapseHeaderPaddingSM:`${vi(t.paddingXS)} ${vi(t.paddingSM)}`,collapseHeaderPaddingLG:`${vi(t.padding)} ${vi(t.paddingLG)}`,collapsePanelBorderRadius:t.borderRadiusLG});return[rX(e),sX(e),oX(e),iX(e),nX(e)]},aX),cX=B.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r,expandIcon:i,className:s,style:o}=iG("collapse"),{prefixCls:a,className:l,rootClassName:c,style:u,bordered:d=!0,ghost:h,size:f,expandIconPosition:p="start",children:y,destroyInactivePanel:b,destroyOnHidden:v,expandIcon:x}=t,S=zY(ne=>{var Y;return(Y=f??ne)!==null&&Y!==void 0?Y:"middle"}),_=n("collapse",a),A=n(),[T,P,E]=lX(_),z=B.useMemo(()=>p==="left"?"start":p==="right"?"end":p,[p]),H=x??i,j=B.useCallback((ne={})=>{const Y=typeof H=="function"?H(ne):B.createElement(WY,{rotate:ne.isActive?r==="rtl"?-90:90:void 0,"aria-label":ne.isActive?"expanded":"collapsed"});return eT(Y,()=>{var ee;return{className:ko((ee=Y?.props)===null||ee===void 0?void 0:ee.className,`${_}-arrow`)}})},[H,_]),I=ko(`${_}-icon-position-${z}`,{[`${_}-borderless`]:!d,[`${_}-rtl`]:r==="rtl",[`${_}-ghost`]:!!h,[`${_}-${S}`]:S!=="middle"},s,l,c,P,E),q=Object.assign(Object.assign({},FY(A)),{motionAppear:!1,leavedClassName:`${_}-content-hidden`}),F=B.useMemo(()=>y?jy(y).map((ne,Y)=>{var ee,X;const ie=ne.props;if(ie?.disabled){const V=(ee=ne.key)!==null&&ee!==void 0?ee:String(Y),K=Object.assign(Object.assign({},nT(ne.props,["disabled"])),{key:V,collapsible:(X=ie.collapsible)!==null&&X!==void 0?X:"disabled"});return eT(ne,K)}return ne}):null,[y]);return T(B.createElement(tC,Object.assign({ref:e,openMotion:q},nT(t,["rootClassName"]),{expandIcon:j,prefixCls:_,className:I,style:Object.assign(Object.assign({},o),u),destroyInactivePanel:v??b}),F))}),uX=Object.assign(cX,{Panel:eX}),rT=({currentStrand:t,learningPathChoice:e="critical-angle"})=>{const n=`strand${t}`,r=(()=>{const a=HW?.[e];if(!a||typeof a!="object")return[];const l=a[n];return!l||!Array.isArray(l)?[]:l})();if(r.length===0)return m.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:m.jsx("p",{className:"text-yellow-800 text-sm",children:"📚 Guided examples are being prepared for this strand. Check back soon or explore the other tabs!"})});const i=r.reduce((a,l)=>{const c=`Level ${l.level}`;return a[c]||(a[c]=[]),a[c].push(l),a},{}),o=((a,l)=>({"critical-angle":{1:{name:"TIR Principles & Laws",description:"Understanding the fundamental laws governing total internal reflection"},2:{name:"Understanding TIR Phenomena",description:"Comprehending why and when total internal reflection occurs"},3:{name:"Real-World Applications",description:"Exploring practical uses of total internal reflection in technology and nature"},4:{name:"Analysis & Problem Solving",description:"Applying mathematical and analytical skills to solve TIR problems"}},"fiber-optics":{1:{name:"Fiber Optic Principles",description:"Understanding how light travels through optical fibers"},2:{name:"Fiber Optic Technology",description:"Exploring the engineering and physics behind fiber optic systems"},3:{name:"Applications & Impact",description:"Examining fiber optic applications and their societal impact"},4:{name:"Design & Innovation",description:"Applying fiber optic principles to solve design challenges"}}})[l]?.[a]||{name:`Strand ${a}`,description:"Strand content"})(t,e);return m.jsxs("div",{className:"guided-example-panel",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("h2",{className:"font-semibold text-lg mb-2 text-purple-800",children:["📚 ",o.name]}),m.jsx("p",{className:"text-gray-700 text-sm mb-3",children:o.description}),m.jsx("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:m.jsxs("p",{className:"text-purple-700 text-sm",children:[m.jsx("strong",{children:"Learning Path:"})," ",e==="critical-angle"?"Discovering Critical Angles":"How Fibre Optics Work"]})})]}),m.jsx(uX,{accordion:!0,items:Object.entries(i).sort(([a],[l])=>{const c=parseInt(a.replace("Level ","")),u=parseInt(l.replace("Level ",""));return c-u}).map(([a,l])=>({key:a,label:m.jsxs("div",{className:"flex items-center justify-between w-full",children:[m.jsxs("span",{className:"font-medium",children:[a," Examples"]}),m.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:[l.length," question",l.length!==1?"s":""]})]}),children:m.jsx("div",{className:"space-y-4",children:l.map((c,u)=>m.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[m.jsx("div",{className:"flex items-start justify-between mb-3",children:m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded font-medium",children:c.commandTerm.toUpperCase()}),m.jsx("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded",children:c.type.replace("-"," ")})]}),m.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:c.question})]})}),c.options&&Array.isArray(c.options)&&c.options.length>0&&m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Options:"}),m.jsx("ul",{className:"space-y-1 text-sm",children:c.options.map((d,h)=>m.jsxs("li",{className:`p-2 rounded ${d===c.correctAnswer?"bg-green-50 border border-green-200 text-green-800":"bg-gray-50"}`,children:[m.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+h),")"]})," ",d,d===c.correctAnswer&&m.jsx("span",{className:"ml-2 text-green-600 text-xs",children:"✓ Correct"})]},h))})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:c.type==="mcq"?"Correct Answer:":"Model Answer:"}),m.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded text-sm text-green-800",children:c.correctAnswer})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Explanation:"}),m.jsx("p",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 p-3 rounded",children:c.explanation})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Terms:"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(c.keywords)&&c.keywords.map((d,h)=>m.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded",children:d},h))})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assessment Focus:"}),m.jsx("div",{className:"space-y-1",children:Array.isArray(c.rubricMapping)&&c.rubricMapping.map((d,h)=>m.jsxs("div",{className:"text-xs text-purple-700 bg-purple-50 px-2 py-1 rounded",children:["• ",d]},h))})]})]},c.id))})}))}),m.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[m.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"💡 How to Use These Examples:"}),m.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[m.jsxs("li",{children:["• Study the ",m.jsx("strong",{children:"command terms"})," (define, explain, analyze) to understand what's expected"]}),m.jsxs("li",{children:["• Notice how ",m.jsx("strong",{children:"model answers"})," use scientific vocabulary appropriately"]}),m.jsxs("li",{children:["• Pay attention to the ",m.jsx("strong",{children:"key terms"})," that demonstrate knowledge"]}),m.jsx("li",{children:'• Use these as inspiration for your own responses in the "Your Response" tab'})]})]})]})};function xr(t){this.content=t}xr.prototype={constructor:xr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new xr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new xr(n)},addToStart:function(t,e){return new xr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new xr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new xr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=xr.from(t),t.size?new xr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=xr.from(t),t.size?new xr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=xr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};xr.from=function(t){if(t instanceof xr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new xr(e)};function lI(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=lI(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function cI(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=cI(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Ne{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ne(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ne(r,i)}cutByIndex(e,n){return e==n?Ne.empty:e==0&&n==this.content.length?this:new Ne(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ne(i,s)}addToStart(e){return new Ne([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ne(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return lI(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return cI(this,e,n,r)}findIndex(e,n=-1){if(e==0)return $g(0,e);if(e==this.size)return $g(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?$g(r+1,o):$g(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ne.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ne(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ne.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ne(n||e,r)}static from(e){if(!e)return Ne.empty;if(e instanceof Ne)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ne([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ne.empty=new Ne([],0);const vx={index:0,offset:0};function $g(t,e){return vx.index=t,vx.offset=e,vx}function Dy(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Dy(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Dy(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Kt=class a5{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Dy(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return a5.none;if(e instanceof a5)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Kt.none=[];class Fy extends Error{}class Fe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=dI(this.content,e+this.openStart,n);return r&&new Fe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Fe(uI(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Fe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Fe(Ne.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Fe(e,r,i)}}Fe.empty=new Fe(Ne.empty,0,0);function uI(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(uI(s.content,e-i-1,n-i-1)))}function dI(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=dI(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function dX(t,e,n){if(n.openStart>t.depth)throw new Fy("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Fy("Inconsistent open depths");return hI(t,e,n,0)}function hI(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=hI(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Lc(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=hX(n,t);return Lc(s,pI(t,o,a,e,r))}else return Lc(s,By(t,e,r))}function fI(t,e){if(!e.type.compatibleContent(t.type))throw new Fy("Cannot join "+e.type.name+" onto "+t.type.name)}function l5(t,e,n){let r=t.node(n);return fI(r,e.node(n)),r}function jc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Kf(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(jc(t.nodeAfter,r),s++));for(let a=s;a<o;a++)jc(i.child(a),r);e&&e.depth==n&&e.textOffset&&jc(e.nodeBefore,r)}function Lc(t,e){return t.type.checkContent(e),t.copy(e)}function pI(t,e,n,r,i){let s=t.depth>i&&l5(t,e,i+1),o=r.depth>i&&l5(n,r,i+1),a=[];return Kf(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(fI(s,o),jc(Lc(s,pI(t,e,n,r,i+1)),a)):(s&&jc(Lc(s,By(t,e,i+1)),a),Kf(e,n,i,a),o&&jc(Lc(o,By(n,r,i+1)),a)),Kf(r,null,i,a),new Ne(a)}function By(t,e,n){let r=[];if(Kf(null,t,n,r),t.depth>n){let i=l5(t,e,n+1);jc(Lc(i,By(t,e,n+1)),r)}return Kf(e,null,n,r),new Ne(r)}function hX(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ne.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class jp{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Kt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new zy(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new jp(n,r,s)}static resolveCached(e,n){let r=iT.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else iT.set(e,r=new fX);let i=r.elts[r.i]=jp.resolve(e,n);return r.i=(r.i+1)%pX,i}}class fX{constructor(){this.elts=[],this.i=0}}const pX=12,iT=new WeakMap;class zy{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const mX=Object.create(null);let yl=class c5{constructor(e,n,r,i=Kt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ne.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Dy(this.attrs,n||e.defaultAttrs||mX)&&Kt.sameSet(this.marks,r||Kt.none)}copy(e=null){return e==this.content?this:new c5(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new c5(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Fe.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Fe(c,i.depth-o,s.depth-o)}replace(e,n,r){return dX(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return jp.resolveCached(this,e)}resolveNoCache(e){return jp.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),mI(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ne.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Kt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ne.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};yl.prototype.text=void 0;class $y extends yl{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):mI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $y(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $y(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function mI(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Kc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new gX(e,n);if(r.next==null)return Kc.empty;let i=gI(r);r.next&&r.err("Unexpected trailing text");let s=kX(SX(i));return CX(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ne.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Kc.empty=new Kc(!0);class gX{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function gI(t){let e=[];do e.push(yX(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function yX(t){let e=[];do e.push(vX(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function vX(t){let e=wX(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=bX(t,e);else break;return e}function sT(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function bX(t,e){let n=sT(t),r=n;return t.eat(",")&&(t.next!="}"?r=sT(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function xX(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function wX(t){if(t.eat("(")){let e=gI(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=xX(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function SX(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function yI(t,e){return e-t}function oT(t,e){let n=[];return r(e),n.sort(yI);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function kX(t){let e=Object.create(null);return n(oT(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);oT(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Kc(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(yI);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function CX(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function vI(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function bI(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function xI(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function wI(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new AX(t,r,e[r]);return n}let aT=class SI{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=wI(e,r.attrs),this.defaultAttrs=vI(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Kc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:bI(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yl(this,this.computeAttrs(e),Ne.from(n),Kt.setFrom(r))}createChecked(e=null,n,r){return n=Ne.from(n),this.checkContent(n),new yl(this,this.computeAttrs(e),n,Kt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ne.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ne.empty,!0);return s?new yl(this,e,n.append(s),Kt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){xI(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Kt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new SI(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function _X(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class AX{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?_X(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class r1{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=wI(e,i.attrs),this.excluded=null;let s=vI(this.attrs);this.instance=s?new Kt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Kt(this,bI(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new r1(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){xI(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class kI{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=xr.from(e.nodes),n.marks=xr.from(e.marks||{}),this.nodes=aT.compile(this.spec.nodes,this),this.marks=r1.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Kc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?lT(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:lT(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof aT){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new $y(r,r.defaultAttrs,e,Kt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return yl.fromJSON(this,e)}markFromJSON(e){return Kt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function lT(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function NX(t){return t.tag!=null}function TX(t){return t.style!=null}let Gf=class u5{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(NX(i))this.tags.push(i);else if(TX(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new uT(this,n,!1);return r.addAll(e,Kt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new uT(this,n,!0);return r.addAll(e,Kt.none,n.from,n.to),Fe.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(MX(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=dT(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=dT(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new u5(e,u5.schemaRules(e)))}};const CI={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},EX={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_I={ol:!0,ul:!0},Lp=1,d5=2,Yf=4;function cT(t,e,n){return e!=null?(e?Lp:0)|(e==="full"?d5:0):t&&t.whitespace=="pre"?Lp|d5:n&~Yf}class Vg{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Kt.none,this.match=s||(o&Yf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ne.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Lp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ne.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ne.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!CI.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class uT{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=cT(null,n.preserveWhitespace,0)|(r?Yf:0);i?s=new Vg(i.type,i.attrs,Kt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Vg(null,null,Kt.none,!0,null,o):s=new Vg(e.schema.topNodeType,null,Kt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&d5?"full":this.localPreserveWS||(i.options&Lp)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;_I.hasOwnProperty(o)&&this.parser.normalizeLists&&PX(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:EX.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(CI.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Kt.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):hT(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=cT(e,s,o.options);o.options&Yf&&o.content.length==0&&(a|=Yf);let l=Kt.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):hT(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Vg(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Lp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function PX(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&_I.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function MX(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function dT(t){let e={};for(let n in t)e[n]=t[n];return e}function hT(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class iu{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=bx(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=B0(bx(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&B0(bx(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return B0(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new iu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=fT(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return fT(e.marks)}}function fT(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bx(t){return t.document||window.document}const pT=new WeakMap;function jX(t){let e=pT.get(t);return e===void 0&&pT.set(t,e=LX(t)),e}function LX(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function B0(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=jX(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=B0(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const AI=65535,NI=Math.pow(2,16);function OX(t,e){return t+e*NI}function mT(t){return t&AI}function IX(t){return(t-(t&AI))/NI}const TI=1,EI=2,z0=4,PI=8;class h5{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&PI)>0}get deletedBefore(){return(this.delInfo&(TI|z0))>0}get deletedAfter(){return(this.delInfo&(EI|z0))>0}get deletedAcross(){return(this.delInfo&z0)>0}}class Vi{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Vi.empty)return Vi.empty}recover(e){let n=0,r=mT(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+IX(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,f=l+i+(h<0?0:u);if(r)return f;let p=e==(n<0?l:d)?null:OX(a/3,e-l),y=e==l?EI:e==d?TI:z0;return(n<0?e!=l:e!=d)&&(y|=PI),new h5(f,y,p)}i+=u-c}return r?e+i:new h5(e+i,0,null)}touches(e,n){let r=0,i=mT(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Vi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Vi.empty:new Vi(e<0?[0,-e,0]:[0,0,e])}}Vi.empty=new Vi([]);class Op{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Op(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Op;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new h5(e,i,null)}}const xx=Object.create(null);class Gr{getMap(){return Vi.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xx[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in xx)throw new RangeError("Duplicate use of step JSON ID "+e);return xx[e]=n,n.prototype.jsonID=e,n}}class Xn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Xn(e,null)}static fail(e){return new Xn(null,e)}static fromReplace(e,n,r,i){try{return Xn.ok(e.replace(n,r,i))}catch(s){if(s instanceof Fy)return Xn.fail(s.message);throw s}}}function nC(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(nC(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ne.fromArray(r)}class tl extends Gr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Fe(nC(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Xn.fromReplace(e,this.from,this.to,s)}invert(){return new mo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new tl(n.pos,r.pos,this.mark)}merge(e){return e instanceof tl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new tl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new tl(n.from,n.to,e.markFromJSON(n.mark))}}Gr.jsonID("addMark",tl);class mo extends Gr{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Fe(nC(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Xn.fromReplace(e,this.from,this.to,r)}invert(){return new tl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new mo(n.pos,r.pos,this.mark)}merge(e){return e instanceof mo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new mo(n.from,n.to,e.markFromJSON(n.mark))}}Gr.jsonID("removeMark",mo);class nl extends Gr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Xn.fromReplace(e,this.pos,this.pos+1,new Fe(Ne.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new nl(this.pos,n.marks[i]);return new nl(this.pos,this.mark)}}return new Gc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nl(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new nl(n.pos,e.markFromJSON(n.mark))}}Gr.jsonID("addNodeMark",nl);class Gc extends Gr{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Xn.fromReplace(e,this.pos,this.pos+1,new Fe(Ne.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new nl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gc(n.pos,e.markFromJSON(n.mark))}}Gr.jsonID("removeNodeMark",Gc);class ur extends Gr{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&f5(e,this.from,this.to)?Xn.fail("Structure replace would overwrite content"):Xn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Vi([this.from,this.to-this.from,this.slice.size])}invert(e){return new ur(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ur(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ur)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Fe.empty:new Fe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ur(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Fe.empty:new Fe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ur(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ur(n.from,n.to,Fe.fromJSON(e,n.slice),!!n.structure)}}Gr.jsonID("replace",ur);class fr extends Gr{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(f5(e,this.from,this.gapFrom)||f5(e,this.gapTo,this.to)))return Xn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Xn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Xn.fromReplace(e,this.from,this.to,r):Xn.fail("Content does not fit in gap")}getMap(){return new Vi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new fr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new fr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fr(n.from,n.to,n.gapFrom,n.gapTo,Fe.fromJSON(e,n.slice),n.insert,!!n.structure)}}Gr.jsonID("replaceAround",fr);function f5(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function RX(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(p)||(o&&o.to==h&&o.mark.eq(d[y])?o.to=f:i.push(o=new mo(h,f,d[y])));a&&a.to==h?a.to=f:s.push(a=new tl(h,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function DX(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof r1){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&d.eq(i[f].style)&&(h=p)}h?(h.to=c,h.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new mo(o.from,o.to,o.style)))}function rC(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new ur(a,u,Fe.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new mo(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new Fe(Ne.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new ur(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(Ne.empty,!0);t.replace(a,a,new Fe(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function FX(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function fh(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!FX(i,s,o))break}return null}function BX(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Ne.empty,d=0;for(let p=s,y=!1;p>n;p--)y||r.index(p)>0?(y=!0,u=Ne.from(r.node(p).copy(u)),d++):l--;let h=Ne.empty,f=0;for(let p=s,y=!1;p>n;p--)y||i.after(p+1)<i.end(p)?(y=!0,h=Ne.from(i.node(p).copy(h)),f++):c++;t.step(new fr(l,c,o,a,new Fe(u.append(h),d,f),u.size-d,!0))}function iC(t,e,n=null,r=t){let i=zX(t,e),s=i&&$X(r,e);return s?i.map(gT).concat({type:e,attrs:n}).concat(s.map(gT)):null}function gT(t){return{type:t,attrs:null}}function zX(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function $X(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function VX(t,e,n){let r=Ne.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ne.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new fr(i,s,i,s,new Fe(r,0,0),n.length,!0))}function UX(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&qX(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&jI(t,o,a,s),rC(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new fr(d,h,d+1,h-1,new Fe(Ne.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&MI(t,o,a,s),!1}})}function MI(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function jI(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function qX(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function WX(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new fr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Fe(Ne.from(o),0,0),1,!0))}function Nd(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let y=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!y.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function HX(t,e,n=1,r){let i=t.doc.resolve(e),s=Ne.empty,o=Ne.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Ne.from(i.node(a).copy(s));let u=r&&r[c];o=Ne.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new ur(e,e,new Fe(s.append(o),n,n),!0))}function Fl(t,e){let n=t.resolve(e),r=n.index();return LI(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function KX(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function LI(t,e){return!!(t&&e&&!t.isLeaf&&KX(t,e))}function i1(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&LI(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function GX(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);jI(t,u.node(),u.before(),a)}o.inlineContent&&rC(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new ur(c,l.map(e+n,-1),Fe.empty,!0)),r===!0){let u=t.doc.resolve(c);MI(t,u.node(),u.before(),t.steps.length)}return t}function YX(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function OI(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function s1(t,e,n=e,r=Fe.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return II(i,s,r)?new ur(e,n,r):new XX(i,s,r).fit()}function II(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class XX{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ne.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ne.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Fe(s,o,a);return e>-1?new fr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ur(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=wx(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Ne.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=wx(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Fe(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=wx(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Fe(Sf(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Fe(Sf(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));d=d.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let y=a.child(c),b=d.matchType(y.type);if(!b)break;c++,(c>1||l==0||y.content.size)&&(d=b,u.push(RI(y.mark(h.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=kf(this.placed,n,Ne.from(u)),this.frontier[n].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,b=a;y<f;y++){let v=b.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),b=v.content}this.unplaced=p?e==0?Fe.empty:new Fe(Sf(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new Fe(Sf(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Sx(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Sx(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Sx(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=kf(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=kf(this.placed,this.depth,Ne.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ne.empty,!0);n.childCount&&(this.placed=kf(this.placed,this.frontier.length,n))}}function Sf(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Sf(t.firstChild.content,e-1,n)))}function kf(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(kf(t.lastChild.content,e-1,n)))}function wx(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function RI(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,RI(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ne.empty,!0)))),t.copy(r)}function Sx(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!JX(n,s.content,o)?a:null}function JX(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function QX(t){return t.spec.defining||t.spec.definingForContent}function ZX(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(II(i,s,r))return t.step(new ur(e,n,r));let o=FI(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h],p=QX(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),p=c[f];if(p)for(let y=0;y<o.length;y++){let b=o[(y+l)%o.length],v=!0;b<0&&(v=!1,b=-b);let x=i.node(b-1),S=i.index(b-1);if(x.canReplaceWith(S,S,p.type,p.marks))return t.replace(i.before(b),v?s.after(b):n,new Fe(DI(r.content,0,r.openStart,f),f,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let f=o[h];f<0||(e=i.before(f),n=s.after(f))}}function DI(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(DI(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ne.empty,!0))}return t}function eJ(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=YX(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Fe(Ne.from(r),0,0))}function tJ(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=FI(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function FI(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Td extends Gr{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Xn.fromReplace(e,this.pos,this.pos+1,new Fe(Ne.from(i),0,n.isLeaf?0:1))}getMap(){return Vi.empty}invert(e){return new Td(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Td(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Td(n.pos,n.attr,n.value)}}Gr.jsonID("attr",Td);class Ip extends Gr{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Xn.ok(r)}getMap(){return Vi.empty}invert(e){return new Ip(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ip(n.attr,n.value)}}Gr.jsonID("docAttr",Ip);let Yd=class extends Error{};Yd=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Yd.prototype=Object.create(Error.prototype);Yd.prototype.constructor=Yd;Yd.prototype.name="TransformError";class BI{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Op}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Yd(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Fe.empty){let i=s1(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Fe(Ne.from(r),0,0))}delete(e,n){return this.replace(e,n,Fe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return ZX(this,e,n,r),this}replaceRangeWith(e,n,r){return eJ(this,e,n,r),this}deleteRange(e,n){return tJ(this,e,n),this}lift(e,n){return BX(this,e,n),this}join(e,n=1){return GX(this,e,n),this}wrap(e,n){return VX(this,e,n),this}setBlockType(e,n=e,r,i=null){return UX(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return WX(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Td(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ip(e,n)),this}addNodeMark(e,n){return this.step(new nl(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Kt)n.isInSet(r.marks)&&this.step(new Gc(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Gc(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return HX(this,e,n,r),this}addMark(e,n,r){return RX(this,e,n,r),this}removeMark(e,n,r){return DX(this,e,n,r),this}clearIncompatible(e,n,r){return rC(this,e,n,r),this}}const kx=Object.create(null);class at{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new zI(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Fe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Fe.empty:n),a==0&&bT(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),bT(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new rt(e):Hu(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Hu(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Hu(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ws(e.node(0))}static atStart(e){return Hu(e,e,0,0,1)||new ws(e)}static atEnd(e){return Hu(e,e,e.content.size,e.childCount,-1)||new ws(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=kx[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in kx)throw new RangeError("Duplicate use of selection JSON ID "+e);return kx[e]=n,n.prototype.jsonID=e,n}getBookmark(){return rt.between(this.$anchor,this.$head).getBookmark()}}at.prototype.visible=!0;class zI{constructor(e,n){this.$from=e,this.$to=n}}let yT=!1;function vT(t){!yT&&!t.parent.inlineContent&&(yT=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class rt extends at{constructor(e,n=e){vT(e),vT(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return at.near(r);let i=e.resolve(n.map(this.anchor));return new rt(i.parent.inlineContent?i:r,r)}replace(e,n=Fe.empty){if(super.replace(e,n),n==Fe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof rt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new o1(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new rt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=at.findFrom(n,r,!0)||at.findFrom(n,-r,!0);if(s)n=s.$head;else return at.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(at.findFrom(e,-r,!0)||at.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new rt(e,n)}}at.jsonID("text",rt);class o1{constructor(e,n){this.anchor=e,this.head=n}map(e){return new o1(e.map(this.anchor),e.map(this.head))}resolve(e){return rt.between(e.resolve(this.anchor),e.resolve(this.head))}}class et extends at{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?at.near(s):new et(s)}content(){return new Fe(Ne.from(this.node),0,0)}eq(e){return e instanceof et&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new sC(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new et(e.resolve(n.anchor))}static create(e,n){return new et(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}et.prototype.visible=!1;at.jsonID("node",et);class sC{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new o1(r,r):new sC(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&et.isSelectable(r)?new et(n):at.near(n)}}class ws extends at{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Fe.empty){if(n==Fe.empty){e.delete(0,e.doc.content.size);let r=at.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ws(e)}map(e){return new ws(e)}eq(e){return e instanceof ws}getBookmark(){return nJ}}at.jsonID("all",ws);const nJ={map(){return this},resolve(t){return new ws(t)}};function Hu(t,e,n,r,i,s=!1){if(e.inlineContent)return rt.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&et.isSelectable(a))return et.create(t,n-(i<0?a.nodeSize:0))}else{let l=Hu(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function bT(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof ur||i instanceof fr))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(at.near(t.doc.resolve(o),n))}const xT=1,Ug=2,wT=4;class rJ extends BI{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|xT)&~Ug,this.storedMarks=null,this}get selectionSet(){return(this.updated&xT)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ug,this}ensureMarks(e){return Kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ug)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ug,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Kt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(at.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=wT,this}get scrolledIntoView(){return(this.updated&wT)>0}}function ST(t,e){return!e||!t?t:t.bind(e)}class Cf{constructor(e,n,r){this.name=e,this.init=ST(n.init,r),this.apply=ST(n.apply,r)}}const iJ=[new Cf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Cf("selection",{init(t,e){return t.selection||at.atStart(e.doc)},apply(t){return t.selection}}),new Cf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Cf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Cx{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iJ.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Cf(r.key,r.spec.state,r))})}}class md{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new md(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new rJ(this)}static create(e){let n=new Cx(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new md(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Cx(this.schema,e.plugins),r=n.fields,i=new md(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Cx(e.schema,e.plugins),s=new md(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=yl.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=at.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function $I(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=$I(i,e,{})),n[r]=i}return n}class Yr{constructor(e){this.spec=e,this.props={},e.props&&$I(e.props,this,this.props),this.key=e.key?e.key.key:VI("plugin")}getState(e){return e[this.key]}}const _x=Object.create(null);function VI(t){return t in _x?t+"$"+ ++_x[t]:(_x[t]=0,t+"$")}class Qi{constructor(e="key"){this.key=VI(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Sr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Xd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let p5=null;const Go=function(t,e,n){let r=p5||(p5=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},sJ=function(){p5=null},Yc=function(t,e,n,r){return n&&(kT(t,e,n,r,-1)||kT(t,e,n,r,1))},oJ=/^(img|br|input|textarea|hr)$/i;function kT(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ys(t))){let o=t.parentNode;if(!o||o.nodeType!=1||dm(t)||oJ.test(t.nodeName)||t.contentEditable=="false")return!1;e=Sr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?ys(t):0}else return!1}}function ys(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function aJ(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ys(t)}else if(t.parentNode&&!dm(t))e=Sr(t),t=t.parentNode;else return null}}function lJ(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!dm(t))e=Sr(t)+1,t=t.parentNode;else return null}}function cJ(t,e,n){for(let r=e==0,i=e==ys(t);r||i;){if(t==n)return!0;let s=Sr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ys(t)}}function dm(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const a1=function(t){return t.focusNode&&Yc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function mc(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function uJ(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function dJ(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(ys(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(ys(r.startContainer),r.startOffset)}}}const Co=typeof navigator<"u"?navigator:null,CT=typeof document<"u"?document:null,Bl=Co&&Co.userAgent||"",m5=/Edge\/(\d+)/.exec(Bl),UI=/MSIE \d/.exec(Bl),g5=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bl),Ai=!!(UI||g5||m5),vl=UI?document.documentMode:g5?+g5[1]:m5?+m5[1]:0,Qs=!Ai&&/gecko\/(\d+)/i.test(Bl);Qs&&+(/Firefox\/(\d+)/.exec(Bl)||[0,0])[1];const y5=!Ai&&/Chrome\/(\d+)/.exec(Bl),Ur=!!y5,qI=y5?+y5[1]:0,ri=!Ai&&!!Co&&/Apple Computer/.test(Co.vendor),Jd=ri&&(/Mobile\/\w+/.test(Bl)||!!Co&&Co.maxTouchPoints>2),fs=Jd||(Co?/Mac/.test(Co.platform):!1),hJ=Co?/Win/.test(Co.platform):!1,Zo=/Android \d/.test(Bl),hm=!!CT&&"webkitFontSmoothing"in CT.documentElement.style,fJ=hm?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function pJ(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Bo(t,e){return typeof t=="number"?t:t[e]}function mJ(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _T(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Xd(o);continue}let a=o,l=a==s.body,c=l?pJ(s):mJ(a),u=0,d=0;if(e.top<c.top+Bo(r,"top")?d=-(c.top-e.top+Bo(i,"top")):e.bottom>c.bottom-Bo(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Bo(i,"top")-c.top:e.bottom-c.bottom+Bo(i,"bottom")),e.left<c.left+Bo(r,"left")?u=-(c.left-e.left+Bo(i,"left")):e.right>c.right-Bo(r,"right")&&(u=e.right-c.right+Bo(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let y=a.scrollLeft-f,b=a.scrollTop-p;e={left:e.left-y,top:e.top-b,right:e.right-y,bottom:e.bottom-b}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Xd(o)}}function gJ(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:WI(t.dom)}}function WI(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Xd(r));return e}function yJ({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;HI(n,r==0?0:r-e)}function HI(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Bu=null;function vJ(t){if(t.setActive)return t.setActive();if(Bu)return t.focus(Bu);let e=WI(t);t.focus(Bu==null?{get preventScroll(){return Bu={preventScroll:!0},!0}}:void 0),Bu||(Bu=!1,HI(e,0))}function KI(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Go(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let y=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(y<r){n=u,r=y,i=y&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&y&&(s=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?bJ(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:KI(n,i)}function bJ(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=za(r,1);if(s.top!=s.bottom&&oC(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function oC(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function xJ(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function wJ(t,e,n){let{node:r,offset:i}=KI(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function SJ(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function GI(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(oC(e,c))return GI(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function kJ(t,e){let n=t.dom.ownerDocument,r,i=0,s=dJ(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!oC(e,c)||(o=GI(t.dom,e,c),!o))return null}if(ri)for(let c=o;r&&c;c=Xd(c))c.draggable&&(r=void 0);if(o=xJ(o,e),r){if(Qs&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;hm&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=SJ(t,r,i,e))}a==null&&(a=wJ(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function AT(t){return t.top<t.bottom||t.left<t.right}function za(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(AT(r))return r}return Array.prototype.find.call(n,AT)||t.getBoundingClientRect()}const CJ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function YI(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=hm||Qs;if(r.nodeType==3)if(o&&(CJ.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=za(Go(r,i,i),n);if(Qs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=za(Go(r,i-1,i-1),-1);if(c.top==l.top){let u=za(Go(r,i,i+1),-1);if(u.top!=l.top)return of(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,of(za(Go(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ys(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Ax(l.getBoundingClientRect(),!1)}if(s==null&&i<ys(r)){let l=r.childNodes[i];if(l.nodeType==1)return Ax(l.getBoundingClientRect(),!0)}return Ax(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ys(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Go(l,ys(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return of(za(c,1),!1)}if(s==null&&i<ys(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Go(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return of(za(c,-1),!0)}return of(za(r.nodeType==3?Go(r):r,-n),n>=0)}function of(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Ax(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function XI(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function _J(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return XI(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=YI(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Go(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const AJ=/[\u0590-\u08ac]/;function NJ(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!AJ.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:XI(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:y}=t.domSelectionRange(),b=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),b}):r.pos==r.start()||r.pos==r.end()}let NT=null,TT=null,ET=!1;function TJ(t,e,n){return NT==e&&TT==n?ET:(NT=e,TT=n,ET=n=="up"||n=="down"?_J(t,e,n):NJ(t,e,n))}const Ss=0,PT=1,Sc=2,_o=3;class fm{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ss,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Sr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof QI){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof JI&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Sr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Sr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Sr(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Sr(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let y=this.children[f],b=p+y.size;if(s>p&&o<b)return y.setSelection(e-p-y.border,n-p-y.border,r,i);p=b}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Qs||ri)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let y=f,b;y;y=y.parentNode){if(b=y.nextSibling){b.nodeName=="BR"&&(a=l={node:b.parentNode,offset:Sr(b)+1});break}let v=y.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let y=f.childNodes[p-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Qs&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||d&&ri)&&Yc(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Yc(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Sc:PT,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=_o:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Sc:_o}r=o}this.dirty=Sc}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Sc:PT;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class JI extends fm{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ss&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class EJ extends fm{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xc extends fm{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=iu.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Xc(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&_o||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=_o&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ss){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ss}}slice(e,n,r){let i=Xc.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=b5(s,n,o,r)),e>0&&(s=b5(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class bl extends fm{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=iu.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=tR(u,r,n),c?l=new PJ(e,n,r,i,u,d||null,h,c,s,o+1):n.isText?new l1(e,n,r,i,u,h,s):new bl(e,n,r,i,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ne.empty)}return e}matchesNode(e,n,r){return this.dirty==Ss&&e.eq(this.node)&&Vy(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new jJ(this,o&&o.node,e);IJ(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Kt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Sc)&&(o&&this.protectLocalComposition(e,o),ZI(this.contentDOM,this.children,e),Jd&&RJ(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof rt)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=DJ(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new EJ(this,s,n,i);e.input.compositionNodes.push(o),this.children=b5(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==_o||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ss}updateOuterDeco(e){if(Vy(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=eR(this.dom,this.nodeDOM,v5(this.outerDeco,this.node,n),v5(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function MT(t,e,n,r,i){tR(r,e,t);let s=new bl(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class l1 extends bl{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==_o||this.dirty!=Ss&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ss||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ss,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new l1(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=_o)}get domAtom(){return!1}isText(e){return this.node.text==e}}class QI extends fm{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ss&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class PJ extends bl{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==_o)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ZI(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=jT(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof Xc){let l=r?r.previousSibling:t.lastChild;ZI(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=jT(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Xf=function(t){t&&(this.nodeName=t)};Xf.prototype=Object.create(null);const kc=[new Xf];function v5(t,e,n){if(t.length==0)return kc;let r=n?kc[0]:new Xf,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Xf(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Xf(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function eR(t,e,n,r){if(n==kc&&r==kc)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=kc[0]),i=l}MJ(i,a||kc[0],o)}return i}function MJ(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function tR(t,e,n){return eR(t,t,kc,v5(e,n,t.nodeType!=1))}function Vy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function jT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class jJ{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=LJ(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ss,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Xc.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==_o&&o.dom==o.contentDOM&&(o.dirty=Sc),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof bl){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=_o&&Vy(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Sc,d.updateChildren(i,o+1),d.dirty=Ss),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Vy(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=bl.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=bl.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new JI(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Xc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof l1)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ri||Ur)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new QI(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function LJ(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Xc)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function OJ(t,e){return t.type.side-e.type.side}function IJ(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let b=i[o++];b.widget&&(u?(d||(d=[u])).push(b):u=b)}if(u)if(d){d.sort(OJ);for(let b=0;b<d.length;b++)n(d[b],c,!!l)}else n(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+h.nodeSize;if(h.isText){let b=p;o<i.length&&i[o].from<b&&(b=i[o].from);for(let v=0;v<a.length;v++)a[v].to<b&&(b=a[v].to);b<p&&(l=h.cut(b-s),h=h.cut(0,b-s),p=b,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let y=h.isInline&&!h.isLeaf?a.filter(b=>!b.inline):a.slice();r(h,y,e.forChild(s,h),f),s=p}}function RJ(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function DJ(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function b5(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function aC(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(a1(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&et.isSelectable(d)&&i.parent&&!(d.isInline&&cJ(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new et(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);d=Math.min(d,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=lC(t,u,a,d)}return c}function nR(t){return t.editable?t.hasFocus():iR(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function oa(t,e=!1){let n=t.state.selection;if(rR(t,n),!!nR(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ur){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Yc(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)BJ(t);else{let{anchor:r,head:i}=n,s,o;LT&&!(n instanceof rt)&&(n.$from.parent.inlineContent||(s=OT(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=OT(t,n.to))),t.docView.setSelection(r,i,t,e),LT&&(s&&IT(s),o&&IT(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&FJ(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const LT=ri||Ur&&qI<63;function OT(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(ri&&i&&i.contentEditable=="false")return Nx(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Nx(i);if(s)return Nx(s)}}function Nx(t){return t.contentEditable="true",ri&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function IT(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function FJ(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!nR(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function BJ(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Sr(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Ai&&vl<=11&&(r.disabled=!0,r.disabled=!1)}function rR(t,e){if(e instanceof et){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(RT(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else RT(t)}function RT(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function lC(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||rt.between(e,n,r)}function DT(t){return t.editable&&!t.hasFocus()?!1:iR(t)}function iR(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function zJ(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Yc(e.node,e.offset,n.anchorNode,n.anchorOffset)}function x5(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&at.findFrom(s,e)}function qa(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function FT(t,e,n){let r=t.state.selection;if(r instanceof rt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return qa(t,new rt(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=x5(t.state,e);return i&&i instanceof et?qa(t,i):!1}else if(!(fs&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?et.isSelectable(s)?qa(t,new et(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):hm?qa(t,new rt(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof et&&r.node.isInline)return qa(t,new rt(e>0?r.$to:r.$from));{let i=x5(t.state,e);return i?qa(t,i):!1}}}function Uy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Jf(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function zu(t,e){return e<0?$J(t):VJ(t)}function $J(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Qs&&n.nodeType==1&&r<Uy(n)&&Jf(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Jf(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(sR(n))break;{let a=n.previousSibling;for(;a&&Jf(a,-1);)i=n.parentNode,s=Sr(a),a=a.previousSibling;if(a)n=a,r=Uy(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?w5(t,n,r):i&&w5(t,i,s)}function VJ(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Uy(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Jf(a,1))s=n,o=++r;else break}else{if(sR(n))break;{let a=n.nextSibling;for(;a&&Jf(a,1);)s=a.parentNode,o=Sr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Uy(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&w5(t,s,o)}function sR(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function UJ(t,e){for(;t&&e==t.childNodes.length&&!dm(t);)e=Sr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function qJ(t,e){for(;t&&!e&&!dm(t);)e=Sr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function w5(t,e,n){if(e.nodeType!=3){let s,o;(o=UJ(e,n))?(e=o,n=0):(s=qJ(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(a1(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&oa(t)},50)}function BT(t,e){let n=t.state.doc.resolve(e);if(!(Ur||hJ)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function zT(t,e,n){let r=t.state.selection;if(r instanceof rt&&!r.empty||n.indexOf("s")>-1||fs&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=x5(t.state,e);if(o&&o instanceof et)return qa(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof ws?at.near(o,e):at.findFrom(o,e);return a?qa(t,a):!1}return!1}function $T(t,e){if(!(t.state.selection instanceof rt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function VT(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function WJ(t){if(!ri||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;VT(t,r,"true"),setTimeout(()=>VT(t,r,"false"),20)}return!1}function HJ(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function KJ(t,e){let n=e.keyCode,r=HJ(e);if(n==8||fs&&n==72&&r=="c")return $T(t,-1)||zu(t,-1);if(n==46&&!e.shiftKey||fs&&n==68&&r=="c")return $T(t,1)||zu(t,1);if(n==13||n==27)return!0;if(n==37||fs&&n==66&&r=="c"){let i=n==37?BT(t,t.state.selection.from)=="ltr"?-1:1:-1;return FT(t,i,r)||zu(t,i)}else if(n==39||fs&&n==70&&r=="c"){let i=n==39?BT(t,t.state.selection.from)=="ltr"?1:-1:1;return FT(t,i,r)||zu(t,i)}else{if(n==38||fs&&n==80&&r=="c")return zT(t,-1,r)||zu(t,-1);if(n==40||fs&&n==78&&r=="c")return WJ(t)||zT(t,1,r)||zu(t,1);if(r==(fs?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function cC(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||iu.fromSchema(t.state.schema),a=dR(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=uR[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function oR(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new Fe(Ne.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Fe.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:f}=t.state,p=iu.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let b=o.appendChild(document.createElement("p"));y&&b.appendChild(p.serializeNode(f.text(y,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=JJ(n),hm&&QJ(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Gf.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!GJ.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=ZJ(UT(a,+u[1],+u[2]),u[4]);else if(a=Fe.maxOpen(YJ(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=UT(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const GJ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function YJ(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&lR(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=cR(o[o.length-1],s.length));let u=aR(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Ne.from(o)}return t}function aR(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ne.from(t));return t}function lR(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=lR(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ne.from(aR(n,t,i+1))))}}function cR(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,cR(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ne.empty,!0);return t.copy(n.append(r))}function S5(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=S5(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ne.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function UT(t,e,n){return e<t.openStart&&(t=new Fe(S5(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Fe(S5(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const uR={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let qT=null;function dR(){return qT||(qT=document.implementation.createHTMLDocument("title"))}let Tx=null;function XJ(t){let e=window.trustedTypes;return e?(Tx||(Tx=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Tx.createHTML(t)):t}function JJ(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=dR().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&uR[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=XJ(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function QJ(t){let e=t.querySelectorAll(Ur?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ZJ(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ne.from(l.create(r[a+1],i)),s++,o++}return new Fe(i,s,o)}const ii={},si={},eQ={touchstart:!0,touchmove:!0};class tQ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nQ(t){for(let e in ii){let n=ii[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{iQ(t,r)&&!uC(t,r)&&(t.editable||!(r.type in si))&&n(t,r)},eQ[e]?{passive:!0}:void 0)}ri&&t.dom.addEventListener("input",()=>null),k5(t)}function rl(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function rQ(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function k5(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>uC(t,r))})}function uC(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function iQ(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function sQ(t,e){!uC(t,e)&&ii[e.type]&&(t.editable||!(e.type in si))&&ii[e.type](t,e)}si.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!fR(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Zo&&Ur&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Jd&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,mc(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||KJ(t,n)?n.preventDefault():rl(t,"key")};si.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};si.keypress=(t,e)=>{let n=e;if(fR(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||fs&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof rt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function c1(t){return{left:t.clientX,top:t.clientY}}function oQ(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function dC(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Ed(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function aQ(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&et.isSelectable(r)?(Ed(t,new et(n),"pointer"),!0):!1}function lQ(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof et&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(et.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Ed(t,et.create(t.state.doc,i),"pointer"),!0):!1}function cQ(t,e,n,r,i){return dC(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?lQ(t,n):aQ(t,n))}function uQ(t,e,n,r){return dC(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function dQ(t,e,n,r){return dC(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||hQ(t,n,r)}function hQ(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ed(t,rt.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Ed(t,rt.create(r,a+1,a+1+o.content.size),"pointer");else if(et.isSelectable(o))Ed(t,et.create(r,a),"pointer");else continue;return!0}}function hC(t){return qy(t)}const hR=fs?"metaKey":"ctrlKey";ii.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=hC(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&oQ(n,t.input.lastClick)&&!n[hR]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(c1(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new fQ(t,o,n,!!r)):(s=="doubleClick"?uQ:dQ)(t,o.pos,o.inside,n)?n.preventDefault():rl(t,"pointer"))};class fQ{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[hR],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof et&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Qs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),rl(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>oa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(c1(e))),this.updateAllowDefault(e),this.allowDefault||!n?rl(this.view,"pointer"):cQ(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ri&&this.mightDrag&&!this.mightDrag.node.isAtom||Ur&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ed(this.view,at.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):rl(this.view,"pointer")}move(e){this.updateAllowDefault(e),rl(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ii.touchstart=t=>{t.input.lastTouch=Date.now(),hC(t),rl(t,"pointer")};ii.touchmove=t=>{t.input.lastTouch=Date.now(),rl(t,"pointer")};ii.contextmenu=t=>hC(t);function fR(t,e){return t.composing?!0:ri&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const pQ=Zo?5e3:-1;si.compositionstart=si.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof rt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),qy(t,!0),t.markCursor=null;else if(qy(t,!e.selection.empty),Qs&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}pR(t,pQ)};si.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,pR(t,20))};function pR(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>qy(t),e))}function mR(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=gQ());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function mQ(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=aJ(e.focusNode,e.focusOffset),r=lJ(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function gQ(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function qy(t,e=!1){if(!(Zo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),mR(t),e||t.docView&&t.docView.dirty){let n=aC(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function yQ(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Rp=Ai&&vl<15||Jd&&fJ<604;ii.copy=si.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Rp?null:n.clipboardData,o=r.content(),{dom:a,text:l}=cC(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):yQ(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function vQ(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function bQ(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Dp(t,r.value,null,i,e):Dp(t,r.textContent,r.innerHTML,i,e)},50)}function Dp(t,e,n,r,i){let s=oR(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||Fe.empty)))return!0;if(!s)return!1;let o=vQ(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function gR(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}si.paste=(t,e)=>{let n=e;if(t.composing&&!Zo)return;let r=Rp?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Dp(t,gR(r),r.getData("text/html"),i,n)?n.preventDefault():bQ(t,n)};class yR{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const xQ=fs?"altKey":"ctrlKey";function vR(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[xQ]}ii.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(c1(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof et?i.to-1:i.to))){if(r&&r.mightDrag)o=et.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=et.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=cC(t,a);(!n.dataTransfer.files.length||!Ur||qI>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Rp?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Rp||n.dataTransfer.setData("text/plain",c),t.dragging=new yR(u,vR(t,n),o)};ii.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};si.dragover=si.dragenter=(t,e)=>e.preventDefault();si.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(c1(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=oR(t,gR(n.dataTransfer),Rp?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&vR(t,n));if(t.someProp("handleDrop",p=>p(t,n,o||Fe.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?OI(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&et.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new et(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,b,v,x)=>p=x),c.setSelection(lC(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};ii.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&oa(t)},20))};ii.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ii.beforeinput=(t,e)=>{if(Ur&&Zo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,mc(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in si)ii[t]=si[t];function Fp(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Wy{constructor(e,n){this.toDOM=e,this.spec=n||Oc,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new ti(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Wy&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xl{constructor(e,n){this.attrs=e,this.spec=n||Oc}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new ti(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof xl&&Fp(this.attrs,e.attrs)&&Fp(this.spec,e.spec)}static is(e){return e.type instanceof xl}destroy(){}}class fC{constructor(e,n){this.attrs=e,this.spec=n||Oc}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new ti(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof fC&&Fp(this.attrs,e.attrs)&&Fp(this.spec,e.spec)}destroy(){}}class ti{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ti(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ti(e,e,new Wy(n,r))}static inline(e,n,r,i){return new ti(e,n,new xl(r,i))}static node(e,n,r,i){return new ti(e,n,new fC(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof xl}get widget(){return this.type instanceof Wy}}const Ku=[],Oc={};class Tn{constructor(e,n){this.local=e.length?e:Ku,this.children=n.length?n:Ku}static create(e,n){return n.length?Hy(n,e,0,Oc):Br}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Br||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Oc)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?wQ(this.children,o||[],e,n,r,i,s):o?new Tn(o.sort(Ic),Ku):Br}add(e,n){return n.length?this==Br?Tn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=xR(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Hy(u,a,c+1,Oc)),s+=3}});let o=bR(s?wR(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Tn(o.length?this.local.concat(o).sort(Ic):this.local,i||this.children)}remove(e){return e.length==0||this==Br?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Br?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Tn(i,r):Br}forChild(e,n){if(this==Br)return this;if(n.isLeaf)return Tn.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof xl){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Tn(i.sort(Ic),Ku);return r?new Ya([a,r]):a}return r||Br}eq(e){if(this==e)return!0;if(!(e instanceof Tn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return pC(this.localsInner(e))}localsInner(e){if(this==Br)return Ku;if(e.inlineContent||!this.local.some(xl.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof xl||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Tn.empty=new Tn([],[]);Tn.removeOverlap=pC;const Br=Tn.empty;class Ya{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Oc));return Ya.from(r)}forChild(e,n){if(n.isLeaf)return Tn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Br&&(s instanceof Ya?r=r.concat(s.members):r.push(s))}return Ya.from(r)}eq(e){if(!(e instanceof Ya)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?pC(r?n:n.sort(Ic)):Ku}static from(e){switch(e.length){case 0:return Br;case 1:return e[0];default:return new Ya(e.every(n=>n instanceof Tn)?e:e.reduce((n,r)=>n.concat(r instanceof Tn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function wQ(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,f,p,y)=>{let b=y-p-(f-h);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||h>x+u-d)continue;let S=a[v]+u-d;f>=S?a[v+1]=h<=S?-2:-1:h>=u&&b&&(a[v]+=b,a[v+1]+=b)}d+=b}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-i,{index:p,offset:y}=r.content.findIndex(d),b=r.maybeChild(p);if(b&&y==d&&y+b.nodeSize==f){let v=a[c+2].mapInner(n,b,u+1,t[c]+s+1,o);v!=Br?(a[c]=d,a[c+1]=f,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=SQ(a,t,e,n,i,s,o),u=Hy(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Tn(e.sort(Ic),a)}function bR(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ti(i.from+e,i.to+e,i.type))}return n}function SQ(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function xR(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function wR(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hy(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=xR(t,a,l+n);if(c){s=!0;let u=Hy(c,a,n+l+1,r);u!=Br&&i.push(l,l+a.nodeSize,u)}});let o=bR(s?wR(t):t,-n).sort(Ic);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Tn(o,i):Br}function Ic(t,e){return t.from-e.from||t.to-e.to}function pC(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),WT(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),WT(e,i,r.copy(s.from,r.to)));break}}}return e}function WT(t,e,n){for(;e<t.length&&Ic(n,t[e])>0;)e++;t.splice(e,0,n)}function Ex(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Br&&e.push(r)}),t.cursorWrapper&&e.push(Tn.create(t.state.doc,[t.cursorWrapper.deco])),Ya.from(e)}const kQ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CQ=Ai&&vl<=11;class _Q{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class AQ{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _Q,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ai&&vl<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),CQ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,kQ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(DT(this.view)){if(this.suppressingSelectionUpdates)return oa(this.view);if(Ai&&vl<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Yc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Xd(s))n.add(s);for(let s=e.anchorNode;s;s=Xd(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&DT(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Qs&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||EQ(e,d)!=f)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&a1(r)&&(c=aC(e))&&c.eq(at.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,oa(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),NQ(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||oa(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ai&&vl<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?Sr(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Sr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let HT=new WeakMap,KT=!1;function NQ(t){if(!HT.has(t)&&(HT.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Qs,KT)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),KT=!0}}function GT(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Yc(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function TQ(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return GT(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?GT(t,n):null}function EQ(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function PQ(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],a1(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ur&&t.input.lastKeyCode===8)for(let b=s;b>i;b--){let v=r.childNodes[b-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){s=b;break}if(!x||x.size)break}let d=t.state.doc,h=t.someProp("domParser")||Gf.fromSchema(t.state.schema),f=d.resolve(o),p=null,y=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:MQ,context:f});if(c&&c[0].pos!=null){let b=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=b),p={anchor:b+o,head:v+o}}return{doc:y,sel:p,from:o,to:a}}function MQ(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(ri&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||ri&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const jQ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function LQ(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=aC(t,E);if(z&&!t.state.selection.eq(z)){if(Ur&&Zo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,mc(13,"Enter"))))return;let H=t.state.tr.setSelection(z);E=="pointer"?H.setMeta("pointer",!0):E=="key"&&H.scrollIntoView(),s&&H.setMeta("composition",s),t.dispatch(H)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=PQ(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=RQ(d.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(Jd&&t.input.lastIOSEnter>Date.now()-225||Zo)&&i.some(E=>E.nodeType==1&&!jQ.test(E.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",E=>E(t,mc(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof rt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=YT(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let z=t.state.tr.setSelection(E);s&&z.setMeta("composition",s),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof rt&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Ai&&vl<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let y=c.doc.resolveNoCache(p.start-c.from),b=c.doc.resolveNoCache(p.endB-c.from),v=u.resolve(p.start),x=y.sameParent(b)&&y.parent.inlineContent&&v.end()>=p.endA,S;if((Jd&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!x&&y.pos<c.doc.content.size&&(!y.sameParent(b)||!y.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(y.pos,b.pos,"",""))&&(S=at.findFrom(c.doc.resolve(y.pos+1),1,!0))&&S.head>y.pos)&&t.someProp("handleKeyDown",E=>E(t,mc(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&IQ(u,p.start,p.endA,y,b)&&t.someProp("handleKeyDown",E=>E(t,mc(8,"Backspace")))){Zo&&Ur&&t.domObserver.suppressSelectionUpdates();return}Ur&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Zo&&!x&&y.start()!=b.start()&&b.parentOffset==0&&y.depth==b.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,b=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,mc(13,"Enter"))})},20));let _=p.start,A=p.endA,T=E=>{let z=E||t.state.tr.replace(_,A,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let H=YT(t,z.doc,c.sel);H&&!(Ur&&t.composing&&H.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(H.head==_||H.head==z.mapping.map(A)-1)||Ai&&H.empty&&H.head==_)&&z.setSelection(H)}return s&&z.setMeta("composition",s),z.scrollIntoView()},P;if(x){if(y.pos==b.pos){Ai&&vl<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>oa(t),20));let E=T(t.state.tr.delete(_,A)),z=u.resolve(p.start).marksAcross(u.resolve(p.endA));z&&E.ensureMarks(z),t.dispatch(E)}else if(p.endA==p.endB&&(P=OQ(y.parent.content.cut(y.parentOffset,b.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start())))){let E=T(t.state.tr);P.type=="add"?E.addMark(_,A,P.mark):E.removeMark(_,A,P.mark),t.dispatch(E)}else if(y.parent.child(y.index()).isText&&y.index()==b.index()-(b.textOffset?0:1)){let E=y.parent.textBetween(y.parentOffset,b.parentOffset),z=()=>T(t.state.tr.insertText(E,_,A));t.someProp("handleTextInput",H=>H(t,_,A,E,z))||t.dispatch(z())}}else t.dispatch(T())}function YT(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:lC(t,e.resolve(n.anchor),e.resolve(n.head))}function OQ(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Ne.from(c).eq(t))return{mark:a,type:o}}function IQ(t,e,n,r,i){if(n-e<=i.pos-r.pos||Px(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Px(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Px(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Px(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function RQ(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&XT(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&XT(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function XT(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class SR{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tQ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(t4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ZT(this),QT(this),this.nodeViews=e4(this),this.docView=MT(this.state.doc,JT(this),Ex(this),this.dom,this),this.domObserver=new AQ(this,(r,i,s,o)=>LQ(this,r,i,s,o)),this.domObserver.start(),nQ(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&k5(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(t4),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(mR(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=e4(this);FQ(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&k5(this),this.editable=ZT(this),QT(this);let l=Ex(this),c=JT(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&gJ(this);if(o){this.domObserver.stop();let f=d&&(Ai||Ur)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&DQ(i.selection,e.selection);if(d){let p=Ur?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=mQ(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=MT(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&zJ(this))?oa(this,f):(rR(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&yJ(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof et){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_T(this,n.getBoundingClientRect(),e)}else _T(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new yR(e.slice,e.move,i<0?void 0:et.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Ai){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&vJ(this.dom),oa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return kJ(this,e)}coordsAtPos(e,n=1){return YI(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return TJ(this,n||this.state,e)}pasteHTML(e,n){return Dp(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Dp(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return cC(this,e)}destroy(){this.docView&&(rQ(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ex(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sJ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return sQ(this,e)}domSelectionRange(){let e=this.domSelection();return e?ri&&this.root.nodeType===11&&uJ(this.dom.ownerDocument)==this.dom&&TQ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}SR.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function JT(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ti.node(0,t.state.doc.content.size,e)]}function QT(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ti.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ZT(t){return!t.someProp("editable",e=>e(t.state)===!1)}function DQ(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function e4(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function FQ(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function t4(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Nl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ky={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},BQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),zQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kr=0;kr<10;kr++)Nl[48+kr]=Nl[96+kr]=String(kr);for(var kr=1;kr<=24;kr++)Nl[kr+111]="F"+kr;for(var kr=65;kr<=90;kr++)Nl[kr]=String.fromCharCode(kr+32),Ky[kr]=String.fromCharCode(kr);for(var Mx in Nl)Ky.hasOwnProperty(Mx)||(Ky[Mx]=Nl[Mx]);function $Q(t){var e=BQ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||zQ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ky:Nl)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const VQ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),UQ=typeof navigator<"u"&&/Win/.test(navigator.platform);function qQ(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))VQ?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function WQ(t){let e=Object.create(null);for(let n in t)e[qQ(n)]=t[n];return e}function jx(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function HQ(t){return new Yr({props:{handleKeyDown:mC(t)}})}function mC(t){let e=WQ(t);return function(n,r){let i=$Q(r),s,o=e[jx(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[jx(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(UQ&&r.ctrlKey&&r.altKey)&&(s=Nl[r.keyCode])&&s!=i){let a=e[jx(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const KQ=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function kR(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const GQ=(t,e,n)=>{let r=kR(t,n);if(!r)return!1;let i=gC(r);if(!i){let o=r.blockRange(),a=o&&fh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(NR(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Qd(s,"end")||et.isSelectable(s)))for(let o=r.depth;;o--){let a=s1(t.doc,r.before(o),r.after(o),Fe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Qd(s,"end")?at.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):et.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},YQ=(t,e,n)=>{let r=kR(t,n);if(!r)return!1;let i=gC(r);return i?CR(t,i,e):!1},XQ=(t,e,n)=>{let r=_R(t,n);if(!r)return!1;let i=yC(r);return i?CR(t,i,e):!1};function CR(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=s1(t.doc,s,l,Fe.empty);if(!c||c.from!=s||c instanceof ur&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(rt.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Qd(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const JQ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=gC(r)}let o=s&&s.nodeBefore;return!o||!et.isSelectable(o)?!1:(e&&e(t.tr.setSelection(et.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function gC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function _R(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const QQ=(t,e,n)=>{let r=_R(t,n);if(!r)return!1;let i=yC(r);if(!i)return!1;let s=i.nodeAfter;if(NR(t,i,e,1))return!0;if(r.parent.content.size==0&&(Qd(s,"start")||et.isSelectable(s))){let o=s1(t.doc,r.before(),r.after(),Fe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Qd(s,"start")?at.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):et.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},ZQ=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=yC(r)}let o=s&&s.nodeAfter;return!o||!et.isSelectable(o)?!1:(e&&e(t.tr.setSelection(et.create(t.doc,s.pos)).scrollIntoView()),!0)};function yC(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const eZ=(t,e)=>{let n=t.selection,r=n instanceof et,i;if(r){if(n.node.isTextblock||!Fl(t.doc,n.from))return!1;i=n.from}else if(i=i1(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(et.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},tZ=(t,e)=>{let n=t.selection,r;if(n instanceof et){if(n.node.isTextblock||!Fl(t.doc,n.to))return!1;r=n.to}else if(r=i1(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},nZ=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&fh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},rZ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function AR(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const iZ=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=AR(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(at.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},sZ=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof ws||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=AR(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(rt.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},oZ=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Nd(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&fh(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},aZ=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(et.create(t.doc,i))),!0)};function lZ(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Fl(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function NR(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&lZ(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=Ne.empty;for(let v=o.length-1;v>=0;v--)p=Ne.from(o[v].create(null,p));p=Ne.from(i.copy(p));let y=t.tr.step(new fr(e.pos-1,f,e.pos,f,new Fe(p,1,0),o.length,!0)),b=y.doc.resolve(f+2*o.length);b.nodeAfter&&b.nodeAfter.type==i.type&&Fl(y.doc,b.pos)&&y.join(b.pos),n(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:at.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&fh(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&Qd(s,"start",!0)&&Qd(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let y=s,b=1;for(;!y.isTextblock;y=y.firstChild)b++;if(f.canReplace(f.childCount,f.childCount,y.content)){if(n){let v=Ne.empty;for(let S=p.length-1;S>=0;S--)v=Ne.from(p[S].copy(v));let x=t.tr.step(new fr(e.pos-p.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new Fe(v,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function TR(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(rt.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const cZ=TR(-1),uZ=TR(1);function dZ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&iC(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function n4(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function hZ(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return fZ(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function fZ(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new zy(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new zy(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=iC(s,n,r,e);return a?(t&&pZ(t,e,a,i,n),!0):!1}function pZ(t,e,n,r,i){let s=Ne.empty;for(let u=n.length-1;u>=0;u--)s=Ne.from(n[u].type.create(n[u].attrs,s));t.step(new fr(e.start-(r?2:0),e.end,e.start,e.end,new Fe(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Nd(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function mZ(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?gZ(e,n,t,s):yZ(e,n,s):!0:!1}}function gZ(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new fr(s-1,o,s,o,new Fe(Ne.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new zy(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=fh(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Fl(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function yZ(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,y=n.startIndex;p>y;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ne.empty:Ne.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new fr(d-(a?1:0),h+(l?1:0),d+1,h-1,new Fe((a?Ne.empty:Ne.from(i.copy(Ne.empty))).append(l?Ne.empty:Ne.from(i.copy(Ne.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function vZ(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Ne.from(c?t.create():null),d=new Fe(Ne.from(t.create(null,Ne.from(a.type.create(null,u)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new fr(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}function u1(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class d1{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...y)=>{const b=this.buildProps(c,n),v=f(...y)(b);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:u1({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class bZ{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function He(t,e,n){return t.config[e]===void 0&&t.parent?He(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?He(t.parent,e,n):null}):t.config[e]}function h1(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function ER(t){const e=[],{nodeExtensions:n,markExtensions:r}=h1(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=He(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=He(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof h?.default=="function"&&(h.default=h.default()),h?.isRequired&&h?.default===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function mr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Jn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function C5(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Jn(n,r),{})}function PR(t){return typeof t=="function"}function wt(t,e=void 0,...n){return PR(t)?e?t.bind(e)(...n):t(...n):t}function xZ(t={}){return Object.keys(t).length===0&&t.constructor===Object}function wZ(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function r4(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):wZ(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function i4(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&xZ(n)?!1:n!=null))}function SZ(t,e){var n;const r=ER(t),{nodeExtensions:i,markExtensions:s}=h1(t),o=(n=i.find(c=>He(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,x)=>{const S=He(x,"extendNodeSchema",d);return{...v,...S?S(c):{}}},{}),f=i4({...h,content:wt(He(c,"content",d)),marks:wt(He(c,"marks",d)),group:wt(He(c,"group",d)),inline:wt(He(c,"inline",d)),atom:wt(He(c,"atom",d)),selectable:wt(He(c,"selectable",d)),draggable:wt(He(c,"draggable",d)),code:wt(He(c,"code",d)),whitespace:wt(He(c,"whitespace",d)),linebreakReplacement:wt(He(c,"linebreakReplacement",d)),defining:wt(He(c,"defining",d)),isolating:wt(He(c,"isolating",d)),attrs:Object.fromEntries(u.map(v=>{var x;return[v.name,{default:(x=v?.attribute)===null||x===void 0?void 0:x.default}]}))}),p=wt(He(c,"parseHTML",d));p&&(f.parseDOM=p.map(v=>r4(v,u)));const y=He(c,"renderHTML",d);y&&(f.toDOM=v=>y({node:v,HTMLAttributes:C5(v,u)}));const b=He(c,"renderText",d);return b&&(f.toText=b),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,v)=>{const x=He(v,"extendMarkSchema",d);return{...b,...x?x(c):{}}},{}),f=i4({...h,inclusive:wt(He(c,"inclusive",d)),excludes:wt(He(c,"excludes",d)),group:wt(He(c,"group",d)),spanning:wt(He(c,"spanning",d)),code:wt(He(c,"code",d)),attrs:Object.fromEntries(u.map(b=>{var v;return[b.name,{default:(v=b?.attribute)===null||v===void 0?void 0:v.default}]}))}),p=wt(He(c,"parseHTML",d));p&&(f.parseDOM=p.map(b=>r4(b,u)));const y=He(c,"renderHTML",d);return y&&(f.toDOM=b=>y({mark:b,HTMLAttributes:C5(b,u)})),[c.name,f]}));return new kI({topNode:o,nodes:a,marks:l})}function Lx(t,e){return e.nodes[t]||e.marks[t]||null}function s4(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function vC(t,e){const n=iu.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const kZ=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function bC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class f1{constructor(e){this.find=e.find,this.handler=e.handler}}const CZ=(t,e)=>{if(bC(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function qg(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=kZ(c)+s;return o.forEach(h=>{if(u)return;const f=CZ(d,h.find);if(!f)return;const p=l.state.tr,y=u1({state:l.state,transaction:p}),b={from:r-(f[0].length-s.length),to:i},{commands:v,chain:x,can:S}=new d1({editor:n,state:y});h.handler({state:y,range:b,match:f,commands:v,chain:x,can:S})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function _Z(t){const{editor:e,rules:n}=t,r=new Yr({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=vC(Ne.from(u),o.schema);const{from:d}=l,h=d+u.length;qg({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return qg({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&qg({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?qg({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function AZ(t){return Object.prototype.toString.call(t).slice(8,-1)}function Wg(t){return AZ(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function p1(t,e){const n={...t};return Wg(t)&&Wg(e)&&Object.keys(e).forEach(r=>{Wg(e[r])&&Wg(t[r])?n[r]=p1(t[r],e[r]):n[r]=e[r]}),n}class Tl{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=wt(He(this,"addOptions",{name:this.name}))),this.storage=wt(He(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Tl(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>p1(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Tl(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=wt(He(n,"addOptions",{name:n.name})),n.storage=wt(He(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>c?.type.name===n.name))return!1;const l=o.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function NZ(t){return typeof t=="number"}class TZ{constructor(e){this.find=e.find,this.handler=e.handler}}const EZ=(t,e,n)=>{if(bC(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function PZ(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new d1({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const y=Math.max(r,p),b=Math.min(i,p+f.content.size),v=f.textBetween(y-p,b-p,void 0,"￼");EZ(v,s.find,o).forEach(S=>{if(S.index===void 0)return;const _=y+S.index+1,A=_+S[0].length,T={from:n.tr.mapping.map(_),to:n.tr.mapping.map(A)},P=s.handler({state:n,range:T,match:S,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(P)})}),d.every(f=>f!==null)}let Hg=null;const MZ=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function jZ(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:f,pasteEvt:p})=>{const y=u.tr,b=u1({state:u,transaction:y});if(!(!PZ({editor:e,state:b,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new Yr({view(d){const h=p=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(p.target)?d.dom.parentElement:null,r&&(Hg=e)},f=()=>{Hg&&(Hg=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const f=Hg;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=h,i=!!p?.includes("data-pm-slice"),!1}}},appendTransaction:(d,h,f)=>{const p=d[0],y=p.getMeta("uiEvent")==="paste"&&!i,b=p.getMeta("uiEvent")==="drop"&&!s,v=p.getMeta("applyPasteRules"),x=!!v;if(!y&&!b&&!x)return;if(x){let{text:A}=v;typeof A=="string"?A=A:A=vC(Ne.from(A),f.schema);const{from:T}=v,P=T+A.length,E=MZ(A);return l({rule:u,state:f,from:T,to:{b:P},pasteEvt:E})}const S=h.doc.content.findDiffStart(f.doc.content),_=h.doc.content.findDiffEnd(f.doc.content);if(!(!NZ(S)||!_||S===_.b))return l({rule:u,state:f,from:S,to:_,pasteEvt:o})}}))}function LZ(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class gd{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=gd.resolve(e),this.schema=SZ(this.extensions,n),this.setupExtensions()}static resolve(e){const n=gd.sort(gd.flatten(e)),r=LZ(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=He(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=He(r,"priority")||100,o=He(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Lx(n.name,this.schema)},i=He(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=gd.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Lx(o.name,this.schema)},l=[],c=He(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&He(o,"exitable",a)&&(u.ArrowRight=()=>Tl.handleExit({editor:e,mark:o})),c){const y=Object.fromEntries(Object.entries(c()).map(([b,v])=>[b,()=>v({editor:e})]));u={...u,...y}}const d=HQ(u);l.push(d);const h=He(o,"addInputRules",a);s4(o,e.options.enableInputRules)&&h&&r.push(...h());const f=He(o,"addPasteRules",a);s4(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=He(o,"addProseMirrorPlugins",a);if(p){const y=p();l.push(...y)}return l}).flat();return[_Z({editor:e,rules:r}),...jZ({editor:e,rules:i}),...s]}get attributes(){return ER(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=h1(this.extensions);return Object.fromEntries(n.filter(r=>!!He(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:mr(r.name,this.schema)},o=He(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,h)=>{const f=C5(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Lx(e.name,this.schema)};e.type==="mark"&&(!((n=wt(He(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=He(e,"onBeforeCreate",r),s=He(e,"onCreate",r),o=He(e,"onUpdate",r),a=He(e,"onSelectionUpdate",r),l=He(e,"onTransaction",r),c=He(e,"onFocus",r),u=He(e,"onBlur",r),d=He(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class oi{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=wt(He(this,"addOptions",{name:this.name}))),this.storage=wt(He(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new oi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>p1(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new oi({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=wt(He(n,"addOptions",{name:n.name})),n.storage=wt(He(n,"addStorage",{name:n.name,options:n.options})),n}}function MR(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const f=o?.[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l?.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function jR(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const OZ=oi.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yr({key:new Qi("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=jR(n);return MR(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),IZ=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),RZ=(t=!1)=>({commands:e})=>e.setContent("",t),DZ=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const p=fh(f);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,y)}(p||p===0)&&e.lift(f,p)})}),!0},FZ=t=>e=>t(e),BZ=()=>({state:t,dispatch:e})=>sZ(t,e),zZ=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new rt(r.doc.resolve(o-1))),!0},$Z=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},VZ=t=>({tr:e,state:n,dispatch:r})=>{const i=mr(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},UZ=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},qZ=()=>({state:t,dispatch:e})=>KQ(t,e),WZ=()=>({commands:t})=>t.keyboardShortcut("Enter"),HZ=()=>({state:t,dispatch:e})=>iZ(t,e);function Gy(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:bC(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function LR(t,e,n={}){return t.find(r=>r.type===e&&Gy(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function o4(t,e,n={}){return!!LR(t,e,n)}function xC(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!LR([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&o4([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&o4([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function zl(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const KZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=zl(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=xC(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=rt.create(o,d.from,d.to);n.setSelection(h)}}return!0},GZ=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function OR(t){return t instanceof rt}function Cc(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function IR(t,e=null){if(!e)return null;const n=at.atStart(t),r=at.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?rt.create(t,Cc(0,i,s),Cc(t.content.size,i,s)):rt.create(t,Cc(e,i,s),Cc(e,i,s))}function YZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function wC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const XZ=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(wC()||YZ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!OR(n.state.selection))return o(),!0;const a=IR(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},JZ=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),QZ=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),RR=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&RR(r)}return t};function Kg(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return RR(n)}function Bp(t,e,n){if(t instanceof yl||t instanceof Ne)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ne.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Bp("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new kI({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Gf.fromSchema(l).parseSlice(Kg(t),n.parseOptions):Gf.fromSchema(l).parse(Kg(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Gf.fromSchema(e);return n.slice?s.parseSlice(Kg(t),n.parseOptions).content:s.parse(Kg(t),n.parseOptions)}return Bp("",e,n)}function ZZ(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof ur||i instanceof fr))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(at.near(t.doc.resolve(o),n))}const eee=t=>!("type"in t),tee=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=b=>{s.emit("contentError",{editor:s,error:b,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(b){l(b)}try{a=Bp(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(b){return l(b),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((eee(a)?a:[a]).forEach(b=>{b.check(),h=h?b.isText&&b.marks.length===0:!1,f=f?b.isBlock:!1}),u===d&&f){const{parent:b}=r.doc.resolve(u);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(u-=1,d+=1)}let y;if(h){if(Array.isArray(e))y=e.map(b=>b.text||"").join("");else if(e instanceof Ne){let b="";e.forEach(v=>{v.text&&(b+=v.text)}),y=b}else typeof e=="object"&&e&&e.text?y=e.text:y=e;r.insertText(y,u,d)}else y=a,r.replaceWith(u,d,y);n.updateSelection&&ZZ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:y})}return!0},nee=()=>({state:t,dispatch:e})=>eZ(t,e),ree=()=>({state:t,dispatch:e})=>tZ(t,e),iee=()=>({state:t,dispatch:e})=>GQ(t,e),see=()=>({state:t,dispatch:e})=>QQ(t,e),oee=()=>({state:t,dispatch:e,tr:n})=>{try{const r=i1(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},aee=()=>({state:t,dispatch:e,tr:n})=>{try{const r=i1(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},lee=()=>({state:t,dispatch:e})=>YQ(t,e),cee=()=>({state:t,dispatch:e})=>XQ(t,e);function DR(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function uee(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))wC()||DR()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const dee=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=uee(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function zp(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?mr(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),p=Math.min(i,h+d.nodeSize);a.push({node:d,from:f,to:p})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Gy(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const hee=(t,e={})=>({state:n,dispatch:r})=>{const i=mr(t,n.schema);return zp(n,i,e)?nZ(n,r):!1},fee=()=>({state:t,dispatch:e})=>oZ(t,e),pee=t=>({state:e,dispatch:n})=>{const r=mr(t,e.schema);return mZ(r)(e,n)},mee=()=>({state:t,dispatch:e})=>rZ(t,e);function m1(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function a4(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const gee=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=m1(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mr(t,r.schema)),a==="mark"&&(o=zl(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,a4(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(a4(d.attrs,e)))})})}),!0):!1},yee=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),vee=()=>({tr:t,dispatch:e})=>{if(e){const n=new ws(t.doc);t.setSelection(n)}return!0},bee=()=>({state:t,dispatch:e})=>JQ(t,e),xee=()=>({state:t,dispatch:e})=>ZQ(t,e),wee=()=>({state:t,dispatch:e})=>aZ(t,e),See=()=>({state:t,dispatch:e})=>uZ(t,e),kee=()=>({state:t,dispatch:e})=>cZ(t,e);function _5(t,e,n={},r={}){return Bp(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Cee=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=_5(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function FR(t,e){const n=zl(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function _ee(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function BR(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function SC(t){return e=>BR(e.$from,t)}function Aee(t,e){const n={from:0,to:t.content.size};return MR(t,n,e)}function Nee(t,e){const n=mr(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function Tee(t,e){const n=m1(typeof e=="string"?e:e.name,t.schema);return n==="node"?Nee(t,e):n==="mark"?FR(t,e):{}}function zR(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=xC(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function $0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function A5(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?zl(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Gy(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const f=d.pos,p=h.pos;t.doc.nodesBetween(f,p,(y,b)=>{if(!y.isText&&!y.marks.length)return;const v=Math.max(f,b),x=Math.min(p,b+y.nodeSize),S=x-v;o+=S,a.push(...y.marks.map(_=>({mark:_,from:v,to:x})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Gy(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function Eee(t,e,n={}){if(!e)return zp(t,null,n)||A5(t,null,n);const r=m1(e,t.schema);return r==="node"?zp(t,e,n):r==="mark"?A5(t,e,n):!1}function l4(t,e){const{nodeExtensions:n}=h1(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=wt(He(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function kC(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(kC(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function Pee(t){return t instanceof et}function Mee(t,e,n){var r;const{selection:i}=e;let s=null;if(OR(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=f&&p}return!c}),c})}const jee=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=zl(t,r.schema);if(i)if(o){const c=FR(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,f)=>{const p=Math.max(f,u),y=Math.min(f+h.nodeSize,d);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&n.addMark(p,y,l.create({...v.attrs,...e}))}):n.addMark(p,y,l.create(e))})});return Mee(r,n,l)},Lee=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Oee=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=mr(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>n4(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>n4(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Iee=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Cc(t,0,r.content.size),s=et.create(r,i);e.setSelection(s)}return!0},Ree=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=rt.atStart(r).from,a=rt.atEnd(r).to,l=Cc(i,o,a),c=Cc(s,o,a),u=rt.create(r,l,c);e.setSelection(u)}return!0},Dee=t=>({state:e,dispatch:n})=>{const r=mr(t,e.schema);return vZ(r)(e,n)};function c4(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}const Fee=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=$0(c,a.node().type.name,a.node().attrs);if(s instanceof et&&s.node.isBlock)return!a.parentOffset||!Nd(o,a.pos)?!1:(r&&(t&&c4(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:_ee(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,p=Nd(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&Nd(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:u}]:void 0),r){if(p&&(s instanceof rt&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const y=e.mapping.map(a.before()),b=e.doc.resolve(y);a.node(-1).canReplaceWith(b.index(),b.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&c4(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},Bee=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=mr(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=Ne.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-x;E>=l.depth-3;E-=1)v=Ne.from(l.node(E).copy(v));const S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,_={...$0(h,l.node().type.name,l.node().attrs),...e},A=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(_))||void 0;v=v.append(Ne.from(a.createAndFill(null,A)||void 0));const T=l.before(l.depth-(x-1));n.replace(T,l.after(-S),new Fe(v,4-x,0));let P=-1;n.doc.nodesBetween(T,n.doc.content.size,(E,z)=>{if(P>-1)return!1;E.isTextblock&&E.content.size===0&&(P=z+1)}),P>-1&&n.setSelection(rt.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...$0(h,d.type.name,d.attrs),...e},y={...$0(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const b=f?[{type:a,attrs:p},{type:f,attrs:y}]:[{type:a,attrs:p}];if(!Nd(n.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:x}=r,{splittableMarks:S}=s.extensionManager,_=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,b).scrollIntoView(),!_||!i)return!0;const A=_.filter(T=>S.includes(T.type.name));n.ensureMarks(A)}return!0},Ox=(t,e)=>{const n=SC(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Fl(t.doc,n.pos)&&t.join(n.pos),!0},Ix=(t,e)=>{const n=SC(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Fl(t.doc,r)&&t.join(r),!0},zee=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,f=mr(t,o.schema),p=mr(e,o.schema),{selection:y,storedMarks:b}=o,{$from:v,$to:x}=y,S=v.blockRange(x),_=b||y.$to.parentOffset&&y.$from.marks();if(!S)return!1;const A=SC(T=>l4(T.type.name,d))(y);if(S.depth>=1&&A&&S.depth-A.depth<=1){if(A.node.type===f)return c.liftListItem(p);if(l4(A.node.type.name,d)&&f.validContent(A.node.content)&&a)return l().command(()=>(s.setNodeMarkup(A.pos,f),!0)).command(()=>Ox(s,f)).command(()=>Ix(s,f)).run()}return!n||!_||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Ox(s,f)).command(()=>Ix(s,f)).run():l().command(()=>{const T=u().wrapInList(f,r),P=_.filter(E=>h.includes(E.type.name));return s.ensureMarks(P),T?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Ox(s,f)).command(()=>Ix(s,f)).run()},$ee=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=zl(t,r.schema);return A5(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},Vee=(t,e,n={})=>({state:r,commands:i})=>{const s=mr(t,r.schema),o=mr(e,r.schema),a=zp(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},Uee=(t,e={})=>({state:n,commands:r})=>{const i=mr(t,n.schema);return zp(n,i,e)?r.lift(i):r.wrapIn(i,e)},qee=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},Wee=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},Hee=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=zl(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:f}=a;const p=(s=c.marks().find(b=>b.type===l))===null||s===void 0?void 0:s.attrs,y=xC(c,l,p);y&&(h=y.from,f=y.to),n.removeMark(h,f,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},Kee=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=m1(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=mr(t,r.schema)),a==="mark"&&(o=zl(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,f,p;n.selection.empty?r.doc.nodesBetween(c,u,(y,b)=>{s&&s===y.type&&(f=Math.max(b,c),p=Math.min(b+y.nodeSize,u),d=b,h=y)}):r.doc.nodesBetween(c,u,(y,b)=>{b<c&&s&&s===y.type&&(f=Math.max(b,c),p=Math.min(b+y.nodeSize,u),d=b,h=y),b>=c&&b<=u&&(s&&s===y.type&&n.setNodeMarkup(b,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(v=>{if(o===v.type){const x=Math.max(b,c),S=Math.min(b+y.nodeSize,u);n.addMark(x,S,o.create({...v.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(y=>{o===y.type&&n.addMark(f,p,o.create({...y.attrs,...e}))}))}),!0):!1},Gee=(t,e={})=>({state:n,dispatch:r})=>{const i=mr(t,n.schema);return dZ(i,e)(n,r)},Yee=(t,e={})=>({state:n,dispatch:r})=>{const i=mr(t,n.schema);return hZ(i,e)(n,r)};var Xee=Object.freeze({__proto__:null,blur:IZ,clearContent:RZ,clearNodes:DZ,command:FZ,createParagraphNear:BZ,cut:zZ,deleteCurrentNode:$Z,deleteNode:VZ,deleteRange:UZ,deleteSelection:qZ,enter:WZ,exitCode:HZ,extendMarkRange:KZ,first:GZ,focus:XZ,forEach:JZ,insertContent:QZ,insertContentAt:tee,joinBackward:iee,joinDown:ree,joinForward:see,joinItemBackward:oee,joinItemForward:aee,joinTextblockBackward:lee,joinTextblockForward:cee,joinUp:nee,keyboardShortcut:dee,lift:hee,liftEmptyBlock:fee,liftListItem:pee,newlineInCode:mee,resetAttributes:gee,scrollIntoView:yee,selectAll:vee,selectNodeBackward:bee,selectNodeForward:xee,selectParentNode:wee,selectTextblockEnd:See,selectTextblockStart:kee,setContent:Cee,setMark:jee,setMeta:Lee,setNode:Oee,setNodeSelection:Iee,setTextSelection:Ree,sinkListItem:Dee,splitBlock:Fee,splitListItem:Bee,toggleList:zee,toggleMark:$ee,toggleNode:Vee,toggleWrap:Uee,undoInputRule:qee,unsetAllMarks:Wee,unsetMark:Hee,updateAttributes:Kee,wrapIn:Gee,wrapInList:Yee});const Jee=oi.create({name:"commands",addCommands(){return{...Xee}}}),Qee=oi.create({name:"drop",addProseMirrorPlugins(){return[new Yr({key:new Qi("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Zee=oi.create({name:"editable",addProseMirrorPlugins(){return[new Yr({key:new Qi("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ete=new Qi("focusEvents"),tte=oi.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Yr({key:ete,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),nte=oi.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,p=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,y=p.parent.type.spec.isolating,b=d.pos-d.parentOffset,v=y&&p.parent.childCount===1?b===d.pos:at.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return wC()||DR()?s:i},addProseMirrorPlugins(){return[new Yr({key:new Qi("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=at.atStart(e.doc).from,c=at.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!kC(n.doc))return;const h=n.tr,f=u1({state:n,transaction:h}),{commands:p}=new d1({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),rte=oi.create({name:"paste",addProseMirrorPlugins(){return[new Yr({key:new Qi("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ite=oi.create({name:"tabindex",addProseMirrorPlugins(){return[new Yr({key:new Qi("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class gc{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new gc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new gc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new gc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new gc(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new gc(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const ste=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function ote(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class ate extends bZ{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=ote(ste,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=PR(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[Zee,OZ.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Jee,tte,nte,ite,Qee,rte].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new gd(i,this)}createCommandManager(){this.commandManager=new d1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=_5(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=_5(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=IR(n,this.options.autofocus);this.view=new SR(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:md.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Tee(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return Eee(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return vC(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return Aee(this.state.doc,{blockSeparator:n,textSerializers:{...jR(this.schema),...r}})}get isEmpty(){return kC(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new gc(n,this)}get $doc(){return this.$pos(0)}}function Zd(t){return new f1({find:t.find,handler:({state:e,range:n,match:r})=>{const i=wt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(zR(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(y=>y===t.type&&y!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function $R(t){return new f1({find:t.find,handler:({state:e,range:n,match:r})=>{const i=wt(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function N5(t){return new f1({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=wt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function $p(t){return new f1({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=wt(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&iC(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,p=h||d.$to.parentOffset&&d.$from.marks();if(p){const y=p.filter(b=>f.includes(b.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Fl(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class nr{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=wt(He(this,"addOptions",{name:this.name}))),this.storage=wt(He(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new nr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>p1(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new nr(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=wt(He(n,"addOptions",{name:n.name})),n.storage=wt(He(n,"addStorage",{name:n.name,options:n.options})),n}}function eh(t){return new TZ({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=wt(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(zR(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(b=>b===t.type&&b!==p.mark.type)).filter(p=>p.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function lte(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VR={exports:{}},Rx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4;function cte(){if(u4)return Rx;u4=1;var t=Ze;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),y=p[0].inst,b=p[1];return s(function(){y.value=f,y.getSnapshot=h,l(y)&&b({inst:y})},[d,f,h]),i(function(){return l(y)&&b({inst:y}),d(function(){l(y)&&b({inst:y})})},[d]),o(f),f}function l(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!n(d,f)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Rx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Rx}VR.exports=cte();var CC=VR.exports;const ute=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},dte=({contentComponent:t})=>{const e=CC.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Ze.createElement(Ze.Fragment,null,Object.values(e))};function hte(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Sy.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class fte extends Ze.Component{constructor(e){var n;super(e),this.editorContentRef=Ze.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=hte(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Ze.createElement(Ze.Fragment,null,Ze.createElement("div",{ref:ute(n,this.editorContentRef),...r}),e?.contentComponent&&Ze.createElement(dte,{contentComponent:e.contentComponent}))}}const pte=B.forwardRef((t,e)=>{const n=Ze.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ze.createElement(fte,{key:n,innerRef:e,...t})}),mte=Ze.memo(pte);var gte=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},yte=lte(gte),UR={exports:{}},Dx={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d4;function vte(){if(d4)return Dx;d4=1;var t=Ze,e=CC;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Dx.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var p=s(null);if(p.current===null){var y={hasValue:!1,value:null};p.current=y}else y=p.current;p=a(function(){function v(T){if(!x){if(x=!0,S=T,T=h(T),f!==void 0&&y.hasValue){var P=y.value;if(f(P,T))return _=P}return _=T}if(P=_,r(S,T))return P;var E=h(T);return f!==void 0&&f(P,E)?P:(S=T,_=E)}var x=!1,S,_,A=d===void 0?null:d;return[function(){return v(u())},A===null?void 0:function(){return v(A())}]},[u,d,h,f]);var b=i(c,p[0],p[1]);return o(function(){y.hasValue=!0,y.value=b},[b]),l(b),b},Dx}UR.exports=vte();var bte=UR.exports;const xte=typeof window<"u"?B.useLayoutEffect:B.useEffect;class wte{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function Ste(t){var e;const[n]=B.useState(()=>new wte(t.editor)),r=bte.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:yte);return xte(()=>n.watch(t.editor),[t.editor,n]),B.useDebugValue(r),r}const kte=!1,T5=typeof window>"u",Cte=T5||!!(typeof window<"u"&&window.next);class _C{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return T5||Cte?null:this.createEditor();if(this.options.current.immediatelyRender&&T5&&kte)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new ate(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?_C.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function _te(t={},e=[]){const n=B.useRef(t);n.current=t;const[r]=B.useState(()=>new _C(n)),i=CC.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return B.useDebugValue(i),B.useEffect(r.onRender(e)),Ste({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const Ate=B.createContext({editor:null});Ate.Consumer;const Nte=B.createContext({onDragStart:void 0}),Tte=()=>B.useContext(Nte);Ze.forwardRef((t,e)=>{const{onDragStart:n}=Tte(),r=t.as||"div";return Ze.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Ete=/^\s*>\s$/,Pte=nr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[$p({find:Ete,type:this.type})]}}),Mte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,jte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Lte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Ote=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Ite=Tl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Zd({find:Mte,type:this.type}),Zd({find:Lte,type:this.type})]},addPasteRules(){return[eh({find:jte,type:this.type}),eh({find:Ote,type:this.type})]}}),Rte="listItem",h4="textStyle",f4=/^\s*([-+*])\s$/,Dte=nr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rte,this.editor.getAttributes(h4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=$p({find:f4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$p({find:f4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(h4),editor:this.editor})),[t]}}),Fte=/(^|[^`])`([^`]+)`(?!`)/,Bte=/(^|[^`])`([^`]+)`(?!`)/g,zte=Tl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Zd({find:Fte,type:this.type})]},addPasteRules(){return[eh({find:Bte,type:this.type})]}}),$te=/^```([a-z]+)?[\s\n]$/,Vte=/^~~~([a-z]+)?[\s\n]$/,Ute=nr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Jn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(at.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[N5({find:$te,type:this.type,getAttributes:t=>({language:t[1]})}),N5({find:Vte,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Yr({key:new Qi("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(rt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),qte=nr.create({name:"doc",topNode:!0,content:"block+"});function Wte(t={}){return new Yr({view(e){return new Hte(e,t)}})}class Hte{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let p=f.getBoundingClientRect(),y=d?p.bottom:p.top;d&&h&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;r={left:p.left,right:p.right,top:y-b,bottom:y+b}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=OI(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Kte=oi.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Wte(this.options)]}});class En extends at{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return En.valid(r)?new En(r):at.near(r)}content(){return Fe.empty}eq(e){return e instanceof En&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new En(e.resolve(n.pos))}getBookmark(){return new AC(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Gte(e)||!Yte(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&En.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(En.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!et.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(En.valid(a))return a}return null}}}En.prototype.visible=!1;En.findFrom=En.findGapCursorFrom;at.jsonID("gapcursor",En);class AC{constructor(e){this.pos=e}map(e){return new AC(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return En.valid(n)?new En(n):at.near(n)}}function Gte(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Yte(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Xte(){return new Yr({props:{decorations:ene,createSelectionBetween(t,e,n){return e.pos==n.pos&&En.valid(n)?new En(n):null},handleClick:Qte,handleKeyDown:Jte,handleDOMEvents:{beforeinput:Zte}}})}const Jte=mC({ArrowLeft:Gg("horiz",-1),ArrowRight:Gg("horiz",1),ArrowUp:Gg("vert",-1),ArrowDown:Gg("vert",1)});function Gg(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof rt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=En.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new En(c))),!0):!1}}function Qte(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!En.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&et.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new En(r))),!0)}function Zte(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof En))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ne.empty;for(let o=r.length-1;o>=0;o--)i=Ne.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Fe(i,0,0));return s.setSelection(rt.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function ene(t){if(!(t.selection instanceof En))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Tn.create(t.doc,[ti.widget(t.selection.head,e,{key:"gapcursor"})])}const tne=oi.create({name:"gapCursor",addProseMirrorPlugins(){return[Xte()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=wt(He(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),nne=nr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Jn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),rne=nr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Jn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>N5({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Yy=200,pr=function(){};pr.prototype.append=function(e){return e.length?(e=pr.from(e),!this.length&&e||e.length<Yy&&this.leafAppend(e)||this.length<Yy&&e.leafPrepend(this)||this.appendInner(e)):this};pr.prototype.prepend=function(e){return e.length?pr.from(e).append(this):this};pr.prototype.appendInner=function(e){return new ine(this,e)};pr.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?pr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};pr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};pr.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};pr.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};pr.from=function(e){return e instanceof pr?e:e&&e.length?new qR(e):pr.empty};var qR=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Yy)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Yy)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(pr);pr.empty=new qR([]);var ine=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(pr);const sne=500;class Ws{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new uo(d.map));let f=d.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new uo(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Ws(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new uo(e.mapping.maps[u],d,n),f;(f=l&&l.merge(h))&&(h=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>ane&&(a=one(a,c),o-=c),new Ws(a.append(s),o)}remapping(e,n){let r=new Op;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ws(this.items.append(e.map(n=>new uo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(h.step){let y=e.steps[f].invert(e.docs[f]),b=h.selection&&h.selection.map(s.slice(l+1,f));b&&a++,r.push(new uo(p,y,b))}else r.push(new uo(p))},i);let c=[];for(let h=n;h<o;h++)c.push(new uo(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new Ws(u,a);return d.emptyItemCount()>sne&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new uo(c.invert(),l,u),h,f=i.length-1;(h=i.length&&i[f].merge(d))?i[f]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new Ws(pr.from(i.reverse()),s)}}Ws.empty=new Ws(pr.empty,0);function one(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class uo{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new uo(n.getMap().invert(),n,this.selection)}}}class Wa{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const ane=20;function lne(t,e,n,r){let i=n.getMeta(Rc),s;if(i)return i.historyState;n.getMeta(dne)&&(t=new Wa(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Rc))return o.getMeta(Rc).redo?new Wa(t.done.addTransform(n,void 0,r,V0(e)),t.undone,p4(n.mapping.maps),t.prevTime,t.prevComposition):new Wa(t.done,t.undone.addTransform(n,void 0,r,V0(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!cne(n,t.prevRanges)),c=o?Fx(t.prevRanges,n.mapping):p4(n.mapping.maps);return new Wa(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,V0(e)),Ws.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Wa(t.done.rebased(n,s),t.undone.rebased(n,s),Fx(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Wa(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Fx(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function cne(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function p4(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Fx(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function une(t,e,n){let r=V0(e),i=Rc.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Wa(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Rc,{redo:n,historyState:l})}let Bx=!1,m4=null;function V0(t){let e=t.plugins;if(m4!=e){Bx=!1,m4=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Bx=!0;break}}return Bx}const Rc=new Qi("history"),dne=new Qi("closeHistory");function hne(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Yr({key:Rc,state:{init(){return new Wa(Ws.empty,Ws.empty,null,0,-1)},apply(e,n,r){return lne(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?HR:r=="historyRedo"?KR:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function WR(t,e){return(n,r)=>{let i=Rc.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=une(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const HR=WR(!1,!0),KR=WR(!0,!0),fne=oi.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>HR(t,e),redo:()=>({state:t,dispatch:e})=>KR(t,e)}},addProseMirrorPlugins(){return[hne(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),pne=nr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Jn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Pee(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(rt.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(et.create(o.doc,c.pos)):o.setSelection(rt.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(rt.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$R({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),mne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,gne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,yne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,bne=Tl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Zd({find:mne,type:this.type}),Zd({find:yne,type:this.type})]},addPasteRules(){return[eh({find:gne,type:this.type}),eh({find:vne,type:this.type})]}}),xne=nr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Jn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wne="listItem",g4="textStyle",y4=/^(\d+)\.\s$/,Sne=nr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Jn(this.options.HTMLAttributes,n),0]:["ol",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wne,this.editor.getAttributes(g4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=$p({find:y4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$p({find:y4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(g4)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),kne=nr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Cne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,_ne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ane=Tl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Jn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Zd({find:Cne,type:this.type})]},addPasteRules(){return[eh({find:_ne,type:this.type})]}}),Nne=nr.create({name:"text",group:"inline"}),Tne=oi.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(Ite.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(Pte.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(Dte.configure(this.options.bulletList)),this.options.code!==!1&&t.push(zte.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(Ute.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(qte.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(Kte.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(tne.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(nne.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(rne.configure(this.options.heading)),this.options.history!==!1&&t.push(fne.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(pne.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(bne.configure(this.options.italic)),this.options.listItem!==!1&&t.push(xne.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(Sne.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(kne.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(Ane.configure(this.options.strike)),this.options.text!==!1&&t.push(Nne.configure(this.options.text)),t}}),Ene=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Pne=nr.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Jn(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[$R({find:Ene,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}});var E5,P5;if(typeof WeakMap<"u"){let t=new WeakMap;E5=e=>t.get(e),P5=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;E5=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},P5=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Pn=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return E5(t)||P5(t,Mne(t))}};function Mne(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=jne(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;const y=d.child(p),{colspan:b,rowspan:v,colwidth:x}=y.attrs;for(let S=0;S<v;S++){if(S+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:v-S});break}const _=i+S*e;for(let A=0;A<b;A++){r[_+A]==0?r[_+A]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:b-A});const T=x&&x[A];if(T){const P=(_+A)%e*2,E=o[P];E==null||E!=T&&o[P+1]==1?(o[P]=T,o[P+1]=1):E==T&&o[P+1]++}}}i+=b,u+=y.nodeSize}const h=(c+1)*e;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),u++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new Pn(e,n,r,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&Lne(a,o,t),a}function jne(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function Lne(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=(i+c)%t.width,d=e[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=One(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function One(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Hr(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}var Xa=new Qi("selectingCells");function ph(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Ine(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Zs(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function g1(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ph(e.$head)||Rne(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Rne(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function M5(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Dne(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function NC(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function GR(t,e,n){const r=t.node(-1),i=Pn.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function Jc(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function YR(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Fne(t,e,n){const r=Hr(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var tn=class Uo extends at{constructor(e,n=e){const r=e.node(-1),i=Pn.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const h=s+u+1;return new zI(a.resolve(h),a.resolve(h+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(M5(r)&&M5(i)&&NC(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Uo.rowSelection(r,i):s&&this.isColSelection()?Uo.colSelection(r,i):new Uo(r,i)}return rt.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Pn.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*n.width+i.left,d=i.left;d<i.right;d++,u++){const h=n.map[u];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const y=i.left-f.left,b=f.right-i.right;if(y>0||b>0){let v=p.attrs;if(y>0&&(v=Jc(v,0,y)),b>0&&(v=Jc(v,v.colspan-b,b)),f.left<i.left){if(p=p.type.createAndFill(v),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else p=p.type.create(v,p.content)}if(f.top<i.top||f.bottom>i.bottom){const v={...p.attrs,rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)};f.top<i.top?p=p.type.createAndFill(v):p=p.type.create(v,p.content)}c.push(p)}o.push(e.child(l).copy(Ne.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new Fe(Ne.from(a),1,1)}replace(e,n=Fe.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?Fe.empty:n)}const s=at.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new Fe(Ne.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Pn.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Pn.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new Uo(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Pn.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof Uo&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Pn.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new Uo(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Uo(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Uo(e.resolve(n),e.resolve(r))}getBookmark(){return new Bne(this.$anchorCell.pos,this.$headCell.pos)}};tn.prototype.visible=!1;at.jsonID("cell",tn);var Bne=class XR{constructor(e,n){this.anchor=e,this.head=n}map(e){return new XR(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&NC(n,r)?new tn(n,r):at.near(r,1)}};function zne(t){if(!(t.selection instanceof tn))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(ti.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Tn.create(t.doc,e)}function $ne({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function Vne({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function Une(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof et&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=tn.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=tn.rowSelection(a,a)}else if(!n){const a=Pn.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=tn.create(i,l+1,c)}}else r instanceof rt&&$ne(r)?s=rt.create(i,r.from):r instanceof rt&&Vne(r)&&(s=rt.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var qne=new Qi("fix-tables");function JR(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,u=Math.min(i,o+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?JR(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function QR(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=Wne(t,i,s,n))};return e?e.doc!=t.doc&&JR(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Wne(t,e,n,r){const i=Pn.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let h=0;h<d.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Jc(d,d.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(n);r.delete(u,u+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const u=e.child(l),d=c+u.nodeSize,h=s[l];if(h>0){let f="cell";u.firstChild&&(f=u.firstChild.type.spec.tableRole);const p=[];for(let b=0;b<h;b++){const v=Hr(t.schema)[f].createAndFill();v&&p.push(v)}const y=(l==0||o==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(y),p)}c=d}return r.setMeta(qne,{fixTables:!0})}function Ao(t){const e=t.selection,n=g1(t),r=n.node(-1),i=n.start(-1),s=Pn.get(r);return{...e instanceof tn?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function ZR(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;Fne(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,YR(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?Hr(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function Hne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(ZR(t.tr,n,n.left))}return!0}function Kne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(ZR(t.tr,n,n.right))}return!0}function Gne(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=n.nodeAt(l),u=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,Jc(u,i-e.colCount(l)));else{const d=t.mapping.slice(s).map(r+l);t.delete(d,d+c.nodeSize)}o+=u.rowspan}}function Yne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;Gne(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Pn.get(s)}e(r)}return!0}function Xne(t,e,n){var r;const i=Hr(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=i)return!1;return!0}function eD(t,{map:e,tableStart:n,table:r},i){var s;let o=n;for(let c=0;c<i;c++)o+=r.child(c).nodeSize;const a=[];let l=i>0?-1:0;Xne(e,r,i+l)&&(l=i==0||i==e.height?null:0);for(let c=0,u=e.width*i;c<e.width;c++,u++)if(i>0&&i<e.height&&e.map[u]==e.map[u-e.width]){const d=e.map[u],h=r.nodeAt(d).attrs;t.setNodeMarkup(n+d,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{const d=l==null?Hr(r.type.schema).cell:(s=r.nodeAt(e.map[u+l*e.width]))==null?void 0:s.type,h=d?.createAndFill();h&&a.push(h)}return t.insert(o,Hr(r.type.schema).row.create(null,a)),t}function Jne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(eD(t.tr,n,n.top))}return!0}function Qne(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t);e(eD(t.tr,n,n.bottom))}return!0}function Zne(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+r,o+r);const l=new Set;for(let c=0,u=i*e.width;c<e.width;c++,u++){const d=e.map[u];if(!l.has(d)){if(l.add(d),i>0&&d==e.map[u-e.width]){const h=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(i<e.height&&d==e.map[u+e.width]){const h=n.nodeAt(d),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),y=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+y),p),c+=f.colspan-1}}}}function ere(t,e){if(!Zs(t))return!1;if(e){const n=Ao(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;Zne(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=Pn.get(n.table)}e(r)}return!0}function v4(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function tre({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function b4(t,e){const n=t.selection;if(!(n instanceof tn)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Ao(t),{map:i}=r;if(tre(i,r))return!1;if(e){const s=t.tr,o={};let a=Ne.empty,l,c;for(let u=r.top;u<r.bottom;u++)for(let d=r.left;d<r.right;d++){const h=i.map[u*i.width+d],f=r.table.nodeAt(h);if(!(o[h]||!f))if(o[h]=!0,l==null)l=h,c=f;else{v4(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...YR(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const u=l+1+c.content.size,d=v4(c)?l+1:u;s.replaceWith(d+r.tableStart,u+r.tableStart,a)}s.setSelection(new tn(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function x4(t,e){const n=Hr(t.schema);return nre(({node:r})=>n[r.type.spec.tableRole])(t,e)}function nre(t){return(e,n)=>{var r;const i=e.selection;let s,o;if(i instanceof tn){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;s=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(s=Ine(i.$from),!s)return!1;o=(r=ph(i.$from))==null?void 0:r.pos}if(s==null||o==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let a=s.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const u=Ao(e),d=e.tr;for(let f=0;f<u.right-u.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=u.top;f<u.bottom;f++){let p=u.map.positionAt(f,u.left,u.table);f==u.top&&(p+=s.nodeSize);for(let y=u.left,b=0;y<u.right;y++,b++)y==u.left&&f==u.top||d.insert(h=d.mapping.map(p+u.tableStart,1),t({node:s,row:f,col:y}).createAndFill(l[b]))}d.setNodeMarkup(o,t({node:s,row:u.top,col:u.left}),l[0]),i instanceof tn&&d.setSelection(new tn(d.doc.resolve(i.$anchorCell.pos),h?d.doc.resolve(h):void 0)),n(d)}return!0}}function rre(t,e){return function(n,r){if(!Zs(n))return!1;const i=g1(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof tn?n.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function ire(t){return function(e,n){if(!Zs(e))return!1;if(n){const r=Hr(e.schema),i=Ao(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function w4(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Vp(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?ire(t):function(n,r){if(!Zs(n))return!1;if(r){const i=Hr(n.schema),s=Ao(n),o=n.tr,a=w4("row",s,i),l=w4("column",s,i),u=(t==="column"?a:t==="row"?l:!1)?1:0,d=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(f=>{const p=f+s.tableStart,y=o.doc.nodeAt(p);y&&o.setNodeMarkup(p,h,y.attrs)}),r(o)}return!0}}Vp("row",{useDeprecatedLogic:!0});Vp("column",{useDeprecatedLogic:!0});var sre=Vp("cell",{useDeprecatedLogic:!0});function ore(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function S4(t){return function(e,n){if(!Zs(e))return!1;const r=ore(g1(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(rt.between(i,Dne(i))).scrollIntoView())}return!0}}function are(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function Yg(t,e){const n=t.selection;if(!(n instanceof tn))return!1;if(e){const r=t.tr,i=Hr(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new Fe(i,0,0))}),r.docChanged&&e(r)}return!0}function lre(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),d=l<e.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=j5(Hr(o).row,new Fe(c,u,d)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?j5(Hr(o).row,new Fe(e,n,r)).content:e);else return null;return cre(o,a)}function cre(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(Ne.empty),n[i]<r){const s=Hr(t).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);e[i]=e[i].append(Ne.from(o))}return{height:e.length,width:r,rows:e}}function j5(t,e){const n=t.createAndFill();return new BI(n).replace(0,n.content.size,e).doc}function ure({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,d=0;u<r;d++){let h=l.child(d%l.childCount);u+h.attrs.colspan>r&&(h=h.type.createChecked(Jc(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),c.push(h),u+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}o.push(Ne.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let d=c.child(u);o+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}s.push(Ne.from(l))}n=s,e=i}return{width:t,height:e,rows:n}}function dre(t,e,n,r,i,s,o){const a=t.doc.type.schema,l=Hr(a);let c,u;if(i>e.width)for(let d=0,h=0;d<e.height;d++){const f=n.child(d);h+=f.nodeSize;const p=[];let y;f.lastChild==null||f.lastChild.type==l.cell?y=c||(c=l.cell.createAndFill()):y=u||(u=l.header_cell.createAndFill());for(let b=e.width;b<i;b++)p.push(y);t.insert(t.mapping.slice(o).map(h-1+r),p)}if(s>e.height){const d=[];for(let p=0,y=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const b=p>=e.width?!1:n.nodeAt(e.map[y+p]).type==l.header_cell;d.push(b?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,Ne.from(d)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),f)}return!!(c||u)}function k4(t,e,n,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const u=o*e.width+c,d=e.map[u];if(e.map[u-e.width]==d){l=!0;const h=n.nodeAt(d),{top:f,left:p}=e.findCell(d);t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...h.attrs,rowspan:o-f}),t.insert(t.mapping.slice(a).map(e.positionAt(o,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-o})),c+=h.attrs.colspan-1}}return l}function C4(t,e,n,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const u=c*e.width+o,d=e.map[u];if(e.map[u-1]==d){l=!0;const h=n.nodeAt(d),f=e.colCount(d),p=t.mapping.slice(a).map(d+r);t.setNodeMarkup(p,null,Jc(h.attrs,o-f,h.attrs.colspan-(o-f))),t.insert(p+h.nodeSize,h.type.createAndFill(Jc(h.attrs,0,o-f))),c+=h.attrs.rowspan-1}}return l}function _4(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=Pn.get(s);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=t.tr;let h=0;function f(){if(s=n?d.doc.nodeAt(n-1):d.doc,!s)throw new Error("No table found");o=Pn.get(s),h=d.mapping.maps.length}dre(d,o,s,n,c,u,h)&&f(),k4(d,o,s,n,l,c,a,h)&&f(),k4(d,o,s,n,l,c,u,h)&&f(),C4(d,o,s,n,a,u,l,h)&&f(),C4(d,o,s,n,a,u,c,h)&&f();for(let p=a;p<u;p++){const y=o.positionAt(p,l,s),b=o.positionAt(p,c,s);d.replace(d.mapping.slice(h).map(y+n),d.mapping.slice(h).map(b+n),new Fe(i.rows[p-a],0,0))}f(),d.setSelection(new tn(d.doc.resolve(n+o.positionAt(a,l,s)),d.doc.resolve(n+o.positionAt(u-1,c-1,s)))),e(d)}var hre=mC({ArrowLeft:Xg("horiz",-1),ArrowRight:Xg("horiz",1),ArrowUp:Xg("vert",-1),ArrowDown:Xg("vert",1),"Shift-ArrowLeft":Jg("horiz",-1),"Shift-ArrowRight":Jg("horiz",1),"Shift-ArrowUp":Jg("vert",-1),"Shift-ArrowDown":Jg("vert",1),Backspace:Yg,"Mod-Backspace":Yg,Delete:Yg,"Mod-Delete":Yg});function U0(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Xg(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof tn)return U0(n,r,at.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=tD(i,t,e);if(o==null)return!1;if(t=="horiz")return U0(n,r,at.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(o),l=GR(a,t,e);let c;return l?c=at.near(l,1):e<0?c=at.near(n.doc.resolve(a.before(-1)),-1):c=at.near(n.doc.resolve(a.after(-1)),1),U0(n,r,c)}}}function Jg(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof tn)o=s;else{const l=tD(i,t,e);if(l==null)return!1;o=new tn(n.doc.resolve(l))}const a=GR(o.$headCell,t,e);return a?U0(n,r,new tn(o.$anchorCell,a)):!1}}function fre(t,e){const n=t.state.doc,r=ph(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new tn(r))),!0):!1}function pre(t,e,n){if(!Zs(t.state))return!1;let r=lre(n);const i=t.state.selection;if(i instanceof tn){r||(r={width:1,height:1,rows:[Ne.from(j5(Hr(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=Pn.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=ure(r,a.right-a.left,a.bottom-a.top),_4(t.state,t.dispatch,o,a,r),!0}else if(r){const s=g1(t.state),o=s.start(-1);return _4(t.state,t.dispatch,o,Pn.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function mre(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=A4(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof tn)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=ph(t.state.selection.$anchor))!=null&&((n=zx(t,e))==null?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,c){let u=zx(t,c);const d=Xa.getState(t.state)==null;if(!u||!NC(l,u))if(d)u=l;else return;const h=new tn(l,u);if(d||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);d&&f.setMeta(Xa,l.pos),t.dispatch(f)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),Xa.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Xa,-1))}function a(l){const c=l,u=Xa.getState(t.state);let d;if(u!=null)d=t.state.doc.resolve(u);else if(A4(t,c.target)!=r&&(d=zx(t,e),!d))return o();d&&s(d,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function tD(t,e,n){if(!(t.state.selection instanceof rt))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(i),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function A4(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function zx(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ph(t.state.doc.resolve(n.pos)):null}var gre=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),L5(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,L5(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function L5(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let d=0,h=0;d<u.childCount;d++){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let y=0;y<f;y++,h++){const b=i==h?s:p&&p[y],v=b?b+"px":"";if(a+=b||r,b||(l=!1),c)c.style.width!=v&&(c.style.width=v),c=c.nextSibling;else{const x=document.createElement("col");x.style.width=v,e.appendChild(x)}}}for(;c;){const d=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=d}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Ui=new Qi("tableColumnResizing");function yre({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=gre,lastColumnResizable:i=!0}={}){const s=new Yr({key:Ui,state:{init(o,a){var l,c;const u=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,d=Hr(a.schema).table.name;return r&&u&&(u[d]=(h,f)=>new r(h,n,f)),new vre(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=Ui.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{bre(o,a,t,i)},mouseleave:o=>{xre(o)},mousedown:(o,a)=>{wre(o,a,e,n)}},decorations:o=>{const a=Ui.getState(o);if(a&&a.activeHandle>-1)return Are(o,a.activeHandle)},nodeViews:{}}});return s}var vre=class q0{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Ui);if(r&&r.setHandle!=null)return new q0(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new q0(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return M5(e.doc.resolve(i))||(i=-1),new q0(i,n.dragging)}return n}};function bre(t,e,n,r){if(!t.editable)return;const i=Ui.getState(t.state);if(i&&!i.dragging){const s=kre(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?o=N4(t,e,"left",n):l-e.clientX<=n&&(o=N4(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=Pn.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}nD(t,o)}}}function xre(t){if(!t.editable)return;const e=Ui.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&nD(t,-1)}function wre(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!=null?i:window,o=Ui.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=Sre(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Ui,{setDragging:{startX:e.clientX,startWidth:l}}));function c(d){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const h=Ui.getState(t.state);h?.dragging&&(Cre(t,h.activeHandle,T4(h.dragging,d,n)),t.dispatch(t.state.tr.setMeta(Ui,{setDragging:null})))}function u(d){if(!d.which)return c(d);const h=Ui.getState(t.state);if(h&&h.dragging){const f=T4(h.dragging,d,n);E4(t,h.activeHandle,f,r)}}return E4(t,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function Sre(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function kre(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function N4(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=ph(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=Pn.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function T4(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function nD(t,e){t.dispatch(t.state.tr.setMeta(Ui,{setHandle:e}))}function Cre(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=Pn.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const d=s.map[u],h=i.nodeAt(d).attrs,f=h.colspan==1?0:a-s.colCount(d);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():_re(h.colspan);p[f]=n,l.setNodeMarkup(o+d,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function E4(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=Pn.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&L5(s,l.firstChild,l,r,a,n)}function _re(t){return Array(t).fill(0)}function Are(t,e){var n;const r=[],i=t.doc.resolve(e),s=i.node(-1);if(!s)return Tn.empty;const o=Pn.get(s),a=i.start(-1),l=o.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const u=l+c*o.width;if((l==o.width-1||o.map[u]!=o.map[u+1])&&(c==0||o.map[u]!=o.map[u-o.width])){const d=o.map[u],h=a+d+s.nodeAt(d).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",(n=Ui.getState(t))!=null&&n.dragging&&r.push(ti.node(a+d,a+d+s.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(ti.widget(h,f))}}return Tn.create(t.doc,r)}function Nre({allowTableNodeSelection:t=!1}={}){return new Yr({key:Xa,state:{init(){return null},apply(e,n){const r=e.getMeta(Xa);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:zne,handleDOMEvents:{mousedown:mre},createSelectionBetween(e){return Xa.getState(e.state)!=null?e.state.selection:null},handleTripleClick:fre,handleKeyDown:hre,handlePaste:pre},appendTransaction(e,n,r){return Une(r,QR(r,n),t)}})}function O5(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function P4(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u!==null)for(let d=0,h=0;d<u.childCount;d+=1){const{colspan:f,colwidth:p}=u.child(d).attrs;for(let y=0;y<f;y+=1,h+=1){const b=i===h?s:p&&p[y],v=b?`${b}px`:"";if(a+=b||r,b||(l=!1),c){if(c.style.width!==v){const[x,S]=O5(r,b);c.style.setProperty(x,S)}c=c.nextSibling}else{const x=document.createElement("col"),[S,_]=O5(r,b);x.style.setProperty(S,_),e.appendChild(x)}}}for(;c;){const d=c.nextSibling;(o=c.parentNode)===null||o===void 0||o.removeChild(c),c=d}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}class Tre{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),P4(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,P4(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function Ere(t,e,n,r){let i=0,s=!0;const o=[],a=t.firstChild;if(!a)return{};for(let d=0,h=0;d<a.childCount;d+=1){const{colspan:f,colwidth:p}=a.child(d).attrs;for(let y=0;y<f;y+=1,h+=1){const b=n===h?r:p&&p[y];i+=b||e,b||(s=!1);const[v,x]=O5(e,b);o.push(["col",{style:`${v}: ${x}`}])}}const l=s?`${i}px`:"",c=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:l,tableMinWidth:c}}function M4(t,e){return e?t.createChecked(null,e):t.createAndFill()}function Pre(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function Mre(t,e,n,r,i){const s=Pre(t),o=[],a=[];for(let c=0;c<n;c+=1){const u=M4(s.cell,i);if(u&&a.push(u),r){const d=M4(s.header_cell,i);d&&o.push(d)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,r&&c===0?o:a));return s.table.createChecked(null,l)}function jre(t){return t instanceof tn}const Qg=({editor:t})=>{const{selection:e}=t.state;if(!jre(e))return!1;let n=0;const r=BR(e.ranges[0].$from,s=>s.type.name==="table");return r?.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},Lre=nr.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Tre,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=Ere(t,this.options.cellMinWidth);return["table",Jn(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${i}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=Mre(s.schema,t,e,n);if(i){const a=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(rt.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>Hne(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>Kne(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Yne(t,e),addRowBefore:()=>({state:t,dispatch:e})=>Jne(t,e),addRowAfter:()=>({state:t,dispatch:e})=>Qne(t,e),deleteRow:()=>({state:t,dispatch:e})=>ere(t,e),deleteTable:()=>({state:t,dispatch:e})=>are(t,e),mergeCells:()=>({state:t,dispatch:e})=>b4(t,e),splitCell:()=>({state:t,dispatch:e})=>x4(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Vp("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Vp("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>sre(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>b4(t,e)?!0:x4(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>rre(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>S4(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>S4(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&QR(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=tn.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Qg,"Mod-Backspace":Qg,Delete:Qg,"Mod-Delete":Qg}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[yre({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Nre({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:wt(He(t,"tableRole",e))}}}),Ore=nr.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Jn(this.options.HTMLAttributes,t),0]}}),Ire=nr.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Jn(this.options.HTMLAttributes,t),0]}}),Rre=nr.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Jn(this.options.HTMLAttributes,t),0]}});/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pm(t){return t+.5|0}const il=(t,e,n)=>Math.max(Math.min(t,n),e);function _f(t){return il(pm(t*2.55),0,255)}function wl(t){return il(pm(t*255),0,255)}function Xo(t){return il(pm(t/2.55)/100,0,1)}function j4(t){return il(pm(t*100),0,100)}const ds={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},I5=[..."0123456789ABCDEF"],Dre=t=>I5[t&15],Fre=t=>I5[(t&240)>>4]+I5[t&15],Zg=t=>(t&240)>>4===(t&15),Bre=t=>Zg(t.r)&&Zg(t.g)&&Zg(t.b)&&Zg(t.a);function zre(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ds[t[1]]*17,g:255&ds[t[2]]*17,b:255&ds[t[3]]*17,a:e===5?ds[t[4]]*17:255}:(e===7||e===9)&&(n={r:ds[t[1]]<<4|ds[t[2]],g:ds[t[3]]<<4|ds[t[4]],b:ds[t[5]]<<4|ds[t[6]],a:e===9?ds[t[7]]<<4|ds[t[8]]:255})),n}const $re=(t,e)=>t<255?e(t):"";function Vre(t){var e=Bre(t)?Dre:Fre;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$re(t.a,e):void 0}const Ure=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rD(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function qre(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Wre(t,e,n){const r=rD(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Hre(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function TC(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Hre(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function EC(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(wl)}function PC(t,e,n){return EC(rD,t,e,n)}function Kre(t,e,n){return EC(Wre,t,e,n)}function Gre(t,e,n){return EC(qre,t,e,n)}function iD(t){return(t%360+360)%360}function Yre(t){const e=Ure.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?_f(+e[5]):wl(+e[5]));const i=iD(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Kre(i,s,o):e[1]==="hsv"?r=Gre(i,s,o):r=PC(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Xre(t,e){var n=TC(t);n[0]=iD(n[0]+e),n=PC(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Jre(t){if(!t)return;const e=TC(t),n=e[0],r=j4(e[1]),i=j4(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Xo(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const L4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Qre(){const t={},e=Object.keys(O4),n=Object.keys(L4);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,L4[s]);s=parseInt(O4[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let e0;function Zre(t){e0||(e0=Qre(),e0.transparent=[0,0,0,0]);const e=e0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const eie=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tie(t){const e=eie.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?_f(o):il(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?_f(r):il(r,0,255)),i=255&(e[4]?_f(i):il(i,0,255)),s=255&(e[6]?_f(s):il(s,0,255)),{r,g:i,b:s,a:n}}}function nie(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $x=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$u=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function rie(t,e,n){const r=$u(Xo(t.r)),i=$u(Xo(t.g)),s=$u(Xo(t.b));return{r:wl($x(r+n*($u(Xo(e.r))-r))),g:wl($x(i+n*($u(Xo(e.g))-i))),b:wl($x(s+n*($u(Xo(e.b))-s))),a:t.a+n*(e.a-t.a)}}function t0(t,e,n){if(t){let r=TC(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=PC(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function sD(t,e){return t&&Object.assign(e||{},t)}function I4(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=wl(t[3]))):(e=sD(t,{r:0,g:0,b:0,a:1}),e.a=wl(e.a)),e}function iie(t){return t.charAt(0)==="r"?tie(t):Yre(t)}class Up{constructor(e){if(e instanceof Up)return e;const n=typeof e;let r;n==="object"?r=I4(e):n==="string"&&(r=zre(e)||Zre(e)||iie(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=sD(this._rgb);return e&&(e.a=Xo(e.a)),e}set rgb(e){this._rgb=I4(e)}rgbString(){return this._valid?nie(this._rgb):void 0}hexString(){return this._valid?Vre(this._rgb):void 0}hslString(){return this._valid?Jre(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=rie(this._rgb,e._rgb,n)),this}clone(){return new Up(this.rgb)}alpha(e){return this._rgb.a=wl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=pm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return t0(this._rgb,2,e),this}darken(e){return t0(this._rgb,2,-e),this}saturate(e){return t0(this._rgb,1,e),this}desaturate(e){return t0(this._rgb,1,-e),this}rotate(e){return Xre(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zo(){}const sie=(()=>{let t=0;return()=>t++})();function Ct(t){return t==null}function rn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Et(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Mn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Bi(t,e){return Mn(t)?t:e}function xt(t,e){return typeof t>"u"?e:t}const oie=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,oD=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function $t(t,e,n,r){let i,s,o;if(rn(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Et(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Xy(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Jy(t){if(rn(t))return t.map(Jy);if(Et(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Jy(t[n[i]]);return e}return t}function aD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function aie(t,e,n,r){if(!aD(t))return;const i=e[t],s=n[t];Et(i)&&Et(s)?qp(i,s,r):e[t]=Jy(s)}function qp(t,e,n){const r=rn(e)?e:[e],i=r.length;if(!Et(t))return t;n=n||{};const s=n.merger||aie;let o;for(let a=0;a<i;++a){if(o=r[a],!Et(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Qf(t,e){return qp(t,e,{merger:lie})}function lie(t,e,n){if(!aD(t))return;const r=e[t],i=n[t];Et(r)&&Et(i)?Qf(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Jy(i))}const R4={"":t=>t,x:t=>t.x,y:t=>t.y};function cie(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function uie(t){const e=cie(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function El(t,e){return(R4[e]||(R4[e]=uie(e)))(t)}function MC(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wp=t=>typeof t<"u",Pl=t=>typeof t=="function",D4=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function die(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const cn=Math.PI,an=2*cn,hie=an+cn,Qy=Number.POSITIVE_INFINITY,fie=cn/180,Vn=cn/2,tc=cn/4,F4=cn*2/3,sl=Math.log10,wo=Math.sign;function Zf(t,e,n){return Math.abs(t-e)<n}function B4(t){const e=Math.round(t);t=Zf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(sl(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function pie(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function mie(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function th(t){return!mie(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function gie(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function lD(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Hs(t){return t*(cn/180)}function jC(t){return t*(180/cn)}function z4(t){if(!Mn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function cD(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*cn&&(s+=an),{angle:s,distance:i}}function R5(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yie(t,e){return(t-e+hie)%an-cn}function $i(t){return(t%an+an)%an}function Hp(t,e,n,r){const i=$i(t),s=$i(e),o=$i(n),a=$i(s-i),l=$i(o-i),c=$i(i-s),u=$i(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function dr(t,e,n){return Math.max(e,Math.min(n,t))}function vie(t){return dr(t,-32768,32767)}function ea(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function LC(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ta=(t,e,n,r)=>LC(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),bie=(t,e,n)=>LC(t,n,r=>t[r][e]>=n);function xie(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const uD=["push","pop","shift","splice","unshift"];function wie(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),uD.forEach(n=>{const r="_onData"+MC(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function $4(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(uD.forEach(s=>{delete t[s]}),delete t._chartjs)}function dD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const hD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function fD(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,hD.call(window,()=>{r=!1,t.apply(e,n)}))}}function Sie(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const OC=t=>t==="start"?"left":t==="end"?"right":"center",Dr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,kie=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function pD(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(ta(l,u,d).lo,n?r:ta(e,u,o.getPixelForValue(d)).lo),c){const y=l.slice(0,i+1).reverse().findIndex(b=>!Ct(b[a.axis]));i-=Math.max(0,y)}i=dr(i,0,r-1)}if(p){let y=Math.max(ta(l,o.axis,h,!0).hi+1,n?0:ta(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const b=l.slice(y-1).findIndex(v=>!Ct(v[a.axis]));y+=Math.max(0,b)}s=dr(y,i,r)-i}else s=r-i}return{start:i,count:s}}function mD(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const n0=t=>t===0||t===1,V4=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*an/n)),U4=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*an/n)+1,ep={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Vn)+1,easeOutSine:t=>Math.sin(t*Vn),easeInOutSine:t=>-.5*(Math.cos(cn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>n0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>n0(t)?t:V4(t,.075,.3),easeOutElastic:t=>n0(t)?t:U4(t,.075,.3),easeInOutElastic(t){return n0(t)?t:t<.5?.5*V4(t*2,.1125,.45):.5+.5*U4(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ep.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ep.easeInBounce(t*2)*.5:ep.easeOutBounce(t*2-1)*.5+.5};function IC(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function q4(t){return IC(t)?t:new Up(t)}function Vx(t){return IC(t)?t:new Up(t).saturate(.5).darken(.1).hexString()}const Cie=["x","y","borderWidth","radius","tension"],_ie=["color","borderColor","backgroundColor"];function Aie(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:_ie},numbers:{type:"number",properties:Cie}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Nie(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const W4=new Map;function Tie(t,e){e=e||{};const n=t+JSON.stringify(e);let r=W4.get(n);return r||(r=new Intl.NumberFormat(t,e),W4.set(n,r)),r}function mm(t,e,n){return Tie(e,n).format(t)}const gD={values(t){return rn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Eie(t,n)}const o=sl(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),mm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(sl(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?gD.numeric.call(this,t,e,n):""}};function Eie(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var y1={formatters:gD};function Pie(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:y1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Qc=Object.create(null),D5=Object.create(null);function tp(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Ux(t,e,n){return typeof e=="string"?qp(tp(t,e),n):qp(tp(t,""),e)}class Mie{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Vx(i.backgroundColor),this.hoverBorderColor=(r,i)=>Vx(i.borderColor),this.hoverColor=(r,i)=>Vx(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Ux(this,e,n)}get(e){return tp(this,e)}describe(e,n){return Ux(D5,e,n)}override(e,n){return Ux(Qc,e,n)}route(e,n,r,i){const s=tp(this,e),o=tp(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Et(l)?Object.assign({},c,l):xt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var pn=new Mie({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Aie,Nie,Pie]);function jie(t){return!t||Ct(t.size)||Ct(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Zy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Lie(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!rn(d))o=Zy(t,i,s,o,d);else if(rn(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!rn(h)&&(o=Zy(t,i,s,o,h));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function nc(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function H4(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function F5(t,e,n,r){yD(t,e,n,r,null)}function yD(t,e,n,r,i){let s,o,a,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,y=e.radius;let b=(p||0)*fie;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(b),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,y,0,0,an):t.arc(n,r,y,0,an),t.closePath();break;case"triangle":u=i?i/2:y,t.moveTo(n+Math.sin(b)*u,r-Math.cos(b)*y),b+=F4,t.lineTo(n+Math.sin(b)*u,r-Math.cos(b)*y),b+=F4,t.lineTo(n+Math.sin(b)*u,r-Math.cos(b)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(b+tc)*l,d=Math.cos(b+tc)*(i?i/2-c:l),a=Math.sin(b+tc)*l,h=Math.sin(b+tc)*(i?i/2-c:l),t.arc(n-d,r-a,c,b-cn,b-Vn),t.arc(n+h,r-o,c,b-Vn,b),t.arc(n+d,r+a,c,b,b+Vn),t.arc(n-h,r+o,c,b+Vn,b+cn),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*y,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}b+=tc;case"rectRot":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,h=Math.sin(b)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":b+=tc;case"cross":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,h=Math.sin(b)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,h=Math.sin(b)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),b+=tc,d=Math.cos(b)*(i?i/2:y),o=Math.cos(b)*y,a=Math.sin(b)*y,h=Math.sin(b)*(i?i/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(b)*y,a=Math.sin(b)*y,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(b)*(i?i/2:y),r+Math.sin(b)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function na(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function v1(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function b1(t){t.restore()}function Oie(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Iie(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Rie(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ct(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Die(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Fie(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Zc(t,e,n,r,i,s={}){const o=rn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Rie(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Fie(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ct(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),Die(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Kp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*cn,cn,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,cn,Vn,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Vn,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Vn,!0),t.lineTo(n+o.topLeft,r)}const Bie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $ie(t,e){const n=(""+t).match(Bie);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Vie=t=>+t||0;function RC(t,e){const n={},r=Et(e),i=r?Object.keys(e):e,s=Et(t)?r?o=>xt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=Vie(s(o));return n}function vD(t){return RC(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Dc(t){return RC(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Kr(t){const e=vD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function tr(t,e){t=t||{},e=e||pn.font;let n=xt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=xt(t.style,e.style);r&&!(""+r).match(zie)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:xt(t.family,e.family),lineHeight:$ie(xt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:xt(t.weight,e.weight),string:""};return i.string=jie(i),i}function Af(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&rn(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Uie(t,e,n){const{min:r,max:i}=t,s=oD(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function $l(t,e){return Object.assign(Object.create(t),e)}function DC(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=SD("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>DC([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return xD(a,l,()=>Jie(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return G4(a).includes(l)},ownKeys(a){return G4(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function nh(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:bD(t,r),setContext:s=>nh(t,s,n,r),override:s=>nh(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return xD(s,o,()=>Wie(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function bD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Pl(n)?n:()=>n,isIndexable:Pl(r)?r:()=>r}}const qie=(t,e)=>t?t+MC(e):e,FC=(t,e)=>Et(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function xD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Wie(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Pl(a)&&o.isScriptable(e)&&(a=Hie(e,a,t,n)),rn(a)&&a.length&&(a=Kie(e,a,t,o.isIndexable)),FC(e,a)&&(a=nh(a,i,s&&s[e],o)),a}function Hie(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),FC(t,l)&&(l=BC(i._scopes,i,t,l)),l}function Kie(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Et(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=BC(c,i,t,u);e.push(nh(d,s,o&&o[t],a))}}return e}function wD(t,e,n){return Pl(t)?t(e,n):t}const Gie=(t,e)=>t===!0?e:typeof t=="string"?El(e,t):void 0;function Yie(t,e,n,r,i){for(const s of e){const o=Gie(n,s);if(o){t.add(o);const a=wD(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function BC(t,e,n,r){const i=e._rootScopes,s=wD(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=K4(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=K4(a,o,s,l,r),l===null)?!1:DC(Array.from(a),[""],i,s,()=>Xie(e,n,r))}function K4(t,e,n,r,i){for(;n;)n=Yie(t,e,n,r,i);return n}function Xie(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return rn(i)&&Et(n)?n:i||{}}function Jie(t,e,n,r){let i;for(const s of e)if(i=SD(qie(s,t),n),typeof i<"u")return FC(t,i)?BC(n,r,t,i):i}function SD(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function G4(t){let e=t._keys;return e||(e=t._keys=Qie(t._scopes)),e}function Qie(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function kD(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(El(u,s),c)};return o}const Zie=Number.EPSILON||1e-14,rh=(t,e)=>e<t.length&&!t[e].skip&&t[e],CD=t=>t==="x"?"y":"x";function ese(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=R5(s,i),l=R5(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function tse(t,e,n){const r=t.length;let i,s,o,a,l,c=rh(t,0);for(let u=0;u<r-1;++u)if(l=c,c=rh(t,u+1),!(!l||!c)){if(Zf(e[u],0,Zie)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function nse(t,e,n="x"){const r=CD(n),i=t.length;let s,o,a,l=rh(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=rh(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function rse(t,e="x"){const n=CD(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=rh(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=rh(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?wo(i[o-1])!==wo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}tse(t,i,s),nse(t,s,e)}function r0(t,e,n){return Math.max(Math.min(t,n),e)}function ise(t,e){let n,r,i,s,o,a=na(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&na(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=r0(i.cp1x,e.left,e.right),i.cp1y=r0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=r0(i.cp2x,e.left,e.right),i.cp2y=r0(i.cp2y,e.top,e.bottom)))}function sse(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")rse(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=ese(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&ise(t,n)}function zC(){return typeof window<"u"&&typeof document<"u"}function $C(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ev(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const x1=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function ose(t,e){return x1(t).getPropertyValue(e)}const ase=["top","right","bottom","left"];function Fc(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=ase[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const lse=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function cse(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(lse(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function uc(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=x1(n),s=i.boxSizing==="border-box",o=Fc(i,"padding"),a=Fc(i,"border","width"),{x:l,y:c,box:u}=cse(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}function use(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&$C(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=x1(s),l=Fc(a,"border","width"),c=Fc(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ev(a.maxWidth,s,"clientWidth"),i=ev(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Qy,maxHeight:i||Qy}}const i0=t=>Math.round(t*10)/10;function dse(t,e,n,r){const i=x1(t),s=Fc(i,"margin"),o=ev(i.maxWidth,t,"clientWidth")||Qy,a=ev(i.maxHeight,t,"clientHeight")||Qy,l=use(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=Fc(i,"border","width"),f=Fc(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=i0(Math.min(c,o,l.maxWidth)),u=i0(Math.min(u,a,l.maxHeight)),c&&!u&&(u=i0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=i0(Math.floor(u*r))),{width:c,height:u}}function Y4(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const hse=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};zC()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function X4(t,e){const n=ose(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function dc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function fse(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function pse(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=dc(t,i,n),a=dc(i,s,n),l=dc(s,e,n),c=dc(o,a,n),u=dc(a,l,n);return dc(c,u,n)}const mse=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},gse=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Pd(t,e,n){return t?mse(e,n):gse()}function _D(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function AD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ND(t){return t==="angle"?{between:Hp,compare:yie,normalize:$i}:{between:ea,compare:(e,n)=>e-n,normalize:e=>e}}function J4({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function yse(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=ND(r),l=e.length;let{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(e[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function TD(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=ND(r),{start:u,end:d,loop:h,style:f}=yse(t,e,n),p=[];let y=!1,b=null,v,x,S;const _=()=>l(i,S,v)&&a(i,S)!==0,A=()=>a(s,v)===0||l(s,S,v),T=()=>y||_(),P=()=>!y||A();for(let E=u,z=u;E<=d;++E)x=e[E%o],!x.skip&&(v=c(x[r]),v!==S&&(y=l(v,i,s),b===null&&T()&&(b=a(v,i)===0?E:z),b!==null&&P()&&(p.push(J4({start:b,end:E,loop:h,count:o,style:f})),b=null),z=E,S=v));return b!==null&&p.push(J4({start:b,end:d,loop:h,count:o,style:f})),p}function ED(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=TD(r[i],t.points,e);s.length&&n.push(...s)}return n}function vse(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function bse(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function xse(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=vse(n,i,s,r);if(r===!0)return Q4(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Q4(t,bse(n,o,l,c),n,e)}function Q4(t,e,n,r){return!r||!r.setContext||!n?e:wse(t,e,n,r)}function wse(t,e,n,r){const i=t._chart.getContext(),s=Z4(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function f(p,y,b,v){const x=a?-1:1;if(p!==y){for(p+=l;n[p%l].skip;)p-=x;for(;n[y%l].skip;)y+=x;p%l!==y%l&&(c.push({start:p%l,end:y%l,loop:b,style:v}),u=v,d=y%l)}}for(const p of e){d=a?d:p.start;let y=n[d%l],b;for(h=d+1;h<=p.end;h++){const v=n[h%l];b=Z4(r.setContext($l(i,{type:"segment",p0:y,p1:v,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Sse(b,u)&&f(d,h-1,p.loop,u),y=v,u=b}d<h-1&&f(d,h-1,p.loop,u)}return c}function Z4(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Sse(t,e){if(!e)return!1;const n=[],r=function(i,s){return IC(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function s0(t,e,n){return t.options.clip?t[n]:e[n]}function kse(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:s0(n,e,"left"),right:s0(n,e,"right"),top:s0(r,e,"top"),bottom:s0(r,e,"bottom")}:e}function PD(t,e){const n=e._clip;if(n.disabled)return!1;const r=kse(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Cse{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=hD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qo=new Cse;const eE="transparent",_se={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=q4(t||eE),i=r.valid&&q4(e||eE);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ase{constructor(e,n,r,i){const s=n[r];i=Af([e.to,i,s,e.from]);const o=Af([e.from,s,i]);this._active=!0,this._fn=e.fn||_se[e.type||typeof o],this._easing=ep[e.easing]||ep.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Af([e.to,n,i,e.from]),this._from=Af([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class MD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Et(e))return;const n=Object.keys(pn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Et(s))return;const o={};for(const a of n)o[a]=s[a];(rn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=Tse(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&Nse(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new Ase(h,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return qo.add(this._chart,r),!0}}function Nse(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Tse(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function tE(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Ese(t,e,n){if(n===!1)return!1;const r=tE(t,n),i=tE(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Pse(t){let e,n,r,i;return Et(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function jD(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function nE(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Mn(c)&&(s||e===0||wo(e)===wo(c))&&(e+=c)}return!u&&!r.all?0:e}function Mse(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function qx(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function jse(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Lse(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Ose(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function rE(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function iE(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=jse(s,o,r),d=e.length;let h;for(let f=0;f<d;++f){const p=e[f],{[l]:y,[c]:b}=p,v=p._stacks||(p._stacks={});h=v[c]=Ose(i,u,y),h[a]=b,h._top=rE(h,o,!0,r.type),h._bottom=rE(h,o,!1,r.type);const x=h._visualValues||(h._visualValues={});x[a]=b}}function Wx(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Ise(t,e){return $l(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Rse(t,e,n){return $l(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function af(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const Hx=t=>t==="reset"||t==="none",sE=(t,e)=>e?t:Object.assign({},t),Dse=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:jD(n,!0),values:null};class Vl{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qx(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&af(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,h,f,p)=>d==="x"?h:d==="r"?p:f,s=n.xAxisID=xt(r.xAxisID,Wx(e,"x")),o=n.yAxisID=xt(r.yAxisID,Wx(e,"y")),a=n.rAxisID=xt(r.rAxisID,Wx(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$4(this._data,this),e._stacked&&af(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Et(n)){const i=this._cachedMeta;this._data=Mse(n,i)}else if(r!==n){if(r){$4(r,this);const i=this._cachedMeta;af(i),i._parsed=[]}n&&Object.isExtensible(n)&&wie(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=qx(n.vScale,n),n.stack!==r.stack&&(i=!0,af(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(iE(this,n._parsed),n._stacked=qx(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{rn(i[e])?h=this.parseArrayData(r,i,e,n):Et(i[e])?h=this.parseObjectData(r,i,e,n):h=this.parsePrimitiveData(r,i,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);r._sorted=l}o&&iE(this,h)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let h,f,p;for(h=0,f=i;h<f;++h)p=h+r,d[h]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,f;for(u=0,d=i;u<d;++u)h=u+r,f=n[h],c[u]={x:s.parse(El(f,a),h),y:o.parse(El(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:jD(i,!0),values:n._stacks[e.axis]._visualValues};return nE(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=nE(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=Dse(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Lse(a);let h,f;function p(){f=i[h];const y=f[a.axis];return!Mn(f[e.axis])||u>y||d<y}for(h=0;h<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Mn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Pse(xt(this.options.clip,Ese(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Rse(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Ise(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Wp(r);if(a)return sE(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(pn.elements[e]),p=()=>this.getContext(r,i,n),y=c.resolveNamedOptions(h,f,p,d);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(sE(y,l))),y}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new MD(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Hx(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){Hx(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!Hx(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&af(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Fse(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=dD(r.sort((i,s)=>i-s))}return t._cache.$bar}function Bse(t){const e=t.iScale,n=Fse(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Wp(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function zse(t,e,n,r){const i=n.barThickness;let s,o;return Ct(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function $se(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function Vse(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function LD(t,e,n,r){return rn(t)?Vse(t,e,n,r):e[n.axis]=n.parse(t,r),e}function oE(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(LD(h,d,s,c));return l}function Kx(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Use(t,e,n){return t!==0?wo(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function qse(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function Wse(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=qse(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[aE(u,o,a,l)]=!0,i=c)),s[aE(i,o,a,l)]=!0,t.borderSkipped=s}function aE(t,e,n,r){return r?(t=Hse(t,e,n),t=lE(t,n,e)):t=lE(t,e,n),t}function Hse(t,e,n){return t===e?n:t===n?e:t}function lE(t,e,n){return t==="start"?e:t==="end"?n:t}function Kse(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Gse extends Vl{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,r,i){return oE(e,n,r,i)}parseArrayData(e,n,r,i){return oE(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let h,f,p,y;for(h=r,f=r+i;h<f;++h)y=n[h],p={},p[s.axis]=s.parse(El(y,c),h),d.push(LD(El(y,u),p,o,h));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=Kx(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,i);for(let f=n;f<n+r;f++){const p=this.getParsed(f),y=s||Ct(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),b=this._calculateBarIndexPixels(f,u),v=(p._stacks||{})[a.axis],x={horizontal:c,base:y.base,enableBorderRadius:!v||Kx(p._custom)||o===v._top||o===v._bottom,x:c?y.head:b.center,y:c?b.center:y.head,height:c?b.size:Math.abs(y.size),width:c?Math.abs(y.size):b.size};h&&(x.options=d||this.resolveDataElementOptions(f,e[f].active?"active":i));const S=x.options||e[f].options;Wse(x,S,v,o),Kse(x,S,u.ratio),this.updateElement(e[f],f,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(f=>f[r.axis]===l),h=d&&d[u.vScale.axis];if(Ct(h)||isNaN(h))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||Bse(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=Kx(c);let d=l[n.axis],h=0,f=r?this.applyStack(n,l,r):d,p,y;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&wo(d)!==wo(c.barEnd)&&(h=0),h+=d);const b=!Ct(s)&&!u?s:h;let v=n.getPixelForValue(b);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(h+f):p=v,y=p-v,Math.abs(y)<o){y=Use(y,n,a)*o,d===a&&(v-=y/2);const x=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),_=Math.min(x,S),A=Math.max(x,S);v=Math.max(Math.min(v,A),_),p=v+y,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(p)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const x=wo(y)*n.getLineWidthForValue(a)/2;v+=x,y-=x}return{size:y,base:v,head:p,center:p+y/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=xt(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?$se(e,n,i,c):zse(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}class Yse extends Vl{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=xt(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=xt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,d=a.axis;for(let h=n;h<n+r;h++){const f=e[h],p=!s&&this.getParsed(h),y={},b=y[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),v=y[d]=s?a.getBasePixel():a.getPixelForValue(p[d]);y.skip=isNaN(b)||isNaN(v),c&&(y.options=l||this.resolveDataElementOptions(h,f.active?"active":i),s&&(y.options.radius=0)),this.updateElement(f,h,y,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=xt(r&&r._custom,s),i}}function Xse(t,e,n){let r=1,i=1,s=0,o=0;if(e<an){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(S,_,A)=>Hp(S,a,l,!0)?1:Math.max(_,_*n,A,A*n),p=(S,_,A)=>Hp(S,a,l,!0)?-1:Math.min(_,_*n,A,A*n),y=f(0,c,d),b=f(Vn,u,h),v=p(cn,c,d),x=p(cn+Vn,u,h);r=(y-v)/2,i=(b-x)/2,s=-(y+v)/2,o=-(b+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class VC extends Vl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Et(r[e])){const{key:l="value"}=this._parsing;s=c=>+El(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Hs(this.options.rotation-90)}_getCircumference(){return Hs(this.options.circumference)}_getRotationExtents(){let e=an,n=-an;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(oie(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:p,offsetY:y}=Xse(d,u,l),b=(r.width-o)/h,v=(r.height-o)/f,x=Math.max(Math.min(b,v)/2,0),S=oD(this.options.radius,x),_=Math.max(S*l,0),A=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=y*S,i.total=this.calculateTotal(),this.outerRadius=S-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/an)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=s&&c.animateScale,f=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(n,i);let v=this._getRotation(),x;for(x=0;x<n;++x)v+=this._circumference(x,s);for(x=n;x<n+r;++x){const S=this._circumference(x,s),_=e[x],A={x:u+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+S,circumference:S,outerRadius:p,innerRadius:f};b&&(A.options=y||this.resolveDataElementOptions(x,_.active?"active":i)),v+=S,this.updateElement(_,x,A,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?an*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=mm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(xt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class OD extends Vl{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=pD(n,i,o);this._drawStart=a,this._drawCount=l,mD(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),h=o.axis,f=a.axis,{spanGaps:p,segment:y}=this.options,b=th(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",x=n+r,S=e.length;let _=n>0&&this.getParsed(n-1);for(let A=0;A<S;++A){const T=e[A],P=v?T:{};if(A<n||A>=x){P.skip=!0;continue}const E=this.getParsed(A),z=Ct(E[f]),H=P[h]=o.getPixelForValue(E[h],A),j=P[f]=s||z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[f],A);P.skip=isNaN(H)||isNaN(j)||z,P.stop=A>0&&Math.abs(E[h]-_[h])>b,y&&(P.parsed=E,P.raw=c.data[A]),d&&(P.options=u||this.resolveDataElementOptions(A,T.active?"active":i)),v||this.updateElement(T,A,P,i),_=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class ID extends Vl{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=mm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return kD.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*cn;let f=h,p;const y=360/this.countVisibleElements();for(p=0;p<n;++p)f+=this._computeAngle(p,i,y);for(p=n;p<n+r;p++){const b=e[p];let v=f,x=f+this._computeAngle(p,i,y),S=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=x,s&&(l.animateScale&&(S=0),l.animateRotate&&(v=x=h));const _={x:u,y:d,innerRadius:0,outerRadius:S,startAngle:v,endAngle:x,options:this.resolveDataElementOptions(p,b.active?"active":i)};this.updateElement(b,p,_,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Hs(this.resolveDataElementOptions(e,n).angle||r):0}}class Jse extends VC{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class Qse extends Vl{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return kD.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,h=o?s.yCenter:u.y,f={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,a,f,i)}}}class Zse extends Vl{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=pD(n,r,i);if(this._drawStart=s,this._drawCount=o,mD(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(u),h=this.includeOptions(i,d),f=o.axis,p=a.axis,{spanGaps:y,segment:b}=this.options,v=th(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none";let S=n>0&&this.getParsed(n-1);for(let _=n;_<n+r;++_){const A=e[_],T=this.getParsed(_),P=x?A:{},E=Ct(T[p]),z=P[f]=o.getPixelForValue(T[f],_),H=P[p]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],_);P.skip=isNaN(z)||isNaN(H)||E,P.stop=_>0&&Math.abs(T[f]-S[f])>v,b&&(P.parsed=T,P.raw=c.data[_]),h&&(P.options=d||this.resolveDataElementOptions(_,A.active?"active":i)),x||this.updateElement(A,_,P,i),S=T}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}var eoe=Object.freeze({__proto__:null,BarController:Gse,BubbleController:Yse,DoughnutController:VC,LineController:OD,PieController:Jse,PolarAreaController:ID,RadarController:Qse,ScatterController:Zse});function rc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class UC{static override(e){Object.assign(UC.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return rc()}parse(){return rc()}format(){return rc()}add(){return rc()}diff(){return rc()}startOf(){return rc()}endOf(){return rc()}}var toe={_date:UC};function noe(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?bie:ta;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,n-d),f=c(s,e,n+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=t,f=h.slice(0,u.lo+1).reverse().findIndex(y=>!Ct(y[d.axis]));u.lo-=Math.max(0,f);const p=h.slice(u.hi).findIndex(y=>!Ct(y[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:s.length-1}}function gm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=noe(s[a],e,o,i);for(let f=d;f<=h;++f){const p=u[f];p.skip||r(p,c,f)}}}function roe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Gx(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||gm(t,n,e,function(a,l,c){!i&&!na(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function ioe(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=cD(o,{x:e.x,y:e.y});Hp(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return gm(t,n,e,s),i}function soe(t,e,n,r,i,s){let o=[];const a=roe(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,i);if(r&&!f)return;const p=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(p))&&!f)return;const b=a(e,p);b<l?(o=[{element:u,datasetIndex:d,index:h}],l=b):b===l&&o.push({element:u,datasetIndex:d,index:h})}return gm(t,n,e,c),o}function Yx(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?ioe(t,e,n,i):soe(t,e,n,r,i,s)}function cE(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return gm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var ooe={evaluateInteractionItems:gm,modes:{index(t,e,n,r){const i=uc(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Gx(t,i,s,r,o):Yx(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Gx(t,i,s,r,o):Yx(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Gx(t,i,s,r,o)},nearest(t,e,n,r){const i=uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Yx(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=uc(e,t);return cE(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=uc(e,t);return cE(t,i,"y",n.intersect,r)}}};const RD=["left","top","right","bottom"];function lf(t,e){return t.filter(n=>n.pos===e)}function uE(t,e){return t.filter(n=>RD.indexOf(n.pos)===-1&&n.box.axis===e)}function cf(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function aoe(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function loe(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!RD.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function coe(t,e){const n=loe(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function uoe(t){const e=aoe(t),n=cf(e.filter(c=>c.box.fullSize),!0),r=cf(lf(e,"left"),!0),i=cf(lf(e,"right")),s=cf(lf(e,"top"),!0),o=cf(lf(e,"bottom")),a=uE(e,"x"),l=uE(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:lf(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function dE(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function DD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function doe(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Et(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&DD(o,s.getPadding());const a=Math.max(0,e.outerWidth-dE(o,t,"left","right")),l=Math.max(0,e.outerHeight-dE(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hoe(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function foe(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Nf(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,foe(a.horizontal,e));const{same:d,other:h}=doe(e,n,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Nf(i,e,n,r)||u}function o0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function hE(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;Wp(c.start)&&(o=c.start),l.fullSize?o0(l,i.left,o,n.outerWidth-i.right-i.left,h):o0(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;Wp(c.start)&&(s=c.start),l.fullSize?o0(l,s,i.top,h,n.outerHeight-i.bottom-i.top):o0(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var qr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Kr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=uoe(t.boxes),l=a.vertical,c=a.horizontal;$t(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,b)=>b.box.options&&b.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);DD(h,Kr(r));const f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=coe(l.concat(c),d);Nf(a.fullSize,f,d,p),Nf(l,f,d,p),Nf(c,f,d,p)&&Nf(l,f,d,p),hoe(f),hE(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,hE(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},$t(a.chartArea,y=>{const b=y.box;Object.assign(b,t.chartArea),b.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class FD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class poe extends FD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const W0="$chartjs",moe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fE=t=>t===null||t==="";function goe(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[W0]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",fE(i)){const s=X4(t,"width");s!==void 0&&(t.width=s)}if(fE(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=X4(t,"height");s!==void 0&&(t.height=s)}return t}const BD=hse?{passive:!0}:!1;function yoe(t,e,n){t&&t.addEventListener(e,n,BD)}function voe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,BD)}function boe(t,e){const n=moe[t.type]||t.type,{x:r,y:i}=uc(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function tv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function xoe(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||tv(a.addedNodes,r),o=o&&!tv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function woe(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||tv(a.removedNodes,r),o=o&&!tv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Gp=new Map;let pE=0;function zD(){const t=window.devicePixelRatio;t!==pE&&(pE=t,Gp.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Soe(t,e){Gp.size||window.addEventListener("resize",zD),Gp.set(t,e)}function koe(t){Gp.delete(t),Gp.size||window.removeEventListener("resize",zD)}function Coe(t,e,n){const r=t.canvas,i=r&&$C(r);if(!i)return;const s=fD((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),Soe(t,s),o}function Xx(t,e,n){n&&n.disconnect(),e==="resize"&&koe(t)}function _oe(t,e,n){const r=t.canvas,i=fD(s=>{t.ctx!==null&&n(boe(s,t))},t);return yoe(r,e,i),i}class Aoe extends FD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(goe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[W0])return!1;const r=n[W0].initial;["height","width"].forEach(s=>{const o=r[s];Ct(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[W0],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:xoe,detach:woe,resize:Coe}[n]||_oe;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Xx,detach:Xx,resize:Xx}[n]||voe)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return dse(e,n,r,i)}isAttached(e){const n=e&&$C(e);return!!(n&&n.isConnected)}}function Noe(t){return!zC()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?poe:Aoe}let ya=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return th(this.x)&&th(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Toe(t,e){const n=t.options.ticks,r=Eoe(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Moe(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return joe(e,c,s,o/i),c;const u=Poe(s,e,i);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(a0(e,c,u,Ct(f)?0:a-f,a),d=0,h=o-1;d<h;d++)a0(e,c,u,s[d],s[d+1]);return a0(e,c,u,l,Ct(f)?e.length:l+f),c}return a0(e,c,u),c}function Eoe(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function Poe(t,e,n){const r=Loe(t),i=e.length/n;if(!r)return Math.max(i,1);const s=pie(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Moe(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function joe(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function a0(t,e,n,r,i){const s=xt(r,0),o=Math.min(xt(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function Loe(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Ooe=t=>t==="left"?"right":t==="right"?"left":t,mE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,gE=(t,e)=>Math.min(e||t,t);function yE(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function Ioe(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function Roe(t,e){$t(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function uf(t){return t.drawTicks?t.tickLength:0}function vE(t,e){if(!t.display)return 0;const n=tr(t.font,e),r=Kr(t.padding);return(rn(t.text)?t.text.length:1)*n.lineHeight+r.height}function Doe(t,e){return $l(t,{scale:e,type:"scale"})}function Foe(t,e,n){return $l(t,{tick:n,index:e,type:"tick"})}function Boe(t,e,n){let r=OC(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Ooe(r)),r}function zoe(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,p;const y=o-i,b=a-s;if(t.isHorizontal()){if(f=Dr(r,s,a),Et(n)){const v=Object.keys(n)[0],x=n[v];p=u[v].getPixelForValue(x)+y-e}else n==="center"?p=(c.bottom+c.top)/2+y-e:p=mE(t,n,e);h=a-s}else{if(Et(n)){const v=Object.keys(n)[0],x=n[v];f=u[v].getPixelForValue(x)-b+e}else n==="center"?f=(c.left+c.right)/2-b+e:f=mE(t,n,e);p=Dr(r,o,i),d=n==="left"?-Vn:Vn}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}class su extends ya{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Bi(e,Number.POSITIVE_INFINITY),n=Bi(n,Number.NEGATIVE_INFINITY),r=Bi(r,Number.POSITIVE_INFINITY),i=Bi(i,Number.NEGATIVE_INFINITY),{min:Bi(e,r),max:Bi(n,i),minDefined:Mn(e),maxDefined:Mn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Bi(n,Bi(r,n)),max:Bi(r,Bi(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Uie(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?yE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Toe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Zt(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=gE(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=dr(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-uf(e.grid)-n.padding-vE(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=jC(Math.min(Math.asin(dr((u.highest.height+6)/a,-1,1)),Math.asin(dr(l/c,-1,1))-Math.asin(dr(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=vE(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=uf(s)+l):(e.height=this.maxHeight,e.width=uf(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=Hs(this.labelRotation),y=Math.cos(p),b=Math.sin(p);if(a){const v=r.mirror?0:b*d.width+y*h.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=r.mirror?0:y*d.width+b*h.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(c,u,b,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=i*e.width,f=r*n.height):(h=r*e.height,f=i*n.width):s==="start"?f=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ct(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=yE(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/gE(n,r));let c=0,u=0,d,h,f,p,y,b,v,x,S,_,A;for(d=0;d<n;d+=l){if(p=e[d].label,y=this._resolveTickFontOptions(d),i.font=b=y.string,v=s[b]=s[b]||{data:{},gc:[]},x=y.lineHeight,S=_=0,!Ct(p)&&!rn(p))S=Zy(i,v.data,v.gc,S,p),_=x;else if(rn(p))for(h=0,f=p.length;h<f;++h)A=p[h],!Ct(A)&&!rn(A)&&(S=Zy(i,v.data,v.gc,S,A),_+=x);o.push(S),a.push(_),c=Math.max(S,c),u=Math.max(_,u)}Roe(s,n);const T=o.indexOf(c),P=a.indexOf(u),E=z=>({width:o[z]||0,height:a[z]||0});return{first:E(0),last:E(n-1),widest:E(T),highest:E(P),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return vie(this._alignToPixels?nc(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=Foe(this.getContext(),e,r))}return this.$context||(this.$context=Doe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hs(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=uf(s),f=[],p=a.setContext(this.getContext()),y=p.display?p.width:0,b=y/2,v=function(Y){return nc(r,Y,y)};let x,S,_,A,T,P,E,z,H,j,I,q;if(o==="top")x=v(this.bottom),P=this.bottom-h,z=x-b,j=v(e.top)+b,q=e.bottom;else if(o==="bottom")x=v(this.top),j=e.top,q=v(e.bottom)-b,P=x+b,z=this.top+h;else if(o==="left")x=v(this.right),T=this.right-h,E=x-b,H=v(e.left)+b,I=e.right;else if(o==="right")x=v(this.left),H=e.left,I=v(e.right)-b,T=x+b,E=this.left+h;else if(n==="x"){if(o==="center")x=v((e.top+e.bottom)/2+.5);else if(Et(o)){const Y=Object.keys(o)[0],ee=o[Y];x=v(this.chart.scales[Y].getPixelForValue(ee))}j=e.top,q=e.bottom,P=x+b,z=P+h}else if(n==="y"){if(o==="center")x=v((e.left+e.right)/2);else if(Et(o)){const Y=Object.keys(o)[0],ee=o[Y];x=v(this.chart.scales[Y].getPixelForValue(ee))}T=x-b,E=T-h,H=e.left,I=e.right}const F=xt(i.ticks.maxTicksLimit,d),ne=Math.max(1,Math.ceil(d/F));for(S=0;S<d;S+=ne){const Y=this.getContext(S),ee=s.setContext(Y),X=a.setContext(Y),ie=ee.lineWidth,V=ee.color,K=X.dash||[],M=X.dashOffset,U=ee.tickWidth,G=ee.tickColor,Z=ee.tickBorderDash||[],re=ee.tickBorderDashOffset;_=Ioe(this,S,l),_!==void 0&&(A=nc(r,_,ie),c?T=E=H=I=A:P=z=j=q=A,f.push({tx1:T,ty1:P,tx2:E,ty2:z,x1:H,y1:j,x2:I,y2:q,width:ie,color:V,borderDash:K,borderDashOffset:M,tickWidth:U,tickColor:G,tickBorderDash:Z,tickBorderDashOffset:re}))}return this._ticksLength=d,this._borderValue=x,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=uf(r.grid),f=h+u,p=d?-u:f,y=-Hs(this.labelRotation),b=[];let v,x,S,_,A,T,P,E,z,H,j,I,q="middle";if(i==="top")T=this.bottom-p,P=this._getXAxisLabelAlignment();else if(i==="bottom")T=this.top+p,P=this._getXAxisLabelAlignment();else if(i==="left"){const ne=this._getYAxisLabelAlignment(h);P=ne.textAlign,A=ne.x}else if(i==="right"){const ne=this._getYAxisLabelAlignment(h);P=ne.textAlign,A=ne.x}else if(n==="x"){if(i==="center")T=(e.top+e.bottom)/2+f;else if(Et(i)){const ne=Object.keys(i)[0],Y=i[ne];T=this.chart.scales[ne].getPixelForValue(Y)+f}P=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")A=(e.left+e.right)/2-f;else if(Et(i)){const ne=Object.keys(i)[0],Y=i[ne];A=this.chart.scales[ne].getPixelForValue(Y)}P=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));const F=this._getLabelSizes();for(v=0,x=a.length;v<x;++v){S=a[v],_=S.label;const ne=s.setContext(this.getContext(v));E=this.getPixelForTick(v)+s.labelOffset,z=this._resolveTickFontOptions(v),H=z.lineHeight,j=rn(_)?_.length:1;const Y=j/2,ee=ne.color,X=ne.textStrokeColor,ie=ne.textStrokeWidth;let V=P;o?(A=E,P==="inner"&&(v===x-1?V=this.options.reverse?"left":"right":v===0?V=this.options.reverse?"right":"left":V="center"),i==="top"?c==="near"||y!==0?I=-j*H+H/2:c==="center"?I=-F.highest.height/2-Y*H+H:I=-F.highest.height+H/2:c==="near"||y!==0?I=H/2:c==="center"?I=F.highest.height/2-Y*H:I=F.highest.height-j*H,d&&(I*=-1),y!==0&&!ne.showLabelBackdrop&&(A+=H/2*Math.sin(y))):(T=E,I=(1-j)*H/2);let K;if(ne.showLabelBackdrop){const M=Kr(ne.backdropPadding),U=F.heights[v],G=F.widths[v];let Z=I-M.top,re=0-M.left;switch(q){case"middle":Z-=U/2;break;case"bottom":Z-=U;break}switch(P){case"center":re-=G/2;break;case"right":re-=G;break;case"inner":v===x-1?re-=G:v>0&&(re-=G/2);break}K={left:re,top:Z,width:G+M.width,height:U+M.height,color:ne.backdropColor}}b.push({label:_,font:z,textOffset:I,options:{rotation:y,color:ee,strokeColor:X,strokeWidth:ie,textAlign:V,textBaseline:q,translation:[A,T],backdrop:K}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hs(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=nc(e,this.left,o)-o/2,u=nc(e,this.right,a)+a/2,d=h=l):(d=nc(e,this.top,o)-o/2,h=nc(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&v1(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Zc(r,c,0,u,l,a)}i&&b1(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=tr(r.font),o=Kr(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Et(n)?(l+=o.bottom,rn(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=zoe(this,l,n,a);Zc(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:Boe(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=xt(e.grid&&e.grid.z,-1),i=xt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==su.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return tr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class l0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Uoe(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,$oe(e,o,r),this.override&&pn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in pn[i]&&(delete pn[i][r],this.override&&delete Qc[r])}}function $oe(t,e,n){const r=qp(Object.create(null),[n?pn.get(n):{},pn.get(e),t.defaults]);pn.set(e,r),t.defaultRoutes&&Voe(e,t.defaultRoutes),t.descriptors&&pn.describe(e,t.descriptors)}function Voe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");pn.route(s,i,l,a)})}function Uoe(t){return"id"in t&&"defaults"in t}class qoe{constructor(){this.controllers=new l0(Vl,"datasets",!0),this.elements=new l0(ya,"elements"),this.plugins=new l0(Object,"plugins"),this.scales=new l0(su,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):$t(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=MC(e);Zt(r["before"+i],[],r),n[e](r),Zt(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ho=new qoe;class Woe{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Zt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=xt(r.options&&r.options.plugins,{}),s=Hoe(r);return i===!1&&!n?[]:Goe(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Hoe(t){const e={},n=[],r=Object.keys(ho.plugins.items);for(let s=0;s<r.length;s++)n.push(ho.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Koe(t,e){return!e&&t===!1?null:t===!0?{}:t}function Goe(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Koe(r[l],i);c!==null&&s.push({plugin:a,options:Yoe(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Yoe(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function B5(t,e){const n=pn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Xoe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Joe(t,e){return t===e?"_index_":"_value_"}function bE(t){if(t==="x"||t==="y"||t==="r")return t}function Qoe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function z5(t,...e){if(bE(t))return t;for(const n of e){const r=n.axis||Qoe(n.position)||t.length>1&&bE(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function xE(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Zoe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return xE(t,"x",n[0])||xE(t,"y",n[0])}return{}}function eae(t,e){const n=Qc[t.type]||{scales:{}},r=e.scales||{},i=B5(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Et(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=z5(o,a,Zoe(o,t),pn.scales[a.type]),c=Joe(l,i),u=n.scales||{};s[o]=Qf(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||B5(a,e),u=(Qc[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Xoe(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Qf(s[f],[{axis:h},r[f],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Qf(a,[pn.scales[a.type],pn.scale])}),s}function $D(t){const e=t.options||(t.options={});e.plugins=xt(e.plugins,{}),e.scales=eae(t,e)}function VD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function tae(t){return t=t||{},t.data=VD(t.data),$D(t),t}const wE=new Map,UD=new Set;function c0(t,e){let n=wE.get(t);return n||(n=e(),wE.set(t,n),UD.add(n)),n}const df=(t,e,n)=>{const r=El(e,n);r!==void 0&&t.add(r)};class nae{constructor(e){this._config=tae(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=VD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),$D(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return c0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return c0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return c0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return c0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>df(l,e,d))),u.forEach(d=>df(l,i,d)),u.forEach(d=>df(l,Qc[s]||{},d)),u.forEach(d=>df(l,pn,d)),u.forEach(d=>df(l,D5,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),UD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Qc[n]||{},pn.datasets[n]||{},{type:n},pn,D5]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=SE(this._resolverCache,e,i);let l=o;if(iae(o,n)){s.$shared=!1,r=Pl(r)?r():r;const c=this.createResolver(e,r,a);l=nh(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=SE(this._resolverCache,e,r);return Et(n)?nh(s,n,void 0,i):s}}function SE(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:DC(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const rae=t=>Et(t)&&Object.getOwnPropertyNames(t).some(e=>Pl(t[e]));function iae(t,e){const{isScriptable:n,isIndexable:r}=bD(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Pl(a)||rae(a))||o&&rn(a))return!0}return!1}var sae="4.4.9";const oae=["top","bottom","left","right","chartArea"];function kE(t,e){return t==="top"||t==="bottom"||oae.indexOf(t)===-1&&e==="x"}function CE(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function _E(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[t],e)}function aae(t){const e=t.chart,n=e.options.animation;Zt(n&&n.onProgress,[t],e)}function qD(t){return zC()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const H0={},AE=t=>{const e=qD(t);return Object.values(H0).filter(n=>n.canvas===e).pop()};function lae(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function cae(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let mh=class{static defaults=pn;static instances=H0;static overrides=Qc;static registry=ho;static version=sae;static getChart=AE;static register(...e){ho.add(...e),NE()}static unregister(...e){ho.remove(...e),NE()}constructor(e,n){const r=this.config=new nae(n),i=qD(e),s=AE(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Noe(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=sie(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Woe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sie(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],H0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qo.listen(this,"complete",_E),qo.listen(this,"progress",aae),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Ct(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ho}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Y4(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H4(this.canvas,this.ctx),this}stop(){return qo.stop(this),this}resize(e,n){qo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Y4(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Zt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};$t(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=z5(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),$t(s,o=>{const a=o.options,l=a.id,c=z5(l,a),u=xt(a.type,o.dtype);(a.position===void 0||kE(a.position,c)!==kE(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=ho.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),$t(i,(o,a)=>{o||delete r[a]}),$t(r,o=>{qr.configure(this,o,o.options),qr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(CE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||B5(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ho.getController(a),{datasetElementType:c,dataElementType:u}=pn.datasets[a];Object.assign(l,{dataElementType:ho.getElement(u),datasetElementType:c&&ho.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){$t(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||$t(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(CE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){$t(this.scales,e=>{qr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!D4(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;lae(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!D4(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;qr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],$t(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Pl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qo.has(this)?this.attached&&!qo.running(this)&&qo.start(this):(this.draw(),_E({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=PD(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&v1(n,i),e.controller.draw(),i&&b1(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return na(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=ooe.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=$l(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Wp(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H4(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete H0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};$t(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){$t(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},$t(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Xy(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=die(e),c=cae(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Zt(s.onHover,[e,a,this],this),l&&Zt(s.onClick,[e,a,this],this));const u=!Xy(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function NE(){return $t(mh.instances,t=>t._plugins.invalidate())}function uae(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Vn,r-Vn),t.closePath(),t.clip()}function dae(t){return RC(t,["outerStart","outerEnd","innerStart","innerEnd"])}function hae(t,e,n,r){const i=dae(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return dr(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:dr(i.innerStart,0,o),innerEnd:dr(i.innerEnd,0,o)}}function Vu(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function nv(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const ne=u>0?u-r:0,Y=d>0?d-r:0,ee=(ne+Y)/2,X=ee!==0?p*ee/(ee+r):p;f=(p-X)/2}const y=Math.max(.001,p*d-n/cn)/d,b=(p-y)/2,v=l+b+f,x=i-b-f,{outerStart:S,outerEnd:_,innerStart:A,innerEnd:T}=hae(e,h,d,x-v),P=d-S,E=d-_,z=v+S/P,H=x-_/E,j=h+A,I=h+T,q=v+A/j,F=x-T/I;if(t.beginPath(),s){const ne=(z+H)/2;if(t.arc(o,a,d,z,ne),t.arc(o,a,d,ne,H),_>0){const ie=Vu(E,H,o,a);t.arc(ie.x,ie.y,_,H,x+Vn)}const Y=Vu(I,x,o,a);if(t.lineTo(Y.x,Y.y),T>0){const ie=Vu(I,F,o,a);t.arc(ie.x,ie.y,T,x+Vn,F+Math.PI)}const ee=(x-T/h+(v+A/h))/2;if(t.arc(o,a,h,x-T/h,ee,!0),t.arc(o,a,h,ee,v+A/h,!0),A>0){const ie=Vu(j,q,o,a);t.arc(ie.x,ie.y,A,q+Math.PI,v-Vn)}const X=Vu(P,v,o,a);if(t.lineTo(X.x,X.y),S>0){const ie=Vu(P,z,o,a);t.arc(ie.x,ie.y,S,v-Vn,z)}}else{t.moveTo(o,a);const ne=Math.cos(z)*d+o,Y=Math.sin(z)*d+a;t.lineTo(ne,Y);const ee=Math.cos(H)*d+o,X=Math.sin(H)*d+a;t.lineTo(ee,X)}t.closePath()}function fae(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){nv(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%an||an))}return nv(t,e,n,r,l,i),t.fill(),l}function pae(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){nv(t,e,n,r,p,i);for(let y=0;y<s;++y)t.stroke();isNaN(a)||(p=o+(a%an||an))}f&&uae(t,e,p),s||(nv(t,e,n,r,p,i),t.stroke())}class mae extends ya{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.getProps(["x","y"],r),{angle:s,distance:o}=cD(i,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,f=xt(d,l-a),p=Hp(s,a,l)&&a!==l,y=f>=an||p,b=ea(o,c+h,u+h);return y&&b}getCenterPoint(e){const{x:n,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(i+s)/2,d=(o+a+c+l)/2;return{x:n+Math.cos(u)*d,y:r+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:r}=this,i=(n.offset||0)/4,s=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>an?Math.floor(r/an):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const l=1-Math.sin(Math.min(cn,r||0)),c=i*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,fae(e,this,c,s,o),pae(e,this,c,s,o),e.restore()}}function WD(t,e,n=e){t.lineCap=xt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(xt(n.borderDash,e.borderDash)),t.lineDashOffset=xt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=xt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=xt(n.borderWidth,e.borderWidth),t.strokeStyle=xt(n.borderColor,e.borderColor)}function gae(t,e,n){t.lineTo(n.x,n.y)}function yae(t){return t.stepped?Oie:t.tension||t.cubicInterpolationMode==="monotone"?Iie:gae}function HD(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function vae(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=HD(i,n,r),u=yae(s);let{move:d=!0,reverse:h}=r||{},f,p,y;for(f=0;f<=c;++f)p=i[(a+(h?c-f:f))%o],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,y,p,h,s.stepped),y=p);return l&&(p=i[(a+(h?c:0))%o],u(t,y,p,h,s.stepped)),!!l}function bae(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=HD(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,f,p,y,b,v;const x=_=>(o+(c?a-_:_))%s,S=()=>{y!==b&&(t.lineTo(u,b),t.lineTo(u,y),t.lineTo(u,v))};for(l&&(f=i[x(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[x(h)],f.skip)continue;const _=f.x,A=f.y,T=_|0;T===p?(A<y?y=A:A>b&&(b=A),u=(d*u+_)/++d):(S(),t.lineTo(_,A),p=T,d=0,y=b=A),v=A}S()}function $5(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?bae:vae}function xae(t){return t.stepped?fse:t.tension||t.cubicInterpolationMode==="monotone"?pse:dc}function wae(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),WD(t,e.options),t.stroke(i)}function Sae(t,e,n,r){const{segments:i,options:s}=e,o=$5(e);for(const a of i)WD(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const kae=typeof Path2D=="function";function Cae(t,e,n,r){kae&&!e.options.segment?wae(t,e,n,r):Sae(t,e,n,r)}class ym extends ya{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;sse(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xse(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=ED(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=xae(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=s[d],p=s[h];if(f===p){a.push(f);continue}const y=Math.abs((i-f[n])/(p[n]-f[n])),b=l(f,p,y,r.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,r){return $5(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=$5(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Cae(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function TE(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class KD extends ya{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return TE(this,e,"x",n)}inYRange(e,n){return TE(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!na(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,F5(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function GD(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function ol(t,e,n,r){return t?0:dr(e,n,r)}function _ae(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=vD(r);return{t:ol(i.top,s.top,0,n),r:ol(i.right,s.right,0,e),b:ol(i.bottom,s.bottom,0,n),l:ol(i.left,s.left,0,e)}}function Aae(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Dc(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Et(i);return{topLeft:ol(!l||a.top||a.left,s.topLeft,0,o),topRight:ol(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ol(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ol(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Nae(t){const e=GD(t),n=e.right-e.left,r=e.bottom-e.top,i=_ae(t,n/2,r/2),s=Aae(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Jx(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&GD(t,r);return a&&(i||ea(e,a.left,a.right))&&(s||ea(n,a.top,a.bottom))}function Tae(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Eae(t,e){t.rect(e.x,e.y,e.w,e.h)}function Qx(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Pae extends ya{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Nae(this),a=Tae(o.radius)?Kp:Eae;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Qx(o,n,s)),e.clip(),a(e,Qx(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Qx(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Jx(this,e,n,r)}inXRange(e,n){return Jx(this,e,null,n)}inYRange(e,n){return Jx(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var Mae=Object.freeze({__proto__:null,ArcElement:mae,BarElement:Pae,LineElement:ym,PointElement:KD});const V5=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],EE=V5.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function YD(t){return V5[t%V5.length]}function XD(t){return EE[t%EE.length]}function jae(t,e){return t.borderColor=YD(e),t.backgroundColor=XD(e),++e}function Lae(t,e){return t.backgroundColor=t.data.map(()=>YD(e++)),e}function Oae(t,e){return t.backgroundColor=t.data.map(()=>XD(e++)),e}function Iae(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof VC?e=Lae(n,e):i instanceof ID?e=Oae(n,e):i&&(e=jae(n,e))}}function PE(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Rae(t){return t&&(t.borderColor||t.backgroundColor)}function Dae(){return pn.borderColor!=="rgba(0,0,0,0.1)"||pn.backgroundColor!=="rgba(0,0,0,0.1)"}var Fae={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=PE(r)||Rae(i)||s&&PE(s)||Dae();if(!n.forceOverride&&o)return;const a=Iae(t);r.forEach(a)}};function Bae(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,d,h,f,p,y;for(o[l++]=t[u],d=0;d<s-2;d++){let b=0,v=0,x;const S=Math.floor((d+1)*a)+1+e,_=Math.min(Math.floor((d+2)*a)+1,n)+e,A=_-S;for(x=S;x<_;x++)b+=t[x].x,v+=t[x].y;b/=A,v/=A;const T=Math.floor(d*a)+1+e,P=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:E,y:z}=t[u];for(f=p=-1,x=T;x<P;x++)p=.5*Math.abs((E-b)*(t[x].y-z)-(E-t[x].x)*(v-z)),p>f&&(f=p,h=t[x],y=x);o[l++]=h,u=y}return o[l++]=t[c],o}function zae(t,e,n,r){let i=0,s=0,o,a,l,c,u,d,h,f,p,y;const b=[],v=e+n-1,x=t[e].x,_=t[v].x-x;for(o=e;o<e+n;++o){a=t[o],l=(a.x-x)/_*r,c=a.y;const A=l|0;if(A===u)c<p?(p=c,d=o):c>y&&(y=c,h=o),i=(s*i+a.x)/++s;else{const T=o-1;if(!Ct(d)&&!Ct(h)){const P=Math.min(d,h),E=Math.max(d,h);P!==f&&P!==T&&b.push({...t[P],x:i}),E!==f&&E!==T&&b.push({...t[E],x:i})}o>0&&T!==f&&b.push(t[T]),b.push(a),u=A,s=0,p=y=c,d=h=f=o}}return b}function JD(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ME(t){t.data.datasets.forEach(e=>{JD(e)})}function $ae(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=dr(ta(e,s.axis,o).lo,0,n-1)),c?i=dr(ta(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var Vae={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){ME(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Af([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=$ae(l,c);const f=n.threshold||4*r;if(h<=f){JD(i);return}Ct(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let p;switch(n.algorithm){case"lttb":p=Bae(c,d,h,r,n);break;case"min-max":p=zae(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=p})},destroy(t){ME(t)}};function Uae(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=qC(l,c,i);const u=U5(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=ED(e,u);for(const h of d){const f=U5(n,s[h.start],s[h.end],h.loop),p=TD(a,i,f);for(const y of p)o.push({source:y,target:h,start:{[n]:jE(u,f,"start",Math.max)},end:{[n]:jE(u,f,"end",Math.min)}})}}return o}function U5(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=$i(i),s=$i(s)),{property:t,start:i,end:s}}function qae(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=qC(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function qC(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function jE(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function QD(t,e){let n=[],r=!1;return rn(t)?(r=!0,n=t):n=qae(t,e),n.length?new ym({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function LE(t){return t&&t.fill!==!1}function Wae(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Mn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Hae(t,e,n){const r=Xae(t);if(Et(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Mn(i)&&Math.floor(i)===i?Kae(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Kae(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Gae(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Et(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Yae(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Et(t)?r=t.value:r=e.getBaseValue(),r}function Xae(t){const e=t.options,n=e.fill;let r=xt(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Jae(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Qae(e,n);a.push(QD({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)Zae(i,o[u],a)}return new ym({points:i,options:{}})}function Qae(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Zae(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=ele(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function ele(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],h=o[u.end][n];if(ea(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:r}}class ZD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:an},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function tle(t){const{chart:e,fill:n,line:r}=t;if(Mn(n))return nle(e,n);if(n==="stack")return Jae(t);if(n==="shape")return!0;const i=rle(t);return i instanceof ZD?i:QD(i,r)}function nle(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function rle(t){return(t.scale||{}).getPointPositionForValue?sle(t):ile(t)}function ile(t){const{scale:e={},fill:n}=t,r=Gae(n,e);if(Mn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function sle(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Yae(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new ZD({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function Zx(t,e,n){const r=tle(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(s),y=PD(i,p);r&&o.points.length&&(v1(t,n),ole(t,{line:o,target:r,above:h,below:f,area:n,scale:a,axis:l,clip:y}),b1(t))}function ole(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save(),c==="x"&&s!==i&&(OE(t,r,o.top),IE(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),OE(t,r,o.bottom)),IE(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore()}function OE(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[qC(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function IE(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=Uae(n,r,i);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=s}={}}=c,p=r!==!0;t.save(),t.fillStyle=f,ale(t,o,a,p&&U5(i,d,h)),t.beginPath();const y=!!n.pathSegment(t,c);let b;if(p){y?t.closePath():RE(t,r,h,i);const v=!!r.pathSegment(t,u,{move:y,reverse:!0});b=y&&v,b||RE(t,r,d,i)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function ale(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,u-l,d-c),t.clip()}}function RE(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var lle={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ym&&(l={visible:t.isDatasetVisible(o),index:o,fill:Hae(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Wae(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Zx(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;LE(s)&&Zx(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!LE(r)||n.drawTime!=="beforeDatasetDraw"||Zx(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const DE=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},cle=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class FE extends ya{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Zt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=tr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=DE(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,y)=>{const b=r+n/2+s.measureText(p.text).width;(y===0||c[c.length-1]+b+2*a>o)&&(d+=u,c[c.length-(y>0?0:1)]=0,f+=u,h++),l[y]={left:0,top:f,row:h,width:b,height:i},c[c.length-1]+=b+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,p=0,y=0;return this.legendItems.forEach((b,v)=>{const{itemWidth:x,itemHeight:S}=ule(r,n,s,b,i);v>0&&f+S+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,y++,h=f=0),l[v]={left:p,top:f,col:y,width:x,height:S},h=Math.max(h,x),f+=S+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Pd(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Dr(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Dr(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Dr(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Dr(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;v1(e,this),this._draw(),b1(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=pn.color,l=Pd(e.rtl,this.left,this.width),c=tr(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:y,itemHeight:b}=DE(o,d),v=function(T,P,E){if(isNaN(p)||p<=0||isNaN(y)||y<0)return;i.save();const z=xt(E.lineWidth,1);if(i.fillStyle=xt(E.fillStyle,a),i.lineCap=xt(E.lineCap,"butt"),i.lineDashOffset=xt(E.lineDashOffset,0),i.lineJoin=xt(E.lineJoin,"miter"),i.lineWidth=z,i.strokeStyle=xt(E.strokeStyle,a),i.setLineDash(xt(E.lineDash,[])),o.usePointStyle){const H={radius:y*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:z},j=l.xPlus(T,p/2),I=P+h;yD(i,H,j,I,o.pointStyleWidth&&p)}else{const H=P+Math.max((d-y)/2,0),j=l.leftForLtr(T,p),I=Dc(E.borderRadius);i.beginPath(),Object.values(I).some(q=>q!==0)?Kp(i,{x:j,y:H,w:p,h:y,radius:I}):i.rect(j,H,p,y),i.fill(),z!==0&&i.stroke()}i.restore()},x=function(T,P,E){Zc(i,E.text,T,P+b/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?f={x:Dr(s,this.left+u,this.right-r[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:Dr(s,this.top+_+u,this.bottom-n[0].height),line:0},_D(this.ctx,e.textDirection);const A=b+u;this.legendItems.forEach((T,P)=>{i.strokeStyle=T.fontColor,i.fillStyle=T.fontColor;const E=i.measureText(T.text).width,z=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),H=p+h+E;let j=f.x,I=f.y;l.setWidth(this.width),S?P>0&&j+H+u>this.right&&(I=f.y+=A,f.line++,j=f.x=Dr(s,this.left+u,this.right-r[f.line])):P>0&&I+A>this.bottom&&(j=f.x=j+n[f.line].width+u,f.line++,I=f.y=Dr(s,this.top+_+u,this.bottom-n[f.line].height));const q=l.x(j);if(v(q,I,T),j=kie(z,j+p+h,S?j+H:this.right,e.rtl),x(l.x(j),I,T),S)f.x+=H+u;else if(typeof T.text!="string"){const F=c.lineHeight;f.y+=e8(T,F)+u}else f.y+=A}),AD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=tr(n.font),i=Kr(n.padding);if(!n.display)return;const s=Pd(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Dr(e.align,d,this.right-h);else{const p=this.columnSizes.reduce((y,b)=>Math.max(y,b.height),0);u=c+Dr(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Dr(a,d,d+h);o.textAlign=s.textAlign(OC(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Zc(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=tr(e.font),r=Kr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(ea(e,this.left,this.right)&&ea(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ea(e,i.left,i.left+i.width)&&ea(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!fle(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=cle(i,r);i&&!s&&Zt(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Zt(n.onHover,[e,r,this],this)}else r&&Zt(n.onClick,[e,r,this],this)}}function ule(t,e,n,r,i){const s=dle(r,t,e,n),o=hle(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function dle(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function hle(t,e,n){let r=t;return typeof e.text!="string"&&(r=e8(e,n)),r}function e8(t,e){const n=t.text?t.text.length:0;return e*n}function fle(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var t8={id:"legend",_element:FE,start(t,e,n){const r=t.legend=new FE({ctx:t.ctx,options:n,chart:t});qr.configure(t,r,n),qr.addBox(t,r)},stop(t){qr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;qr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Kr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class WC extends ya{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=rn(r.text)?r.text.length:1;this._padding=Kr(r.padding);const s=i*tr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Dr(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Dr(a,i,n),l=cn*-.5):(u=s-e,d=Dr(a,n,i),l=cn*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=tr(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Zc(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:OC(n.align),textBaseline:"middle",translation:[o,a]})}}function ple(t,e){const n=new WC({ctx:t.ctx,options:e,chart:t});qr.configure(t,n,e),qr.addBox(t,n),t.titleBlock=n}var n8={id:"title",_element:WC,start(t,e,n){ple(t,n)},stop(t){const e=t.titleBlock;qr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;qr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const u0=new WeakMap;var mle={id:"subtitle",start(t,e,n){const r=new WC({ctx:t.ctx,options:n,chart:t});qr.configure(t,r,n),qr.addBox(t,r),u0.set(t,r)},stop(t){qr.removeBox(t,u0.get(t)),u0.delete(t)},beforeUpdate(t,e,n){const r=u0.get(t);qr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tf={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=R5(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function ao(t,e){return e&&(rn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wo(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function gle(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function BE(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=tr(e.bodyFont),c=tr(e.titleFont),u=tr(e.footerFont),d=s.length,h=i.length,f=r.length,p=Kr(e.padding);let y=p.height,b=0,v=r.reduce((_,A)=>_+A.before.length+A.lines.length+A.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const _=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*_+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}h&&(y+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let x=0;const S=function(_){b=Math.max(b,n.measureText(_).width+x)};return n.save(),n.font=c.string,$t(t.title,S),n.font=l.string,$t(t.beforeBody.concat(t.afterBody),S),x=e.displayColors?o+2+e.boxPadding:0,$t(r,_=>{$t(_.before,S),$t(_.lines,S),$t(_.after,S)}),x=0,n.font=u.string,$t(t.footer,S),n.restore(),b+=p.width,{width:b,height:y}}function yle(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function vle(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function ble(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),vle(c,t,e,n)&&(c="center"),c}function zE(t,e,n){const r=n.yAlign||e.yAlign||yle(t,n);return{xAlign:n.xAlign||e.xAlign||ble(t,e,n,r),yAlign:r}}function xle(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function wle(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function $E(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Dc(o);let p=xle(e,a);const y=wle(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+i:a==="right"&&(p+=Math.max(d,f)+i),{x:dr(p,0,r.width-e.width),y:dr(y,0,r.height-e.height)}}function d0(t,e,n){const r=Kr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function VE(t){return ao([],Wo(t))}function Sle(t,e,n){return $l(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function UE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const r8={beforeTitle:zo,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:zo,beforeBody:zo,beforeLabel:zo,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ct(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:zo,afterBody:zo,beforeFooter:zo,footer:zo,afterFooter:zo};function yi(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?r8[e].call(n,r):i}class qE extends ya{static positioners=Tf;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new MD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Sle(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=yi(r,"beforeTitle",this,e),s=yi(r,"title",this,e),o=yi(r,"afterTitle",this,e);let a=[];return a=ao(a,Wo(i)),a=ao(a,Wo(s)),a=ao(a,Wo(o)),a}getBeforeBody(e,n){return VE(yi(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return $t(e,s=>{const o={before:[],lines:[],after:[]},a=UE(r,s);ao(o.before,Wo(yi(a,"beforeLabel",this,s))),ao(o.lines,yi(a,"label",this,s)),ao(o.after,Wo(yi(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return VE(yi(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=yi(r,"beforeFooter",this,e),s=yi(r,"footer",this,e),o=yi(r,"afterFooter",this,e);let a=[];return a=ao(a,Wo(i)),a=ao(a,Wo(s)),a=ao(a,Wo(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(gle(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),$t(a,u=>{const d=UE(e.callbacks,u);i.push(yi(d,"labelColor",this,u)),s.push(yi(d,"labelPointStyle",this,u)),o.push(yi(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Tf[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=BE(this,r),c=Object.assign({},a,l),u=zE(this.chart,r,c),d=$E(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Dc(a),{x:h,y:f}=e,{width:p,height:y}=n;let b,v,x,S,_,A;return s==="center"?(_=f+y/2,i==="left"?(b=h,v=b-o,S=_+o,A=_-o):(b=h+p,v=b+o,S=_-o,A=_+o),x=b):(i==="left"?v=h+Math.max(l,u)+o:i==="right"?v=h+p-Math.max(c,d)-o:v=this.caretX,s==="top"?(S=f,_=S-o,b=v-o,x=v+o):(S=f+y,_=S+o,b=v+o,x=v-o),A=S),{x1:b,x2:v,x3:x,y1:S,y2:_,y3:A}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Pd(r.rtl,this.x,this.width);for(e.x=d0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=tr(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=tr(s.bodyFont),d=d0(this,"left",s),h=i.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+f;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(h,c)+c/2,v=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,F5(e,y,b,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,F5(e,y,b,v)}else{e.lineWidth=Et(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=i.leftForLtr(h,c),b=i.leftForLtr(i.xPlus(h,1),c-2),v=Dc(o.borderRadius);Object.values(v).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Kp(e,{x:y,y:p,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Kp(e,{x:b,y:p+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,p,c,l),e.strokeRect(y,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=tr(r.bodyFont);let h=d.lineHeight,f=0;const p=Pd(r.rtl,this.x,this.width),y=function(E){n.fillText(E,p.x(e.x+f),e.y+h/2),e.y+=h+s},b=p.textAlign(o);let v,x,S,_,A,T,P;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=d0(this,b,r),n.fillStyle=r.bodyColor,$t(this.beforeBody,y),f=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,T=i.length;_<T;++_){for(v=i[_],x=this.labelTextColors[_],n.fillStyle=x,$t(v.before,y),S=v.lines,a&&S.length&&(this._drawColorBox(n,e,_,p,r),h=Math.max(d.lineHeight,l)),A=0,P=S.length;A<P;++A)y(S[A]),h=d.lineHeight;$t(v.after,y)}f=0,h=d.lineHeight,$t(this.afterBody,y),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Pd(r.rtl,this.x,this.width);for(e.x=d0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=tr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=Dc(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Tf[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=BE(this,e),l=Object.assign({},o,this._size),c=zE(n,e,l),u=$E(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Kr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),_D(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),AD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Xy(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Xy(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Tf[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}var i8={id:"tooltip",_element:qE,positioners:Tf,afterInit(t,e,n){n&&(t.tooltip=new qE({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:r8},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},kle=Object.freeze({__proto__:null,Colors:Fae,Decimation:Vae,Filler:lle,Legend:t8,SubTitle:mle,Title:n8,Tooltip:i8});const Cle=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function _le(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Cle(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Ale=(t,e)=>t===null?null:dr(Math.round(t),0,e);function WE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class s8 extends su{static id="category";static defaults={ticks:{callback:WE}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ct(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:_le(r,e,xt(n,e),this._addedLabels),Ale(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return WE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Nle(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=s||1,p=u-1,{min:y,max:b}=e,v=!Ct(o),x=!Ct(a),S=!Ct(c),_=(b-y)/(d+1);let A=B4((b-y)/p/f)*f,T,P,E,z;if(A<1e-14&&!v&&!x)return[{value:y},{value:b}];z=Math.ceil(b/A)-Math.floor(y/A),z>p&&(A=B4(z*A/p/f)*f),Ct(l)||(T=Math.pow(10,l),A=Math.ceil(A*T)/T),i==="ticks"?(P=Math.floor(y/A)*A,E=Math.ceil(b/A)*A):(P=y,E=b),v&&x&&s&&gie((a-o)/s,A/1e3)?(z=Math.round(Math.min((a-o)/A,u)),A=(a-o)/z,P=o,E=a):S?(P=v?o:P,E=x?a:E,z=c-1,A=(E-P)/z):(z=(E-P)/A,Zf(z,Math.round(z),A/1e3)?z=Math.round(z):z=Math.ceil(z));const H=Math.max(z4(A),z4(P));T=Math.pow(10,Ct(l)?H:l),P=Math.round(P*T)/T,E=Math.round(E*T)/T;let j=0;for(v&&(h&&P!==o?(n.push({value:o}),P<o&&j++,Zf(Math.round((P+j*A)*T)/T,o,HE(o,_,t))&&j++):P<o&&j++);j<z;++j){const I=Math.round((P+j*A)*T)/T;if(x&&I>a)break;n.push({value:I})}return x&&h&&E!==a?n.length&&Zf(n[n.length-1].value,a,HE(a,_,t))?n[n.length-1].value=a:n.push({value:a}):(!x||E===a)&&n.push({value:E}),n}function HE(t,e,{horizontal:n,minRotation:r}){const i=Hs(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class rv extends su{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ct(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=wo(i),c=wo(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Nle(i,s);return e.bounds==="ticks"&&lD(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return mm(e,this.chart.options.locale,this.options.ticks.format)}}class o8 extends rv{static id="linear";static defaults={ticks:{callback:y1.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Mn(e)?e:0,this.max=Mn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Hs(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Yp=t=>Math.floor(sl(t)),ic=(t,e)=>Math.pow(10,Yp(t)+e);function KE(t){return t/Math.pow(10,Yp(t))===1}function GE(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Tle(t,e){const n=e-t;let r=Yp(n);for(;GE(t,e,r)>10;)r++;for(;GE(t,e,r)<10;)r--;return Math.min(r,Yp(t))}function Ele(t,{min:e,max:n}){e=Bi(t.min,e);const r=[],i=Yp(e);let s=Tle(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=Bi(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)r.push({value:h,major:KE(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=Bi(t.max,h);return r.push({value:f,major:KE(f),significand:d}),r}class Ple extends su{static id="logarithmic";static defaults={ticks:{callback:y1.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=rv.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Mn(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Mn(e)?Math.max(0,e):null,this.max=Mn(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Mn(this._userMin)&&(this.min=e===ic(this.min,0)?ic(this.min,-1):ic(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(ic(r,-1)),o(ic(i,1)))),r<=0&&s(ic(i,-1)),i<=0&&o(ic(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Ele(n,this);return e.bounds==="ticks"&&lD(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":mm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=sl(e),this._valueRange=sl(this.max)-sl(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(sl(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function q5(t){const e=t.ticks;if(e.display&&t.display){const n=Kr(e.backdropPadding);return xt(e.font&&e.font.size,pn.font.size)+n.height}return 0}function Mle(t,e,n){return n=rn(n)?n:[n],{w:Lie(t,e.string,n),h:n.length*e.lineHeight}}function YE(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function jle(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?cn/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=tr(c.font),h=Mle(t.ctx,d,t._pointLabels[l]);r[l]=h;const f=$i(t.getIndexAngle(l)+a),p=Math.round(jC(f)),y=YE(p,u.x,h.w,0,180),b=YE(p,u.y,h.h,90,270);Lle(n,e,f,y,b)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Rle(t,r,i)}function Lle(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Ole(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(jC($i(l.angle+Vn))),u=Ble(l.y,a.h,c),d=Dle(c),h=Fle(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Ile(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(na({x:n,y:r},e)||na({x:n,y:s},e)||na({x:i,y:r},e)||na({x:i,y:s},e))}function Rle(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:q5(s)/2,additionalAngle:o?cn/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=Ole(t,u,l);r.push(d),a==="auto"&&(d.visible=Ile(d,c),d.visible&&(c=d))}return r}function Dle(t){return t===0||t===180?"center":t<180?"left":"right"}function Fle(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Ble(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function zle(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ct(a)){const l=Dc(e.borderRadius),c=Kr(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,h=s-r+c.width,f=o-i+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Kp(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function $le(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));zle(n,o,s);const a=tr(o.font),{x:l,y:c,textAlign:u}=s;Zc(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function a8(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,an);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Vle(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),a8(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function Ule(t,e,n){return $l(t,{label:n,index:e,type:"pointLabel"})}class qle extends rv{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:y1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Kr(q5(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Mn(e)&&!isNaN(e)?e:0,this.max=Mn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/q5(this.options))}generateTickLabels(e){rv.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Zt(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?jle(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=an/(this._pointLabels.length||1),r=this.options.startAngle||0;return $i(e*n+Hs(r))}getDistanceFromCenterForValue(e){if(Ct(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Ct(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return Ule(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Vn+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),a8(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&$le(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=i.setContext(h),p=s.setContext(h);Vle(this,f,l,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=tr(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Kr(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Zc(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}const w1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wi=Object.keys(w1);function XE(t,e){return t-e}function JE(t,e){if(Ct(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Mn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(th(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function QE(t,e,n,r){const i=wi.length;for(let s=wi.indexOf(t);s<i-1;++s){const o=w1[wi[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return wi[s]}return wi[i-1]}function Wle(t,e,n,r,i){for(let s=wi.length-1;s>=wi.indexOf(n);s--){const o=wi[s];if(w1[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return wi[n?wi.indexOf(n):0]}function Hle(t){for(let e=wi.indexOf(t)+1,n=wi.length;e<n;++e)if(w1[wi[e]].common)return wi[e]}function ZE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=LC(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Kle(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function eP(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Kle(t,r,i,n)}class W5 extends su{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new toe._date(e.adapters.date);i.init(n),Qf(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:JE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Mn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Mn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=xie(i,s,o);return this._unit=n.unit||(r.autoSkip?QE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Wle(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Hle(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),eP(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=dr(n,0,o),r=dr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||QE(s.minUnit,n,r,this._getLabelCapacity(n)),a=xt(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=th(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<r;h=+e.add(h,a,o),f++)ZE(u,h,p);return(h===r||i.bounds==="ticks"||f===1)&&ZE(u,h,p),Object.keys(u).sort(XE).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Zt(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],f=c&&d&&h&&h.major;return this._adapter.format(e,i||(f?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Hs(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,eP(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(JE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return dD(e.sort(XE))}}function h0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ta(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ta(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Gle extends W5{static id="timeseries";static defaults=W5.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=h0(n,this.min),this._tableRange=h0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(h0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return h0(this._table,r*this._tableRange+this._minPos,!0)}}var Yle=Object.freeze({__proto__:null,CategoryScale:s8,LinearScale:o8,LogarithmicScale:Ple,RadialLinearScale:qle,TimeScale:W5,TimeSeriesScale:Gle});const Xle=[eoe,Mae,kle,Yle],l8="label";function tP(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Jle(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function c8(t,e){t.labels=e}function u8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l8;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function Qle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l8;const n={labels:[],datasets:[]};return c8(n,t.labels),u8(n,t.datasets,e),n}function Zle(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=B.useRef(null),p=B.useRef(null),y=()=>{f.current&&(p.current=new mh(f.current,{type:o,data:Qle(a,s),options:l&&{...l},plugins:c}),tP(e,p.current))},b=()=>{tP(e,null),p.current&&(p.current.destroy(),p.current=null)};return B.useEffect(()=>{!i&&p.current&&l&&Jle(p.current,l)},[i,l]),B.useEffect(()=>{!i&&p.current&&c8(p.current.config.data,a.labels)},[i,a.labels]),B.useEffect(()=>{!i&&p.current&&a.datasets&&u8(p.current.config.data,a.datasets,s)},[i,a.datasets]),B.useEffect(()=>{p.current&&(i?(b(),setTimeout(y)):p.current.update(d))},[i,l,a.labels,a.datasets,d]),B.useEffect(()=>{p.current&&(b(),setTimeout(y))},[o]),B.useEffect(()=>(y(),()=>b()),[]),Ze.createElement("canvas",{ref:f,role:"img",height:n,width:r,...h},u)}const ece=B.forwardRef(Zle);function tce(t,e){return mh.register(e),B.forwardRef((n,r)=>Ze.createElement(ece,{...n,ref:r,type:t}))}const nce=tce("line",OD);mh.register(ym,KD,o8,n8,s8,i8,t8);const nP=({xData:t,yData:e,xLabel:n,yLabel:r,title:i,trendline:s})=>{const o=t.map((d,h)=>({x:d,y:e[h]})),a=d=>{const{type:h,equation:f}=s,p=f.match(/-?\d+(\.\d+)?/g)?.map(Number);if(!p)return 0;const[y,b=0,v=2]=p;switch(h){case"linear":return y*d+b;case"proportional":return y*d;case"inverse":return d!==0?y/d:0;case"polynomial":return y*Math.pow(d,v)+b;default:return 0}},l=t.map(d=>({x:d,y:a(d)})),c={datasets:[{label:i,data:o,borderColor:"rgba(0, 123, 255, 0.6)",backgroundColor:"rgba(0, 123, 255, 0.3)",pointRadius:5,showLine:!1},{label:`Trendline: ${s.equation}, R² = ${s.r2.toFixed(3)}`,data:l,borderColor:"rgba(40, 167, 69, 0.8)",backgroundColor:"rgba(40, 167, 69, 0.3)",pointRadius:0,fill:!1,tension:.3,parsing:!1}]},u={responsive:!0,scales:{x:{type:"linear",title:{display:!0,text:n}},y:{type:"linear",title:{display:!0,text:r}}},plugins:{legend:{position:"top"},title:{display:!0,text:i}}};return m.jsx(nce,{data:c,options:u})},f0={NONE:"none",LINEAR:"linear",PROPORTIONAL:"proportional",INVERSE:"inverse",POLYNOMIAL:"polynomial"};mh.register(...Xle);function rce(t,e,n){const r=t.length;if(r<2)return{points:[],label:""};let i=[],s="";switch(n){case f0.LINEAR:{const o=t.reduce((y,b)=>y+b)/r,a=e.reduce((y,b)=>y+b)/r,l=t.reduce((y,b,v)=>y+(b-o)*(e[v]-a),0),c=t.reduce((y,b)=>y+Math.pow(b-o,2),0),u=l/c,d=a-u*o;i=t.map(y=>({x:y,y:u*y+d}));const h=e.reduce((y,b)=>y+Math.pow(b-a,2),0),p=1-e.reduce((y,b,v)=>y+Math.pow(b-(u*t[v]+d),2),0)/h;s=`y = ${u.toFixed(2)}x + ${d.toFixed(2)} (R² = ${p.toFixed(2)})`;break}case f0.PROPORTIONAL:{const o=e.reduce((a,l,c)=>a+l/t[c],0)/r;i=t.map(a=>({x:a,y:o*a})),s=`y = ${o.toFixed(2)}x`;break}case f0.INVERSE:{const o=e.reduce((a,l,c)=>a+l*t[c],0)/r;i=t.map(a=>({x:a,y:o/a})),s=`y = ${o.toFixed(2)}/x`;break}case f0.POLYNOMIAL:{const o=e.reduce((a,l,c)=>a+l/(t[c]**2||1),0)/r;i=t.map(a=>({x:a,y:o*a*a})),s=`y = ${o.toFixed(2)}x²`;break}}return{points:i,label:s}}async function ice({title:t,xAxis:e,yAxis:n,graphType:r,trendType:i,data:s}){const o=document.createElement("canvas");o.width=600,o.height=400;const a=o.getContext("2d");if(!a)return"";const l=rce(s.x,s.y,i),c=new mh(a,{type:r==="bar"?"bar":"scatter",data:{labels:s.x,datasets:[{label:"Data",data:s.x.map((d,h)=>({x:d,y:s.y[h]})),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",pointRadius:4,parsing:!1},...l.points.length?[{label:l.label,data:l.points,type:"line",borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,fill:!1,pointRadius:0}]:[]]},options:{responsive:!1,plugins:{title:{display:!0,text:t},legend:{display:!0}},scales:{x:{title:{display:!0,text:e}},y:{title:{display:!0,text:n}}}}});await new Promise(d=>setTimeout(d,500));const u=o.toDataURL("image/png");return c.destroy(),u}function sce(t,e,n){if(t.length!==e.length||t.length<2)return{equation:"",r2:0,type:n};const r=d=>d.reduce((h,f)=>h+f,0)/d.length,i=r(t),s=r(e);let o=[],a="";if(n==="linear"){const d=t.reduce((f,p,y)=>f+(p-i)*(e[y]-s),0)/t.reduce((f,p)=>f+Math.pow(p-i,2),0),h=s-d*i;o=t.map(f=>d*f+h),a=`y = ${d.toFixed(2)}x + ${h.toFixed(2)}`}else if(n==="proportional"){const d=t.reduce((h,f,p)=>h+f*e[p],0)/t.reduce((h,f)=>h+f*f,0);o=t.map(h=>d*h),a=`y = ${d.toFixed(2)}x`}else if(n==="inverse"){const d=t.map(y=>1/y),h=r(d),f=d.reduce((y,b,v)=>y+(b-h)*(e[v]-s),0)/d.reduce((y,b)=>y+Math.pow(b-h,2),0),p=s-f*h;o=d.map(y=>f*y+p),a=`y = ${f.toFixed(2)}/x + ${p.toFixed(2)}`}else if(n==="polynomial"){const d=t,h=t.map(z=>z*z),f=t.length,p=d.reduce((z,H)=>z+H,0),y=h.reduce((z,H)=>z+H,0),b=d.reduce((z,H)=>z+H**3,0),v=d.reduce((z,H)=>z+H**4,0),x=e.reduce((z,H)=>z+H,0),S=d.reduce((z,H,j)=>z+H*e[j],0),_=h.reduce((z,H,j)=>z+H*e[j],0),A=f*(y*v-b*b)-p*(p*v-y*b)+y*(p*b-y*y),T=(x*(y*v-b*b)-p*(S*v-b*_)+y*(S*b-y*_))/A,P=(f*(S*v-b*_)-x*(p*v-y*b)+y*(p*_-S*y))/A,E=(f*(y*_-S*b)-p*(p*_-S*y)+x*(p*b-y*y))/A;o=t.map(z=>T+P*z+E*z*z),a=`y = ${E.toFixed(2)}x² + ${P.toFixed(2)}x + ${T.toFixed(2)}`}const l=e.reduce((d,h,f)=>d+Math.pow(h-o[f],2),0),c=e.reduce((d,h)=>d+Math.pow(h-s,2),0),u=c?1-l/c:0;return{equation:a,r2:parseFloat(u.toFixed(3)),type:n}}const oce=({editor:t,onClose:e})=>{const[n,r]=B.useState([]),[i,s]=B.useState(""),[o,a]=B.useState(""),[l,c]=B.useState(""),[u,d]=B.useState("scatter"),[h,f]=B.useState("none"),[p,y]=B.useState({x:[],y:[]}),[b,v]=B.useState({equation:"",r2:0,type:"none"});B.useEffect(()=>{const S=t.getHTML(),T=new DOMParser().parseFromString(S,"text/html").querySelector("table");if(!T)return;const P=T.querySelector("tr"),E=Array.from(P?.querySelectorAll("th, td")||[]).map(I=>I.textContent?.trim()||"");r(E),E.length>=2&&(s(E[0]),a(E[E.length-1]));const z=Array.from(T.querySelectorAll("tr")).slice(1),H=[],j=[];z.forEach(I=>{const q=I.querySelectorAll("td"),F=q[0]?.textContent?.trim(),ne=q[q.length-1]?.textContent?.trim();if(F&&ne){const Y=parseFloat(F),ee=parseFloat(ne);!isNaN(Y)&&!isNaN(ee)&&(H.push(Y),j.push(ee))}}),y({x:H,y:j})},[t]),B.useEffect(()=>{if(p.x.length&&p.y.length&&h!=="none"){const S=sce(p.x,p.y,h);v(S)}else v({equation:"",r2:0,type:"none"})},[p,h]);const x=async()=>{if(p.x.length&&p.y.length){document.createElement("canvas");const S=await ice({title:l,xAxis:i,yAxis:o,graphType:u,trendType:h,data:{x:p.x,y:p.y}});t.chain().focus().setImage({src:S}).run(),e()}};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-40",onClick:e}),m.jsxs("div",{className:"fixed z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-6 w-[90%] max-w-xl left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[m.jsx("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:"📈 Create Graph from Table"}),m.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Graph Title:"}),m.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),className:"w-full mb-4 border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.jsxs("div",{className:"flex gap-4 mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"X Axis:"}),m.jsx("select",{value:i,onChange:S=>s(S.target.value),className:"w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.map((S,_)=>m.jsx("option",{value:S,children:S},_))})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Y Axis:"}),m.jsx("select",{value:o,onChange:S=>a(S.target.value),className:"w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:n.map((S,_)=>m.jsx("option",{value:S,children:S},_))})]})]}),m.jsxs("div",{className:"flex gap-4 mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Graph Type:"}),m.jsxs("select",{value:u,onChange:S=>d(S.target.value),className:"w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"scatter",children:"Scatter"}),m.jsx("option",{value:"bar",children:"Bar"})]})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Trendline:"}),m.jsxs("select",{value:h,onChange:S=>f(S.target.value),disabled:u==="bar",className:`w-full border px-3 py-2 text-sm rounded focus:outline-none focus:ring-2 ${u==="bar"?"bg-gray-200 cursor-not-allowed":"focus:ring-blue-500"}`,children:[m.jsx("option",{value:"none",children:"None"}),m.jsx("option",{value:"linear",children:"Linear (y = mx + c)"}),m.jsx("option",{value:"proportional",children:"Direct (y = mx)"}),m.jsx("option",{value:"inverse",children:"Inverse (y = m/x)"}),m.jsx("option",{value:"polynomial",children:"Polynomial (y = mxⁿ + c)"})]})]})]}),m.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Preview your graph and equation before inserting."}),m.jsxs("div",{className:"bg-gray-100 border rounded p-3 mb-4",children:[u==="scatter"&&m.jsx(nP,{xData:p.x,yData:p.y,title:l,xLabel:i,yLabel:o,type:u,trendline:b}),u==="bar"&&m.jsx(nP,{xData:p.x,yData:p.y,title:l,xLabel:i,yLabel:o,type:u,trendline:{type:"none",equation:"",r2:0}})]}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:e,className:"text-sm text-gray-600 hover:text-gray-900",children:"Cancel"}),m.jsx("button",{onClick:x,className:"bg-blue-600 text-white px-4 py-2 text-sm rounded hover:bg-blue-700 transition",children:"Insert Graph"})]})]})]})};function ace({studentId:t,experiment:e,sessionCode:n,strandhoot:r,currentStrand:i,content:s,evaluatedLevel:o,isTyping:a=!1,onLoad:l}){const[c,u]=B.useState("idle"),d=`strand${i}`,h=`${d}_level`,f=p=>/^[0-9a-fA-F-]{36}$/.test(p);return B.useEffect(()=>{if(!t||!e||!n)return;if(!f(t)){console.warn("❌ Invalid UUID for studentId in fetch:",t);return}(async()=>{const{data:y,error:b}=await gs.from("responses").select(`${d}`).eq("student_id",t).eq("experiment",e).eq("session_code",n).maybeSingle();b?(console.error("❌ Error loading saved content:",b),u("error")):y&&y[d]&&l?.(y[d])})()},[t,e,n,r,i]),B.useEffect(()=>{if(!t||!e||!n||!a)return;if(!f(t)){console.warn("❌ Invalid UUID for studentId in typing:",t);return}let p=Date.now();gs.from("responses").update({is_typing:!0}).eq("student_id",t).eq("experiment",e).eq("session_code",n).select("*").then(({data:b,error:v})=>{v?console.error("❌ Error setting is_typing true:",v.message):console.log("✍️ is_typing = true for",t)});const y=setInterval(()=>{Date.now()-p>=3e3&&(gs.from("responses").update({is_typing:!1}).eq("student_id",t).eq("experiment",e).eq("session_code",n).select("*").then(({data:x,error:S})=>{S?console.error("❌ Error resetting is_typing:",S.message):console.log("🌀 is_typing reset to false for",t)}),clearInterval(y))},1e3);return()=>clearInterval(y)},[a,t,e,n]),B.useEffect(()=>{if(!t||!e||!n)return;if(!f(t)){console.warn("❌ Invalid UUID for studentId in upsert:",t);return}const p=setTimeout(async()=>{u("saving");const{error:y}=await gs.from("responses").upsert({student_id:t,experiment:e,session_code:n,[d]:s,[h]:o??null,updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment"});y?(console.error("💥 Error saving to Supabase:",y.message),u("error")):u("success")},800);return()=>clearTimeout(p)},[s,t,e,n,r,i,o]),{syncStatus:c}}const rP=({content:t,onChange:e,currentStudentId:n,currentStrand:r,evaluatedLevel:i,currentExperimentChoice:s,sessionCode:o=null})=>{const[a,l]=B.useState(!1),[c,u]=B.useState(!1),[d,h]=B.useState(2),[f,p]=B.useState(2);B.useRef(null);const{strandProgress:y}=lm(),b=_te({extensions:[Tne,Pne.configure({allowBase64:!0}),Lre.configure({resizable:!0}),Ore,Ire,Rre],content:t,onUpdate:({editor:_})=>{const A=_.getHTML();e(A)}}),{syncStatus:v}=ace({studentId:n,experiment:s,sessionCode:o,strandhoot:"crit-a-tir",currentStrand:r,content:t,evaluatedLevel:y[r-1],isTyping:b?.isFocused||!1,onLoad:_=>{b&&b.isEmpty&&b.commands.setContent(_)}}),x=_=>{const A=new FileReader;A.onload=()=>{const T=A.result;b?.chain().focus().insertContent("<p></p>").setImage({src:T}).run()},A.readAsDataURL(_)},S=()=>{b?.chain().focus().insertTable({rows:d,cols:f,withHeaderRow:!0}).run(),l(!1)};return b?m.jsxs("div",{className:"editor-wrapper relative border rounded-md overflow-visible bg-white",children:[m.jsxs("div",{className:"editor-toolbar bg-gray-100 px-4 py-2 border-b border-gray-300 flex flex-wrap gap-2 items-center text-sm",children:[m.jsx("button",{onClick:()=>b.chain().focus().toggleBold().run(),children:"B"}),m.jsx("button",{onClick:()=>b.chain().focus().toggleItalic().run(),children:"I"}),m.jsx("button",{onClick:()=>b.chain().focus().toggleBulletList().run(),children:"• List"}),m.jsx("button",{onClick:()=>b.chain().focus().toggleHeading({level:2}).run(),children:"H2"}),m.jsx("button",{onClick:()=>l(!0),children:"➕ Table"}),m.jsx("button",{onClick:()=>b.chain().focus().addColumnBefore().run(),children:"↤ Col"}),m.jsx("button",{onClick:()=>b.chain().focus().addColumnAfter().run(),children:"Col ↦"}),m.jsx("button",{onClick:()=>b.chain().focus().addRowBefore().run(),children:"↑ Row"}),m.jsx("button",{onClick:()=>b.chain().focus().addRowAfter().run(),children:"↓ Row"}),m.jsx("button",{onClick:()=>b.chain().focus().deleteColumn().run(),children:"❌ Col"}),m.jsx("button",{onClick:()=>b.chain().focus().deleteRow().run(),children:"❌ Row"}),m.jsx("button",{onClick:()=>b.chain().focus().deleteTable().run(),children:"🗑️ Table"}),m.jsxs("label",{className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["📷 Upload Image",m.jsx("input",{type:"file",accept:"image/*",onChange:_=>{_.target.files?.[0]&&x(_.target.files[0])},className:"hidden"})]}),m.jsx("button",{onClick:()=>u(!0),children:"📈 Graph"}),m.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[v==="saving"&&"🔄 Saving...",v==="success"&&m.jsx("span",{className:"text-green-600",children:"✅ Synced"}),v==="error"&&m.jsx("span",{className:"text-red-600",children:"❌ Sync Failed"})]}),b?.isFocused&&m.jsx("span",{className:"ml-2 text-purple-500 text-xs animate-pulse",children:"✍️ Typing..."})]}),a&&m.jsxs("div",{className:"popup bg-white border border-gray-300 rounded shadow-md p-4 absolute z-10 left-4 top-20 w-64",children:[m.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Insert Table"}),m.jsxs("label",{className:"block mb-2 text-sm",children:["Rows:",m.jsx("input",{type:"number",min:1,value:d,onChange:_=>h(Number(_.target.value)),className:"ml-2 border px-2 py-1 text-sm w-16"})]}),m.jsxs("label",{className:"block mb-4 text-sm",children:["Columns:",m.jsx("input",{type:"number",min:1,value:f,onChange:_=>p(Number(_.target.value)),className:"ml-2 border px-2 py-1 text-sm w-16"})]}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{onClick:S,className:"bg-purple-500 text-white text-sm px-3 py-1 rounded",children:"Insert"}),m.jsx("button",{onClick:()=>l(!1),className:"text-sm text-gray-500",children:"Cancel"})]})]}),c&&Sy.createPortal(m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:()=>u(!1)}),m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-auto",children:m.jsx(oce,{editor:b,onClose:()=>u(!1),onInsert:_=>{b.chain().focus().insertContent("<p></p>").setImage({src:_}).run(),u(!1)}})})]}),document.body),m.jsx(mte,{editor:b,className:"editor-content p-4"})]}):null};async function lce(t,e){const n=t.toLowerCase();return n.includes("ray")||n.includes("light")||n.includes("beam")?{isGraph:!0,type:"ray-diagram",axesLabeled:!0,hasTitle:!0}:n.includes("scatter")?{isGraph:!0,type:"scatter",axesLabeled:!0,hasTitle:!0}:n.includes("bar")||n.includes("graph")?{isGraph:!0,type:"bar",axesLabeled:!0,hasTitle:!1}:{isGraph:!1,type:"unknown",axesLabeled:!1,hasTitle:!1}}function cce(t){const e=[];let n=0;const r=t.querySelector("table");if(!r)return e.push("You might want to include a data table."),{score:n,suggestions:e};const i=r.querySelectorAll("tr"),s=Array.from(r.querySelectorAll("th")).map(c=>c.textContent?.toLowerCase()||""),o=s.some(c=>c.includes("average")),a=s.some(c=>c.includes("trial")),l=s.some(c=>/\(.*\)/.test(c));return i.length<3?e.push("Try adding at least 3 rows of data."):n+=8.5,o?n+=5:e.push("Consider adding a column for averages."),a?n+=5:e.push("Try including multiple trials."),l?n+=6.5:e.push("Include units in your table headers."),{score:n,suggestions:e}}async function d8(t,e,n){const r=t.toLowerCase(),s={"critical-angle":{strand1:{keywords:[{label:"Snell's Law",level:4,words:["snell","snells law","n1 sin θ1 = n2 sin θ2"]},{label:"Critical Angle",level:6,words:["critical angle","θc","critical incident angle"]},{label:"Mathematical Formula",level:8,words:["sin θc = n2/n1","sine ratio","mathematical relationship"]}],concepts:[{label:"Refraction Basics",level:3,words:["refraction","bending","light ray"]},{label:"Refractive Index",level:5,words:["refractive index","optical density","n value"]},{label:"TIR Theory",level:7,words:["total internal reflection","TIR","complete reflection"]}]},strand2:{keywords:[{label:"Incident Ray",level:3,words:["incident ray","incoming light","incident angle"]},{label:"Interface Behavior",level:5,words:["interface","boundary","medium boundary"]},{label:"Angle Relationship",level:7,words:["greater than critical","exceeds critical angle","θi > θc"]}],concepts:[{label:"Medium Properties",level:4,words:["denser medium","rarer medium","optical density"]},{label:"TIR Conditions",level:6,words:["conditions for TIR","when TIR occurs","requirements"]},{label:"Physical Explanation",level:8,words:["cannot refract","no transmitted ray","energy conservation"]}]},strand3:{keywords:[{label:"Optical Devices",level:4,words:["prism","periscope","binoculars"]},{label:"Advanced Applications",level:6,words:["diamond cutting","optical instruments","endoscope"]},{label:"Modern Technology",level:8,words:["laser surgery","medical imaging","precision optics"]}],concepts:[{label:"Practical Uses",level:3,words:["everyday applications","common uses","practical"]},{label:"Scientific Applications",level:5,words:["scientific instruments","research tools","measurement"]},{label:"Innovation Impact",level:7,words:["technological advancement","breakthrough","innovation"]}]},strand4:{keywords:[{label:"Calculation",level:5,words:["calculate","compute","numerical value"]},{label:"Problem Setup",level:6,words:["given values","unknown variable","solve for"]},{label:"Mathematical Analysis",level:8,words:["derive","proof","mathematical reasoning"]}],concepts:[{label:"Data Analysis",level:4,words:["analyze data","interpret results","conclusion"]},{label:"Problem Solving",level:6,words:["systematic approach","step by step","methodology"]},{label:"Critical Thinking",level:8,words:["evaluate","assess","critical analysis"]}]}},"fiber-optics":{strand1:{keywords:[{label:"Optical Fiber",level:4,words:["optical fiber","fiber optic","light guide"]},{label:"Core-Cladding",level:6,words:["core","cladding","refractive index difference"]},{label:"Light Propagation",level:8,words:["guided wave","mode propagation","wave mechanics"]}],concepts:[{label:"Basic Structure",level:3,words:["fiber structure","cylindrical","transparent"]},{label:"TIR in Fibers",level:5,words:["total internal reflection","light trapping","confinement"]},{label:"Wave Theory",level:7,words:["electromagnetic wave","wave optics","propagation theory"]}]},strand2:{keywords:[{label:"Fiber Types",level:4,words:["step index","graded index","single mode","multimode"]},{label:"Technical Specs",level:6,words:["numerical aperture","acceptance angle","bandwidth"]},{label:"Advanced Tech",level:8,words:["dispersion","attenuation","coupling efficiency"]}],concepts:[{label:"Signal Transmission",level:3,words:["data transmission","signal","information"]},{label:"Engineering Design",level:5,words:["design principles","optimization","performance"]},{label:"System Integration",level:7,words:["network design","system architecture","integration"]}]},strand3:{keywords:[{label:"Communication",level:4,words:["telecommunications","internet","data communication"]},{label:"Medical Uses",level:6,words:["endoscopy","medical imaging","surgical applications"]},{label:"Emerging Tech",level:8,words:["quantum communication","sensor networks","smart systems"]}],concepts:[{label:"Societal Impact",level:3,words:["society","impact","change"]},{label:"Economic Benefits",level:5,words:["cost effective","efficiency","economic"]},{label:"Future Potential",level:7,words:["future applications","emerging trends","innovation"]}]},strand4:{keywords:[{label:"Design Process",level:5,words:["design","development","engineering process"]},{label:"Innovation",level:6,words:["innovative","novel approach","creative solution"]},{label:"Research",level:8,words:["research","investigation","scientific method"]}],concepts:[{label:"Problem Identification",level:4,words:["identify problem","need","requirement"]},{label:"Solution Development",level:6,words:["develop solution","prototype","testing"]},{label:"Evaluation",level:8,words:["evaluate","assess performance","optimization"]}]}}}[e]?.[n];if(!s)return{matchedKeywords:[],matchedConcepts:[],level:0,suggestions:["No rubric data found for this strand."]};let o=0,a=0;const l=[],c=[],u=[];s.keywords.forEach(x=>{x.words.some(S=>r.includes(S.toLowerCase()))&&(l.push({label:x.label,level:x.level}),o=Math.max(o,x.level))}),s.concepts.forEach(x=>{x.words.some(S=>r.includes(S.toLowerCase()))&&(c.push({label:x.label,level:x.level}),a=Math.max(a,x.level))});let d=0;try{const x=new DOMParser().parseFromString(t,"text/html"),{score:S,suggestions:_}=cce(x);d=S,u.push(..._)}catch{u.push("Content parsing had issues.")}let h=0;const f=t.match(/<img[^>]*src="([^"]+)"[^>]*>/);if(f){const x=f[1];try{const S=await lce(x,e);S.isGraph?(S.axesLabeled||u.push("Add axis labels to your graph."),S.hasTitle||u.push("Add a title to your graph."),h=S.type==="scatter"?8:6):u.push("Image found, but not recognized as a graph.")}catch{u.push("Image analysis failed.")}}let p=0;const y=t.replace(/<[^>]*>/g,"").trim().split(/\s+/).length;y>150?p=8:y>100?p=6:y>50?p=4:y>20&&(p=2),o<6&&u.push(`Include more ${e==="critical-angle"?"TIR":"fiber optic"} terminology.`),a<6&&u.push("Explain the underlying physics concepts more clearly."),p<6&&u.push("Expand your response with more detailed explanations.");const b={strand1:["Define key terms clearly","Include mathematical relationships","Explain the physics principles"],strand2:["Describe the phenomenon step by step","Explain what happens at the interface","Connect to real observations"],strand3:["Give specific examples of applications","Explain how TIR is used practically","Discuss the benefits and limitations"],strand4:["Show calculations with steps","Analyze given data systematically","Draw logical conclusions"]};u.length<3&&u.push(...b[n]||[]);const v=Math.round(o*.3+a*.3+p*.2+d*.1+h*.1);return{matchedKeywords:l,matchedConcepts:c,level:Math.min(8,Math.max(0,v)),suggestions:u.slice(0,5)}}const HC={"critical-angle":{strand1:{level2:{tip:"📚 **Define** total internal reflection using simple, clear language. **State** the basic conditions when it happens.",commandTerms:["define","state","list"],guidance:"Focus on basic facts: TIR occurs when light completely reflects at a boundary. Use simple vocabulary and avoid complex explanations.",examples:["Define TIR as complete reflection of light","State that it happens at boundaries between materials"]},level4:{tip:"🔍 **Describe** the conditions for TIR clearly. **Identify** the key factors: dense to less dense medium + critical angle.",commandTerms:["describe","identify","outline"],guidance:"Explain the two main conditions clearly. Use proper scientific terms like 'refractive index' and 'critical angle'.",examples:["Describe light traveling from glass to air","Identify when incident angle exceeds critical angle"]},level6:{tip:"⚡ **Calculate** critical angles using the formula sin(θc) = n₂/n₁. **Explain** the physics behind Snell's law.",commandTerms:["calculate","explain","apply"],guidance:"Show mathematical work clearly. Connect formulas to physical principles. Explain why the formula works.",examples:["Calculate θc for glass-air interface","Explain relationship between refractive indices and critical angle"]},level8:{tip:"🧠 **Analyze** complex scenarios involving multiple factors. **Evaluate** how changing variables affects TIR behavior.",commandTerms:["analyze","evaluate","synthesize"],guidance:"Consider multiple variables simultaneously. Discuss implications and trade-offs. Connect to real applications.",examples:["Analyze effect of temperature on critical angle","Evaluate optimal refractive index differences for optical devices"]}},strand2:{level2:{tip:"👀 **Identify** when TIR happens. **State** that it occurs above the critical angle.",commandTerms:["identify","state","recognize"],guidance:"Focus on observable conditions. Keep explanations simple and direct.",examples:["Identify angles where complete reflection occurs","State the critical angle as the boundary"]},level4:{tip:"📖 **Describe** what happens at different angles. **Compare** behavior below and above critical angle.",commandTerms:["describe","compare","distinguish"],guidance:"Contrast partial reflection+refraction vs total reflection. Use clear, scientific language.",examples:["Describe refraction below critical angle","Compare light behavior at different incident angles"]},level6:{tip:"🎯 **Explain** why TIR only works in one direction. **Predict** light behavior using Snell's law.",commandTerms:["explain","predict","justify"],guidance:"Use Snell's law to show mathematical impossibility of certain solutions. Connect math to physics.",examples:["Explain why sin(θ) > 1 is impossible","Predict light paths in different scenarios"]},level8:{tip:"🔬 **Evaluate** multiple factors affecting TIR. **Analyze** the relationship between material properties and optical behavior.",commandTerms:["evaluate","analyze","assess"],guidance:"Consider wavelength dependence, temperature effects, and material properties comprehensively.",examples:["Evaluate how dispersion affects critical angles","Analyze temperature dependence of refractive index"]}},strand3:{level2:{tip:"📝 **List** common applications of TIR. **Give** examples like fiber optics and diamonds.",commandTerms:["list","give","name"],guidance:"Provide concrete, familiar examples. Keep descriptions simple and factual.",examples:["List: fiber optics, diamonds, periscopes","Name everyday items that use TIR"]},level4:{tip:"💡 **Describe** how TIR is used in specific applications. **Outline** the benefits it provides.",commandTerms:["describe","outline","summarize"],guidance:"Explain practical benefits clearly. Connect TIR properties to application advantages.",examples:["Describe how fiber optics guide light","Outline benefits of TIR in telecommunications"]},level6:{tip:"🌟 **Explain** the physics behind TIR applications. **Discuss** why TIR is ideal for these uses.",commandTerms:["explain","discuss","justify"],guidance:"Connect physical principles to practical benefits. Explain material choices and design decisions.",examples:["Explain why diamonds sparkle due to high refractive index","Discuss advantages of TIR over mirrors in fiber optics"]},level8:{tip:"⚖️ **Evaluate** multiple TIR applications. **Analyze** limitations and trade-offs in real systems.",commandTerms:["evaluate","analyze","critique"],guidance:"Consider multiple applications comprehensively. Address both advantages and limitations.",examples:["Evaluate medical endoscopy vs external imaging","Analyze future potential of TIR technology"]}},strand4:{level2:{tip:"🧮 **Calculate** using given formulas and values. **Show** your mathematical work clearly.",commandTerms:["calculate","show","compute"],guidance:"Use provided formulas correctly. Include units and show step-by-step calculations.",examples:["Calculate critical angle with given refractive indices","Show work for simple TIR problems"]},level4:{tip:"🔢 **Solve** TIR problems using appropriate equations. **Determine** unknown variables from given data.",commandTerms:["solve","determine","find"],guidance:"Choose correct equations for different scenarios. Organize solution steps logically.",examples:["Solve for refractive index from critical angle","Determine if TIR will occur in given scenario"]},level6:{tip:"📊 **Analyze** complex TIR scenarios with multiple variables. **Investigate** relationships between different factors.",commandTerms:["analyze","investigate","examine"],guidance:"Handle multi-step problems systematically. Consider how changing one variable affects others.",examples:["Analyze light behavior in layered media","Investigate optimal fiber design parameters"]},level8:{tip:"🔬 **Design** experiments to test TIR principles. **Evaluate** measurement accuracy and sources of error.",commandTerms:["design","evaluate","critique"],guidance:"Consider experimental design holistically. Address practical limitations and improvement strategies.",examples:["Design critical angle measurement experiment","Evaluate experimental uncertainties and improvements"]}}},"fiber-optics":{strand1:{level2:{tip:"🔍 **Identify** the main parts of optical fibers: core and cladding. **State** their basic functions.",commandTerms:["identify","state","name"],guidance:"Focus on basic components and their simple functions. Keep explanations straightforward.",examples:["Identify core as light-carrying part","State that cladding provides confinement"]},level4:{tip:"📖 **Describe** how light travels through fiber cores. **Explain** the role of refractive index differences.",commandTerms:["describe","explain","outline"],guidance:"Connect TIR principles to fiber operation. Use appropriate scientific terminology.",examples:["Describe light bouncing along fiber core","Explain core-cladding index difference"]},level6:{tip:"⚡ **Calculate** numerical aperture and acceptance angles. **Analyze** single-mode vs multimode fiber differences.",commandTerms:["calculate","analyze","compare"],guidance:"Use fiber optic equations correctly. Compare different fiber types systematically.",examples:["Calculate NA from core/cladding indices","Analyze bandwidth limitations of multimode fibers"]},level8:{tip:"🎯 **Evaluate** fiber design trade-offs. **Synthesize** multiple factors affecting fiber performance.",commandTerms:["evaluate","synthesize","optimize"],guidance:"Consider multiple design parameters simultaneously. Address complex trade-offs in system design.",examples:["Evaluate step-index vs graded-index performance","Synthesize optimal fiber design for specific applications"]}},strand2:{level2:{tip:"🔌 **List** components of fiber optic systems: light sources, fibers, detectors. **Name** their functions.",commandTerms:["list","name","identify"],guidance:"Focus on main system components. Keep descriptions simple and functional.",examples:["List: LED, fiber, photodetector","Name function of each component"]},level4:{tip:"⚙️ **Describe** how fiber optic communication systems work. **Outline** the signal transmission process.",commandTerms:["describe","outline","trace"],guidance:"Follow signal path through system. Explain electrical-to-optical-to-electrical conversion.",examples:["Describe signal conversion process","Outline data transmission through fiber"]},level6:{tip:"🌐 **Explain** advanced technologies like WDM and optical amplifiers. **Discuss** how they increase system capacity.",commandTerms:["explain","discuss","analyze"],guidance:"Connect advanced technologies to system performance improvements. Use technical terminology appropriately.",examples:["Explain wavelength division multiplexing","Discuss optical amplifier benefits"]},level8:{tip:"🔬 **Evaluate** fiber system performance factors. **Assess** limitations and emerging solutions.",commandTerms:["evaluate","assess","critique"],guidance:"Consider multiple performance metrics. Address current limitations and future developments.",examples:["Evaluate factors limiting fiber bandwidth","Assess potential of new fiber technologies"]}},strand3:{level2:{tip:"📱 **List** where fiber optics are used: internet, medical, sensing. **Give** specific examples.",commandTerms:["list","give","mention"],guidance:"Provide concrete, recognizable applications. Focus on familiar examples.",examples:["List internet, phone, medical uses","Give examples like endoscopes, internet cables"]},level4:{tip:"🌍 **Describe** how fiber optics changed telecommunications. **Outline** benefits over traditional methods.",commandTerms:["describe","outline","compare"],guidance:"Explain transformation of communications. Compare advantages over older technologies.",examples:["Describe internet revolution","Outline advantages over copper cables"]},level6:{tip:"💡 **Explain** why fiber properties make them ideal for specific applications. **Justify** material and design choices.",commandTerms:["explain","justify","relate"],guidance:"Connect physical properties to application requirements. Explain material selection rationale.",examples:["Explain why fibers are ideal for long-distance communication","Justify use in medical applications"]},level8:{tip:"🌟 **Analyze** societal impact of fiber optic technology. **Evaluate** future implications and emerging applications.",commandTerms:["analyze","evaluate","predict"],guidance:"Consider broad societal effects. Discuss both positive impacts and challenges.",examples:["Analyze global digital divide issues","Evaluate potential of emerging fiber applications"]}},strand4:{level2:{tip:"🛠️ **Identify** basic design factors in fiber systems. **State** simple requirements.",commandTerms:["identify","state","recognize"],guidance:"Focus on fundamental design considerations. Keep requirements simple and clear.",examples:["Identify need for protection","State basic performance requirements"]},level4:{tip:"📋 **Describe** key design considerations for fiber installations. **Outline** basic requirements.",commandTerms:["describe","outline","specify"],guidance:"Explain practical installation factors. Address basic engineering requirements.",examples:["Describe bend radius requirements","Outline environmental protection needs"]},level6:{tip:"⚖️ **Explain** trade-offs between performance, cost, and complexity. **Analyze** design optimization strategies.",commandTerms:["explain","analyze","optimize"],guidance:"Address multiple competing requirements. Explain optimization approaches.",examples:["Explain cost vs performance trade-offs","Analyze installation complexity factors"]},level8:{tip:"🚀 **Evaluate** innovative fiber designs and emerging technologies. **Synthesize** solutions for complex challenges.",commandTerms:["evaluate","synthesize","innovate"],guidance:"Consider cutting-edge developments. Address complex system-level challenges.",examples:["Evaluate new fiber designs","Synthesize solutions for next-generation networks"]}}}},iP=()=>{const[t,e]=B.useState(30),[n,r]=B.useState(1.5),[i,s]=B.useState(1),[o,a]=B.useState(550),[l,c]=B.useState(!0),[u,d]=B.useState(1),[h,f]=B.useState(!1),p=B.useRef(null),y=B.useRef(0),b=800,v=500,x=v/2,S=Math.asin(i/n)*(180/Math.PI),_=t>S,A=_?0:Math.asin(n/i*Math.sin(t*Math.PI/180))*(180/Math.PI);B.useEffect(()=>{T()},[t,n,i,o,l]);const T=()=>{const q=p.current;if(!q)return;const F=q.getContext("2d");if(!F)return;F.clearRect(0,0,b,v),F.fillStyle="rgba(100, 150, 255, 0.3)",F.fillRect(0,x,b,v-x),F.fillStyle="rgba(255, 255, 100, 0.2)",F.fillRect(0,0,b,x),F.strokeStyle="#000",F.lineWidth=3,F.setLineDash([]),F.beginPath(),F.moveTo(0,x),F.lineTo(b,x),F.stroke(),F.strokeStyle="#666",F.lineWidth=1,F.setLineDash([5,5]),F.beginPath(),F.moveTo(b/2,0),F.lineTo(b/2,v),F.stroke(),F.setLineDash([]);const ne=b/2,Y=150,ee=ne-Y*Math.sin(t*Math.PI/180),X=x+Y*Math.cos(t*Math.PI/180);F.strokeStyle=P(o),F.lineWidth=3,F.beginPath(),F.moveTo(ee,X),F.lineTo(ne,x),F.stroke(),E(F,ee,X,ne,x,P(o));const ie=ne+Y*Math.sin(t*Math.PI/180),V=x+Y*Math.cos(t*Math.PI/180);if(F.strokeStyle=P(o),F.lineWidth=2,F.beginPath(),F.moveTo(ne,x),F.lineTo(ie,V),F.stroke(),E(F,ne,x,ie,V,P(o)),!_){const K=ne+Y*Math.sin(A*Math.PI/180),M=x-Y*Math.cos(A*Math.PI/180);F.strokeStyle=P(o),F.lineWidth=1.5,F.globalAlpha=.7,F.beginPath(),F.moveTo(ne,x),F.lineTo(K,M),F.stroke(),F.globalAlpha=1,E(F,ne,x,K,M,P(o))}if(l&&!isNaN(S)){const K=ne-Y*Math.sin(S*Math.PI/180),M=x+Y*Math.cos(S*Math.PI/180);F.strokeStyle="#ff6b6b",F.lineWidth=2,F.setLineDash([10,5]),F.beginPath(),F.moveTo(K,M),F.lineTo(ne,x),F.stroke(),F.setLineDash([])}F.fillStyle="#000",F.font="14px Arial",F.fillText(`Medium 1 (n₁ = ${n})`,20,x+30),F.fillText(`Medium 2 (n₂ = ${i})`,20,30),F.fillText(`Incident Angle: ${t.toFixed(1)}°`,20,v-80),F.fillText(`Critical Angle: ${S.toFixed(1)}°`,20,v-60),_?(F.fillStyle="#ff0000",F.font="bold 16px Arial",F.fillText("TOTAL INTERNAL REFLECTION!",20,v-40)):F.fillText(`Refracted Angle: ${A.toFixed(1)}°`,20,v-40),z(F,ne,x,t,"incident"),_||z(F,ne,x,A,"refracted")},P=q=>q<380?"#8b00ff":q<450?"#4b0082":q<495?"#0000ff":q<570?"#00ff00":q<590?"#ffff00":q<620?"#ffa500":(q<750,"#ff0000"),E=(q,F,ne,Y,ee,X)=>{const V=Math.atan2(ee-ne,Y-F);q.strokeStyle=X,q.fillStyle=X,q.lineWidth=2,q.beginPath(),q.moveTo(Y,ee),q.lineTo(Y-10*Math.cos(V-Math.PI/6),ee-10*Math.sin(V-Math.PI/6)),q.moveTo(Y,ee),q.lineTo(Y-10*Math.cos(V+Math.PI/6),ee-10*Math.sin(V+Math.PI/6)),q.stroke()},z=(q,F,ne,Y,ee)=>{const ie=ee==="incident"?Math.PI/2:-Math.PI/2,V=ee==="incident"?Math.PI/2-Y*Math.PI/180:-Math.PI/2+Y*Math.PI/180;q.strokeStyle=ee==="incident"?"#333":"#666",q.lineWidth=1,q.beginPath(),q.arc(F,ne,40,Math.min(ie,V),Math.max(ie,V)),q.stroke();const K=(ie+V)/2,M=F+(40+15)*Math.cos(K),U=ne+(40+15)*Math.sin(K);q.fillStyle="#333",q.font="12px Arial",q.fillText(`${Y.toFixed(0)}°`,M-10,U+5)},H=()=>{f(!0);let q=0;const F=()=>{q+=u,e(q%90),h&&(y.current=requestAnimationFrame(F))};F()},j=()=>{f(!1),y.current&&cancelAnimationFrame(y.current)},I=()=>{j(),e(30),r(1.5),s(1),a(550)};return m.jsxs("div",{className:"tir-simulation p-4 bg-gray-100 rounded-lg",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4 text-purple-800",children:"🌈 Total Internal Reflection Simulator"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("canvas",{ref:p,width:b,height:v,className:"border border-gray-300 bg-white rounded"}),m.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[m.jsx("button",{onClick:H,disabled:h,className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400",children:"▶ Animate"}),m.jsx("button",{onClick:j,disabled:!h,className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-400",children:"⏸ Stop"}),m.jsx("button",{onClick:I,className:"px-3 py-1 bg-purple-500 text-white rounded hover:bg-purple-600",children:"🔄 Reset"}),m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:l,onChange:q=>c(q.target.checked),className:"mr-2"}),"Show Critical Angle"]})]})]}),m.jsxs("div",{className:"w-80 bg-white p-4 rounded-lg shadow",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3 text-purple-700",children:"Controls"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Incident Angle: ",t.toFixed(1),"°"]}),m.jsx("input",{type:"range",min:"0",max:"89",step:"0.5",value:t,onChange:q=>e(parseFloat(q.target.value)),className:"w-full",disabled:h})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Refractive Index 1 (Dense): ",n]}),m.jsx("input",{type:"range",min:"1.0",max:"2.5",step:"0.1",value:n,onChange:q=>r(parseFloat(q.target.value)),className:"w-full"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Refractive Index 2 (Less Dense): ",i]}),m.jsx("input",{type:"range",min:"1.0",max:"1.5",step:"0.1",value:i,onChange:q=>s(parseFloat(q.target.value)),className:"w-full"})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Wavelength: ",o," nm"]}),m.jsx("input",{type:"range",min:"380",max:"750",step:"10",value:o,onChange:q=>a(parseInt(q.target.value)),className:"w-full"}),m.jsx("div",{className:"text-xs text-gray-600 mt-1",children:o<450?"Violet/Blue":o<495?"Blue":o<570?"Green":o<590?"Yellow":o<620?"Orange":"Red"})]}),h&&m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Animation Speed: ",u,"x"]}),m.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:u,onChange:q=>d(parseFloat(q.target.value)),className:"w-full"})]})]}),m.jsxs("div",{className:"mt-6 p-3 bg-purple-50 rounded",children:[m.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"📊 Current Data:"}),m.jsxs("div",{className:"text-sm space-y-1",children:[m.jsxs("div",{children:["Critical Angle: ",m.jsxs("strong",{children:[S.toFixed(2),"°"]})]}),m.jsxs("div",{children:["Incident Angle: ",m.jsxs("strong",{children:[t.toFixed(1),"°"]})]}),!_&&m.jsxs("div",{children:["Refracted Angle: ",m.jsxs("strong",{children:[A.toFixed(1),"°"]})]}),m.jsx("div",{className:`font-bold ${_?"text-red-600":"text-green-600"}`,children:_?"Total Internal Reflection":"Refraction Occurs"})]})]})]})]}),m.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg shadow",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2 text-purple-700",children:"🧠 Learning Objectives"}),m.jsxs("ul",{className:"list-disc pl-5 text-sm space-y-1",children:[m.jsx("li",{children:"Understand the relationship between incident angle and refraction"}),m.jsx("li",{children:"Calculate the critical angle using Snell's law"}),m.jsx("li",{children:"Observe when total internal reflection occurs"}),m.jsx("li",{children:"Explore how refractive indices affect light behavior"}),m.jsx("li",{children:"Apply concepts to real-world applications like fiber optics"})]}),m.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 rounded border-l-4 border-yellow-400",children:[m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Formula:"})," sin(θc) = n₂/n₁ where θc is the critical angle"]}),m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Condition:"})," Total internal reflection occurs when θᵢ greater than  θc"]})]})]})]})},yd={"critical-angle":{strand1:{level2:[{id:"ca_s1_l2_mcq1",type:"mcq",level:2,points:2,question:"What happens when light travels from a dense medium to a less dense medium?",learningPath:"critical-angle",strand:1,concept:"basic light behavior",keywords:["refraction","medium","light"],options:[{id:"a",text:"Light always reflects back",isCorrect:!1},{id:"b",text:"Light bends away from the normal",isCorrect:!0},{id:"c",text:"Light travels in a straight line",isCorrect:!1},{id:"d",text:"Light disappears",isCorrect:!1}],explanation:"When light travels from a dense medium (like glass) to a less dense medium (like air), it bends away from the normal according to Snell's law."},{id:"ca_s1_l2_fill1",type:"fill-blank",level:2,points:2,question:"Fill in the blanks about light behavior:",learningPath:"critical-angle",strand:1,concept:"refraction basics",keywords:["refraction","normal","angle"],text:"When light changes direction as it passes from one medium to another, this process is called {blank}. The imaginary line perpendicular to the surface is called the {blank}.",blanks:[{id:"blank1",correctAnswers:["refraction"],caseSensitive:!1,hints:["Think about light bending"]},{id:"blank2",correctAnswers:["normal"],caseSensitive:!1,hints:["Perpendicular line to surface"]}],explanation:"Refraction is the bending of light when it passes between different media. The normal is the reference line used to measure angles of incidence and refraction."}],level4:[{id:"ca_s1_l4_mcq1",type:"mcq",level:4,points:4,question:"The critical angle is the angle of incidence at which:",learningPath:"critical-angle",strand:1,concept:"critical angle definition",keywords:["critical angle","total internal reflection","angle of refraction"],options:[{id:"a",text:"Light is completely absorbed",isCorrect:!1},{id:"b",text:"The angle of refraction is 90°",isCorrect:!0},{id:"c",text:"Light travels parallel to the surface",isCorrect:!1,level:3},{id:"d",text:"Refraction stops completely",isCorrect:!1}],explanation:"The critical angle is defined as the angle of incidence for which the angle of refraction is exactly 90°. Beyond this angle, total internal reflection occurs."},{id:"ca_s1_l4_short1",type:"short-answer",level:4,points:4,question:"Explain in simple terms what total internal reflection is.",learningPath:"critical-angle",strand:1,concept:"TIR basics",keywords:["total internal reflection","critical angle","dense medium"],minWords:15,maxWords:50,sampleAnswer:"Total internal reflection occurs when light traveling in a dense medium hits the boundary with a less dense medium at an angle greater than the critical angle, causing all the light to be reflected back instead of being refracted.",evaluationCriteria:{requiredKeywords:["total internal reflection","critical angle","dense medium","reflected"],requiredConcepts:["angle greater than critical","all light reflected","no refraction"]}}],level6:[{id:"ca_s1_l6_match1",type:"match-click",level:6,points:6,question:"Match the TIR scenarios with their outcomes:",learningPath:"critical-angle",strand:1,concept:"TIR scenarios",keywords:["angle comparison","refraction","reflection"],leftItems:[{id:"scenario1",text:"Angle < Critical Angle"},{id:"scenario2",text:"Angle = Critical Angle"},{id:"scenario3",text:"Angle > Critical Angle"}],rightItems:[{id:"result1",text:"Light refracts into second medium"},{id:"result2",text:"Light refracts at 90° to normal"},{id:"result3",text:"Total internal reflection occurs"}],correctMatches:[{leftId:"scenario1",rightId:"result1"},{leftId:"scenario2",rightId:"result2"},{leftId:"scenario3",rightId:"result3"}],explanation:"The behavior of light at an interface depends on whether the incident angle is below, equal to, or above the critical angle."},{id:"ca_s1_l6_mcq1",type:"mcq",level:6,points:6,question:"If the refractive index of glass is 1.5 and air is 1.0, what is the critical angle for total internal reflection?",learningPath:"critical-angle",strand:1,concept:"critical angle calculation",keywords:["refractive index","sin⁻¹","critical angle"],options:[{id:"a",text:"30°",isCorrect:!1},{id:"b",text:"41.8°",isCorrect:!0},{id:"c",text:"48.6°",isCorrect:!1,level:4},{id:"d",text:"60°",isCorrect:!1}],explanation:"Using sin(θc) = n₂/n₁ = 1.0/1.5 = 0.667, therefore θc = sin⁻¹(0.667) = 41.8°. This is the critical angle for glass-air interface."}],level8:[{id:"ca_s1_l8_short1",type:"short-answer",level:8,points:8,question:"A diamond has a refractive index of 2.42. Calculate the critical angle and explain why this makes diamonds particularly brilliant and sparkly.",learningPath:"critical-angle",strand:1,concept:"advanced TIR applications",keywords:["diamond","brilliance","critical angle","total internal reflection"],minWords:60,maxWords:120,sampleAnswer:"The critical angle for diamond is θc = sin⁻¹(1/2.42) = sin⁻¹(0.413) = 24.4°. This very small critical angle means that light entering a diamond is easily trapped inside through total internal reflection. Most light rays hitting the internal surfaces do so at angles greater than 24.4°, causing them to reflect internally multiple times before eventually exiting. This creates the brilliant sparkle and fire that diamonds are famous for, as light bounces around inside the stone before emerging with enhanced intensity and dispersion.",evaluationCriteria:{requiredKeywords:["sin⁻¹","24.4°","critical angle","total internal reflection","brilliant"],requiredConcepts:["small critical angle","light trapping","multiple reflections","sparkle"]}},{id:"ca_s1_l8_fill1",type:"fill-blank",level:8,points:8,question:"Complete this advanced explanation of optical fiber operation:",learningPath:"critical-angle",strand:1,concept:"fiber optic principles",keywords:["optical fiber","cladding","core","step-index"],text:"In a step-index optical fiber, the {blank} has a higher refractive index than the {blank}, creating a step change in refractive index. Light rays that enter within the {blank} cone will undergo total internal reflection at the core-cladding boundary, ensuring efficient light guidance with minimal {blank}.",blanks:[{id:"blank1",correctAnswers:["core"],caseSensitive:!1},{id:"blank2",correctAnswers:["cladding"],caseSensitive:!1},{id:"blank3",correctAnswers:["acceptance","numerical aperture"],caseSensitive:!1,hints:["Think about the cone of light that can enter"]},{id:"blank4",correctAnswers:["loss","attenuation"],caseSensitive:!1}],explanation:"The step-index design ensures efficient light guidance through TIR. The numerical aperture defines the acceptance cone for incoming light rays."}]},strand2:{level2:[{id:"ca_s2_l2_mcq1",type:"mcq",level:2,points:2,question:"What happens to light within an optical fiber?",learningPath:"critical-angle",strand:2,concept:"TIR conditions",keywords:["optical fiber","total internal reflection","light guidance"],options:[{id:"a",text:"It diffracts around corners",isCorrect:!1},{id:"b",text:"It disperses into colors",isCorrect:!1},{id:"c",text:"It refracts continuously",isCorrect:!1},{id:"d",text:"It undergoes total internal reflection",isCorrect:!0}],explanation:"Light in optical fibers undergoes total internal reflection at the core-cladding boundary, allowing it to travel long distances with minimal loss."},{id:"ca_s2_l2_mcq2",type:"mcq",level:2,points:2,question:"Which conditions are necessary for light to be totally internally reflected?",learningPath:"critical-angle",strand:2,concept:"TIR conditions",keywords:["total internal reflection","critical angle","dense medium"],options:[{id:"a",text:"Light in less dense medium, angle less than critical angle",isCorrect:!1},{id:"b",text:"Light in less dense medium, angle greater than critical angle",isCorrect:!1},{id:"c",text:"Light in more dense medium, angle less than critical angle",isCorrect:!1},{id:"d",text:"Light in more dense medium, angle greater than critical angle",isCorrect:!0}],explanation:"TIR requires light to travel FROM a more dense medium TO a less dense medium, with the incident angle greater than the critical angle."}],level4:[{id:"ca_s2_l4_short1",type:"short-answer",level:4,points:4,question:"Describe what is meant by 'total internal reflection' and explain when it occurs.",learningPath:"critical-angle",strand:2,concept:"TIR phenomenon description",keywords:["total internal reflection","critical angle","dense medium","no refraction"],minWords:30,maxWords:80,sampleAnswer:"Total internal reflection occurs when light traveling in a dense medium hits the boundary with a less dense medium at an angle greater than the critical angle. When this happens, all incident light is reflected back into the same medium and no light is transmitted or refracted into the second medium.",evaluationCriteria:{requiredKeywords:["total internal reflection","critical angle","dense medium","reflected","no refraction"],requiredConcepts:["angle greater than critical","all light reflected","no transmission"]}},{id:"ca_s2_l4_mcq1",type:"mcq",level:4,points:4,question:"What happens to light at the critical angle?",learningPath:"critical-angle",strand:2,concept:"critical angle behavior",keywords:["critical angle","refracted ray","90 degrees"],options:[{id:"a",text:"Light is completely absorbed",isCorrect:!1},{id:"b",text:"The refracted ray travels at 90° to the normal",isCorrect:!0},{id:"c",text:"Light splits into many colors",isCorrect:!1},{id:"d",text:"All light is reflected back",isCorrect:!1}],explanation:"At the critical angle, the refracted ray emerges parallel to the interface (90° to the normal). This is the boundary condition between refraction and total internal reflection."}],level6:[{id:"ca_s2_l6_short1",type:"short-answer",level:6,points:6,question:"Explain why total internal reflection only occurs when light travels from a denser to less dense medium, using Snell's law to support your explanation.",learningPath:"critical-angle",strand:2,concept:"TIR physics explanation",keywords:["dense medium","less dense","snells law","mathematical constraint"],minWords:50,maxWords:100,sampleAnswer:"When light travels from dense to less dense medium, it bends away from the normal according to Snell's law. At the critical angle, the refracted ray grazes the surface (90° to normal). Beyond this angle, Snell's law would require sin(θ₂) > 1, which is mathematically impossible since sine values cannot exceed 1. Therefore, no refraction can occur and all light is reflected. In the opposite direction, light bends toward the normal and can always be refracted.",evaluationCriteria:{requiredKeywords:["dense medium","less dense medium","snells law","mathematically impossible","sin greater than 1"],requiredConcepts:["bending away from normal","mathematical constraint","directional requirement"]}}],level8:[{id:"ca_s2_l8_short1",type:"short-answer",level:8,points:8,question:"Analyze how wavelength affects the critical angle and discuss the implications for white light undergoing total internal reflection.",learningPath:"critical-angle",strand:2,concept:"wavelength dependence and dispersion",keywords:["wavelength","dispersion","white light","different colors","critical angles"],minWords:80,maxWords:150,sampleAnswer:"Since refractive index varies with wavelength (dispersion), different colors have slightly different critical angles. Red light has a lower refractive index than blue light in most materials, so red has a larger critical angle than blue. When white light undergoes total internal reflection, colors near the critical angle may behave differently - some may be totally reflected while others are partially transmitted. This can cause chromatic effects at the critical angle transition. In practical applications like optical fibers, this wavelength dependence contributes to chromatic dispersion, which can limit bandwidth in multimode fibers.",evaluationCriteria:{requiredKeywords:["refractive index varies","wavelength","dispersion","different critical angles","chromatic effects"],requiredConcepts:["color dependence","practical implications","optical fiber effects","bandwidth limitations"]}}]},strand3:{level2:[{id:"ca_s3_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the sentences about TIR applications:",learningPath:"critical-angle",strand:3,concept:"TIR applications",keywords:["fiber optics","diamonds","applications"],text:"Optical {blank} use total internal reflection to transmit light signals over long distances. {blank} sparkle brilliantly because of their high refractive index causing total internal reflection.",blanks:[{id:"blank1",correctAnswers:["fibers","fibres"],caseSensitive:!1,hints:["Used for internet and telecommunications"]},{id:"blank2",correctAnswers:["diamonds"],caseSensitive:!1,hints:["Precious gemstones that sparkle"]}],explanation:"Optical fibers revolutionized communication by using TIR to guide light, while diamonds' brilliance comes from their very high refractive index creating extensive total internal reflection."},{id:"ca_s3_l2_mcq1",type:"mcq",level:2,points:2,question:"Which device relies primarily on total internal reflection to function?",learningPath:"critical-angle",strand:3,concept:"TIR-based devices",keywords:["optical fiber","device function","TIR application"],options:[{id:"a",text:"Magnifying glass",isCorrect:!1},{id:"b",text:"Optical fiber",isCorrect:!0},{id:"c",text:"Camera lens",isCorrect:!1},{id:"d",text:"Telescope mirror",isCorrect:!1}],explanation:"Optical fibers use total internal reflection to guide light through the core by reflecting it off the core-cladding boundary."}],level4:[{id:"ca_s3_l4_short1",type:"short-answer",level:4,points:4,question:"Describe how total internal reflection enables fiber optic communication and state TWO advantages this provides over traditional copper cables.",learningPath:"critical-angle",strand:3,concept:"fiber optic communication",keywords:["fiber optic communication","signal transmission","advantages","copper cables"],minWords:40,maxWords:80,sampleAnswer:"Light signals travel through fiber cores by total internal reflection at the core-cladding boundary. Light bounces along the fiber maintaining signal strength over long distances. Advantages include: higher bandwidth for faster data transmission, less signal loss over long distances, immunity to electromagnetic interference, and enhanced security since signals are harder to intercept.",evaluationCriteria:{requiredKeywords:["total internal reflection","core-cladding boundary","signal transmission","advantages"],requiredConcepts:["light guidance mechanism","two specific advantages","comparison with copper"]}},{id:"ca_s3_l4_short2",type:"short-answer",level:4,points:4,question:"Explain why diamonds appear particularly brilliant and sparkly when cut properly.",learningPath:"critical-angle",strand:3,concept:"diamond brilliance",keywords:["diamond cutting","refractive index","brilliance","light behavior"],minWords:30,maxWords:70,sampleAnswer:"Diamond has a very high refractive index (≈2.4) which creates a very small critical angle. This means most light entering the diamond undergoes total internal reflection, bouncing multiple times inside before emerging. This creates the brilliant sparkle and fire that diamonds are famous for.",evaluationCriteria:{requiredKeywords:["high refractive index","small critical angle","total internal reflection","multiple reflections"],requiredConcepts:["material properties","light behavior","brilliance mechanism"]}}],level6:[{id:"ca_s3_l6_short1",type:"short-answer",level:6,points:6,question:"Explain the physics behind how medical endoscopes use total internal reflection to enable doctors to see inside the human body, and justify why this method is superior to other imaging approaches.",learningPath:"critical-angle",strand:3,concept:"medical endoscopy applications",keywords:["medical endoscopy","fiber bundle","internal imaging","minimally invasive"],minWords:60,maxWords:120,sampleAnswer:"Medical endoscopes contain flexible fiber bundles with thousands of optical fibers. Each fiber guides light by total internal reflection, maintaining image quality even when bent. Light travels down some fibers to illuminate internal areas, while reflected light returns through other fibers to create detailed images. This method is superior because it's minimally invasive, provides flexible access to difficult areas, offers real-time imaging capabilities, and doesn't use ionizing radiation like X-rays.",evaluationCriteria:{requiredKeywords:["fiber bundle","total internal reflection","flexible","minimally invasive","real-time"],requiredConcepts:["physics mechanism","image formation","advantages over alternatives"]}},{id:"ca_s3_l6_short2",type:"short-answer",level:6,points:6,question:"Analyze why prisms are used instead of mirrors in high-quality binoculars and periscopes.",learningPath:"critical-angle",strand:3,concept:"prism vs mirror applications",keywords:["prisms vs mirrors","light efficiency","image quality","optical instruments"],minWords:40,maxWords:90,sampleAnswer:"Prisms use total internal reflection which reflects nearly 100% of light, while mirrors typically reflect only 90-95% due to absorption losses. TIR maintains image brightness and contrast better than mirrors. Additionally, prisms can correct image orientation while reflecting, making them ideal for compact optical instruments like binoculars and periscopes.",evaluationCriteria:{requiredKeywords:["total internal reflection","100% reflection","light efficiency","image quality"],requiredConcepts:["comparison with mirrors","practical advantages","optical performance"]}}],level8:[{id:"ca_s3_l8_short1",type:"short-answer",level:8,points:8,question:"Evaluate the role of total internal reflection in three different modern technologies, analyzing both the advantages and limitations of TIR-based solutions in each case.",learningPath:"critical-angle",strand:3,concept:"comprehensive technology evaluation",keywords:["technology evaluation","multiple applications","advantages","limitations"],minWords:100,maxWords:180,sampleAnswer:"In fiber optic telecommunications, TIR provides advantages of high bandwidth and low loss but limitations include high installation costs and fragility. In LED lighting design, TIR improves light extraction efficiency and reduces energy waste, but requires precise manufacturing and adds complexity. In precision optical instruments like laser interferometers, TIR offers near-perfect reflection and stability, but is sensitive to surface quality and environmental factors. Each application leverages TIR's unique properties while addressing specific engineering constraints and performance requirements.",evaluationCriteria:{requiredKeywords:["three technologies","advantages","limitations","fiber optics","LEDs","precision optics"],requiredConcepts:["balanced evaluation","technology-specific analysis","engineering constraints"]}}]},strand4:{level2:[{id:"ca_s4_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the calculation:",learningPath:"critical-angle",strand:4,concept:"basic calculations",keywords:["refractive index","speed of light","calculation"],text:"The refractive index of glass is 1.5. If the speed of light in air is 3.0 × 10⁸ m/s, then the speed of light in glass is {blank} × 10⁸ m/s. Use the formula: speed = c/n where c is speed in air and n is refractive index.",blanks:[{id:"blank1",correctAnswers:["2.0","2"],caseSensitive:!1,hints:["Divide 3.0 by 1.5"]}],explanation:"Using v = c/n: v = (3.0 × 10⁸ m/s) ÷ 1.5 = 2.0 × 10⁸ m/s. Light travels slower in denser materials."},{id:"ca_s4_l2_mcq1",type:"mcq",level:2,points:2,question:"A ray of light hits a glass-air boundary at 30°. The critical angle for this glass is 42°. Will total internal reflection occur?",learningPath:"critical-angle",strand:4,concept:"TIR determination",keywords:["critical angle comparison","TIR conditions"],options:[{id:"a",text:"Yes, because 30° > 42°",isCorrect:!1},{id:"b",text:"No, because 30° < 42°",isCorrect:!0},{id:"c",text:"Yes, because light always reflects",isCorrect:!1},{id:"d",text:"Cannot determine from given information",isCorrect:!1}],explanation:"TIR only occurs when the incident angle exceeds the critical angle. Since 30° < 42°, both reflection and refraction will occur, not total internal reflection."}],level4:[{id:"ca_s4_l4_mcq1",type:"mcq",level:4,points:4,question:"A liquid has a refractive index of 1.5. What is the critical angle when light travels from this liquid to air? (Use sin⁻¹(0.667) = 41.8°)",learningPath:"critical-angle",strand:4,concept:"critical angle calculation",keywords:["critical angle formula","refractive index","calculation"],options:[{id:"a",text:"30.0°",isCorrect:!1},{id:"b",text:"41.8°",isCorrect:!0},{id:"c",text:"48.6°",isCorrect:!1},{id:"d",text:"60.0°",isCorrect:!1}],explanation:"Using sin(θc) = n₂/n₁ = 1/1.5 = 0.667, therefore θc = sin⁻¹(0.667) = 41.8°. This is the critical angle for the liquid-air interface."},{id:"ca_s4_l4_short1",type:"short-answer",level:4,points:4,question:"Light traveling in glass (n=1.5) hits the glass-air boundary at 45°. Determine whether TIR occurs and explain your reasoning.",learningPath:"critical-angle",strand:4,concept:"TIR analysis",keywords:["TIR determination","angle comparison","critical angle"],minWords:30,maxWords:70,sampleAnswer:"First calculate critical angle: sin(θc) = 1/1.5 = 0.667, so θc = 41.8°. Since the incident angle (45°) is greater than the critical angle (41.8°), total internal reflection will occur. All light will be reflected back into the glass with no refracted ray.",evaluationCriteria:{requiredKeywords:["critical angle","41.8 degrees","45 degrees","total internal reflection"],requiredConcepts:["calculation method","angle comparison","TIR conclusion"]}}],level6:[{id:"ca_s4_l6_short1",type:"short-answer",level:6,points:6,question:"An optical fiber has a core with refractive index 1.46 and cladding with refractive index 1.40. Calculate the critical angle at the core-cladding boundary and explain why this design ensures light guidance.",learningPath:"critical-angle",strand:4,concept:"fiber optic calculations",keywords:["optical fiber design","critical angle","core-cladding","light guidance"],minWords:60,maxWords:120,sampleAnswer:"Using sin(θc) = n_cladding/n_core = 1.40/1.46 = 0.9589, therefore θc = sin⁻¹(0.9589) = 73.0°. This large critical angle ensures effective light guidance because most light rays entering the fiber core will hit the core-cladding boundary at angles greater than 73°, causing total internal reflection. The small refractive index difference (1.46 vs 1.40) creates the precise conditions needed for efficient light confinement while maintaining flexibility.",evaluationCriteria:{requiredKeywords:["sin inverse","73 degrees","core-cladding boundary","total internal reflection","light guidance"],requiredConcepts:["correct calculation","explanation of guidance mechanism","design rationale"]}},{id:"ca_s4_l6_short2",type:"short-answer",level:6,points:6,question:"A scientist observes that when light travels from medium A to medium B at 40°, total internal reflection occurs. When the same light travels at 35°, it refracts at 67° in medium B. Calculate the refractive indices of both media.",learningPath:"critical-angle",strand:4,concept:"experimental analysis",keywords:["experimental analysis","snells law","TIR conditions","refractive index determination"],minWords:50,maxWords:100,sampleAnswer:"At 40°: TIR occurs, so θc = 40°: sin(40°) = n_B/n_A, giving n_A/n_B = 1/sin(40°) = 1.556. At 35°: Using Snell's law: n_A × sin(35°) = n_B × sin(67°). Substituting n_A = 1.556 × n_B: 1.556 × n_B × 0.574 = n_B × 0.921. Solving: n_A = 1.56, n_B = 1.00 (air).",evaluationCriteria:{requiredKeywords:["critical angle 40 degrees","snells law","sin 35","sin 67","n_A = 1.56"],requiredConcepts:["TIR condition analysis","simultaneous equation solution","realistic values"]}}],level8:[{id:"ca_s4_l8_short1",type:"short-answer",level:8,points:8,question:"Design a comprehensive experiment to accurately measure the refractive index of an unknown transparent material using the critical angle method. Include apparatus, procedure, data analysis, and evaluation of uncertainties.",learningPath:"critical-angle",strand:4,concept:"experimental design",keywords:["experimental design","critical angle measurement","error analysis","refractive index"],minWords:120,maxWords:200,sampleAnswer:"Apparatus: Semicircular block of unknown material, narrow light beam source, protractor, screen, white paper for ray tracing. Procedure: Place semicircular block with flat edge facing light source. Gradually increase incident angle until no refracted ray appears on screen - this is the critical angle. Repeat measurements from different positions. Data analysis: Use n = 1/sin(θc) to calculate refractive index from average critical angle. Uncertainties: ±0.5° protractor precision, ±0.01 calculation error. Improvements: Use laser for precise beam, digital protractor for accuracy, temperature control since refractive index varies with temperature. Expected precision: ±0.02 in refractive index value.",evaluationCriteria:{requiredKeywords:["semicircular block","critical angle","protractor","refractive index formula","uncertainties","improvements"],requiredConcepts:["complete apparatus list","systematic procedure","error analysis","realistic improvements"]}}]}},"fiber-optics":{strand1:{level2:[{id:"fo_s1_l2_mcq1",type:"mcq",level:2,points:2,question:"What is the main principle that allows optical fibers to work?",learningPath:"fiber-optics",strand:1,concept:"fiber optic basics",keywords:["optical fiber","total internal reflection"],options:[{id:"a",text:"Light amplification",isCorrect:!1},{id:"b",text:"Total internal reflection",isCorrect:!0},{id:"c",text:"Light absorption",isCorrect:!1},{id:"d",text:"Light diffraction",isCorrect:!1}],explanation:"Optical fibers use total internal reflection to guide light along the fiber core by preventing light from escaping into the cladding."},{id:"fo_s1_l2_fill1",type:"fill-blank",level:2,points:2,question:"Label the basic parts of an optical fiber:",learningPath:"fiber-optics",strand:1,concept:"fiber structure basics",keywords:["core","cladding","coating"],text:"An optical fiber has three main parts: the central {blank} where light travels, the {blank} which has a lower refractive index, and the protective {blank}.",blanks:[{id:"blank1",correctAnswers:["core"],caseSensitive:!1,hints:["The center part where light travels"]},{id:"blank2",correctAnswers:["cladding"],caseSensitive:!1,hints:["Surrounds the core"]},{id:"blank3",correctAnswers:["coating","jacket"],caseSensitive:!1,hints:["Protects the glass fiber"]}],explanation:"The core guides light, the cladding provides the refractive index difference needed for TIR, and the coating protects the glass fiber."}],level4:[{id:"fo_s1_l4_short1",type:"short-answer",level:4,points:4,question:"Explain how the refractive index difference between core and cladding enables light guiding in optical fibers.",learningPath:"fiber-optics",strand:1,concept:"refractive index and guiding",keywords:["refractive index","core","cladding","critical angle","light guiding"],minWords:30,maxWords:70,sampleAnswer:"The core has a higher refractive index than the cladding, creating the conditions needed for total internal reflection. When light rays in the core hit the core-cladding boundary at angles greater than the critical angle, they are completely reflected back into the core. This refractive index step ensures that light is trapped and guided along the fiber length.",evaluationCriteria:{requiredKeywords:["higher refractive index","core","cladding","critical angle","trapped"],requiredConcepts:["TIR conditions","light guiding","refractive index step"]}},{id:"fo_s1_l4_mcq1",type:"mcq",level:4,points:4,question:"Which statement best describes the numerical aperture of an optical fiber?",learningPath:"fiber-optics",strand:1,concept:"numerical aperture",keywords:["numerical aperture","acceptance angle","light coupling"],options:[{id:"a",text:"The diameter of the fiber core",isCorrect:!1},{id:"b",text:"A measure of the light-gathering ability of the fiber",isCorrect:!0},{id:"c",text:"The length of the optical fiber",isCorrect:!1},{id:"d",text:"The speed of light in the fiber",isCorrect:!1}],explanation:"Numerical aperture quantifies how much light can be coupled into the fiber, determining the acceptance cone angle for incoming light rays."}],level6:[{id:"fo_s1_l6_short1",type:"short-answer",level:6,points:6,question:"Compare single-mode and multimode fibers, explaining how core diameter affects light propagation and discussing the applications of each type.",learningPath:"fiber-optics",strand:1,concept:"fiber types and modes",keywords:["single-mode","multimode","core diameter","light propagation","applications"],minWords:60,maxWords:120,sampleAnswer:"Single-mode fibers have very small cores (8-10 μm) that allow only one light path, eliminating modal dispersion and enabling high-speed long-distance transmission. Multimode fibers have larger cores (50-100 μm) allowing multiple light paths, causing modal dispersion but easier coupling with light sources. Single-mode fibers are used for telecommunications and long-distance networks, while multimode fibers are used for short-distance applications like LANs and data centers where ease of connection is more important than bandwidth.",evaluationCriteria:{requiredKeywords:["single-mode","multimode","core diameter","modal dispersion","applications"],requiredConcepts:["core size effects","propagation differences","practical applications"]}},{id:"fo_s1_l6_fill1",type:"fill-blank",level:6,points:6,question:"Complete the advanced fiber optics explanation:",learningPath:"fiber-optics",strand:1,concept:"advanced fiber properties",keywords:["numerical aperture","acceptance angle","modal dispersion","bandwidth"],text:"The {blank} of a fiber determines how much light can be coupled into it. In multimode fibers, different light paths cause {blank} which limits the {blank}. This is why {blank} fibers are preferred for high-speed long-distance communication.",blanks:[{id:"blank1",correctAnswers:["numerical aperture"],caseSensitive:!1,hints:["Measure of light-gathering ability"]},{id:"blank2",correctAnswers:["modal dispersion"],caseSensitive:!1,hints:["Pulse broadening effect"]},{id:"blank3",correctAnswers:["bandwidth"],caseSensitive:!1,hints:["Data transmission capacity"]},{id:"blank4",correctAnswers:["single-mode"],caseSensitive:!1,hints:["Only one light path allowed"]}],explanation:"Numerical aperture affects light coupling efficiency. Modal dispersion in multimode fibers causes pulse broadening, limiting bandwidth. Single-mode fibers eliminate this problem."}],level8:[{id:"fo_s1_l8_short1",type:"short-answer",level:8,points:8,question:"Analyze the trade-offs between different fiber optic designs (step-index vs graded-index, single-mode vs multimode) and evaluate how these design choices affect system performance in telecommunications applications.",learningPath:"fiber-optics",strand:1,concept:"fiber design optimization",keywords:["step-index","graded-index","design trade-offs","telecommunications","system performance"],minWords:100,maxWords:180,sampleAnswer:"Step-index multimode fibers are simple and cost-effective but suffer from high modal dispersion. Graded-index multimode fibers reduce modal dispersion by using a parabolic refractive index profile that equalizes path lengths, improving bandwidth while maintaining easy coupling. Single-mode step-index fibers eliminate modal dispersion entirely but require precise alignment and expensive laser sources. In telecommunications, single-mode fibers dominate long-haul networks due to unlimited bandwidth and low attenuation, while graded-index multimode fibers serve premises networks where cost and ease of installation outweigh bandwidth limitations. Design choice depends on distance, bandwidth requirements, and economic constraints.",evaluationCriteria:{requiredKeywords:["step-index","graded-index","modal dispersion","single-mode","telecommunications","trade-offs"],requiredConcepts:["design comparison","performance analysis","application suitability","economic factors"]}}]},strand2:{level2:[{id:"fo_s2_l2_mcq1",type:"mcq",level:2,points:2,question:"What converts electrical signals to optical signals in a fiber optic communication system?",learningPath:"fiber-optics",strand:2,concept:"electro-optic conversion",keywords:["electrical to optical","signal conversion","light source"],options:[{id:"a",text:"Photodetector",isCorrect:!1},{id:"b",text:"LED or laser diode",isCorrect:!0},{id:"c",text:"Optical amplifier",isCorrect:!1},{id:"d",text:"Optical fiber",isCorrect:!1}],explanation:"LEDs and laser diodes convert electrical signals into light signals that can be transmitted through optical fibers."},{id:"fo_s2_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the fiber optic communication system:",learningPath:"fiber-optics",strand:2,concept:"system components",keywords:["transmitter","receiver","signal conversion"],text:"In a fiber optic system, the {blank} converts electrical signals to light, the {blank} carries the light signals, and the {blank} converts light back to electrical signals.",blanks:[{id:"blank1",correctAnswers:["transmitter","LED","laser"],caseSensitive:!1,hints:["Converts electrical to optical"]},{id:"blank2",correctAnswers:["fiber","optical fiber"],caseSensitive:!1,hints:["Guides the light"]},{id:"blank3",correctAnswers:["receiver","photodetector"],caseSensitive:!1,hints:["Converts optical to electrical"]}],explanation:"A complete fiber optic communication system requires a transmitter, transmission medium (fiber), and receiver for signal conversion and transport."}],level4:[{id:"fo_s2_l4_short1",type:"short-answer",level:4,points:4,question:"Describe the function of optical amplifiers in fiber optic networks and explain why they are preferred over electronic amplifiers for long-distance communication.",learningPath:"fiber-optics",strand:2,concept:"optical amplification",keywords:["optical amplifiers","signal boost","long-distance","electronic amplifiers"],minWords:40,maxWords:80,sampleAnswer:"Optical amplifiers boost light signals directly without converting them to electrical form. They use stimulated emission to amplify multiple wavelengths simultaneously. This is preferred over electronic amplifiers because it avoids optical-electrical-optical conversion delays, reduces complexity, enables wavelength division multiplexing, and provides higher bandwidth with lower noise.",evaluationCriteria:{requiredKeywords:["optical amplifiers","stimulated emission","multiple wavelengths","no conversion"],requiredConcepts:["direct amplification","advantages over electronic","WDM compatibility"]}},{id:"fo_s2_l4_mcq1",type:"mcq",level:4,points:4,question:"What is the main advantage of wavelength division multiplexing (WDM) in fiber optic communications?",learningPath:"fiber-optics",strand:2,concept:"wavelength division multiplexing",keywords:["WDM","multiple wavelengths","bandwidth","capacity"],options:[{id:"a",text:"It reduces the cost of optical fibers",isCorrect:!1},{id:"b",text:"It allows multiple signals to share the same fiber",isCorrect:!0},{id:"c",text:"It eliminates the need for optical amplifiers",isCorrect:!1},{id:"d",text:"It makes fibers immune to electromagnetic interference",isCorrect:!1}],explanation:"WDM allows multiple optical signals at different wavelengths to be transmitted simultaneously through a single fiber, dramatically increasing the transmission capacity."}],level6:[{id:"fo_s2_l6_short1",type:"short-answer",level:6,points:6,question:"Explain how wavelength division multiplexing (WDM) technology works and analyze its impact on the capacity and efficiency of modern optical communication networks.",learningPath:"fiber-optics",strand:2,concept:"WDM technology analysis",keywords:["WDM","multiple wavelengths","network capacity","efficiency","optical multiplexing"],minWords:60,maxWords:120,sampleAnswer:"WDM combines multiple optical signals at different wavelengths (colors) onto a single fiber using optical multiplexers. Each wavelength carries independent data streams, effectively creating multiple communication channels. At the receiver, optical demultiplexers separate the wavelengths back into individual signals. This technology multiplies fiber capacity by 40-100 times without laying new cables. Dense WDM (DWDM) systems can carry over 100 channels, enabling terabit-per-second transmission rates and making efficient use of existing fiber infrastructure.",evaluationCriteria:{requiredKeywords:["multiple wavelengths","multiplexers","demultiplexers","DWDM","terabit"],requiredConcepts:["technology mechanism","capacity multiplication","infrastructure efficiency"]}},{id:"fo_s2_l6_short2",type:"short-answer",level:6,points:6,question:"Compare LEDs and laser diodes as light sources for fiber optic communications, discussing their characteristics, advantages, and typical applications.",learningPath:"fiber-optics",strand:2,concept:"light source comparison",keywords:["LED","laser diode","light sources","characteristics","applications"],minWords:60,maxWords:120,sampleAnswer:"LEDs produce incoherent light with broad spectral width, are inexpensive, reliable, and easy to couple with multimode fibers, making them suitable for short-distance applications. Laser diodes produce coherent, narrow-spectrum light with higher power and faster switching speeds, enabling longer distances and higher data rates but requiring precise coupling and temperature control. LEDs are used in LANs and premises networks, while laser diodes are essential for long-haul telecommunications and high-speed data transmission where performance outweighs cost considerations.",evaluationCriteria:{requiredKeywords:["LEDs","laser diodes","incoherent","coherent","spectral width","applications"],requiredConcepts:["technical comparison","cost-performance trade-offs","application matching"]}}],level8:[{id:"fo_s2_l8_short1",type:"short-answer",level:8,points:8,question:"Evaluate the current limitations of fiber optic communication systems and analyze how emerging technologies like coherent detection, advanced modulation formats, and space-division multiplexing might address these challenges.",learningPath:"fiber-optics",strand:2,concept:"advanced fiber technologies",keywords:["system limitations","coherent detection","advanced modulation","space-division multiplexing","emerging technologies"],minWords:120,maxWords:200,sampleAnswer:"Current limitations include nonlinear effects at high powers, chromatic and polarization mode dispersion, and reaching the Shannon limit for single-mode fibers. Coherent detection enables advanced modulation formats like QPSK and QAM, improving spectral efficiency and noise tolerance. Digital signal processing compensates for dispersion and nonlinear impairments in real-time. Space-division multiplexing using multi-core or few-mode fibers creates parallel channels within a single fiber cable, potentially increasing capacity by orders of magnitude. These technologies, combined with machine learning for network optimization, promise to extend fiber capacity and enable next-generation applications like virtual reality, autonomous vehicles, and massive IoT deployments.",evaluationCriteria:{requiredKeywords:["nonlinear effects","coherent detection","QPSK","space-division multiplexing","digital signal processing"],requiredConcepts:["current limitations","emerging solutions","capacity scaling","future applications"]}}]},strand3:{level2:[{id:"fo_s3_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the sentences about fiber optic applications:",learningPath:"fiber-optics",strand:3,concept:"basic applications",keywords:["internet","medical","telecommunications","endoscopy"],text:"Fiber optics carry {blank} data for high-speed internet connections. In medicine, {blank} use fiber optic bundles to see inside the human body without major surgery.",blanks:[{id:"blank1",correctAnswers:["digital","data","internet"],caseSensitive:!1,hints:["Type of information transmitted"]},{id:"blank2",correctAnswers:["endoscopes"],caseSensitive:!1,hints:["Medical viewing instruments"]}],explanation:"Fiber optics revolutionized digital communications and enabled minimally invasive medical procedures through flexible endoscopic instruments."},{id:"fo_s3_l2_mcq1",type:"mcq",level:2,points:2,question:"Which is a major advantage of fiber optic internet over traditional copper cables?",learningPath:"fiber-optics",strand:3,concept:"internet advantages",keywords:["fiber internet","copper cables","advantages","speed"],options:[{id:"a",text:"Much faster data transmission speeds",isCorrect:!0},{id:"b",text:"Easier to install underground",isCorrect:!1},{id:"c",text:"Works better in cold weather",isCorrect:!1},{id:"d",text:"Costs less to manufacture",isCorrect:!1}],explanation:"Fiber optic cables can transmit data at much higher speeds than copper cables, enabling gigabit internet speeds and supporting bandwidth-intensive applications."}],level4:[{id:"fo_s3_l4_short1",type:"short-answer",level:4,points:4,question:"Describe how fiber optic technology has transformed global telecommunications and explain why undersea fiber optic cables are essential for international internet connectivity.",learningPath:"fiber-optics",strand:3,concept:"global telecommunications",keywords:["global telecommunications","undersea cables","international connectivity","internet infrastructure"],minWords:40,maxWords:80,sampleAnswer:"Fiber optics enabled high-capacity, low-latency global communications by replacing satellite links and copper cables. Undersea fiber cables carry over 99% of international data traffic, connecting continents with massive bandwidth capacity. These cables provide reliable, fast connections essential for global internet, cloud services, financial markets, and international communications, forming the backbone of the modern digital economy.",evaluationCriteria:{requiredKeywords:["global communications","undersea cables","international data","bandwidth capacity"],requiredConcepts:["telecommunications transformation","infrastructure importance","economic impact"]}},{id:"fo_s3_l4_short2",type:"short-answer",level:4,points:4,question:"Explain how fiber optic sensors work and give TWO examples of their industrial or scientific applications.",learningPath:"fiber-optics",strand:3,concept:"fiber optic sensing",keywords:["fiber optic sensors","sensing applications","industrial monitoring","scientific measurement"],minWords:40,maxWords:80,sampleAnswer:"Fiber optic sensors detect changes in light properties (intensity, wavelength, phase) caused by environmental factors like temperature, pressure, or strain. The fiber itself becomes the sensor, immune to electromagnetic interference. Applications include structural health monitoring of bridges and buildings, detecting temperature changes in oil wells, measuring strain in composite materials, and monitoring chemical processes in harsh environments.",evaluationCriteria:{requiredKeywords:["light properties","environmental factors","electromagnetic interference","two applications"],requiredConcepts:["sensing mechanism","specific examples","advantages over electronic sensors"]}}],level6:[{id:"fo_s3_l6_short1",type:"short-answer",level:6,points:6,question:"Analyze the societal impact of fiber optic technology on education, healthcare, and economic development, particularly in connecting remote and underserved communities.",learningPath:"fiber-optics",strand:3,concept:"societal impact analysis",keywords:["societal impact","education","healthcare","economic development","remote communities"],minWords:70,maxWords:130,sampleAnswer:"Fiber optics enabled distance learning through high-quality video conferencing, online courses, and virtual reality education, democratizing access to quality education. In healthcare, telemedicine consultations, remote surgery assistance, and real-time medical data transmission save lives in remote areas. Economically, high-speed fiber connectivity attracts businesses, enables remote work, supports e-commerce, and creates digital entrepreneurship opportunities. However, the digital divide persists where fiber infrastructure is lacking, highlighting the need for equitable access to ensure all communities benefit from the digital economy.",evaluationCriteria:{requiredKeywords:["distance learning","telemedicine","economic opportunities","digital divide","remote communities"],requiredConcepts:["multi-sector impact","access inequality","transformative effects","policy implications"]}},{id:"fo_s3_l6_short2",type:"short-answer",level:6,points:6,question:"Evaluate the environmental impact of fiber optic technology compared to traditional copper-based communications, considering energy consumption, materials, and sustainability factors.",learningPath:"fiber-optics",strand:3,concept:"environmental impact",keywords:["environmental impact","energy consumption","sustainability","copper comparison","materials"],minWords:60,maxWords:120,sampleAnswer:"Fiber optics consume significantly less energy than copper systems because light signals require less power amplification over long distances. Optical fibers use abundant silica (sand) rather than scarce copper, reducing mining environmental impact. However, fiber manufacturing requires high-temperature processes and the electronics still consume power. Overall, fiber optics enable more efficient data centers, reduce electronic waste through longer system lifespans, and support smart grid technologies that optimize energy usage, making them more environmentally sustainable than copper-based alternatives.",evaluationCriteria:{requiredKeywords:["energy consumption","silica vs copper","manufacturing processes","environmental sustainability"],requiredConcepts:["comparative analysis","lifecycle assessment","resource efficiency","enabling technologies"]}}],level8:[{id:"fo_s3_l8_short1",type:"short-answer",level:8,points:8,question:"Critically evaluate the role of fiber optic infrastructure in enabling emerging technologies such as 5G networks, edge computing, autonomous vehicles, and the Internet of Things, discussing both opportunities and challenges for future implementation.",learningPath:"fiber-optics",strand:3,concept:"future technology enablement",keywords:["emerging technologies","5G networks","edge computing","autonomous vehicles","IoT","infrastructure challenges"],minWords:120,maxWords:200,sampleAnswer:"Fiber optic infrastructure is crucial for emerging technologies requiring ultra-low latency and massive bandwidth. 5G networks rely on fiber backhaul to small cells for gigabit speeds and millisecond latency. Edge computing requires fiber connections to distributed data centers for real-time processing. Autonomous vehicles need instantaneous communication through vehicle-to-infrastructure networks supported by fiber. IoT deployments generate massive data flows requiring fiber backbone capacity. Challenges include the enormous cost of upgrading infrastructure, ensuring cybersecurity across expanded networks, bridging the digital divide in rural areas, and coordinating international standards. Success requires public-private partnerships, strategic investment in future-ready infrastructure, and policies promoting equitable access to enable these transformative technologies to benefit all of society.",evaluationCriteria:{requiredKeywords:["5G backhaul","edge computing","autonomous vehicles","IoT","infrastructure challenges","public-private partnerships"],requiredConcepts:["technology interdependence","implementation challenges","policy considerations","societal benefits"]}}]},strand4:{level2:[{id:"fo_s4_l2_mcq1",type:"mcq",level:2,points:2,question:"What is the most important factor to consider when installing fiber optic cables?",learningPath:"fiber-optics",strand:4,concept:"installation basics",keywords:["installation","fiber cables","design factors"],options:[{id:"a",text:"The color of the cable jacket",isCorrect:!1},{id:"b",text:"Avoiding sharp bends that could break the fiber",isCorrect:!0},{id:"c",text:"Installing cables as quickly as possible",isCorrect:!1},{id:"d",text:"Using the most expensive cables available",isCorrect:!1}],explanation:"Optical fibers are made of glass and can break if bent too sharply. Maintaining proper bend radius is crucial to prevent signal loss and fiber damage."},{id:"fo_s4_l2_fill1",type:"fill-blank",level:2,points:2,question:"Complete the fiber optic design considerations:",learningPath:"fiber-optics",strand:4,concept:"basic design factors",keywords:["bend radius","signal loss","protection"],text:"When designing fiber optic systems, engineers must consider the minimum {blank} radius to prevent breakage, {blank} loss over distance, and environmental {blank} for outdoor installations.",blanks:[{id:"blank1",correctAnswers:["bend","bending"],caseSensitive:!1,hints:["Related to fiber curvature"]},{id:"blank2",correctAnswers:["signal","optical"],caseSensitive:!1,hints:["What gets weaker over distance"]},{id:"blank3",correctAnswers:["protection"],caseSensitive:!1,hints:["Shields from weather and damage"]}],explanation:"Fiber optic system design requires careful attention to mechanical, optical, and environmental factors to ensure reliable operation."}],level4:[{id:"fo_s4_l4_short1",type:"short-answer",level:4,points:4,question:"Describe the main trade-offs between performance and cost in fiber optic system design, giving specific examples of how these decisions affect overall system capabilities.",learningPath:"fiber-optics",strand:4,concept:"performance-cost trade-offs",keywords:["performance","cost trade-offs","system design","capabilities"],minWords:40,maxWords:80,sampleAnswer:"Key trade-offs include single-mode vs multimode fibers (higher performance vs lower cost), laser vs LED sources (longer reach vs affordability), and cable quality (durability vs price). Higher-grade components improve bandwidth, distance, and reliability but increase costs. System designers must balance requirements like transmission distance, data rates, and budget constraints while ensuring adequate performance margins for future growth and varying environmental conditions.",evaluationCriteria:{requiredKeywords:["single-mode vs multimode","laser vs LED","performance vs cost","design balance"],requiredConcepts:["specific trade-offs","system impact","design optimization"]}},{id:"fo_s4_l4_mcq1",type:"mcq",level:4,points:4,question:"Which factor is most critical when designing a fiber optic network for a data center?",learningPath:"fiber-optics",strand:4,concept:"data center design",keywords:["data center","network design","critical factors"],options:[{id:"a",text:"Minimizing cable length to reduce costs",isCorrect:!1},{id:"b",text:"Maximizing bandwidth and minimizing latency",isCorrect:!0},{id:"c",text:"Using only single-mode fibers throughout",isCorrect:!1},{id:"d",text:"Installing the most colorful cable jackets",isCorrect:!1}],explanation:"Data centers require maximum bandwidth and minimum latency to handle massive data flows between servers, making performance optimization the primary design criterion."}],level6:[{id:"fo_s4_l6_short1",type:"short-answer",level:6,points:6,question:"Analyze the engineering challenges involved in laying undersea fiber optic cables and explain how design solutions address issues of depth, pressure, marine environment, and long-term reliability.",learningPath:"fiber-optics",strand:4,concept:"undersea cable engineering",keywords:["undersea cables","engineering challenges","pressure","marine environment","reliability"],minWords:70,maxWords:130,sampleAnswer:"Undersea cables face extreme pressure (up to 1000 atmospheres), corrosive seawater, marine life interference, and inaccessible locations. Design solutions include multiple protective layers with steel armor, water-blocking compounds, and pressure-resistant materials. Cables are buried in shallow waters to prevent anchor damage and include remote optically pumped amplifiers (ROPAs) for signal regeneration. Redundant paths and advanced monitoring systems ensure reliability, while specialized cable-laying ships and ROVs enable precise installation and maintenance in challenging deep-sea environments.",evaluationCriteria:{requiredKeywords:["extreme pressure","steel armor","water-blocking","ROPAs","redundant paths"],requiredConcepts:["environmental challenges","protective design","installation methods","reliability systems"]}},{id:"fo_s4_l6_short2",type:"short-answer",level:6,points:6,question:"Evaluate the maintenance and lifecycle management strategies for large-scale fiber optic networks, considering preventive maintenance, fault detection, repair procedures, and technology upgrade planning.",learningPath:"fiber-optics",strand:4,concept:"network lifecycle management",keywords:["maintenance strategies","fault detection","repair procedures","technology upgrades","lifecycle management"],minWords:70,maxWords:130,sampleAnswer:"Large fiber networks require proactive maintenance including regular optical time-domain reflectometry (OTDR) testing to identify degradation before failures occur. Automated monitoring systems continuously track signal quality and alert operators to issues. Repair strategies include splice restoration for cable cuts and component replacement for equipment failures. Lifecycle management involves planning technology refresh cycles, capacity upgrades, and migration to newer standards while maintaining service continuity. Strategic spare inventory, trained technical staff, and established vendor relationships ensure rapid response to outages and systematic network evolution.",evaluationCriteria:{requiredKeywords:["OTDR testing","automated monitoring","splice restoration","technology refresh","service continuity"],requiredConcepts:["proactive maintenance","systematic planning","rapid response","network evolution"]}}],level8:[{id:"fo_s4_l8_short1",type:"short-answer",level:8,points:8,question:"Design a comprehensive fiber optic network architecture for a smart city implementation, considering integration with 5G, IoT sensors, autonomous vehicles, and emergency services. Address scalability, redundancy, security, and future technology adaptation in your design.",learningPath:"fiber-optics",strand:4,concept:"smart city network design",keywords:["smart city","network architecture","5G integration","IoT","autonomous vehicles","scalability","redundancy","security"],minWords:130,maxWords:220,sampleAnswer:"A smart city fiber network requires hierarchical architecture with high-capacity backbone links connecting distributed edge computing nodes. Ring topology provides redundancy with automatic protection switching. 5G integration requires dense fiber infrastructure to small cells for low-latency applications. IoT sensor networks use fiber aggregation points with wireless last-mile connections. Autonomous vehicle systems need ultra-reliable low-latency connections through dedicated fiber channels. Emergency services require priority traffic handling and diverse routing paths. Security implementation includes encrypted optical transmission, network segmentation, and continuous monitoring. Scalability design uses modular add/drop multiplexers and software-defined networking for dynamic resource allocation. Future adaptation provisions include spare fiber capacity, upgradeable electronics, and standardized interfaces for emerging technologies. The architecture balances performance, cost, and flexibility while ensuring resilient operation under various failure scenarios.",evaluationCriteria:{requiredKeywords:["hierarchical architecture","ring topology","edge computing","5G small cells","autonomous vehicles","network segmentation","software-defined networking"],requiredConcepts:["comprehensive design","multi-application support","resilience planning","future-proofing strategies"]}},{id:"fo_s4_l8_short2",type:"short-answer",level:8,points:8,question:"Critically analyze the sustainability and environmental considerations in modern fiber optic network design and deployment, proposing innovative solutions for reducing carbon footprint, minimizing electronic waste, and optimizing energy efficiency throughout the system lifecycle.",learningPath:"fiber-optics",strand:4,concept:"sustainable network design",keywords:["sustainability","environmental considerations","carbon footprint","electronic waste","energy efficiency","system lifecycle"],minWords:120,maxWords:200,sampleAnswer:"Sustainable fiber network design requires lifecycle assessment from manufacturing through disposal. Energy efficiency improvements include using coherent optics to extend reach without regeneration, implementing sleep modes for unused equipment, and optimizing cooling systems in data centers. Carbon footprint reduction involves renewable energy for facilities, efficient routing algorithms to minimize active equipment, and local manufacturing to reduce transportation emissions. Electronic waste minimization uses modular designs for component upgrades, standardized interfaces for equipment reuse, and comprehensive recycling programs. Innovative solutions include solar-powered remote amplifiers, AI-driven network optimization for energy savings, biodegradable cable materials, and circular economy principles in equipment design. Network sharing among operators reduces infrastructure duplication, while software-defined networks enable dynamic resource allocation to minimize energy consumption during low-traffic periods.",evaluationCriteria:{requiredKeywords:["lifecycle assessment","coherent optics","renewable energy","modular designs","circular economy","network sharing","software-defined networks"],requiredConcepts:["comprehensive sustainability","innovative solutions","system optimization","environmental responsibility"]}}]}}},h8=(t,e,n)=>{const r=`strand${t}`;console.log(`🔍 Loading ${e} ${r} from data folder...`);const i=yd?.[e]?.[r];if(!i)return console.warn(`❌ No data found for ${e} ${r}`),console.log("Available data:",{learningPaths:Object.keys(yd||{}),availableStrands:yd?.[e]?Object.keys(yd[e]):[]}),uce(t,e);const s=[2,4,6,8].map(a=>{const l=`level${a}`,c=i[l]||[];return console.log(`📚 ${e} ${r} level${a}: ${c.length} questions`),{id:`${r}_level${a}`,level:a,questions:c,unlocked:!0,completed:!1,score:0,attempts:0,maxAttempts:5,completedQuestions:0,totalQuestions:c.length}}),o={strand:t,learningPath:e,title:f8(t,e),description:p8(t,e),blocks:s};return console.log(`✅ Generated ${o.title}: ${o.blocks.reduce((a,l)=>a+l.totalQuestions,0)} total questions`),o},uce=(t,e)=>({strand:t,learningPath:e,title:f8(t,e),description:p8(t,e),blocks:[]}),f8=(t,e)=>({"critical-angle":{1:"TIR Principles & Laws",2:"Understanding TIR Phenomena",3:"Real-World Applications",4:"Analysis & Problem Solving"},"fiber-optics":{1:"Fiber Optic Principles",2:"Fiber Optic Technology",3:"Applications & Impact",4:"Design & Innovation"}})[e]?.[t]||`Strand ${t}`,p8=(t,e)=>({"critical-angle":{1:"Understanding the fundamental laws governing total internal reflection",2:"Comprehending why and when total internal reflection occurs",3:"Exploring practical uses of total internal reflection in technology and nature",4:"Applying mathematical and analytical skills to solve TIR problems"},"fiber-optics":{1:"Understanding how light travels through optical fibers",2:"Exploring the engineering and physics behind fiber optic systems",3:"Examining fiber optic applications and their societal impact",4:"Applying fiber optic principles to solve design challenges"}})[e]?.[t]||`Strand ${t} content`,dce=t=>{if(t.length===0)return 0;const n=t.reduce((r,i)=>r+i.score,0)/t.length;return Math.min(8,Math.round(n))},Oa=(t,e,n)=>t==={principlePioneer:1,conceptCrusader:2,applicationAce:3,analysisArchitect:4}[n]&&e>=8;class K0 extends Error{constructor(e,n,r){super(e),this.code=n,this.details=r,this.name="QuestionSystemError"}}const sP=(t,e)=>t instanceof K0?t:t instanceof Error?new K0(`${e}: ${t.message}`,"SYSTEM_ERROR",{originalError:t}):new K0(`Unknown error in ${e}`,"UNKNOWN_ERROR",{error:t}),hce=t=>!!(t.questionId&&t.type&&t.timestamp&&typeof t.isCorrect=="boolean"&&typeof t.score=="number"),m8=B.createContext(null),oP={currentStrand:1,strandData:{},responses:{},strandProgresses:[0,0,0,0],badges:{principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1},loading:!1,error:null},fce=({children:t})=>{const[e,n]=B.useState(oP),r=B.useCallback((u,d,h)=>{n(f=>{const p=[...f.strandProgresses],y=u-1;if(y>=0&&y<4){const b=p[y]||0,v=Math.max(b,Math.min(8,Math.max(0,h)));p[y]=v;const x={...f.badges};return Oa(u,v,"principlePioneer")&&(x.principlePioneer=!0),Oa(u,v,"conceptCrusader")&&(x.conceptCrusader=!0),Oa(u,v,"applicationAce")&&(x.applicationAce=!0),Oa(u,v,"analysisArchitect")&&(x.analysisArchitect=!0),console.log("📊 CONTEXT PROGRESS UPDATE:",{strand:u,oldScore:b,newScore:v,fullProgress:p,badges:x}),{...f,strandProgresses:p,badges:x}}else return console.warn("⚠️ Invalid strand index in context:",y),f})},[]),i=B.useCallback(u=>{u>=1&&u<=4&&n(d=>({...d,currentStrand:u}))},[]),s=B.useCallback(async u=>{try{if(!hce(u))throw new K0("Invalid question response","VALIDATION_ERROR");n(d=>{const h={...d.responses,[u.questionId]:u},f=Object.values(h).filter(v=>v.questionId.includes(`strand${d.currentStrand}`)),p=dce(f),y=[...d.strandProgresses];y[d.currentStrand-1]=p;const b={...d.badges};return Oa(d.currentStrand,p,"principlePioneer")&&(b.principlePioneer=!0),Oa(d.currentStrand,p,"conceptCrusader")&&(b.conceptCrusader=!0),Oa(d.currentStrand,p,"applicationAce")&&(b.applicationAce=!0),Oa(d.currentStrand,p,"analysisArchitect")&&(b.analysisArchitect=!0),console.log("✅ RESPONSE SUBMITTED:",{questionId:u.questionId,isCorrect:u.isCorrect,score:u.score,strandProgress:p,newBadges:b}),{...d,responses:h,strandProgresses:y,badges:b,error:null}})}catch(d){const h=sP(d,"submitQuestionResponse");throw n(f=>({...f,error:h})),h}},[]),o=B.useCallback(async(u,d)=>{try{n(f=>({...f,loading:!0,error:null}));const h=h8(u,d,{});n(f=>({...f,strandData:{...f.strandData,[u]:h},loading:!1})),console.log("📚 STRAND DATA LOADED:",{strand:u,learningPath:d,blocks:h.blocks.length})}catch(h){const f=sP(h,"loadStrandData");n(p=>({...p,loading:!1,error:f}))}},[]),a=B.useCallback(()=>{n(oP),console.log("🔄 PROGRESS RESET")},[]),l=B.useCallback(()=>{n(u=>({...u,error:null}))},[]);B.useEffect(()=>{},[e]);const c={...e,setCurrentStrand:i,submitQuestionResponse:s,loadStrandData:o,resetProgress:a,clearError:l,updateProgress:r};return m.jsx(m8.Provider,{value:c,children:t})},pce=()=>{const t=B.useContext(m8);if(!t)throw new Error("useQuestionSystem must be used within a QuestionSystemProvider");return t};function mce({studentId:t,experiment:e,sessionCode:n,strandhoot:r,currentStrand:i}){const[s,o]=B.useState("idle"),a=h=>/^[0-9a-fA-F-]{36}$/.test(h),l=async h=>{if(!t||!e||!n){console.warn("❌ Missing required parameters for saving response");return}if(!a(t)){console.warn("❌ Invalid UUID for studentId:",t);return}o("saving");try{const{error:f}=await gs.from("question_responses").upsert({student_id:t,session_code:n,experiment:e,strandhoot:r,strand:i,question_id:h.questionId,question_type:h.type,answer:h.answer,is_correct:h.isCorrect,score:h.score,feedback:h.feedback,timestamp:h.timestamp.toISOString(),updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment,question_id"});if(f)throw new Error(`Response save error: ${f.message}`);const y=`${`strand${i}`}_progress`,{data:b,error:v}=await gs.from("question_responses").select("score, question_id").eq("student_id",t).eq("session_code",n).eq("experiment",e).eq("strand",i);if(v)console.warn("Could not fetch responses for progress calculation:",v.message);else if(b){const x=b.reduce((T,P)=>T+(P.score||0),0),S=b.length>0?x/b.length:0,_=Math.round(S*8),{error:A}=await gs.from("responses").upsert({student_id:t,session_code:n,experiment:e,[y]:_,updated_at:new Date().toISOString()},{onConflict:"student_id,session_code,experiment"});A&&console.warn("Could not update main responses table:",A.message)}o("success"),console.log("✅ Question response saved successfully")}catch(f){console.error("💥 Error saving question response:",f),o("error")}},c=async()=>{if(!t||!e||!n)return{};if(!a(t))return console.warn("❌ Invalid UUID for studentId in load:",t),{};try{const{data:h,error:f}=await gs.from("question_responses").select("*").eq("student_id",t).eq("session_code",n).eq("experiment",e).eq("strand",i);if(f)throw new Error(`Load error: ${f.message}`);const p={};return h&&h.forEach(y=>{p[y.question_id]={questionId:y.question_id,type:y.question_type,answer:y.answer,isCorrect:y.is_correct,score:y.score,feedback:y.feedback,timestamp:new Date(y.timestamp)}}),console.log(`📥 Loaded ${Object.keys(p).length} responses for strand ${i}`),p}catch(h){return console.error("💥 Error loading question responses:",h),{}}},u=async()=>{if(!t||!e||!n)return{};if(!a(t))return{};try{const{data:h,error:f}=await gs.from("question_responses").select("strand, score, is_correct").eq("student_id",t).eq("session_code",n).eq("experiment",e);if(f)throw new Error(`Progress summary error: ${f.message}`);const p={};if(h){const y=h.reduce((b,v)=>(b[v.strand]||(b[v.strand]=[]),b[v.strand].push(v),b),{});Object.entries(y).forEach(([b,v])=>{const x=parseInt(b),S=v.length,_=v.reduce((P,E)=>P+(E.score||0),0),A=S>0?_/S:0,T=Math.round(A*8);p[x]={level:T,completed:S,total:12}})}return p}catch(h){return console.error("💥 Error getting progress summary:",h),{}}},d=async()=>{if(!(!t||!e||!n)&&a(t))try{const{error:h}=await gs.from("question_responses").delete().eq("student_id",t).eq("session_code",n).eq("experiment",e).eq("strand",i);if(h)throw new Error(`Clear error: ${h.message}`);console.log(`🧹 Cleared all responses for strand ${i}`)}catch(h){console.error("💥 Error clearing responses:",h)}};return B.useEffect(()=>{if(s==="success"||s==="error"){const h=setTimeout(()=>{o("idle")},3e3);return()=>clearTimeout(h)}},[s]),{syncStatus:s,saveResponse:l,loadResponses:c,getProgressSummary:u,clearStrandResponses:d}}const gce=(t,e)=>{switch(e.type){case"SET_CURRENT_QUESTION":return{...t,currentQuestionIndex:e.payload,showFeedback:!1,feedbackAcknowledged:!1,canContinue:!1,showContinueButton:!1,currentResponse:null,learningQuote:"",questionStartTime:new Date};case"ADD_RESPONSE":const n=[...t.responses];n[t.currentQuestionIndex]=e.payload;const r={...t.sessionMetrics,questionsAttempted:t.sessionMetrics.questionsAttempted+1,totalTime:t.sessionMetrics.totalTime+(e.payload.timeSpent||0),averageResponseTime:t.sessionMetrics.questionsAttempted>0?(t.sessionMetrics.totalTime+(e.payload.timeSpent||0))/(t.sessionMetrics.questionsAttempted+1):e.payload.timeSpent||0};return{...t,responses:n,currentResponse:e.payload,showFeedback:!0,attempts:e.payload.isCorrect?t.attempts:t.attempts+1,sessionMetrics:r};case"SET_FEEDBACK":return{...t,showFeedback:e.payload.show,currentResponse:e.payload.response!==void 0?e.payload.response:t.currentResponse,feedbackAcknowledged:!e.payload.show};case"SET_CONTINUE_STATE":return{...t,canContinue:e.payload.canContinue,showContinueButton:e.payload.showButton};case"SET_LEARNING_QUOTE":return{...t,learningQuote:e.payload};case"SET_COMPLETION":return{...t,isCompleted:e.payload};case"SET_RENDERING_MODE":return{...t,renderingMode:e.payload};case"SET_VALIDATION":return{...t,validationResult:e.payload};case"SET_TIMING":return{...t,startTime:e.payload.startTime||t.startTime,questionStartTime:e.payload.questionStartTime||t.questionStartTime};case"UPDATE_METRICS":return{...t,sessionMetrics:{...t.sessionMetrics,...e.payload}};case"RESET_BLOCK":return{...g8,startTime:new Date,questionStartTime:new Date,sessionMetrics:{questionsAttempted:0,totalTime:0,averageResponseTime:0}};default:return t}},g8={currentQuestionIndex:0,responses:[],showFeedback:!1,attempts:0,isCompleted:!1,startTime:new Date,questionStartTime:new Date,feedbackAcknowledged:!1,canContinue:!1,showContinueButton:!1,currentResponse:null,learningQuote:"",renderingMode:"individual",validationResult:null,sessionMetrics:{questionsAttempted:0,totalTime:0,averageResponseTime:0}},yce=()=>{const[t,e]=B.useReducer(gce,g8),n=B.useMemo(()=>({currentQuestion:i=>i[t.currentQuestionIndex],isLastQuestion:i=>t.currentQuestionIndex===i-1,isFirstQuestion:()=>t.currentQuestionIndex===0,completionRate:i=>{const s=t.responses.filter(o=>o).length;return i>0?s/i*100:0},averageScore:()=>{const i=t.responses.filter(s=>s);return i.length>0?i.reduce((s,o)=>s+o.score,0)/i.length:0},totalScore:()=>t.responses.reduce((i,s)=>i+(s?.score||0),0),correctAnswers:()=>t.responses.filter(i=>i?.isCorrect).length,sessionSummary:()=>({questionsCompleted:t.responses.filter(i=>i).length,totalQuestions:t.responses.length,averageScore:n.averageScore(),totalTime:t.sessionMetrics.totalTime,averageResponseTime:t.sessionMetrics.averageResponseTime,successRate:t.responses.length>0?t.responses.filter(i=>i?.isCorrect).length/t.responses.filter(i=>i).length:0}),canProceed:()=>t.canContinue&&t.showContinueButton,hasValidationErrors:()=>t.validationResult&&!t.validationResult.isValid,isInProgress:()=>t.responses.filter(i=>i).length>0&&!t.isCompleted}),[t]),r=B.useMemo(()=>({setCurrentQuestion:i=>e({type:"SET_CURRENT_QUESTION",payload:i}),addResponse:i=>e({type:"ADD_RESPONSE",payload:i}),setFeedback:(i,s)=>e({type:"SET_FEEDBACK",payload:{show:i,response:s}}),setContinueState:(i,s)=>e({type:"SET_CONTINUE_STATE",payload:{canContinue:i,showButton:s}}),setLearningQuote:i=>e({type:"SET_LEARNING_QUOTE",payload:i}),setCompletion:i=>e({type:"SET_COMPLETION",payload:i}),setRenderingMode:i=>e({type:"SET_RENDERING_MODE",payload:i}),setValidation:i=>e({type:"SET_VALIDATION",payload:i}),updateTiming:i=>e({type:"SET_TIMING",payload:i}),updateMetrics:i=>e({type:"UPDATE_METRICS",payload:i}),resetBlock:()=>e({type:"RESET_BLOCK"})}),[]);return{state:t,dispatch:e,selectors:n,actions:r}},vce=(t,e,n)=>{if(t){const r=["Outstanding work! You truly understand this concept.","Brilliant! Your mastery of this topic is impressive.","Exceptional performance! Keep up the excellent work.","Perfect! You've demonstrated deep understanding.","Excellent! Your analytical skills are sharp."],i=["Great job! You're doing well with this material.","Nice work! You're building solid understanding.","Good effort! You're on the right track.","Well done! Keep practicing and you'll master this.","Solid work! Your progress is encouraging."];return e>=n*.85?r[Math.floor(Math.random()*r.length)]:i[Math.floor(Math.random()*i.length)]}else{const r=["Good attempt! Learning takes practice - keep going.","Nice try! Review the concepts and try again.","Keep working on it! You're building understanding.","Good effort! Consider reviewing the key concepts.","Don't give up! Learning is a process."];return r[Math.floor(Math.random()*r.length)]}},bce=(t,e,n,r)=>{const i=n.currentQuestion(r.block.questions),s=n.isLastQuestion(r.block.questions.length),o=B.useCallback((p,y,b,v)=>{const x=Date.now(),S=t.questionStartTime?.getTime()||x-1e3,_={questionId:p,type:i.type,answer:y,isCorrect:b,score:v,feedback:vce(b,v,i.level||8),timestamp:new Date,timeSpent:x-S};e.addResponse(_),b&&(v>=7?gl({particleCount:100,spread:70,origin:{y:.6},colors:["#10b981","#34d399","#6ee7b7"]}):v>=5&&gl({particleCount:50,spread:50,origin:{y:.6},colors:["#3b82f6","#60a5fa","#93c5fd"]}));const A=n.averageScore();r.onProgressUpdate?.(r.block.id,t.currentQuestionIndex+1,r.block.questions.length,A)},[t,e,n,i,r]),a=B.useCallback(()=>{if(t.canContinue)if(e.setFeedback(!1),e.setContinueState(!1,!1),s){const p=t.responses.filter(v=>v),y=p.reduce((v,x)=>v+x.score,0),b=p.length>0?y/p.length:0;if(e.setCompletion(!0),r.onComplete(r.block.id,t.responses,b),b>=7&&gl({particleCount:200,spread:100,origin:{y:.6},colors:["#fbbf24","#f59e0b","#d97706"]}),b>=6&&r.onUnlock){const v=r.block.level===2?4:r.block.level===4?6:r.block.level===6?8:null;v&&r.onUnlock(v)}}else e.setCurrentQuestion(t.currentQuestionIndex+1)},[t,e,s,n,r]),l=B.useCallback(()=>{e.resetBlock()},[e]),c=B.useCallback(()=>{const y=(t.renderingMode||"individual")==="universal"?"individual":"universal";e.setRenderingMode(y)},[t.renderingMode,e]),u=B.useCallback(()=>{if(r.onUnlock){const p=r.block.level===2?4:r.block.level===4?6:r.block.level===6?8:null;p&&r.onUnlock(p)}},[r]),d=B.useCallback(()=>{t.currentQuestionIndex>0&&(e.setCurrentQuestion(t.currentQuestionIndex-1),e.setFeedback(!1),e.setContinueState(!1,!1))},[t.currentQuestionIndex,e]),h=B.useCallback(p=>{p>=0&&p<r.block.questions.length&&(e.setCurrentQuestion(p),e.setFeedback(!1),e.setContinueState(!1,!1))},[r.block.questions.length,e]),f=B.useCallback(()=>{const p=t.responses.filter(v=>v),y=p.filter(v=>v.isCorrect).length,b=p.reduce((v,x)=>v+(x.timeSpent||0),0);return{questionsAnswered:p.length,correctAnswers:y,accuracy:p.length>0?y/p.length*100:0,averageScore:n.averageScore(),totalTime:b,averageTimePerQuestion:p.length>0?b/p.length:0}},[t.responses,n]);return{handleQuestionResponse:o,handleContinue:a,handleReset:l,handleRenderingModeToggle:c,handleNext:u,handlePreviousQuestion:d,handleJumpToQuestion:h,currentQuestion:i,isLastQuestion:s,getPerformanceSummary:f}},xce=(t,e,n,r)=>{B.useEffect(()=>{const i=new Date;n({type:"SET_TIMING",payload:{startTime:i,questionStartTime:i}}),r.useUniversalRenderer?r.enableEnhancedValidation&&r.currentQuestion?r.currentQuestion&&r.currentQuestion.id&&r.currentQuestion.type&&r.currentQuestion.question?n({type:"SET_RENDERING_MODE",payload:"universal"}):r.fallbackToIndividual?(console.warn(`Question ${r.currentQuestion?.id||"unknown"} failed validation, falling back to individual components`),n({type:"SET_RENDERING_MODE",payload:"individual"})):n({type:"SET_RENDERING_MODE",payload:"error"}):n({type:"SET_RENDERING_MODE",payload:"universal"}):n({type:"SET_RENDERING_MODE",payload:"individual"})},[n,r.useUniversalRenderer,r.enableEnhancedValidation,r.fallbackToIndividual,r.currentQuestion]),B.useEffect(()=>{n({type:"SET_TIMING",payload:{questionStartTime:new Date}}),n({type:"SET_FEEDBACK",payload:{show:!1}}),n({type:"SET_CONTINUE_STATE",payload:{canContinue:!1,showButton:!1}})},[t.currentQuestionIndex,n]),B.useEffect(()=>{if(t.showFeedback&&t.currentResponse){const i=t.currentResponse.isCorrect?3e3:5e3,s=setTimeout(()=>{e.setContinueState(!0,!0)},i);return()=>clearTimeout(s)}},[t.showFeedback,t.currentResponse,e]),B.useEffect(()=>{if(r.currentQuestion&&r.enableEnhancedValidation){const i={isValid:!!(r.currentQuestion.id&&r.currentQuestion.type&&r.currentQuestion.question),errors:[],warnings:[]};r.currentQuestion.id||i.errors.push("Missing question ID"),r.currentQuestion.type||i.errors.push("Missing question type"),r.currentQuestion.question||i.errors.push("Missing question text"),n({type:"SET_VALIDATION",payload:i})}},[r.currentQuestion,r.enableEnhancedValidation,n]),B.useEffect(()=>{if(t.startTime){const i=Date.now()-t.startTime.getTime();n({type:"UPDATE_METRICS",payload:{totalTime:i}})}},[t.currentQuestionIndex,t.startTime,n]),B.useEffect(()=>()=>{},[])},wce=({block:t,getLevelColor:e,getLevelBorderColor:n})=>m.jsx(Gt.div,{initial:{opacity:.5,scale:.95},animate:{opacity:.5,scale:.95},whileHover:{scale:.97,opacity:.6},className:"relative",children:m.jsxs("div",{className:`p-6 rounded-lg bg-gradient-to-r ${e(t.level)} opacity-50 border-2 ${n(t.level)} border-dashed`,children:[m.jsx("div",{className:"absolute top-4 right-4 bg-white/80 p-2 rounded-full shadow-md",children:m.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),m.jsxs("div",{className:"text-white/90 mb-3",children:[m.jsxs("h3",{className:"text-lg font-bold",children:["Level ",t.level," Questions"]}),m.jsxs("p",{className:"text-sm text-white/70",children:[t.totalQuestions," questions available"]})]}),m.jsxs("div",{className:"bg-white/20 p-4 rounded-lg backdrop-blur-sm",children:[m.jsx("div",{className:"flex items-center gap-2 mb-2",children:m.jsx("span",{className:"text-white/90 font-medium",children:"🔒 Locked"})}),m.jsxs("p",{className:"text-white/80 text-sm",children:["Complete Level ",t.level-2," to unlock this challenge"]})]}),m.jsxs("div",{className:"mt-4 flex items-center gap-2 text-white/70 text-xs",children:[m.jsx("div",{className:"w-3 h-3 border-2 border-white/50 rounded-full"}),m.jsx("span",{children:"Requires previous level completion"})]})]})}),Sce=({block:t,responses:e,startTime:n,renderingMode:r,getLevelColor:i,getLevelBorderColor:s,getScoreColor:o,onReset:a,onNext:l})=>{const c=e.reduce((y,b)=>y+(b?.score||0),0)/e.length,u=e.filter(y=>y?.isCorrect).length,d=n?(new Date().getTime()-n.getTime())/1e3:0,h=e.length,p=(y=>y>=7?{tier:"Excellent",emoji:"🏆",color:"text-yellow-600"}:y>=5?{tier:"Good",emoji:"🎯",color:"text-blue-600"}:y>=3?{tier:"Fair",emoji:"📈",color:"text-green-600"}:{tier:"Needs Practice",emoji:"💪",color:"text-orange-600"})(c);return m.jsxs(Gt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`p-6 rounded-lg bg-gradient-to-r ${i(t.level)} text-white border-2 ${s(t.level)}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-4xl",children:"🎉"}),m.jsxs("div",{children:[m.jsxs("h3",{className:"text-xl font-bold",children:["Level ",t.level," Completed!"]}),m.jsx("p",{className:"text-white/80 text-sm",children:"Great work on finishing this level"}),m.jsx("p",{className:"text-white/60 text-xs mt-1",children:r==="universal"?"✨ Enhanced renderer":r==="individual"?"⚡ Individual components":"🔧 Error recovery mode"})]})]}),m.jsxs("div",{className:"bg-white/20 p-3 rounded-lg backdrop-blur-sm text-center",children:[m.jsx("div",{className:"text-2xl mb-1",children:p.emoji}),m.jsx("div",{className:"text-white text-sm font-medium",children:p.tier})]})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[m.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm text-center",children:[m.jsx("div",{className:`text-lg font-bold ${o(c)}`,children:c.toFixed(1)}),m.jsx("div",{className:"text-white/80 text-xs",children:"Average Score"})]}),m.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm text-center",children:[m.jsxs("div",{className:"text-lg font-bold text-white",children:[Math.round(u/h*100),"%"]}),m.jsx("div",{className:"text-white/80 text-xs",children:"Accuracy"})]}),m.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm text-center",children:[m.jsxs("div",{className:"text-lg font-bold text-white",children:[u,"/",h]}),m.jsx("div",{className:"text-white/80 text-xs",children:"Correct"})]}),m.jsxs("div",{className:"bg-white/10 p-3 rounded-lg backdrop-blur-sm text-center",children:[m.jsxs("div",{className:"text-lg font-bold text-white",children:[Math.round(d),"s"]}),m.jsx("div",{className:"text-white/80 text-xs",children:"Total Time"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between text-white/80 text-sm mb-2",children:[m.jsx("span",{children:"Question Progress"}),m.jsxs("span",{children:[h,"/",h," Complete"]})]}),m.jsx("div",{className:"bg-white/20 rounded-full h-2 overflow-hidden",children:m.jsx(Gt.div,{initial:{width:0},animate:{width:"100%"},transition:{duration:1,ease:"easeOut"},className:"h-full bg-white/60 rounded-full"})})]}),m.jsx("div",{className:"bg-white/10 p-4 rounded-lg backdrop-blur-sm mb-6",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-lg font-medium text-white mb-2",children:c>=7?"🌟 Outstanding Achievement!":c>=5?"🎯 Great Progress Made!":c>=3?"📈 Good Effort!":"💪 Keep Practicing!"}),m.jsx("p",{className:"text-white/80 text-sm",children:c>=6?"You've unlocked the next level! Continue your learning journey.":"Try again to improve your score and unlock the next level."})]})}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[a&&m.jsx(Gt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors backdrop-blur-sm text-sm font-medium",children:"🔄 Try Again"}),l&&c>=6&&m.jsx(Gt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,className:"px-4 py-2 bg-white text-purple-600 rounded-lg hover:bg-white/90 transition-colors text-sm font-medium",children:"➡️ Next Level"})]}),m.jsx("div",{className:"mt-4 text-center",children:m.jsx("p",{className:"text-white/60 text-xs",children:c>=6?`🎉 Level ${t.level+2} is now available!`:`Score ≥ 6 to unlock Level ${t.level+2}`})})]})},kce=({block:t,currentQuestionIndex:e,responses:n,startTime:r,renderingMode:i,syncStatus:s="idle",experimentChoice:o,getCurrentAverageScore:a,getCompletionRate:l,onModeToggle:c,enableDevControls:u=!1})=>{const d=()=>{switch(s){case"saving":return"⏳";case"success":return"✅";case"error":return"❌";default:return"💾"}},h=()=>{switch(s){case"saving":return"Saving...";case"success":return"Synced";case"error":return"Sync Error";default:return"Auto-sync"}},f=r?Math.round((new Date().getTime()-r.getTime())/1e3):0;return m.jsxs("div",{className:"p-6 pb-4",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:["Level ",t.level," Questions",m.jsx("span",{className:`text-xs px-2 py-1 rounded-full text-white/90 ${i==="universal"?"bg-green-400/30":i==="individual"?"bg-blue-400/30":"bg-red-400/30"}`,children:i==="universal"?"✨ Enhanced":i==="individual"?"⚡ Individual":"🔧 Error Mode"})]}),m.jsxs("div",{className:"text-white/70 text-sm",children:["Level ",t.level," Challenge • ",o||"Interactive Learning"]})]})}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[m.jsx("span",{children:d()}),m.jsx("span",{className:"hidden sm:inline",children:h()})]}),u&&c&&m.jsx("button",{onClick:c,className:"text-xs bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded transition backdrop-blur-sm",title:"Toggle rendering mode (dev only)",children:"🔄 Mode"})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsxs("span",{className:"text-white/90 text-sm font-medium",children:["Question ",e+1," of ",t.questions.length]}),m.jsxs("span",{className:"text-white/70 text-sm",children:[Math.round(l()),"% Complete"]})]}),m.jsx("div",{className:"bg-white/20 rounded-full h-2 overflow-hidden backdrop-blur-sm",children:m.jsx(Gt.div,{initial:{width:0},animate:{width:`${(e+1)/t.questions.length*100}%`},transition:{duration:.5,ease:"easeOut"},className:"h-full bg-white/60 rounded-full"})})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsxs("div",{className:"bg-white/10 p-2 rounded-lg backdrop-blur-sm text-center",children:[m.jsx("div",{className:"text-white text-sm font-bold",children:a().toFixed(1)}),m.jsx("div",{className:"text-white/70 text-xs",children:"Avg Score"})]}),m.jsxs("div",{className:"bg-white/10 p-2 rounded-lg backdrop-blur-sm text-center",children:[m.jsxs("div",{className:"text-white text-sm font-bold",children:[n.filter(p=>p).length,"/",t.questions.length]}),m.jsx("div",{className:"text-white/70 text-xs",children:"Answered"})]}),m.jsxs("div",{className:"bg-white/10 p-2 rounded-lg backdrop-blur-sm text-center",children:[m.jsxs("div",{className:"text-white text-sm font-bold",children:[Math.floor(f/60),":",(f%60).toString().padStart(2,"0")]}),m.jsx("div",{className:"text-white/70 text-xs",children:"Time"})]})]}),a()>0&&m.jsx("div",{className:"mt-3 text-center",children:m.jsx("div",{className:"text-white/60 text-xs",children:a()>=7?"🏆 Excellent performance!":a()>=6?"🎯 On track to unlock next level":a()>=4?"📈 Good progress, keep going!":"💪 Practice makes perfect!"})})]})},Cce=({question:t,onAnswer:e,showFeedback:n=!1,disabled:r=!1})=>{const[i,s]=B.useState(null),[o,a]=B.useState(!1),l=h=>{if(o||r)return;s(h),a(!0);const f=t.options.find(b=>b.id===h),p=f?.isCorrect||!1;let y=0;p?y=t.level:f?.level&&(y=f.level),e(t.id,h,p,y)},c=h=>r&&o?i===h.id?"bg-purple-200 border-purple-500 text-purple-800 ring-2 ring-purple-300":"bg-gray-100 border-gray-300 text-gray-600":o?"bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed":i===h.id?"bg-purple-100 border-purple-500 text-purple-700 ring-2 ring-purple-200":"bg-white border-gray-300 hover:border-purple-300 hover:bg-purple-50 transition-all duration-200",u=h=>!o||!r?i===h.id?"●":"○":i===h.id?"👆":"○",d=h=>({initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1,duration:.3},whileHover:!o&&!r?{scale:1.02,x:5}:{},whileTap:!o&&!r?{scale:.98}:{}});return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:t.question}),!o&&!r&&m.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-blue-700 flex items-center gap-2",children:["🎯 ",m.jsx("strong",{children:"Choose the best answer:"})," Click on your selected option below."]})}),r&&o&&m.jsx("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-purple-700 flex items-center gap-2",children:["📝 ",m.jsx("strong",{children:"Your selection:"})," Review your answer and the feedback below."]})}),m.jsx("div",{className:"space-y-3",children:t.options.map((h,f)=>m.jsx(Gt.div,{...d(f),onClick:()=>l(h.id),className:`p-4 rounded-lg border-2 transition-all duration-200 ${c(h)} ${o||r?"cursor-not-allowed":"cursor-pointer"}`,children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl font-bold",children:u(h)}),m.jsx("span",{className:"flex-1",children:h.text}),i===h.id&&o&&m.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:"Your Answer"}),h.level&&h.level!==t.level&&m.jsxs("span",{className:"text-sm bg-yellow-100 text-yellow-700 px-2 py-1 rounded",children:["Partial Credit: Level ",h.level]})]})},h.id))}),m.jsxs("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-600 border-t border-gray-200 pt-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Level ",t.level]}),m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[t.points||t.level," points"]}),m.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded",children:t.concept})]}),o&&m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"✅ Answered"})})]}),m.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-3 border border-gray-200",children:m.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["📚 ",m.jsx("strong",{children:"Path:"})," ",t.learningPath]}),m.jsxs("span",{className:"flex items-center gap-1",children:["🎯 ",m.jsx("strong",{children:"Strand:"})," ",t.strand]}),t.keywords&&t.keywords.length>0&&m.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["🏷️ ",m.jsx("strong",{children:"Keywords:"})]}),t.keywords.slice(0,3).map((h,f)=>m.jsx("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs",children:h},f)),t.keywords.length>3&&m.jsxs("span",{className:"text-gray-500",children:["+",t.keywords.length-3," more"]})]})]})}),!o&&!r&&m.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[m.jsxs("h6",{className:"font-semibold text-green-800 mb-1 flex items-center gap-2",children:[m.jsx("span",{children:"💡"}),"Multiple Choice Tips:"]}),m.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[m.jsx("li",{children:"• Read all options carefully before selecting"}),m.jsx("li",{children:"• Look for key scientific terms and concepts"}),m.jsx("li",{children:"• Eliminate obviously incorrect answers first"}),m.jsx("li",{children:"• Consider the specific level and context of the question"})]})]}),m.jsx("div",{className:"sr-only","aria-live":"polite",children:o&&m.jsxs("span",{children:["Multiple choice question answered. Selected option: ",t.options.find(h=>h.id===i)?.text||"Unknown"]})})]})},_ce=({question:t,onAnswer:e,showFeedback:n=!1,disabled:r=!1})=>{const[i,s]=B.useState({}),[o,a]=B.useState(!1);B.useEffect(()=>{const p={};t.blanks.forEach(y=>{p[y.id]=""}),s(p)},[t]);const l=(p,y)=>{o||r||s(b=>({...b,[p]:y}))},c=()=>{if(o||r)return;a(!0);let p=0;t.blanks.forEach(x=>{const S=i[x.id]?.trim().toLowerCase()||"";x.correctAnswers.some(A=>x.caseSensitive?A===i[x.id]?.trim():A.toLowerCase()===S)&&p++});const y=p/t.blanks.length;let b=0;y>=.9?b=t.level:y>=.7?b=Math.max(t.level-1,0):y>=.5?b=Math.max(t.level-2,0):y>=.3&&(b=Math.max(t.level-3,0));const v=y>=.7;e(t.id,i,v,b)},u=p=>{let y="mx-2 px-3 py-2 border-2 bg-white focus:outline-none min-w-[120px] text-center font-medium transition-all duration-200 rounded-lg";return r&&o?y+=" border-purple-500 bg-purple-50 text-purple-800":o?y+=" border-gray-400 bg-gray-100 text-gray-600 cursor-not-allowed":y+=" border-gray-400 hover:border-purple-400 focus:border-purple-500 focus:ring-2 focus:ring-purple-200",y},d=()=>{const p=t.text.split(/{blank}/g),y=[];let b=0;return p.forEach((v,x)=>{if(v&&y.push(m.jsx("span",{className:"text-gray-800",children:v},`text-${x}`)),x<p.length-1&&b<t.blanks.length){const S=t.blanks[b];y.push(m.jsxs("div",{className:"inline-block relative",children:[m.jsx("input",{type:"text",value:i[S.id]||"",onChange:_=>l(S.id,_.target.value),disabled:o||r,className:u(S.id),placeholder:`Blank ${b+1}`,onKeyDown:_=>{_.key==="Enter"&&!o&&!r&&h&&c()}}),r&&o&&m.jsx("span",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:"Your Answer"})]},`blank-${b}`)),b++}}),y},h=t.blanks.every(p=>i[p.id]?.trim().length>0),f=()=>t.blanks.filter(p=>i[p.id]?.trim().length>0).length;return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Fill in the blanks:"}),!o&&!r&&m.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-sm text-blue-700 flex items-center gap-2",children:["🎯 ",m.jsx("strong",{children:"Instructions:"})," Complete each blank with the appropriate term or phrase."]}),m.jsxs("div",{className:"text-sm text-blue-600 bg-white px-3 py-1 rounded-full",children:[f(),"/",t.blanks.length," completed"]})]})}),r&&o&&m.jsx("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-purple-700 flex items-center gap-2",children:["📝 ",m.jsx("strong",{children:"Your answers:"})," Review your responses and the feedback below."]})}),m.jsx("div",{className:"text-lg leading-relaxed mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:d()}),t.blanks.some(p=>p.hints&&p.hints.length>0)&&!o&&!r&&m.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg mb-4",children:[m.jsx("h5",{className:"font-semibold text-yellow-800 mb-3 flex items-center gap-2",children:"💡 Hints:"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.blanks.map((p,y)=>p.hints&&p.hints.length>0&&m.jsxs("div",{className:"text-sm",children:[m.jsxs("span",{className:"font-medium text-yellow-700",children:["Blank ",y+1,": "]}),m.jsx("span",{className:"text-yellow-600",children:p.hints.join(", ")})]},p.id))})]}),!o&&!r&&m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-2",children:[m.jsx("span",{children:"Progress"}),m.jsxs("span",{children:[f(),"/",t.blanks.length," blanks filled"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${f()/t.blanks.length*100}%`}})})]}),!o&&!r&&m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(Gt.button,{whileHover:{scale:h?1.05:1},whileTap:{scale:h?.95:1},onClick:c,disabled:!h,className:`px-8 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg ${h?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:h?m.jsxs("span",{className:"flex items-center gap-2",children:["Submit Answers ",m.jsx("span",{children:"📤"})]}):`Fill all ${t.blanks.length} blanks`})}),m.jsxs("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-600 border-t border-gray-200 pt-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Level ",t.level]}),m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[t.points||t.level," points"]}),m.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded",children:t.concept})]}),o&&m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"✅ Answered"})})]}),m.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-3 border border-gray-200",children:m.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["📚 ",m.jsx("strong",{children:"Path:"})," ",t.learningPath]}),m.jsxs("span",{className:"flex items-center gap-1",children:["🎯 ",m.jsx("strong",{children:"Strand:"})," ",t.strand]}),t.keywords&&t.keywords.length>0&&m.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["🏷️ ",m.jsx("strong",{children:"Keywords:"})]}),t.keywords.slice(0,3).map((p,y)=>m.jsx("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs",children:p},y)),t.keywords.length>3&&m.jsxs("span",{className:"text-gray-500",children:["+",t.keywords.length-3," more"]})]})]})}),!o&&!r&&m.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[m.jsxs("h6",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[m.jsx("span",{children:"💡"}),"Fill-in-the-Blank Tips:"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700",children:[m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"• Read the entire sentence first"}),m.jsx("li",{children:"• Consider the context and meaning"}),m.jsx("li",{children:"• Use proper scientific terminology"})]}),m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"• Check spelling and capitalization"}),m.jsx("li",{children:"• Use hints when available"}),m.jsx("li",{children:"• Press Enter to submit when ready"})]})]})]}),m.jsx("div",{className:"sr-only","aria-live":"polite",children:o&&m.jsxs("span",{children:["Fill-in-the-blank question completed. ",f()," out of ",t.blanks.length," blanks filled."]})})]})},Ace=({question:t,onAnswer:e,showFeedback:n=!1,disabled:r=!1})=>{const[i,s]=B.useState(null),[o,a]=B.useState(null),[l,c]=B.useState([]),[u,d]=B.useState(!1),h=T=>{u||r||l.some(P=>P.leftId===T)||(s(T),a(null))},f=T=>{if(u||r||!i||l.some(z=>z.rightId===T))return;a(T);const P={leftId:i,rightId:T},E=[...l,P];c(E),s(null),a(null),E.length===t.leftItems.length&&p(E)},p=T=>{if(u||r)return;d(!0);const E=T.filter(j=>t.correctMatches.some(I=>I.leftId===j.leftId&&I.rightId===j.rightId)).length/t.correctMatches.length;let z=0;E>=.9?z=t.level:E>=.7?z=Math.max(t.level-1,0):E>=.5?z=Math.max(t.level-2,0):E>=.3&&(z=Math.max(t.level-3,0));const H=E>=.7;e(t.id,T,H,z)},y=()=>{u||r||(c([]),s(null),a(null))},b=()=>{l.length>0&&!u&&!r&&p(l)},v=T=>l.some(P=>P.leftId===T),x=T=>l.some(P=>P.rightId===T),S=(T,P,E)=>{let z="p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ";return r&&u?(z+=E?"bg-purple-100 border-purple-500 text-purple-700":"bg-gray-100 border-gray-300 text-gray-600",z+=" cursor-not-allowed"):u?z+="bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed":E?z+="bg-purple-100 border-purple-500 text-purple-700 cursor-not-allowed":P==="left"&&i===T||P==="right"&&o===T?z+="bg-purple-200 border-purple-600 text-purple-800 transform scale-105 shadow-lg ring-2 ring-purple-300":z+="bg-white border-gray-300 hover:border-purple-300 hover:bg-purple-50 transform hover:scale-102",z},_=(T,P,E)=>r&&u?E?"🔗":"○":E?"🔗":P==="left"&&i===T||P==="right"&&o===T?"👆":"○",A=(T,P)=>{if(P==="left"){const E=l.find(H=>H.leftId===T);return t.rightItems.find(H=>H.id===E?.rightId)?.text}else{const E=l.find(H=>H.rightId===T);return t.leftItems.find(H=>H.id===E?.leftId)?.text}};return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:t.question}),!u&&!r&&m.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("p",{className:"text-sm text-blue-700 flex items-center gap-2",children:["🎯 ",m.jsx("strong",{children:"Instructions:"})," Click items on the left, then click their match on the right to connect them."]}),m.jsxs("div",{className:"text-sm text-blue-600 bg-white px-3 py-1 rounded-full",children:[l.length,"/",t.leftItems.length," matched"]})]}),i&&m.jsxs("div",{className:"mt-2 p-2 bg-white border border-blue-300 rounded text-sm text-blue-800",children:[m.jsx("span",{className:"font-medium",children:"Selected:"})," ",t.leftItems.find(T=>T.id===i)?.text,m.jsx("span",{className:"ml-2 text-blue-600",children:"→ Now click a match on the right"})]})]}),r&&u&&m.jsx("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-purple-700 flex items-center gap-2",children:["📝 ",m.jsx("strong",{children:"Your matches:"})," Review your connections and the feedback below."]})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"font-medium text-gray-700 mb-3 text-center bg-gray-100 py-2 rounded",children:"🔍 Click to Select"}),m.jsx("div",{className:"space-y-3",children:t.leftItems.map((T,P)=>m.jsx(Gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:P*.1},onClick:()=>h(T.id),className:S(T.id,"left",v(T.id)),children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-lg",children:_(T.id,"left",v(T.id))}),T.image&&m.jsx("img",{src:T.image,alt:"",className:"w-8 h-8 object-cover rounded"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium",children:T.text}),v(T.id)&&m.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["→ ",A(T.id,"left")]})]})]})},T.id))})]}),m.jsxs("div",{children:[m.jsx("h5",{className:"font-medium text-gray-700 mb-3 text-center bg-gray-100 py-2 rounded",children:"🎯 Then Click to Match"}),m.jsx("div",{className:"space-y-3",children:t.rightItems.map((T,P)=>m.jsx(Gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:P*.1},onClick:()=>f(T.id),className:S(T.id,"right",x(T.id)),children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-lg",children:_(T.id,"right",x(T.id))}),T.image&&m.jsx("img",{src:T.image,alt:"",className:"w-8 h-8 object-cover rounded"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium",children:T.text}),x(T.id)&&m.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["← ",A(T.id,"right")]})]})]})},T.id))})]})]}),l.length>0&&m.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsxs("h5",{className:"font-medium text-gray-700 mb-3 flex items-center gap-2",children:["🔗 Current Matches",m.jsxs("span",{className:"text-sm bg-gray-200 text-gray-600 px-2 py-1 rounded",children:[l.length,"/",t.leftItems.length]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:l.map((T,P)=>{const E=t.leftItems.find(H=>H.id===T.leftId),z=t.rightItems.find(H=>H.id===T.rightId);return m.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 bg-white border border-gray-200 rounded-lg",children:[m.jsx("span",{className:"truncate max-w-[120px] font-medium",children:E?.text}),m.jsx("span",{className:"text-purple-500 text-lg",children:"↔"}),m.jsx("span",{className:"truncate max-w-[120px] font-medium",children:z?.text})]},P)})})]}),!u&&!r&&m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-2",children:[m.jsx("span",{children:"Matching Progress"}),m.jsxs("span",{children:[l.length,"/",t.leftItems.length," pairs created"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:m.jsx("div",{className:"bg-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${l.length/t.leftItems.length*100}%`}})})]}),!u&&!r&&m.jsxs("div",{className:"flex justify-center gap-3 mb-4",children:[l.length>0&&l.length<t.leftItems.length&&m.jsxs(m.Fragment,{children:[m.jsx(Gt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"🔄 Reset All"}),m.jsxs(Gt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-lg",children:["📤 Submit Now (",l.length,"/",t.leftItems.length,")"]})]}),l.length===t.leftItems.length&&m.jsx("div",{className:"text-center p-3 bg-green-50 border border-green-200 rounded-lg",children:m.jsx("p",{className:"text-green-700 font-medium",children:"🎉 All pairs matched! Submitting automatically..."})})]}),m.jsxs("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-600 border-t border-gray-200 pt-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Level ",t.level]}),m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[t.points||t.level," points"]}),m.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded",children:t.concept})]}),u&&m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"✅ Answered"})})]}),m.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-3 border border-gray-200",children:m.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["📚 ",m.jsx("strong",{children:"Path:"})," ",t.learningPath]}),m.jsxs("span",{className:"flex items-center gap-1",children:["🎯 ",m.jsx("strong",{children:"Strand:"})," ",t.strand]}),t.keywords&&t.keywords.length>0&&m.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["🏷️ ",m.jsx("strong",{children:"Keywords:"})]}),t.keywords.slice(0,3).map((T,P)=>m.jsx("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs",children:T},P)),t.keywords.length>3&&m.jsxs("span",{className:"text-gray-500",children:["+",t.keywords.length-3," more"]})]})]})}),!u&&!r&&m.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[m.jsxs("h6",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[m.jsx("span",{children:"💡"}),"Matching Tips:"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700",children:[m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"• Read all options before matching"}),m.jsx("li",{children:"• Look for key relationships and patterns"}),m.jsx("li",{children:"• Consider scientific principles and concepts"})]}),m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"• Start with matches you're most confident about"}),m.jsx("li",{children:"• Use process of elimination"}),m.jsx("li",{children:"• You can reset and try again if needed"})]})]})]}),m.jsxs("div",{className:"sr-only","aria-live":"polite",children:[i&&m.jsxs("span",{children:["Selected ",t.leftItems.find(T=>T.id===i)?.text,". Now select a match from the right column."]}),u&&m.jsxs("span",{children:["Matching question completed. ",l.length," out of ",t.leftItems.length," pairs matched."]})]})]})},Nce=({question:t,onAnswer:e,showFeedback:n=!1,disabled:r=!1})=>{const[i,s]=B.useState(""),[o,a]=B.useState(!1),[l,c]=B.useState(0),[u,d]=B.useState(!1);B.useEffect(()=>{const x=i.trim().split(/\s+/).filter(S=>S.length>0);c(x.length)},[i]);const h=async()=>{if(!(o||!i.trim()||!y()||u||r)){a(!0),d(!0);try{const x=await d8(i,"critical-angle","strand1"),S=Math.min(8,x.level),_=S>=Math.max(t.level-2,4);e(t.id,i,_,S)}catch(x){console.error("Evaluation error:",x);const S=f(i),_=S>=Math.max(t.level-2,4);e(t.id,i,_,S)}finally{d(!1)}}},f=x=>{const S=x.toLowerCase();let _=0;const A=t.evaluationCriteria.requiredKeywords.filter(ne=>S.includes(ne.toLowerCase())),T=t.evaluationCriteria.requiredConcepts.filter(ne=>S.includes(ne.toLowerCase())),P=x.trim().split(/\s+/).length,E=!t.minWords||P>=t.minWords,z=!t.maxWords||P<=t.maxWords,H=A.length/Math.max(t.evaluationCriteria.requiredKeywords.length,1),j=T.length/Math.max(t.evaluationCriteria.requiredConcepts.length,1),I=H*4,q=j*3,F=E&&z?1:0;return H>.8&&j>.8&&(_+=.5),_=I+q+F,P>(t.minWords||20)*1.5&&(_+=.5),Math.min(8,Math.round(_*10)/10)},p=()=>t.minWords&&l<t.minWords||t.maxWords&&l>t.maxWords?"text-red-500":l>0?"text-green-500":"text-gray-500",y=()=>!(t.minWords&&l<t.minWords||t.maxWords&&l>t.maxWords),b=()=>{if(u)return"🔄 Evaluating...";if(!i.trim())return"Enter your answer";if(!y()){if(t.minWords&&l<t.minWords)return`Need ${t.minWords-l} more words`;if(t.maxWords&&l>t.maxWords)return`Remove ${l-t.maxWords} words`}return"Submit Answer"},v=()=>{const x="Type your answer here...";return t.level>=6?`${x} Use detailed explanations and scientific terminology.`:t.level>=4?`${x} Include key concepts and examples.`:`${x} Be clear and concise.`};return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800",children:t.question}),!o&&!r&&m.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[m.jsxs("h6",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[m.jsx("span",{children:"📝"}),"Writing Guidelines:"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium mb-1",children:"Include Key Terms:"}),m.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.evaluationCriteria.requiredKeywords.slice(0,4).map((x,S)=>m.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-600 rounded text-xs",children:x},S)),t.evaluationCriteria.requiredKeywords.length>4&&m.jsxs("span",{className:"text-blue-600 text-xs",children:["+",t.evaluationCriteria.requiredKeywords.length-4," more"]})]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium mb-1",children:"Address Concepts:"}),m.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.evaluationCriteria.requiredConcepts.slice(0,3).map((x,S)=>m.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-600 rounded text-xs",children:x},S)),t.evaluationCriteria.requiredConcepts.length>3&&m.jsxs("span",{className:"text-purple-600 text-xs",children:["+",t.evaluationCriteria.requiredConcepts.length-3," more"]})]})]})]})]}),(t.minWords||t.maxWords)&&m.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:["📏 ",m.jsx("strong",{children:"Word requirement:"}),t.minWords&&` At least ${t.minWords} words`,t.minWords&&t.maxWords&&" • ",t.maxWords&&` Maximum ${t.maxWords} words`]}),m.jsxs("div",{className:"text-sm",children:["Current: ",m.jsx("span",{className:`font-medium ${p()}`,children:l}),!y()&&m.jsxs("span",{className:"ml-2 text-red-500 text-xs",children:[t.minWords&&l<t.minWords&&`(need ${t.minWords-l} more)`,t.maxWords&&l>t.maxWords&&`(${l-t.maxWords} over limit)`]})]})]}),t.minWords&&m.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l>=t.minWords?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(100,l/t.minWords*100)}%`}})})]}),r&&o&&m.jsx("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-purple-700 flex items-center gap-2",children:["📝 ",m.jsx("strong",{children:"Your response:"})," Review your answer and the feedback below."]})}),m.jsxs("div",{className:"mb-4",children:[m.jsx("textarea",{value:i,onChange:x=>!o&&!r&&s(x.target.value),disabled:o||r,placeholder:v(),className:`w-full h-40 p-4 border-2 rounded-lg resize-none focus:outline-none transition-all duration-200 ${o||r?"bg-gray-100 cursor-not-allowed border-gray-300":"border-gray-300 focus:border-purple-500 hover:border-purple-300"}`,onKeyDown:x=>{x.key==="Enter"&&x.ctrlKey&&!o&&!r&&i.trim()&&y()&&h()}}),m.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:p(),children:[l," words"]}),!o&&!r&&i.trim()&&m.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:"Ctrl+Enter to submit"})]}),o&&m.jsx("span",{className:"text-xs font-medium bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"✅ Submitted"})]})]}),!o&&!r&&m.jsx("div",{className:"flex justify-center mb-4",children:m.jsxs(Gt.button,{whileHover:{scale:i.trim()&&y()&&!u?1.05:1},whileTap:{scale:i.trim()&&y()&&!u?.95:1},onClick:h,disabled:!i.trim()||!y()||u,className:`px-8 py-3 rounded-lg font-medium transition-all duration-200 flex items-center gap-3 shadow-lg ${i.trim()&&y()&&!u?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[u&&m.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),m.jsx("span",{children:b()}),i.trim()&&y()&&!u&&m.jsx("span",{className:"text-purple-200",children:"📤"})]})}),m.jsxs("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-600 border-t border-gray-200 pt-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Level ",t.level]}),m.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[t.points||t.level," points"]}),m.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded",children:t.concept})]}),o&&m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:"✅ Answered"})})]}),m.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 rounded-lg p-3 border border-gray-200",children:m.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["📚 ",m.jsx("strong",{children:"Path:"})," ",t.learningPath]}),m.jsxs("span",{className:"flex items-center gap-1",children:["🎯 ",m.jsx("strong",{children:"Strand:"})," ",t.strand]}),t.keywords&&t.keywords.length>0&&m.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[m.jsxs("span",{className:"flex items-center gap-1",children:["🏷️ ",m.jsx("strong",{children:"Keywords:"})]}),t.keywords.slice(0,3).map((x,S)=>m.jsx("span",{className:"bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs",children:x},S)),t.keywords.length>3&&m.jsxs("span",{className:"text-gray-500",children:["+",t.keywords.length-3," more"]})]})]})}),!o&&!r&&m.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[m.jsxs("h6",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[m.jsx("span",{children:"💡"}),"Short Answer Tips:"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-700",children:[m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"• Use specific scientific terminology"}),m.jsx("li",{children:"• Provide clear explanations and examples"}),m.jsx("li",{children:"• Address all parts of the question"})]}),m.jsxs("ul",{className:"space-y-1",children:[m.jsx("li",{children:"• Support your points with evidence"}),m.jsx("li",{children:"• Be concise but comprehensive"}),m.jsx("li",{children:"• Check spelling and grammar"})]})]})]}),m.jsxs("div",{className:"sr-only","aria-live":"polite",children:[o&&m.jsxs("span",{children:["Short answer question submitted with ",l," words."]}),u&&m.jsx("span",{children:"Evaluating your response, please wait."})]})]})},Tce=({question:t,questionIndex:e,onAnswer:n,previousResponse:r,disabled:i=!1,showFeedback:s=!0,renderingMode:o,useUniversalRenderer:a=!1,enableEnhancedValidation:l=!1,fallbackToIndividual:c=!0,onRenderingModeChange:u})=>{const d=_=>_.type==="mcq"&&"options"in _&&Array.isArray(_.options),h=_=>_.type==="fill-blank"&&("text"in _||"blanks"in _),f=_=>_.type==="match-click"&&"leftItems"in _&&"rightItems"in _,p=_=>_.type==="short-answer"&&"evaluationCriteria"in _,y=()=>{const _={onAnswer:n,showFeedback:s,disabled:i,previousResponse:r};try{switch(t.type){case"mcq":return d(t)?m.jsx(Cce,{..._,question:t}):b("MCQ","options array");case"fill-blank":return h(t)?m.jsx(_ce,{..._,question:t}):b("Fill-in-the-blank","text and blanks");case"match-click":return f(t)?m.jsx(Ace,{..._,question:t}):b("Match-click","leftItems and rightItems arrays");case"short-answer":return p(t)?m.jsx(Nce,{..._,question:t}):b("Short answer","evaluationCriteria");default:return m.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[m.jsx("h4",{className:"text-gray-800 font-semibold mb-2",children:"❓ Unsupported Question Type"}),m.jsxs("p",{className:"text-gray-700 text-sm",children:['Question type "',t.type||"unknown",'" is not supported by individual components.']}),a&&m.jsx("button",{onClick:()=>u?.("universal"),className:"mt-2 text-sm bg-purple-100 hover:bg-purple-200 text-purple-800 px-3 py-1 rounded transition",children:"Try Universal Renderer"})]})}}catch(A){return console.error("Error rendering individual question:",A),m.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[m.jsx("h4",{className:"text-red-800 font-semibold mb-2",children:"⚠️ Rendering Error"}),m.jsxs("p",{className:"text-red-700 text-sm mb-3",children:["Failed to render question component: ",A.message]}),m.jsxs("div",{className:"text-xs text-red-600 bg-red-100 p-2 rounded font-mono",children:["Question ID: ",t.id,m.jsx("br",{}),"Type: ",t.type,m.jsx("br",{}),"Available properties: ",Object.keys(t).join(", ")]})]})}},b=(_,A)=>m.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[m.jsx("h4",{className:"text-yellow-800 font-semibold mb-2",children:"⚠️ Question Type Mismatch"}),m.jsxs("p",{className:"text-yellow-700 text-sm mb-3",children:['This question is marked as "',_,'" but is missing or has invalid property: ',A]}),m.jsxs("div",{className:"text-xs text-yellow-600 bg-yellow-100 p-2 rounded font-mono",children:["Question ID: ",t.id,m.jsx("br",{}),"Type: ",t.type,m.jsx("br",{}),"Available properties: ",Object.keys(t).join(", "),m.jsx("br",{}),"Has explanation: ","explanation"in t?"✓":"✗"]}),l&&m.jsx("div",{className:"mt-2 text-xs text-yellow-700",children:"💡 This suggests a type system mismatch. Check that all question interfaces include required properties."})]}),v=()=>{try{return m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute top-0 right-0 bg-green-100 text-green-800 text-xs px-2 py-1 rounded-bl-lg z-10",children:"✨ Enhanced"}),m.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[m.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[m.jsx("span",{className:"text-blue-600 text-lg",children:"ℹ️"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-blue-800 font-semibold mb-1",children:"Universal Renderer"}),m.jsx("p",{className:"text-blue-700 text-sm",children:"Enhanced rendering with type-safe individual components using questionSystem types."})]})]}),m.jsx("div",{className:"bg-white rounded p-4 border",children:y()}),!1,m.jsx("div",{className:"mt-3 text-center",children:m.jsx("button",{onClick:()=>u?.("standard"),className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-1 rounded transition",children:"Switch to Standard Mode"})})]})]})}catch(_){return console.error("Universal renderer failed:",_),c?(u?.("standard"),y()):m.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[m.jsx("h4",{className:"text-yellow-800 font-semibold mb-2",children:"🔧 Rendering Error"}),m.jsx("p",{className:"text-yellow-700 text-sm",children:"Universal renderer failed. Please try refreshing the page."})]})}},x=()=>m.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[m.jsx("h4",{className:"text-red-800 font-semibold mb-2",children:"⚠️ Question Error"}),m.jsx("p",{className:"text-red-700 text-sm mb-3",children:"This question has invalid data and cannot be displayed."}),m.jsx("div",{className:"text-xs text-red-600 bg-red-100 p-2 rounded font-mono mb-3",children:"Question validation failed. Expected properties may be missing."}),m.jsx("button",{onClick:()=>u?.("standard"),className:"text-sm bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded transition",children:"Try Standard Renderer"})]}),S=()=>t?o==="error"?x():o==="universal"?v():y():m.jsx("div",{className:"p-4 text-center text-gray-500",children:"No question available to display."});return m.jsx(jv,{mode:"wait",children:m.jsxs(Gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white mx-6 mb-6 rounded-lg p-6 text-gray-800 shadow-lg",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:["Question ",e+1]}),m.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:t.type.replace("-"," ").replace(/\b\w/g,_=>_.toUpperCase())}),m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o==="universal"?"bg-green-100 text-green-700":o==="standard"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:o==="universal"?"✨ Enhanced":o==="standard"?"⚡ Standard":"⚠ Error"}),l&&m.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.type==="mcq"&&d(t)||t.type==="fill-blank"&&h(t)||t.type==="match-click"&&f(t)||t.type==="short-answer"&&p(t)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.type==="mcq"&&d(t)||t.type==="fill-blank"&&h(t)||t.type==="match-click"&&f(t)||t.type==="short-answer"&&p(t)?"✓ Valid Type":"⚠ Type Mismatch"}),l&&m.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${"explanation"in t?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:"explanation"in t?"✓ Has Explanation":"⚠ Missing Explanation"})]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[m.jsxs("span",{children:[t.points||t.level," points"]}),!1]})]}),S(),m.jsxs("div",{className:"sr-only","aria-live":"polite",children:["Question ",e+1,": ",t.question]})]},e)})},Ece=({currentResponse:t,currentQuestion:e,showFeedback:n,isLastQuestion:r,onContinue:i,disabled:s=!1})=>{if(!n||!t)return null;const o=c=>c>=7?"text-green-600":c>=5?"text-blue-600":c>=3?"text-yellow-600":"text-red-600",l=((c,u)=>u?c>=7?{text:"Outstanding!",emoji:"🏆"}:c>=5?{text:"Great job!",emoji:"🎯"}:{text:"Well done!",emoji:"✅"}:c>=3?{text:"Good attempt!",emoji:"💪"}:{text:"Keep trying!",emoji:"📚"})(t.score,t.isCorrect);return m.jsxs(Gt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:`mt-4 p-4 rounded-lg border-2 ${t.isCorrect?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:l.emoji}),m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold text-lg",children:l.text}),m.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.jsxs("span",{className:`font-bold ${o(t.score)}`,children:["Score: ",t.score,"/",e.level||e.points||8]}),t.timeSpent&&m.jsxs("span",{className:"text-sm opacity-75",children:["• ",Math.round(t.timeSpent/1e3),"s"]})]})]})]}),m.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.isCorrect?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.isCorrect?"Correct":"Incorrect"})]}),m.jsxs("div",{className:"mb-4",children:[t.feedback&&m.jsx("p",{className:"mb-3 leading-relaxed",children:t.feedback}),e.explanation&&m.jsxs("div",{className:"bg-white/50 p-3 rounded-lg border border-current border-opacity-20",children:[m.jsx("h5",{className:"font-medium mb-2 flex items-center gap-1",children:"💡 Explanation"}),m.jsx("p",{className:"text-sm opacity-90 leading-relaxed",children:e.explanation})]}),!t.isCorrect&&e.type==="mcq"&&m.jsxs("div",{className:"mt-3 bg-white/50 p-3 rounded-lg border border-current border-opacity-20",children:[m.jsx("h5",{className:"font-medium mb-2 flex items-center gap-1",children:"🔍 Your Answer Analysis"}),m.jsxs("p",{className:"text-sm opacity-90",children:["You selected: ",m.jsx("strong",{children:t.answer}),m.jsx("br",{}),m.jsx("span",{className:"text-xs opacity-75",children:"Check the explanation above for the correct approach"})]})]}),e.hint&&!t.isCorrect&&m.jsxs("div",{className:"mt-3 bg-blue-50 p-3 rounded-lg border border-blue-200",children:[m.jsx("h5",{className:"font-medium mb-2 text-blue-800 flex items-center gap-1",children:"💭 Learning Tip"}),m.jsx("p",{className:"text-sm text-blue-700 leading-relaxed",children:e.hint})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 text-sm opacity-75",children:[m.jsx("span",{children:"Progress:"}),m.jsx("div",{className:"w-20 h-1 bg-white/50 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-current rounded-full transition-all duration-500",style:{width:`${t.isCorrect?100:50}%`}})})]}),m.jsx(Gt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,disabled:s,className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${t.isCorrect?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"} ${s?"opacity-50 cursor-not-allowed":""}`,children:r?m.jsx(m.Fragment,{children:"🎉 Complete Level"}):m.jsx(m.Fragment,{children:"Next Question →"})})]}),m.jsxs("div",{className:"sr-only","aria-live":"polite",children:[t.isCorrect?"Answer correct":"Answer incorrect",". Score: ",t.score," out of ",e.level||e.points||8,".",t.feedback]})]})},Pce=t=>{const{block:e}=t,{state:n,actions:r,selectors:i,dispatch:s}=yce(),o=bce(n,r,i,t);xce(n,r,s,t);const a=f=>({2:"from-purple-200 to-purple-300",4:"from-purple-300 to-purple-400",6:"from-purple-400 to-purple-500",8:"from-purple-500 to-purple-600"})[f]||"from-gray-200 to-gray-300",l=f=>({2:"border-purple-300",4:"border-purple-400",6:"border-purple-500",8:"border-purple-600"})[f]||"border-gray-300",c=f=>f>=7?"text-green-600":f>=5?"text-blue-600":f>=3?"text-yellow-600":"text-red-600",u=()=>i.averageScore(),d=()=>i.completionRate(e.questions.length),h=i.isLastQuestion(e.questions.length);return e.unlocked?n.isCompleted?m.jsx(Sce,{block:e,responses:n.responses,startTime:n.startTime,renderingMode:n.renderingMode,getLevelColor:a,getLevelBorderColor:l,getScoreColor:c,onReset:o.handleReset,onNext:o.handleNext}):m.jsxs(Gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`rounded-lg bg-gradient-to-r ${a(e.level)} shadow-xl border-2 ${l(e.level)} overflow-hidden`,children:[m.jsx(kce,{block:e,currentQuestionIndex:n.currentQuestionIndex,responses:n.responses,startTime:n.startTime,renderingMode:n.renderingMode,syncStatus:t.syncStatus,experimentChoice:t.experimentChoice,getCurrentAverageScore:u,getCompletionRate:d,onModeToggle:o.handleRenderingModeToggle,enableDevControls:!1}),m.jsx(Tce,{question:o.currentQuestion,questionIndex:n.currentQuestionIndex,onAnswer:o.handleQuestionResponse,previousResponse:n.responses[n.currentQuestionIndex],disabled:n.showFeedback,showFeedback:n.showFeedback,renderingMode:n.renderingMode,useUniversalRenderer:t.useUniversalRenderer,enableEnhancedValidation:t.enableEnhancedValidation,fallbackToIndividual:t.fallbackToIndividual,onRenderingModeChange:r.setRenderingMode}),m.jsx(Ece,{currentResponse:n.responses[n.currentQuestionIndex],currentQuestion:o.currentQuestion,showFeedback:n.showFeedback,isLastQuestion:h,onContinue:o.handleContinue,disabled:!1}),m.jsx("div",{className:"sr-only","aria-live":"polite",children:n.showFeedback&&n.responses[n.currentQuestionIndex]&&m.jsxs("span",{children:["Question ",n.currentQuestionIndex+1," of ",e.questions.length," ",n.responses[n.currentQuestionIndex].isCorrect?"answered correctly":"answered incorrectly",".",h?"Completing level.":"Moving to next question."]})})]}):m.jsx(wce,{block:e,getLevelColor:a,getLevelBorderColor:l})},Mce={define:["Give precise, accurate definitions using appropriate scientific vocabulary","Include key characteristics and distinguishing features","Use clear, concise language that demonstrates understanding","Avoid circular definitions or overly complex explanations","Provide context for when and where the term is used","Include units of measurement where appropriate","Connect the definition to related concepts","Use examples to clarify the meaning when helpful"],describe:["Provide detailed accounts including relevant characteristics","Use appropriate scientific terminology consistently","Include specific examples and concrete details","Organize information logically and comprehensively","Focus on observable features and measurable properties","Use clear, structured language to convey information","Include sufficient detail to demonstrate understanding","Connect descriptions to underlying scientific principles"],explain:["Give detailed accounts including reasons, causes, or mechanisms","Connect underlying principles to observable phenomena","Use scientific theories and models to support explanations","Make relationships between concepts clear and explicit","Provide step-by-step reasoning where appropriate","Use analogies and examples to clarify complex concepts","Address both the 'what' and the 'why' of phenomena","Connect explanations to broader scientific understanding"],calculate:["Show all working steps clearly and systematically","Include appropriate units throughout calculations","Check answers for reasonableness and physical meaning","Express final answers to appropriate significant figures","Use correct mathematical notation and symbols","Verify calculations using alternative methods when possible","Clearly state assumptions and approximations made","Organize work in a logical, easy-to-follow format"],analyze:["Break down complex information into component parts","Examine relationships and interactions between elements","Use scientific principles to interpret data and phenomena","Draw evidence-based conclusions from your analysis","Identify patterns, trends, and significant features","Consider multiple factors and their relative importance","Use appropriate analytical tools and techniques","Present analysis in a clear, organized manner"],evaluate:["Make judgments about strengths and limitations","Use criteria and evidence to support evaluations","Consider multiple perspectives and alternative viewpoints","Reach balanced conclusions based on available evidence","Assess the reliability and validity of information","Consider the broader implications of findings","Weigh costs and benefits of different approaches","Provide recommendations based on evaluation results"]},jce={vocabulary:["Use precise scientific terminology consistently","Define technical terms when first introduced","Avoid vague or imprecise language","Demonstrate understanding through appropriate word choice","Build a strong foundation of scientific vocabulary","Practice using new terms in different contexts","Connect new vocabulary to previously learned concepts","Use scientific dictionaries and glossaries as resources"],mathematical:["Show all calculation steps systematically","Include units and check for dimensional consistency","Express uncertainty and significant figures appropriately","Verify answers using alternative methods when possible","Develop strong problem-solving strategies","Practice with a variety of problem types","Use mathematical modeling to understand physical phenomena","Connect mathematical results to physical meaning"],conceptual:["Connect multiple concepts and principles explicitly","Use analogies and examples to clarify abstract ideas","Explain the 'why' behind observations and phenomena","Make relationships between theory and application clear","Build conceptual understanding through multiple representations","Practice explaining concepts in your own words","Connect new learning to prior knowledge","Use visual and graphical representations to support understanding"],application:["Give specific, detailed examples of principles in action","Explain how scientific knowledge solves real-world problems","Consider practical constraints and limitations","Discuss implications and consequences of applications","Connect theoretical knowledge to practical situations","Explore how scientific principles are used in technology","Consider the societal impact of scientific applications","Develop problem-solving skills for novel situations"]},Lce={"critical-angle":{strand1:{level2:"Focus on basic light behavior and medium properties. Define refraction and the normal clearly. Use simple scientific vocabulary to describe how light bends when traveling between different materials.",level4:"Describe total internal reflection phenomenon clearly. Explain when it occurs using proper terminology like 'critical angle' and 'dense medium'. Connect Snell's law to TIR conditions.",level6:"Apply the critical angle formula sin(θc) = n₂/n₁ correctly. Show mathematical working step-by-step with proper units. Explain the physical meaning behind the calculation results.",level8:"Analyze complex scenarios like diamond brilliance and fiber optic design. Calculate critical angles and explain applications comprehensively with scientific reasoning and real-world implications."},strand2:{level2:"Identify basic TIR conditions clearly. State when light undergoes total internal reflection in simple terms. Focus on the two main requirements: material density and angle.",level4:"Describe what happens at the critical angle. Compare different scenarios of light behavior at interfaces. Explain why the refracted ray travels at 90° to the normal at critical angle.",level6:"Explain TIR physics using Snell's law. Show why sin(θ₂) > 1 is mathematically impossible beyond critical angle. Connect mathematical constraints to physical reality.",level8:"Evaluate wavelength dependence effects on critical angles. Analyze dispersion and chromatic effects in real materials. Consider temperature and pressure influences on optical properties."},strand3:{level2:"List everyday TIR applications like fiber optics and diamonds. Give familiar, concrete examples that students can relate to their daily experiences.",level4:"Describe how TIR enables fiber optic communication and diamond brilliance. Explain advantages over copper cables and other alternatives clearly.",level6:"Explain physics behind medical endoscopes and optical prisms in detail. Justify why TIR is chosen over alternatives using scientific principles and practical considerations.",level8:"Analyze multiple TIR technologies comprehensively. Evaluate both advantages and limitations in real systems. Consider societal impact and future technological developments."},strand4:{level2:"Use given formulas correctly like v = c/n for light speed calculations. Include proper units and show basic calculations clearly with step-by-step working.",level4:"Calculate critical angles using sin(θc) = n₂/n₁. Compare incident angles with critical angles to determine if TIR occurs. Show all mathematical steps.",level6:"Solve complex fiber optic problems involving core-cladding interfaces. Calculate critical angles and explain light guidance mechanisms using both mathematics and physics.",level8:"Design comprehensive experiments for measuring refractive indices. Include detailed apparatus lists, systematic procedures, thorough error analysis, and realistic improvement suggestions."}},"fiber-optics":{strand1:{level2:"Identify fiber components: core, cladding, protective coating. Describe basic light guidance using total internal reflection principles in simple, clear terms.",level4:"Explain refractive index differences between core and cladding materials. Describe numerical aperture and acceptance angle concepts with appropriate technical vocabulary.",level6:"Compare single-mode vs multimode fibers systematically. Analyze how core diameter affects light propagation, bandwidth, and overall system performance.",level8:"Evaluate fiber design trade-offs comprehensively. Analyze step-index vs graded-index designs for different applications, considering performance, cost, and complexity factors."},strand2:{level2:"List system components: LEDs/lasers, optical fibers, photodetectors. Describe electrical-to-optical signal conversion processes in basic terms.",level4:"Explain optical amplifiers and WDM (Wavelength Division Multiplexing) technology. Describe how multiple wavelengths can share the same fiber simultaneously.",level6:"Analyze WDM impact on network capacity and efficiency. Compare LEDs vs laser diodes for different transmission distance and speed requirements.",level8:"Evaluate emerging technologies like coherent detection and advanced modulation formats. Analyze current system limitations and propose future solutions."},strand3:{level2:"List major applications: high-speed internet, medical endoscopy, industrial sensing. Give concrete examples of fiber optic devices in everyday life.",level4:"Describe fiber advantages for global telecommunications infrastructure. Explain benefits in medical diagnostics and environmental sensing applications.",level6:"Analyze societal impact on education, healthcare, and economic development. Evaluate environmental benefits compared to traditional copper-based systems.",level8:"Evaluate fiber optics' role in emerging technologies like 5G networks, IoT, and smart cities. Analyze infrastructure challenges and global accessibility issues."},strand4:{level2:"Identify basic design factors: minimum bend radius, signal loss management, environmental protection requirements. Use appropriate engineering terminology.",level4:"Describe performance-cost trade-offs in system design decisions. Consider single-mode vs multimode fiber choices for different applications and budgets.",level6:"Analyze undersea cable engineering challenges including pressure, corrosion, and reliability. Evaluate maintenance strategies for large-scale fiber networks.",level8:"Design comprehensive smart city fiber architectures. Consider sustainability, scalability, security, and future technology adaptation in your designs."}}},Oce={level2:{focus:"Basic recall and simple understanding of fundamental concepts",commandTerms:["state","list","identify","define","name"],expectations:"Use simple scientific vocabulary correctly. Give concrete, familiar examples. State facts clearly without complex explanations.",tipFormat:"Start with basic concepts and build understanding gradually. Use familiar examples from everyday life. Keep explanations simple but scientifically accurate.",assessmentFocus:"Factual knowledge, basic terminology, simple observations"},level4:{focus:"Comprehension and basic application of scientific principles",commandTerms:["describe","explain","outline","compare","summarize"],expectations:"Use appropriate scientific terminology consistently. Explain processes clearly with logical organization. Make simple connections between concepts.",tipFormat:"Describe phenomena clearly using proper scientific language. Explain how things work with clear cause-and-effect relationships.",assessmentFocus:"Understanding processes, making connections, applying knowledge to familiar situations"},level6:{focus:"Analysis and detailed application with mathematical components",commandTerms:["analyze","explain","calculate","justify","predict"],expectations:"Show mathematical working clearly. Connect multiple concepts systematically. Justify choices with scientific evidence and reasoning.",tipFormat:"Apply formulas correctly with full working shown. Analyze complex scenarios systematically. Connect theory to practical applications.",assessmentFocus:"Problem-solving, mathematical application, detailed analysis, scientific reasoning"},level8:{focus:"Synthesis, evaluation, and innovation with comprehensive understanding",commandTerms:["evaluate","design","synthesize","critique","assess"],expectations:"Design comprehensive solutions and experiments. Evaluate multiple factors and alternatives. Synthesize knowledge from various sources.",tipFormat:"Design comprehensive solutions considering multiple variables. Evaluate advantages and limitations critically. Create innovative approaches to complex problems.",assessmentFocus:"Critical thinking, experimental design, evaluation of alternatives, synthesis of complex information"}},Ice={mcq:{strategy:"Read all options carefully before selecting. Eliminate obviously incorrect answers first. Look for scientific precision and accuracy in language.",commonMistakes:"Rushing to select the first reasonable answer. Not reading all options. Confusing similar-sounding scientific concepts.",improvementTips:"Practice identifying key scientific vocabulary. Learn to distinguish between similar concepts. Read questions twice to ensure understanding."},"fill-blank":{strategy:"Consider the grammatical and scientific context. Use appropriate scientific vocabulary. Check that answers make sense both grammatically and scientifically.",commonMistakes:"Using informal language instead of scientific terms. Not considering the broader context. Ignoring grammatical clues in the sentence structure.",improvementTips:"Build strong scientific vocabulary. Practice using technical terms in context. Read the complete sentence to understand the meaning."},"short-answer":{strategy:"Structure answers logically with clear introductions and conclusions. Use scientific terminology appropriately. Include specific examples and evidence.",commonMistakes:"Being too vague or general. Not using appropriate scientific vocabulary. Forgetting to provide specific examples or evidence.",improvementTips:"Plan your answer structure before writing. Use topic sentences and supporting details. Always include relevant examples."},"match-click":{strategy:"Consider all options carefully before making matches. Think about underlying scientific principles and relationships. Use process of elimination.",commonMistakes:"Making quick assumptions without considering all possibilities. Not thinking about scientific relationships. Ignoring obvious mismatches.",improvementTips:"Understand the scientific principles behind each item. Look for logical relationships. Double-check matches for scientific accuracy."}},Rce={"critical-angle":{strand1to2:"Build on basic TIR principles to understand the specific conditions and mathematical constraints that determine when the phenomenon occurs.",strand2to3:"Apply your understanding of TIR physics and conditions to analyze real-world applications and technological implementations.",strand3to4:"Use mathematical tools and experimental design skills to solve quantitative problems and investigate TIR phenomena systematically."},"fiber-optics":{strand1to2:"Expand from basic fiber principles and structure to understand complete communication systems and advanced technologies.",strand2to3:"Connect technical knowledge of fiber systems to their societal applications, global impact, and transformative effects.",strand3to4:"Apply engineering principles and design thinking to create optimal fiber optic solutions for complex real-world challenges."}},Dce={apparatus:"List all equipment needed with specific models or specifications where important. Consider safety equipment and measurement tools.",procedure:"Write clear, step-by-step instructions that another person could follow. Include safety precautions and quality control measures.",variables:"Clearly identify independent, dependent, and controlled variables. Explain how each variable will be measured or maintained.",dataCollection:"Design appropriate data tables and specify measurement precision. Plan for sufficient data points and repeated measurements.",analysis:"Describe how data will be processed and analyzed. Include appropriate graphs, calculations, and statistical considerations.",errorAnalysis:"Identify potential sources of error and their likely impact. Suggest ways to minimize errors and improve accuracy.",improvements:"Propose realistic enhancements to the experimental design based on identified limitations and error sources."},Fce={"critical-angle":{strand1:{general:["Use precise scientific vocabulary like 'refractive index' and 'critical angle'","Include the mathematical formula: sin(θc) = n₂/n₁","Explain the physical meaning behind the mathematical relationships","Connect Snell's law to the conditions for total internal reflection","Always specify the direction of light travel (dense to less dense)","Include proper units in all calculations and measurements","Reference the normal when discussing angles of incidence and refraction","Distinguish between optical density and physical density"],"level2-4":["Define total internal reflection clearly and simply","State the basic conditions: dense to less dense medium + large angle","Use correct scientific terms consistently","Give concrete examples of when TIR occurs","Explain what happens to light at different interfaces","Describe the role of the normal in measuring angles","Use simple analogies to explain complex concepts","Focus on observable phenomena and everyday examples"],"level5-6":["Show step-by-step calculations with proper units","Explain why the critical angle formula works","Connect mathematical results to physical behavior","Describe the relationship between refractive index and critical angle","Apply Snell's law to derive the critical angle formula","Analyze ray diagrams systematically","Consider the wave nature of light in explanations","Discuss the conservation of energy in TIR"],"level7-8":["Analyze how multiple factors affect critical angle measurements","Evaluate the limitations of ideal TIR theory in real materials","Synthesize connections between molecular structure and optical properties","Discuss implications for optical device design and performance","Consider temperature and pressure effects on refractive indices","Evaluate the role of surface quality and imperfections","Analyze the effects of different wavelengths (dispersion)","Design experiments to test TIR principles and measure critical angles"]},strand2:{general:["Explain the directional nature of TIR (dense to less dense only)","Use Snell's law to show why TIR has mathematical limits","Describe what happens at angles below, at, and above critical angle","Connect the physics to observable phenomena","Emphasize the mathematical impossibility of sin(θ) > 1","Discuss energy conservation during TIR","Explain the boundary conditions for electromagnetic waves","Consider the phase changes that occur during TIR"],"level2-4":["Identify the specific angle conditions for TIR","Describe what happens to light at the critical angle","Compare reflection vs refraction behavior","Use simple, clear language with correct terminology","Explain why TIR only works in one direction","Give examples of materials with different optical densities","Describe the appearance of TIR in everyday situations","Use diagrams to illustrate the concept clearly"],"level5-6":["Explain why sin(θ₂) > 1 is impossible mathematically","Predict light behavior in different scenarios using theory","Justify why TIR only works in one direction","Apply Snell's law to analyze specific cases","Calculate the critical angle for various material combinations","Analyze the transition from partial to total reflection","Discuss the intensity of reflected light in different scenarios","Explain the concept of the evanescent wave"],"level7-8":["Evaluate multiple factors affecting TIR in real materials","Analyze wavelength dependence and dispersion effects","Assess temperature and pressure influences on critical angles","Critique ideal vs real-world TIR behavior","Investigate the polarization effects in TIR","Analyze the penetration depth of evanescent waves","Evaluate the role of surface roughness and contamination","Design experiments to measure and verify TIR phenomena"]},strand3:{general:["Give specific, detailed examples of TIR applications","Explain why TIR properties make it suitable for each use","Connect physical principles to practical benefits","Discuss both advantages and limitations of TIR applications","Consider the economic and social impact of TIR technologies","Evaluate the efficiency compared to alternative technologies","Discuss the historical development of TIR applications","Consider future developments and emerging applications"],"level2-4":["List concrete examples: fiber optics, diamonds, periscopes","Describe the basic function in each application","Explain the main benefits TIR provides","Use familiar, everyday examples when possible","Connect applications to students' daily experiences","Describe how TIR replaces older technologies","Explain the basic operating principles in simple terms","Identify TIR applications in the immediate environment"],"level5-6":["Explain the physics behind each application in detail","Justify why TIR is chosen over alternatives","Describe how material properties enable specific applications","Connect refractive index values to application performance","Analyze the efficiency advantages of TIR-based systems","Compare TIR applications with competing technologies","Discuss the engineering challenges in implementing TIR","Evaluate the cost-benefit analysis of TIR solutions"],"level7-8":["Analyze multiple TIR applications comprehensively","Evaluate trade-offs and limitations in real systems","Assess societal and technological impact of TIR applications","Predict future developments and emerging applications","Critically evaluate the sustainability of TIR technologies","Analyze the global economic impact of fiber optic communications","Assess the role of TIR in addressing global challenges","Design novel applications based on TIR principles"]},strand4:{general:["Show all mathematical work clearly with proper units","Organize problem-solving steps logically","Check answers for reasonableness and physical meaning","Consider sources of experimental error and uncertainty","Use appropriate significant figures throughout calculations","Verify results using alternative methods when possible","Consider the practical limitations of theoretical models","Document assumptions made in problem-solving"],"level2-4":["Use given formulas correctly with proper substitution","Include appropriate units in all calculations","Show intermediate steps clearly","State final answers with appropriate precision","Check that calculated values make physical sense","Use dimensional analysis to verify calculations","Round answers appropriately for the given data","Clearly identify what is being calculated"],"level5-6":["Choose appropriate equations for different scenarios","Analyze complex problems systematically","Interpret results in terms of physical behavior","Consider multiple variables and their relationships","Design systematic approaches to multi-step problems","Use mathematical modeling to predict behavior","Validate theoretical predictions with known results","Consider the limitations of mathematical models"],"level7-8":["Design comprehensive experimental procedures","Evaluate sources of measurement uncertainty","Propose improvements to increase accuracy","Synthesize multiple approaches to complex problems","Perform detailed error analysis and uncertainty propagation","Design control experiments to test hypotheses","Consider statistical significance in data analysis","Develop innovative solutions to measurement challenges"]}},"fiber-optics":{strand1:{general:["Describe fiber structure clearly: core, cladding, and their functions","Explain how refractive index differences enable light guidance","Use technical terms like numerical aperture and acceptance angle appropriately","Connect fiber properties to performance characteristics","Distinguish between different types of optical fibers","Explain the relationship between fiber geometry and light propagation","Discuss the materials science aspects of fiber manufacturing","Consider the wavelength dependence of fiber properties"],"level2-4":["Identify the main components of optical fibers","Describe how light travels through fiber cores","Explain the role of total internal reflection in fibers","Use clear, accurate scientific vocabulary","Connect fiber optics to everyday communication technology","Describe the basic manufacturing process of optical fibers","Explain why glass is used for optical fibers","Identify different types of fiber optic cables"],"level5-6":["Calculate numerical aperture and acceptance angles","Explain differences between single-mode and multimode fibers","Analyze how core size affects fiber performance","Apply TIR principles to fiber design considerations","Discuss modal dispersion and its effects on bandwidth","Analyze the relationship between fiber parameters and system performance","Evaluate different fiber designs for specific applications","Consider the effects of bending and stress on fiber performance"],"level7-8":["Evaluate trade-offs in fiber design parameters","Analyze dispersion effects and their impact on performance","Synthesize optimal fiber characteristics for specific applications","Assess emerging fiber technologies and their potential","Design fiber systems for specific performance requirements","Analyze the limits of current fiber technology","Evaluate novel fiber designs and their advantages","Consider the integration of fibers with other optical components"]},strand2:{general:["Describe the complete fiber optic communication system","Explain electro-optic and opto-electronic conversions","Discuss advanced technologies like WDM and optical amplifiers","Connect component functions to overall system performance","Analyze system bandwidth and capacity limitations","Consider signal integrity and noise factors","Discuss network topology and routing considerations","Evaluate system reliability and redundancy requirements"],"level2-4":["List the main components: sources, fibers, detectors","Describe signal conversion from electrical to optical and back","Explain basic system operation clearly","Use appropriate technical terminology","Connect system components to their functions","Describe the advantages of optical over electrical signals","Explain basic networking concepts in fiber systems","Identify different types of optical sources and detectors"],"level5-6":["Explain advanced multiplexing techniques","Analyze system bandwidth and capacity limitations","Discuss optical amplification and signal processing","Apply knowledge to system design problems","Evaluate different modulation techniques","Analyze signal degradation mechanisms","Design systems for specific distance and capacity requirements","Consider the effects of nonlinear optical phenomena"],"level7-8":["Evaluate current fiber system limitations","Analyze emerging technologies and their impact","Assess future capacity and performance requirements","Synthesize solutions for next-generation systems","Design adaptive and intelligent optical networks","Evaluate the potential of new optical phenomena","Analyze the convergence of optical and wireless technologies","Consider the role of artificial intelligence in optical networks"]},strand3:{general:["Provide specific examples of fiber optic applications","Explain why fiber properties make them ideal for each use","Discuss both benefits and limitations of fiber technology","Consider societal and economic impacts of fiber optics","Evaluate the global reach and accessibility of fiber networks","Assess the environmental impact of fiber optic technology","Consider the digital divide and equity issues","Analyze the role of fiber optics in enabling other technologies"],"level2-4":["List major applications: telecommunications, medical, sensing","Describe benefits fiber optics provide in each area","Give concrete examples of fiber optic devices","Explain basic advantages over alternative technologies","Connect fiber applications to students' daily lives","Describe the impact on communication and entertainment","Explain the role in modern healthcare","Identify fiber optic components in common devices"],"level5-6":["Justify fiber optic advantages using physical principles","Explain how fiber properties enable specific applications","Analyze the transformation of communications technology","Discuss technical requirements for different applications","Evaluate the economic impact of fiber deployment","Analyze the challenges in global fiber infrastructure","Assess the role in enabling remote work and education","Consider the implications for developing nations"],"level7-8":["Evaluate societal impact of fiber optic revolution","Analyze economic and social implications globally","Assess digital divide and accessibility issues","Predict future applications and technological convergence","Critically evaluate the sustainability of global fiber networks","Analyze the geopolitical implications of fiber infrastructure","Assess the role in addressing climate change","Design strategies for equitable global fiber access"]},strand4:{general:["Consider practical engineering constraints and trade-offs","Address installation, maintenance, and lifecycle factors","Discuss cost-performance optimization strategies","Evaluate emerging design approaches and innovations","Consider environmental and sustainability factors","Analyze system reliability and fault tolerance","Evaluate scalability and future upgrade paths","Consider integration with existing infrastructure"],"level2-4":["Identify basic design requirements for fiber systems","Describe essential installation considerations","List key performance and reliability factors","Use appropriate engineering terminology","Understand basic safety requirements for fiber systems","Describe standard installation practices","Identify common failure modes and prevention strategies","Explain basic testing and commissioning procedures"],"level5-6":["Explain trade-offs between performance, cost, and complexity","Analyze installation challenges and solutions","Discuss maintenance and reliability requirements","Apply engineering principles to design problems","Optimize system design for specific requirements","Evaluate different installation methods and their applications","Design maintenance schedules and procedures","Consider the total cost of ownership in system design"],"level7-8":["Evaluate innovative fiber designs and technologies","Synthesize solutions for complex system challenges","Assess sustainability and environmental considerations","Predict future design trends and breakthrough technologies","Design resilient systems for extreme environments","Develop strategies for technology migration and upgrades","Create innovative solutions for emerging applications","Consider the integration of AI and machine learning in fiber systems"]}},commandTermSpecific:Mce,improvementStrategies:jce,tips:Lce,levelSpecificGuidance:Oce,questionTypeSpecificTips:Ice,strandProgressionTips:Rce,experimentalDesignGuidance:Dce},Bce=({currentStrand:t,experimentChoice:e,sessionCode:n,currentStudentId:r})=>{const[i,s]=B.useState({questionsAttempted:0,questionsCompleted:0,averageScore:0,timeSpent:0,strongestLevel:2,weakestLevel:2,totalAttempts:0,successRate:0}),[o,a]=B.useState(!0);B.useEffect(()=>{const u=setTimeout(()=>{s({questionsAttempted:12,questionsCompleted:8,averageScore:6.2,timeSpent:18.5,strongestLevel:6,weakestLevel:4,totalAttempts:15,successRate:73.3}),a(!1)},500);return()=>clearTimeout(u)},[t,e,r]);const l=u=>u>=7?"text-green-600":u>=5?"text-yellow-600":"text-red-600",c=u=>u>=80?"text-green-600":u>=60?"text-yellow-600":"text-red-600";return o?m.jsx("div",{className:"p-4 flex items-center justify-center",children:m.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-blue-600"}),m.jsx("span",{className:"text-sm",children:"Loading performance data..."})]})}):m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"mb-3",children:[m.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-1",children:["📊 Performance Insights - Strand ",t]}),m.jsxs("p",{className:"text-xs text-gray-600",children:["Real-time analytics for ",e," experiment"]})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[m.jsx("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"Questions"}),m.jsxs("div",{className:"text-lg font-bold text-blue-700",children:[i.questionsCompleted,"/",i.questionsAttempted]}),m.jsxs("div",{className:"text-xs text-blue-600",children:[Math.round(i.questionsCompleted/i.questionsAttempted*100),"% complete"]})]}),m.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[m.jsx("div",{className:"text-xs text-green-600 font-medium mb-1",children:"Avg Score"}),m.jsxs("div",{className:`text-lg font-bold ${l(i.averageScore)}`,children:[i.averageScore.toFixed(1),"/8"]}),m.jsx("div",{className:"text-xs text-green-600",children:i.averageScore>=6?"✨ Great!":"📚 Keep going!"})]}),m.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[m.jsx("div",{className:"text-xs text-purple-600 font-medium mb-1",children:"Time Spent"}),m.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[Math.floor(i.timeSpent),"m"]}),m.jsx("div",{className:"text-xs text-purple-600",children:i.timeSpent<20?"⚡ Efficient":"🕐 Thorough"})]}),m.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[m.jsx("div",{className:"text-xs text-yellow-600 font-medium mb-1",children:"Success Rate"}),m.jsxs("div",{className:`text-lg font-bold ${c(i.successRate)}`,children:[i.successRate.toFixed(1),"%"]}),m.jsxs("div",{className:"text-xs text-yellow-600",children:[i.totalAttempts," attempts"]})]})]}),m.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[m.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"💡 Quick Insights"}),m.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[i.averageScore<5&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-yellow-500",children:"⚠️"}),m.jsx("span",{children:"Consider reviewing the guided examples before continuing"})]}),i.strongestLevel>i.weakestLevel&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-green-500",children:"💪"}),m.jsxs("span",{children:["Strongest at Level ",i.strongestLevel,", focus on Level ",i.weakestLevel]})]}),i.successRate>80&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-blue-500",children:"🎯"}),m.jsx("span",{children:"Excellent consistency! Ready for next strand"})]})]})]})]})},zce=({currentStrand:t,experimentChoice:e,overallProgress:n,useUniversalRenderer:r=!1,renderingMode:i,syncStatus:s,enableEnhancedValidation:o=!1,showPerformanceAnalytics:a=!1,performanceInsights:l,debugMode:c=!1})=>{const[u,d]=B.useState(!1),[h,f]=B.useState(!1),[p,y]=B.useState(!1),b=()=>e==="critical-angle"?"Master critical angle principles and total internal reflection":"Explore fiber optics and light transmission technology",v=()=>e==="critical-angle"?"Critical Angles":"Fiber Optics",x=()=>{const T={saving:{icon:"💾",text:"Saving...",className:"bg-yellow-100 text-yellow-800 border border-yellow-200"},success:{icon:"✅",text:"Synced",className:"bg-green-100 text-green-800 border border-green-200"},error:{icon:"❌",text:"Error",className:"bg-red-100 text-red-800 border border-red-200"},idle:{icon:"💤",text:"Ready",className:"bg-gray-100 text-gray-700 border border-gray-200"}};return T[s]||T.idle},S=()=>{const T={standard:{icon:"⚡",text:"Standard",className:"bg-blue-100 text-blue-800 border border-blue-200"},universal:{icon:"✨",text:"Enhanced",className:"bg-green-100 text-green-800 border border-green-200"},hybrid:{icon:"🔄",text:"Hybrid",className:"bg-purple-100 text-purple-800 border border-purple-200"}};return T[i]||T.standard},_=x(),A=S();return p?m.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200 overflow-hidden",children:[m.jsx("div",{className:"px-4 py-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("h1",{className:"text-lg font-bold text-purple-900",children:["Strand ",t," Interactive Questions"]}),m.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${_.className}`,children:[_.icon," ",_.text]}),m.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${A.className}`,children:[A.icon," ",A.text]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[n,"/8"]}),m.jsx("div",{className:"text-xs text-purple-500",children:"Score"})]}),m.jsx("button",{onClick:()=>y(!1),className:"text-xs bg-purple-100 hover:bg-purple-200 text-purple-700 px-2 py-1 rounded transition-colors",title:"Expand header",children:"⬇ Expand"}),c&&m.jsx("button",{onClick:()=>f(!h),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded transition-colors",title:h?"Hide debug":"Show debug",children:"🔧"})]})]})}),c&&h&&m.jsx("div",{className:"border-t border-purple-200 bg-blue-50 px-4 py-2",children:m.jsxs("div",{className:"flex items-center justify-between text-xs",children:[m.jsx("span",{className:"font-medium text-blue-900",children:"Debug:"}),m.jsxs("div",{className:"flex gap-3 text-blue-700",children:[m.jsxs("span",{children:["Mode: ",i]}),m.jsxs("span",{children:["Universal: ",r?"On":"Off"]}),m.jsxs("span",{children:["Validation: ",o?"On":"Off"]}),l&&m.jsxs("span",{children:["Trend: ",l.trend]})]})]})})]}):m.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl shadow-md border border-purple-200 overflow-hidden",children:[m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("h1",{className:"text-3xl font-extrabold text-purple-900 leading-tight mb-2",children:["Strand ",t," Interactive Questions",r&&m.jsx("span",{className:"ml-3 text-sm font-semibold bg-green-100 text-green-800 px-3 py-1 rounded-full border border-green-200",children:"✨ Enhanced"})]}),m.jsx("p",{className:"text-lg text-purple-700 font-medium leading-relaxed mb-3",children:b()}),m.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[m.jsxs("span",{className:"text-sm text-purple-800 font-semibold",children:["Learning Path: ",m.jsx("span",{className:"font-bold",children:v()})]}),m.jsxs("span",{className:`px-3 py-1.5 rounded-md text-sm font-medium ${_.className}`,children:[_.icon," ",_.text]}),m.jsxs("span",{className:`px-3 py-1.5 rounded-md text-sm font-medium ${A.className}`,children:[A.icon," ",A.text," Mode"]}),o&&m.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1.5 rounded-md text-sm font-medium border border-blue-200",children:"✓ Validated"}),m.jsx("button",{onClick:()=>y(!0),className:"bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1.5 rounded-md text-sm font-medium border border-purple-200 transition-colors",title:"Compact header",children:"⬆ Compact"}),c&&m.jsxs("button",{onClick:()=>f(!h),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium border border-gray-300 transition-colors flex items-center gap-1",title:h?"Hide debug info":"Show debug info",children:["🔧 Debug ",h?"▼":"▶"]})]})]}),m.jsxs("div",{className:"text-right ml-6",children:[m.jsxs("div",{className:"text-5xl font-extrabold text-purple-700 leading-none",children:[n,"/8"]}),m.jsx("div",{className:"text-sm text-purple-600 font-semibold mt-1",children:"Overall Score"}),l&&m.jsxs("div",{className:"text-xs text-purple-500 mt-1 font-medium",children:["Trend: ",m.jsx("span",{className:"capitalize font-semibold",children:l.trend}),l.learningVelocity&&m.jsxs("span",{className:"block",children:["Pace: ",m.jsx("span",{className:"capitalize font-semibold",children:l.learningVelocity})]})]}),a&&l&&m.jsxs("button",{onClick:()=>d(!u),className:"mt-3 px-3 py-1.5 text-sm bg-purple-100 hover:bg-purple-200 text-purple-800 rounded-md transition-colors flex items-center gap-1 font-medium border border-purple-200",title:u?"Hide performance insights":"Show performance insights",children:["📊 Analytics ",u?"▼":"▶"]})]})]})}),c&&h&&m.jsx("div",{className:"border-t border-purple-200 bg-blue-50",children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"🔧 Developer Debug Information"}),m.jsx("button",{onClick:()=>f(!1),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Close debug panel",children:"✕"})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[m.jsx("div",{className:"font-semibold text-blue-900 mb-1",children:"Strand Info"}),m.jsxs("div",{className:"text-blue-700",children:["Current: ",t]}),m.jsxs("div",{className:"text-blue-700",children:["Progress: ",n,"/8"]}),m.jsxs("div",{className:"text-blue-700",children:["Experiment: ",e]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[m.jsx("div",{className:"font-semibold text-blue-900 mb-1",children:"System Status"}),m.jsxs("div",{className:"text-blue-700",children:["Sync: ",s]}),m.jsxs("div",{className:"text-blue-700",children:["Mode: ",i]}),m.jsxs("div",{className:"text-blue-700",children:["Universal: ",r?"Active":"Inactive"]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[m.jsx("div",{className:"font-semibold text-blue-900 mb-1",children:"Features"}),m.jsxs("div",{className:"text-blue-700",children:["Validation: ",o?"On":"Off"]}),m.jsxs("div",{className:"text-blue-700",children:["Analytics: ",a?"On":"Off"]}),m.jsxs("div",{className:"text-blue-700",children:["Debug: ",c?"On":"Off"]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[m.jsx("div",{className:"font-semibold text-blue-900 mb-1",children:"Module Status"}),m.jsx("div",{className:"text-green-700 font-medium",children:"✅ Header Extracted"}),m.jsx("div",{className:"text-green-700 font-medium",children:"✅ Type Compatibility"}),m.jsxs("div",{className:"text-blue-700",children:["Compact: ",p?"On":"Off"]})]})]}),l&&m.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-blue-200",children:[m.jsx("div",{className:"font-semibold text-blue-900 mb-2",children:"Performance Metrics"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-blue-700",children:[m.jsxs("div",{children:["Avg Score: ",m.jsx("span",{className:"font-semibold",children:l.averageScore})]}),m.jsxs("div",{children:["Levels: ",m.jsx("span",{className:"font-semibold",children:l.completedLevels})]}),m.jsxs("div",{children:["Universal Usage: ",m.jsxs("span",{className:"font-semibold",children:[l.universalUsage,"/",l.completedLevels]})]}),m.jsxs("div",{children:["Trend: ",m.jsx("span",{className:"font-semibold capitalize",children:l.trend})]}),l.totalQuestions&&m.jsxs("div",{children:["Questions: ",m.jsx("span",{className:"font-semibold",children:l.totalQuestions})]}),l.correctAnswers!==void 0&&m.jsxs("div",{children:["Correct: ",m.jsx("span",{className:"font-semibold",children:l.correctAnswers})]}),l.timeSpent&&m.jsxs("div",{children:["Time: ",m.jsxs("span",{className:"font-semibold",children:[Math.round(l.timeSpent/1e3),"s"]})]}),l.learningVelocity&&m.jsxs("div",{children:["Pace: ",m.jsx("span",{className:"font-semibold capitalize",children:l.learningVelocity})]})]})]}),m.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[m.jsx("div",{className:"font-semibold text-green-900 mb-2",children:"Type Compatibility Status"}),m.jsxs("div",{className:"text-sm text-green-700",children:["✅ Rendering Mode: ",m.jsx("span",{className:"font-mono bg-green-100 px-1 rounded",children:i})," (Compatible with index.tsx)",m.jsx("br",{}),"✅ Performance Insights: Extended interface support",m.jsx("br",{}),"✅ Props Interface: Fully aligned with parent component"]})]})]})}),a&&l&&u&&m.jsx("div",{className:"border-t border-purple-200 bg-white",children:m.jsx(Bce,{currentStrand:t,experimentChoice:e,sessionCode:"demo",currentStudentId:"demo-student"})})]})},$ce=({level:t,colors:e,isCompleted:n,isActive:r=!1,validQuestions:i,totalQuestions:s,enableEnhancedValidation:o=!1,onClick:a,isCompact:l=!1})=>{const c=()=>n?"🏆":r?"⚡":{2:"🟢",4:"🔵",6:"🟣",8:"🔴"}[t],u=()=>r?"Currently Active":n?"Completed ✓":i>0?`${i} question${i!==1?"s":""}`:"No questions",d=()=>({2:"Foundation",4:"Application",6:"Analysis",8:"Mastery"})[t],h=()=>i===0?"opacity-50 cursor-not-allowed":r?`${e.base} ${e.hover} shadow-xl border-4 transform scale-105`:n?`${e.completed} shadow-lg`:`${e.base} ${e.hover} cursor-pointer shadow-md hover:shadow-lg`;return l?m.jsxs(Gt.button,{onClick:a,whileHover:{scale:r?1.03:1.02},whileTap:{scale:.98},className:`
          relative px-3 py-2 rounded-lg border-2 font-bold transition-all duration-300 text-left
          ${h()}
        `,disabled:i===0,children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:`text-lg font-extrabold ${r?"animate-pulse":""}`,children:["Level ",t]}),m.jsx("div",{className:"text-xs opacity-90 font-medium",children:d()})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`text-xs opacity-95 font-medium ${r?"text-yellow-200":""}`,children:u()}),m.jsx("div",{className:`text-xl ${r?"animate-bounce":""}`,children:c()})]})]}),r&&m.jsx("div",{className:"absolute inset-0 bg-yellow-300 bg-opacity-20 rounded-lg pointer-events-none animate-pulse"}),o&&i!==s&&s>0&&m.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full border border-white shadow-sm",title:`${s-i} questions filtered`}),n&&!r&&m.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full border border-white shadow-sm flex items-center justify-center",children:m.jsx("span",{className:"text-xs font-bold text-yellow-800",children:"✓"})}),i===0&&m.jsx("div",{className:"absolute inset-0 bg-gray-600 bg-opacity-60 rounded-lg flex items-center justify-center",children:m.jsx("span",{className:"text-white text-xs font-bold",children:"No Questions"})})]}):m.jsxs(Gt.button,{onClick:a,whileHover:{scale:r?1.05:1.03,y:-2},whileTap:{scale:.97},className:`
        relative p-4 rounded-xl border-2 font-bold transition-all duration-300 text-left
        ${h()}
      `,disabled:i===0,children:[r&&m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-300/30 to-orange-300/30 rounded-xl pointer-events-none animate-pulse"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"text-left flex-1",children:[m.jsxs("div",{className:`text-xl font-extrabold leading-tight ${r?"animate-pulse":""}`,children:["Level ",t]}),m.jsx("div",{className:`text-xs opacity-90 font-semibold mt-0.5 ${r?"text-yellow-200":""}`,children:d()})]}),m.jsx("div",{className:`text-3xl ml-2 ${r?"animate-bounce":""}`,children:c()})]}),m.jsx("div",{className:`text-sm opacity-95 font-medium ${r?"text-yellow-200":""}`,children:u()}),r&&m.jsx("div",{className:"mt-2 text-xs bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full font-bold inline-block",children:"⚡ In Progress"})]}),o&&i!==s&&s>0&&m.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-yellow-400 rounded-full border-2 border-white shadow-md flex items-center justify-center",title:`${s-i} questions filtered`,children:m.jsx("span",{className:"text-xs font-bold text-yellow-800",children:"!"})}),n&&!r&&m.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-400 rounded-full border-2 border-white shadow-md flex items-center justify-center",children:m.jsx("span",{className:"text-sm font-bold text-yellow-800",children:"✓"})}),r&&m.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-400 rounded-full border-2 border-white shadow-md flex items-center justify-center animate-pulse",children:m.jsx("span",{className:"text-sm font-bold text-orange-900",children:"⚡"})}),i===0&&m.jsx("div",{className:"absolute inset-0 bg-gray-600 bg-opacity-60 rounded-xl flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-white text-sm font-bold mb-1",children:"No Questions"}),m.jsx("div",{className:"text-white text-xs opacity-90",children:"Available Soon"})]})}),i>0&&!n&&m.jsx("div",{className:`absolute inset-0 ${r?"bg-yellow-300":"bg-white"} bg-opacity-0 hover:bg-opacity-10 rounded-xl transition-all duration-300 pointer-events-none`})]})},Vce=({currentStrand:t,strandQuestionData:e,enableEnhancedValidation:n=!1,validationResults:r,onStartQuestionBlock:i,getBlockStatus:s,debugMode:o=!1,activeLevel:a=null})=>{const[l,c]=Ze.useState(!1),[u,d]=Ze.useState(!1),h={2:{base:"bg-emerald-500 border-emerald-600 text-white shadow-emerald-200",hover:"hover:bg-emerald-600 hover:shadow-emerald-300",completed:"bg-emerald-600 border-emerald-700 shadow-emerald-300",active:"ring-4 ring-emerald-300 ring-opacity-50"},4:{base:"bg-blue-500 border-blue-600 text-white shadow-blue-200",hover:"hover:bg-blue-600 hover:shadow-blue-300",completed:"bg-blue-600 border-blue-700 shadow-blue-300",active:"ring-4 ring-blue-300 ring-opacity-50"},6:{base:"bg-purple-500 border-purple-600 text-white shadow-purple-200",hover:"hover:bg-purple-600 hover:shadow-purple-300",completed:"bg-purple-600 border-purple-700 shadow-purple-300",active:"ring-4 ring-purple-300 ring-opacity-50"},8:{base:"bg-rose-500 border-rose-600 text-white shadow-rose-200",hover:"hover:bg-rose-600 hover:shadow-rose-300",completed:"bg-rose-600 border-rose-700 shadow-rose-300",active:"ring-4 ring-rose-300 ring-opacity-50"}},f={2:"Basic recall and simple understanding",4:"Application in familiar contexts",6:"Analysis and evaluation in new contexts",8:"Synthesis and creation of understanding"};return m.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-200 overflow-hidden",children:[m.jsx("div",{className:"px-6 py-5 border-b border-purple-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-purple-900 leading-tight mb-1",children:"🎯 Select Your Challenge Level"}),m.jsxs("p",{className:"text-base text-purple-700 font-medium",children:["Choose a difficulty level and start practicing",a&&m.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-200 text-purple-800 rounded-md text-sm font-semibold",children:["Currently on Level ",a]})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1.5 rounded-md text-sm font-semibold border border-green-200",children:"All Levels Unlocked"}),n&&m.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1.5 rounded-md text-sm font-semibold border border-blue-200",children:"Quality Assured"}),m.jsx("button",{onClick:()=>d(!u),className:"bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1.5 rounded-md text-sm font-medium border border-purple-200 transition-colors flex items-center gap-1",title:u?"Switch to normal cards":"Switch to compact cards",children:u?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),"Normal"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Compact"]})}),o&&m.jsxs("button",{onClick:()=>c(!l),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium border border-gray-300 transition-colors",title:l?"Hide debug info":"Show debug info",children:["🔧 ",l?"▼":"▶"]})]})]})}),m.jsxs("div",{className:"p-6",children:[m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[2,4,6,8].map(p=>{const y=s(p),b=e.blocks?.find(T=>T.level===p),v=b?.questions?.length||0,x=n?b?.questions?.filter(T=>r[T.id]?.isValid!==!1)?.length||0:v,S=h[p],_=y==="completed",A=a===p;return m.jsxs("div",{className:`relative ${A?S.active:""} rounded-xl`,children:[m.jsx($ce,{level:p,colors:S,isCompleted:_,isActive:A,validQuestions:x,totalQuestions:v,enableEnhancedValidation:n,onClick:()=>i(p),isCompact:u}),A&&m.jsx("div",{className:"absolute -top-2 -left-2 bg-purple-600 text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg",children:"Active"})]},p)})}),!u&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[m.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"Understanding MYP Levels"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:Object.entries(f).map(([p,y])=>{const b=parseInt(p),v=h[b].base.split(" ")[0],x=a===b;return m.jsxs("div",{className:`flex items-center gap-3 ${x?"bg-purple-50 p-2 rounded-lg border border-purple-200":""}`,children:[m.jsx("div",{className:`w-4 h-4 rounded-full ${v} flex-shrink-0 ${x?"ring-2 ring-purple-400":""}`}),m.jsxs("span",{className:"text-gray-700",children:[m.jsxs("span",{className:`font-semibold ${x?"text-purple-900":"text-gray-900"}`,children:["Level ",p,":"]})," ",y,x&&m.jsx("span",{className:"ml-2 text-purple-600 font-bold text-xs",children:"← Currently Active"})]})]},p)})})]}),u&&m.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:m.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-gray-600",children:[m.jsxs("div",{className:`flex items-center gap-1 ${a===2?"font-bold text-purple-700":""}`,children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),m.jsx("span",{children:"Foundation"}),a===2&&m.jsx("span",{className:"text-purple-600",children:"●"})]}),m.jsxs("div",{className:`flex items-center gap-1 ${a===4?"font-bold text-purple-700":""}`,children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),m.jsx("span",{children:"Application"}),a===4&&m.jsx("span",{className:"text-purple-600",children:"●"})]}),m.jsxs("div",{className:`flex items-center gap-1 ${a===6?"font-bold text-purple-700":""}`,children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),m.jsx("span",{children:"Analysis"}),a===6&&m.jsx("span",{className:"text-purple-600",children:"●"})]}),m.jsxs("div",{className:`flex items-center gap-1 ${a===8?"font-bold text-purple-700":""}`,children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),m.jsx("span",{children:"Mastery"}),a===8&&m.jsx("span",{className:"text-purple-600",children:"●"})]})]})})]}),o&&l&&m.jsx("div",{className:"border-t border-gray-200 bg-gray-50",children:m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"🔧 Level Selection Debug"}),m.jsx("button",{onClick:()=>c(!1),className:"text-gray-600 hover:text-gray-800 transition-colors",title:"Close debug panel",children:"✕"})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[m.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"Module Status"}),m.jsx("div",{className:"text-green-700 font-medium",children:"✅ Extracted"}),m.jsxs("div",{className:"text-gray-700",children:["Mode: ",u?"Compact":"Normal"]}),m.jsxs("div",{className:"text-gray-700",children:["Active Level: ",a||"None"]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[m.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"Questions"}),m.jsxs("div",{className:"text-gray-700",children:["Total: ",e.blocks?.reduce((p,y)=>p+(y.questions?.length||0),0)||0]}),m.jsxs("div",{className:"text-gray-700",children:["Valid: ",Object.values(r).filter(p=>p.isValid).length]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[m.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"Validation"}),m.jsxs("div",{className:"text-gray-700",children:["Enabled: ",n?"Yes":"No"]}),m.jsxs("div",{className:"text-gray-700",children:["Results: ",Object.keys(r).length," checked"]})]}),m.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[m.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"Features"}),m.jsx("div",{className:"text-green-700 font-medium",children:"✅ Active Level Support"}),m.jsx("div",{className:"text-green-700 font-medium",children:"✅ Compact Mode"})]})]}),a&&m.jsxs("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[m.jsx("div",{className:"font-semibold text-purple-900 mb-2",children:"Active Level Details"}),m.jsxs("div",{className:"text-sm text-purple-700",children:["Current Level: ",m.jsx("span",{className:"font-bold",children:a}),m.jsxs("span",{className:"ml-2",children:["(",f[a],")"]})]})]})]})})]})},Uce=({currentStrand:t,experimentChoice:e,currentLevel:n,collapsed:r=!1,onToggleCollapsed:i})=>{const[s,o]=B.useState(r),[a,l]=B.useState(2),c=i?r:s,u=i||o,h=(()=>{try{const b=`strand${t}`;return HC[e]?.[b]||{}}catch(b){return console.error("❌ Error loading tips:",b),{}}})(),f=[2,4,6,8].filter(b=>{const v=`level${b}`;return h[v]&&(!n||b<=n)});if(f.length===0)return null;const p=b=>({2:{bg:"bg-emerald-500",text:"text-emerald-700",light:"bg-emerald-50",border:"border-emerald-300"},4:{bg:"bg-blue-500",text:"text-blue-700",light:"bg-blue-50",border:"border-blue-300"},6:{bg:"bg-purple-500",text:"text-purple-700",light:"bg-purple-50",border:"border-purple-300"},8:{bg:"bg-rose-500",text:"text-rose-700",light:"bg-rose-50",border:"border-rose-300"}})[b];Ze.useEffect(()=>{f.length>0&&!f.includes(a)&&l(f[0])},[f,a]);const y=h[`level${a}`];return m.jsxs("div",{className:"bg-white rounded-lg border border-yellow-200 shadow-sm mb-6",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-yellow-200 bg-gradient-to-r from-yellow-50 to-amber-50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:"💡"}),m.jsx("h3",{className:"font-semibold text-yellow-800",children:"Tips for Success"})]}),m.jsx("button",{onClick:()=>u(!c),className:"text-xs bg-yellow-100 hover:bg-yellow-200 text-yellow-700 px-2 py-1 rounded transition-colors",children:c?"Show Tips":"Hide Tips"})]}),!c&&m.jsx("div",{className:"flex gap-1",children:f.map(b=>{const v=p(b),x=a===b;return m.jsxs("button",{onClick:()=>l(b),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${x?`${v.bg} text-white shadow-sm`:`bg-white text-gray-600 hover:${v.light} hover:${v.text} border border-gray-200`}`,children:["Level ",b]},b)})})]}),m.jsx(jv,{children:!c&&y&&m.jsx(Gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"p-4",children:m.jsxs("div",{className:`p-4 rounded-lg ${p(a).light} ${p(a).border} border`,children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-xl",children:a===2?"🌱":a===4?"🔧":a===6?"⚗️":"🏆"}),m.jsxs("div",{children:[m.jsxs("span",{className:`font-bold text-sm ${p(a).text}`,children:["Level ",a]}),m.jsx("span",{className:"ml-2 text-xs bg-white/60 px-2 py-1 rounded",children:a===2?"Foundation":a===4?"Application":a===6?"Analysis":"Mastery"})]})]}),y.tip&&m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:`text-sm font-medium mb-2 ${p(a).text}`,children:"Key Guidance:"}),m.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:y.tip}})]}),y.commandTerms&&Array.isArray(y.commandTerms)&&y.commandTerms.length>0&&m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:`text-xs font-medium mb-2 ${p(a).text}`,children:"Command Terms:"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:y.commandTerms.map((b,v)=>m.jsx("span",{className:"px-2 py-1 bg-white rounded text-xs font-medium border",children:b},v))})]}),y.guidance&&m.jsxs("div",{className:"mb-3",children:[m.jsx("p",{className:`text-xs font-medium mb-2 ${p(a).text}`,children:"Strategy:"}),m.jsx("p",{className:"text-xs text-gray-600",children:y.guidance})]}),y.examples&&Array.isArray(y.examples)&&y.examples.length>0&&m.jsxs("div",{children:[m.jsx("p",{className:`text-xs font-medium mb-2 ${p(a).text}`,children:"Examples:"}),m.jsx("ul",{className:"list-disc list-inside text-xs text-gray-600 space-y-1",children:y.examples.slice(0,2).map((b,v)=>m.jsx("li",{children:b},v))})]})]})},a)}),!c&&m.jsx("div",{className:"px-4 pb-4",children:m.jsx("div",{className:"pt-3 border-t border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[m.jsxs("span",{children:[f.length," level",f.length!==1?"s":""," of guidance"]}),m.jsxs("span",{children:[e==="critical-angle"?"Critical Angle":"Fiber Optics"," • Strand ",t]})]})})})]})},qce=({currentStrand:t,experimentChoice:e,suggestions:n,collapsed:r=!0,onToggleCollapsed:i})=>{const[s,o]=B.useState(r),a=i?r:s,l=i||o;return!n||n.length===0?null:m.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[m.jsxs("div",{className:"p-4 border-b border-gray-100 cursor-pointer flex items-center justify-between hover:bg-gray-50 transition-colors",onClick:()=>l(!a),children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:"💬"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-800",children:"Helpful Suggestions"}),m.jsxs("p",{className:"text-sm text-gray-600",children:[n.length," suggestion",n.length!==1?"s":""," for improvement"]})]})]}),m.jsx(Gt.div,{animate:{rotate:a?0:180},transition:{duration:.2},className:"text-gray-400",children:"▼"})]}),m.jsx(jv,{children:!a&&m.jsx(Gt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:m.jsxs("div",{className:"p-4",children:[m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.map((c,u)=>m.jsx(Gt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:u*.1},className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-blue-600 mt-0.5",children:"💡"}),m.jsx("p",{className:"text-sm text-blue-700 flex-1",children:c})]})},u))}),m.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:m.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["Tips tailored for ",e==="critical-angle"?"Critical Angle":"Fiber Optics"," • Strand ",t]})})]})})})]})},aP=({currentStrand:t,experimentChoice:e,currentStudentId:n,sessionCode:r,onProgressUpdate:i,useUniversalRenderer:s=!1,enableEnhancedValidation:o=!0,showPerformanceAnalytics:a=!1,autoSyncEnabled:l=!0,debugMode:c=!1})=>{lm();const u=pce(),[d,h]=B.useState(null),[f,p]=B.useState(!1),[y,b]=B.useState(null),[v,x]=B.useState("standard"),[S,_]=B.useState([]),[A,T]=B.useState({}),[P,E]=B.useState(null),[z,H]=B.useState(!1),[j,I]=B.useState(!0),[q,F]=B.useState(null),{syncStatus:ne,saveResponse:Y,loadResponses:ee}=mce({studentId:n,experiment:e,sessionCode:r,strandhoot:"criteria-a-tir",currentStrand:t}),X=B.useCallback(ye=>{const ve=[],Se=[];return ye.id||ve.push("Missing question ID"),ye.type||ve.push("Missing question type"),ye.question||ve.push("Missing question text"),!ye.level&&!ye.points&&Se.push("No scoring level specified"),ye.type==="mcq"&&(!ye.options||ye.options.length<2)&&ve.push("MCQ must have at least 2 options"),ye.type==="fill-blank"&&!ye.blanks&&ve.push("Fill-blank question missing blanks array"),{isValid:ve.length===0,errors:ve,warnings:Se,score:ve.length===0?Se.length===0?10:8:0}},[]);B.useEffect(()=>{(async()=>{try{E(null);const ve=h8(t,e,yd[e]||{});if(o){const Se={};ve.blocks?.forEach(fe=>{fe.questions?.forEach(Q=>{const Re=X(Q);Se[Q.id]=Re,c&&(!Re.isValid||Re.warnings?.length>0)&&console.warn(`Question ${Q.id} validation:`,Re)})}),T(Se)}b(ve),x(s?"universal":"standard")}catch(ve){console.error("❌ Failed to load strand data:",ve),E(`Failed to load questions: ${ve.message}`);const Se=yd[e]?.[`strand${t}`];Se&&(b(Se),x("standard"))}})()},[t,e,s,o,X,c]);const ie=B.useCallback(async(ye,ve,Se)=>{try{const fe=parseInt(ye.split("level")[1])||2;u?.updateQuestionProgress&&u.updateQuestionProgress(t,ye,Se),i(t,fe,Se);const Q={blockId:ye,level:fe,strand:t,averageScore:Se,totalQuestions:ve.length,correctAnswers:ve.filter(Re=>Re.isCorrect).length,totalTime:ve.reduce((Re,Ie)=>Re+(Ie.timeSpent||0),0),renderingMode:v,timestamp:new Date().toISOString()};if(_(Re=>[...Re,Q]),Se>=7?gl({particleCount:200,spread:100,origin:{y:.6},colors:["#10b981","#34d399","#6ee7b7","#fbbf24","#f59e0b"]}):Se>=5&&gl({particleCount:100,spread:70,origin:{y:.6},colors:["#3b82f6","#60a5fa","#93c5fd"]}),l)for(const Re of ve)try{const Ie={questionId:Re.questionId||`${ye}_${Re.id||"question"}`,type:Re.type||"unknown",answer:Re.answer,isCorrect:Re.isCorrect||!1,score:Re.score||0,feedback:Re.feedback||"",timestamp:Re.timestamp||new Date,timeSpent:Re.timeSpent||0};await Y(Ie)}catch(Ie){console.error(`❌ Failed to save response ${Re.questionId}:`,Ie)}Se>=6&&F(fe+2<=8?fe+2:null),p(!0),setTimeout(()=>{p(!1),h(null)},3e3)}catch(fe){console.error("❌ Block completion error:",fe),h(null)}},[u,i,t,v,l,Y]),V=B.useCallback(ye=>{ye<=8&&(F(ye),c&&console.log(`🔓 Level ${ye} unlocked!`))},[c]),K=B.useCallback((ye,ve,Se,fe)=>{const Q=ve/Se*100;c&&console.log(`Progress: ${ye} - ${ve}/${Se} (${Math.round(Q)}%) - Score: ${fe.toFixed(1)}`)},[c]),M=B.useCallback(ye=>{if(!y)return;const ve=y.blocks?.find(Q=>Q.level===ye);if(!ve){console.error(`No block data found for level ${ye}`);return}let Se=ve.questions||[];if(o){const Q=Se.length;Se=Se.filter(Re=>{const Ie=A[Re.id];return!Ie||Ie.isValid}),c&&Se.length!==Q&&console.warn(`Filtered ${Q-Se.length} invalid questions from level ${ye}`)}if(Se.length===0){console.error(`No valid questions available for level ${ye}`);return}const fe={id:ve.id||`strand${t}_level${ye}`,level:ye,questions:Se,completed:ve.completed||!1,score:ve.score||0,unlocked:!0,attempts:ve.attempts||0,maxAttempts:ve.maxAttempts||3,completedQuestions:ve.completedQuestions||0,totalQuestions:Se.length};h(fe),F(ye),p(!1)},[y,o,A,t,c]),U=B.useCallback(ye=>{const ve=`strand${t}_level${ye}`;return u?.questionSystem?.strands?.[t]?.questionBlocks?.[ve]?.completed?"completed":"available"},[t,u]),G=B.useCallback(()=>{const ye=u?.questionSystem?.strands?.[t];if(!ye)return 0;const ve=Object.values(ye.questionBlocks||{}).filter(fe=>fe.completed);if(ve.length===0)return 0;const Se=Math.max(...ve.map(fe=>fe.score||0));return Math.min(8,Se)},[t,u]),Z=B.useCallback(()=>{try{const ye=`strand${t}`;return HC[e]?.[ye]||{}}catch(ye){return console.error("❌ Error loading tips:",ye),{}}},[t,e]),re=B.useCallback(()=>{try{return Fce[e]?.[`strand${t}`]||[]}catch(ye){return console.error("❌ Error loading suggestions:",ye),[]}},[t,e]),se=B.useCallback(()=>{if(S.length===0)return null;const ye=S.reduce((fe,Q)=>fe+Q.averageScore,0)/S.length,ve=S.reduce((fe,Q)=>fe+Q.totalTime,0),Se=ve/S.reduce((fe,Q)=>fe+Q.totalQuestions,0);return{averageScore:Math.round(ye*10)/10,completedLevels:S.length,universalUsage:S.filter(fe=>fe.renderingMode==="universal").length,totalQuestions:S.reduce((fe,Q)=>fe+Q.totalQuestions,0),correctAnswers:S.reduce((fe,Q)=>fe+Q.correctAnswers,0),timeSpent:ve,trend:ye>6?"excellent":ye>4?"good":"needs-improvement",learningVelocity:Se<3e4?"fast":Se<6e4?"steady":"methodical"}},[S]);if(P)return m.jsx("div",{className:"flex justify-center items-center h-64 bg-red-50 rounded-lg border border-red-200",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-red-600 text-xl mb-2",children:"⚠️"}),m.jsx("div",{className:"text-red-800 font-medium",children:P}),m.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Retry"})]})});if(!y)return m.jsxs("div",{className:"flex justify-center items-center h-64",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),m.jsxs("span",{className:"ml-3 text-purple-600 font-medium",children:["Loading interactive questions...",s&&m.jsx("span",{className:"text-xs block text-purple-500",children:"✨ Enhanced mode"})]})]});const ce=G(),he=Z(),ke=re(),be=se();return m.jsxs("div",{className:"space-y-6",children:[m.jsx(zce,{currentStrand:t,experimentChoice:e,overallProgress:ce,useUniversalRenderer:s,renderingMode:v,syncStatus:ne,enableEnhancedValidation:o,showPerformanceAnalytics:a,performanceInsights:be,debugMode:c}),Object.keys(he).length>0&&m.jsx(Uce,{currentStrand:t,experimentChoice:e,collapsed:z,onToggleCollapsed:H}),m.jsx(Vce,{currentStrand:t,strandQuestionData:y,enableEnhancedValidation:o,validationResults:A,onStartQuestionBlock:M,getBlockStatus:U,debugMode:c,activeLevel:q}),ke.length>0&&m.jsx(qce,{currentStrand:t,experimentChoice:e,suggestions:ke,collapsed:j,onToggleCollapsed:I}),m.jsx(jv,{mode:"wait",children:d&&m.jsxs(Gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"relative",children:[m.jsx("button",{onClick:()=>h(null),className:"absolute top-4 right-4 z-10 p-2 bg-red-100 hover:bg-red-200 rounded-full text-red-600 hover:text-red-800 transition-colors shadow-md",title:"Close questions",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsxs("div",{className:"bg-white rounded-xl border-4 border-purple-300 shadow-xl overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4",children:[m.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:["🎯 Level ",d.level," Questions - Active Learning Zone",v==="universal"&&m.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded",children:"✨ Enhanced"})]}),m.jsx("p",{className:"text-purple-100 text-sm",children:"Complete the questions below to improve your understanding"})]}),m.jsx(Pce,{block:d,onComplete:ie,onUnlock:V,onProgressUpdate:K,currentStudentId:n,sessionCode:r,experimentChoice:e,syncStatus:ne,useUniversalRenderer:v==="universal",fallbackToIndividual:!0,enableEnhancedValidation:o})]})]},`block-${d.id}`)}),f&&be&&m.jsxs(Gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-green-50 rounded-lg p-6 border border-green-200",children:[m.jsx("h4",{className:"text-lg font-bold text-green-800 mb-3 flex items-center gap-2",children:"🌟 Excellent Progress!"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-2xl font-bold text-green-600",children:be.averageScore}),m.jsx("div",{className:"text-sm text-green-700",children:"Average Score"})]}),m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[be.correctAnswers,"/",be.totalQuestions]}),m.jsx("div",{className:"text-sm text-green-700",children:"Correct Answers"})]}),m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(be.timeSpent/1e3),"s"]}),m.jsx("div",{className:"text-sm text-green-700",children:"Time Spent"})]})]}),m.jsx("p",{className:"text-green-700 mb-4",children:"Great work! You can try the next level or retry this one for an even better score."}),m.jsx("div",{className:"flex gap-3",children:m.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-medium",children:"Continue Learning"})})]}),c&&m.jsxs("details",{className:"mt-4",children:[m.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-700 p-2 bg-gray-50 rounded",children:"🔧 Developer Debug Information"}),m.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded text-xs text-gray-600 font-mono mt-1",children:[m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[m.jsx("div",{children:"✅ Modular QuestionBlock: Active"}),m.jsx("div",{children:"✅ Type Compatibility: Fixed"}),m.jsxs("div",{children:["✅ Enhanced Validation: ",Object.keys(A).length," questions checked"]}),m.jsxs("div",{children:["✅ Performance Tracking: ",S.length," completed"]}),m.jsxs("div",{children:["✅ Auto-save: ",l?"Enabled":"Disabled"]}),m.jsxs("div",{children:["Current Strand: ",t]}),m.jsxs("div",{children:["Active Level: ",q||"None"]}),m.jsxs("div",{children:["Overall Progress: ",ce,"/8"]}),m.jsxs("div",{children:["Sync Status: ",ne]}),m.jsxs("div",{children:["Rendering Mode: ",v]}),m.jsxs("div",{children:["Universal Renderer: ",s?"Enabled":"Disabled"]}),m.jsxs("div",{children:["Tips Available: ",Object.keys(he).length>0?"Yes":"No"]}),m.jsxs("div",{children:["Suggestions: ",ke.length," items"]})]}),be&&m.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-300",children:[m.jsx("div",{className:"font-semibold mb-1",children:"Performance Insights:"}),m.jsxs("div",{children:["Trend: ",be.trend," | Velocity: ",be.learningVelocity]}),m.jsxs("div",{children:["Universal Usage: ",be.universalUsage,"/",be.completedLevels," levels"]})]})]})]})]})},e2={matchedKeywords:[],matchedConcepts:[],level:0,suggestions:[]},Wce=({currentStrand:t,learningPathChoice:e,currentStudentId:n,sessionCode:r,onNext:i,onPrevious:s})=>{const o=`strand${t}`,{userInputs:a,setUserInputs:l,strandProgress:c,setStrandProgress:u}=lm(),[d,h]=B.useState("questions"),[f,p]=B.useState({}),[y,b]=B.useState(!1),[v,x]=B.useState(null),[S,_]=B.useState(!1),A=a[o]?.level8||"",T=f[o]||e2,P=B.useCallback((Y,ee,X)=>{console.log("🎯 PROGRESS UPDATE RECEIVED:",{strand:Y,level:ee,score:X,currentStrand:t}),u(ie=>{const V=[...ie],K=Y-1;if(K>=0&&K<4){const M=V[K]||0,U=Math.max(M,Math.min(8,Math.max(0,X)));return V[K]=U,console.log("📊 PROGRESS UPDATED:",{strand:Y,oldScore:M,newScore:U,fullProgress:V}),V}else return console.warn("⚠️ Invalid strand index:",K),ie})},[u]),E=B.useCallback(async Y=>{if(!Y.trim()){p(ee=>({...ee,[o]:e2})),u(ee=>{const X=[...ee];return X[t-1]=0,X});return}b(!0),console.log("🔍 STARTING EVALUATION:",{strandKey:o,learningPathChoice:e,contentLength:Y.length});try{const ee=await d8(Y,e,o);console.log("✅ EVALUATION COMPLETE:",{level:ee.level,keywords:ee.matchedKeywords.length,concepts:ee.matchedConcepts.length,suggestions:ee.suggestions.length}),p(X=>({...X,[o]:ee})),u(X=>{const ie=[...X];return ie[t-1]=ee.level,console.log("📈 EVALUATION PROGRESS UPDATE:",{strand:t,newLevel:ee.level,fullProgress:ie}),ie})}catch(ee){console.error("💥 EVALUATION ERROR:",ee),p(X=>({...X,[o]:{...e2,suggestions:["Evaluation temporarily unavailable. Content saved successfully."]}}))}finally{b(!1)}},[e,o,t,u]);B.useEffect(()=>{v&&clearTimeout(v);const Y=setTimeout(()=>{E(A)},1500);return x(Y),()=>{Y&&clearTimeout(Y)}},[A,E]),B.useEffect(()=>{(async()=>{if(!(!n||!e||!r))try{const{data:ee,error:X}=await gs.from("responses").select("strand1, strand2, strand3, strand4").eq("student_id",n).eq("experiment",e).eq("session_code",r).maybeSingle();if(X){console.error("❌ Error fetching strand data:",X);return}ee&&(console.log("📥 LOADING SAVED DATA:",ee),l({strand1:{level8:ee.strand1||""},strand2:{level8:ee.strand2||""},strand3:{level8:ee.strand3||""},strand4:{level8:ee.strand4||""}}))}catch(ee){console.error("💥 Error in fetchStrands:",ee)}})()},[n,e,r,l]);const z=B.useCallback(Y=>{console.log("✏️ EDITOR CONTENT CHANGED:",{length:Y.length,strand:t}),l(ee=>({...ee,[o]:{...ee[o],level8:Y}}))},[o,l,t]),H=Y=>Y>=7?"bg-green-100 text-green-800 border-green-300":Y>=5?"bg-blue-100 text-blue-800 border-blue-300":Y>=3?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-100 text-gray-800 border-gray-300",I=(()=>{try{return HC?.[e]?.[o]||{}}catch(Y){return console.error("❌ Error loading tips:",Y),{}}})(),q=()=>{_(!S)},ne=(()=>[{key:"questions",label:"Interactive Questions",icon:"✍️",shortLabel:"Questions",description:"Practice with guided questions"},{key:"guided",label:"Guided Example",icon:"📚",shortLabel:"Example",description:"See worked examples"},{key:"sim",label:"Simulation",icon:"🔬",shortLabel:"Sim",description:"Interactive experiments"},{key:"your",label:"Your Response",icon:"📝",shortLabel:"Response",description:"Write your answers"}])();return m.jsxs("div",{className:"strand-content-tabs bg-white border border-gray-200 rounded-lg shadow-sm",children:[m.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{children:[m.jsxs("h2",{className:"font-semibold text-lg text-purple-800",children:["Strand ",t,S&&m.jsxs("span",{className:"ml-2 text-sm font-normal text-purple-600",children:["• ",ne.find(Y=>Y.key===d)?.shortLabel]})]}),!S&&m.jsx("p",{className:"text-sm text-gray-600",children:"Navigate through tabs to explore examples, try simulations, and complete interactive questions."})]})}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-xs text-gray-600",children:"Progress:"}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("span",{className:`text-sm font-bold ${T.level>=7?"text-green-600":T.level>=5?"text-blue-600":T.level>=3?"text-yellow-600":"text-gray-500"}`,children:[T.level,"/8"]}),y&&m.jsx("span",{className:"animate-spin text-purple-500",children:"⏳"})]})]}),m.jsx("button",{onClick:q,className:"flex items-center gap-1 px-2 py-1 text-xs bg-white border border-purple-200 hover:border-purple-300 rounded-md transition-all hover:shadow-sm",title:S?"Switch to expanded view":"Switch to compact view",children:S?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),"Expand"]}):m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),"Compact"]})})]})]})}),S&&m.jsxs("div",{className:"px-4 py-3",children:[m.jsx("div",{className:"flex gap-1 mb-3",children:ne.map(Y=>m.jsxs("button",{className:`flex-1 px-2 py-1.5 text-xs font-medium rounded-md transition-all ${d===Y.key?"bg-purple-100 text-purple-700 border border-purple-300":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-transparent"}`,onClick:()=>h(Y.key),children:[m.jsx("span",{className:"block",children:Y.icon}),m.jsx("span",{className:"block text-xs mt-0.5",children:Y.shortLabel})]},Y.key))}),m.jsxs("div",{className:"min-h-[200px] bg-gray-50 rounded-lg p-3",children:[d==="guided"&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"📚 Guided Example"}),m.jsx(rT,{currentStrand:t,learningPathChoice:e})]}),d==="sim"&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"🔬 Simulation"}),m.jsx(iP,{})]}),d==="questions"&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"✍️ Interactive Questions"}),m.jsx(aP,{currentStrand:t,experimentChoice:e,currentStudentId:n,sessionCode:r,onProgressUpdate:P})]}),d==="your"&&m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"📝 Your Response"}),m.jsx(rP,{content:A,onChange:z,currentStudentId:n,currentStrand:t,currentExperimentChoice:e,sessionCode:r},o),(T.level>0||A.length>0)&&m.jsxs("div",{className:`mt-2 p-2 rounded border text-xs ${H(T.level)}`,children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"font-medium",children:"Live Evaluation"}),m.jsxs("span",{className:"font-bold",children:[T.level,"/8"]})]}),T.matchedKeywords.length>0&&m.jsxs("div",{className:"mt-1",children:[m.jsx("span",{className:"text-xs",children:"Keywords: "}),T.matchedKeywords.slice(0,3).map((Y,ee)=>m.jsx("span",{className:"inline-block bg-white bg-opacity-50 px-1 rounded mr-1 text-xs",children:Y.label},ee)),T.matchedKeywords.length>3&&m.jsxs("span",{className:"text-xs",children:["+",T.matchedKeywords.length-3]})]})]})]})]})]}),!S&&m.jsxs("div",{className:"p-4",children:[m.jsx("div",{className:"flex gap-2 mb-6 p-1 bg-gray-100 rounded-lg",children:ne.map(Y=>m.jsx("button",{className:`flex-1 px-4 py-3 font-medium rounded-md transition-all duration-200 ${d===Y.key?"bg-white text-purple-700 shadow-sm border border-purple-200":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,onClick:()=>h(Y.key),children:m.jsxs("div",{className:"flex flex-col items-center gap-1",children:[m.jsx("span",{className:"text-lg",children:Y.icon}),m.jsx("span",{className:"text-sm font-medium",children:Y.label}),m.jsx("span",{className:"text-xs text-gray-500",children:Y.description})]})},Y.key))}),m.jsxs("div",{className:"min-h-[400px]",children:[d==="guided"&&m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-xl",children:"📚"}),m.jsx("h3",{className:"font-semibold text-blue-900",children:"Guided Example"})]}),m.jsx(rT,{currentStrand:t,learningPathChoice:e})]}),d==="sim"&&m.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-xl",children:"🔬"}),m.jsx("h3",{className:"font-semibold text-green-900",children:"Interactive Simulation"})]}),m.jsx(iP,{})]}),d==="questions"&&m.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-xl",children:"✍️"}),m.jsx("h3",{className:"font-semibold text-purple-900",children:"Interactive Questions"})]}),m.jsx(aP,{currentStrand:t,experimentChoice:e,currentStudentId:n,sessionCode:r,onProgressUpdate:P})]}),d==="your"&&m.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-xl",children:"📝"}),m.jsxs("h3",{className:"font-semibold text-yellow-900",children:["Your Response for Strand ",t]})]}),Object.keys(I).length>0&&m.jsxs("div",{className:"bg-yellow-100 p-4 mb-4 rounded-lg border border-yellow-300",children:[m.jsx("h4",{className:"font-semibold text-sm mb-2 flex items-center gap-1",children:"💡 Tips for Success"}),m.jsx("p",{className:"text-gray-700 text-sm",children:"Focus on using scientific vocabulary and explaining concepts clearly. Include specific examples and detailed explanations to improve your evaluation score."})]}),m.jsx(rP,{content:A,onChange:z,currentStudentId:n,currentStrand:t,currentExperimentChoice:e,sessionCode:r},o),m.jsxs("div",{className:`mt-4 p-4 rounded-lg border-2 transition-all duration-300 ${H(T.level)}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("h4",{className:"font-semibold text-sm flex items-center",children:["🔍 Live Evaluation",y&&m.jsx("span",{className:"ml-2 animate-spin text-blue-500",children:"⏳"})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("span",{className:"text-2xl font-bold",children:[T.level,"/8"]}),m.jsx("div",{className:"text-xs text-gray-600",children:T.level>=7?"Excellent":T.level>=5?"Good":T.level>=3?"Adequate":T.level>0?"Developing":"Start Writing"})]})]}),m.jsxs("div",{className:"mb-3",children:[m.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[m.jsx("span",{children:"Progress to Level 8"}),m.jsxs("span",{children:[Math.round(T.level/8*100),"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${T.level/8*100}%`}})})]}),T.matchedKeywords.length>0&&m.jsxs("div",{className:"mb-3",children:[m.jsxs("p",{className:"text-sm font-semibold mb-2",children:["🎯 Scientific Terms Found (",T.matchedKeywords.length,"):"]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.matchedKeywords.slice(0,8).map((Y,ee)=>m.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 border border-green-300",children:Y.label},ee)),T.matchedKeywords.length>8&&m.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:["+",T.matchedKeywords.length-8," more"]})]})]}),T.matchedConcepts.length>0&&m.jsxs("div",{className:"mb-3",children:[m.jsxs("p",{className:"text-sm font-semibold mb-2",children:["🧠 Concepts Identified (",T.matchedConcepts.length,"):"]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.matchedConcepts.slice(0,6).map((Y,ee)=>m.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 border border-blue-300",children:Y.label},ee)),T.matchedConcepts.length>6&&m.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600",children:["+",T.matchedConcepts.length-6," more"]})]})]}),T.suggestions.length>0&&m.jsxs("div",{className:"border-t pt-3",children:[m.jsx("p",{className:"text-sm font-semibold mb-2",children:"💬 Suggestions for Improvement:"}),m.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1",children:T.suggestions.slice(0,3).map((Y,ee)=>m.jsx("li",{className:"text-gray-700",children:Y},ee))})]}),T.level===0&&A.length>0&&m.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded border",children:"💭 Keep writing! Add scientific vocabulary and detailed explanations to improve your score."}),A.length===0&&m.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 p-3 rounded border text-center",children:"✏️ Start typing your response to see live evaluation feedback"})]})]})]})]}),m.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition disabled:opacity-50",disabled:t===1,children:[m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous Strand"]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-xs text-gray-500",children:"Strand Progress"}),m.jsx("div",{className:"flex gap-1 mt-1",children:[1,2,3,4].map(Y=>m.jsx("div",{className:`w-2 h-2 rounded-full ${Y===t?"bg-purple-500":Y<t?"bg-green-400":"bg-gray-300"}`},Y))})]}),m.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition",children:[t===4?"Complete Assessment":"Next Strand",m.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),!1]})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iv.apply(this,arguments)}var _c;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_c||(_c={}));const lP="popstate";function Hce(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return H5("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:y8(i)}return Gce(e,n,null,t)}function KC(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kce(){return Math.random().toString(36).substr(2,8)}function cP(t,e){return{usr:t.state,key:t.key,idx:e}}function H5(t,e,n,r){return n===void 0&&(n=null),iv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?v8(e):e,{state:n,key:e&&e.key||r||Kce()})}function y8(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function v8(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gce(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=_c.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(iv({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=_c.Pop;let b=u(),v=b==null?null:b-c;c=b,l&&l({action:a,location:y.location,delta:v})}function h(b,v){a=_c.Push;let x=H5(y.location,b,v);n&&n(x,b),c=u()+1;let S=cP(x,c),_=y.createHref(x);try{o.pushState(S,"",_)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(_)}s&&l&&l({action:a,location:y.location,delta:1})}function f(b,v){a=_c.Replace;let x=H5(y.location,b,v);n&&n(x,b),c=u();let S=cP(x,c),_=y.createHref(x);o.replaceState(S,"",_),s&&l&&l({action:a,location:y.location,delta:0})}function p(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:y8(b);return x=x.replace(/ $/,"%20"),KC(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(lP,d),l=b,()=>{i.removeEventListener(lP,d),l=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(b){return o.go(b)}};return y}var uP;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uP||(uP={}));function Yce(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const b8=["post","put","patch","delete"];new Set(b8);const Xce=["get",...b8];new Set(Xce);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K5(){return K5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K5.apply(this,arguments)}const Jce=B.createContext(null),GC=B.createContext(null);function x8(){return B.useContext(GC)!=null}function Qce(){return x8()||KC(!1),B.useContext(GC).location}function Zce(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function eue(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_c.Pop,navigator:s,static:o=!1,future:a}=t;x8()&&KC(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:K5({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=v8(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,y=B.useMemo(()=>{let b=Yce(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return y==null?null:B.createElement(Jce.Provider,{value:c},B.createElement(GC.Provider,{children:n,value:y}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tue="6";try{window.__reactRouterVersion=tue}catch{}const nue="startTransition",dP=lv[nue];function rue(t){let{basename:e,children:n,future:r,window:i}=t,s=B.useRef();s.current==null&&(s.current=Hce({window:i,v5Compat:!0}));let o=s.current,[a,l]=B.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=B.useCallback(d=>{c&&dP?dP(()=>l(d)):l(d)},[l,c]);return B.useLayoutEffect(()=>o.listen(u),[o,u]),B.useEffect(()=>Zce(r),[r]),B.createElement(eue,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var hP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hP||(hP={}));var fP;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fP||(fP={}));const iue=({currentStrand:t,setCurrentStrand:e,onNext:n,points:r,setPoints:i,strandStatus:s,setStrandStatus:o,earnedBadges:a,setEarnedBadges:l,learningPathData:c,learningPathChoice:u,experimentTitle:d})=>{const{userInputs:h,strandProgress:f}=lm();Qce();const p=new URLSearchParams(window.location.search);p.get("name");const y=p.get("studentId")??null,b=p.get("sessionCode");return m.jsxs("div",{className:"main-screen px-6 py-4 space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center px-4 py-3 bg-purple-600 text-white rounded-md shadow-md",children:[m.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"🌟 Total Internal Reflection Explorer - MYP Criteria A 💎"}),m.jsxs("div",{className:"text-sm md:text-base font-medium",children:["🏆 ",r," POINTS / 100"]})]}),m.jsx(qW,{strandProgress:f,currentStrand:t,userInputs:h,setCurrentStrand:e,earnedBadges:a,experimentTitle:d}),m.jsx(Wce,{currentStrand:t,learningPathChoice:u,currentStudentId:y,sessionCode:b,onNext:()=>{t<4?e(t+1):n()},onPrevious:()=>{t>1&&e(t-1)}})]})};var $r=Uint8Array,Wi=Uint16Array,YC=Int32Array,S1=new $r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k1=new $r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),G5=new $r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w8=function(t,e){for(var n=new Wi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new YC(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},S8=w8(S1,2),k8=S8.b,Y5=S8.r;k8[28]=258,Y5[258]=28;var C8=w8(k1,0),sue=C8.b,pP=C8.r,X5=new Wi(32768);for(var sn=0;sn<32768;++sn){var Ia=(sn&43690)>>1|(sn&21845)<<1;Ia=(Ia&52428)>>2|(Ia&13107)<<2,Ia=(Ia&61680)>>4|(Ia&3855)<<4,X5[sn]=((Ia&65280)>>8|(Ia&255)<<8)>>1}var So=function(t,e,n){for(var r=t.length,i=0,s=new Wi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Wi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Wi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[X5[d]>>l]=c}else for(a=new Wi(r),i=0;i<r;++i)t[i]&&(a[i]=X5[o[t[i]-1]++]>>15-t[i]);return a},Ml=new $r(288);for(var sn=0;sn<144;++sn)Ml[sn]=8;for(var sn=144;sn<256;++sn)Ml[sn]=9;for(var sn=256;sn<280;++sn)Ml[sn]=7;for(var sn=280;sn<288;++sn)Ml[sn]=8;var Xp=new $r(32);for(var sn=0;sn<32;++sn)Xp[sn]=5;var oue=So(Ml,9,0),aue=So(Ml,9,1),lue=So(Xp,5,0),cue=So(Xp,5,1),t2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Is=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},n2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},XC=function(t){return(t+7)/8|0},_8=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new $r(t.subarray(e,n))},uue=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zs=function(t,e,n){var r=new Error(e||uue[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,zs),!n)throw r;return r},due=function(t,e,n,r){var i=t.length,s=r?r.length:0;if(!i||e.f&&!e.l)return n||new $r(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new $r(i*3));var c=function(be){var ye=n.length;if(be>ye){var ve=new $r(Math.max(ye*2,be));ve.set(n),n=ve}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,p=e.d,y=e.m,b=e.n,v=i*8;do{if(!f){u=Is(t,d,1);var x=Is(t,d+1,3);if(d+=3,x)if(x==1)f=aue,p=cue,y=9,b=5;else if(x==2){var T=Is(t,d,31)+257,P=Is(t,d+10,15)+4,E=T+Is(t,d+5,31)+1;d+=14;for(var z=new $r(E),H=new $r(19),j=0;j<P;++j)H[G5[j]]=Is(t,d+j*3,7);d+=P*3;for(var I=t2(H),q=(1<<I)-1,F=So(H,I,1),j=0;j<E;){var ne=F[Is(t,d,q)];d+=ne&15;var S=ne>>4;if(S<16)z[j++]=S;else{var Y=0,ee=0;for(S==16?(ee=3+Is(t,d,3),d+=2,Y=z[j-1]):S==17?(ee=3+Is(t,d,7),d+=3):S==18&&(ee=11+Is(t,d,127),d+=7);ee--;)z[j++]=Y}}var X=z.subarray(0,T),ie=z.subarray(T);y=t2(X),b=t2(ie),f=So(X,y,1),p=So(ie,b,1)}else zs(1);else{var S=XC(d)+4,_=t[S-4]|t[S-3]<<8,A=S+_;if(A>i){l&&zs(0);break}a&&c(h+_),n.set(t.subarray(S,A),h),e.b=h+=_,e.p=d=A*8,e.f=u;continue}if(d>v){l&&zs(0);break}}a&&c(h+131072);for(var V=(1<<y)-1,K=(1<<b)-1,M=d;;M=d){var Y=f[n2(t,d)&V],U=Y>>4;if(d+=Y&15,d>v){l&&zs(0);break}if(Y||zs(2),U<256)n[h++]=U;else if(U==256){M=d,f=null;break}else{var G=U-254;if(U>264){var j=U-257,Z=S1[j];G=Is(t,d,(1<<Z)-1)+k8[j],d+=Z}var re=p[n2(t,d)&K],se=re>>4;re||zs(3),d+=re&15;var ie=sue[se];if(se>3){var Z=k1[se];ie+=n2(t,d)&(1<<Z)-1,d+=Z}if(d>v){l&&zs(0);break}a&&c(h+131072);var ce=h+G;if(h<ie){var he=s-ie,ke=Math.min(ie,ce);for(he+h<0&&zs(3);h<ke;++h)n[h]=r[he+h]}for(;h<ce;++h)n[h]=n[h-ie]}}e.l=f,e.p=M,e.b=h,e.f=u,f&&(u=1,e.m=y,e.d=p,e.n=b)}while(!u);return h!=n.length&&o?_8(n,0,h):n.subarray(0,h)},$o=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},hf=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},r2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:N8,l:0};if(i==1){var o=new $r(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(A,T){return A.f-T.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var f=new Wi(h+1),p=J5(n[u-1],f,0);if(p>e){var r=0,y=0,b=p-e,v=1<<b;for(s.sort(function(T,P){return f[P.s]-f[T.s]||T.f-P.f});r<i;++r){var x=s[r].s;if(f[x]>e)y+=v-(1<<p-f[x]),f[x]=e;else break}for(y>>=b;y>0;){var S=s[r].s;f[S]<e?y-=1<<e-f[S]++-1:++r}for(;r>=0&&y;--r){var _=s[r].s;f[_]==e&&(--f[_],++y)}p=e}return{t:new $r(f),l:p}},J5=function(t,e,n){return t.s==-1?Math.max(J5(t.l,e,n+1),J5(t.r,e,n+1)):e[t.s]=n},mP=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Wi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},ff=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},A8=function(t,e,n){var r=n.length,i=XC(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},gP=function(t,e,n,r,i,s,o,a,l,c,u){$o(e,u++,n),++i[256];for(var d=r2(i,15),h=d.t,f=d.l,p=r2(s,15),y=p.t,b=p.l,v=mP(h),x=v.c,S=v.n,_=mP(y),A=_.c,T=_.n,P=new Wi(19),E=0;E<x.length;++E)++P[x[E]&31];for(var E=0;E<A.length;++E)++P[A[E]&31];for(var z=r2(P,7),H=z.t,j=z.l,I=19;I>4&&!H[G5[I-1]];--I);var q=c+5<<3,F=ff(i,Ml)+ff(s,Xp)+o,ne=ff(i,h)+ff(s,y)+o+14+3*I+ff(P,H)+2*P[16]+3*P[17]+7*P[18];if(l>=0&&q<=F&&q<=ne)return A8(e,u,t.subarray(l,l+c));var Y,ee,X,ie;if($o(e,u,1+(ne<F)),u+=2,ne<F){Y=So(h,f,0),ee=h,X=So(y,b,0),ie=y;var V=So(H,j,0);$o(e,u,S-257),$o(e,u+5,T-1),$o(e,u+10,I-4),u+=14;for(var E=0;E<I;++E)$o(e,u+3*E,H[G5[E]]);u+=3*I;for(var K=[x,A],M=0;M<2;++M)for(var U=K[M],E=0;E<U.length;++E){var G=U[E]&31;$o(e,u,V[G]),u+=H[G],G>15&&($o(e,u,U[E]>>5&127),u+=U[E]>>12)}}else Y=oue,ee=Ml,X=lue,ie=Xp;for(var E=0;E<a;++E){var Z=r[E];if(Z>255){var G=Z>>18&31;hf(e,u,Y[G+257]),u+=ee[G+257],G>7&&($o(e,u,Z>>23&31),u+=S1[G]);var re=Z&31;hf(e,u,X[re]),u+=ie[re],re>3&&(hf(e,u,Z>>5&8191),u+=k1[re])}else hf(e,u,Y[Z]),u+=ee[Z]}return hf(e,u,Y[256]),u+ee[256]},hue=new YC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),N8=new $r(0),fue=function(t,e,n,r,i,s){var o=s.z||t.length,a=new $r(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var d=hue[e-1],h=d>>13,f=d&8191,p=(1<<n)-1,y=s.p||new Wi(32768),b=s.h||new Wi(p+1),v=Math.ceil(n/3),x=2*v,S=function(Se){return(t[Se]^t[Se+1]<<v^t[Se+2]<<x)&p},_=new YC(25e3),A=new Wi(288),T=new Wi(32),P=0,E=0,z=s.i||0,H=0,j=s.w||0,I=0;z+2<o;++z){var q=S(z),F=z&32767,ne=b[q];if(y[F]=ne,b[q]=F,j<=z){var Y=o-z;if((P>7e3||H>24576)&&(Y>423||!c)){u=gP(t,l,0,_,A,T,E,H,I,z-I,u),H=P=E=0,I=z;for(var ee=0;ee<286;++ee)A[ee]=0;for(var ee=0;ee<30;++ee)T[ee]=0}var X=2,ie=0,V=f,K=F-ne&32767;if(Y>2&&q==S(z-K))for(var M=Math.min(h,Y)-1,U=Math.min(32767,z),G=Math.min(258,Y);K<=U&&--V&&F!=ne;){if(t[z+X]==t[z+X-K]){for(var Z=0;Z<G&&t[z+Z]==t[z+Z-K];++Z);if(Z>X){if(X=Z,ie=K,Z>M)break;for(var re=Math.min(K,Z-2),se=0,ee=0;ee<re;++ee){var ce=z-K+ee&32767,he=y[ce],ke=ce-he&32767;ke>se&&(se=ke,ne=ce)}}}F=ne,ne=y[F],K+=F-ne&32767}if(ie){_[H++]=268435456|Y5[X]<<18|pP[ie];var be=Y5[X]&31,ye=pP[ie]&31;E+=S1[be]+k1[ye],++A[257+be],++T[ye],j=z+X,++P}else _[H++]=t[z],++A[t[z]]}}for(z=Math.max(z,j);z<o;++z)_[H++]=t[z],++A[t[z]];u=gP(t,l,c,_,A,T,E,H,I,z-I,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=b,s.p=y,s.i=z,s.w=j)}else{for(var z=s.w||0;z<o+c;z+=65535){var ve=z+65535;ve>=o&&(l[u/8|0]=c,ve=o),u=A8(l,u+1,t.subarray(z,ve))}s.i=o}return _8(a,0,r+XC(u)+i)},T8=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},pue=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new $r(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return fue(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},E8=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},mue=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=T8();i.p(e.dictionary),E8(t,2,i.d())}},gue=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&zs(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&zs(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Q5(t,e){e||(e={});var n=T8();n.p(t);var r=pue(t,e,e.dictionary?6:2,4);return mue(r,e),E8(r,r.length-4,n.d()),r}function yue(t,e){return due(t.subarray(gue(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var vue=typeof TextDecoder<"u"&&new TextDecoder,bue=0;try{vue.decode(N8,{stream:!0}),bue=1}catch{}var ct=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i2(){ct.console&&typeof ct.console.log=="function"&&ct.console.log.apply(ct.console,arguments)}var Ht={log:i2,warn:function(t){ct.console&&(typeof ct.console.warn=="function"?ct.console.warn.apply(ct.console,arguments):i2.call(null,arguments))},error:function(t){ct.console&&(typeof ct.console.error=="function"?ct.console.error.apply(ct.console,arguments):i2(t))}};function s2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){hc(r.response,e,n)},r.onerror=function(){Ht.error("could not download file")},r.send()}function yP(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function p0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var np,Z5,hc=ct.saveAs||((typeof window>"u"?"undefined":Je(window))!=="object"||window!==ct?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ct.URL||ct.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?yP(i.href)?s2(t,e,n):p0(i,i.target="_blank"):p0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){p0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(yP(t))s2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){p0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Je(s)!=="object"&&(Ht.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return s2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ct.HTMLElement)||ct.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Je(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=ct.URL||ct.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function P8(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function o2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Lr(n,r,i,s,e[0],7,-680876936),s=Lr(s,n,r,i,e[1],12,-389564586),i=Lr(i,s,n,r,e[2],17,606105819),r=Lr(r,i,s,n,e[3],22,-1044525330),n=Lr(n,r,i,s,e[4],7,-176418897),s=Lr(s,n,r,i,e[5],12,1200080426),i=Lr(i,s,n,r,e[6],17,-1473231341),r=Lr(r,i,s,n,e[7],22,-45705983),n=Lr(n,r,i,s,e[8],7,1770035416),s=Lr(s,n,r,i,e[9],12,-1958414417),i=Lr(i,s,n,r,e[10],17,-42063),r=Lr(r,i,s,n,e[11],22,-1990404162),n=Lr(n,r,i,s,e[12],7,1804603682),s=Lr(s,n,r,i,e[13],12,-40341101),i=Lr(i,s,n,r,e[14],17,-1502002290),n=Or(n,r=Lr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Or(s,n,r,i,e[6],9,-1069501632),i=Or(i,s,n,r,e[11],14,643717713),r=Or(r,i,s,n,e[0],20,-373897302),n=Or(n,r,i,s,e[5],5,-701558691),s=Or(s,n,r,i,e[10],9,38016083),i=Or(i,s,n,r,e[15],14,-660478335),r=Or(r,i,s,n,e[4],20,-405537848),n=Or(n,r,i,s,e[9],5,568446438),s=Or(s,n,r,i,e[14],9,-1019803690),i=Or(i,s,n,r,e[3],14,-187363961),r=Or(r,i,s,n,e[8],20,1163531501),n=Or(n,r,i,s,e[13],5,-1444681467),s=Or(s,n,r,i,e[2],9,-51403784),i=Or(i,s,n,r,e[7],14,1735328473),n=Ir(n,r=Or(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ir(s,n,r,i,e[8],11,-2022574463),i=Ir(i,s,n,r,e[11],16,1839030562),r=Ir(r,i,s,n,e[14],23,-35309556),n=Ir(n,r,i,s,e[1],4,-1530992060),s=Ir(s,n,r,i,e[4],11,1272893353),i=Ir(i,s,n,r,e[7],16,-155497632),r=Ir(r,i,s,n,e[10],23,-1094730640),n=Ir(n,r,i,s,e[13],4,681279174),s=Ir(s,n,r,i,e[0],11,-358537222),i=Ir(i,s,n,r,e[3],16,-722521979),r=Ir(r,i,s,n,e[6],23,76029189),n=Ir(n,r,i,s,e[9],4,-640364487),s=Ir(s,n,r,i,e[12],11,-421815835),i=Ir(i,s,n,r,e[15],16,530742520),n=Rr(n,r=Ir(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Rr(s,n,r,i,e[7],10,1126891415),i=Rr(i,s,n,r,e[14],15,-1416354905),r=Rr(r,i,s,n,e[5],21,-57434055),n=Rr(n,r,i,s,e[12],6,1700485571),s=Rr(s,n,r,i,e[3],10,-1894986606),i=Rr(i,s,n,r,e[10],15,-1051523),r=Rr(r,i,s,n,e[1],21,-2054922799),n=Rr(n,r,i,s,e[8],6,1873313359),s=Rr(s,n,r,i,e[15],10,-30611744),i=Rr(i,s,n,r,e[6],15,-1560198380),r=Rr(r,i,s,n,e[13],21,1309151649),n=Rr(n,r,i,s,e[4],6,-145523070),s=Rr(s,n,r,i,e[11],10,-1120210379),i=Rr(i,s,n,r,e[2],15,718787259),r=Rr(r,i,s,n,e[9],21,-343485551),t[0]=al(n,t[0]),t[1]=al(r,t[1]),t[2]=al(i,t[2]),t[3]=al(s,t[3])}function C1(t,e,n,r,i,s){return e=al(al(e,t),al(r,s)),al(e<<i|e>>>32-i,n)}function Lr(t,e,n,r,i,s,o){return C1(e&n|~e&r,t,e,i,s,o)}function Or(t,e,n,r,i,s,o){return C1(e&r|n&~r,t,e,i,s,o)}function Ir(t,e,n,r,i,s,o){return C1(e^n^r,t,e,i,s,o)}function Rr(t,e,n,r,i,s,o){return C1(n^(e|~r),t,e,i,s,o)}function M8(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)o2(r,xue(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(o2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,o2(r,i),r}function xue(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}np=ct.atob.bind(ct),Z5=ct.btoa.bind(ct);var vP="0123456789abcdef".split("");function wue(t){for(var e="",n=0;n<4;n++)e+=vP[t>>8*n+4&15]+vP[t>>8*n&15];return e}function Sue(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function eS(t){return M8(t).map(Sue).join("")}var kue=function(t){for(var e=0;e<t.length;e++)t[e]=wue(t[e]);return t.join("")}(M8("hello"))!="5d41402abc4b2a76b9719d911017c592";function al(t,e){if(kue){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function tS(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=u,o=a[(a[h]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var bP={print:4,modify:8,copy:16,"annot-forms":32};function Gu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(bP.perm!==void 0)throw new Error("Invalid permission: "+a);i+=bP[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=eS(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=tS(this.encryptionKey,this.padding)}function Yu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function xP(t){if(Je(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){ct.console&&Ht.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function sv(t){if(!(this instanceof sv))return new sv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function j8(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function yc(t,e,n,r,i){if(!(this instanceof yc))return new yc(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,j8.call(this,r,i)}function vd(t,e,n,r,i){if(!(this instanceof vd))return new vd(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,j8.call(this,r,i)}function lt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;Je(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=xP;var p="1.3",y=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(k){p=k};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return b};var v=f.__private__.getPageFormat=function(k){return b[k]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},S=x.COMPAT;function _(){this.saveGraphicsState(),Q(new Ye(Be,0,0,-Be,0,wa()*Be).toString()+" cm"),this.setFontSize(this.getFontSize()/Be),c="n",S=x.ADVANCED}function A(){this.restoreGraphicsState(),c="S",S=x.COMPAT}var T=f.__private__.combineFontStyleAndFontWeight=function(k,O){if(k=="bold"&&O=="normal"||k=="bold"&&O==400||k=="normal"&&O=="italic"||k=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(k=O==400||O==="normal"?k==="italic"?"italic":"normal":O!=700&&O!=="bold"||k!=="normal"?(O==700?"bold":O)+""+k:"bold"),k};f.advancedAPI=function(k){var O=S===x.COMPAT;return O&&_.call(this),typeof k!="function"||(k(this),O&&A.call(this)),this},f.compatAPI=function(k){var O=S===x.ADVANCED;return O&&A.call(this),typeof k!="function"||(k(this),O&&_.call(this)),this},f.isAdvancedAPI=function(){return S===x.ADVANCED};var P,E=function(k){if(S!==x.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=f.roundToPrecision=f.__private__.roundToPrecision=function(k,O){var te=e||O;if(isNaN(k)||isNaN(te))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(te).replace(/0+$/,"")};P=f.hpf=f.__private__.hpf=typeof l=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return z(k,l)}:l==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return z(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return z(k,16)};var H=f.f2=f.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return z(k,2)},j=f.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return z(k,3)},I=f.scale=f.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return S===x.COMPAT?k*Be:S===x.ADVANCED?k:void 0},q=function(k){return S===x.COMPAT?wa()-k:S===x.ADVANCED?k:void 0},F=function(k){return I(q(k))};f.__private__.setPrecision=f.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var ne,Y="00000000000000000000000000000000",ee=f.__private__.getFileId=function(){return Y},X=f.__private__.setFileId=function(k){return Y=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Er=new Gu(u.userPermissions,u.userPassword,u.ownerPassword,Y)),Y};f.setFileId=function(k){return X(k),this},f.getFileId=function(){return ee()};var ie=f.__private__.convertDateToPDFDate=function(k){var O=k.getTimezoneOffset(),te=O<0?"+":"-",oe=Math.floor(Math.abs(O/60)),pe=Math.abs(O%60),we=[te,G(oe),"'",G(pe),"'"].join("");return["D:",k.getFullYear(),G(k.getMonth()+1),G(k.getDate()),G(k.getHours()),G(k.getMinutes()),G(k.getSeconds()),we].join("")},V=f.__private__.convertPDFDateToDate=function(k){var O=parseInt(k.substr(2,4),10),te=parseInt(k.substr(6,2),10)-1,oe=parseInt(k.substr(8,2),10),pe=parseInt(k.substr(10,2),10),we=parseInt(k.substr(12,2),10),Pe=parseInt(k.substr(14,2),10);return new Date(O,te,oe,pe,we,Pe,0)},K=f.__private__.setCreationDate=function(k){var O;if(k===void 0&&(k=new Date),k instanceof Date)O=ie(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=k}return ne=O},M=f.__private__.getCreationDate=function(k){var O=ne;return k==="jsDate"&&(O=V(ne)),O};f.setCreationDate=function(k){return K(k),this},f.getCreationDate=function(k){return M(k)};var U,G=f.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},Z=f.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},re=0,se=[],ce=[],he=0,ke=[],be=[],ye=!1,ve=ce,Se=function(){re=0,he=0,ce=[],se=[],ke=[],qn=wn(),Sn=wn()};f.__private__.setCustomOutputDestination=function(k){ye=!0,ve=k};var fe=function(k){ye||(ve=k)};f.__private__.resetCustomOutputDestination=function(){ye=!1,ve=ce};var Q=f.__private__.out=function(k){return k=k.toString(),he+=k.length+1,ve.push(k),ve},Re=f.__private__.write=function(k){return Q(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ie=f.__private__.getArrayBuffer=function(k){for(var O=k.length,te=new ArrayBuffer(O),oe=new Uint8Array(te);O--;)oe[O]=k.charCodeAt(O);return te},Te=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Te};var Me=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(k){return Me=S===x.ADVANCED?k/Be:k,this};var Oe,je=f.__private__.getFontSize=f.getFontSize=function(){return S===x.COMPAT?Me:Me*Be},Ve=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(k){return Ve=k,this},f.__private__.getR2L=f.getR2L=function(){return Ve};var Qe,it=f.__private__.setZoomMode=function(k){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))Oe=k;else if(isNaN(k)){if(O.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');Oe=k}else Oe=parseInt(k,10)};f.__private__.getZoomMode=function(){return Oe};var pt,St=f.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Qe=k};f.__private__.getPageMode=function(){return Qe};var Ot=f.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');pt=k};f.__private__.getLayoutMode=function(){return pt},f.__private__.setDisplayMode=f.setDisplayMode=function(k,O,te){return it(k),Ot(O),St(te),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(k){if(Object.keys(tt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[k]},f.__private__.getDocumentProperties=function(){return tt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(k){for(var O in tt)tt.hasOwnProperty(O)&&k[O]&&(tt[O]=k[O]);return this},f.__private__.setDocumentProperty=function(k,O){if(Object.keys(tt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[k]=O};var yt,Be,Un,At,Ti,Ft={},Yt={},Zi=[],It={},To={},un={},Ei={},Ts=null,dn=0,ut=[],Nt=new xP(f),Pi=t.hotfixes||[],jn={},ci={},gr=[],Ye=function k(O,te,oe,pe,we,Pe){if(!(this instanceof k))return new k(O,te,oe,pe,we,Pe);isNaN(O)&&(O=1),isNaN(te)&&(te=0),isNaN(oe)&&(oe=0),isNaN(pe)&&(pe=1),isNaN(we)&&(we=0),isNaN(Pe)&&(Pe=0),this._matrix=[O,te,oe,pe,we,Pe]};Object.defineProperty(Ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(Ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(Ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(Ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(Ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(Ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(Ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ye.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(k)},Ye.prototype.multiply=function(k){var O=k.sx*this.sx+k.shy*this.shx,te=k.sx*this.shy+k.shy*this.sy,oe=k.shx*this.sx+k.sy*this.shx,pe=k.shx*this.shy+k.sy*this.sy,we=k.tx*this.sx+k.ty*this.shx+this.tx,Pe=k.tx*this.shy+k.ty*this.sy+this.ty;return new Ye(O,te,oe,pe,we,Pe)},Ye.prototype.decompose=function(){var k=this.sx,O=this.shy,te=this.shx,oe=this.sy,pe=this.tx,we=this.ty,Pe=Math.sqrt(k*k+O*O),$e=(k/=Pe)*te+(O/=Pe)*oe;te-=k*$e,oe-=O*$e;var Xe=Math.sqrt(te*te+oe*oe);return $e/=Xe,k*(oe/=Xe)<O*(te/=Xe)&&(k=-k,O=-O,$e=-$e,Pe=-Pe),{scale:new Ye(Pe,0,0,Xe,0,0),translate:new Ye(1,0,0,1,pe,we),rotate:new Ye(k,O,-O,k,0,0),skew:new Ye(1,0,$e,1,0,0)}},Ye.prototype.toString=function(k){return this.join(" ")},Ye.prototype.inversed=function(){var k=this.sx,O=this.shy,te=this.shx,oe=this.sy,pe=this.tx,we=this.ty,Pe=1/(k*oe-O*te),$e=oe*Pe,Xe=-O*Pe,mt=-te*Pe,ht=k*Pe;return new Ye($e,Xe,mt,ht,-$e*pe-mt*we,-Xe*pe-ht*we)},Ye.prototype.applyToPoint=function(k){var O=k.x*this.sx+k.y*this.shx+this.tx,te=k.x*this.shy+k.y*this.sy+this.ty;return new yu(O,te)},Ye.prototype.applyToRectangle=function(k){var O=this.applyToPoint(k),te=this.applyToPoint(new yu(k.x+k.w,k.y+k.h));return new Ah(O.x,O.y,te.x-O.x,te.y-O.y)},Ye.prototype.clone=function(){var k=this.sx,O=this.shy,te=this.shx,oe=this.sy,pe=this.tx,we=this.ty;return new Ye(k,O,te,oe,pe,we)},f.Matrix=Ye;var ui=f.matrixMult=function(k,O){return O.multiply(k)},es=new Ye(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=es;var Rt=function(k,O){if(!To[k]){var te=(O instanceof yc?"Sh":"P")+(Object.keys(It).length+1).toString(10);O.id=te,To[k]=te,It[te]=O,Nt.publish("addPattern",O)}};f.ShadingPattern=yc,f.TilingPattern=vd,f.addShadingPattern=function(k,O){return E("addShadingPattern()"),Rt(k,O),this},f.beginTilingPattern=function(k){E("beginTilingPattern()"),Rm(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},f.endTilingPattern=function(k,O){E("endTilingPattern()"),O.stream=be[U].join(`
`),Rt(k,O),Nt.publish("endTilingPattern",O),gr.pop().restore()};var xn=f.__private__.newObject=function(){var k=wn();return Mt(k,!0),k},wn=f.__private__.newObjectDeferred=function(){return re++,se[re]=function(){return he},re},Mt=function(k,O){return O=typeof O=="boolean"&&O,se[k]=he,O&&Q(k+" 0 obj"),k},hn=f.__private__.newAdditionalObject=function(){var k={objId:wn(),content:""};return ke.push(k),k},qn=wn(),Sn=wn(),Ar=f.__private__.decodeColorString=function(k){var O=k.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var te=parseFloat(O[0]);O=[te,te,te,"r"]}for(var oe="#",pe=0;pe<3;pe++)oe+=("0"+Math.floor(255*parseFloat(O[pe])).toString(16)).slice(-2);return oe},Mi=f.__private__.encodeColorString=function(k){var O;typeof k=="string"&&(k={ch1:k});var te=k.ch1,oe=k.ch2,pe=k.ch3,we=k.ch4,Pe=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof te=="string"&&te.charAt(0)!=="#"){var $e=new P8(te);if($e.ok)te=$e.toHex();else if(!/^\d*\.?\d*$/.test(te))throw new Error('Invalid color "'+te+'" passed to jsPDF.encodeColorString.')}if(typeof te=="string"&&/^#[0-9A-Fa-f]{3}$/.test(te)&&(te="#"+te[1]+te[1]+te[2]+te[2]+te[3]+te[3]),typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te)){var Xe=parseInt(te.substr(1),16);te=Xe>>16&255,oe=Xe>>8&255,pe=255&Xe}if(oe===void 0||we===void 0&&te===oe&&oe===pe)if(typeof te=="string")O=te+" "+Pe[0];else switch(k.precision){case 2:O=H(te/255)+" "+Pe[0];break;case 3:default:O=j(te/255)+" "+Pe[0]}else if(we===void 0||Je(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return O=["1.","1.","1.",Pe[1]].join(" ");if(typeof te=="string")O=[te,oe,pe,Pe[1]].join(" ");else switch(k.precision){case 2:O=[H(te/255),H(oe/255),H(pe/255),Pe[1]].join(" ");break;default:case 3:O=[j(te/255),j(oe/255),j(pe/255),Pe[1]].join(" ")}}else if(typeof te=="string")O=[te,oe,pe,we,Pe[2]].join(" ");else switch(k.precision){case 2:O=[H(te),H(oe),H(pe),H(we),Pe[2]].join(" ");break;case 3:default:O=[j(te),j(oe),j(pe),j(we),Pe[2]].join(" ")}return O},ji=f.__private__.getFilters=function(){return o},Nr=f.__private__.putStream=function(k){var O=(k=k||{}).data||"",te=k.filters||ji(),oe=k.alreadyAppliedFilters||[],pe=k.addLength1||!1,we=O.length,Pe=k.objectId,$e=function(Pr){return Pr};if(u!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&($e=Er.encryptor(Pe,0));var Xe={};te===!0&&(te=["FlateEncode"]);var mt=k.additionalKeyValues||[],ht=(Xe=lt.API.processDataByFilters!==void 0?lt.API.processDataByFilters(O,te):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(Xe.data.length!==0&&(mt.push({key:"Length",value:Xe.data.length}),pe===!0&&mt.push({key:"Length1",value:we})),ht.length!=0)if(ht.split("/").length-1==1)mt.push({key:"Filter",value:ht});else{mt.push({key:"Filter",value:"["+ht+"]"});for(var Pt=0;Pt<mt.length;Pt+=1)if(mt[Pt].key==="DecodeParms"){for(var mn=[],kn=0;kn<Xe.reverseChain.split("/").length-1;kn+=1)mn.push("null");mn.push(mt[Pt].value),mt[Pt].value="["+mn.join(" ")+"]"}}Q("<<");for(var Wn=0;Wn<mt.length;Wn++)Q("/"+mt[Wn].key+" "+mt[Wn].value);Q(">>"),Xe.data.length!==0&&(Q("stream"),Q($e(Xe.data)),Q("endstream"))},Li=f.__private__.putPage=function(k){var O=k.number,te=k.data,oe=k.objId,pe=k.contentsObjId;Mt(oe,!0),Q("<</Type /Page"),Q("/Parent "+k.rootDictionaryObjId+" 0 R"),Q("/Resources "+k.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(P(k.mediaBox.bottomLeftX))+" "+parseFloat(P(k.mediaBox.bottomLeftY))+" "+P(k.mediaBox.topRightX)+" "+P(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&Q("/CropBox ["+P(k.cropBox.bottomLeftX)+" "+P(k.cropBox.bottomLeftY)+" "+P(k.cropBox.topRightX)+" "+P(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&Q("/BleedBox ["+P(k.bleedBox.bottomLeftX)+" "+P(k.bleedBox.bottomLeftY)+" "+P(k.bleedBox.topRightX)+" "+P(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&Q("/TrimBox ["+P(k.trimBox.bottomLeftX)+" "+P(k.trimBox.bottomLeftY)+" "+P(k.trimBox.topRightX)+" "+P(k.trimBox.topRightY)+"]"),k.artBox!==null&&Q("/ArtBox ["+P(k.artBox.bottomLeftX)+" "+P(k.artBox.bottomLeftY)+" "+P(k.artBox.topRightX)+" "+P(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&Q("/UserUnit "+k.userUnit),Nt.publish("putPage",{objId:oe,pageContext:ut[O],pageNumber:O,page:te}),Q("/Contents "+pe+" 0 R"),Q(">>"),Q("endobj");var we=te.join(`
`);return S===x.ADVANCED&&(we+=`
Q`),Mt(pe,!0),Nr({data:we,filters:ji(),objectId:pe}),Q("endobj"),oe},Eo=f.__private__.putPages=function(){var k,O,te=[];for(k=1;k<=dn;k++)ut[k].objId=wn(),ut[k].contentsObjId=wn();for(k=1;k<=dn;k++)te.push(Li({number:k,data:be[k],objId:ut[k].objId,contentsObjId:ut[k].contentsObjId,mediaBox:ut[k].mediaBox,cropBox:ut[k].cropBox,bleedBox:ut[k].bleedBox,trimBox:ut[k].trimBox,artBox:ut[k].artBox,userUnit:ut[k].userUnit,rootDictionaryObjId:qn,resourceDictionaryObjId:Sn}));Mt(qn,!0),Q("<</Type /Pages");var oe="/Kids [";for(O=0;O<dn;O++)oe+=te[O]+" 0 R ";Q(oe+"]"),Q("/Count "+dn),Q(">>"),Q("endobj"),Nt.publish("postPutPages")},va=function(k){Nt.publish("putFont",{font:k,out:Q,newObject:xn,putStream:Nr}),k.isAlreadyPutted!==!0&&(k.objectNumber=xn(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Yu(k.postScriptName)),Q("/Subtype /Type1"),typeof k.encoding=="string"&&Q("/Encoding /"+k.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Tr=function(){for(var k in Ft)Ft.hasOwnProperty(k)&&(d===!1||d===!0&&h.hasOwnProperty(k))&&va(Ft[k])},au=function(k){k.objectNumber=xn();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[P(k.x),P(k.y),P(k.x+k.width),P(k.y+k.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var te=k.pages[1].join(`
`);Nr({data:te,additionalKeyValues:O,objectId:k.objectNumber}),Q("endobj")},lu=function(){for(var k in jn)jn.hasOwnProperty(k)&&au(jn[k])},vm=function(k,O){var te,oe=[],pe=1/(O-1);for(te=0;te<1;te+=pe)oe.push(te);if(oe.push(1),k[0].offset!=0){var we={offset:0,color:k[0].color};k.unshift(we)}if(k[k.length-1].offset!=1){var Pe={offset:1,color:k[k.length-1].color};k.push(Pe)}for(var $e="",Xe=0,mt=0;mt<oe.length;mt++){for(te=oe[mt];te>k[Xe+1].offset;)Xe++;var ht=k[Xe].offset,Pt=(te-ht)/(k[Xe+1].offset-ht),mn=k[Xe].color,kn=k[Xe+1].color;$e+=Z(Math.round((1-Pt)*mn[0]+Pt*kn[0]).toString(16))+Z(Math.round((1-Pt)*mn[1]+Pt*kn[1]).toString(16))+Z(Math.round((1-Pt)*mn[2]+Pt*kn[2]).toString(16))}return $e.trim()},_1=function(k,O){O||(O=21);var te=xn(),oe=vm(k.colors,O),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+O+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nr({data:oe,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:te}),Q("endobj"),k.objectNumber=xn(),Q("<< /ShadingType "+k.type),Q("/ColorSpace /DeviceRGB");var we="/Coords ["+P(parseFloat(k.coords[0]))+" "+P(parseFloat(k.coords[1]))+" ";k.type===2?we+=P(parseFloat(k.coords[2]))+" "+P(parseFloat(k.coords[3])):we+=P(parseFloat(k.coords[2]))+" "+P(parseFloat(k.coords[3]))+" "+P(parseFloat(k.coords[4]))+" "+P(parseFloat(k.coords[5])),Q(we+="]"),k.matrix&&Q("/Matrix ["+k.matrix.toString()+"]"),Q("/Function "+te+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},A1=function(k,O){var te=wn(),oe=xn();O.push({resourcesOid:te,objectOid:oe}),k.objectNumber=oe;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+k.boundingBox.map(P).join(" ")+"]"}),pe.push({key:"XStep",value:P(k.xStep)}),pe.push({key:"YStep",value:P(k.yStep)}),pe.push({key:"Resources",value:te+" 0 R"}),k.matrix&&pe.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),Nr({data:k.stream,additionalKeyValues:pe,objectId:k.objectNumber}),Q("endobj")},cu=function(k){var O;for(O in It)It.hasOwnProperty(O)&&(It[O]instanceof yc?_1(It[O]):It[O]instanceof vd&&A1(It[O],k))},bm=function(k){for(var O in k.objectNumber=xn(),Q("<<"),k)switch(O){case"opacity":Q("/ca "+H(k[O]));break;case"stroke-opacity":Q("/CA "+H(k[O]))}Q(">>"),Q("endobj")},N1=function(){var k;for(k in un)un.hasOwnProperty(k)&&bm(un[k])},gh=function(){for(var k in Q("/XObject <<"),jn)jn.hasOwnProperty(k)&&jn[k].objectNumber>=0&&Q("/"+k+" "+jn[k].objectNumber+" 0 R");Nt.publish("putXobjectDict"),Q(">>")},T1=function(){Er.oid=xn(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Er.v),Q("/R "+Er.r),Q("/U <"+Er.toHexString(Er.U)+">"),Q("/O <"+Er.toHexString(Er.O)+">"),Q("/P "+Er.P),Q(">>"),Q("endobj")},xm=function(){for(var k in Q("/Font <<"),Ft)Ft.hasOwnProperty(k)&&(d===!1||d===!0&&h.hasOwnProperty(k))&&Q("/"+k+" "+Ft[k].objectNumber+" 0 R");Q(">>")},E1=function(){if(Object.keys(It).length>0){for(var k in Q("/Shading <<"),It)It.hasOwnProperty(k)&&It[k]instanceof yc&&It[k].objectNumber>=0&&Q("/"+k+" "+It[k].objectNumber+" 0 R");Nt.publish("putShadingPatternDict"),Q(">>")}},uu=function(k){if(Object.keys(It).length>0){for(var O in Q("/Pattern <<"),It)It.hasOwnProperty(O)&&It[O]instanceof f.TilingPattern&&It[O].objectNumber>=0&&It[O].objectNumber<k&&Q("/"+O+" "+It[O].objectNumber+" 0 R");Nt.publish("putTilingPatternDict"),Q(">>")}},P1=function(){if(Object.keys(un).length>0){var k;for(k in Q("/ExtGState <<"),un)un.hasOwnProperty(k)&&un[k].objectNumber>=0&&Q("/"+k+" "+un[k].objectNumber+" 0 R");Nt.publish("putGStateDict"),Q(">>")}},Ln=function(k){Mt(k.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xm(),E1(),uu(k.objectOid),P1(),gh(),Q(">>"),Q("endobj")},wm=function(){var k=[];Tr(),N1(),lu(),cu(k),Nt.publish("putResources"),k.forEach(Ln),Ln({resourcesOid:Sn,objectOid:Number.MAX_SAFE_INTEGER}),Nt.publish("postPutResources")},Sm=function(){Nt.publish("putAdditionalObjects");for(var k=0;k<ke.length;k++){var O=ke[k];Mt(O.objId,!0),Q(O.content),Q("endobj")}Nt.publish("postPutAdditionalObjects")},km=function(k){Yt[k.fontName]=Yt[k.fontName]||{},Yt[k.fontName][k.fontStyle]=k.id},yh=function(k,O,te,oe,pe){var we={id:"F"+(Object.keys(Ft).length+1).toString(10),postScriptName:k,fontName:O,fontStyle:te,encoding:oe,isStandardFont:pe||!1,metadata:{}};return Nt.publish("addFont",{font:we,instance:this}),Ft[we.id]=we,km(we),we.id},M1=function(k){for(var O=0,te=Te.length;O<te;O++){var oe=yh.call(this,k[O][0],k[O][1],k[O][2],Te[O][3],!0);d===!1&&(h[oe]=!0);var pe=k[O][0].split("-");km({id:oe,fontName:pe[0],fontStyle:pe[1]||""})}Nt.publish("addFonts",{fonts:Ft,dictionary:Yt})},Es=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(oe){var O=oe.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var te="Error in function "+O.split(`
`)[0].split("<")[0]+": "+oe.message;if(!ct.console)throw new Error(te);ct.console.error(te,oe),ct.alert&&alert(te)}},k.foo.bar=k,k.foo},du=function(k,O){var te,oe,pe,we,Pe,$e,Xe,mt,ht;if(pe=(O=O||{}).sourceEncoding||"Unicode",Pe=O.outputEncoding,(O.autoencode||Pe)&&Ft[yt].metadata&&Ft[yt].metadata[pe]&&Ft[yt].metadata[pe].encoding&&(we=Ft[yt].metadata[pe].encoding,!Pe&&Ft[yt].encoding&&(Pe=Ft[yt].encoding),!Pe&&we.codePages&&(Pe=we.codePages[0]),typeof Pe=="string"&&(Pe=we[Pe]),Pe)){for(Xe=!1,$e=[],te=0,oe=k.length;te<oe;te++)(mt=Pe[k.charCodeAt(te)])?$e.push(String.fromCharCode(mt)):$e.push(k[te]),$e[te].charCodeAt(0)>>8&&(Xe=!0);k=$e.join("")}for(te=k.length;Xe===void 0&&te!==0;)k.charCodeAt(te-1)>>8&&(Xe=!0),te--;if(!Xe)return k;for($e=O.noBOM?[]:[254,255],te=0,oe=k.length;te<oe;te++){if((ht=(mt=k.charCodeAt(te))>>8)>>8)throw new Error("Character at position "+te+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$e.push(ht),$e.push(mt-(ht<<8))}return String.fromCharCode.apply(void 0,$e)},di=f.__private__.pdfEscape=f.pdfEscape=function(k,O){return du(k,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vh=f.__private__.beginPage=function(k){be[++dn]=[],ut[dn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},_m(dn),fe(be[U])},Cm=function(k,O){var te,oe,pe;switch(n=O||n,typeof k=="string"&&(te=v(k.toLowerCase()),Array.isArray(te)&&(oe=te[0],pe=te[1])),Array.isArray(k)&&(oe=k[0]*Be,pe=k[1]*Be),isNaN(oe)&&(oe=i[0],pe=i[1]),(oe>14400||pe>14400)&&(Ht.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),pe=Math.min(14400,pe)),i=[oe,pe],n.substr(0,1)){case"l":pe>oe&&(i=[pe,oe]);break;case"p":oe>pe&&(i=[pe,oe])}vh(i),Mm(Sh),Q(Ps),Ch!==0&&Q(Ch+" J"),_h!==0&&Q(_h+" j"),Nt.publish("addPage",{pageNumber:dn})},j1=function(k){k>0&&k<=dn&&(be.splice(k,1),ut.splice(k,1),dn--,U>dn&&(U=dn),this.setPage(U))},_m=function(k){k>0&&k<=dn&&(U=k)},L1=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return be.length-1},Am=function(k,O,te){var oe,pe=void 0;return te=te||{},k=k!==void 0?k:Ft[yt].fontName,O=O!==void 0?O:Ft[yt].fontStyle,oe=k.toLowerCase(),Yt[oe]!==void 0&&Yt[oe][O]!==void 0?pe=Yt[oe][O]:Yt[k]!==void 0&&Yt[k][O]!==void 0?pe=Yt[k][O]:te.disableWarning===!1&&Ht.warn("Unable to look up font label for font '"+k+"', '"+O+"'. Refer to getFontList() for available fonts."),pe||te.noFallback||(pe=Yt.times[O])==null&&(pe=Yt.times.normal),pe},O1=f.__private__.putInfo=function(){var k=xn(),O=function(oe){return oe};for(var te in u!==null&&(O=Er.encryptor(k,0)),Q("<<"),Q("/Producer ("+di(O("jsPDF "+lt.version))+")"),tt)tt.hasOwnProperty(te)&&tt[te]&&Q("/"+te.substr(0,1).toUpperCase()+te.substr(1)+" ("+di(O(tt[te]))+")");Q("/CreationDate ("+di(O(ne))+")"),Q(">>"),Q("endobj")},bh=f.__private__.putCatalog=function(k){var O=(k=k||{}).rootDictionaryObjId||qn;switch(xn(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+O+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var te=""+Oe;te.substr(te.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+H(Oe)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Qe&&Q("/PageMode /"+Qe),Nt.publish("putCatalog"),Q(">>"),Q("endobj")},I1=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(re+1)),Q("/Root "+re+" 0 R"),Q("/Info "+(re-1)+" 0 R"),u!==null&&Q("/Encrypt "+Er.oid+" 0 R"),Q("/ID [ <"+Y+"> <"+Y+"> ]"),Q(">>")},R1=f.__private__.putHeader=function(){Q("%PDF-"+p),Q("%ºß¬à")},D1=f.__private__.putXRef=function(){var k="0000000000";Q("xref"),Q("0 "+(re+1)),Q("0000000000 65535 f ");for(var O=1;O<=re;O++)typeof se[O]=="function"?Q((k+se[O]()).slice(-10)+" 00000 n "):se[O]!==void 0?Q((k+se[O]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Po=f.__private__.buildDocument=function(){Se(),fe(ce),Nt.publish("buildDocument"),R1(),Eo(),Sm(),wm(),u!==null&&T1(),O1(),bh();var k=he;return D1(),I1(),Q("startxref"),Q(""+k),Q("%%EOF"),fe(be[U]),ce.join(`
`)},hu=f.__private__.getBlob=function(k){return new Blob([Ie(k)],{type:"application/pdf"})},fu=f.output=f.__private__.output=Es(function(k,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",k){case void 0:return Po();case"save":f.save(O.filename);break;case"arraybuffer":return Ie(Po());case"blob":return hu(Po());case"bloburi":case"bloburl":if(ct.URL!==void 0&&typeof ct.URL.createObjectURL=="function")return ct.URL&&ct.URL.createObjectURL(hu(Po()))||void 0;Ht.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var te="",oe=Po();try{te=Z5(oe)}catch{te=Z5(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+O.filename+";base64,"+te;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(pe=O.pdfObjectUrl,we="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",$e=ct.open();return $e!==null&&$e.document.write(Pe),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ct)==="[object Window]"){var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',mt=ct.open();if(mt!==null){mt.document.write(Xe);var ht=this;mt.document.documentElement.querySelector("#pdfViewer").onload=function(){mt.document.title=O.filename,mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ht.output("bloburl"))}}return mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ct)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',mn=ct.open();if(mn!==null&&(mn.document.write(Pt),mn.document.title=O.filename),mn||typeof safari>"u")return mn;break;case"datauri":case"dataurl":return ct.document.location.href=this.output("datauristring",O);default:return null}}),Nm=function(k){return Array.isArray(Pi)===!0&&Pi.indexOf(k)>-1};switch(r){case"pt":Be=1;break;case"mm":Be=72/25.4;break;case"cm":Be=72/2.54;break;case"in":Be=72;break;case"px":Be=Nm("px_scaling")==1?.75:96/72;break;case"pc":case"em":Be=12;break;case"ex":Be=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Be=r}var Er=null;K(),X();var F1=function(k){return u!==null?Er.encryptor(k,0):function(O){return O}},Tm=f.__private__.getPageInfo=f.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[k].objId,pageNumber:k,pageContext:ut[k]}},dt=f.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in ut)if(ut[O].objId===k)break;return Tm(O)},B1=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ut[U].objId,pageNumber:U,pageContext:ut[U]}};f.addPage=function(){return Cm.apply(this,arguments),this},f.setPage=function(){return _m.apply(this,arguments),fe.call(this,be[U]),this},f.insertPage=function(k){return this.addPage(),this.movePage(U,k),this},f.movePage=function(k,O){var te,oe;if(k>O){te=be[k],oe=ut[k];for(var pe=k;pe>O;pe--)be[pe]=be[pe-1],ut[pe]=ut[pe-1];be[O]=te,ut[O]=oe,this.setPage(O)}else if(k<O){te=be[k],oe=ut[k];for(var we=k;we<O;we++)be[we]=be[we+1],ut[we]=ut[we+1];be[O]=te,ut[O]=oe,this.setPage(O)}return this},f.deletePage=function(){return j1.apply(this,arguments),this},f.__private__.text=f.text=function(k,O,te,oe,pe){var we,Pe,$e,Xe,mt,ht,Pt,mn,kn,Wn=(oe=oe||{}).scope||this;if(typeof k=="number"&&typeof O=="number"&&(typeof te=="string"||Array.isArray(te))){var Pr=te;te=O,O=k,k=Pr}if(arguments[3]instanceof Ye?(E("The transform parameter of text() with a Matrix value"),kn=pe):($e=arguments[4],Xe=arguments[5],Je(Pt=arguments[3])==="object"&&Pt!==null||(typeof $e=="string"&&(Xe=$e,$e=null),typeof Pt=="string"&&(Xe=Pt,Pt=null),typeof Pt=="number"&&($e=Pt,Pt=null),oe={flags:Pt,angle:$e,align:Xe})),isNaN(O)||isNaN(te)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Wn;var rr="",Ms=!1,Oi=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:ql,io=Wn.internal.scaleFactor;function Dm(Xt){return Xt=Xt.split("	").join(Array(oe.TabLen||9).join(" ")),di(Xt,Pt)}function Ph(Xt){for(var Jt,In=Xt.concat(),Qn=[],Io=In.length;Io--;)typeof(Jt=In.shift())=="string"?Qn.push(Jt):Array.isArray(Xt)&&(Jt.length===1||Jt[1]===void 0&&Jt[2]===void 0)?Qn.push(Jt[0]):Qn.push([Jt[0],Jt[1],Jt[2]]);return Qn}function Mh(Xt,Jt){var In;if(typeof Xt=="string")In=Jt(Xt)[0];else if(Array.isArray(Xt)){for(var Qn,Io,Bh=Xt.concat(),Tu=[],Vm=Bh.length;Vm--;)typeof(Qn=Bh.shift())=="string"?Tu.push(Jt(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(Io=Jt(Qn[0],Qn[1],Qn[2]),Tu.push([Io[0],Io[1],Io[2]]));In=Tu}return In}var bu=!1,jh=!0;if(typeof k=="string")bu=!0;else if(Array.isArray(k)){var Lh=k.concat();Pe=[];for(var xu,yr=Lh.length;yr--;)(typeof(xu=Lh.shift())!="string"||Array.isArray(xu)&&typeof xu[0]!="string")&&(jh=!1);bu=jh}if(bu===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var wu=Me/Wn.internal.scaleFactor,Su=wu*(Oi-1);switch(oe.baseline){case"bottom":te-=Su;break;case"top":te+=wu-Su;break;case"hanging":te+=wu-2*Su;break;case"middle":te+=wu/2-Su}if((ht=oe.maxWidth||0)>0&&(typeof k=="string"?k=Wn.splitTextToSize(k,ht):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Xt,Jt){return Xt.concat(Wn.splitTextToSize(Jt,ht))},[]))),we={text:k,x:O,y:te,options:oe,mutex:{pdfEscape:di,activeFontKey:yt,fonts:Ft,activeFontSize:Me}},Nt.publish("preProcessText",we),k=we.text,$e=(oe=we.options).angle,!(kn instanceof Ye)&&$e&&typeof $e=="number"){$e*=Math.PI/180,oe.rotationDirection===0&&($e=-$e),S===x.ADVANCED&&($e=-$e);var ku=Math.cos($e),Oh=Math.sin($e);kn=new Ye(ku,Oh,-Oh,ku,0,0)}else $e&&$e instanceof Ye&&(kn=$e);S!==x.ADVANCED||kn||(kn=es),(mt=oe.charSpace||gu)!==void 0&&(rr+=P(I(mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mn=oe.horizontalScale)!==void 0&&(rr+=P(100*mn)+` Tz
`),oe.lang;var hi=-1,Y1=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Ih=Wn.internal.getCurrentPageInfo().pageContext;switch(Y1){case 0:case!1:case"fill":hi=0;break;case 1:case!0:case"stroke":hi=1;break;case 2:case"fillThenStroke":hi=2;break;case 3:case"invisible":hi=3;break;case 4:case"fillAndAddForClipping":hi=4;break;case 5:case"strokeAndAddPathForClipping":hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hi=6;break;case 7:case"addToPathForClipping":hi=7}var Fm=Ih.usedRenderingMode!==void 0?Ih.usedRenderingMode:-1;hi!==-1?rr+=hi+` Tr
`:Fm!==-1&&(rr+=`0 Tr
`),hi!==-1&&(Ih.usedRenderingMode=hi),Xe=oe.align||"left";var ts,Cu=Me*Oi,Bm=Wn.internal.pageSize.getWidth(),zm=Ft[yt];mt=oe.charSpace||gu,ht=oe.maxWidth||0,Pt=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var Sa=[],Kl=function(Xt){return Wn.getStringUnitWidth(Xt,{font:zm,charSpace:mt,fontSize:Me,doKerning:!1})*Me/io};if(Object.prototype.toString.call(k)==="[object Array]"){var fi;Pe=Ph(k),Xe!=="left"&&(ts=Pe.map(Kl));var Xr,ka=0;if(Xe==="right"){O-=ts[0],k=[],yr=Pe.length;for(var jo=0;jo<yr;jo++)jo===0?(Xr=ro(O),fi=Mo(te)):(Xr=I(ka-ts[jo]),fi=-Cu),k.push([Pe[jo],Xr,fi]),ka=ts[jo]}else if(Xe==="center"){O-=ts[0]/2,k=[],yr=Pe.length;for(var Lo=0;Lo<yr;Lo++)Lo===0?(Xr=ro(O),fi=Mo(te)):(Xr=I((ka-ts[Lo])/2),fi=-Cu),k.push([Pe[Lo],Xr,fi]),ka=ts[Lo]}else if(Xe==="left"){k=[],yr=Pe.length;for(var _u=0;_u<yr;_u++)k.push(Pe[_u])}else if(Xe==="justify"&&zm.encoding==="Identity-H"){k=[],yr=Pe.length,ht=ht!==0?ht:Bm;for(var Oo=0,On=0;On<yr;On++)if(fi=On===0?Mo(te):-Cu,Xr=On===0?ro(O):Oo,On<yr-1){var Rh=I((ht-ts[On])/(Pe[On].split(" ").length-1)),Jr=Pe[On].split(" ");k.push([Jr[0]+" ",Xr,fi]),Oo=0;for(var ns=1;ns<Jr.length;ns++){var Au=(Kl(Jr[ns-1]+" "+Jr[ns])-Kl(Jr[ns]))*io+Rh;ns==Jr.length-1?k.push([Jr[ns],Au,0]):k.push([Jr[ns]+" ",Au,0]),Oo-=Au}}else k.push([Pe[On],Xr,fi]);k.push(["",Oo,0])}else{if(Xe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],yr=Pe.length,ht=ht!==0?ht:Bm,On=0;On<yr;On++)fi=On===0?Mo(te):-Cu,Xr=On===0?ro(O):0,On<yr-1?Sa.push(P(I((ht-ts[On])/(Pe[On].split(" ").length-1)))):Sa.push(0),k.push([Pe[On],Xr,fi])}}var $m=typeof oe.R2L=="boolean"?oe.R2L:Ve;$m===!0&&(k=Mh(k,function(Xt,Jt,In){return[Xt.split("").reverse().join(""),Jt,In]})),we={text:k,x:O,y:te,options:oe,mutex:{pdfEscape:di,activeFontKey:yt,fonts:Ft,activeFontSize:Me}},Nt.publish("postProcessText",we),k=we.text,Ms=we.mutex.isHex||!1;var Dh=Ft[yt].encoding;Dh!=="WinAnsiEncoding"&&Dh!=="StandardEncoding"||(k=Mh(k,function(Xt,Jt,In){return[Dm(Xt),Jt,In]})),Pe=Ph(k),k=[];for(var Gl,Yl,Ca,Xl=0,Nu=1,Jl=Array.isArray(Pe[0])?Nu:Xl,_a="",Fh=function(Xt,Jt,In){var Qn="";return In instanceof Ye?(In=typeof oe.angle=="number"?ui(In,new Ye(1,0,0,1,Xt,Jt)):ui(new Ye(1,0,0,1,Xt,Jt),In),S===x.ADVANCED&&(In=ui(new Ye(1,0,0,-1,0,0),In)),Qn=In.join(" ")+` Tm
`):Qn=P(Xt)+" "+P(Jt)+` Td
`,Qn},rs=0;rs<Pe.length;rs++){switch(_a="",Jl){case Nu:Ca=(Ms?"<":"(")+Pe[rs][0]+(Ms?">":")"),Gl=parseFloat(Pe[rs][1]),Yl=parseFloat(Pe[rs][2]);break;case Xl:Ca=(Ms?"<":"(")+Pe[rs]+(Ms?">":")"),Gl=ro(O),Yl=Mo(te)}Sa!==void 0&&Sa[rs]!==void 0&&(_a=Sa[rs]+` Tw
`),rs===0?k.push(_a+Fh(Gl,Yl,kn)+Ca):Jl===Xl?k.push(_a+Ca):Jl===Nu&&k.push(_a+Fh(Gl,Yl,kn)+Ca)}k=Jl===Xl?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var is=`BT
/`;return is+=yt+" "+Me+` Tf
`,is+=P(Me*Oi)+` TL
`,is+=Wl+`
`,is+=rr,is+=k,Q(is+="ET"),h[yt]=!0,Wn};var z1=f.__private__.clip=f.clip=function(k){return Q(k==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return z1("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var no=f.__private__.isValidStyle=function(k){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(O=!0),O};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(k){return no(k)&&(c=k),this};var Em=f.__private__.getStyle=f.getStyle=function(k){var O=c;switch(k){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=k}return O},Pm=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(k){return pu("f",k),this},f.fillEvenOdd=function(k){return pu("f*",k),this},f.fillStroke=function(k){return pu("B",k),this},f.fillStrokeEvenOdd=function(k){return pu("B*",k),this};var pu=function(k,O){Je(O)==="object"?V1(O,k):Q(k)},xh=function(k){k===null||S===x.ADVANCED&&k===void 0||(k=Em(k),Q(k))};function $1(k,O,te,oe,pe){var we=new vd(O||this.boundingBox,te||this.xStep,oe||this.yStep,this.gState,pe||this.matrix);we.stream=this.stream;var Pe=k+"$$"+this.cloneIndex+++"$$";return Rt(Pe,we),we}var V1=function(k,O){var te=To[k.key],oe=It[te];if(oe instanceof yc)Q("q"),Q(U1(O)),oe.gState&&f.setGState(oe.gState),Q(k.matrix.toString()+" cm"),Q("/"+te+" sh"),Q("Q");else if(oe instanceof vd){var pe=new Ye(1,0,0,-1,0,wa());k.matrix&&(pe=pe.multiply(k.matrix||es),te=$1.call(oe,k.key,k.boundingBox,k.xStep,k.yStep,pe).id),Q("q"),Q("/Pattern cs"),Q("/"+te+" scn"),oe.gState&&f.setGState(oe.gState),Q(O),Q("Q")}},U1=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wh=f.moveTo=function(k,O){return Q(P(I(k))+" "+P(F(O))+" m"),this},Ul=f.lineTo=function(k,O){return Q(P(I(k))+" "+P(F(O))+" l"),this},ba=f.curveTo=function(k,O,te,oe,pe,we){return Q([P(I(k)),P(F(O)),P(I(te)),P(F(oe)),P(I(pe)),P(F(we)),"c"].join(" ")),this};f.__private__.line=f.line=function(k,O,te,oe,pe){if(isNaN(k)||isNaN(O)||isNaN(te)||isNaN(oe)||!no(pe))throw new Error("Invalid arguments passed to jsPDF.line");return S===x.COMPAT?this.lines([[te-k,oe-O]],k,O,[1,1],pe||"S"):this.lines([[te-k,oe-O]],k,O,[1,1]).stroke()},f.__private__.lines=f.lines=function(k,O,te,oe,pe,we){var Pe,$e,Xe,mt,ht,Pt,mn,kn,Wn,Pr,rr,Ms;if(typeof k=="number"&&(Ms=te,te=O,O=k,k=Ms),oe=oe||[1,1],we=we||!1,isNaN(O)||isNaN(te)||!Array.isArray(k)||!Array.isArray(oe)||!no(pe)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wh(O,te),Pe=oe[0],$e=oe[1],mt=k.length,Pr=O,rr=te,Xe=0;Xe<mt;Xe++)(ht=k[Xe]).length===2?(Pr=ht[0]*Pe+Pr,rr=ht[1]*$e+rr,Ul(Pr,rr)):(Pt=ht[0]*Pe+Pr,mn=ht[1]*$e+rr,kn=ht[2]*Pe+Pr,Wn=ht[3]*$e+rr,Pr=ht[4]*Pe+Pr,rr=ht[5]*$e+rr,ba(Pt,mn,kn,Wn,Pr,rr));return we&&Pm(),xh(pe),this},f.path=function(k){for(var O=0;O<k.length;O++){var te=k[O],oe=te.c;switch(te.op){case"m":wh(oe[0],oe[1]);break;case"l":Ul(oe[0],oe[1]);break;case"c":ba.apply(this,oe);break;case"h":Pm()}}return this},f.__private__.rect=f.rect=function(k,O,te,oe,pe){if(isNaN(k)||isNaN(O)||isNaN(te)||isNaN(oe)||!no(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return S===x.COMPAT&&(oe=-oe),Q([P(I(k)),P(F(O)),P(I(te)),P(I(oe)),"re"].join(" ")),xh(pe),this},f.__private__.triangle=f.triangle=function(k,O,te,oe,pe,we,Pe){if(isNaN(k)||isNaN(O)||isNaN(te)||isNaN(oe)||isNaN(pe)||isNaN(we)||!no(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[te-k,oe-O],[pe-te,we-oe],[k-pe,O-we]],k,O,[1,1],Pe,!0),this},f.__private__.roundedRect=f.roundedRect=function(k,O,te,oe,pe,we,Pe){if(isNaN(k)||isNaN(O)||isNaN(te)||isNaN(oe)||isNaN(pe)||isNaN(we)||!no(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*te),we=Math.min(we,.5*oe),this.lines([[te-2*pe,0],[pe*$e,0,pe,we-we*$e,pe,we],[0,oe-2*we],[0,we*$e,-pe*$e,we,-pe,we],[2*pe-te,0],[-pe*$e,0,-pe,-we*$e,-pe,-we],[0,2*we-oe],[0,-we*$e,pe*$e,-we,pe,-we]],k+pe,O,[1,1],Pe,!0),this},f.__private__.ellipse=f.ellipse=function(k,O,te,oe,pe){if(isNaN(k)||isNaN(O)||isNaN(te)||isNaN(oe)||!no(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*te,Pe=4/3*(Math.SQRT2-1)*oe;return wh(k+te,O),ba(k+te,O-Pe,k+we,O-oe,k,O-oe),ba(k-we,O-oe,k-te,O-Pe,k-te,O),ba(k-te,O+Pe,k-we,O+oe,k,O+oe),ba(k+we,O+oe,k+te,O+Pe,k+te,O),xh(pe),this},f.__private__.circle=f.circle=function(k,O,te,oe){if(isNaN(k)||isNaN(O)||isNaN(te)||!no(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,O,te,te,oe)},f.setFont=function(k,O,te){return te&&(O=T(O,te)),yt=Am(k,O,{disableWarning:!1}),this};var q1=f.__private__.getFont=f.getFont=function(){return Ft[Am.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var k,O,te={};for(k in Yt)if(Yt.hasOwnProperty(k))for(O in te[k]=[],Yt[k])Yt[k].hasOwnProperty(O)&&te[k].push(O);return te},f.addFont=function(k,O,te,oe,pe){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(te=T(te,oe)),pe=pe||"Identity-H",yh.call(this,k,O,te,pe)};var ql,Sh=t.lineWidth||.200025,mu=f.__private__.getLineWidth=f.getLineWidth=function(){return Sh},Mm=f.__private__.setLineWidth=f.setLineWidth=function(k){return Sh=k,Q(P(I(k))+" w"),this};f.__private__.setLineDash=lt.API.setLineDash=lt.API.setLineDashPattern=function(k,O){if(k=k||[],O=O||0,isNaN(O)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(te){return P(I(te))}).join(" "),O=P(I(O)),Q("["+k+"] "+O+" d"),this};var jm=f.__private__.getLineHeight=f.getLineHeight=function(){return Me*ql};f.__private__.getLineHeight=f.getLineHeight=function(){return Me*ql};var Lm=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(ql=k),this},Om=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ql};Lm(t.lineHeight);var ro=f.__private__.getHorizontalCoordinate=function(k){return I(k)},Mo=f.__private__.getVerticalCoordinate=function(k){return S===x.ADVANCED?k:ut[U].mediaBox.topRightY-ut[U].mediaBox.bottomLeftY-I(k)},W1=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(k){return P(ro(k))},xa=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(k){return P(Mo(k))},Ps=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ar(Ps)},f.__private__.setStrokeColor=f.setDrawColor=function(k,O,te,oe){return Ps=Mi({ch1:k,ch2:O,ch3:te,ch4:oe,pdfColorType:"draw",precision:2}),Q(Ps),this};var kh=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ar(kh)},f.__private__.setFillColor=f.setFillColor=function(k,O,te,oe){return kh=Mi({ch1:k,ch2:O,ch3:te,ch4:oe,pdfColorType:"fill",precision:2}),Q(kh),this};var Wl=t.textColor||"0 g",H1=f.__private__.getTextColor=f.getTextColor=function(){return Ar(Wl)};f.__private__.setTextColor=f.setTextColor=function(k,O,te,oe){return Wl=Mi({ch1:k,ch2:O,ch3:te,ch4:oe,pdfColorType:"text",precision:3}),this};var gu=t.charSpace,K1=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(gu||0)};f.__private__.setCharSpace=f.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return gu=k,this};var Ch=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(k){var O=f.CapJoinStyles[k];if(O===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ch=O,Q(O+" J"),this};var _h=0;f.__private__.setLineJoin=f.setLineJoin=function(k){var O=f.CapJoinStyles[k];if(O===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _h=O,Q(O+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(P(I(k))+" M"),this},f.GState=sv,f.setGState=function(k){(k=typeof k=="string"?un[Ei[k]]:Im(null,k)).equals(Ts)||(Q("/"+k.id+" gs"),Ts=k)};var Im=function(k,O){if(!k||!Ei[k]){var te=!1;for(var oe in un)if(un.hasOwnProperty(oe)&&un[oe].equals(O)){te=!0;break}if(te)O=un[oe];else{var pe="GS"+(Object.keys(un).length+1).toString(10);un[pe]=O,O.id=pe}return k&&(Ei[k]=O.id),Nt.publish("addGState",O),O}};f.addGState=function(k,O){return Im(k,O),this},f.saveGraphicsState=function(){return Q("q"),Zi.push({key:yt,size:Me,color:Wl}),this},f.restoreGraphicsState=function(){Q("Q");var k=Zi.pop();return yt=k.key,Me=k.size,Wl=k.color,Ts=null,this},f.setCurrentTransformationMatrix=function(k){return Q(k.toString()+" cm"),this},f.comment=function(k){return Q("#"+k),this};var yu=function(k,O){var te=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return te},set:function(we){isNaN(we)||(te=parseFloat(we))}});var oe=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(we){isNaN(we)||(oe=parseFloat(we))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(we){pe=we.toString()}}),this},Ah=function(k,O,te,oe){yu.call(this,k,O),this.type="rect";var pe=te||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Pe){isNaN(Pe)||(pe=parseFloat(Pe))}});var we=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Pe){isNaN(Pe)||(we=parseFloat(Pe))}}),this},Nh=function(){this.page=dn,this.currentPage=U,this.pages=be.slice(0),this.pagesContext=ut.slice(0),this.x=Un,this.y=At,this.matrix=Ti,this.width=Hl(U),this.height=wa(U),this.outputDestination=ve,this.id="",this.objectNumber=-1};Nh.prototype.restore=function(){dn=this.page,U=this.currentPage,ut=this.pagesContext,be=this.pages,Un=this.x,At=this.y,Ti=this.matrix,Th(U,this.width),Eh(U,this.height),ve=this.outputDestination};var Rm=function(k,O,te,oe,pe){gr.push(new Nh),dn=U=0,be=[],Un=k,At=O,Ti=pe,vh([te,oe])},G1=function(k){if(ci[k])gr.pop().restore();else{var O=new Nh,te="Xo"+(Object.keys(jn).length+1).toString(10);O.id=te,ci[k]=te,jn[te]=O,Nt.publish("addFormObject",O),gr.pop().restore()}};for(var vu in f.beginFormObject=function(k,O,te,oe,pe){return Rm(k,O,te,oe,pe),this},f.endFormObject=function(k){return G1(k),this},f.doFormObject=function(k,O){var te=jn[ci[k]];return Q("q"),Q(O.toString()+" cm"),Q("/"+te.id+" Do"),Q("Q"),this},f.getFormObject=function(k){var O=jn[ci[k]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},f.save=function(k,O){return k=k||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?(hc(hu(Po()),k),typeof hc.unload=="function"&&ct.setTimeout&&setTimeout(hc.unload,911),this):new Promise(function(te,oe){try{var pe=hc(hu(Po()),k);typeof hc.unload=="function"&&ct.setTimeout&&setTimeout(hc.unload,911),te(pe)}catch(we){oe(we.message)}})},lt.API)lt.API.hasOwnProperty(vu)&&(vu==="events"&&lt.API.events.length?function(k,O){var te,oe,pe;for(pe=O.length-1;pe!==-1;pe--)te=O[pe][0],oe=O[pe][1],k.subscribe.apply(k,[te].concat(typeof oe=="function"?[oe]:oe))}(Nt,lt.API.events):f[vu]=lt.API[vu]);var Hl=f.getPageWidth=function(k){return(ut[k=k||U].mediaBox.topRightX-ut[k].mediaBox.bottomLeftX)/Be},Th=f.setPageWidth=function(k,O){ut[k].mediaBox.topRightX=O*Be+ut[k].mediaBox.bottomLeftX},wa=f.getPageHeight=function(k){return(ut[k=k||U].mediaBox.topRightY-ut[k].mediaBox.bottomLeftY)/Be},Eh=f.setPageHeight=function(k,O){ut[k].mediaBox.topRightY=O*Be+ut[k].mediaBox.bottomLeftY};return f.internal={pdfEscape:di,getStyle:Em,getFont:q1,getFontSize:je,getCharSpace:K1,getTextColor:H1,getLineHeight:jm,getLineHeightFactor:Om,getLineWidth:mu,write:Re,getHorizontalCoordinate:ro,getVerticalCoordinate:Mo,getCoordinateString:W1,getVerticalCoordinateString:xa,collections:{},newObject:xn,newAdditionalObject:hn,newObjectDeferred:wn,newObjectDeferredBegin:Mt,getFilters:ji,putStream:Nr,events:Nt,scaleFactor:Be,pageSize:{getWidth:function(){return Hl(U)},setWidth:function(k){Th(U,k)},getHeight:function(){return wa(U)},setHeight:function(k){Eh(U,k)}},encryptionOptions:u,encryption:Er,getEncryptor:F1,output:fu,getNumberOfPages:L1,pages:be,out:Q,f2:H,f3:j,getPageInfo:Tm,getPageInfoByObjId:dt,getCurrentPageInfo:B1,getPDFVersion:y,Point:yu,Rectangle:Ah,Matrix:Ye,hasHotfix:Nm},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Hl(U)},set:function(k){Th(U,k)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return wa(U)},set:function(k){Eh(U,k)},enumerable:!0,configurable:!0}),M1.call(f,Te),yt="F1",Cm(i,n),Nt.publish("initialized"),f}Gu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Gu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Gu.prototype.processOwnerPassword=function(t,e){return tS(eS(e).substr(0,5),t)},Gu.prototype.encryptor=function(t,e){var n=eS(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return tS(n,r)}},sv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Je(t)!==Je(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},lt.API={events:[]},lt.version="2.5.2";var _n=lt.API,JC=1,ou=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ft=function(t){return t.toFixed(2)},Ra=function(t){return t.toFixed(5)};_n.__acroform__={};var Ni=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},wP=function(t){return t*JC},lo=function(t){var e=new O8,n=We.internal.getHeight(t)||0,r=We.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ft(r)),Number(ft(n))],e},Cue=_n.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},_ue=_n.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Aue=_n.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Fn=_n.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Aue(t,e-1)},Bn=_n.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cue(t,e-1)},zn=_n.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _ue(t,e-1)},Nue=_n.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(ft(l.lowerLeft_X)),Number(ft(l.lowerLeft_Y)),Number(ft(l.upperRight_X)),Number(ft(l.upperRight_Y))]},Tue=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=nS(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ft(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=lo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},nS=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(j){return j.split(`
`)}):i.map(function(j){return[j]});var s=n,o=We.internal.getHeight(t)||0;o=o<0?-o:o;var a=We.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(j,I,q){if(j+1<i.length){var F=I+" "+i[j+1][0];return m0(F,t,q).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,d=m0("3",t,s).height,h=t.multiline?o-s:(o-d)/2,f=h+=2,p=0,y=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+m0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var v="",x=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var _=!1;if(i[S].length!==1&&b!==i[S].length-1){if((d+2)*(x+2)+2>o)continue e;v+=i[S][b],_=!0,y=S,S--}else{v=(v+=i[S][b]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var A=parseInt(S),T=l(A,v,s),P=S>=i.length-1;if(T&&!P){v+=" ",b=0;continue}if(T||P){if(P)y=A;else if(t.multiline&&(d+2)*(x+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(x+2)+2>o)continue e;y=A}}for(var E="",z=p;z<=y;z++){var H=i[z];if(t.multiline){if(z===y){E+=H[b]+" ",b=(b+1)%H.length;continue}if(z===p){E+=H[H.length-1]+" ";continue}}E+=H[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,u=m0(E,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=ft(c)+" "+ft(f)+` Td
`,e+="("+ou(E)+`) Tj
`,e+=-ft(c)+` 0 Td
`,f=-(s+2),u=0,p=_?y:y+1,x++,v=""}break}return r.text=e,r.fontSize=s,r},m0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Eue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Pue=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Mue=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Je(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},jue=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(eo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Eue)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");JC=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new I8,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Pue(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Nue(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=We.createDefaultAppearanceStream(a),Je(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=Tue(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var p=f[o];typeof p=="function"&&(p=p.call(i,a)),d+="/"+o+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=f)=="function"&&(p=p.call(i,a)),d+="/"+o+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&Mue(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},L8=_n.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Je(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+ou(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+ou(r(t))+")"},go=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};go.prototype.toString=function(){return this.objId+" 0 R"},go.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},go.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:L8(i,this.objId,this.scope)}):i instanceof go?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var O8=function(){go.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ni(O8,go);var I8=function(){go.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ou(n(t))+")"}},set:function(n){t=n}})};Ni(I8,go);var eo=function t(){go.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fn(e,3)},set:function(v){v?this.F=Bn(e,3):this.F=zn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ov)return;s="FieldObject"+t.FieldNum++}var v=function(x){return x};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+ou(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(v){a=v}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/JC:c},set:function(v){c=v}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof ov||this instanceof Bc))return a2(d,this.objId,this.scope)},set:function(v){v=v.toString(),d=v}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof cr?h:a2(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof cr?v:v.substr(0,1)==="("?Uu(v.substr(1,v.length-2)):Uu(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof cr?Uu(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof cr?"/"+v:v}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof cr?f:a2(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=this instanceof cr?v:v.substr(0,1)==="("?Uu(v.substr(1,v.length-2)):Uu(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof cr?Uu(f.substr(1,f.length-1)):f},set:function(v){v=v.toString(),f=this instanceof cr?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(v){v=!!v,y=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(v){p=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,1)},set:function(v){v?this.Ff=Bn(this.Ff,1):this.Ff=zn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,2)},set:function(v){v?this.Ff=Bn(this.Ff,2):this.Ff=zn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,3)},set:function(v){v?this.Ff=Bn(this.Ff,3):this.Ff=zn(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');b=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(b){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Ni(eo,go);var Md=function(){eo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return L8(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,18)},set:function(n){n?this.Ff=Bn(this.Ff,18):this.Ff=zn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Bn(this.Ff,19):this.Ff=zn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,20)},set:function(n){n?(this.Ff=Bn(this.Ff,20),e.sort()):this.Ff=zn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,22)},set:function(n){n?this.Ff=Bn(this.Ff,22):this.Ff=zn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(n){n?this.Ff=Bn(this.Ff,23):this.Ff=zn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,27)},set:function(n){n?this.Ff=Bn(this.Ff,27):this.Ff=zn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ni(Md,eo);var jd=function(){Md.call(this),this.fontName="helvetica",this.combo=!1};Ni(jd,Md);var Ld=function(){jd.call(this),this.combo=!0};Ni(Ld,jd);var G0=function(){Ld.call(this),this.edit=!0};Ni(G0,Ld);var cr=function(){eo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,15)},set:function(n){n?this.Ff=Bn(this.Ff,15):this.Ff=zn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,16)},set:function(n){n?this.Ff=Bn(this.Ff,16):this.Ff=zn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,17)},set:function(n){n?this.Ff=Bn(this.Ff,17):this.Ff=zn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(n){n?this.Ff=Bn(this.Ff,26):this.Ff=zn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ou(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Je(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ni(cr,eo);var Y0=function(){cr.call(this),this.pushButton=!0};Ni(Y0,cr);var Od=function(){cr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ni(Od,cr);var ov=function(){var t,e;eo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+ou(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Je(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=We.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ni(ov,eo),Od.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Od.prototype.createOption=function(t){var e=new ov;return e.Parent=this,e.optionName=t,this.Kids.push(e),Lue.call(this.scope,e),e};var X0=function(){cr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=We.CheckBox.createAppearanceStream()};Ni(X0,cr);var Bc=function(){eo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,13)},set:function(e){e?this.Ff=Bn(this.Ff,13):this.Ff=zn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,21)},set:function(e){e?this.Ff=Bn(this.Ff,21):this.Ff=zn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,23)},set:function(e){e?this.Ff=Bn(this.Ff,23):this.Ff=zn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,24)},set:function(e){e?this.Ff=Bn(this.Ff,24):this.Ff=zn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,25)},set:function(e){e?this.Ff=Bn(this.Ff,25):this.Ff=zn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,26)},set:function(e){e?this.Ff=Bn(this.Ff,26):this.Ff=zn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ni(Bc,eo);var J0=function(){Bc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fn(this.Ff,14)},set:function(t){t?this.Ff=Bn(this.Ff,14):this.Ff=zn(this.Ff,14)}}),this.password=!0};Ni(J0,Bc);var We={CheckBox:{createAppearanceStream:function(){return{N:{On:We.CheckBox.YesNormal},D:{On:We.CheckBox.YesPushDown,Off:We.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=nS(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ft(We.internal.getWidth(t))+" "+ft(We.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ft(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=We.internal.getHeight(t),o=We.internal.getWidth(t),a=nS(t,t.caption);return i.push("1 g"),i.push("0 0 "+ft(o)+" "+ft(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ft(o-1)+" "+ft(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ft(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ft(We.internal.getWidth(t))+" "+ft(We.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:We.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=We.RadioButton.Circle.YesNormal,e.D[t]=We.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=We.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ra(We.internal.getWidth(t)/2)+" "+Ra(We.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*We.internal.Bezier_C).toFixed(5)),o=Number((r*We.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ra(We.internal.getWidth(t)/2)+" "+Ra(We.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ra(We.internal.getWidth(t)/2)+" "+Ra(We.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.getWidth(t)<=We.internal.getHeight(t)?We.internal.getWidth(t)/4:We.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*We.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ra(We.internal.getWidth(t)/2)+" "+Ra(We.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:We.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=We.RadioButton.Cross.YesNormal,e.D[t]=We.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=We.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ft(We.internal.getWidth(t)-2)+" "+ft(We.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ft(r.x1.x)+" "+ft(r.x1.y)+" m"),n.push(ft(r.x2.x)+" "+ft(r.x2.y)+" l"),n.push(ft(r.x4.x)+" "+ft(r.x4.y)+" m"),n.push(ft(r.x3.x)+" "+ft(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=We.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ft(We.internal.getWidth(t))+" "+ft(We.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ft(We.internal.getWidth(t)-2)+" "+ft(We.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ft(n.x1.x)+" "+ft(n.x1.y)+" m"),r.push(ft(n.x2.x)+" "+ft(n.x2.y)+" l"),r.push(ft(n.x4.x)+" "+ft(n.x4.y)+" m"),r.push(ft(n.x3.x)+" "+ft(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ft(We.internal.getWidth(t))+" "+ft(We.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};We.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=We.internal.getWidth(t),n=We.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},We.internal.getWidth=function(t){var e=0;return Je(t)==="object"&&(e=wP(t.Rect[2])),e},We.internal.getHeight=function(t){var e=0;return Je(t)==="object"&&(e=wP(t.Rect[3])),e};var Lue=_n.addField=function(t){if(jue(this,t),!(t instanceof eo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};_n.AcroFormChoiceField=Md,_n.AcroFormListBox=jd,_n.AcroFormComboBox=Ld,_n.AcroFormEditBox=G0,_n.AcroFormButton=cr,_n.AcroFormPushButton=Y0,_n.AcroFormRadioButton=Od,_n.AcroFormCheckBox=X0,_n.AcroFormTextField=Bc,_n.AcroFormPasswordField=J0,_n.AcroFormAppearance=We,_n.AcroForm={ChoiceField:Md,ListBox:jd,ComboBox:Ld,EditBox:G0,Button:cr,PushButton:Y0,RadioButton:Od,CheckBox:X0,TextField:Bc,PasswordField:J0,Appearance:We},lt.AcroForm={ChoiceField:Md,ListBox:jd,ComboBox:Ld,EditBox:G0,Button:cr,PushButton:Y0,RadioButton:Od,CheckBox:X0,TextField:Bc,PasswordField:J0,Appearance:We};function R8(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(j,I){var q,F,ne,Y,ee,X=e;if((I=I||e)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(T(j))for(ee in n)for(ne=n[ee],q=0;q<ne.length;q+=1){for(Y=!0,F=0;F<ne[q].length;F+=1)if(ne[q][F]!==void 0&&ne[q][F]!==j[F]){Y=!1;break}if(Y===!0){X=ee;break}}else for(ee in n)for(ne=n[ee],q=0;q<ne.length;q+=1){for(Y=!0,F=0;F<ne[q].length;F+=1)if(ne[q][F]!==void 0&&ne[q][F]!==j.charCodeAt(F)){Y=!1;break}if(Y===!0){X=ee;break}}return X===e&&I!==e&&(X=I),X},i=function j(I){for(var q=this.internal.write,F=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:I.width}),Y.push({key:"Height",value:I.height}),I.colorSpace===b.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===b.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var ee="",X=0,ie=I.transparency.length;X<ie;X++)ee+=I.transparency[X]+" "+I.transparency[X]+" ";Y.push({key:"Mask",value:"["+ee+"]"})}I.sMask!==void 0&&Y.push({key:"SMask",value:I.objectId+1+" 0 R"});var V=I.filter!==void 0?["/"+I.filter]:void 0;if(F({data:I.data,additionalKeyValues:Y,alreadyAppliedFilters:V,objectId:I.objectId}),q("endobj"),"sMask"in I&&I.sMask!==void 0){var K="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,M={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:K,data:I.sMask};"filter"in I&&(M.filter=I.filter),j.call(this,M)}if(I.colorSpace===b.INDEXED){var U=this.internal.newObject();F({data:E(new Uint8Array(I.palette)),objectId:U}),q("endobj")}},s=function(){var j=this.internal.collections.addImage_images;for(var I in j)i.call(this,j[I])},o=function(){var j,I=this.internal.collections.addImage_images,q=this.internal.write;for(var F in I)q("/I"+(j=I[F]).index,j.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var j=this.internal.collections.addImage_images;return a.call(this),j},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(j){return typeof t["process"+j.toUpperCase()]=="function"},d=function(j){return Je(j)==="object"&&j.nodeType===1},h=function(j,I){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var q=""+j.getAttribute("src");if(q.indexOf("data:image/")===0)return np(unescape(q).split("base64,").pop());var F=t.loadFile(q,!0);if(F!==void 0)return F}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ne;switch(I){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return np(j.toDataURL(ne,1).split("base64,").pop())}},f=function(j){var I=this.internal.collections.addImage_images;if(I){for(var q in I)if(j===I[q].alias)return I[q]}},p=function(j,I,q){return j||I||(j=-96,I=-96),j<0&&(j=-1*q.width*72/j/this.internal.scaleFactor),I<0&&(I=-1*q.height*72/I/this.internal.scaleFactor),j===0&&(j=I*q.width/q.height),I===0&&(I=j*q.height/q.width),[j,I]},y=function(j,I,q,F,ne,Y){var ee=p.call(this,q,F,ne),X=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,V=l.call(this);if(q=ee[0],F=ee[1],V[ne.index]=ne,Y){Y*=Math.PI/180;var K=Math.cos(Y),M=Math.sin(Y),U=function(Z){return Z.toFixed(4)},G=[U(K),U(M),U(-1*M),U(K),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,X(j),ie(I+F),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([X(q),"0","0",X(F),"0","0","cm"].join(" "))):this.internal.write([X(q),"0","0",X(F),X(j),ie(I+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},b=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(j){var I,q,F=0;if(typeof j=="string")for(q=j.length,I=0;I<q;I++)F=(F<<5)-F+j.charCodeAt(I),F|=0;else if(T(j))for(q=j.byteLength/2,I=0;I<q;I++)F=(F<<5)-F+j[I],F|=0;return F},S=t.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var I=!0;return j.length===0&&(I=!1),j.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(I=!1),I},_=t.__addimage__.extractImageFromDataUrl=function(j){var I=(j=j||"").split("base64,"),q=null;if(I.length===2){var F=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(F)&&(q={mimeType:F[1],charset:F[2],data:I[1]})}return q},A=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(j){return A()&&j instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(j){return A()&&typeof Uint32Array<"u"&&(j instanceof Int8Array||j instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array)},P=t.__addimage__.binaryStringToUint8Array=function(j){for(var I=j.length,q=new Uint8Array(I),F=0;F<I;F++)q[F]=j.charCodeAt(F);return q},E=t.__addimage__.arrayBufferToBinaryString=function(j){for(var I="",q=T(j)?j:new Uint8Array(j),F=0;F<q.length;F+=8192)I+=String.fromCharCode.apply(null,q.subarray(F,F+8192));return I};t.addImage=function(){var j,I,q,F,ne,Y,ee,X,ie;if(typeof arguments[1]=="number"?(I=e,q=arguments[1],F=arguments[2],ne=arguments[3],Y=arguments[4],ee=arguments[5],X=arguments[6],ie=arguments[7]):(I=arguments[1],q=arguments[2],F=arguments[3],ne=arguments[4],Y=arguments[5],ee=arguments[6],X=arguments[7],ie=arguments[8]),Je(j=arguments[0])==="object"&&!d(j)&&"imageData"in j){var V=j;j=V.imageData,I=V.format||I||e,q=V.x||q||0,F=V.y||F||0,ne=V.w||V.width||ne,Y=V.h||V.height||Y,ee=V.alias||ee,X=V.compression||X,ie=V.rotation||V.angle||ie}var K=this.internal.getFilters();if(X===void 0&&K.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(q)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=z.call(this,j,I,ee,X);return y.call(this,q,F,ne,Y,M,ie),this};var z=function(j,I,q,F){var ne,Y,ee;if(typeof j=="string"&&r(j)===e){j=unescape(j);var X=H(j,!1);(X!==""||(X=t.loadFile(j,!0))!==void 0)&&(j=X)}if(d(j)&&(j=h(j,I)),I=r(j,I),!u(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ee=q)==null||ee.length===0)&&(q=function(ie){return typeof ie=="string"||T(ie)?x(ie):T(ie.data)?x(ie.data):null}(j)),(ne=f.call(this,q))||(A()&&(j instanceof Uint8Array||I==="RGBA"||(Y=j,j=P(j))),ne=this["process"+I.toUpperCase()](j,c.call(this),q,function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in t.image_compression?ie:v.NONE}(F),Y)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},H=t.__addimage__.convertBase64ToBinaryString=function(j,I){var q;I=typeof I!="boolean"||I;var F,ne="";if(typeof j=="string"){F=(q=_(j))!==null?q.data:j;try{ne=np(F)}catch(Y){if(I)throw S(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(j){var I,q,F="";if(d(j)&&(j=h(j)),typeof j=="string"&&r(j)===e&&((F=H(j,!1))===""&&(F=t.loadFile(j)||""),j=F),q=r(j),!u(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!A()||j instanceof Uint8Array||(j=P(j)),!(I=this["process"+q.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=q,I}})(lt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};lt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(y.objId),x=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(v(r.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(v(x))+") >>",y.content=s;var S=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(y.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var _=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(p(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var A=this.annotations._nameMap[r.options.name];r.options.pageNumber=A.page,r.options.top=A.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var T=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+T+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(lt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},a=t.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&s(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var b=0,v=n,x="",S=0;for(b=0;b<y.length;b+=1)v[y.charCodeAt(b)]!==void 0?(S++,typeof(v=v[y.charCodeAt(b)])=="number"&&(x+=String.fromCharCode(v),v=n,S=0),b===y.length-1&&(v=n,x+=y.charAt(b-(S-1)),b-=S-1,S=0)):(v=n,x+=y.charAt(b-S),b-=S,S=0);return x};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(y,b,v){return o(y)?s(y)===!1?-1:!c(y)||!o(b)&&!o(v)||!o(v)&&a(b)||a(y)&&!o(b)||a(y)&&l(b)||a(y)&&a(b)?0:u(y)&&o(b)&&!a(b)&&o(v)&&c(v)?3:a(y)||!o(v)?1:2:-1},f=function(y){var b=0,v=0,x=0,S="",_="",A="",T=(y=y||"").split("\\s+"),P=[];for(b=0;b<T.length;b+=1){for(P.push(""),v=0;v<T[b].length;v+=1)S=T[b][v],_=T[b][v-1],A=T[b][v+1],o(S)?(x=h(S,_,A),P[b]+=x!==-1?String.fromCharCode(e[S.charCodeAt(0)][x]):S):P[b]+=S;P[b]=d(P[b])}return P.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var y,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(b)){var x=0;for(v=[],x=0;x<b.length;x+=1)Array.isArray(b[x])?v.push([f(b[x][0]),b[x][1],b[x][2]]):v.push([f(b[x])]);y=v}else y=f(b);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",p])}(lt.API),lt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(lt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(y){p=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,p=0,y=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var v=c.maxWidth;v>0?typeof l=="string"?l=this.splitTextToSize(l,v):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,_){return S.concat(b.splitTextToSize(_,v))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)f<(y=this.getStringUnitWidth(l[x],{font:d})*u)&&(f=y);return f!==0&&(p=l.length),{w:f/=h,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,p,y,b,v=[],x=[],S=[],_={},A={},T=[],P=[],E=(h=h||{}).autoSize||!1,z=h.printHeaders!==!1,H=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,j=h.margins||Object.assign({width:this.getPageWidth()},e),I=typeof h.padding=="number"?h.padding:3,q=h.headerBackgroundColor||"#c8c8c8",F=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=H,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=F,this.setFontSize(H),d==null)x=v=Object.keys(u[0]),S=v.map(function(){return"left"});else if(Array.isArray(d)&&Je(d[0])==="object")for(v=d.map(function(V){return V.name}),x=d.map(function(V){return V.prompt||V.name||""}),S=d.map(function(V){return V.align||"left"}),f=0;f<d.length;f+=1)A[d[f].name]=d[f].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(x=v=d,S=v.map(function(){return"left"}));if(E||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<v.length;f+=1){for(_[b=v[f]]=u.map(function(V){return V[b]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=_[b],this.setFont(void 0,"normal"),y=0;y<p.length;y+=1)T.push(this.getTextDimensions(p[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);A[b]=Math.max.apply(null,T)+I+I,T=[]}if(z){var ne={};for(f=0;f<v.length;f+=1)ne[v[f]]={},ne[v[f]].text=x[f],ne[v[f]].align=S[f];var Y=a.call(this,ne,A);P=v.map(function(V){return new s(l,c,A[V],Y,ne[V].text,void 0,ne[V].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var ee=d.reduce(function(V,K){return V[K.name]=K.align,V},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var X=a.call(this,u[f],A);for(y=0;y<v.length;y+=1){var ie=u[f][v[y]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:y,data:ie},this),o.call(this,new s(l,c,A[v[y]],X,ie,f+2,ee[v[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var p=l[f];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,p){return Math.max(f,p)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(lt.API);var D8={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},F8=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],rS=R8(F8),B8=[100,200,300,400,500,600,700,800,900],Oue=R8(B8);function iS(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return D8[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof rS[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function SP(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Iue={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kP={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function CP(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Rue(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Iue,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=iS(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+CP(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=rS[l],d=u<=rS.normal?-1:1,h=SP(c,F8,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=D8[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Oue[l],d=SP(c,B8,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+CP(s)+"'.");return o}function _P(t){return t.trimLeft()}function Due(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Fue(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var g0,AP,NP,l2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=M;Object.defineProperty(this,"pdf",{get:function(){return U}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(fe){G=!!fe}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(fe){Z=!!fe}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(fe){isNaN(fe)||(re=fe)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(fe){isNaN(fe)||(se=fe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(fe){var Q;typeof fe=="number"?Q=[fe,fe,fe,fe]:((Q=new Array(4))[0]=fe[0],Q[1]=fe.length>=2?fe[1]:Q[0],Q[2]=fe.length>=3?fe[2]:Q[0],Q[3]=fe.length>=4?fe[3]:Q[1]),c.margin=Q}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(fe){ce=fe}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(fe){he=fe}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(fe){ke=fe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(fe){fe instanceof u&&(c=fe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(fe){c.path=fe}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(fe){be=fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(fe){var Q;Q=h(fe),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(fe){var Q=h(fe);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(fe){["butt","round","square"].indexOf(fe)!==-1&&(this.ctx.lineCap=fe,this.pdf.setLineCap(fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(fe){isNaN(fe)||(this.ctx.lineWidth=fe,this.pdf.setLineWidth(fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(fe){["bevel","round","miter"].indexOf(fe)!==-1&&(this.ctx.lineJoin=fe,this.pdf.setLineJoin(fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(fe){isNaN(fe)||(this.ctx.miterLimit=fe,this.pdf.setMiterLimit(fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(fe){this.ctx.textBaseline=fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(fe){["right","end","center","left","start"].indexOf(fe)!==-1&&(this.ctx.textAlign=fe)}});var ye=null;function ve(fe,Q){if(ye===null){var Re=function(Ie){var Te=[];return Object.keys(Ie).forEach(function(Me){Ie[Me].forEach(function(Oe){var je=null;switch(Oe){case"bold":je={family:Me,weight:"bold"};break;case"italic":je={family:Me,style:"italic"};break;case"bolditalic":je={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":je={family:Me}}je!==null&&(je.ref={name:Me,style:Oe},Te.push(je))})}),Te}(fe.getFontList());ye=function(Ie){for(var Te={},Me=0;Me<Ie.length;++Me){var Oe=iS(Ie[Me]),je=Oe.family,Ve=Oe.stretch,Qe=Oe.style,it=Oe.weight;Te[je]=Te[je]||{},Te[je][Ve]=Te[je][Ve]||{},Te[je][Ve][Qe]=Te[je][Ve][Qe]||{},Te[je][Ve][Qe][it]=Oe}return Te}(Re.concat(Q))}return ye}var Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(fe){ye=null,Se=fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(fe){var Q;if(this.ctx.font=fe,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(fe))!==null){var Re=Q[1],Ie=(Q[2],Q[3]),Te=Q[4],Me=(Q[5],Q[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Te)[2];Te=Math.floor(Oe==="px"?parseFloat(Te)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Te)*this.pdf.getFontSize():parseFloat(Te)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Te);var je=function(tt){var yt,Be,Un=[],At=tt.trim();if(At==="")return l2;if(At in kP)return[kP[At]];for(;At!=="";){switch(Be=null,yt=(At=_P(At)).charAt(0)){case'"':case"'":Be=Due(At.substring(1),yt);break;default:Be=Fue(At)}if(Be===null||(Un.push(Be[0]),(At=_P(Be[1]))!==""&&At.charAt(0)!==","))return l2;At=At.replace(/^,/,"")}return Un}(Me);if(this.fontFaces){var Ve=Rue(ve(this.pdf,this.fontFaces),je.map(function(tt){return{family:tt,stretch:"normal",weight:Ie,style:Re}}));this.pdf.setFont(Ve.ref.name,Ve.ref.style)}else{var Qe="";(Ie==="bold"||parseInt(Ie,10)>=700||Re==="bold")&&(Qe="bold"),Re==="italic"&&(Qe+="italic"),Qe.length===0&&(Qe="normal");for(var it="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},St=0;St<je.length;St++){if(this.pdf.internal.getFont(je[St],Qe,{noFallback:!0,disableWarning:!0})!==void 0){it=je[St];break}if(Qe==="bolditalic"&&this.pdf.internal.getFont(je[St],"bold",{noFallback:!0,disableWarning:!0})!==void 0)it=je[St],Qe="bold";else if(this.pdf.internal.getFont(je[St],"normal",{noFallback:!0,disableWarning:!0})!==void 0){it=je[St],Qe="normal";break}}if(it===""){for(var Ot=0;Ot<je.length;Ot++)if(pt[je[Ot]]){it=pt[je[Ot]];break}}it=it===""?"Times":it,this.pdf.setFont(it,Qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(fe){this.ctx.globalCompositeOperation=fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(fe){this.ctx.globalAlpha=fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(fe){this.ctx.lineDashOffset=fe,K.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(fe){this.ctx.lineDash=fe,K.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(fe){this.ctx.ignoreClearRect=!!fe}})};d.prototype.setLineDash=function(M){this.lineDash=M},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){_.call(this,"fill",!1)},d.prototype.stroke=function(){_.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(M,U){if(isNaN(M)||isNaN(U))throw Ht.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(M,U));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(M,U)},d.prototype.closePath=function(){var M=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Je(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){M=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},d.prototype.lineTo=function(M,U){if(isNaN(M)||isNaN(U))throw Ht.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(M,U));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},d.prototype.quadraticCurveTo=function(M,U,G,Z){if(isNaN(G)||isNaN(Z)||isNaN(M)||isNaN(U))throw Ht.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(G,Z)),se=this.ctx.transform.applyToPoint(new o(M,U));this.path.push({type:"qct",x1:se.x,y1:se.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},d.prototype.bezierCurveTo=function(M,U,G,Z,re,se){if(isNaN(re)||isNaN(se)||isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z))throw Ht.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(re,se)),he=this.ctx.transform.applyToPoint(new o(M,U)),ke=this.ctx.transform.applyToPoint(new o(G,Z));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:ke.x,y2:ke.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},d.prototype.arc=function(M,U,G,Z,re,se){if(isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z)||isNaN(re))throw Ht.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(M,U));M=ce.x,U=ce.y;var he=this.ctx.transform.applyToPoint(new o(0,G)),ke=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(he.x-ke.x,2)+Math.pow(he.y-ke.y,2))}Math.abs(re-Z)>=2*Math.PI&&(Z=0,re=2*Math.PI),this.path.push({type:"arc",x:M,y:U,radius:G,startAngle:Z,endAngle:re,counterclockwise:se})},d.prototype.arcTo=function(M,U,G,Z,re){throw new Error("arcTo not implemented.")},d.prototype.rect=function(M,U,G,Z){if(isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z))throw Ht.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,U),this.lineTo(M+G,U),this.lineTo(M+G,U+Z),this.lineTo(M,U+Z),this.lineTo(M,U),this.lineTo(M+G,U),this.lineTo(M,U)},d.prototype.fillRect=function(M,U,G,Z){if(isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z))throw Ht.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,U,G,Z),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},d.prototype.strokeRect=function(M,U,G,Z){if(isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z))throw Ht.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(M,U,G,Z),this.stroke())},d.prototype.clearRect=function(M,U,G,Z){if(isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z))throw Ht.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,U,G,Z))},d.prototype.save=function(M){M=typeof M!="boolean"||M;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},d.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(U),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(M){var U,G,Z,re;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))U=0,G=0,Z=0,re=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(se!==null)U=parseInt(se[1]),G=parseInt(se[2]),Z=parseInt(se[3]),re=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)U=parseInt(se[1]),G=parseInt(se[2]),Z=parseInt(se[3]),re=parseFloat(se[4]);else{if(re=1,typeof M=="string"&&M.charAt(0)!=="#"){var ce=new P8(M);M=ce.ok?ce.toHex():"#000000"}M.length===4?(U=M.substring(1,2),U+=U,G=M.substring(2,3),G+=G,Z=M.substring(3,4),Z+=Z):(U=M.substring(1,3),G=M.substring(3,5),Z=M.substring(5,7)),U=parseInt(U,16),G=parseInt(G,16),Z=parseInt(Z,16)}}return{r:U,g:G,b:Z,a:re,style:M}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(M,U,G,Z){if(isNaN(U)||isNaN(G)||typeof M!="string")throw Ht.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var re=X(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;I.call(this,{text:M,x:U,y:G,scale:se,angle:re,align:this.textAlign,maxWidth:Z})}},d.prototype.strokeText=function(M,U,G,Z){if(isNaN(U)||isNaN(G)||typeof M!="string")throw Ht.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){Z=isNaN(Z)?void 0:Z;var re=X(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;I.call(this,{text:M,x:U,y:G,scale:se,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:Z})}},d.prototype.measureText=function(M){if(typeof M!="string")throw Ht.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,G=this.pdf.internal.scaleFactor,Z=U.internal.getFontSize(),re=U.getStringUnitWidth(M)*Z/U.internal.scaleFactor,se=function(ce){var he=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new se({width:re*=Math.round(96*G/72*1e4)/1e4})},d.prototype.scale=function(M,U){if(isNaN(M)||isNaN(U))throw Ht.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new l(M,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.rotate=function(M){if(isNaN(M))throw Ht.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.translate=function(M,U){if(isNaN(M)||isNaN(U))throw Ht.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new l(1,0,0,1,M,U);this.ctx.transform=this.ctx.transform.multiply(G)},d.prototype.transform=function(M,U,G,Z,re,se){if(isNaN(M)||isNaN(U)||isNaN(G)||isNaN(Z)||isNaN(re)||isNaN(se))throw Ht.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new l(M,U,G,Z,re,se);this.ctx.transform=this.ctx.transform.multiply(ce)},d.prototype.setTransform=function(M,U,G,Z,re,se){M=isNaN(M)?1:M,U=isNaN(U)?0:U,G=isNaN(G)?0:G,Z=isNaN(Z)?1:Z,re=isNaN(re)?0:re,se=isNaN(se)?0:se,this.ctx.transform=new l(M,U,G,Z,re,se)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(M,U,G,Z,re,se,ce,he,ke){var be=this.pdf.getImageProperties(M),ye=1,ve=1,Se=1,fe=1;Z!==void 0&&he!==void 0&&(Se=he/Z,fe=ke/re,ye=be.width/Z*he/Z,ve=be.height/re*ke/re),se===void 0&&(se=U,ce=G,U=0,G=0),Z!==void 0&&he===void 0&&(he=Z,ke=re),Z===void 0&&he===void 0&&(he=be.width,ke=be.height);for(var Q,Re=this.ctx.transform.decompose(),Ie=X(Re.rotate.shx),Te=new l,Me=(Te=(Te=(Te=Te.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new a(se-U*Se,ce-G*fe,Z*ye,re*ve)),Oe=b.call(this,Me),je=[],Ve=0;Ve<Oe.length;Ve+=1)je.indexOf(Oe[Ve])===-1&&je.push(Oe[Ve]);if(S(je),this.autoPaging)for(var Qe=je[0],it=je[je.length-1],pt=Qe;pt<it+1;pt++){this.pdf.setPage(pt);var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=pt===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=pt===1?0:tt+(pt-2)*yt;if(this.ctx.clip_path.length!==0){var Un=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Q,this.posX+this.margin[3],-Be+Ot+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=Un}var At=JSON.parse(JSON.stringify(Me));At=x([At],this.posX+this.margin[3],-Be+Ot+this.ctx.prevPageLastElemOffset)[0];var Ti=(pt>Qe||pt<it)&&y.call(this);Ti&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,yt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",At.x,At.y,At.w,At.h,null,null,Ie),Ti&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Ie)};var b=function(M,U,G){var Z=[];U=U||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Z.push(Math.floor((M.y+re)/G)+1);break;case"arc":Z.push(Math.floor((M.y+re-M.radius)/G)+1),Z.push(Math.floor((M.y+re+M.radius)/G)+1);break;case"qct":var se=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Z.push(Math.floor((se.y+re)/G)+1),Z.push(Math.floor((se.y+se.h+re)/G)+1);break;case"bct":var ce=V(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Z.push(Math.floor((ce.y+re)/G)+1),Z.push(Math.floor((ce.y+ce.h+re)/G)+1);break;case"rect":Z.push(Math.floor((M.y+re)/G)+1),Z.push(Math.floor((M.y+M.h+re)/G)+1)}for(var he=0;he<Z.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<Z[he];)v.call(this);return Z},v=function(){var M=this.fillStyle,U=this.strokeStyle,G=this.font,Z=this.lineCap,re=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=U,this.font=G,this.lineCap=Z,this.lineWidth=re,this.lineJoin=se},x=function(M,U,G){for(var Z=0;Z<M.length;Z++)switch(M[Z].type){case"bct":M[Z].x2+=U,M[Z].y2+=G;case"qct":M[Z].x1+=U,M[Z].y1+=G;case"mt":case"lt":case"arc":default:M[Z].x+=U,M[Z].y+=G}return M},S=function(M){return M.sort(function(U,G){return U-G})},_=function(M,U){for(var G,Z,re=this.fillStyle,se=this.strokeStyle,ce=this.lineCap,he=this.lineWidth,ke=Math.abs(he*this.ctx.transform.scaleX),be=this.lineJoin,ye=JSON.parse(JSON.stringify(this.path)),ve=JSON.parse(JSON.stringify(this.path)),Se=[],fe=0;fe<ve.length;fe++)if(ve[fe].x!==void 0)for(var Q=b.call(this,ve[fe]),Re=0;Re<Q.length;Re+=1)Se.indexOf(Q[Re])===-1&&Se.push(Q[Re]);for(var Ie=0;Ie<Se.length;Ie++)for(;this.pdf.internal.getNumberOfPages()<Se[Ie];)v.call(this);if(S(Se),this.autoPaging)for(var Te=Se[0],Me=Se[Se.length-1],Oe=Te;Oe<Me+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=re,this.strokeStyle=se,this.lineCap=ce,this.lineWidth=ke,this.lineJoin=be;var je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Oe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Oe===1?0:Qe+(Oe-2)*it;if(this.ctx.clip_path.length!==0){var St=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(G,this.posX+this.margin[3],-pt+Ve+this.ctx.prevPageLastElemOffset),A.call(this,M,!0),this.path=St}if(Z=JSON.parse(JSON.stringify(ye)),this.path=x(Z,this.posX+this.margin[3],-pt+Ve+this.ctx.prevPageLastElemOffset),U===!1||Oe===0){var Ot=(Oe>Te||Oe<Me)&&y.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],je,it,null).clip().discardPath()),A.call(this,M,U),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=ke,A.call(this,M,U),this.lineWidth=he;this.path=ye},A=function(M,U){if((M!=="stroke"||U||!p.call(this))&&(M==="stroke"||U||!f.call(this))){for(var G,Z,re=[],se=this.path,ce=0;ce<se.length;ce++){var he=se[ce];switch(he.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:he,deltas:[],abs:[]});break;case"lt":var ke=re.length;if(se[ce-1]&&!isNaN(se[ce-1].x)&&(G=[he.x-se[ce-1].x,he.y-se[ce-1].y],ke>0)){for(;ke>=0;ke--)if(re[ke-1].close!==!0&&re[ke-1].begin!==!0){re[ke-1].deltas.push(G),re[ke-1].abs.push(he);break}}break;case"bct":G=[he.x1-se[ce-1].x,he.y1-se[ce-1].y,he.x2-se[ce-1].x,he.y2-se[ce-1].y,he.x-se[ce-1].x,he.y-se[ce-1].y],re[re.length-1].deltas.push(G);break;case"qct":var be=se[ce-1].x+2/3*(he.x1-se[ce-1].x),ye=se[ce-1].y+2/3*(he.y1-se[ce-1].y),ve=he.x+2/3*(he.x1-he.x),Se=he.y+2/3*(he.y1-he.y),fe=he.x,Q=he.y;G=[be-se[ce-1].x,ye-se[ce-1].y,ve-se[ce-1].x,Se-se[ce-1].y,fe-se[ce-1].x,Q-se[ce-1].y],re[re.length-1].deltas.push(G);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(he)}}Z=U?null:M==="stroke"?"stroke":"fill";for(var Re=!1,Ie=0;Ie<re.length;Ie++)if(re[Ie].arc)for(var Te=re[Ie].abs,Me=0;Me<Te.length;Me++){var Oe=Te[Me];Oe.type==="arc"?E.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,U,!Re):q.call(this,Oe.x,Oe.y),Re=!0}else if(re[Ie].close===!0)this.pdf.internal.out("h"),Re=!1;else if(re[Ie].begin!==!0){var je=re[Ie].start.x,Ve=re[Ie].start.y;F.call(this,re[Ie].deltas,je,Ve),Re=!0}Z&&z.call(this,Z),U&&H.call(this)}},T=function(M){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-G;case"top":return M+U-G;case"hanging":return M+U-2*G;case"middle":return M+U/2-G;case"ideographic":return M;case"alphabetic":default:return M}},P=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(U,G){this.colorStops.push([U,G])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(M,U,G,Z,re,se,ce,he,ke){for(var be=Y.call(this,G,Z,re,se),ye=0;ye<be.length;ye++){var ve=be[ye];ye===0&&(ke?j.call(this,ve.x1+M,ve.y1+U):q.call(this,ve.x1+M,ve.y1+U)),ne.call(this,M,U,ve.x2,ve.y2,ve.x3,ve.y3,ve.x4,ve.y4)}he?H.call(this):z.call(this,ce)},z=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},H=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(M,U){this.pdf.internal.out(n(M)+" "+r(U)+" m")},I=function(M){var U;switch(M.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var G=this.pdf.getTextDimensions(M.text),Z=T.call(this,M.y),re=P.call(this,Z)-G.h,se=this.ctx.transform.applyToPoint(new o(M.x,Z)),ce=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var ke,be,ye,ve=this.ctx.transform.applyToRectangle(new a(M.x,Z,G.w,G.h)),Se=he.applyToRectangle(new a(M.x,re,G.w,G.h)),fe=b.call(this,Se),Q=[],Re=0;Re<fe.length;Re+=1)Q.indexOf(fe[Re])===-1&&Q.push(fe[Re]);if(S(Q),this.autoPaging)for(var Ie=Q[0],Te=Q[Q.length-1],Me=Ie;Me<Te+1;Me++){this.pdf.setPage(Me);var Oe=Me===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ve=this.pdf.internal.pageSize.height-this.margin[2],Qe=Ve-this.margin[0],it=this.pdf.internal.pageSize.width-this.margin[1],pt=it-this.margin[3],St=Me===1?0:je+(Me-2)*Qe;if(this.ctx.clip_path.length!==0){var Ot=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(ke,this.posX+this.margin[3],-1*St+Oe),A.call(this,"fill",!0),this.path=Ot}var tt=x([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-St+Oe+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*M.scale),ye=this.lineWidth,this.lineWidth=ye*M.scale);var yt=this.autoPaging!=="text";if(yt||tt.y+tt.h<=Ve){if(yt||tt.y>=Oe&&tt.x<=it){var Be=yt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||it-tt.x)[0],Un=x([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-St+Oe+this.ctx.prevPageLastElemOffset)[0],At=yt&&(Me>Ie||Me<Te)&&y.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Qe,null).clip().discardPath()),this.pdf.text(Be,Un.x,Un.y,{angle:M.angle,align:U,renderingMode:M.renderingMode}),At&&this.pdf.restoreGraphicsState()}}else tt.y<Ve&&(this.ctx.prevPageLastElemOffset+=Ve-tt.y);M.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=ye)}else M.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*M.scale),ye=this.lineWidth,this.lineWidth=ye*M.scale),this.pdf.text(M.text,se.x+this.posX,se.y+this.posY,{angle:M.angle,align:U,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=ye)},q=function(M,U,G,Z){G=G||0,Z=Z||0,this.pdf.internal.out(n(M+G)+" "+r(U+Z)+" l")},F=function(M,U,G){return this.pdf.lines(M,U,G,null,null)},ne=function(M,U,G,Z,re,se,ce,he){this.pdf.internal.out([e(i(G+M)),e(s(Z+U)),e(i(re+M)),e(s(se+U)),e(i(ce+M)),e(s(he+U)),"c"].join(" "))},Y=function(M,U,G,Z){for(var re=2*Math.PI,se=Math.PI/2;U>G;)U-=re;var ce=Math.abs(G-U);ce<re&&Z&&(ce=re-ce);for(var he=[],ke=Z?-1:1,be=U;ce>1e-5;){var ye=be+ke*Math.min(ce,se);he.push(ee.call(this,M,be,ye)),ce-=Math.abs(ye-be),be=ye}return he},ee=function(M,U,G){var Z=(G-U)/2,re=M*Math.cos(Z),se=M*Math.sin(Z),ce=re,he=-se,ke=ce*ce+he*he,be=ke+ce*re+he*se,ye=4/3*(Math.sqrt(2*ke*be)-be)/(ce*se-he*re),ve=ce-ye*he,Se=he+ye*ce,fe=ve,Q=-Se,Re=Z+U,Ie=Math.cos(Re),Te=Math.sin(Re);return{x1:M*Math.cos(U),y1:M*Math.sin(U),x2:ve*Ie-Se*Te,y2:ve*Te+Se*Ie,x3:fe*Ie-Q*Te,y3:fe*Te+Q*Ie,x4:M*Math.cos(G),y4:M*Math.sin(G)}},X=function(M){return 180*M/Math.PI},ie=function(M,U,G,Z,re,se){var ce=M+.5*(G-M),he=U+.5*(Z-U),ke=re+.5*(G-re),be=se+.5*(Z-se),ye=Math.min(M,re,ce,ke),ve=Math.max(M,re,ce,ke),Se=Math.min(U,se,he,be),fe=Math.max(U,se,he,be);return new a(ye,Se,ve-ye,fe-Se)},V=function(M,U,G,Z,re,se,ce,he){var ke,be,ye,ve,Se,fe,Q,Re,Ie,Te,Me,Oe,je,Ve,Qe=G-M,it=Z-U,pt=re-G,St=se-Z,Ot=ce-re,tt=he-se;for(be=0;be<41;be++)Ie=(Q=(ye=M+(ke=be/40)*Qe)+ke*((Se=G+ke*pt)-ye))+ke*(Se+ke*(re+ke*Ot-Se)-Q),Te=(Re=(ve=U+ke*it)+ke*((fe=Z+ke*St)-ve))+ke*(fe+ke*(se+ke*tt-fe)-Re),be==0?(Me=Ie,Oe=Te,je=Ie,Ve=Te):(Me=Math.min(Me,Ie),Oe=Math.min(Oe,Te),je=Math.max(je,Ie),Ve=Math.max(Ve,Te));return new a(Math.round(Me),Math.round(Oe),Math.round(je-Me),Math.round(Ve-Oe))},K=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,U,G=(M=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:U}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(lt.API),function(t){var e=function(s){var o,a,l,c,u,d,h,f,p,y;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(y=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)-(h=u%85))/85)%85,a.push(d+33,h+33,f+33,p+33,y+33)):a.push(122);return function(b,v){for(var x=v;x>0;x--)b.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,d=String,h="length",f=255,p="charCodeAt",y="slice",b="replace";for(s[y](-2),s=s[y](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[y](s[h]%5||5))[h];u>c;c+=5)a=52200625*(s[p](c)-33)+614125*(s[p](c+1)-33)+7225*(s[p](c+2)-33)+85*(s[p](c+3)-33)+(s[p](c+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(v,x){for(var S=x;S>0;S--)v.pop()}(l,o[h]),d.fromCharCode.apply(d,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Q5(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(lt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(p){var y=p.length,b=[],v=String.fromCharCode;for(h=0;h<y;h+=1)b.push(v(255&p.charCodeAt(h)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(lt.API),function(t){function e(){return(ct.html2canvas?Promise.resolve(ct.html2canvas):Cl(()=>import("./html2canvas.esm-f16e60ff.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ct.DOMPurify?Promise.resolve(ct.DOMPurify):Cl(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Je(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var f=c[h],p=f.src.find(function(y){return y.format==="truetype"});p&&l.addFont(p.url,f.ref.name,f.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,lt.getPageSize=function(o,a,l){if(Je(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var f,p=0,y=0;if(h.hasOwnProperty(d))p=h[d][1]/u,y=h[d][0]/u;else try{p=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",y>p&&(f=y,y=p,p=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>y&&(f=y,y=p,p=f)}return{width:y,height:p,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(iS):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(lt.API),lt.API.addJS=function(t){return NP=t,this.internal.events.subscribe("postPutResources",function(){g0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(g0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),AP=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+NP+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){g0!==void 0&&AP!==void 0&&this.internal.out("/Names <</JavaScript "+g0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(lt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,y={width:0,height:0,numcomponents:1},b=4;b<p;b+=2){if(b+=f,e.indexOf(d.charCodeAt(b+1))!==-1){h=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),y={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:h,numcomponents:d.charCodeAt(b+9)};break}f=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return y}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(lt.API);var qu,y0,TP,EP,PP,Bue=function(){var t,e,n;function r(s){var o,a,l,c,u,d,h,f,p,y,b,v,x,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),p=function(){var _,A;for(A=[],_=0;_<4;++_)A.push(String.fromCharCode(this.data[this.pos++]));return A}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,o-=4),s=d?.data||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(x=0;0<=y?x<y:x>y;0<=y?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(b=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,b.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(d,h,f,p){var y,b,v,x,S,_,A,T,P,E,z,H,j,I,q,F,ne,Y,ee,X,ie,V=Math.ceil((c.width-d)/f),K=Math.ceil((c.height-h)/p),M=c.width==V&&c.height==K;for(I=o*V,H=M?a:new Uint8Array(I*K),_=s.length,j=0,b=0;j<K&&l<_;){switch(s[l++]){case 0:for(x=ne=0;ne<I;x=ne+=1)H[b++]=s[l++];break;case 1:for(x=Y=0;Y<I;x=Y+=1)y=s[l++],S=x<o?0:H[b-o],H[b++]=(y+S)%256;break;case 2:for(x=ee=0;ee<I;x=ee+=1)y=s[l++],v=(x-x%o)/o,q=j&&H[(j-1)*I+v*o+x%o],H[b++]=(q+y)%256;break;case 3:for(x=X=0;X<I;x=X+=1)y=s[l++],v=(x-x%o)/o,S=x<o?0:H[b-o],q=j&&H[(j-1)*I+v*o+x%o],H[b++]=(y+Math.floor((S+q)/2))%256;break;case 4:for(x=ie=0;ie<I;x=ie+=1)y=s[l++],v=(x-x%o)/o,S=x<o?0:H[b-o],j===0?q=F=0:(q=H[(j-1)*I+v*o+x%o],F=v&&H[(j-1)*I+(v-1)*o+x%o]),A=S+q-F,T=Math.abs(A-S),E=Math.abs(A-q),z=Math.abs(A-F),P=T<=E&&T<=z?S:E<=z?q:F,H[b++]=(y+P)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var U=((h+j*p)*c.width+d)*o,G=j*I;for(x=0;x<V;x+=1){for(var Z=0;Z<o;Z+=1)a[U++]=H[G++];U+=(f-1)*o}}j++}}return s=yue(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,u,d,h,f;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=d=0,h=a.length;d<h;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(f=u[s++])!=null?f:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,u,d,h,f,p,y,b,v;if(l=this.colors,y=null,a=this.hasAlphaChannel,this.palette.length&&(y=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),l=4,a=!0),p=(c=s.data||s).length,d=y||o,u=h=0,l===1)for(;u<p;)f=y?4*o[u/4]:h,b=d[f++],c[u++]=b,c[u++]=b,c[u++]=b,c[u++]=a?d[f++]:255,h=f;else for(;u<p;)f=y?4*o[u/4]:h,c[u++]=d[f++],c[u++]=d[f++],c[u++]=d[f++],c[u++]=a?d[f++]:255,h=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ct)==="[object Window]"){try{e=ct.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,u,d,h,f;if(this.animation){for(f=[],a=u=0,d=(h=this.animation.frames).length;u<d;a=++u)o=h[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),c?.disposeOp===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,u,d,h=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(o=function(){var f,p;if(f=a++%c,p=l[f],h.renderFrame(s,f),c>1&&a/c<u)return h.animation._timeout=setTimeout(o,p.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function zue(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],!(1&y)&&(h=null),f=y>>2&7,e++;break;case 254:for(;;){if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var b=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,_=t[e++],A=_>>6&1,T=1<<(7&_)+1,P=a,E=l,z=!1;_>>7&&(z=!0,P=e,E=T,e+=3*T);var H=e;for(e++;;){var j;if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}u.push({x:b,y:v,width:x,height:S,has_local_palette:z,palette_offset:P,palette_size:E,data_offset:H,data_length:e-H,transparent_index:h,interlaced:!!A,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(I){if(I<0||I>=u.length)throw new Error("Frame index out of range.");return u[I]},this.decodeAndBlitFrameBGRA=function(I,q){var F=this.frameInfo(I),ne=F.width*F.height,Y=new Uint8Array(ne);MP(t,F.data_offset,Y,ne);var ee=F.palette_offset,X=F.transparent_index;X===null&&(X=256);var ie=F.width,V=n-ie,K=ie,M=4*(F.y*n+F.x),U=4*((F.y+F.height)*n+F.x),G=M,Z=4*V;F.interlaced===!0&&(Z+=4*n*7);for(var re=8,se=0,ce=Y.length;se<ce;++se){var he=Y[se];if(K===0&&(K=ie,(G+=Z)>=U&&(Z=4*V+4*n*(re-1),G=M+(ie+V)*(re<<1),re>>=1)),he===X)G+=4;else{var ke=t[ee+3*he],be=t[ee+3*he+1],ye=t[ee+3*he+2];q[G++]=ye,q[G++]=be,q[G++]=ke,q[G++]=255}--K}},this.decodeAndBlitFrameRGBA=function(I,q){var F=this.frameInfo(I),ne=F.width*F.height,Y=new Uint8Array(ne);MP(t,F.data_offset,Y,ne);var ee=F.palette_offset,X=F.transparent_index;X===null&&(X=256);var ie=F.width,V=n-ie,K=ie,M=4*(F.y*n+F.x),U=4*((F.y+F.height)*n+F.x),G=M,Z=4*V;F.interlaced===!0&&(Z+=4*n*7);for(var re=8,se=0,ce=Y.length;se<ce;++se){var he=Y[se];if(K===0&&(K=ie,(G+=Z)>=U&&(Z=4*V+4*n*(re-1),G=M+(ie+V)*(re<<1),re>>=1)),he===X)G+=4;else{var ke=t[ee+3*he],be=t[ee+3*he+1],ye=t[ee+3*he+2];q[G++]=ke,q[G++]=be,q[G++]=ye,q[G++]=255}--K}}}function MP(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,f=t[e++],p=new Int32Array(4096),y=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var b=d&c;if(d>>=l,u-=l,b!==s){if(b===o)break;for(var v=b<a?b:y,x=0,S=v;S>s;)S=p[S]>>8,++x;var _=S;if(h+x+(v!==b?1:0)>r)return void Ht.log("Warning, gif stream longer than expected.");n[h++]=_;var A=h+=x;for(v!==b&&(n[h++]=_),S=v;x--;)S=p[S],n[--A]=255&S,S>>=8;y!==null&&a<4096&&(p[a++]=y<<8|_,a>=c+1&&l<12&&(++l,c=c<<1|1)),y=b}else a=o+1,c=(1<<(l=i+1))-1,y=null}return h!==r&&Ht.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function c2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),y=[],b=0,v=7,x=new Array(64),S=new Array(64),_=new Array(64),A=new Array(256),T=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(M,U){for(var G=0,Z=0,re=new Array,se=1;se<=16;se++){for(var ce=1;ce<=M[se];ce++)re[U[Z]]=[],re[U[Z]][0]=G,re[U[Z]][1]=se,Z++,G++;G*=2}return re}function ee(M){for(var U=M[0],G=M[1]-1;G>=0;)U&1<<G&&(b|=1<<v),G--,--v<0&&(b==255?(X(255),X(0)):X(b),v=7,b=0)}function X(M){y.push(M)}function ie(M){X(M>>8&255),X(255&M)}function V(M,U,G,Z,re){for(var se,ce=re[0],he=re[240],ke=function(Te,Me){var Oe,je,Ve,Qe,it,pt,St,Ot,tt,yt,Be=0;for(tt=0;tt<8;++tt){Oe=Te[Be],je=Te[Be+1],Ve=Te[Be+2],Qe=Te[Be+3],it=Te[Be+4],pt=Te[Be+5],St=Te[Be+6];var Un=Oe+(Ot=Te[Be+7]),At=Oe-Ot,Ti=je+St,Ft=je-St,Yt=Ve+pt,Zi=Ve-pt,It=Qe+it,To=Qe-it,un=Un+It,Ei=Un-It,Ts=Ti+Yt,dn=Ti-Yt;Te[Be]=un+Ts,Te[Be+4]=un-Ts;var ut=.707106781*(dn+Ei);Te[Be+2]=Ei+ut,Te[Be+6]=Ei-ut;var Nt=.382683433*((un=To+Zi)-(dn=Ft+At)),Pi=.5411961*un+Nt,jn=1.306562965*dn+Nt,ci=.707106781*(Ts=Zi+Ft),gr=At+ci,Ye=At-ci;Te[Be+5]=Ye+Pi,Te[Be+3]=Ye-Pi,Te[Be+1]=gr+jn,Te[Be+7]=gr-jn,Be+=8}for(Be=0,tt=0;tt<8;++tt){Oe=Te[Be],je=Te[Be+8],Ve=Te[Be+16],Qe=Te[Be+24],it=Te[Be+32],pt=Te[Be+40],St=Te[Be+48];var ui=Oe+(Ot=Te[Be+56]),es=Oe-Ot,Rt=je+St,xn=je-St,wn=Ve+pt,Mt=Ve-pt,hn=Qe+it,qn=Qe-it,Sn=ui+hn,Ar=ui-hn,Mi=Rt+wn,ji=Rt-wn;Te[Be]=Sn+Mi,Te[Be+32]=Sn-Mi;var Nr=.707106781*(ji+Ar);Te[Be+16]=Ar+Nr,Te[Be+48]=Ar-Nr;var Li=.382683433*((Sn=qn+Mt)-(ji=xn+es)),Eo=.5411961*Sn+Li,va=1.306562965*ji+Li,Tr=.707106781*(Mi=Mt+xn),au=es+Tr,lu=es-Tr;Te[Be+40]=lu+Eo,Te[Be+24]=lu-Eo,Te[Be+8]=au+va,Te[Be+56]=au-va,Be++}for(tt=0;tt<64;++tt)yt=Te[tt]*Me[tt],f[tt]=yt>0?yt+.5|0:yt-.5|0;return f}(M,U),be=0;be<64;++be)p[P[be]]=ke[be];var ye=p[0]-G;G=p[0],ye==0?ee(Z[0]):(ee(Z[h[se=32767+ye]]),ee(d[se]));for(var ve=63;ve>0&&p[ve]==0;)ve--;if(ve==0)return ee(ce),G;for(var Se,fe=1;fe<=ve;){for(var Q=fe;p[fe]==0&&fe<=ve;)++fe;var Re=fe-Q;if(Re>=16){Se=Re>>4;for(var Ie=1;Ie<=Se;++Ie)ee(he);Re&=15}se=32767+p[fe],ee(re[(Re<<4)+h[se]]),ee(d[se]),fe++}return ve!=63&&ee(ce),G}function K(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(U){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var re=o((G[Z]*U+50)/100);re=Math.min(Math.max(re,1),255),a[P[Z]]=re}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var he=o((se[ce]*U+50)/100);he=Math.min(Math.max(he,1),255),l[P[ce]]=he}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,ye=0;ye<8;ye++)for(var ve=0;ve<8;ve++)c[be]=1/(a[P[be]]*ke[ye]*ke[ve]*8),u[be]=1/(l[P[be]]*ke[ye]*ke[ve]*8),be++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,U){U&&K(U),y=new Array,b=0,v=7,ie(65496),ie(65504),ie(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),ie(1),ie(1),X(0),X(0),function(){ie(65499),ie(132),X(0);for(var je=0;je<64;je++)X(a[je]);X(1);for(var Ve=0;Ve<64;Ve++)X(l[Ve])}(),function(je,Ve){ie(65472),ie(17),X(8),ie(Ve),ie(je),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(M.width,M.height),function(){ie(65476),ie(418),X(0);for(var je=0;je<16;je++)X(E[je+1]);for(var Ve=0;Ve<=11;Ve++)X(z[Ve]);X(16);for(var Qe=0;Qe<16;Qe++)X(H[Qe+1]);for(var it=0;it<=161;it++)X(j[it]);X(1);for(var pt=0;pt<16;pt++)X(I[pt+1]);for(var St=0;St<=11;St++)X(q[St]);X(17);for(var Ot=0;Ot<16;Ot++)X(F[Ot+1]);for(var tt=0;tt<=161;tt++)X(ne[tt])}(),ie(65498),ie(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var G=0,Z=0,re=0;b=0,v=7,this.encode.displayName="_encode_";for(var se,ce,he,ke,be,ye,ve,Se,fe,Q=M.data,Re=M.width,Ie=M.height,Te=4*Re,Me=0;Me<Ie;){for(se=0;se<Te;){for(be=Te*Me+se,ve=-1,Se=0,fe=0;fe<64;fe++)ye=be+(Se=fe>>3)*Te+(ve=4*(7&fe)),Me+Se>=Ie&&(ye-=Te*(Me+1+Se-Ie)),se+ve>=Te&&(ye-=se+ve-Te+4),ce=Q[ye++],he=Q[ye++],ke=Q[ye++],x[fe]=(T[ce]+T[he+256>>0]+T[ke+512>>0]>>16)-128,S[fe]=(T[ce+768>>0]+T[he+1024>>0]+T[ke+1280>>0]>>16)-128,_[fe]=(T[ce+1280>>0]+T[he+1536>>0]+T[ke+1792>>0]>>16)-128;G=V(x,c,G,e,r),Z=V(S,u,Z,n,i),re=V(_,u,re,n,i),se+=32}Me+=8}if(v>=0){var Oe=[];Oe[1]=v+1,Oe[0]=(1<<v+1)-1,ee(Oe)}return ie(65497),new Uint8Array(y)},t=t||50,function(){for(var M=String.fromCharCode,U=0;U<256;U++)A[U]=M(U)}(),e=Y(E,z),n=Y(I,q),r=Y(H,j),i=Y(F,ne),function(){for(var M=1,U=2,G=1;G<=15;G++){for(var Z=M;Z<U;Z++)h[32767+Z]=G,d[32767+Z]=[],d[32767+Z][1]=G,d[32767+Z][0]=Z;for(var re=-(U-1);re<=-M;re++)h[32767+re]=G,d[32767+re]=[],d[32767+re][1]=G,d[32767+re][0]=U-1+re;M<<=1,U<<=1}}(),function(){for(var M=0;M<256;M++)T[M]=19595*M,T[M+256>>0]=38470*M,T[M+512>>0]=7471*M+32768,T[M+768>>0]=-11059*M,T[M+1024>>0]=-21709*M,T[M+1280>>0]=32768*M+8421375,T[M+1536>>0]=-27439*M,T[M+1792>>0]=-5329*M}(),K(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rs(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jP(t){function e(E){if(!E)throw Error("assert :P")}function n(E,z,H){for(var j=0;4>j;j++)if(E[z+j]!=H.charCodeAt(j))return!0;return!1}function r(E,z,H,j,I){for(var q=0;q<I;q++)E[z+q]=H[j+q]}function i(E,z,H,j){for(var I=0;I<j;I++)E[z+I]=H}function s(E){return new Int32Array(E)}function o(E,z){for(var H=[],j=0;j<E;j++)H.push(new z);return H}function a(E,z){var H=[];return function j(I,q,F){for(var ne=F[q],Y=0;Y<ne&&(I.push(F.length>q+1?[]:new z),!(F.length<q+1));Y++)j(I[Y],q+1,F)}(H,0,E),H}var l=function(){var E=this;function z(g,w){for(var C=1<<w-1>>>0;g&C;)C>>>=1;return C?(g&C-1)+C:g}function H(g,w,C,N,L){e(!(N%C));do g[w+(N-=C)]=L;while(0<N)}function j(g,w,C,N,L){if(e(2328>=L),512>=L)var R=s(512);else if((R=s(L))==null)return 0;return function(D,$,W,J,ae,me){var ge,de,Ae=$,xe=1<<W,le=s(16),ue=s(16);for(e(ae!=0),e(J!=null),e(D!=null),e(0<W),de=0;de<ae;++de){if(15<J[de])return 0;++le[J[de]]}if(le[0]==ae)return 0;for(ue[1]=0,ge=1;15>ge;++ge){if(le[ge]>1<<ge)return 0;ue[ge+1]=ue[ge]+le[ge]}for(de=0;de<ae;++de)ge=J[de],0<J[de]&&(me[ue[ge]++]=de);if(ue[15]==1)return(J=new I).g=0,J.value=me[0],H(D,Ae,1,xe,J),xe;var Ce,Ee=-1,_e=xe-1,Ue=0,De=1,nt=1,ze=1<<W;for(de=0,ge=1,ae=2;ge<=W;++ge,ae<<=1){if(De+=nt<<=1,0>(nt-=le[ge]))return 0;for(;0<le[ge];--le[ge])(J=new I).g=ge,J.value=me[de++],H(D,Ae+Ue,ae,ze,J),Ue=z(Ue,ge)}for(ge=W+1,ae=2;15>=ge;++ge,ae<<=1){if(De+=nt<<=1,0>(nt-=le[ge]))return 0;for(;0<le[ge];--le[ge]){if(J=new I,(Ue&_e)!=Ee){for(Ae+=ze,Ce=1<<(Ee=ge)-W;15>Ee&&!(0>=(Ce-=le[Ee]));)++Ee,Ce<<=1;xe+=ze=1<<(Ce=Ee-W),D[$+(Ee=Ue&_e)].g=Ce+W,D[$+Ee].value=Ae-$-Ee}J.g=ge-W,J.value=me[de++],H(D,Ae+(Ue>>W),ae,ze,J),Ue=z(Ue,ge)}}return De!=2*ue[15]-1?0:xe}(g,w,C,N,L,R)}function I(){this.value=this.g=0}function q(){this.value=this.g=0}function F(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(yr,q)}function ne(g,w,C,N){e(g!=null),e(w!=null),e(2147483648>N),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=C,g.Jd=w,g.Yc=C+N,g.Zc=4<=N?C+N-4+1:C,se(g)}function Y(g,w){for(var C=0;0<w--;)C|=he(g,128)<<w;return C}function ee(g,w){var C=Y(g,w);return ce(g)?-C:C}function X(g,w,C,N){var L,R=0;for(e(g!=null),e(w!=null),e(4294967288>N),g.Sb=N,g.Ra=0,g.u=0,g.h=0,4<N&&(N=4),L=0;L<N;++L)R+=w[C+L]<<8*L;g.Ra=R,g.bb=N,g.oa=w,g.pa=C}function ie(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<ku-8>>>0,++g.bb,g.u-=8;G(g)&&(g.h=1,g.u=0)}function V(g,w){if(e(0<=w),!g.h&&w<=Su){var C=U(g)&wu[w];return g.u+=w,ie(g),C}return g.h=1,g.u=0}function K(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(g){return g.Ra>>>(g.u&ku-1)>>>0}function G(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>ku}function Z(g,w){g.u=w,g.h=G(g)}function re(g){g.u>=Oh&&(e(g.u>=Oh),ie(g))}function se(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function ce(g){return Y(g,1)}function he(g,w){var C=g.Ca;0>g.b&&se(g);var N=g.b,L=C*w>>>8,R=(g.I>>>N>L)+0;for(R?(C-=L,g.I-=L+1<<N>>>0):C=L+1,N=C,L=0;256<=N;)L+=8,N>>=8;return N=7^L+hi[N],g.b-=N,g.Ca=(C<<N)-1,R}function ke(g,w,C){g[w+0]=C>>24&255,g[w+1]=C>>16&255,g[w+2]=C>>8&255,g[w+3]=C>>0&255}function be(g,w){return g[w+0]<<0|g[w+1]<<8}function ye(g,w){return be(g,w)|g[w+2]<<16}function ve(g,w){return be(g,w)|be(g,w+2)<<16}function Se(g,w){var C=1<<w;return e(g!=null),e(0<w),g.X=s(C),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function fe(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),r(w.X,0,g.X,0,1<<w.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function Re(g,w,C,N){e(C!=null),e(N!=null);var L=C[0],R=N[0];return L==0&&(L=(g*R+w/2)/w),R==0&&(R=(w*L+g/2)/g),0>=L||0>=R?0:(C[0]=L,N[0]=R,1)}function Ie(g,w){return g+(1<<w)-1>>>w}function Te(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function Me(g,w){E[w]=function(C,N,L,R,D,$,W){var J;for(J=0;J<D;++J){var ae=E[g]($[W+J-1],L,R+J);$[W+J]=Te(C[N+J],ae)}}}function Oe(){this.ud=this.hd=this.jd=0}function je(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Ve(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Qe(g,w){return Ve(g+(g-w+.5>>1))}function it(g,w,C){return Math.abs(w-C)-Math.abs(g-C)}function pt(g,w,C,N,L,R,D){for(N=R[D-1],C=0;C<L;++C)R[D+C]=N=Te(g[w+C],N)}function St(g,w,C,N,L){var R;for(R=0;R<C;++R){var D=g[w+R],$=D>>8&255,W=16711935&(W=(W=16711935&D)+(($<<16)+$));N[L+R]=(4278255360&D)+W>>>0}}function Ot(g,w){w.jd=g>>0&255,w.hd=g>>8&255,w.ud=g>>16&255}function tt(g,w,C,N,L,R){var D;for(D=0;D<N;++D){var $=w[C+D],W=$>>>8,J=$,ae=255&(ae=(ae=$>>>16)+((g.jd<<24>>24)*(W<<24>>24)>>>5));J=255&(J=(J=J+((g.hd<<24>>24)*(W<<24>>24)>>>5))+((g.ud<<24>>24)*(ae<<24>>24)>>>5)),L[R+D]=(4278255360&$)+(ae<<16)+J}}function yt(g,w,C,N,L){E[w]=function(R,D,$,W,J,ae,me,ge,de){for(W=me;W<ge;++W)for(me=0;me<de;++me)J[ae++]=L($[N(R[D++])])},E[g]=function(R,D,$,W,J,ae,me){var ge=8>>R.b,de=R.Ea,Ae=R.K[0],xe=R.w;if(8>ge)for(R=(1<<R.b)-1,xe=(1<<ge)-1;D<$;++D){var le,ue=0;for(le=0;le<de;++le)le&R||(ue=N(W[J++])),ae[me++]=L(Ae[ue&xe]),ue>>=ge}else E["VP8LMapColor"+C](W,J,Ae,xe,ae,me,D,$,de)}}function Be(g,w,C,N,L){for(C=w+C;w<C;){var R=g[w++];N[L++]=R>>16&255,N[L++]=R>>8&255,N[L++]=R>>0&255}}function Un(g,w,C,N,L){for(C=w+C;w<C;){var R=g[w++];N[L++]=R>>16&255,N[L++]=R>>8&255,N[L++]=R>>0&255,N[L++]=R>>24&255}}function At(g,w,C,N,L){for(C=w+C;w<C;){var R=(D=g[w++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;N[L++]=R,N[L++]=D}}function Ti(g,w,C,N,L){for(C=w+C;w<C;){var R=(D=g[w++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;N[L++]=R,N[L++]=D}}function Ft(g,w,C,N,L){for(C=w+C;w<C;){var R=g[w++];N[L++]=R>>0&255,N[L++]=R>>8&255,N[L++]=R>>16&255}}function Yt(g,w,C,N,L,R){if(R==0)for(C=w+C;w<C;)ke(N,((R=g[w++])[0]>>24|R[1]>>8&65280|R[2]<<8&16711680|R[3]<<24)>>>0),L+=32;else r(N,L,g,w,C)}function Zi(g,w){E[w][0]=E[g+"0"],E[w][1]=E[g+"1"],E[w][2]=E[g+"2"],E[w][3]=E[g+"3"],E[w][4]=E[g+"4"],E[w][5]=E[g+"5"],E[w][6]=E[g+"6"],E[w][7]=E[g+"7"],E[w][8]=E[g+"8"],E[w][9]=E[g+"9"],E[w][10]=E[g+"10"],E[w][11]=E[g+"11"],E[w][12]=E[g+"12"],E[w][13]=E[g+"13"],E[w][14]=E[g+"0"],E[w][15]=E[g+"0"]}function It(g){return g==Q1||g==Z1||g==Gm||g==eb}function To(){this.eb=[],this.size=this.A=this.fb=0}function un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ei(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new To,this.f.kb=new un,this.sd=null}function Ts(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Nt(g,w){var C=g.T,N=w.ba.f.RGBA,L=N.eb,R=N.fb+g.ka*N.A,D=as[w.ba.S],$=g.y,W=g.O,J=g.f,ae=g.N,me=g.ea,ge=g.W,de=w.cc,Ae=w.dc,xe=w.Mc,le=w.Nc,ue=g.ka,Ce=g.ka+g.T,Ee=g.U,_e=Ee+1>>1;for(ue==0?D($,W,null,null,J,ae,me,ge,J,ae,me,ge,L,R,null,null,Ee):(D(w.ec,w.fc,$,W,de,Ae,xe,le,J,ae,me,ge,L,R-N.A,L,R,Ee),++C);ue+2<Ce;ue+=2)de=J,Ae=ae,xe=me,le=ge,ae+=g.Rc,ge+=g.Rc,R+=2*N.A,D($,(W+=2*g.fa)-g.fa,$,W,de,Ae,xe,le,J,ae,me,ge,L,R-N.A,L,R,Ee);return W+=g.fa,g.j+Ce<g.o?(r(w.ec,w.fc,$,W,Ee),r(w.cc,w.dc,J,ae,_e),r(w.Mc,w.Nc,me,ge,_e),C--):1&Ce||D($,W,null,null,J,ae,me,ge,J,ae,me,ge,L,R+N.A,null,null,Ee),C}function Pi(g,w,C){var N=g.F,L=[g.J];if(N!=null){var R=g.U,D=w.ba.S,$=D==Km||D==Gm;w=w.ba.f.RGBA;var W=[0],J=g.ka;W[0]=g.T,g.Kb&&(J==0?--W[0]:(--J,L[0]-=g.width),g.j+g.ka+g.T==g.o&&(W[0]=g.o-g.j-J));var ae=w.eb;J=w.fb+J*w.A,g=Jt(N,L[0],g.width,R,W,ae,J+($?0:3),w.A),e(C==W),g&&It(D)&&is(ae,J,$,R,W,w.A)}return 0}function jn(g){var w=g.ma,C=w.ba.S,N=11>C,L=C==Wm||C==Hm||C==Km||C==J1||C==12||It(C);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!jh(w.Oa,g,L?11:12))return 0;if(L&&It(C)&&Pe(),g.da)alert("todo:use_scaling");else{if(N){if(w.Ib=ut,g.Kb){if(C=g.U+1>>1,w.memory=s(g.U+2*C),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+C,w.Ib=Nt,Pe()}}else alert("todo:EmitYUV");L&&(w.Jb=Pi,N&&pe())}if(N&&!l_){for(g=0;256>g;++g)a7[g]=89858*(g-128)+Xm>>Ym,u7[g]=-22014*(g-128)+Xm,c7[g]=-45773*(g-128),l7[g]=113618*(g-128)+Xm>>Ym;for(g=$h;g<rb;++g)w=76283*(g-16)+Xm>>Ym,d7[g-$h]=Oi(w,255),h7[g-$h]=Oi(w+8>>4,15);l_=1}return 1}function ci(g){var w=g.ma,C=g.U,N=g.T;return e(!(1&g.ka)),0>=C||0>=N?0:(C=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,C),w.Dc+=C,1)}function gr(g){g.ma.memory=null}function Ye(g,w,C,N){return V(g,8)!=47?0:(w[0]=V(g,14)+1,C[0]=V(g,14)+1,N[0]=V(g,1),V(g,3)!=0?0:!g.h)}function ui(g,w){if(4>g)return g+1;var C=g-2>>1;return(2+(1&g)<<C)+V(w,C)+1}function es(g,w){return 120<w?w-120:1<=(C=((C=K8[w-1])>>4)*g+(8-(15&C)))?C:1;var C}function Rt(g,w,C){var N=U(C),L=g[w+=255&N].g-8;return 0<L&&(Z(C,C.u+8),N=U(C),w+=g[w].value,w+=N&(1<<L)-1),Z(C,C.u+g[w].g),g[w].value}function xn(g,w,C){return C.g+=g.g,C.value+=g.value<<w>>>0,e(8>=C.g),g.g}function wn(g,w,C){var N=g.xc;return e((w=N==0?0:g.vc[g.md*(C>>N)+(w>>N)])<g.Wb),g.Ya[w]}function Mt(g,w,C,N){var L=g.ab,R=g.c*w,D=g.C;w=D+w;var $=C,W=N;for(N=g.Ta,C=g.Ua;0<L--;){var J=g.gc[L],ae=D,me=w,ge=$,de=W,Ae=(W=N,$=C,J.Ea);switch(e(ae<me),e(me<=J.nc),J.hc){case 2:Fm(ge,de,(me-ae)*Ae,W,$);break;case 0:var xe=ae,le=me,ue=W,Ce=$,Ee=(ze=J).Ea;xe==0&&(Y1(ge,de,null,null,1,ue,Ce),pt(ge,de+1,0,0,Ee-1,ue,Ce+1),de+=Ee,Ce+=Ee,++xe);for(var _e=1<<ze.b,Ue=_e-1,De=Ie(Ee,ze.b),nt=ze.K,ze=ze.w+(xe>>ze.b)*De;xe<le;){var Dt=nt,Bt=ze,jt=1;for(Ih(ge,de,ue,Ce-Ee,1,ue,Ce);jt<Ee;){var Tt=(jt&~Ue)+_e;Tt>Ee&&(Tt=Ee),(0,Sa[Dt[Bt++]>>8&15])(ge,de+ +jt,ue,Ce+jt-Ee,Tt-jt,ue,Ce+jt),jt=Tt}de+=Ee,Ce+=Ee,++xe&Ue||(ze+=De)}me!=J.nc&&r(W,$-Ae,W,$+(me-ae-1)*Ae,Ae);break;case 1:for(Ae=ge,le=de,Ee=(ge=J.Ea)-(Ce=ge&~(ue=(de=1<<J.b)-1)),xe=Ie(ge,J.b),_e=J.K,J=J.w+(ae>>J.b)*xe;ae<me;){for(Ue=_e,De=J,nt=new Oe,ze=le+Ce,Dt=le+ge;le<ze;)Ot(Ue[De++],nt),Kl(nt,Ae,le,de,W,$),le+=de,$+=de;le<Dt&&(Ot(Ue[De++],nt),Kl(nt,Ae,le,Ee,W,$),le+=Ee,$+=Ee),++ae&ue||(J+=xe)}break;case 3:if(ge==W&&de==$&&0<J.b){for(le=W,ge=Ae=$+(me-ae)*Ae-(Ce=(me-ae)*Ie(J.Ea,J.b)),de=W,ue=$,xe=[],Ce=(Ee=Ce)-1;0<=Ce;--Ce)xe[Ce]=de[ue+Ce];for(Ce=Ee-1;0<=Ce;--Ce)le[ge+Ce]=xe[Ce];ts(J,ae,me,W,Ae,W,$)}else ts(J,ae,me,ge,de,W,$)}$=N,W=C}W!=C&&r(N,C,$,W,R)}function hn(g,w){var C=g.V,N=g.Ba+g.c*g.C,L=w-g.C;if(e(w<=g.l.o),e(16>=L),0<L){var R=g.l,D=g.Ta,$=g.Ua,W=R.width;if(Mt(g,L,C,N),L=$=[$],e((C=g.C)<(N=w)),e(R.v<R.va),N>R.o&&(N=R.o),C<R.j){var J=R.j-C;C=R.j,L[0]+=J*W}if(C>=N?C=0:(L[0]+=4*R.v,R.ka=C-R.j,R.U=R.va-R.v,R.T=N-C,C=1),C){if($=$[0],11>(C=g.ca).S){var ae=C.f.RGBA,me=(N=C.S,L=R.U,R=R.T,J=ae.eb,ae.A),ge=R;for(ae=ae.fb+g.Ma*ae.A;0<ge--;){var de=D,Ae=$,xe=L,le=J,ue=ae;switch(N){case qm:fi(de,Ae,xe,le,ue);break;case Wm:Xr(de,Ae,xe,le,ue);break;case Q1:Xr(de,Ae,xe,le,ue),is(le,ue,0,xe,1,0);break;case QC:Lo(de,Ae,xe,le,ue);break;case Hm:Yt(de,Ae,xe,le,ue,1);break;case Z1:Yt(de,Ae,xe,le,ue,1),is(le,ue,0,xe,1,0);break;case Km:Yt(de,Ae,xe,le,ue,0);break;case Gm:Yt(de,Ae,xe,le,ue,0),is(le,ue,1,xe,1,0);break;case J1:ka(de,Ae,xe,le,ue);break;case eb:ka(de,Ae,xe,le,ue),Xt(le,ue,xe,1,0);break;case ZC:jo(de,Ae,xe,le,ue);break;default:e(0)}$+=W,ae+=me}g.Ma+=R}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=C.height)}}g.C=w,e(g.C<=g.i)}function qn(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var C=g.Ya[w].G,N=g.Ya[w].H;if(0<C[1][N[1]+0].g||0<C[2][N[2]+0].g||0<C[3][N[3]+0].g)return 0}return 1}function Sn(g,w,C,N,L,R){if(g.Z!=0){var D=g.qd,$=g.rd;for(e(Na[g.Z]!=null);w<C;++w)Na[g.Z](D,$,N,L,N,L,R),D=N,$=L,L+=R;g.qd=D,g.rd=$}}function Ar(g,w){var C=g.l.ma,N=C.Z==0||C.Z==1?g.l.j:g.C;if(N=g.C<N?N:g.C,e(w<=g.l.o),w>N){var L=g.l.width,R=C.ca,D=C.tb+L*N,$=g.V,W=g.Ba+g.c*N,J=g.gc;e(g.ab==1),e(J[0].hc==3),Bm(J[0],N,w,$,W,R,D),Sn(C,N,w,R,D,L)}g.C=g.Ma=w}function Mi(g,w,C,N,L,R,D){var $=g.$/N,W=g.$%N,J=g.m,ae=g.s,me=C+g.$,ge=me;L=C+N*L;var de=C+N*R,Ae=280+ae.ua,xe=g.Pb?$:16777216,le=0<ae.ua?ae.Wa:null,ue=ae.wc,Ce=me<de?wn(ae,W,$):null;e(g.C<R),e(de<=L);var Ee=!1;e:for(;;){for(;Ee||me<de;){var _e=0;if($>=xe){var Ue=me-C;e((xe=g).Pb),xe.wd=xe.m,xe.xd=Ue,0<xe.s.ua&&fe(xe.s.Wa,xe.s.vb),xe=$+Y8}if(W&ue||(Ce=wn(ae,W,$)),e(Ce!=null),Ce.Qb&&(w[me]=Ce.qb,Ee=!0),!Ee)if(re(J),Ce.jc){_e=J,Ue=w;var De=me,nt=Ce.pd[U(_e)&yr-1];e(Ce.jc),256>nt.g?(Z(_e,_e.u+nt.g),Ue[De]=nt.value,_e=0):(Z(_e,_e.u+nt.g-256),e(256<=nt.value),_e=nt.value),_e==0&&(Ee=!0)}else _e=Rt(Ce.G[0],Ce.H[0],J);if(J.h)break;if(Ee||256>_e){if(!Ee)if(Ce.nd)w[me]=(Ce.qb|_e<<8)>>>0;else{if(re(J),Ee=Rt(Ce.G[1],Ce.H[1],J),re(J),Ue=Rt(Ce.G[2],Ce.H[2],J),De=Rt(Ce.G[3],Ce.H[3],J),J.h)break;w[me]=(De<<24|Ee<<16|_e<<8|Ue)>>>0}if(Ee=!1,++me,++W>=N&&(W=0,++$,D!=null&&$<=R&&!($%16)&&D(g,$),le!=null))for(;ge<me;)_e=w[ge++],le.X[(506832829*_e&4294967295)>>>le.Mb]=_e}else if(280>_e){if(_e=ui(_e-256,J),Ue=Rt(Ce.G[4],Ce.H[4],J),re(J),Ue=es(N,Ue=ui(Ue,J)),J.h)break;if(me-C<Ue||L-me<_e)break e;for(De=0;De<_e;++De)w[me+De]=w[me+De-Ue];for(me+=_e,W+=_e;W>=N;)W-=N,++$,D!=null&&$<=R&&!($%16)&&D(g,$);if(e(me<=L),W&ue&&(Ce=wn(ae,W,$)),le!=null)for(;ge<me;)_e=w[ge++],le.X[(506832829*_e&4294967295)>>>le.Mb]=_e}else{if(!(_e<Ae))break e;for(Ee=_e-280,e(le!=null);ge<me;)_e=w[ge++],le.X[(506832829*_e&4294967295)>>>le.Mb]=_e;_e=me,e(!(Ee>>>(Ue=le).Xa)),w[_e]=Ue.X[Ee],Ee=!0}Ee||e(J.h==G(J))}if(g.Pb&&J.h&&me<L)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&fe(g.s.vb,g.s.Wa);else{if(J.h)break e;D?.(g,$>R?R:$),g.a=0,g.$=me-C}return 1}return g.a=3,0}function ji(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function Nr(){var g=new G1;return g==null?null:(g.a=0,g.xb=n_,Zi("Predictor","VP8LPredictors"),Zi("Predictor","VP8LPredictors_C"),Zi("PredictorAdd","VP8LPredictorsAdd"),Zi("PredictorAdd","VP8LPredictorsAdd_C"),Fm=St,Kl=tt,fi=Be,Xr=Un,ka=At,jo=Ti,Lo=Ft,E.VP8LMapColor32b=Cu,E.VP8LMapColor8b=zm,g)}function Li(g,w,C,N,L){var R=1,D=[g],$=[w],W=N.m,J=N.s,ae=null,me=0;e:for(;;){if(C)for(;R&&V(W,1);){var ge=D,de=$,Ae=N,xe=1,le=Ae.m,ue=Ae.gc[Ae.ab],Ce=V(le,2);if(Ae.Oc&1<<Ce)R=0;else{switch(Ae.Oc|=1<<Ce,ue.hc=Ce,ue.Ea=ge[0],ue.nc=de[0],ue.K=[null],++Ae.ab,e(4>=Ae.ab),Ce){case 0:case 1:ue.b=V(le,3)+2,xe=Li(Ie(ue.Ea,ue.b),Ie(ue.nc,ue.b),0,Ae,ue.K),ue.K=ue.K[0];break;case 3:var Ee,_e=V(le,8)+1,Ue=16<_e?0:4<_e?1:2<_e?2:3;if(ge[0]=Ie(ue.Ea,Ue),ue.b=Ue,Ee=xe=Li(_e,1,0,Ae,ue.K)){var De,nt=_e,ze=ue,Dt=1<<(8>>ze.b),Bt=s(Dt);if(Bt==null)Ee=0;else{var jt=ze.K[0],Tt=ze.w;for(Bt[0]=ze.K[0][0],De=1;De<1*nt;++De)Bt[De]=Te(jt[Tt+De],Bt[De-1]);for(;De<4*Dt;++De)Bt[De]=0;ze.K[0]=null,ze.K[0]=Bt,Ee=1}}xe=Ee;break;case 2:break;default:e(0)}R=xe}}if(D=D[0],$=$[0],R&&V(W,1)&&!(R=1<=(me=V(W,4))&&11>=me)){N.a=3;break e}var Wt;if(Wt=R)t:{var qt,vt,Hn,pi=N,Kn=D,mi=$,zt=me,Ri=C,Di=pi.m,ir=pi.s,vr=[null],Qr=1,ls=0,so=G8[zt];n:for(;;){if(Ri&&V(Di,1)){var sr=V(Di,3)+2,Do=Ie(Kn,sr),Ql=Ie(mi,sr),Eu=Do*Ql;if(!Li(Do,Ql,0,pi,vr))break n;for(vr=vr[0],ir.xc=sr,qt=0;qt<Eu;++qt){var Ta=vr[qt]>>8&65535;vr[qt]=Ta,Ta>=Qr&&(Qr=Ta+1)}}if(Di.h)break n;for(vt=0;5>vt;++vt){var Cn=e_[vt];!vt&&0<zt&&(Cn+=1<<zt),ls<Cn&&(ls=Cn)}var ib=o(Qr*so,I),d_=Qr,h_=o(d_,F);if(h_==null)var Qm=null;else e(65536>=d_),Qm=h_;var Vh=s(ls);if(Qm==null||Vh==null||ib==null){pi.a=1;break n}var Zm=ib;for(qt=Hn=0;qt<Qr;++qt){var Ls=Qm[qt],Pu=Ls.G,Mu=Ls.H,f_=0,eg=1,p_=0;for(vt=0;5>vt;++vt){Cn=e_[vt],Pu[vt]=Zm,Mu[vt]=Hn,!vt&&0<zt&&(Cn+=1<<zt);i:{var tg,sb=Cn,ng=pi,Uh=Vh,m7=Zm,g7=Hn,ob=0,Ea=ng.m,y7=V(Ea,1);if(i(Uh,0,0,sb),y7){var v7=V(Ea,1)+1,b7=V(Ea,1),m_=V(Ea,b7==0?1:8);Uh[m_]=1,v7==2&&(Uh[m_=V(Ea,8)]=1);var rg=1}else{var g_=s(19),y_=V(Ea,4)+4;if(19<y_){ng.a=3;var ig=0;break i}for(tg=0;tg<y_;++tg)g_[H8[tg]]=V(Ea,3);var ab=void 0,qh=void 0,v_=ng,x7=g_,sg=sb,b_=Uh,lb=0,Pa=v_.m,x_=8,w_=o(128,I);r:for(;j(w_,0,7,x7,19);){if(V(Pa,1)){var w7=2+2*V(Pa,3);if((ab=2+V(Pa,w7))>sg)break r}else ab=sg;for(qh=0;qh<sg&&ab--;){re(Pa);var S_=w_[0+(127&U(Pa))];Z(Pa,Pa.u+S_.g);var ju=S_.value;if(16>ju)b_[qh++]=ju,ju!=0&&(x_=ju);else{var S7=ju==16,k_=ju-16,k7=q8[k_],C_=V(Pa,U8[k_])+k7;if(qh+C_>sg)break r;for(var C7=S7?x_:0;0<C_--;)b_[qh++]=C7}}lb=1;break r}lb||(v_.a=3),rg=lb}(rg=rg&&!Ea.h)&&(ob=j(m7,g7,8,Uh,sb)),rg&&ob!=0?ig=ob:(ng.a=3,ig=0)}if(ig==0)break n;if(eg&&W8[vt]==1&&(eg=Zm[Hn].g==0),f_+=Zm[Hn].g,Hn+=ig,3>=vt){var Wh,cb=Vh[0];for(Wh=1;Wh<Cn;++Wh)Vh[Wh]>cb&&(cb=Vh[Wh]);p_+=cb}}if(Ls.nd=eg,Ls.Qb=0,eg&&(Ls.qb=(Pu[3][Mu[3]+0].value<<24|Pu[1][Mu[1]+0].value<<16|Pu[2][Mu[2]+0].value)>>>0,f_==0&&256>Pu[0][Mu[0]+0].value&&(Ls.Qb=1,Ls.qb+=Pu[0][Mu[0]+0].value<<8)),Ls.jc=!Ls.Qb&&6>p_,Ls.jc){var og,Fo=Ls;for(og=0;og<yr;++og){var Ma=og,ja=Fo.pd[Ma],ag=Fo.G[0][Fo.H[0]+Ma];256<=ag.value?(ja.g=ag.g+256,ja.value=ag.value):(ja.g=0,ja.value=0,Ma>>=xn(ag,8,ja),Ma>>=xn(Fo.G[1][Fo.H[1]+Ma],16,ja),Ma>>=xn(Fo.G[2][Fo.H[2]+Ma],0,ja),xn(Fo.G[3][Fo.H[3]+Ma],24,ja))}}}ir.vc=vr,ir.Wb=Qr,ir.Ya=Qm,ir.yc=ib,Wt=1;break t}Wt=0}if(!(R=Wt)){N.a=3;break e}if(0<me){if(J.ua=1<<me,!Se(J.Wa,me)){N.a=1,R=0;break e}}else J.ua=0;var ub=N,__=D,_7=$,db=ub.s,hb=db.xc;if(ub.c=__,ub.i=_7,db.md=Ie(__,hb),db.wc=hb==0?-1:(1<<hb)-1,C){N.xb=n7;break e}if((ae=s(D*$))==null){N.a=1,R=0;break e}R=(R=Mi(N,ae,0,D,$,$,null))&&!W.h;break e}return R?(L!=null?L[0]=ae:(e(ae==null),e(C)),N.$=0,C||ji(J)):ji(J),R}function Eo(g,w){var C=g.c*g.i,N=C+w+16*w;return e(g.c<=w),g.V=s(N),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+C+w,1)}function va(g,w){var C=g.C,N=w-C,L=g.V,R=g.Ba+g.c*C;for(e(w<=g.l.o);0<N;){var D=16<N?16:N,$=g.l.ma,W=g.l.width,J=W*D,ae=$.ca,me=$.tb+W*C,ge=g.Ta,de=g.Ua;Mt(g,D,L,R),In(ge,de,ae,me,J),Sn($,C,C+D,ae,me,W),N-=D,L+=D*g.c,C+=D}e(C==w),g.C=g.Ma=w}function Tr(){this.ub=this.yd=this.td=this.Rb=0}function au(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lu(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function vm(){this.Yb=function(){var g=[];return function w(C,N,L){for(var R=L[N],D=0;D<R&&(C.push(L.length>N+1?[]:0),!(L.length<N+1));D++)w(C[D],N+1,L)}(g,0,[3,11]),g}()}function _1(){this.jb=s(3),this.Wc=a([4,8],vm),this.Xc=a([4,17],vm)}function A1(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function cu(){this.ld=this.La=this.dd=this.tc=0}function bm(){this.Na=this.la=0}function N1(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gh(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function T1(){this.uc=this.M=this.Nb=0,this.wa=Array(new cu),this.Y=0,this.ya=Array(new gh),this.aa=0,this.l=new uu}function xm(){this.y=s(16),this.f=s(8),this.ea=s(8)}function E1(){this.cb=this.a=0,this.sc="",this.m=new K,this.Od=new Tr,this.Kc=new au,this.ed=new A1,this.Qa=new lu,this.Ic=this.$c=this.Aa=0,this.D=new T1,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,K),this.ia=0,this.pb=o(4,N1),this.Pa=new _1,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xm),this.Hd=0,this.rb=Array(new bm),this.sb=0,this.wa=Array(new cu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gh),this.L=this.aa=0,this.gd=a([4,2],cu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function uu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function P1(){var g=new E1;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,zh||(zh=km)),g}function Ln(g,w,C){return g.a==0&&(g.a=w,g.sc=C,g.cb=0),0}function wm(g,w,C){return 3<=C&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function Sm(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return Ln(g,2,"null VP8Io passed to VP8GetHeaders()");var C=w.data,N=w.w,L=w.ha;if(4>L)return Ln(g,7,"Truncated header.");var R=C[N+0]|C[N+1]<<8|C[N+2]<<16,D=g.Od;if(D.Rb=!(1&R),D.td=R>>1&7,D.yd=R>>4&1,D.ub=R>>5,3<D.td)return Ln(g,3,"Incorrect keyframe parameters.");if(!D.yd)return Ln(g,4,"Frame not displayable.");N+=3,L-=3;var $=g.Kc;if(D.Rb){if(7>L)return Ln(g,7,"cannot parse picture header");if(!wm(C,N,L))return Ln(g,3,"Bad code word");$.c=16383&(C[N+4]<<8|C[N+3]),$.Td=C[N+4]>>6,$.i=16383&(C[N+6]<<8|C[N+5]),$.Ud=C[N+6]>>6,N+=7,L-=7,g.za=$.c+15>>4,g.Ub=$.i+15>>4,w.width=$.c,w.height=$.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,i((R=g.Pa).jb,0,255,R.jb.length),e((R=g.Qa)!=null),R.Cb=0,R.Bb=0,R.Fb=1,i(R.Zb,0,0,R.Zb.length),i(R.Lb,0,0,R.Lb)}if(D.ub>L)return Ln(g,7,"bad partition length");ne(R=g.m,C,N,D.ub),N+=D.ub,L-=D.ub,D.Rb&&($.Ld=ce(R),$.Kd=ce(R)),$=g.Qa;var W,J=g.Pa;if(e(R!=null),e($!=null),$.Cb=ce(R),$.Cb){if($.Bb=ce(R),ce(R)){for($.Fb=ce(R),W=0;4>W;++W)$.Zb[W]=ce(R)?ee(R,7):0;for(W=0;4>W;++W)$.Lb[W]=ce(R)?ee(R,6):0}if($.Bb)for(W=0;3>W;++W)J.jb[W]=ce(R)?Y(R,8):255}else $.Bb=0;if(R.Ka)return Ln(g,3,"cannot parse segment header");if(($=g.ed).zd=ce(R),$.Tb=Y(R,6),$.wb=Y(R,3),$.Pc=ce(R),$.Pc&&ce(R)){for(J=0;4>J;++J)ce(R)&&($.vd[J]=ee(R,6));for(J=0;4>J;++J)ce(R)&&($.od[J]=ee(R,6))}if(g.L=$.Tb==0?0:$.zd?1:2,R.Ka)return Ln(g,3,"cannot parse filter header");var ae=L;if(L=W=N,N=W+ae,$=ae,g.Xb=(1<<Y(g.m,2))-1,ae<3*(J=g.Xb))C=7;else{for(W+=3*J,$-=3*J,ae=0;ae<J;++ae){var me=C[L+0]|C[L+1]<<8|C[L+2]<<16;me>$&&(me=$),ne(g.Jc[+ae],C,W,me),W+=me,$-=me,L+=3}ne(g.Jc[+J],C,W,$),C=W<N?0:5}if(C!=0)return Ln(g,C,"cannot parse partitions");for(C=Y(W=g.m,7),L=ce(W)?ee(W,4):0,N=ce(W)?ee(W,4):0,$=ce(W)?ee(W,4):0,J=ce(W)?ee(W,4):0,W=ce(W)?ee(W,4):0,ae=g.Qa,me=0;4>me;++me){if(ae.Cb){var ge=ae.Zb[me];ae.Fb||(ge+=C)}else{if(0<me){g.pb[me]=g.pb[0];continue}ge=C}var de=g.pb[me];de.Sc[0]=tb[Oi(ge+L,127)],de.Sc[1]=nb[Oi(ge+0,127)],de.Eb[0]=2*tb[Oi(ge+N,127)],de.Eb[1]=101581*nb[Oi(ge+$,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=tb[Oi(ge+J,117)],de.Qc[1]=nb[Oi(ge+W,127)],de.lc=ge+W}if(!D.Rb)return Ln(g,4,"Not a key frame.");for(ce(R),D=g.Pa,C=0;4>C;++C){for(L=0;8>L;++L)for(N=0;3>N;++N)for($=0;11>$;++$)J=he(R,e7[C][L][N][$])?Y(R,8):Q8[C][L][N][$],D.Wc[C][L].Yb[N][$]=J;for(L=0;17>L;++L)D.Xc[C][L]=D.Wc[C][t7[L]]}return g.kc=ce(R),g.kc&&(g.Bd=Y(R,8)),g.cb=1}function km(g,w,C,N,L,R,D){var $=w[L].Yb[C];for(C=0;16>L;++L){if(!he(g,$[C+0]))return L;for(;!he(g,$[C+1]);)if($=w[++L].Yb[0],C=0,L==16)return 16;var W=w[L+1].Yb;if(he(g,$[C+2])){var J=g,ae=0;if(he(J,(ge=$)[(me=C)+3]))if(he(J,ge[me+6])){for($=0,me=2*(ae=he(J,ge[me+8]))+(ge=he(J,ge[me+9+ae])),ae=0,ge=X8[me];ge[$];++$)ae+=ae+he(J,ge[$]);ae+=3+(8<<me)}else he(J,ge[me+7])?(ae=7+2*he(J,165),ae+=he(J,145)):ae=5+he(J,159);else ae=he(J,ge[me+4])?3+he(J,ge[me+5]):2;$=W[2]}else ae=1,$=W[1];W=D+J8[L],0>(J=g).b&&se(J);var me,ge=J.b,de=(me=J.Ca>>1)-(J.I>>ge)>>31;--J.b,J.Ca+=de,J.Ca|=1,J.I-=(me+1&de)<<ge,R[W]=((ae^de)-de)*N[(0<L)+0]}return 16}function yh(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function M1(g,w){if(g==null)return 0;if(w==null)return Ln(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Sm(g,w))return 0;if(e(g.cb),w.ac==null||w.ac(w)){w.ob&&(g.L=0);var C=Jm[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=w.v-C>>4,g.zb=w.j-C>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=w.o+15+C>>4,g.Hb=w.va+15+C>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var N=g.ed;for(C=0;4>C;++C){var L;if(g.Qa.Cb){var R=g.Qa.Lb[C];g.Qa.Fb||(R+=N.Tb)}else R=N.Tb;for(L=0;1>=L;++L){var D=g.gd[C][L],$=R;if(N.Pc&&($+=N.vd[0],L&&($+=N.od[0])),0<($=0>$?0:63<$?63:$)){var W=$;0<N.wb&&(W=4<N.wb?W>>2:W>>1)>9-N.wb&&(W=9-N.wb),1>W&&(W=1),D.dd=W,D.tc=2*$+W,D.ld=40<=$?2:15<=$?1:0}else D.tc=0;D.La=L}}}C=0}else Ln(g,6,"Frame setup failed"),C=g.a;if(C=C==0){if(C){g.$c=0,0<g.Aa||(g.Ic=p7);e:{C=g.Ic,N=4*(W=g.za);var J=32*W,ae=W+1,me=0<g.L?W*(0<g.Aa?2:1):0,ge=(g.Aa==2?2:1)*W;if((D=N+832+(L=3*(16*C+Jm[g.L])/2*J)+(R=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=D)C=0;else{if(D>g.Vb){if(g.Vb=0,g.Ec=s(D),g.Fc=0,g.Ec==null){C=Ln(g,1,"no memory during frame initialization.");break e}g.Vb=D}D=g.Ec,$=g.Fc,g.Ac=D,g.Bc=$,$+=N,g.Gd=o(J,xm),g.Hd=0,g.rb=o(ae+1,bm),g.sb=1,g.wa=me?o(me,cu):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=W),e(!0),g.oc=D,g.pc=$,$+=832,g.ya=o(ge,gh),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=W),g.R=16*W,g.B=8*W,W=(J=Jm[g.L])*g.R,J=J/2*g.B,g.sa=D,g.ta=$+W,g.qa=g.sa,g.ra=g.ta+16*C*g.R+J,g.Ha=g.qa,g.Ia=g.ra+8*C*g.B+J,g.$c=0,$+=L,g.mb=R?D:null,g.nb=R?$:null,e($+R<=g.Fc+g.Vb),yh(g),i(g.Ac,g.Bc,0,N),C=1}}if(C){if(w.ka=0,w.y=g.sa,w.O=g.ta,w.f=g.qa,w.N=g.ra,w.ea=g.Ha,w.Vd=g.Ia,w.fa=g.R,w.Rc=g.B,w.F=null,w.J=0,!Vm){for(C=-255;255>=C;++C)Qn[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)Io[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)Bh[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)Tu[255+C]=0>C?0:255<C?255:C;Vm=1}_u=O1,Oo=j1,Rh=_m,Jr=L1,ns=Am,On=Cm,Au=kh,$m=Wl,Dh=K1,Gl=Ch,Yl=H1,Ca=gu,Xl=_h,Nu=Im,Jl=Om,_a=ro,Fh=Mo,rs=W1,js[0]=no,js[1]=I1,js[2]=B1,js[3]=z1,js[4]=Em,js[5]=pu,js[6]=Pm,js[7]=xh,js[8]=V1,js[9]=$1,Aa[0]=Nm,Aa[1]=D1,Aa[2]=Po,Aa[3]=hu,Aa[4]=Er,Aa[5]=F1,Aa[6]=Tm,Ro[0]=ba,Ro[1]=R1,Ro[2]=U1,Ro[3]=wh,Ro[4]=ql,Ro[5]=q1,Ro[6]=Sh,C=1}else C=0}C&&(C=function(de,Ae){for(de.M=0;de.M<de.Va;++de.M){var xe,le=de.Jc[de.M&de.Xb],ue=de.m,Ce=de;for(xe=0;xe<Ce.za;++xe){var Ee=ue,_e=Ce,Ue=_e.Ac,De=_e.Bc+4*xe,nt=_e.zc,ze=_e.ya[_e.aa+xe];if(_e.Qa.Bb?ze.$b=he(Ee,_e.Pa.jb[0])?2+he(Ee,_e.Pa.jb[2]):he(Ee,_e.Pa.jb[1]):ze.$b=0,_e.kc&&(ze.Ad=he(Ee,_e.Bd)),ze.Za=!he(Ee,145)+0,ze.Za){var Dt=ze.Ob,Bt=0;for(_e=0;4>_e;++_e){var jt,Tt=nt[0+_e];for(jt=0;4>jt;++jt){Tt=Z8[Ue[De+jt]][Tt];for(var Wt=t_[he(Ee,Tt[0])];0<Wt;)Wt=t_[2*Wt+he(Ee,Tt[Wt])];Tt=-Wt,Ue[De+jt]=Tt}r(Dt,Bt,Ue,De,4),Bt+=4,nt[0+_e]=Tt}}else Tt=he(Ee,156)?he(Ee,128)?1:3:he(Ee,163)?2:0,ze.Ob[0]=Tt,i(Ue,De,Tt,4),i(nt,0,Tt,4);ze.Dd=he(Ee,142)?he(Ee,114)?he(Ee,183)?1:3:2:0}if(Ce.m.Ka)return Ln(de,7,"Premature end-of-partition0 encountered.");for(;de.ja<de.za;++de.ja){if(Ce=le,Ee=(ue=de).rb[ue.sb-1],Ue=ue.rb[ue.sb+ue.ja],xe=ue.ya[ue.aa+ue.ja],De=ue.kc?xe.Ad:0)Ee.la=Ue.la=0,xe.Za||(Ee.Na=Ue.Na=0),xe.Hc=0,xe.Gc=0,xe.ia=0;else{var qt,vt;if(Ee=Ue,Ue=Ce,De=ue.Pa.Xc,nt=ue.ya[ue.aa+ue.ja],ze=ue.pb[nt.$b],_e=nt.ad,Dt=0,Bt=ue.rb[ue.sb-1],Tt=jt=0,i(_e,Dt,0,384),nt.Za)var Hn=0,pi=De[3];else{Wt=s(16);var Kn=Ee.Na+Bt.Na;if(Kn=zh(Ue,De[1],Kn,ze.Eb,0,Wt,0),Ee.Na=Bt.Na=(0<Kn)+0,1<Kn)_u(Wt,0,_e,Dt);else{var mi=Wt[0]+3>>3;for(Wt=0;256>Wt;Wt+=16)_e[Dt+Wt]=mi}Hn=1,pi=De[0]}var zt=15&Ee.la,Ri=15&Bt.la;for(Wt=0;4>Wt;++Wt){var Di=1&Ri;for(mi=vt=0;4>mi;++mi)zt=zt>>1|(Di=(Kn=zh(Ue,pi,Kn=Di+(1&zt),ze.Sc,Hn,_e,Dt))>Hn)<<7,vt=vt<<2|(3<Kn?3:1<Kn?2:_e[Dt+0]!=0),Dt+=16;zt>>=4,Ri=Ri>>1|Di<<7,jt=(jt<<8|vt)>>>0}for(pi=zt,Hn=Ri>>4,qt=0;4>qt;qt+=2){for(vt=0,zt=Ee.la>>4+qt,Ri=Bt.la>>4+qt,Wt=0;2>Wt;++Wt){for(Di=1&Ri,mi=0;2>mi;++mi)Kn=Di+(1&zt),zt=zt>>1|(Di=0<(Kn=zh(Ue,De[2],Kn,ze.Qc,0,_e,Dt)))<<3,vt=vt<<2|(3<Kn?3:1<Kn?2:_e[Dt+0]!=0),Dt+=16;zt>>=2,Ri=Ri>>1|Di<<5}Tt|=vt<<4*qt,pi|=zt<<4<<qt,Hn|=(240&Ri)<<qt}Ee.la=pi,Bt.la=Hn,nt.Hc=jt,nt.Gc=Tt,nt.ia=43690&Tt?0:ze.ia,De=!(jt|Tt)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[xe.$b][xe.Za],ue.wa[ue.Y+ue.ja].La|=!De),Ce.Ka)return Ln(de,7,"Premature end-of-file encountered.")}if(yh(de),ue=Ae,Ce=1,xe=(le=de).D,Ee=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(xe.M=le.M,xe.uc=Ee,Mh(le,xe),Ce=1,xe=(vt=le.D).Nb,Ee=(Tt=Jm[le.L])*le.R,Ue=Tt/2*le.B,Wt=16*xe*le.R,mi=8*xe*le.B,De=le.sa,nt=le.ta-Ee+Wt,ze=le.qa,_e=le.ra-Ue+mi,Dt=le.Ha,Bt=le.Ia-Ue+mi,Ri=(zt=vt.M)==0,jt=zt>=le.Va-1,le.Aa==2&&Mh(le,vt),vt.uc)for(Di=(Kn=le).D.M,e(Kn.D.uc),vt=Kn.yb;vt<Kn.Hb;++vt){Hn=vt,pi=Di;var ir=(vr=(Cn=Kn).D).Nb;qt=Cn.R;var vr=vr.wa[vr.Y+Hn],Qr=Cn.sa,ls=Cn.ta+16*ir*qt+16*Hn,so=vr.dd,sr=vr.tc;if(sr!=0)if(e(3<=sr),Cn.L==1)0<Hn&&_a(Qr,ls,qt,sr+4),vr.La&&rs(Qr,ls,qt,sr),0<pi&&Jl(Qr,ls,qt,sr+4),vr.La&&Fh(Qr,ls,qt,sr);else{var Do=Cn.B,Ql=Cn.qa,Eu=Cn.ra+8*ir*Do+8*Hn,Ta=Cn.Ha,Cn=Cn.Ia+8*ir*Do+8*Hn;ir=vr.ld,0<Hn&&($m(Qr,ls,qt,sr+4,so,ir),Gl(Ql,Eu,Ta,Cn,Do,sr+4,so,ir)),vr.La&&(Ca(Qr,ls,qt,sr,so,ir),Nu(Ql,Eu,Ta,Cn,Do,sr,so,ir)),0<pi&&(Au(Qr,ls,qt,sr+4,so,ir),Dh(Ql,Eu,Ta,Cn,Do,sr+4,so,ir)),vr.La&&(Yl(Qr,ls,qt,sr,so,ir),Xl(Ql,Eu,Ta,Cn,Do,sr,so,ir))}}if(le.ia&&alert("todo:DitherRow"),ue.put!=null){if(vt=16*zt,zt=16*(zt+1),Ri?(ue.y=le.sa,ue.O=le.ta+Wt,ue.f=le.qa,ue.N=le.ra+mi,ue.ea=le.Ha,ue.W=le.Ia+mi):(vt-=Tt,ue.y=De,ue.O=nt,ue.f=ze,ue.N=_e,ue.ea=Dt,ue.W=Bt),jt||(zt-=Tt),zt>ue.o&&(zt=ue.o),ue.F=null,ue.J=null,le.Fa!=null&&0<le.Fa.length&&vt<zt&&(ue.J=Eh(le,ue,vt,zt-vt),ue.F=le.mb,ue.F==null&&ue.F.length==0)){Ce=Ln(le,3,"Could not decode alpha data.");break e}vt<ue.j&&(Tt=ue.j-vt,vt=ue.j,e(!(1&Tt)),ue.O+=le.R*Tt,ue.N+=le.B*(Tt>>1),ue.W+=le.B*(Tt>>1),ue.F!=null&&(ue.J+=ue.width*Tt)),vt<zt&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=vt-ue.j,ue.U=ue.va-ue.v,ue.T=zt-vt,Ce=ue.put(ue))}xe+1!=le.Ic||jt||(r(le.sa,le.ta-Ee,De,nt+16*le.R,Ee),r(le.qa,le.ra-Ue,ze,_e+8*le.B,Ue),r(le.Ha,le.Ia-Ue,Dt,Bt+8*le.B,Ue))}if(!Ce)return Ln(de,6,"Output aborted.")}return 1}(g,w)),w.bc!=null&&w.bc(w),C&=1}return C?(g.cb=0,C):0}function Es(g,w,C,N,L){L=g[w+C+32*N]+(L>>3),g[w+C+32*N]=-256&L?0>L?0:255:L}function du(g,w,C,N,L,R){Es(g,w,0,C,N+L),Es(g,w,1,C,N+R),Es(g,w,2,C,N-R),Es(g,w,3,C,N-L)}function di(g){return(20091*g>>16)+g}function vh(g,w,C,N){var L,R=0,D=s(16);for(L=0;4>L;++L){var $=g[w+0]+g[w+8],W=g[w+0]-g[w+8],J=(35468*g[w+4]>>16)-di(g[w+12]),ae=di(g[w+4])+(35468*g[w+12]>>16);D[R+0]=$+ae,D[R+1]=W+J,D[R+2]=W-J,D[R+3]=$-ae,R+=4,w++}for(L=R=0;4>L;++L)$=(g=D[R+0]+4)+D[R+8],W=g-D[R+8],J=(35468*D[R+4]>>16)-di(D[R+12]),Es(C,N,0,0,$+(ae=di(D[R+4])+(35468*D[R+12]>>16))),Es(C,N,1,0,W+J),Es(C,N,2,0,W-J),Es(C,N,3,0,$-ae),R++,N+=32}function Cm(g,w,C,N){var L=g[w+0]+4,R=35468*g[w+4]>>16,D=di(g[w+4]),$=35468*g[w+1]>>16;du(C,N,0,L+D,g=di(g[w+1]),$),du(C,N,1,L+R,g,$),du(C,N,2,L-R,g,$),du(C,N,3,L-D,g,$)}function j1(g,w,C,N,L){vh(g,w,C,N),L&&vh(g,w+16,C,N+4)}function _m(g,w,C,N){Oo(g,w+0,C,N,1),Oo(g,w+32,C,N+128,1)}function L1(g,w,C,N){var L;for(g=g[w+0]+4,L=0;4>L;++L)for(w=0;4>w;++w)Es(C,N,w,L,g)}function Am(g,w,C,N){g[w+0]&&Jr(g,w+0,C,N),g[w+16]&&Jr(g,w+16,C,N+4),g[w+32]&&Jr(g,w+32,C,N+128),g[w+48]&&Jr(g,w+48,C,N+128+4)}function O1(g,w,C,N){var L,R=s(16);for(L=0;4>L;++L){var D=g[w+0+L]+g[w+12+L],$=g[w+4+L]+g[w+8+L],W=g[w+4+L]-g[w+8+L],J=g[w+0+L]-g[w+12+L];R[0+L]=D+$,R[8+L]=D-$,R[4+L]=J+W,R[12+L]=J-W}for(L=0;4>L;++L)D=(g=R[0+4*L]+3)+R[3+4*L],$=R[1+4*L]+R[2+4*L],W=R[1+4*L]-R[2+4*L],J=g-R[3+4*L],C[N+0]=D+$>>3,C[N+16]=J+W>>3,C[N+32]=D-$>>3,C[N+48]=J-W>>3,N+=64}function bh(g,w,C){var N,L=w-32,R=Ii,D=255-g[L-1];for(N=0;N<C;++N){var $,W=R,J=D+g[w-1];for($=0;$<C;++$)g[w+$]=W[J+g[L+$]];w+=32}}function I1(g,w){bh(g,w,4)}function R1(g,w){bh(g,w,8)}function D1(g,w){bh(g,w,16)}function Po(g,w){var C;for(C=0;16>C;++C)r(g,w+32*C,g,w-32,16)}function hu(g,w){var C;for(C=16;0<C;--C)i(g,w,g[w-1],16),w+=32}function fu(g,w,C){var N;for(N=0;16>N;++N)i(w,C+32*N,g,16)}function Nm(g,w){var C,N=16;for(C=0;16>C;++C)N+=g[w-1+32*C]+g[w+C-32];fu(N>>5,g,w)}function Er(g,w){var C,N=8;for(C=0;16>C;++C)N+=g[w-1+32*C];fu(N>>4,g,w)}function F1(g,w){var C,N=8;for(C=0;16>C;++C)N+=g[w+C-32];fu(N>>4,g,w)}function Tm(g,w){fu(128,g,w)}function dt(g,w,C){return g+2*w+C+2>>2}function B1(g,w){var C,N=w-32;for(N=new Uint8Array([dt(g[N-1],g[N+0],g[N+1]),dt(g[N+0],g[N+1],g[N+2]),dt(g[N+1],g[N+2],g[N+3]),dt(g[N+2],g[N+3],g[N+4])]),C=0;4>C;++C)r(g,w+32*C,N,0,N.length)}function z1(g,w){var C=g[w-1],N=g[w-1+32],L=g[w-1+64],R=g[w-1+96];ke(g,w+0,16843009*dt(g[w-1-32],C,N)),ke(g,w+32,16843009*dt(C,N,L)),ke(g,w+64,16843009*dt(N,L,R)),ke(g,w+96,16843009*dt(L,R,R))}function no(g,w){var C,N=4;for(C=0;4>C;++C)N+=g[w+C-32]+g[w-1+32*C];for(N>>=3,C=0;4>C;++C)i(g,w+32*C,N,4)}function Em(g,w){var C=g[w-1+0],N=g[w-1+32],L=g[w-1+64],R=g[w-1-32],D=g[w+0-32],$=g[w+1-32],W=g[w+2-32],J=g[w+3-32];g[w+0+96]=dt(N,L,g[w-1+96]),g[w+1+96]=g[w+0+64]=dt(C,N,L),g[w+2+96]=g[w+1+64]=g[w+0+32]=dt(R,C,N),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=dt(D,R,C),g[w+3+64]=g[w+2+32]=g[w+1+0]=dt($,D,R),g[w+3+32]=g[w+2+0]=dt(W,$,D),g[w+3+0]=dt(J,W,$)}function Pm(g,w){var C=g[w+1-32],N=g[w+2-32],L=g[w+3-32],R=g[w+4-32],D=g[w+5-32],$=g[w+6-32],W=g[w+7-32];g[w+0+0]=dt(g[w+0-32],C,N),g[w+1+0]=g[w+0+32]=dt(C,N,L),g[w+2+0]=g[w+1+32]=g[w+0+64]=dt(N,L,R),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=dt(L,R,D),g[w+3+32]=g[w+2+64]=g[w+1+96]=dt(R,D,$),g[w+3+64]=g[w+2+96]=dt(D,$,W),g[w+3+96]=dt($,W,W)}function pu(g,w){var C=g[w-1+0],N=g[w-1+32],L=g[w-1+64],R=g[w-1-32],D=g[w+0-32],$=g[w+1-32],W=g[w+2-32],J=g[w+3-32];g[w+0+0]=g[w+1+64]=R+D+1>>1,g[w+1+0]=g[w+2+64]=D+$+1>>1,g[w+2+0]=g[w+3+64]=$+W+1>>1,g[w+3+0]=W+J+1>>1,g[w+0+96]=dt(L,N,C),g[w+0+64]=dt(N,C,R),g[w+0+32]=g[w+1+96]=dt(C,R,D),g[w+1+32]=g[w+2+96]=dt(R,D,$),g[w+2+32]=g[w+3+96]=dt(D,$,W),g[w+3+32]=dt($,W,J)}function xh(g,w){var C=g[w+0-32],N=g[w+1-32],L=g[w+2-32],R=g[w+3-32],D=g[w+4-32],$=g[w+5-32],W=g[w+6-32],J=g[w+7-32];g[w+0+0]=C+N+1>>1,g[w+1+0]=g[w+0+64]=N+L+1>>1,g[w+2+0]=g[w+1+64]=L+R+1>>1,g[w+3+0]=g[w+2+64]=R+D+1>>1,g[w+0+32]=dt(C,N,L),g[w+1+32]=g[w+0+96]=dt(N,L,R),g[w+2+32]=g[w+1+96]=dt(L,R,D),g[w+3+32]=g[w+2+96]=dt(R,D,$),g[w+3+64]=dt(D,$,W),g[w+3+96]=dt($,W,J)}function $1(g,w){var C=g[w-1+0],N=g[w-1+32],L=g[w-1+64],R=g[w-1+96];g[w+0+0]=C+N+1>>1,g[w+2+0]=g[w+0+32]=N+L+1>>1,g[w+2+32]=g[w+0+64]=L+R+1>>1,g[w+1+0]=dt(C,N,L),g[w+3+0]=g[w+1+32]=dt(N,L,R),g[w+3+32]=g[w+1+64]=dt(L,R,R),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=R}function V1(g,w){var C=g[w-1+0],N=g[w-1+32],L=g[w-1+64],R=g[w-1+96],D=g[w-1-32],$=g[w+0-32],W=g[w+1-32],J=g[w+2-32];g[w+0+0]=g[w+2+32]=C+D+1>>1,g[w+0+32]=g[w+2+64]=N+C+1>>1,g[w+0+64]=g[w+2+96]=L+N+1>>1,g[w+0+96]=R+L+1>>1,g[w+3+0]=dt($,W,J),g[w+2+0]=dt(D,$,W),g[w+1+0]=g[w+3+32]=dt(C,D,$),g[w+1+32]=g[w+3+64]=dt(N,C,D),g[w+1+64]=g[w+3+96]=dt(L,N,C),g[w+1+96]=dt(R,L,N)}function U1(g,w){var C;for(C=0;8>C;++C)r(g,w+32*C,g,w-32,8)}function wh(g,w){var C;for(C=0;8>C;++C)i(g,w,g[w-1],8),w+=32}function Ul(g,w,C){var N;for(N=0;8>N;++N)i(w,C+32*N,g,8)}function ba(g,w){var C,N=8;for(C=0;8>C;++C)N+=g[w+C-32]+g[w-1+32*C];Ul(N>>4,g,w)}function q1(g,w){var C,N=4;for(C=0;8>C;++C)N+=g[w+C-32];Ul(N>>3,g,w)}function ql(g,w){var C,N=4;for(C=0;8>C;++C)N+=g[w-1+32*C];Ul(N>>3,g,w)}function Sh(g,w){Ul(128,g,w)}function mu(g,w,C){var N=g[w-C],L=g[w+0],R=3*(L-N)+X1[1020+g[w-2*C]-g[w+C]],D=Um[112+(R+4>>3)];g[w-C]=Ii[255+N+Um[112+(R+3>>3)]],g[w+0]=Ii[255+L-D]}function Mm(g,w,C,N){var L=g[w+0],R=g[w+C];return ss[255+g[w-2*C]-g[w-C]]>N||ss[255+R-L]>N}function jm(g,w,C,N){return 4*ss[255+g[w-C]-g[w+0]]+ss[255+g[w-2*C]-g[w+C]]<=N}function Lm(g,w,C,N,L){var R=g[w-3*C],D=g[w-2*C],$=g[w-C],W=g[w+0],J=g[w+C],ae=g[w+2*C],me=g[w+3*C];return 4*ss[255+$-W]+ss[255+D-J]>N?0:ss[255+g[w-4*C]-R]<=L&&ss[255+R-D]<=L&&ss[255+D-$]<=L&&ss[255+me-ae]<=L&&ss[255+ae-J]<=L&&ss[255+J-W]<=L}function Om(g,w,C,N){var L=2*N+1;for(N=0;16>N;++N)jm(g,w+N,C,L)&&mu(g,w+N,C)}function ro(g,w,C,N){var L=2*N+1;for(N=0;16>N;++N)jm(g,w+N*C,1,L)&&mu(g,w+N*C,1)}function Mo(g,w,C,N){var L;for(L=3;0<L;--L)Om(g,w+=4*C,C,N)}function W1(g,w,C,N){var L;for(L=3;0<L;--L)ro(g,w+=4,C,N)}function xa(g,w,C,N,L,R,D,$){for(R=2*R+1;0<L--;){if(Lm(g,w,C,R,D))if(Mm(g,w,C,$))mu(g,w,C);else{var W=g,J=w,ae=C,me=W[J-2*ae],ge=W[J-ae],de=W[J+0],Ae=W[J+ae],xe=W[J+2*ae],le=27*(Ce=X1[1020+3*(de-ge)+X1[1020+me-Ae]])+63>>7,ue=18*Ce+63>>7,Ce=9*Ce+63>>7;W[J-3*ae]=Ii[255+W[J-3*ae]+Ce],W[J-2*ae]=Ii[255+me+ue],W[J-ae]=Ii[255+ge+le],W[J+0]=Ii[255+de-le],W[J+ae]=Ii[255+Ae-ue],W[J+2*ae]=Ii[255+xe-Ce]}w+=N}}function Ps(g,w,C,N,L,R,D,$){for(R=2*R+1;0<L--;){if(Lm(g,w,C,R,D))if(Mm(g,w,C,$))mu(g,w,C);else{var W=g,J=w,ae=C,me=W[J-ae],ge=W[J+0],de=W[J+ae],Ae=Um[112+((xe=3*(ge-me))+4>>3)],xe=Um[112+(xe+3>>3)],le=Ae+1>>1;W[J-2*ae]=Ii[255+W[J-2*ae]+le],W[J-ae]=Ii[255+me+xe],W[J+0]=Ii[255+ge-Ae],W[J+ae]=Ii[255+de-le]}w+=N}}function kh(g,w,C,N,L,R){xa(g,w,C,1,16,N,L,R)}function Wl(g,w,C,N,L,R){xa(g,w,1,C,16,N,L,R)}function H1(g,w,C,N,L,R){var D;for(D=3;0<D;--D)Ps(g,w+=4*C,C,1,16,N,L,R)}function gu(g,w,C,N,L,R){var D;for(D=3;0<D;--D)Ps(g,w+=4,1,C,16,N,L,R)}function K1(g,w,C,N,L,R,D,$){xa(g,w,L,1,8,R,D,$),xa(C,N,L,1,8,R,D,$)}function Ch(g,w,C,N,L,R,D,$){xa(g,w,1,L,8,R,D,$),xa(C,N,1,L,8,R,D,$)}function _h(g,w,C,N,L,R,D,$){Ps(g,w+4*L,L,1,8,R,D,$),Ps(C,N+4*L,L,1,8,R,D,$)}function Im(g,w,C,N,L,R,D,$){Ps(g,w+4,1,L,8,R,D,$),Ps(C,N+4,1,L,8,R,D,$)}function yu(){this.ba=new Ei,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ah(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Nh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Rm(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new F,this.yc=new I}function G1(){this.xb=this.a=0,this.l=new uu,this.ca=new Ei,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Rm,this.ab=0,this.gc=o(4,Nh),this.Oc=0}function vu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new uu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Hl(g,w,C,N,L,R,D){for(g=g==null?0:g[w+0],w=0;w<D;++w)L[R+w]=g+C[N+w]&255,g=L[R+w]}function Th(g,w,C,N,L,R,D){var $;if(g==null)Hl(null,null,C,N,L,R,D);else for($=0;$<D;++$)L[R+$]=g[w+$]+C[N+$]&255}function wa(g,w,C,N,L,R,D){if(g==null)Hl(null,null,C,N,L,R,D);else{var $,W=g[w+0],J=W,ae=W;for($=0;$<D;++$)J=ae+(W=g[w+$])-J,ae=C[N+$]+(-256&J?0>J?0:255:J)&255,J=W,L[R+$]=ae}}function Eh(g,w,C,N){var L=w.width,R=w.o;if(e(g!=null&&w!=null),0>C||0>=N||C+N>R)return null;if(!g.Cc){if(g.ga==null){var D;if(g.ga=new vu,(D=g.ga==null)||(D=w.width*w.o,e(g.Gb.length==0),g.Gb=s(D),g.Uc=0,g.Gb==null?D=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,D=1),D=!D),!D){D=g.ga;var $=g.Fa,W=g.P,J=g.qc,ae=g.mb,me=g.nb,ge=W+1,de=J-1,Ae=D.l;if(e($!=null&&ae!=null&&w!=null),Na[0]=null,Na[1]=Hl,Na[2]=Th,Na[3]=wa,D.ca=ae,D.tb=me,D.c=w.width,D.i=w.height,e(0<D.c&&0<D.i),1>=J)w=0;else if(D.$a=$[W+0]>>0&3,D.Z=$[W+0]>>2&3,D.Lc=$[W+0]>>4&3,W=$[W+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||W)w=0;else if(Ae.put=ci,Ae.ac=jn,Ae.bc=gr,Ae.ma=D,Ae.width=w.width,Ae.height=w.height,Ae.Da=w.Da,Ae.v=w.v,Ae.va=w.va,Ae.j=w.j,Ae.o=w.o,D.$a)e:{e(D.$a==1),w=Nr();t:for(;;){if(w==null){w=0;break e}if(e(D!=null),D.mc=w,w.c=D.c,w.i=D.i,w.l=D.l,w.l.ma=D,w.l.width=D.c,w.l.height=D.i,w.a=0,X(w.m,$,ge,de),!Li(D.c,D.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&qn(w.s)?(D.ic=1,$=w.c*w.i,w.Ta=null,w.Ua=0,w.V=s($),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(D.ic=0,w=Eo(w,D.c)),!w))break t;w=1;break e}D.mc=null,w=0}else w=de>=D.c*D.i;D=!w}if(D)return null;g.ga.Lc!=1?g.Ga=0:N=R-C}e(g.ga!=null),e(C+N<=R);e:{if(w=($=g.ga).c,R=$.l.o,$.$a==0){if(ge=g.rc,de=g.Vc,Ae=g.Fa,W=g.P+1+C*w,J=g.mb,ae=g.nb+C*w,e(W<=g.P+g.qc),$.Z!=0)for(e(Na[$.Z]!=null),D=0;D<N;++D)Na[$.Z](ge,de,Ae,W,J,ae,w),ge=J,de=ae,ae+=w,W+=w;else for(D=0;D<N;++D)r(J,ae,Ae,W,w),ge=J,de=ae,ae+=w,W+=w;g.rc=ge,g.Vc=de}else{if(e($.mc!=null),w=C+N,e((D=$.mc)!=null),e(w<=D.i),D.C>=w)w=1;else if($.ic||pe(),$.ic){$=D.V,ge=D.Ba,de=D.c;var xe=D.i,le=(Ae=1,W=D.$/de,J=D.$%de,ae=D.m,me=D.s,D.$),ue=de*xe,Ce=de*w,Ee=me.wc,_e=le<Ce?wn(me,J,W):null;e(le<=ue),e(w<=xe),e(qn(me));t:for(;;){for(;!ae.h&&le<Ce;){if(J&Ee||(_e=wn(me,J,W)),e(_e!=null),re(ae),256>(xe=Rt(_e.G[0],_e.H[0],ae)))$[ge+le]=xe,++le,++J>=de&&(J=0,++W<=w&&!(W%16)&&Ar(D,W));else{if(!(280>xe)){Ae=0;break t}xe=ui(xe-256,ae);var Ue,De=Rt(_e.G[4],_e.H[4],ae);if(re(ae),!(le>=(De=es(de,De=ui(De,ae)))&&ue-le>=xe)){Ae=0;break t}for(Ue=0;Ue<xe;++Ue)$[ge+le+Ue]=$[ge+le+Ue-De];for(le+=xe,J+=xe;J>=de;)J-=de,++W<=w&&!(W%16)&&Ar(D,W);le<Ce&&J&Ee&&(_e=wn(me,J,W))}e(ae.h==G(ae))}Ar(D,W>w?w:W);break t}!Ae||ae.h&&le<ue?(Ae=0,D.a=ae.h?5:3):D.$=le,w=Ae}else w=Mi(D,D.V,D.Ba,D.c,D.i,w,va);if(!w){N=0;break e}}C+N>=R&&(g.Cc=1),N=1}if(!N)return null;if(g.Cc&&((N=g.ga)!=null&&(N.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+C*L}function k(g,w,C,N,L,R){for(;0<L--;){var D,$=g,W=w+(C?1:0),J=g,ae=w+(C?0:3);for(D=0;D<N;++D){var me=J[ae+4*D];me!=255&&(me*=32897,$[W+4*D+0]=$[W+4*D+0]*me>>23,$[W+4*D+1]=$[W+4*D+1]*me>>23,$[W+4*D+2]=$[W+4*D+2]*me>>23)}w+=R}}function O(g,w,C,N,L){for(;0<N--;){var R;for(R=0;R<C;++R){var D=g[w+2*R+0],$=15&(J=g[w+2*R+1]),W=4369*$,J=(240&J|J>>4)*W>>16;g[w+2*R+0]=(240&D|D>>4)*W>>16&240|(15&D|D<<4)*W>>16>>4&15,g[w+2*R+1]=240&J|$}w+=L}}function te(g,w,C,N,L,R,D,$){var W,J,ae=255;for(J=0;J<L;++J){for(W=0;W<N;++W){var me=g[w+W];R[D+4*W]=me,ae&=me}w+=C,D+=$}return ae!=255}function oe(g,w,C,N,L){var R;for(R=0;R<L;++R)C[N+R]=g[w+R]>>8}function pe(){is=k,Xt=O,Jt=te,In=oe}function we(g,w,C){E[g]=function(N,L,R,D,$,W,J,ae,me,ge,de,Ae,xe,le,ue,Ce,Ee){var _e,Ue=Ee-1>>1,De=$[W+0]|J[ae+0]<<16,nt=me[ge+0]|de[Ae+0]<<16;e(N!=null);var ze=3*De+nt+131074>>2;for(w(N[L+0],255&ze,ze>>16,xe,le),R!=null&&(ze=3*nt+De+131074>>2,w(R[D+0],255&ze,ze>>16,ue,Ce)),_e=1;_e<=Ue;++_e){var Dt=$[W+_e]|J[ae+_e]<<16,Bt=me[ge+_e]|de[Ae+_e]<<16,jt=De+Dt+nt+Bt+524296,Tt=jt+2*(Dt+nt)>>3;ze=Tt+De>>1,De=(jt=jt+2*(De+Bt)>>3)+Dt>>1,w(N[L+2*_e-1],255&ze,ze>>16,xe,le+(2*_e-1)*C),w(N[L+2*_e-0],255&De,De>>16,xe,le+(2*_e-0)*C),R!=null&&(ze=jt+nt>>1,De=Tt+Bt>>1,w(R[D+2*_e-1],255&ze,ze>>16,ue,Ce+(2*_e-1)*C),w(R[D+2*_e+0],255&De,De>>16,ue,Ce+(2*_e+0)*C)),De=Dt,nt=Bt}1&Ee||(ze=3*De+nt+131074>>2,w(N[L+Ee-1],255&ze,ze>>16,xe,le+(Ee-1)*C),R!=null&&(ze=3*nt+De+131074>>2,w(R[D+Ee-1],255&ze,ze>>16,ue,Ce+(Ee-1)*C)))}}function Pe(){as[qm]=r7,as[Wm]=r_,as[QC]=i7,as[Hm]=i_,as[Km]=s_,as[J1]=o_,as[ZC]=s7,as[Q1]=r_,as[Z1]=i_,as[Gm]=s_,as[eb]=o_}function $e(g){return g&~o7?0>g?0:255:g>>a_}function Xe(g,w){return $e((19077*g>>8)+(26149*w>>8)-14234)}function mt(g,w,C){return $e((19077*g>>8)-(6419*w>>8)-(13320*C>>8)+8708)}function ht(g,w){return $e((19077*g>>8)+(33050*w>>8)-17685)}function Pt(g,w,C,N,L){N[L+0]=Xe(g,C),N[L+1]=mt(g,w,C),N[L+2]=ht(g,w)}function mn(g,w,C,N,L){N[L+0]=ht(g,w),N[L+1]=mt(g,w,C),N[L+2]=Xe(g,C)}function kn(g,w,C,N,L){var R=mt(g,w,C);w=R<<3&224|ht(g,w)>>3,N[L+0]=248&Xe(g,C)|R>>5,N[L+1]=w}function Wn(g,w,C,N,L){var R=240&ht(g,w)|15;N[L+0]=240&Xe(g,C)|mt(g,w,C)>>4,N[L+1]=R}function Pr(g,w,C,N,L){N[L+0]=255,Pt(g,w,C,N,L+1)}function rr(g,w,C,N,L){mn(g,w,C,N,L),N[L+3]=255}function Ms(g,w,C,N,L){Pt(g,w,C,N,L),N[L+3]=255}function Oi(g,w){return 0>g?0:g>w?w:g}function io(g,w,C){E[g]=function(N,L,R,D,$,W,J,ae,me){for(var ge=ae+(-2&me)*C;ae!=ge;)w(N[L+0],R[D+0],$[W+0],J,ae),w(N[L+1],R[D+0],$[W+0],J,ae+C),L+=2,++D,++W,ae+=2*C;1&me&&w(N[L+0],R[D+0],$[W+0],J,ae)}}function Dm(g,w,C){return C==0?g==0?w==0?6:5:w==0?4:0:C}function Ph(g,w,C,N,L){switch(g>>>30){case 3:Oo(w,C,N,L,0);break;case 2:On(w,C,N,L);break;case 1:Jr(w,C,N,L)}}function Mh(g,w){var C,N,L=w.M,R=w.Nb,D=g.oc,$=g.pc+40,W=g.oc,J=g.pc+584,ae=g.oc,me=g.pc+600;for(C=0;16>C;++C)D[$+32*C-1]=129;for(C=0;8>C;++C)W[J+32*C-1]=129,ae[me+32*C-1]=129;for(0<L?D[$-1-32]=W[J-1-32]=ae[me-1-32]=129:(i(D,$-32-1,127,21),i(W,J-32-1,127,9),i(ae,me-32-1,127,9)),N=0;N<g.za;++N){var ge=w.ya[w.aa+N];if(0<N){for(C=-1;16>C;++C)r(D,$+32*C-4,D,$+32*C+12,4);for(C=-1;8>C;++C)r(W,J+32*C-4,W,J+32*C+4,4),r(ae,me+32*C-4,ae,me+32*C+4,4)}var de=g.Gd,Ae=g.Hd+N,xe=ge.ad,le=ge.Hc;if(0<L&&(r(D,$-32,de[Ae].y,0,16),r(W,J-32,de[Ae].f,0,8),r(ae,me-32,de[Ae].ea,0,8)),ge.Za){var ue=D,Ce=$-32+16;for(0<L&&(N>=g.za-1?i(ue,Ce,de[Ae].y[15],4):r(ue,Ce,de[Ae+1].y,0,4)),C=0;4>C;C++)ue[Ce+128+C]=ue[Ce+256+C]=ue[Ce+384+C]=ue[Ce+0+C];for(C=0;16>C;++C,le<<=2)ue=D,Ce=$+c_[C],js[ge.Ob[C]](ue,Ce),Ph(le,xe,16*+C,ue,Ce)}else if(ue=Dm(N,L,ge.Ob[0]),Aa[ue](D,$),le!=0)for(C=0;16>C;++C,le<<=2)Ph(le,xe,16*+C,D,$+c_[C]);for(C=ge.Gc,ue=Dm(N,L,ge.Dd),Ro[ue](W,J),Ro[ue](ae,me),le=xe,ue=W,Ce=J,255&(ge=C>>0)&&(170&ge?Rh(le,256,ue,Ce):ns(le,256,ue,Ce)),ge=ae,le=me,255&(C>>=8)&&(170&C?Rh(xe,320,ge,le):ns(xe,320,ge,le)),L<g.Ub-1&&(r(de[Ae].y,0,D,$+480,16),r(de[Ae].f,0,W,J+224,8),r(de[Ae].ea,0,ae,me+224,8)),C=8*R*g.B,de=g.sa,Ae=g.ta+16*N+16*R*g.R,xe=g.qa,ge=g.ra+8*N+C,le=g.Ha,ue=g.Ia+8*N+C,C=0;16>C;++C)r(de,Ae+C*g.R,D,$+32*C,16);for(C=0;8>C;++C)r(xe,ge+C*g.B,W,J+32*C,8),r(le,ue+C*g.B,ae,me+32*C,8)}}function bu(g,w,C,N,L,R,D,$,W){var J=[0],ae=[0],me=0,ge=W!=null?W.kd:0,de=W??new Ah;if(g==null||12>C)return 7;de.data=g,de.w=w,de.ha=C,w=[w],C=[C],de.gb=[de.gb];e:{var Ae=w,xe=C,le=de.gb;if(e(g!=null),e(xe!=null),e(le!=null),le[0]=0,12<=xe[0]&&!n(g,Ae[0],"RIFF")){if(n(g,Ae[0]+8,"WEBP")){le=3;break e}var ue=ve(g,Ae[0]+4);if(12>ue||4294967286<ue){le=3;break e}if(ge&&ue>xe[0]-8){le=7;break e}le[0]=ue,Ae[0]+=12,xe[0]-=12}le=0}if(le!=0)return le;for(ue=0<de.gb[0],C=C[0];;){e:{var Ce=g;xe=w,le=C;var Ee=J,_e=ae,Ue=Ae=[0];if((ze=me=[me])[0]=0,8>le[0])le=7;else{if(!n(Ce,xe[0],"VP8X")){if(ve(Ce,xe[0]+4)!=10){le=3;break e}if(18>le[0]){le=7;break e}var De=ve(Ce,xe[0]+8),nt=1+ye(Ce,xe[0]+12);if(2147483648<=nt*(Ce=1+ye(Ce,xe[0]+15))){le=3;break e}Ue!=null&&(Ue[0]=De),Ee!=null&&(Ee[0]=nt),_e!=null&&(_e[0]=Ce),xe[0]+=18,le[0]-=18,ze[0]=1}le=0}}if(me=me[0],Ae=Ae[0],le!=0)return le;if(xe=!!(2&Ae),!ue&&me)return 3;if(R!=null&&(R[0]=!!(16&Ae)),D!=null&&(D[0]=xe),$!=null&&($[0]=0),D=J[0],Ae=ae[0],me&&xe&&W==null){le=0;break}if(4>C){le=7;break}if(ue&&me||!ue&&!me&&!n(g,w[0],"ALPH")){C=[C],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{De=g,le=w,ue=C;var ze=de.gb;Ee=de.na,_e=de.P,Ue=de.Sa,nt=22,e(De!=null),e(ue!=null),Ce=le[0];var Dt=ue[0];for(e(Ee!=null),e(Ue!=null),Ee[0]=null,_e[0]=null,Ue[0]=0;;){if(le[0]=Ce,ue[0]=Dt,8>Dt){le=7;break e}var Bt=ve(De,Ce+4);if(4294967286<Bt){le=3;break e}var jt=8+Bt+1&-2;if(nt+=jt,0<ze&&nt>ze){le=3;break e}if(!n(De,Ce,"VP8 ")||!n(De,Ce,"VP8L")){le=0;break e}if(Dt[0]<jt){le=7;break e}n(De,Ce,"ALPH")||(Ee[0]=De,_e[0]=Ce+8,Ue[0]=Bt),Ce+=jt,Dt-=jt}}if(C=C[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],le!=0)break}C=[C],de.Ja=[de.Ja],de.xa=[de.xa];e:if(ze=g,le=w,ue=C,Ee=de.gb[0],_e=de.Ja,Ue=de.xa,De=le[0],Ce=!n(ze,De,"VP8 "),nt=!n(ze,De,"VP8L"),e(ze!=null),e(ue!=null),e(_e!=null),e(Ue!=null),8>ue[0])le=7;else{if(Ce||nt){if(ze=ve(ze,De+4),12<=Ee&&ze>Ee-12){le=3;break e}if(ge&&ze>ue[0]-8){le=7;break e}_e[0]=ze,le[0]+=8,ue[0]-=8,Ue[0]=nt}else Ue[0]=5<=ue[0]&&ze[De+0]==47&&!(ze[De+4]>>5),_e[0]=ue[0];le=0}if(C=C[0],de.Ja=de.Ja[0],de.xa=de.xa[0],w=w[0],le!=0)break;if(4294967286<de.Ja)return 3;if($==null||xe||($[0]=de.xa?2:1),D=[D],Ae=[Ae],de.xa){if(5>C){le=7;break}$=D,ge=Ae,xe=R,g==null||5>C?g=0:5<=C&&g[w+0]==47&&!(g[w+4]>>5)?(ue=[0],ze=[0],Ee=[0],X(_e=new M,g,w,C),Ye(_e,ue,ze,Ee)?($!=null&&($[0]=ue[0]),ge!=null&&(ge[0]=ze[0]),xe!=null&&(xe[0]=Ee[0]),g=1):g=0):g=0}else{if(10>C){le=7;break}$=Ae,g==null||10>C||!wm(g,w+3,C-3)?g=0:(ge=g[w+0]|g[w+1]<<8|g[w+2]<<16,xe=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=de.Ja||!xe||!g?g=0:(D&&(D[0]=xe),$&&($[0]=g),g=1))}if(!g||(D=D[0],Ae=Ae[0],me&&(J[0]!=D||ae[0]!=Ae)))return 3;W!=null&&(W[0]=de,W.offset=w-W.w,e(4294967286>w-W.w),e(W.offset==W.ha-C));break}return le==0||le==7&&me&&W==null?(R!=null&&(R[0]|=de.na!=null&&0<de.na.length),N!=null&&(N[0]=D),L!=null&&(L[0]=Ae),0):le}function jh(g,w,C){var N=w.width,L=w.height,R=0,D=0,$=N,W=L;if(w.Da=g!=null&&0<g.Da,w.Da&&($=g.cd,W=g.bd,R=g.v,D=g.j,11>C||(R&=-2,D&=-2),0>R||0>D||0>=$||0>=W||R+$>N||D+W>L))return 0;if(w.v=R,w.j=D,w.va=R+$,w.o=D+W,w.U=$,w.T=W,w.da=g!=null&&0<g.da,w.da){if(!Re($,W,C=[g.ib],R=[g.hb]))return 0;w.ib=C[0],w.hb=R[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*N/4&&w.hb<3*L/4,w.Kb=0),1}function Lh(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function xu(g,w,C,N){if(N==null||0>=g||0>=w)return 2;if(C!=null){if(C.Da){var L=C.cd,R=C.bd,D=-2&C.v,$=-2&C.j;if(0>D||0>$||0>=L||0>=R||D+L>g||$+R>w)return 2;g=L,w=R}if(C.da){if(!Re(g,w,L=[C.ib],R=[C.hb]))return 2;g=L[0],w=R[0]}}N.width=g,N.height=w;e:{var W=N.width,J=N.height;if(g=N.S,0>=W||0>=J||!(g>=qm&&13>g))g=2;else{if(0>=N.Rd&&N.sd==null){D=R=L=w=0;var ae=($=W*u_[g])*J;if(11>g||(R=(J+1)/2*(w=(W+1)/2),g==12&&(D=(L=W)*J)),(J=s(ae+2*R+D))==null){g=1;break e}N.sd=J,11>g?((W=N.f.RGBA).eb=J,W.fb=0,W.A=$,W.size=ae):((W=N.f.kb).y=J,W.O=0,W.fa=$,W.Fd=ae,W.f=J,W.N=0+ae,W.Ab=w,W.Cd=R,W.ea=J,W.W=0+ae+R,W.Db=w,W.Ed=R,g==12&&(W.F=J,W.J=0+ae+2*R),W.Tc=D,W.lb=L)}if(w=1,L=N.S,R=N.width,D=N.height,L>=qm&&13>L)if(11>L)g=N.f.RGBA,w&=($=Math.abs(g.A))*(D-1)+R<=g.size,w&=$>=R*u_[L],w&=g.eb!=null;else{g=N.f.kb,$=(R+1)/2,ae=(D+1)/2,W=Math.abs(g.fa),J=Math.abs(g.Ab);var me=Math.abs(g.Db),ge=Math.abs(g.lb),de=ge*(D-1)+R;w&=W*(D-1)+R<=g.Fd,w&=J*(ae-1)+$<=g.Cd,w=(w&=me*(ae-1)+$<=g.Ed)&W>=R&J>=$&me>=$,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,L==12&&(w&=ge>=R,w&=de<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||C!=null&&C.fd&&(g=Lh(N)),g}var yr=64,wu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Su=24,ku=32,Oh=8,hi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(g){return g},E.Predictor2=function(g,w,C){return w[C+0]},E.Predictor3=function(g,w,C){return w[C+1]},E.Predictor4=function(g,w,C){return w[C-1]},E.Predictor5=function(g,w,C){return je(je(g,w[C+1]),w[C+0])},E.Predictor6=function(g,w,C){return je(g,w[C-1])},E.Predictor7=function(g,w,C){return je(g,w[C+0])},E.Predictor8=function(g,w,C){return je(w[C-1],w[C+0])},E.Predictor9=function(g,w,C){return je(w[C+0],w[C+1])},E.Predictor10=function(g,w,C){return je(je(g,w[C-1]),je(w[C+0],w[C+1]))},E.Predictor11=function(g,w,C){var N=w[C+0];return 0>=it(N>>24&255,g>>24&255,(w=w[C-1])>>24&255)+it(N>>16&255,g>>16&255,w>>16&255)+it(N>>8&255,g>>8&255,w>>8&255)+it(255&N,255&g,255&w)?N:g},E.Predictor12=function(g,w,C){var N=w[C+0];return(Ve((g>>24&255)+(N>>24&255)-((w=w[C-1])>>24&255))<<24|Ve((g>>16&255)+(N>>16&255)-(w>>16&255))<<16|Ve((g>>8&255)+(N>>8&255)-(w>>8&255))<<8|Ve((255&g)+(255&N)-(255&w)))>>>0},E.Predictor13=function(g,w,C){var N=w[C-1];return(Qe((g=je(g,w[C+0]))>>24&255,N>>24&255)<<24|Qe(g>>16&255,N>>16&255)<<16|Qe(g>>8&255,N>>8&255)<<8|Qe(g>>0&255,N>>0&255))>>>0};var Y1=E.PredictorAdd0;E.PredictorAdd1=pt,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var Ih=E.PredictorAdd2;yt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Fm,ts=E.ColorIndexInverseTransform,Cu=E.MapARGB,Bm=E.VP8LColorIndexInverseTransformAlpha,zm=E.MapAlpha,Sa=E.VP8LPredictorsAdd=[];Sa.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Kl,fi,Xr,ka,jo,Lo,_u,Oo,On,Rh,Jr,ns,Au,$m,Dh,Gl,Yl,Ca,Xl,Nu,Jl,_a,Fh,rs,is,Xt,Jt,In,Qn=s(511),Io=s(2041),Bh=s(225),Tu=s(767),Vm=0,X1=Io,Um=Bh,Ii=Tu,ss=Qn,qm=0,Wm=1,QC=2,Hm=3,Km=4,J1=5,ZC=6,Q1=7,Z1=8,Gm=9,eb=10,U8=[2,3,7],q8=[3,3,11],e_=[280,256,256,256,40],W8=[0,1,1,1,0],H8=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],K8=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G8=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Y8=8,tb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zh=null,X8=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],J8=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],t_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Q8=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Z8=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],e7=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],t7=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Aa=[],js=[],Ro=[],n7=1,n_=2,Na=[],as=[];we("UpsampleRgbLinePair",Pt,3),we("UpsampleBgrLinePair",mn,3),we("UpsampleRgbaLinePair",Ms,4),we("UpsampleBgraLinePair",rr,4),we("UpsampleArgbLinePair",Pr,4),we("UpsampleRgba4444LinePair",Wn,2),we("UpsampleRgb565LinePair",kn,2);var r7=E.UpsampleRgbLinePair,i7=E.UpsampleBgrLinePair,r_=E.UpsampleRgbaLinePair,i_=E.UpsampleBgraLinePair,s_=E.UpsampleArgbLinePair,o_=E.UpsampleRgba4444LinePair,s7=E.UpsampleRgb565LinePair,Ym=16,Xm=1<<Ym-1,$h=-227,rb=482,a_=6,o7=(256<<a_)-1,l_=0,a7=s(256),l7=s(256),c7=s(256),u7=s(256),d7=s(rb-$h),h7=s(rb-$h);io("YuvToRgbRow",Pt,3),io("YuvToBgrRow",mn,3),io("YuvToRgbaRow",Ms,4),io("YuvToBgraRow",rr,4),io("YuvToArgbRow",Pr,4),io("YuvToRgba4444Row",Wn,2),io("YuvToRgb565Row",kn,2);var c_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jm=[0,2,8],f7=[8,7,6,4,4,2,2,2,1,1,1,1],p7=1;this.WebPDecodeRGBA=function(g,w,C,N,L){var R=Wm,D=new yu,$=new Ei;D.ba=$,$.S=R,$.width=[$.width],$.height=[$.height];var W=$.width,J=$.height,ae=new Ts;if(ae==null||g==null)var me=2;else e(ae!=null),me=bu(g,w,C,ae.width,ae.height,ae.Pd,ae.Qd,ae.format,null);if(me!=0?W=0:(W!=null&&(W[0]=ae.width[0]),J!=null&&(J[0]=ae.height[0]),W=1),W){$.width=$.width[0],$.height=$.height[0],N!=null&&(N[0]=$.width),L!=null&&(L[0]=$.height);e:{if(N=new uu,(L=new Ah).data=g,L.w=w,L.ha=C,L.kd=1,w=[0],e(L!=null),((g=bu(L.data,L.w,L.ha,null,null,null,w,null,L))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(D!=null),N.data=L.data,N.w=L.w+L.offset,N.ha=L.ha-L.offset,N.put=ci,N.ac=jn,N.bc=gr,N.ma=D,L.xa){if((g=Nr())==null){D=1;break e}if(function(ge,de){var Ae=[0],xe=[0],le=[0];t:for(;;){if(ge==null)return 0;if(de==null)return ge.a=2,0;if(ge.l=de,ge.a=0,X(ge.m,de.data,de.w,de.ha),!Ye(ge.m,Ae,xe,le)){ge.a=3;break t}if(ge.xb=n_,de.width=Ae[0],de.height=xe[0],!Li(Ae[0],xe[0],1,ge,null))break t;return 1}return e(ge.a!=0),0}(g,N)){if(N=(w=xu(N.width,N.height,D.Oa,D.ba))==0){t:{N=g;n:for(;;){if(N==null){N=0;break t}if(e(N.s.yc!=null),e(N.s.Ya!=null),e(0<N.s.Wb),e((C=N.l)!=null),e((L=C.ma)!=null),N.xb!=0){if(N.ca=L.ba,N.tb=L.tb,e(N.ca!=null),!jh(L.Oa,C,Hm)){N.a=2;break n}if(!Eo(N,C.width)||C.da)break n;if((C.da||It(N.ca.S))&&pe(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&pe()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!Se(N.s.vb,N.s.Wa.Xa)){N.a=1;break n}N.xb=0}if(!Mi(N,N.V,N.Ba,N.c,N.i,C.o,hn))break n;L.Dc=N.Ma,N=1;break t}e(N.a!=0),N=0}N=!N}N&&(w=g.a)}else w=g.a}else{if((g=new P1)==null){D=1;break e}if(g.Fa=L.na,g.P=L.P,g.qc=L.Sa,Sm(g,N)){if((w=xu(N.width,N.height,D.Oa,D.ba))==0){if(g.Aa=0,C=D.Oa,e((L=g)!=null),C!=null){if(0<(W=0>(W=C.Md)?0:100<W?255:255*W/100)){for(J=ae=0;4>J;++J)12>(me=L.pb[J]).lc&&(me.ia=W*f7[0>me.lc?0:me.lc]>>3),ae|=me.ia;ae&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=C.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}M1(g,N)||(w=g.a)}}else w=g.a}w==0&&D.Oa!=null&&D.Oa.fd&&(w=Lh(D.ba))}D=w}R=D!=0?null:11>R?$.f.RGBA.eb:$.f.kb.y}else R=null;return R};var u_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,z){for(var H="",j=0;j<4;j++)H+=String.fromCharCode(E[z++]);return H}function u(E,z){return(E[z+0]<<0|E[z+1]<<8|E[z+2]<<16)>>>0}function d(E,z){return(E[z+0]<<0|E[z+1]<<8|E[z+2]<<16|E[z+3]<<24)>>>0}new l;var h=[0],f=[0],p=[],y=new l,b=t,v=function(E,z){var H={},j=0,I=!1,q=0,F=0;if(H.frames=[],!function(U,G,Z,re){for(var se=0;se<re;se++)if(U[G+se]!=Z.charCodeAt(se))return!0;return!1}(E,z,"RIFF",4)){var ne,Y;for(d(E,z+=4),z+=8;z<E.length;){var ee=c(E,z),X=d(E,z+=4);z+=4;var ie=X+(1&X);switch(ee){case"VP8 ":case"VP8L":H.frames[j]===void 0&&(H.frames[j]={}),(M=H.frames[j]).src_off=I?F:z-8,M.src_size=q+X+8,j++,I&&(I=!1,q=0,F=0);break;case"VP8X":(M=H.header={}).feature_flags=E[z];var V=z+4;M.canvas_width=1+u(E,V),V+=3,M.canvas_height=1+u(E,V),V+=3;break;case"ALPH":I=!0,q=ie+8,F=z-8;break;case"ANIM":(M=H.header).bgcolor=d(E,z),V=z+4,M.loop_count=(ne=E)[(Y=V)+0]<<0|ne[Y+1]<<8,V+=2;break;case"ANMF":var K,M;(M=H.frames[j]={}).offset_x=2*u(E,z),z+=3,M.offset_y=2*u(E,z),z+=3,M.width=1+u(E,z),z+=3,M.height=1+u(E,z),z+=3,M.duration=u(E,z),z+=3,K=E[z++],M.dispose=1&K,M.blend=K>>1&1}ee!="ANMF"&&(z+=ie)}return H}}(b,0);v.response=b,v.rgbaoutput=!0,v.dataurl=!1;var x=v.header?v.header:null,S=v.frames?v.frames:null;if(x){x.loop_counter=x.loop_count,h=[x.canvas_height],f=[x.canvas_width];for(var _=0;_<S.length&&S[_].blend!=0;_++);}var A=S[0],T=y.WebPDecodeRGBA(b,A.src_off,A.src_size,f,h);A.rgba=T,A.imgwidth=f[0],A.imgheight=h[0];for(var P=0;P<f[0]*h[0]*4;P++)p[P]=T[P];return this.width=f,this.height=h,this.data=p,this}(function(t){var e=function(){return typeof Q5=="function"},n=function(h,f,p,y){var b=4,v=o;switch(y){case t.image_compression.FAST:b=1,v=s;break;case t.image_compression.MEDIUM:b=6,v=a;break;case t.image_compression.SLOW:b=9,v=l}h=r(h,f,p,v);var x=Q5(h,{level:b});return t.__addimage__.arrayBufferToBinaryString(x)},r=function(h,f,p,y){for(var b,v,x,S=h.length/f,_=new Uint8Array(h.length+S),A=u(),T=0;T<S;T+=1){if(x=T*f,b=h.subarray(x,x+f),y)_.set(y(b,p,v),x+T);else{for(var P,E=A.length,z=[];P<E;P+=1)z[P]=A[P](b,p,v);var H=d(z.concat());_.set(z[H],x+T)}v=b}return _},i=function(h){var f=Array.apply([],h);return f.unshift(0),f},s=function(h,f){var p,y=[],b=h.length;y[0]=1;for(var v=0;v<b;v+=1)p=h[v-f]||0,y[v+1]=h[v]-p+256&255;return y},o=function(h,f,p){var y,b=[],v=h.length;b[0]=2;for(var x=0;x<v;x+=1)y=p&&p[x]||0,b[x+1]=h[x]-y+256&255;return b},a=function(h,f,p){var y,b,v=[],x=h.length;v[0]=3;for(var S=0;S<x;S+=1)y=h[S-f]||0,b=p&&p[S]||0,v[S+1]=h[S]+256-(y+b>>>1)&255;return v},l=function(h,f,p){var y,b,v,x,S=[],_=h.length;S[0]=4;for(var A=0;A<_;A+=1)y=h[A-f]||0,b=p&&p[A]||0,v=p&&p[A-f]||0,x=c(y,b,v),S[A+1]=h[A]-x+256&255;return S},c=function(h,f,p){if(h===f&&f===p)return h;var y=Math.abs(f-p),b=Math.abs(h-p),v=Math.abs(h+f-p-p);return y<=b&&y<=v?h:b<=v?f:p},u=function(){return[i,s,o,a,l]},d=function(h){var f=h.map(function(p){return p.reduce(function(y,b){return y+Math.abs(b)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(h,f,p,y){var b,v,x,S,_,A,T,P,E,z,H,j,I,q,F,ne=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(x=new Bue(h)).imgData,v=x.bits,b=x.colorSpace,_=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){E=(P=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,H=new Uint8Array(E*x.colors),z=new Uint8Array(E);var ee,X=x.pixelBitlength-x.bits;for(q=0,F=0;q<E;q++){for(I=P[q],ee=0;ee<X;)H[F++]=I>>>ee&255,ee+=x.bits;z[q]=I>>>ee&255}}if(x.bits===16){E=(P=new Uint32Array(x.decodePixels().buffer)).length,H=new Uint8Array(E*(32/x.pixelBitlength)*x.colors),z=new Uint8Array(E*(32/x.pixelBitlength)),j=x.colors>1,q=0,F=0;for(var ie=0;q<E;)I=P[q++],H[F++]=I>>>0&255,j&&(H[F++]=I>>>16&255,I=P[q++],H[F++]=I>>>0&255),z[ie++]=I>>>16&255;v=8}y!==t.image_compression.NONE&&e()?(h=n(H,x.width*x.colors,x.colors,y),T=n(z,x.width,1,y)):(h=H,T=z,ne=void 0)}if(x.colorType===3&&(b=this.color_spaces.INDEXED,A=x.palette,x.transparency.indexed)){var V=x.transparency.indexed,K=0;for(q=0,E=V.length;q<E;++q)K+=V[q];if((K/=255)===E-1&&V.indexOf(0)!==-1)S=[V.indexOf(0)];else if(K!==E){for(P=x.decodePixels(),z=new Uint8Array(P.length),q=0,E=P.length;q<E;q++)z[q]=V[P[q]];T=n(z,x.width,1)}}var M=function(U){var G;switch(U){case t.image_compression.FAST:G=11;break;case t.image_compression.MEDIUM:G=13;break;case t.image_compression.SLOW:G=14;break;default:G=12}return G}(y);return ne===this.decode.FLATE_DECODE&&(Y="/Predictor "+M+" "),Y+="/Colors "+_+" /BitsPerComponent "+v+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:p,data:h,index:f,filter:ne,decodeParameters:Y,transparency:S,palette:A,sMask:T,predictor:M,width:x.width,height:x.height,bitsPerComponent:v,colorSpace:b}}}})(lt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new zue(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new c2(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(lt.API),Rs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rs.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ht.log("bit decode error:"+n)}},Rs.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Rs.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Rs.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Rs.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},Rs.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Rs.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Rs.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Rs.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Rs(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new c2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(lt.API),jP.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new jP(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new c2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(lt.API),lt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];s[a++]=u,s[a++]=d,s[a++]=h,o[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},lt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qu=lt.API,y0=qu.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=t.length,p=0,y=a[0]||l,b=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(h=d&&Je(c[r])==="object"&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,b.push((a[r]||y)/l+h)),p=r;return b},TP=qu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return qu.processArabic&&(t=qu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:y0.apply(this,arguments).reduce(function(s,o){return s+o},0)},EP=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},PP=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],d=[u],h=n.textIndent||0,f=0,p=0,y=t.split(" "),b=y0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),x=[];y.map(function(_){(_=_.split(/\s*\n/)).length>1?x=x.concat(_.map(function(A,T){return(T&&A.length?`
`:"")+A})):x.push(_[0])}),y=x,l=TP.apply(this,[v,n])}for(s=0,o=y.length;s<o;s++){var S=0;if(r=y[s],l&&r[0]==`
`&&(r=r.substr(1),S=1),h+f+(p=(i=y0.apply(this,[r,n])).reduce(function(_,A){return _+A},0))>e||S){if(p>e){for(a=EP.apply(this,[r,i,e-(h+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(_,A){return _+A},0)}else u=[r];d.push(u),h=p+l,f=b}else u.push(r),h+=f+p,f=b}return c=l?function(_,A){return(A?v:"")+_.join(" ")}:function(_){return _.join(" ")},d.map(c)},qu.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(PP.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,f,p,y,b=["{"];for(var v in d){if(h=d[v],isNaN(parseInt(v,10))?f="'"+v+"'":(v=parseInt(v,10),f=(f=s(v).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(p=s(h).slice(3),y="-"):(p=s(h).slice(2),y=""),p=y+p.slice(0,-1)+r[p.slice(-1)];else{if(Je(h)!=="object")throw new Error("Don't know what to do with value type "+Je(h)+".");p=o(h)}b.push(f+p)}return b.push("}"),b.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,p,y,b={},v=1,x=b,S=[],_="",A="",T=d.length-1,P=1;P<T;P+=1)(y=d[P])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(S.push([x,p]),x={},p=void 0):y=="}"?((f=S.pop())[0][f[1]]=x,p=void 0,x=f[0]):y=="-"?v=-1:p===void 0?n.hasOwnProperty(y)?(_+=n[y],p=parseInt(_,16)*v,v=1,_=""):_+=y:n.hasOwnProperty(y)?(A+=n[y],x[p]=parseInt(A,16)*v,v=1,p=void 0,A=""):A+=y;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,f=u.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(lt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(np(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(lt),function(t){function e(){return(ct.canvg?Promise.resolve(ct.canvg):Cl(()=>import("./index.es-381bca80.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}lt.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Ht.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ht.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(p){return p.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),lt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},lt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(p,y){var b,v=!1;for(b=0;b<p.length;b+=1)p[b]===y&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(d=0;d<f;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Je(t)==="object"){for(i in t)if(s=t[i],h(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&h(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,y=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?y.push("/"+p+" /"+n[p].value):y.push("/"+p+" "+n[p].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(lt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(s).sort(function(f,p){return f-p})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var y=c();u({data:f,addLength1:!0,objectId:y}),l("endobj");var b=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var v=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Yu(a.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Yu(a.fontName)),l("/FontDescriptor "+v+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Yu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var p=c();u({data:h,addLength1:!0,objectId:p}),l("endobj");var y=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var b=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Yu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var v=0;v<a.metadata.hmtx.widths.length;v++)a.metadata.hmtx.widths[v]=parseInt(a.metadata.hmtx.widths[v]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Yu(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,f=d.activeFontKey,p=d.fonts,y=f,b="",v=0,x="",S=p[y].encoding;if(p[y].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(x=a,y=f,Array.isArray(a)&&(x=a[0]),v=0;v<x.length;v+=1)p[y].metadata.hasOwnProperty("cmap")&&(o=p[y].metadata.cmap.unicode.codeMap[x[v].charCodeAt(0)]),o||x[v].charCodeAt(0)<256&&p[y].metadata.hasOwnProperty("Unicode")?b+=x[v]:b+="";var _="";return parseInt(y.slice(1))<14||S==="WinAnsiEncoding"?_=h(b,y).split("").map(function(A){return A.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(_=n(b,p[y])),d.isHex=!0,{text:_,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(lt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(lt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,S=0;this.__bidiEngine__={};var _=function(j){var I=j.charCodeAt(),q=I>>8,F=y[q];return F!==void 0?d[256*F+(255&I)]:q===252||q===253?"AL":v.test(q)?"L":q===8?"R":"N"},A=function(j){for(var I,q=0;q<j.length;q++){if((I=_(j.charAt(q)))==="L")return!1;if(I==="R")return!0}return!1},T=function(j,I,q,F){var ne,Y,ee,X,ie=I[F];switch(ie){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(ie="AN");break;case"AL":x=!0,ie="R";break;case"WS":ie="N";break;case"CS":F<1||F+1>=I.length||(ne=q[F-1])!=="EN"&&ne!=="AN"||(Y=I[F+1])!=="EN"&&Y!=="AN"?ie="N":x&&(Y="AN"),ie=Y===ne?Y:"N";break;case"ES":ie=(ne=F>0?q[F-1]:"B")==="EN"&&F+1<I.length&&I[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&q[F-1]==="EN"){ie="EN";break}if(x){ie="N";break}for(ee=F+1,X=I.length;ee<X&&I[ee]==="ET";)ee++;ie=ee<X&&I[ee]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=I.length,ee=F+1;ee<X&&I[ee]==="NSM";)ee++;if(ee<X){var V=j[F],K=V>=1425&&V<=2303||V===64286;if(ne=I[ee],K&&(ne==="R"||ne==="AL")){ie="R";break}}}ie=F<1||(ne=I[F-1])==="B"?"N":q[F-1];break;case"B":x=!1,i=!0,ie=S;break;case"S":s=!0,ie="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":ie="N"}return ie},P=function(j,I,q){var F=j.split("");return q&&E(F,q,{hiLevel:S}),F.reverse(),I&&I.reverse(),F.join("")},E=function(j,I,q){var F,ne,Y,ee,X,ie=-1,V=j.length,K=0,M=[],U=S?f:h,G=[];for(x=!1,i=!1,s=!1,ne=0;ne<V;ne++)G[ne]=_(j[ne]);for(Y=0;Y<V;Y++){if(X=K,M[Y]=T(j,G,M,Y),F=240&(K=U[X][p[M[Y]]]),K&=15,I[Y]=ee=U[K][5],F>0)if(F===16){for(ne=ie;ne<Y;ne++)I[ne]=1;ie=-1}else ie=-1;if(U[K][6])ie===-1&&(ie=Y);else if(ie>-1){for(ne=ie;ne<Y;ne++)I[ne]=ee;ie=-1}G[Y]==="B"&&(I[Y]=0),q.hiLevel|=ee}s&&function(Z,re,se){for(var ce=0;ce<se;ce++)if(Z[ce]==="S"){re[ce]=S;for(var he=ce-1;he>=0&&Z[he]==="WS";he--)re[he]=S}}(G,I,V)},z=function(j,I,q,F,ne){if(!(ne.hiLevel<j)){if(j===1&&S===1&&!i)return I.reverse(),void(q&&q.reverse());for(var Y,ee,X,ie,V=I.length,K=0;K<V;){if(F[K]>=j){for(X=K+1;X<V&&F[X]>=j;)X++;for(ie=K,ee=X-1;ie<ee;ie++,ee--)Y=I[ie],I[ie]=I[ee],I[ee]=Y,q&&(Y=q[ie],q[ie]=q[ee],q[ee]=Y);K=X}K++}}},H=function(j,I,q){var F=j.split(""),ne={hiLevel:S};return q||(q=[]),E(F,q,ne),function(Y,ee,X){if(X.hiLevel!==0&&u)for(var ie,V=0;V<Y.length;V++)ee[V]===1&&(ie=b.indexOf(Y[V]))>=0&&(Y[V]=b[ie+1])}(F,q,ne),z(2,F,I,q,ne),z(1,F,I,q,ne),F.join("")};return this.__bidiEngine__.doBidiReorder=function(j,I,q){if(function(ne,Y){if(Y)for(var ee=0;ee<ne.length;ee++)Y[ee]=ee;a===void 0&&(a=A(ne)),c===void 0&&(c=A(ne))}(j,I),o||!l||c)if(o&&l&&a^c)S=a?1:0,j=P(j,I,q);else if(!o&&l&&c)S=a?1:0,j=H(j,I,q),j=P(j,I);else if(!o||a||l||c){if(o&&!l&&a^c)j=P(j,I),a?(S=0,j=H(j,I,q)):(S=1,j=H(j,I,q),j=P(j,I));else if(o&&a&&!l&&c)S=1,j=H(j,I,q),j=P(j,I);else if(!o&&!l&&a^c){var F=u;a?(S=1,j=H(j,I,q),S=0,u=!1,j=H(j,I,q),u=F):(S=0,j=H(j,I,q),j=P(j,I),S=1,u=!1,j=H(j,I,q),u=F,j=P(j,I))}}else S=0,j=H(j,I,q);else S=a?1:0,j=H(j,I,q);return j},this.__bidiEngine__.setOptions=function(j){j&&(o=j.isInputVisual,l=j.isOutputVisual,a=j.isInputRtl,c=j.isOutputRtl,u=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(lt),lt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new jl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new tde(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new $ue(this.contents),this.head=new Uue(this),this.name=new Gue(this),this.cmap=new z8(this),this.toUnicode={},this.hhea=new que(this),this.maxp=new Yue(this),this.hmtx=new Xue(this),this.post=new Hue(this),this.os2=new Wue(this),this.loca=new ede(this),this.glyf=new Jue(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var to,jl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),$ue=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,d,h,f,p,y;for(y in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),o=Math.floor(d/l),u=16*f-d,(i=new jl).writeInt(this.scalarType),i.writeShort(f),i.writeShort(d),i.writeShort(o),i.writeShort(u),s=16*f,c=i.pos+s,a=null,p=[],n)for(h=n[y],i.writeString(y),i.writeInt(t(h)),i.writeInt(c),i.writeInt(h.length),p=p.concat(h),y==="head"&&(a=c),c+=h.length;c%4;)p.push(0),c++;return i.write(p),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=$8.call(n);n.length%4;)n.push(0);for(s=new jl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),Vue={}.hasOwnProperty,No=function(t,e){for(var n in e)Vue.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};to=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Uue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new jl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),LP=function(){function t(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,y,b,v,x,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,s=function(){var _,A;for(A=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)A.push(e.readUInt16());return A}(),e.pos+=2,y=function(){var _,A;for(A=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)A.push(e.readUInt16());return A}(),c=function(){var _,A;for(A=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)A.push(e.readUInt16());return A}(),u=function(){var _,A;for(A=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)A.push(e.readUInt16());return A}(),i=(this.length-e.pos+this.offset)/2,a=function(){var _,A;for(A=[],l=_=0;0<=i?_<i:_>i;l=0<=i?++_:--_)A.push(e.readUInt16());return A}(),l=v=0,S=s.length;v<S;l=++v)for(b=s[l],r=x=p=y[l];p<=b?x<=b:x>=b;r=p<=b?++x:--x)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-p)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,y,b,v,x,S,_,A,T,P,E,z,H,j,I,q,F,ne,Y,ee,X,ie,V,K,M,U,G,Z,re,se,ce,he,ke,be,ye;switch(F=new jl,o=Object.keys(e).sort(function(ve,Se){return ve-Se}),n){case"macroman":for(y=0,b=function(){var ve=[];for(p=0;p<256;++p)ve.push(0);return ve}(),x={0:0},s={},ne=0,ie=o.length;ne<ie;ne++)x[he=e[i=o[ne]]]==null&&(x[he]=++y),s[i]={old:e[i],new:x[e[i]]},b[i]=x[e[i]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(b),{charMap:s,subtable:F.data,maxGlyphID:y+1};case"unicode":for(I=[],d=[],S=0,x={},r={},v=c=null,Y=0,V=o.length;Y<V;Y++)x[A=e[i=o[Y]]]==null&&(x[A]=++S),r[i]={old:A,new:x[A]},a=x[A]-i,v!=null&&a===c||(v&&d.push(v),I.push(i),c=a),v=i;for(v&&d.push(v),d.push(65535),I.push(65535),H=2*(z=I.length),E=2*Math.pow(Math.log(z)/Math.LN2,2),h=Math.log(E/2)/Math.LN2,P=2*z-E,l=[],T=[],f=[],p=ee=0,K=I.length;ee<K;p=++ee){if(j=I[p],u=d[p],j===65535){l.push(0),T.push(0);break}if(j-(q=r[j].new)>=32768)for(l.push(0),T.push(2*(f.length+z-p)),i=X=j;j<=u?X<=u:X>=u;i=j<=u?++X:--X)f.push(r[i].new);else l.push(q-j),T.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*z+2*f.length),F.writeUInt16(0),F.writeUInt16(H),F.writeUInt16(E),F.writeUInt16(h),F.writeUInt16(P),se=0,M=d.length;se<M;se++)i=d[se],F.writeUInt16(i);for(F.writeUInt16(0),ce=0,U=I.length;ce<U;ce++)i=I[ce],F.writeUInt16(i);for(ke=0,G=l.length;ke<G;ke++)a=l[ke],F.writeUInt16(a);for(be=0,Z=T.length;be<Z;be++)_=T[be],F.writeUInt16(_);for(ye=0,re=f.length;ye<re;ye++)y=f[ye],F.writeUInt16(y);return{charMap:r,subtable:F.data,maxGlyphID:S+1}}},t}(),z8=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new LP(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=LP.encode(n,r),(s=new jl).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),que=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),Wue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Hue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}.call(this)}},e}(),Kue=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Gue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,u,d,h,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,h=i.length;d<h;o=++d)s=i[o],n.pos=s.offset,u=n.readString(s.length),a=new Kue(u,s),c[f=s.nameID]==null&&(c[f]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Yue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Xue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(n.readInt16());return d}(),this.widths=function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)o=h[u],f.push(o.advance);return f}.call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),$8=[].slice,Jue=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,u,d,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new jl(r.read(s))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new Zue(l,u,h,c,d):new Que(l,a,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),Que=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Zue=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new jl($8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),ede=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return No(e,to),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*i.length),d=0;d<i.length;++d)u[4*d+3]=255&i[d],u[4*d+2]=(65280&i[d])>>8,u[4*d+1]=(16711680&i[d])>>16,u[4*d]=(4278190080&i[d])>>24;return u},e}(),tde=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,y,b,v;for(i in r=z8.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},v=r.charMap)f[(l=v[i]).old]=l.new;for(p in h=r.maxGlyphID,o)p in f||(f[p]=h++);return u=function(x){var S,_;for(S in _={},x)_[x[S]]=S;return _}(f),d=Object.keys(u).sort(function(x,S){return x-S}),y=function(){var x,S,_;for(_=[],x=0,S=d.length;x<S;x++)a=d[x],_.push(u[a]);return _}(),s=this.font.glyf.encode(o,y,f),c=this.font.loca.encode(s.offsets,y),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},t}();lt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();async function nde({studentName:t,experimentTitle:e,strandProgress:n,userInputs:r,points:i,earnedBadges:s}){const o=new lt;let a=20;o.setFontSize(16),o.text(`Lab Report - ${t}`,105,a,{align:"center"}),a+=10,o.setFontSize(12),o.text(`Experiment: ${e}`,20,a),a+=8,o.text(`Student: ${t}`,20,a),a+=8,o.text(`Date: ${new Date().toLocaleDateString()}`,20,a),a+=8,o.text(`Total Score: ${n.reduce((l,c)=>l+c,0)}/40`,20,a),a+=8,o.text(`Points: ${i}`,20,a),a+=8,o.text(`Badges Earned: ${Object.values(s).filter(Boolean).length}/5`,20,a),a+=10;for(let l=0;l<5;l++){o.setFont("helvetica","bold"),o.text(`${l+1}. Strand ${l+1}`,20,a),a+=8,o.setFont("helvetica","normal"),o.text(`Level: ${n[l]||0}/8`,20,a),a+=6,o.text("Content:",20,a),a+=6;const c=r[`strand${l+1}`]?.level8||"",u=document.createElement("div");u.innerHTML=c;for(const d of Array.from(u.childNodes)){if(d.nodeType===3){const h=o.splitTextToSize(d.textContent||"",170);o.text(h,20,a),a+=h.length*6}else if(d.nodeName==="IMG"){const h=d;h.src.startsWith("data:image")&&(o.addImage(h.src,"JPEG",20,a,100,60),a+=65)}else if(d.nodeType===1){const h=d,f=o.splitTextToSize(h.innerText,170);o.text(f,20,a),a+=f.length*6}a>270&&(o.addPage(),a=20)}a+=8}return o.setFont("helvetica","bold"),o.text("Badges Summary:",20,a),a+=8,o.setFont("helvetica","normal"),Object.entries(s).forEach(([l,c])=>{o.text(`${l}: ${c?"✓":"✗"}`,20,a),a+=6}),o.output("blob")}const rde=({studentName:t,learningPathChoice:e,learningPathData:n,setScreen:r,setStudentName:i,setLearningPathChoice:s,setCurrentStrand:o,pdfDataUrl:a,setPdfDataUrl:l,isPdfGenerating:c,setIsPdfGenerating:u,onReset:d})=>{const{strandProgress:h,userInputs:f,setStrandProgress:p,setUserInputs:y,earnedBadges:b,setEarnedBadges:v,points:x,setPoints:S,strandStatus:_,setStrandStatus:A}=lm(),T=h.reduce((H,j)=>H+j,0),P=Object.values(b??{}).filter(Boolean).length;B.useRef(null);const E=async()=>{try{u(!0);const H=await nde({studentName:t,experimentTitle:n[e]?.title||"TIR Learning Path",strandProgress:h,userInputs:f,points:x,earnedBadges:b}),j=URL.createObjectURL(H);l(j)}catch(H){alert("Failed to generate PDF"),console.error(H)}finally{u(!1)}},z=()=>{r("welcome"),i(""),s(null),o(1),p([0,0,0,0]),y({strand1:{level2:"",level4:"",level6:"",level8:""},strand2:{level2:"",level4:"",level6:"",level8:""},strand3:{level2:"",level4:"",level6:"",level8:""},strand4:{level2:"",level4:"",level6:"",level8:""}}),v({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1}),S(0),A(["in progress","not started","not started","not started"]),l(""),u(!1)};return m.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[m.jsxs("h1",{className:"text-3xl font-bold text-center text-purple-800 mb-4",children:["🌟 Well Done, ",t,"! 💎"]}),m.jsxs("p",{className:"text-center text-lg mb-6",children:["You completed the ",m.jsx("strong",{children:n[e]?.title})," learning journey."]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-6",children:[m.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[m.jsx("p",{className:"text-sm text-purple-800",children:"Total Score"}),m.jsx("p",{className:"text-3xl font-bold text-purple-800",children:T})]}),m.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[m.jsx("p",{className:"text-sm text-purple-800",children:"Points"}),m.jsx("p",{className:"text-3xl font-bold text-purple-800",children:x})]}),m.jsxs("div",{className:"bg-purple-100 p-4 rounded-lg",children:[m.jsx("p",{className:"text-sm text-purple-800",children:"Badges"}),m.jsxs("p",{className:"text-3xl font-bold text-purple-800",children:[P,"/4"]})," "]})]}),m.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg mb-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:["🎯 Learning Path: ",e==="critical-angle"?"Discovering Critical Angles":"How Fibre Optics Work"]}),m.jsx("p",{className:"text-purple-700",children:e==="critical-angle"?"You explored the physics behind total internal reflection and discovered the critical angle where this phenomenon begins.":"You investigated how light travels through glass fibers to enable modern communication and medical technologies."})]}),Array.from({length:4}).map((H,j)=>{const I=f[`strand${j+1}`]?.level8||"",q=["TIR Principles & Laws","Understanding TIR Phenomena","Real-World Applications","Analysis & Problem Solving"];return m.jsxs("div",{className:"border border-purple-200 p-4 rounded bg-white mb-4",children:[m.jsxs("h3",{className:"text-lg font-semibold text-purple-700",children:["Strand ",j+1,": ",q[j]]}),m.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Level: ",h[j]||0,"/8"]}),m.jsx("div",{className:"prose max-w-none text-sm text-gray-700",dangerouslySetInnerHTML:{__html:I}})]},j)}),m.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:"🏆 Badges Earned"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"principlePioneer",label:"Principle Pioneer",icon:"🔬",description:"TIR laws mastered"},{key:"conceptCrusader",label:"Concept Crusader",icon:"🧠",description:"Deep understanding"},{key:"applicationAce",label:"Application Ace",icon:"⚡",description:"Real-world connections"},{key:"analysisArchitect",label:"Analysis Architect",icon:"📊",description:"Problem solving"}].map(H=>m.jsxs("div",{className:`p-3 rounded-lg text-center text-sm transition ${b[H.key]?"bg-purple-100 border-2 border-purple-400 text-purple-800":"bg-gray-100 border-2 border-gray-300 text-gray-400"}`,children:[m.jsx("div",{className:"text-2xl mb-1",children:H.icon}),m.jsx("div",{className:"font-medium",children:H.label}),m.jsx("div",{className:"text-xs",children:H.description})]},H.key))})]}),m.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[m.jsx("button",{onClick:E,disabled:c,className:"bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition",children:c?"Generating PDF...":"📄 Generate PDF Report"}),a&&m.jsx("a",{href:a,download:`TIR_Report_${t.replace(/\s+/g,"_")}_${new Date().toLocaleDateString()}.pdf`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white text-center py-3 rounded-lg hover:bg-blue-700 transition",children:"📥 View & Download PDF"}),m.jsx("button",{onClick:d||z,className:"bg-purple-400 text-white py-3 rounded-lg hover:bg-purple-500 transition",children:"🔄 Try a Different Learning Path"})]})]})},ide=()=>{const[t,e]=B.useState("welcome"),[n,r]=B.useState(""),[i,s]=B.useState(null),[o,a]=B.useState(""),[l,c]=B.useState(0),[u,d]=B.useState(["in progress","not started","not started","not started"]),[h,f]=B.useState({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1}),[p,y]=B.useState(""),[b,v]=B.useState(!1),[x,S]=B.useState(1),_=(T,P)=>{r(T),s(P),a(P==="critical-angle"?"Discovering Critical Angles - Total Internal Reflection":"How Fibre Optics Work - Light Transmission Technology"),e("main")},A=()=>{e("welcome"),r(""),s(null),S(1),d(["in progress","not started","not started","not started"]),f({principlePioneer:!1,conceptCrusader:!1,applicationAce:!1,analysisArchitect:!1}),c(0),y(""),v(!1)};return m.jsx(fce,{children:m.jsxs(WW,{children:[t==="welcome"&&m.jsx(y9,{onStart:_}),t==="main"&&m.jsx(iue,{experimentTitle:o,learningPathData:{"critical-angle":{title:"Discovering Critical Angles - Total Internal Reflection"},"fiber-optics":{title:"How Fibre Optics Work - Light Transmission Technology"}},learningPathChoice:i,currentStrand:x,setCurrentStrand:S,points:l,setPoints:c,strandStatus:u,setStrandStatus:d,earnedBadges:h,setEarnedBadges:f,onNext:()=>e("results"),onBack:()=>e("welcome")}),t==="results"&&m.jsx(rde,{studentName:n,learningPathChoice:i,learningPathData:{"critical-angle":{title:"Discovering Critical Angles - Total Internal Reflection"},"fiber-optics":{title:"How Fibre Optics Work - Light Transmission Technology"}},setScreen:e,setStudentName:r,setLearningPathChoice:s,setCurrentStrand:S,pdfDataUrl:p,setPdfDataUrl:y,isPdfGenerating:b,setIsPdfGenerating:v,onReset:A})]})})};const sde="/tir-criteria-a",V8=document.getElementById("root");if(!V8)throw new Error("No root element found");u2.createRoot(V8).render(m.jsx(Ze.StrictMode,{children:m.jsx(rue,{basename:sde,children:m.jsx(ide,{})})}));export{Ge as _,ks as c,sS as g};
